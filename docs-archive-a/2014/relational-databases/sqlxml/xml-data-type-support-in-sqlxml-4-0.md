---
title: SQLXML 4.0 | での xml データ型のサポートMicrosoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- SQLXML, xml data type support
- xml data type [SQL Server], SQLXML
ms.assetid: 9a6f5ad8-4a8f-4de7-ac17-81d5ccf78459
author: rothja
ms.author: jroth
ms.openlocfilehash: 6a3b022bdbca23c2cfcdc89f01199a2135eb4bff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87644383"
---
# <a name="xml-data-type-support-in-sqlxml-40"></a><span data-ttu-id="3d17a-102">SQLXML 4.0 での xml データ型のサポート</span><span class="sxs-lookup"><span data-stu-id="3d17a-102">xml Data Type Support in SQLXML 4.0</span></span>
  <span data-ttu-id="3d17a-103">以降 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 、では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データ型を使用した XML 型のデータがサポートされてい `xml` ます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-103">Beginning with [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] supports XML typed data using the `xml` data type.</span></span> <span data-ttu-id="3d17a-104">ここでは、SQLXML 4.0 で `xml` データ型のインスタンスがどのように認識されるかと、それらがどのようにサポートされるかについて情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="3d17a-104">This topic provides information about how SQLXML 4.0 recognizes instances of the `xml` data type and implements support for them.</span></span>  
  
## <a name="working-with-xml-data-types"></a><span data-ttu-id="3d17a-105">xml データ型の使用</span><span class="sxs-lookup"><span data-stu-id="3d17a-105">Working with xml Data Types</span></span>  
 <span data-ttu-id="3d17a-106">`xml` データ型の列を実装する SQL テーブルの処理方法の理解に役立つように、次の例が用意されています。</span><span class="sxs-lookup"><span data-stu-id="3d17a-106">To understand more about how to work with SQL tables that implement `xml` data type columns, the following examples are provided:</span></span>  
  
|<span data-ttu-id="3d17a-107">タスク</span><span class="sxs-lookup"><span data-stu-id="3d17a-107">Task</span></span>|<span data-ttu-id="3d17a-108">例</span><span class="sxs-lookup"><span data-stu-id="3d17a-108">Example</span></span>|<span data-ttu-id="3d17a-109">トピック</span><span class="sxs-lookup"><span data-stu-id="3d17a-109">Topic</span></span>|  
|----------|-------------|-----------|  
|<span data-ttu-id="3d17a-110">`xml` 列を XML ビューにマップし、格納する方法</span><span class="sxs-lookup"><span data-stu-id="3d17a-110">How to map and include an `xml` column in an XML view</span></span>|<span data-ttu-id="3d17a-111">"XML 要素を XML データ型の列にマップする"</span><span class="sxs-lookup"><span data-stu-id="3d17a-111">"Mapping an XML element to an XML data type column"</span></span>|[<span data-ttu-id="3d17a-112">テーブルおよび列への XSD 要素と属性の既定のマッピング &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="3d17a-112">Default Mapping of XSD Elements and Attributes to Tables and Columns &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-using/default-mapping-of-xsd-elements-and-attributes-to-tables-and-columns-sqlxml-4-0.md)|  
|<span data-ttu-id="3d17a-113">アップデートグラムで `xml` 列にデータを挿入する方法</span><span class="sxs-lookup"><span data-stu-id="3d17a-113">How to insert data into an `xml` column with updategrams</span></span>|<span data-ttu-id="3d17a-114">"XML データ型列にデータを挿入する"</span><span class="sxs-lookup"><span data-stu-id="3d17a-114">"Inserting data into an XML data type column"</span></span>|[<span data-ttu-id="3d17a-115">XML アップデートグラムを使用したデータの挿入 &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="3d17a-115">Inserting Data Using XML Updategrams &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/updategrams/inserting-data-using-xml-updategrams-sqlxml-4-0.md)|  
|<span data-ttu-id="3d17a-116">`xml` 列への XML データの一括読み込み</span><span class="sxs-lookup"><span data-stu-id="3d17a-116">Bulk loading XML data into an `xml` column</span></span>|<span data-ttu-id="3d17a-117">"xml データ型の列に一括読み込みを行う"</span><span class="sxs-lookup"><span data-stu-id="3d17a-117">"Bulk loading in xml Data Type columns"</span></span>|[<span data-ttu-id="3d17a-118">XML 一括読み込みの例 &#40;SQLXML 4.0&#41;</span><span class="sxs-lookup"><span data-stu-id="3d17a-118">XML Bulk Load Examples &#40;SQLXML 4.0&#41;</span></span>](../sqlxml-annotated-xsd-schemas-xpath-queries/bulk-load-xml/xml-bulk-load-examples-sqlxml-4-0.md)|  
  
## <a name="guidelines-and-limitations"></a><span data-ttu-id="3d17a-119">ガイドラインと制限</span><span class="sxs-lookup"><span data-stu-id="3d17a-119">Guidelines and Limitations</span></span>  
  
-   <span data-ttu-id="3d17a-120">**\<xsd:any>** データ型を含む列にマップすることはできません `xml` 。</span><span class="sxs-lookup"><span data-stu-id="3d17a-120">**\<xsd:any>** cannot be mapped to a column including an `xml` data type.</span></span> <span data-ttu-id="3d17a-121">この場合、SQLXML では `sql:overflow-field` 注釈を使用して対処できます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-121">Support in SQLXML for this scenario is provided through the `sql:overflow-field` annotation.</span></span> <span data-ttu-id="3d17a-122">または、`xml` データ型のフィールドに `xsd:anyType` の要素としてマップすることもできます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-122">Another workaround is to map an `xml` data type field as an element of `xsd:anyType`.</span></span> <span data-ttu-id="3d17a-123">この方法は、上の表の例 "XML 要素を XML データ型の列にマップする" に示されています。</span><span class="sxs-lookup"><span data-stu-id="3d17a-123">This workaround is demonstrated in the "Mapping an XML element to an XML data type column" example referenced in the table above.</span></span>  
  
-   <span data-ttu-id="3d17a-124">`xml` データ型の列のコンテンツに XPath クエリを実行することはできません。</span><span class="sxs-lookup"><span data-stu-id="3d17a-124">XPath query into the contents of `xml` data type columns is not supported.</span></span>  
  
-   <span data-ttu-id="3d17a-125">`xml` や `sql:relationship` など、`sql:key-fields` データ型の列がサポートまたは許可されていない注釈でこのデータ型の列を使用すると、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エラーが発生し、発生したエラーは SQLXML 4.0 を実装する中間層コンポーネントでトラップされません。</span><span class="sxs-lookup"><span data-stu-id="3d17a-125">Using an `xml` data type column in annotations where it is not supported (such as `sql:relationship` and `sql:key-fields`) or allowed will result in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] errors that will not be trapped by middle-tier components implementing SQLXML 4.0.</span></span> <span data-ttu-id="3d17a-126">これは、SQLXML で SQL 型の情報が必要とされないためです。</span><span class="sxs-lookup"><span data-stu-id="3d17a-126">This occurs because SQLXML does not require SQL type information.</span></span> <span data-ttu-id="3d17a-127">この動作は、BLOB やバイナリ型などその他のデータ型に対する SQLXML の動作と同様です。</span><span class="sxs-lookup"><span data-stu-id="3d17a-127">This is similar to the behavior of SQLXML for other data types, such as BLOB and binary types.</span></span>  
  
-   <span data-ttu-id="3d17a-128">`xml` 列のマッピングは、XSD スキーマでのみサポートされています。</span><span class="sxs-lookup"><span data-stu-id="3d17a-128">Mapping `xml` columns is supported only for XSD schemas.</span></span> <span data-ttu-id="3d17a-129">XDR スキーマでは、`xml` 列のマッピングはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="3d17a-129">XDR schemas do not support mapping `xml` columns.</span></span>  
  
-   <span data-ttu-id="3d17a-130">SQLXML 4.0 は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で提供される XML 解析サポートに依存しています。</span><span class="sxs-lookup"><span data-stu-id="3d17a-130">SQLXML 4.0 relies upon the XML parsing support provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3d17a-131">`xml` 列は、型指定された XML または型指定されない XML のいずれかとしてマップできます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-131">An `xml` column can be either mapped as typed XML or untyped XML.</span></span> <span data-ttu-id="3d17a-132">どちらの場合も、SQLXML 4.0 で入力 XML は検証されません。</span><span class="sxs-lookup"><span data-stu-id="3d17a-132">In either case, SQLXML 4.0 does not validate the input XML.</span></span>  <span data-ttu-id="3d17a-133">入力 XML が有効でないか、適切な形式でない場合は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] から SQLXML にそのことがレポートされ、サーバーによって返された関連エラー情報がある場合はユーザーに伝達されます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-133">If input XML is not valid or well-formed, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] reports it to SQLXML, and propagates any relevant error information returned by the server to the user.</span></span>  
  
-   <span data-ttu-id="3d17a-134">SQLXML 4.0 は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で提供される DTD の制限付きサポートに依存しています。</span><span class="sxs-lookup"><span data-stu-id="3d17a-134">SQLXML 4.0 relies upon the limited support for DTDs provided in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="3d17a-135">では `xml` データ型のデータの内部 DTD が許可されるので、既定値の設定や、エンティティ参照の拡張コンテンツへの置き換えに使用できます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-135">allows for an internal DTD in `xml` data type data, which can be used to supply default values and to replace entity references with their expanded contents.</span></span> <span data-ttu-id="3d17a-136">SQLXML では、サーバーに XML データが "そのまま" (内部 DTD を含めて) 渡されます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-136">SQLXML passes the XML data "as is" (including the internal DTD) to the server.</span></span> <span data-ttu-id="3d17a-137">ここで、サード パーティのツールを使用して DTD を XML スキーマ (XSD) ドキュメントに変換し、データをインライン XSD スキーマと共にデータベースに読み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-137">You can convert DTDs to XML Schema (XSD) documents using third-party tools, and load the data with inline XSD schemas into the database.</span></span>  
  
-   <span data-ttu-id="3d17a-138">SQLXML 4.0 では、の動作に基づいて、XML 宣言の処理命令 (たとえば、) は保持されません [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="3d17a-138">SQLXML 4.0 does not preserve XML declaration processing instructions (for example, ) based on the behavior of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="3d17a-139">代わりに、XML 宣言は [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML パーサーに対するディレクティブとして扱われ、データが `xml` データ型に変換された後は、属性 (バージョン、エンコーディング、およびスタンドアロン) は失われます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-139">Instead, the XML declaration is treated as a directive to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] XML parser, and its attributes (version, encoding, and standalone) are lost after data is converted to the `xml` data type.</span></span> <span data-ttu-id="3d17a-140">XML データは内部的に UCS-2 として保存されます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-140">The XML data is stored internally as UCS-2.</span></span> <span data-ttu-id="3d17a-141">XML インスタンス内のその他すべての処理命令は保持されます。これらは `xml` 列で許可され、SQLXML でサポートされます。</span><span class="sxs-lookup"><span data-stu-id="3d17a-141">All other processing instructions in the XML instance are preserved; they are allowed in the `xml` column and can be supported by SQLXML.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3d17a-142">参照</span><span class="sxs-lookup"><span data-stu-id="3d17a-142">See Also</span></span>  
 [<span data-ttu-id="3d17a-143">XML データ &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="3d17a-143">XML Data &#40;SQL Server&#41;</span></span>](../xml/xml-data-sql-server.md)  
  
  
