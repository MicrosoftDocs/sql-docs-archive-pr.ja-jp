---
title: 'SQL Server: Transactions オブジェクト | Microsoft Docs'
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- SQLServer:Transactions
- Transactions object
ms.assetid: 85240267-78fd-476a-9ef6-010d6cf32dd8
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 73071af197c042bf6ef044d6b9a625cffde296e9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87713073"
---
# <a name="sql-server-transactions-object"></a><span data-ttu-id="a88b8-102">SQL Server: Transactions オブジェクト</span><span class="sxs-lookup"><span data-stu-id="a88b8-102">SQL Server, Transactions Object</span></span>
  <span data-ttu-id="a88b8-103">Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の **Transactions** オブジェクトは、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスでアクティブになっているトランザクションの数を監視するカウンターと、スナップショット分離による **tempdb**への行バージョン ストアなど、アクティブなトランザクションによるリソースへの影響を監視するためのカウンターを提供します。</span><span class="sxs-lookup"><span data-stu-id="a88b8-103">The **Transactions** object in Microsoft [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] provides counters to monitor the number of transactions active in an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], and the effects of those transactions on resources such as the snapshot isolation row version store in **tempdb**.</span></span> <span data-ttu-id="a88b8-104">トランザクションは、論理的な 1 つの作業単位です。つまり、一連の操作であり、すべて成功するか、データの論理的な整合性を維持するためにデータベースからすべて消去されるかのいずれかの結果になります。</span><span class="sxs-lookup"><span data-stu-id="a88b8-104">Transactions are logical units of work; a set of operations that must either all succeed or all be erased from a database in order to maintain the logical integrity of the data.</span></span> <span data-ttu-id="a88b8-105">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベース内のデータへの変更は、すべてトランザクションで行われます。</span><span class="sxs-lookup"><span data-stu-id="a88b8-105">All modifications of data in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] databases are made in transactions.</span></span>  
  
 <span data-ttu-id="a88b8-106">スナップショット分離レベルを使用できるようにデータベースを設定している場合は、データベース内の各行に加えられた変更の記録を [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a88b8-106">When a database is set to allow snapshot isolation level, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must maintain a record of the modifications made to each row in a database.</span></span> <span data-ttu-id="a88b8-107">行が変更されるたびに、変更前の状態の行のコピーが **tempdb**内の行バージョン ストアに記録されます。</span><span class="sxs-lookup"><span data-stu-id="a88b8-107">Each time a row is modified, a copy of the row as it existed before the modification is recorded in a row version store in **tempdb**.</span></span> <span data-ttu-id="a88b8-108">**Transaction** オブジェクトの多くのカウンターは、 **tempdb**内の行バージョン ストアのサイズと増加率の監視に使用できます。</span><span class="sxs-lookup"><span data-stu-id="a88b8-108">Many of the counters in the **Transaction** object can be used to monitor the size and rate of growth of the row version store in **tempdb**.</span></span>  
  
 <span data-ttu-id="a88b8-109">**Transactions** オブジェクトのカウンターは、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]の 1 つのインスタンス内のすべてのトランザクションを報告します。</span><span class="sxs-lookup"><span data-stu-id="a88b8-109">The **Transactions** object counters report all transactions in one instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>  
  
 <span data-ttu-id="a88b8-110">次の表では、 **SQLServer:Transactions** のカウンターについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a88b8-110">This table describes the **SQLServer:Transactions** counters.</span></span>  
  
|<span data-ttu-id="a88b8-111">SQL Server Transactions のカウンター</span><span class="sxs-lookup"><span data-stu-id="a88b8-111">SQL Server Transactions counters</span></span>|<span data-ttu-id="a88b8-112">説明</span><span class="sxs-lookup"><span data-stu-id="a88b8-112">Description</span></span>|  
|--------------------------------------|-----------------|  
|<span data-ttu-id="a88b8-113">**Free Space in tempdb (KB)**</span><span class="sxs-lookup"><span data-stu-id="a88b8-113">**Free Space in tempdb (KB)**</span></span>|<span data-ttu-id="a88b8-114">**tempdb**の使用可能な領域 (KB)。</span><span class="sxs-lookup"><span data-stu-id="a88b8-114">The amount of space (in kilobytes) available in **tempdb**.</span></span> <span data-ttu-id="a88b8-115">スナップショット分離レベルのバージョン ストアと、この [!INCLUDE[ssDE](../../includes/ssde-md.md)]インスタンスで作成された新しいすべての一時オブジェクトの両方を保持するには、十分な空き領域が必要です。</span><span class="sxs-lookup"><span data-stu-id="a88b8-115">There must be enough free space to hold both the snapshot isolation level version store and all new temporary objects created in this instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>|  
|<span data-ttu-id="a88b8-116">**Longest Transaction Running Time**</span><span class="sxs-lookup"><span data-stu-id="a88b8-116">**Longest Transaction Running Time**</span></span>|<span data-ttu-id="a88b8-117">現在のトランザクションの中で最も長くアクティブになっているトランザクションが開始してから現在までの継続時間 (秒)。</span><span class="sxs-lookup"><span data-stu-id="a88b8-117">The length of time (in seconds) since the start of the transaction that has been active longer than any other current transaction.</span></span> <span data-ttu-id="a88b8-118">このカウンターがアクティビティを示すのは、データベースが READ COMMITTED スナップショット分離レベルの場合のみです。</span><span class="sxs-lookup"><span data-stu-id="a88b8-118">This counter only shows activity when the database is under read committed snapshot isolation level.</span></span> <span data-ttu-id="a88b8-119">データベースが他の分離レベルの場合、アクティビティはログに記録されません。</span><span class="sxs-lookup"><span data-stu-id="a88b8-119">It does not log any activity if the database is in any other isolation level.</span></span>|  
|<span data-ttu-id="a88b8-120">**NonSnapshot Version Transactions**</span><span class="sxs-lookup"><span data-stu-id="a88b8-120">**NonSnapshot Version Transactions**</span></span>|<span data-ttu-id="a88b8-121">スナップショット分離レベルを使用していない現在アクティブなトランザクションのうち、データ変更を行ったトランザクションの数。データを変更すると、 **tempdb** のバージョン ストアに行バージョンが生成されます。</span><span class="sxs-lookup"><span data-stu-id="a88b8-121">The number of currently active transactions that are not using snapshot isolation level and have made data modifications that have generated row versions in the **tempdb** version store.</span></span>|  
|<span data-ttu-id="a88b8-122">**Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="a88b8-122">**Snapshot Transactions**</span></span>|<span data-ttu-id="a88b8-123">スナップショット分離レベルを使用している現在アクティブなトランザクションの数。</span><span class="sxs-lookup"><span data-stu-id="a88b8-123">The number of currently active transactions using the snapshot isolation level.</span></span><br /><br /> <span data-ttu-id="a88b8-124">注:**Snapshot Transactions** オブジェクト カウンターは、`BEGIN TRANSACTION` ステートメントが発行されたときではなく、最初のデータ アクセスが行われたときに応答します。</span><span class="sxs-lookup"><span data-stu-id="a88b8-124">Note: The **Snapshot Transactions** object counter responds when the first data access occurs, not when the `BEGIN TRANSACTION` statement is issued.</span></span>|  
|<span data-ttu-id="a88b8-125">**トランザクション**</span><span class="sxs-lookup"><span data-stu-id="a88b8-125">**Transactions**</span></span>|<span data-ttu-id="a88b8-126">現在アクティブなトランザクションの数。すべての種類が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a88b8-126">The number of currently active transactions of all types.</span></span>|  
|<span data-ttu-id="a88b8-127">**Update conflict ratio**</span><span class="sxs-lookup"><span data-stu-id="a88b8-127">**Update conflict ratio**</span></span>|<span data-ttu-id="a88b8-128">この 1 秒間で更新の競合が発生した、スナップショット分離レベルを使用しているトランザクションの割合。</span><span class="sxs-lookup"><span data-stu-id="a88b8-128">The percentage of those transactions using the snapshot isolation level that have encountered update conflicts within the last second.</span></span> <span data-ttu-id="a88b8-129">更新の競合が発生するのは、別のトランザクションによって最後に変更が行われ、スナップショット分離レベルのトランザクションの開始時にはコミットされていなかった行に対して、スナップショット分離レベルのトランザクションが変更を試行したときです。</span><span class="sxs-lookup"><span data-stu-id="a88b8-129">An update conflict occurs when a snapshot isolation level transaction attempts to modify a row that last was modified by another transaction that was not committed when the snapshot isolation level transaction started.</span></span>|  
|<span data-ttu-id="a88b8-130">**Update Snapshot Transactions**</span><span class="sxs-lookup"><span data-stu-id="a88b8-130">**Update Snapshot Transactions**</span></span>|<span data-ttu-id="a88b8-131">スナップショット分離レベルを使用し、データを変更した現在アクティブなトランザクションの数。</span><span class="sxs-lookup"><span data-stu-id="a88b8-131">The number of currently active transactions using the snapshot isolation level and have modified data.</span></span>|  
|<span data-ttu-id="a88b8-132">**Version Cleanup rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="a88b8-132">**Version Cleanup rate (KB/s)**</span></span>|<span data-ttu-id="a88b8-133">**tempdb**のスナップショット分離のバージョン ストアから行バージョンが削除される比率 (KB/秒)。</span><span class="sxs-lookup"><span data-stu-id="a88b8-133">The rate (in kilobytes per second) at which row versions are removed from the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="a88b8-134">**Version Generation rate (KB/s)**</span><span class="sxs-lookup"><span data-stu-id="a88b8-134">**Version Generation rate (KB/s)**</span></span>|<span data-ttu-id="a88b8-135">**tempdb**のスナップショット分離のバージョン ストアに新しい行バージョンが追加される比率 (KB/秒)。</span><span class="sxs-lookup"><span data-stu-id="a88b8-135">The rate (in kilobytes per second) at which new row versions are added to the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="a88b8-136">**Version Store Size (KB)**</span><span class="sxs-lookup"><span data-stu-id="a88b8-136">**Version Store Size (KB)**</span></span>|<span data-ttu-id="a88b8-137">スナップショット分離レベルの行バージョンを格納するために使用している、 **tempdb** 内の領域 (KB)。</span><span class="sxs-lookup"><span data-stu-id="a88b8-137">The amount of space (in kilobytes) in **tempdb** being used to store snapshot isolation level row versions.</span></span>|  
|<span data-ttu-id="a88b8-138">**Version Store unit count**</span><span class="sxs-lookup"><span data-stu-id="a88b8-138">**Version Store unit count**</span></span>|<span data-ttu-id="a88b8-139">**tempdb**のスナップショット分離のバージョン ストアでアクティブになっているアロケーション ユニットの数。</span><span class="sxs-lookup"><span data-stu-id="a88b8-139">The number of active allocation units in the snapshot isolation version store in **tempdb**.</span></span>|  
|<span data-ttu-id="a88b8-140">**Version Store unit creation**</span><span class="sxs-lookup"><span data-stu-id="a88b8-140">**Version Store unit creation**</span></span>|<span data-ttu-id="a88b8-141">[!INCLUDE[ssDE](../../includes/ssde-md.md)] インスタンスの起動後に、スナップショット分離のバージョン ストアで作成されたアロケーション ユニットの数。</span><span class="sxs-lookup"><span data-stu-id="a88b8-141">The number of allocation units that have been created in the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
|<span data-ttu-id="a88b8-142">**Version Store unit truncation**</span><span class="sxs-lookup"><span data-stu-id="a88b8-142">**Version Store unit truncation**</span></span>|<span data-ttu-id="a88b8-143">[!INCLUDE[ssDE](../../includes/ssde-md.md)] のインスタンスの起動後に、スナップショット分離のバージョン ストアから削除されたアロケーション ユニットの数。</span><span class="sxs-lookup"><span data-stu-id="a88b8-143">The number of allocation units that have been removed from the snapshot isolation store since the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] was started.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="a88b8-144">参照</span><span class="sxs-lookup"><span data-stu-id="a88b8-144">See Also</span></span>  
 [<span data-ttu-id="a88b8-145">リソースの利用状況の監視 &#40;システム モニター&#41;</span><span class="sxs-lookup"><span data-stu-id="a88b8-145">Monitor Resource Usage &#40;System Monitor&#41;</span></span>](monitor-resource-usage-system-monitor.md)  
  
  
