---
title: CLR 統合のコードアクセスセキュリティ |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: clr
ms.topic: reference
helpviewer_keywords:
- UNSAFE assemblies
- permissions [CLR integration]
- common language runtime [SQL Server], security
- SAFE assemblies
- code access security [CLR integration]
- EXTERNAL_ACCESS assemblies
ms.assetid: 2111cfe0-d5e0-43b1-93c3-e994ac0e9729
author: rothja
ms.author: jroth
ms.openlocfilehash: 75b283da2760b39349351802a83caae04e546c06
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87639543"
---
# <a name="clr-integration-code-access-security"></a><span data-ttu-id="02965-102">CLR 統合のコード アクセス セキュリティ</span><span class="sxs-lookup"><span data-stu-id="02965-102">CLR Integration Code Access Security</span></span>
  <span data-ttu-id="02965-103">共通言語ランタイム (CLR) では、マネージド コードに対してコード アクセス セキュリティというセキュリティ モデルがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="02965-103">The common language runtime (CLR) supports a security model called code access security for managed code.</span></span> <span data-ttu-id="02965-104">このモデルでは、コードの ID に基づいてアセンブリに権限が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-104">In this model, permissions are granted to assemblies based on the identity of the code.</span></span> <span data-ttu-id="02965-105">詳細については、.NET Framework Software Development Kit の「コード アクセス セキュリティ」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="02965-105">For more information, see the "Code Access Security" section in the .NET Framework software development kit.</span></span>  
  
 <span data-ttu-id="02965-106">アセンブリに許可される権限を決定するセキュリティ ポリシーは、次の 3 つに分類されます。</span><span class="sxs-lookup"><span data-stu-id="02965-106">The security policy that determines the permissions granted to assemblies is defined in three different places:</span></span>  
  
-   <span data-ttu-id="02965-107">コンピューター ポリシー : [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] がインストールされているコンピューターで実行されるすべてのマネージド コードに対して効力を持つポリシーです。</span><span class="sxs-lookup"><span data-stu-id="02965-107">Machine policy: This is the policy in effect for all managed code running in the machine on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span>  
  
-   <span data-ttu-id="02965-108">ユーザー ポリシー : 特定のプロセスをホストとするマネージド コードに対して効力を持つポリシーです。</span><span class="sxs-lookup"><span data-stu-id="02965-108">User policy: This is the policy in effect for managed code hosted by a process.</span></span> <span data-ttu-id="02965-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]サービスが実行されています。</span><span class="sxs-lookup"><span data-stu-id="02965-109">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running.</span></span>  
  
-   <span data-ttu-id="02965-110">ホスト ポリシー : CLR のホスト (この場合は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) によって設定され、そのホストで実行されるマネージド コードに対して効力を持つポリシーです。</span><span class="sxs-lookup"><span data-stu-id="02965-110">Host policy: This is the policy set up by the host of the CLR (in this case, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) that is in effect for managed code running in that host.</span></span>  
  
 <span data-ttu-id="02965-111">CLR でサポートされるコード アクセス セキュリティ メカニズムは、ランタイムが完全に信頼されるコードと部分的に信頼されるコードの両方をホストできるという前提に基づいています。</span><span class="sxs-lookup"><span data-stu-id="02965-111">The code access security mechanism supported by the CLR is based on the assumption that the runtime can host both fully trusted and partially trusted code.</span></span> <span data-ttu-id="02965-112">CLR コードアクセスセキュリティによって保護されているリソースは、通常、リソースへのアクセスを許可する前に、対応するアクセス許可を requirethe マネージアプリケーションプログラミングインターフェイスによってラップされます。</span><span class="sxs-lookup"><span data-stu-id="02965-112">The resources that are protected by CLR code access security are typically wrapped by managed application programming interfaces that requirethe corresponding permission before allowing access to the resource.</span></span> <span data-ttu-id="02965-113">Demandfor は、呼び出し履歴のすべての呼び出し元 (アセンブリレベル) に対応するリソースアクセス許可がある場合にのみ、アクセス許可を満たしています。</span><span class="sxs-lookup"><span data-stu-id="02965-113">The demandfor the permission is satisfied only if all the callers (at the assembly level) in the call stack have the corresponding resource permission.</span></span>  
  
 <span data-ttu-id="02965-114">内で実行するときにマネージコードに付与されるコードアクセスセキュリティのアクセス許可のセットは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] に読み込まれたアセンブリにアクセス許可のセットを付与し [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ます。ユーザーコードに与えられる最終的なアクセス許可のセットは、ユーザーおよびコンピューターレベルのポリシーによってさらに制限される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="02965-114">The set of code access security permissions that are granted to managed code when running inside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] grants a set of permissions to an assembly loaded in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], the eventual set of permissions given to user code may be restricted further by the user and machine-level policies.</span></span>  
  
## <a name="sql-server-host-policy-level-permission-sets"></a><span data-ttu-id="02965-115">SQL Server ホスト ポリシー レベルの権限セット</span><span class="sxs-lookup"><span data-stu-id="02965-115">SQL Server Host Policy Level Permission Sets</span></span>  
 <span data-ttu-id="02965-116">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ホスト ポリシー レベルでアセンブリに許可されるコード アクセス セキュリティ権限のセットは、アセンブリの作成時にどの権限セットを指定するかによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="02965-116">The set of code access security permissions granted to assemblies by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy level is determined by the permission set specified when creating the assembly.</span></span> <span data-ttu-id="02965-117">権限セットには、、、およびの3つがあります。 `SAFE` `EXTERNAL_ACCESS` `UNSAFE` [CREATE ASSEMBLY &#40;transact-sql&#41;](/sql/t-sql/statements/create-assembly-transact-sql)) の**PERMISSION_SET**オプションを使用して指定します。</span><span class="sxs-lookup"><span data-stu-id="02965-117">There are three permission sets: `SAFE`, `EXTERNAL_ACCESS` and `UNSAFE` (specified using the **PERMISSION_SET** option of[CREATE ASSEMBLY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-assembly-transact-sql)).</span></span>  
  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="02965-118">.</span><span class="sxs-lookup"><span data-stu-id="02965-118">.</span></span> <span data-ttu-id="02965-119">このポリシーは、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] が CLR のインスタンスを作成するときに有効になる、既定のアプリケーション ドメイン用ではありません。</span><span class="sxs-lookup"><span data-stu-id="02965-119">This policy is not meant for the default application domain that would be in effect when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] creates an instance of the CLR.</span></span>  
  
 <span data-ttu-id="02965-120">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]システムアセンブリの fixedpolicy とユーザーアセンブリのユーザー指定ポリシー。</span><span class="sxs-lookup"><span data-stu-id="02965-120">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fixedpolicy for system assemblies and user-specified policy for user assemblies.</span></span>  
  
 <span data-ttu-id="02965-121">CLR アセンブリと [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] システム アセンブリの固定ポリシーでは、これらのアセンブリを完全に信頼します。</span><span class="sxs-lookup"><span data-stu-id="02965-121">The fixed policy for CLR assemblies and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] system assemblies grants them full trust.</span></span>  
  
 <span data-ttu-id="02965-122">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ホスト ポリシーのユーザー指定部分は、アセンブリの所有者がアセンブリごとに指定する 3 つの権限バケットのいずれかに基づきます。</span><span class="sxs-lookup"><span data-stu-id="02965-122">The user-specified portion of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] host policy is based on the assembly owner specifying one of three permission buckets for each assembly.</span></span> <span data-ttu-id="02965-123">次に示すセキュリティ権限の詳細については、.NET Framework SDK を参照してください。</span><span class="sxs-lookup"><span data-stu-id="02965-123">For more information about the security permissions listed below, see the .NET Framework SDK.</span></span>  
  
### <a name="safe"></a><span data-ttu-id="02965-124">SAFE</span><span class="sxs-lookup"><span data-stu-id="02965-124">SAFE</span></span>  
 <span data-ttu-id="02965-125">内部コンピューター処理とローカル データのアクセスだけが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-125">Only internal computation and local data access are allowed.</span></span> <span data-ttu-id="02965-126">`SAFE` は最も制限が厳しい権限セットです。</span><span class="sxs-lookup"><span data-stu-id="02965-126">`SAFE` is the most restrictive permission set.</span></span> <span data-ttu-id="02965-127">`SAFE` 権限が設定されているアセンブリで実行されるコードは、ファイル、ネットワーク、環境変数、レジストリなどの外部システム リソースにアクセスできません。</span><span class="sxs-lookup"><span data-stu-id="02965-127">Code executed by an assembly with `SAFE` permissions cannot access external system resources such as files, the network, environment variables, or the registry.</span></span>  
  
 <span data-ttu-id="02965-128">`SAFE` アセンブリには、次の権限および値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="02965-128">`SAFE` assemblies have the following permissions and values:</span></span>  
  
|<span data-ttu-id="02965-129">権限</span><span class="sxs-lookup"><span data-stu-id="02965-129">Permission</span></span>|<span data-ttu-id="02965-130">値/説明</span><span class="sxs-lookup"><span data-stu-id="02965-130">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`SecurityPermission`|<span data-ttu-id="02965-131">`Execution:` マネージド コードを実行する権限です。</span><span class="sxs-lookup"><span data-stu-id="02965-131">`Execution:` Permission to execute managed code.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="02965-132">`Context connection = true`、`context connection = yes`: context-connection のみを使用できます。接続文字列に指定できる値は、"context connection=true" または "context connection=yes" だけです。</span><span class="sxs-lookup"><span data-stu-id="02965-132">`Context connection = true`, `context connection = yes`: Only the context-connection can be used and the connection string can only specify a value of "context connection=true" or "context connection=yes".</span></span><br /><br /> <span data-ttu-id="02965-133">**Allow空白パスワード = false:** 空のパスワードは許可されていません。</span><span class="sxs-lookup"><span data-stu-id="02965-133">**AllowBlankPassword = false:**  Blank passwords are not permitted.</span></span>|  
  
### <a name="external_access"></a><span data-ttu-id="02965-134">EXTERNAL_ACCESS</span><span class="sxs-lookup"><span data-stu-id="02965-134">EXTERNAL_ACCESS</span></span>  
 <span data-ttu-id="02965-135">EXTERNAL_ACCESS アセンブリは、アセンブリと同じアクセス許可を持ち、 `SAFE` ファイル、ネットワーク、環境変数、レジストリなどの外部システムリソースにアクセスする機能が追加されています。</span><span class="sxs-lookup"><span data-stu-id="02965-135">EXTERNAL_ACCESS assemblies have the same permissions as `SAFE` assemblies, with the additional ability to access external system resources such as files, networks, environmental variables, and the registry.</span></span>  
  
 <span data-ttu-id="02965-136">`EXTERNAL_ACCESS` アセンブリには、次の権限および値も含まれます。</span><span class="sxs-lookup"><span data-stu-id="02965-136">`EXTERNAL_ACCESS` assemblies also have the following permissions and values:</span></span>  
  
|<span data-ttu-id="02965-137">権限</span><span class="sxs-lookup"><span data-stu-id="02965-137">Permission</span></span>|<span data-ttu-id="02965-138">値/説明</span><span class="sxs-lookup"><span data-stu-id="02965-138">Value(s)/Description</span></span>|  
|----------------|-----------------------------|  
|`DistributedTransactionPermission`|<span data-ttu-id="02965-139">`Unrestricted:`分散トランザクションは許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-139">`Unrestricted:` Distributed transactions are allowed.</span></span>|  
|`DNSPermission`|<span data-ttu-id="02965-140">`Unrestricted:`ドメインネームサーバーから情報を要求するアクセス許可。</span><span class="sxs-lookup"><span data-stu-id="02965-140">`Unrestricted:` Permission to request information from Domain Name Servers.</span></span>|  
|`EnvironmentPermission`|<span data-ttu-id="02965-141">`Unrestricted:` システム環境変数およびユーザー環境変数への完全アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-141">`Unrestricted:` Full access to system and user environment variables is allowed.</span></span>|  
|`EventLogPermission`|<span data-ttu-id="02965-142">`Administer:` イベント ソースの作成、既存ログの読み取り、イベント ソースまたはログの削除、エントリに対する応答、イベント ログの消去、イベントの待機、およびすべてのイベント ログのコレクションへのアクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-142">`Administer:` The following actions are allowed: creating an event source, reading existing logs, deleting event sources or logs, responding to entries, clearing an event log, listening to events, and accessing a collection of all event logs.</span></span>|  
|`FileIOPermission`|<span data-ttu-id="02965-143">`Unrestricted:` ファイルおよびフォルダーへの完全アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-143">`Unrestricted:` Full access to files and folders is allowed.</span></span>|  
|`KeyContainerPermission`|<span data-ttu-id="02965-144">`Unrestricted:` キー コンテナーへの完全アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-144">`Unrestricted:` Full access to key containers is allowed.</span></span>|  
|`NetworkInformationPermission`|<span data-ttu-id="02965-145">`Access:` ping の実行が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-145">`Access:` Pinging is permitted.</span></span>|  
|`RegistryPermission`|<span data-ttu-id="02965-146">`HKEY_CLASSES_ROOT`、`HKEY_LOCAL_MACHINE`、`HKEY_CURRENT_USER`、`HKEY_CURRENT_CONFIG`、および `HKEY_USERS.` への読み取り権限が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-146">Allows read rights to `HKEY_CLASSES_ROOT`, `HKEY_LOCAL_MACHINE`, `HKEY_CURRENT_USER`, `HKEY_CURRENT_CONFIG`, and `HKEY_USERS.`</span></span>|  
|`SecurityPermission`|<span data-ttu-id="02965-147">`Assertion:` このコードのすべての呼び出し元が操作に必要な権限を持っていることをアサートする機能です。</span><span class="sxs-lookup"><span data-stu-id="02965-147">`Assertion:` Ability to assert that all the callers of this code have the requisite permission for the operation.</span></span><br /><br /> <span data-ttu-id="02965-148">`ControlPrincipal:` プリンシパル オブジェクトを操作する機能です。</span><span class="sxs-lookup"><span data-stu-id="02965-148">`ControlPrincipal:` Ability to manipulate the principal object.</span></span><br /><br /> <span data-ttu-id="02965-149">`Execution:` マネージド コードを実行する権限です。</span><span class="sxs-lookup"><span data-stu-id="02965-149">`Execution:` Permission to execute managed code.</span></span><br /><br /> <span data-ttu-id="02965-150">`SerializationFormatter:` シリアル化サービスを提供する機能です。</span><span class="sxs-lookup"><span data-stu-id="02965-150">`SerializationFormatter:` Ability to provide serialization services.</span></span>|  
|<span data-ttu-id="02965-151">**SmtpPermission**</span><span class="sxs-lookup"><span data-stu-id="02965-151">**SmtpPermission**</span></span>|<span data-ttu-id="02965-152">`Access:` SMTP ホストの 25 番ポートへの発信接続が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-152">`Access:` Outbound connections to SMTP host port 25 are allowed.</span></span>|  
|`SocketPermission`|<span data-ttu-id="02965-153">`Connect:` トランスポート アドレスでの発信接続 (すべてのポートおよびプロトコル) が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-153">`Connect:` Outbound connections (all ports, all protocols) on a transport address are allowed.</span></span>|  
|`SqlClientPermission`|<span data-ttu-id="02965-154">`Unrestricted:` データ ソースへの完全アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-154">`Unrestricted:` Full access to the datasource is allowed.</span></span>|  
|`StorePermission`|<span data-ttu-id="02965-155">`Unrestricted:` X.509 証明書ストアへの完全アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-155">`Unrestricted:` Full access to X.509 certificate stores is allowed.</span></span>|  
|`WebPermission`|<span data-ttu-id="02965-156">`Connect:` Web リソースへの発信接続が許可されます。</span><span class="sxs-lookup"><span data-stu-id="02965-156">`Connect:` Outbound connections to web resources are allowed.</span></span>|  
  
### <a name="unsafe"></a><span data-ttu-id="02965-157">UNSAFE</span><span class="sxs-lookup"><span data-stu-id="02965-157">UNSAFE</span></span>  
 <span data-ttu-id="02965-158">UNSAFE では、アセンブリから [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の内外のリソースにも無制限にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="02965-158">UNSAFE allows assemblies unrestricted access to resources, both within and outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02965-159">`UNSAFE` アセンブリ内からコードを実行することによって、アンマネージ コードを呼び出すこともできます。</span><span class="sxs-lookup"><span data-stu-id="02965-159">Code executing from within an `UNSAFE` assembly can also call unmanaged code.</span></span>  
  
 <span data-ttu-id="02965-160">`UNSAFE` アセンブリには、`FullTrust` が与えられます。</span><span class="sxs-lookup"><span data-stu-id="02965-160">`UNSAFE` assemblies are given `FullTrust`.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="02965-161">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 外部のリソースにアクセスせずにコンピューター処理やデータ管理タスクを実行するアセンブリには、`SAFE` 権限を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="02965-161">`SAFE` is the recommended permission setting for assemblies that perform computation and data management tasks without accessing resources outside [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02965-162">`EXTERNAL_ACCESS`既定でサービスアカウントとして実行さ [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] `EXTERNAL_ACCESS` れるアセンブリは、サービスアカウントとして実行するために信頼されているログインにのみ付与する必要があります。</span><span class="sxs-lookup"><span data-stu-id="02965-162">`EXTERNAL_ACCESS` assemblies by default execute as the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account, permission to execute `EXTERNAL_ACCESS` should only be given to logins trusted to run as the service account.</span></span> <span data-ttu-id="02965-163">セキュリティの点では、`EXTERNAL_ACCESS` アセンブリと `UNSAFE` アセンブリに変わりはありません。</span><span class="sxs-lookup"><span data-stu-id="02965-163">From a security perspective, `EXTERNAL_ACCESS` and `UNSAFE` assemblies are identical.</span></span> <span data-ttu-id="02965-164">ただし、`EXTERNAL_ACCESS` アセンブリには、`UNSAFE` アセンブリにはない、信頼性や堅牢性を目的としたさまざまな保護機能が備わっています。</span><span class="sxs-lookup"><span data-stu-id="02965-164">However, `EXTERNAL_ACCESS` assemblies provide various reliability and robustness protections that are not in `UNSAFE` assemblies.</span></span> <span data-ttu-id="02965-165">を指定 `UNSAFE` すると、アセンブリ内のコードはに対して無効な操作を実行でき [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="02965-165">Specifying `UNSAFE` allows the code in the assembly to perform illegal operations against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02965-166">で CLR アセンブリを作成する方法の詳細につい [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ては、「 [Clr 統合アセンブリの管理](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="02965-166">For more information about creating CLR assemblies in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Managing CLR Integration Assemblies](../../../relational-databases/clr-integration/assemblies/managing-clr-integration-assemblies.md).</span></span>  
  
## <a name="accessing-external-resources"></a><span data-ttu-id="02965-167">外部リソースへのアクセス</span><span class="sxs-lookup"><span data-stu-id="02965-167">Accessing External Resources</span></span>  
 <span data-ttu-id="02965-168">UDT (ユーザー定義型)、ストアド プロシージャ、または他の種類のコンストラクト アセンブリを `SAFE` 権限セットで登録すると、コンストラクト内で実行しているマネージド コードから外部リソースにアクセスできなくなります。</span><span class="sxs-lookup"><span data-stu-id="02965-168">If a user-defined type (UDT), stored procedure, or other type of construct assembly is registered with the `SAFE` permission set, then managed code executing in the construct is unable to access external resources.</span></span> <span data-ttu-id="02965-169">`EXTERNAL_ACCESS` または `UNSAFE` のいずれかの権限セットを指定し、マネージド コードから外部リソースにアクセスする場合は、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] によって次の規則が適用されます。</span><span class="sxs-lookup"><span data-stu-id="02965-169">However, if either the `EXTERNAL_ACCESS` or `UNSAFE` permission sets are specified, and managed code attempts to access external resources, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] applies the following rules:</span></span>  
  
|<span data-ttu-id="02965-170">状況</span><span class="sxs-lookup"><span data-stu-id="02965-170">If</span></span>|<span data-ttu-id="02965-171">THEN</span><span class="sxs-lookup"><span data-stu-id="02965-171">Then</span></span>|  
|--------|----------|  
|<span data-ttu-id="02965-172">実行コンテキストが [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ログインに対応している場合。</span><span class="sxs-lookup"><span data-stu-id="02965-172">The execution context corresponds to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] login.</span></span>|<span data-ttu-id="02965-173">外部リソースへのアクセスが拒否され、セキュリティ例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="02965-173">Attempts to access external resources are denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="02965-174">実行コンテキストが Windows ログインに対応していると同時に、本来の呼び出し元である場合。</span><span class="sxs-lookup"><span data-stu-id="02965-174">The execution context corresponds to a Windows login and the execution context is the original caller.</span></span>|<span data-ttu-id="02965-175">外部リソースへのアクセスは、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービス アカウントのセキュリティ コンテキストで行われます。</span><span class="sxs-lookup"><span data-stu-id="02965-175">The external resource is accessed under the security context of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account.</span></span>|  
|<span data-ttu-id="02965-176">呼び出し元が、本来の呼び出し元ではない場合。</span><span class="sxs-lookup"><span data-stu-id="02965-176">The caller is not the original caller.</span></span>|<span data-ttu-id="02965-177">アクセスが拒否され、セキュリティ例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="02965-177">Access is denied and a security exception is raised.</span></span>|  
|<span data-ttu-id="02965-178">実行コンテキストが Windows ログインに対応していて、実行コンテキストが本来の呼び出し元であり、呼び出し元の権限が借用されている場合。</span><span class="sxs-lookup"><span data-stu-id="02965-178">The execution context corresponds to a Windows login and the execution context is the original caller and the caller has been impersonated.</span></span>|<span data-ttu-id="02965-179">アクセスにはサービス アカウントではなく、呼び出し元のセキュリティ コンテキストが使用されます。</span><span class="sxs-lookup"><span data-stu-id="02965-179">Access uses the caller security context; not the service account.</span></span>|  
  
## <a name="permission-set-summary"></a><span data-ttu-id="02965-180">権限セットの概要</span><span class="sxs-lookup"><span data-stu-id="02965-180">Permission Set Summary</span></span>  
 <span data-ttu-id="02965-181">次の表は、`SAFE`、`EXTERNAL_ACCESS`、および `UNSAFE` の各権限セットに付与される制限事項と権限を示しています。</span><span class="sxs-lookup"><span data-stu-id="02965-181">The following chart summarizes the restrictions and permissions granted to the `SAFE`, `EXTERNAL_ACCESS`, and `UNSAFE` permission sets.</span></span>  
  
|||||  
|-|-|-|-|  
||`SAFE`|`EXTERNAL_ACCESS`|`UNSAFE`|  
|`Code Access Security Permissions`|<span data-ttu-id="02965-182">実行のみ</span><span class="sxs-lookup"><span data-stu-id="02965-182">Execute only</span></span>|<span data-ttu-id="02965-183">実行および外部リソースへのアクセス</span><span class="sxs-lookup"><span data-stu-id="02965-183">Execute + access to external resources</span></span>|<span data-ttu-id="02965-184">無制限 (P/Invoke を含む)</span><span class="sxs-lookup"><span data-stu-id="02965-184">Unrestricted (including P/Invoke)</span></span>|  
|`Programming model restrictions`|<span data-ttu-id="02965-185">はい</span><span class="sxs-lookup"><span data-stu-id="02965-185">Yes</span></span>|<span data-ttu-id="02965-186">はい</span><span class="sxs-lookup"><span data-stu-id="02965-186">Yes</span></span>|<span data-ttu-id="02965-187">制限事項なし</span><span class="sxs-lookup"><span data-stu-id="02965-187">No restrictions</span></span>|  
|`Verifiability requirement`|<span data-ttu-id="02965-188">はい</span><span class="sxs-lookup"><span data-stu-id="02965-188">Yes</span></span>|<span data-ttu-id="02965-189">はい</span><span class="sxs-lookup"><span data-stu-id="02965-189">Yes</span></span>|<span data-ttu-id="02965-190">いいえ</span><span class="sxs-lookup"><span data-stu-id="02965-190">No</span></span>|  
|`Local data access`|<span data-ttu-id="02965-191">はい</span><span class="sxs-lookup"><span data-stu-id="02965-191">Yes</span></span>|<span data-ttu-id="02965-192">はい</span><span class="sxs-lookup"><span data-stu-id="02965-192">Yes</span></span>|<span data-ttu-id="02965-193">はい</span><span class="sxs-lookup"><span data-stu-id="02965-193">Yes</span></span>|  
|`Ability to call native code`|<span data-ttu-id="02965-194">いいえ</span><span class="sxs-lookup"><span data-stu-id="02965-194">No</span></span>|<span data-ttu-id="02965-195">いいえ</span><span class="sxs-lookup"><span data-stu-id="02965-195">No</span></span>|<span data-ttu-id="02965-196">はい</span><span class="sxs-lookup"><span data-stu-id="02965-196">Yes</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="02965-197">参照</span><span class="sxs-lookup"><span data-stu-id="02965-197">See Also</span></span>  
 <span data-ttu-id="02965-198">[CLR 統合のセキュリティ](clr-integration-security.md) </span><span class="sxs-lookup"><span data-stu-id="02965-198">[CLR Integration Security](clr-integration-security.md) </span></span>  
 <span data-ttu-id="02965-199">[ホスト保護属性と CLR 統合プログラミング](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span><span class="sxs-lookup"><span data-stu-id="02965-199">[Host Protection Attributes and CLR Integration Programming](../../clr-integration-security-host-protection-attributes/host-protection-attributes-and-clr-integration-programming.md) </span></span>  
 <span data-ttu-id="02965-200">[CLR 統合プログラミングモデルの制限事項](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span><span class="sxs-lookup"><span data-stu-id="02965-200">[CLR Integration Programming Model Restrictions](../../../relational-databases/clr-integration/database-objects/clr-integration-programming-model-restrictions.md) </span></span>  
 [<span data-ttu-id="02965-201">CLR ホスト環境</span><span class="sxs-lookup"><span data-stu-id="02965-201">CLR Hosted Environment</span></span>](../clr-integration-architecture-clr-hosted-environment.md)  
  
  
