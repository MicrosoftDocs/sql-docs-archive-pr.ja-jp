---
title: テーブルまたはストアド プロシージャをインメモリ OLTP に移植する必要があるかどうかの確認 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
helpviewer_keywords:
- Analyze, Migrate, Report
- AMR
ms.assetid: c1ef96f1-290d-4952-8369-2f49f27afee2
author: rothja
ms.author: jroth
ms.openlocfilehash: 8e517cff394bc0c813e34763469f75147a0a16c5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87640941"
---
# <a name="determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp"></a><span data-ttu-id="cbc03-102">テーブルまたはストアド プロシージャをインメモリ OLTP に移植する必要があるかどうかの確認</span><span class="sxs-lookup"><span data-stu-id="cbc03-102">Determining if a Table or Stored Procedure Should Be Ported to In-Memory OLTP</span></span>
  <span data-ttu-id="cbc03-103">のトランザクションパフォーマンスコレクターは、 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] インメモリ OLTP によってデータベースアプリケーションのパフォーマンスが向上するかどうかを評価するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-103">The transaction performance collector in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] helps you evaluate if In-Memory OLTP will improve your database application's performance.</span></span> <span data-ttu-id="cbc03-104">また、トランザクション パフォーマンス分析レポートによって、アプリケーションでインメモリ OLTP を有効にするために必要な作業量が示されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-104">The transaction performance analysis report also indicates how much work you must do to enable In-Memory OLTP in your application.</span></span> <span data-ttu-id="cbc03-105">インメモリ OLTP に移植するディスク ベース テーブルを特定した後で [メモリ最適化アドバイザー](memory-optimization-advisor.md)を使用すると、テーブルを移行しやすくなります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-105">After you identify a disk-based table to port to In-Memory OLTP, you can use the [Memory Optimization Advisor](memory-optimization-advisor.md), to help you migrate the table.</span></span> <span data-ttu-id="cbc03-106">同様に、 [Native Compilation Advisor](native-compilation-advisor.md) は、ストアド プロシージャをネイティブ コンパイル ストアド プロシージャに移植するために役立ちます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-106">Similarly, the [Native Compilation Advisor](native-compilation-advisor.md) will help you port a stored procedure to a natively compiled stored procedure.</span></span>  
  
 <span data-ttu-id="cbc03-107">このトピックでは、次の方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-107">This topic will discuss how to:</span></span>  
  
-   <span data-ttu-id="cbc03-108">管理データ ウェアハウスの構成。</span><span class="sxs-lookup"><span data-stu-id="cbc03-108">Configure Management Data Warehouse.</span></span>  
  
-   <span data-ttu-id="cbc03-109">データ コレクションの構成。</span><span class="sxs-lookup"><span data-stu-id="cbc03-109">Configure data collection.</span></span>  
  
-   <span data-ttu-id="cbc03-110">パフォーマンス クリティカルなテーブルとストアド プロシージャを特定するためのトランザクション パフォーマンス分析レポートの生成。</span><span class="sxs-lookup"><span data-stu-id="cbc03-110">Generate transaction performance analysis reports to identify performance-critical tables and stored procedures.</span></span>  
  
 <span data-ttu-id="cbc03-111">移行方法については、「[In-Memory OLTP - Common Workload Patterns and Migration Considerations](https://msdn.microsoft.com/library/dn673538.aspx)」(インメモリ OLTP - 一般的なワークロード パターンと移行に関する考慮事項) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-111">For information about migration methodologies, see [In-Memory OLTP - Common Workload Patterns and Migration Considerations](https://msdn.microsoft.com/library/dn673538.aspx).</span></span>  
  
 <span data-ttu-id="cbc03-112">トランザクション パフォーマンス コレクターとトランザクション パフォーマンス分析レポートは、次の操作を実行するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-112">The transaction performance collector and the transaction performance analysis reports help you accomplish the following tasks:</span></span>  
  
-   <span data-ttu-id="cbc03-113">ワークロードを分析して、インメモリ OLTP によってパフォーマンスが向上するかどうかを調べる。</span><span class="sxs-lookup"><span data-stu-id="cbc03-113">Analyze your workload to determine if In-Memory OLTP will improve performance.</span></span> <span data-ttu-id="cbc03-114">トランザクション パフォーマンス コレクターは、ワークロードのパフォーマンス特性を収集および評価します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-114">The transaction performance collector collects and evaluates the performance characteristics of your workload.</span></span> <span data-ttu-id="cbc03-115">.</span><span class="sxs-lookup"><span data-stu-id="cbc03-115">.</span></span> <span data-ttu-id="cbc03-116">次に、トランザクション パフォーマンス コレクターは、インメモリ OLTP に変換することよっても最も大きいメリットが得られるテーブルおよびストアド プロシージャをそれぞれ推奨します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-116">The transaction performance analysis report then recommends tables and stored procedures that would benefit most from conversion to In-Memory OLTP.</span></span>  
  
-   <span data-ttu-id="cbc03-117">インメモリ OLTP への移行の計画および実行を支援する。</span><span class="sxs-lookup"><span data-stu-id="cbc03-117">Help you plan and execute your migration to In-Memory OLTP.</span></span> <span data-ttu-id="cbc03-118">ディスク ベース テーブルからメモリ最適化テーブルへの移行パスは時間がかかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-118">The migration path from a disk based table to a memory-optimized table can be time consuming.</span></span> <span data-ttu-id="cbc03-119">メモリ最適化アドバイザーは、インメモリ OLTP にテーブルを移行する前にテーブルの非互換性を識別するために役立ちます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-119">The Memory-Optimization Advisor helps you identify the incompatibilities in your table that you must remove before moving the table to In-Memory OLTP.</span></span> <span data-ttu-id="cbc03-120">また、メモリ最適化アドバイザーは、テーブルをメモリ最適化テーブルに移行した場合のアプリケーションへの影響を理解するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-120">The Memory-Optimization Advisor also helps you understand the impact that the migration of a table to a memory-optimized table will have on your application.</span></span>  
  
     <span data-ttu-id="cbc03-121">インメモリ OLTP への移行を計画したとき、およびテーブルおよびストアド プロシージャの一部をインメモリ OLTP に移行するための作業を行うときに、アプリケーションがインメモリ OLTP のメリットを得られるかどうかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-121">You can see if your application would benefit from In-Memory OLTP, when you want to plan your migration to In-Memory OLTP, and whenever you work to migrate some of your tables and stored procedures to In-Memory OLTP.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="cbc03-122">データベース システムのパフォーマンスはさまざまな要因に左右されますが、そのすべてをトランザクション パフォーマンス コレクターで観察および測定できるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="cbc03-122">The performance of a database system is dependent on a variety of factors, not all of which the transaction performance collector can observe and measure.</span></span> <span data-ttu-id="cbc03-123">したがって、トランザクション パフォーマンス分析レポートは、作成した予測が実際のパフォーマンスの向上と一致することを保証するものではありません。</span><span class="sxs-lookup"><span data-stu-id="cbc03-123">Therefore, the transaction performance analysis report does not guarantee actual performance gains will match its predictions, if any predictions are made.</span></span>  
  
 <span data-ttu-id="cbc03-124">のインストール時に [**管理ツール-基本**] または [**管理ツール-詳細**] を選択すると、トランザクションパフォーマンスコレクターとトランザクションパフォーマンス分析レポートを生成する機能がインストールされ [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-124">The transaction performance collector and the ability to generate a transaction performance analysis report are installed when you select **Management Tools-Basic** or **Management Tools-Advanced** when you install [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="cbc03-125">推奨する運用方法</span><span class="sxs-lookup"><span data-stu-id="cbc03-125">Best Practices</span></span>  
 <span data-ttu-id="cbc03-126">推奨されるワークフローを、次のフローチャートで説明します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-126">The recommended workflow is illustrated in the following flowchart.</span></span> <span data-ttu-id="cbc03-127">黄色のノードは省略可能な手順を表しています。</span><span class="sxs-lookup"><span data-stu-id="cbc03-127">The yellow nodes represent optional procedures:</span></span>  
  
 <span data-ttu-id="cbc03-128">![AMR ワークフロー](../../database-engine/media/amr-1.gif "AMR ワークフロー")</span><span class="sxs-lookup"><span data-stu-id="cbc03-128">![AMR workflow](../../database-engine/media/amr-1.gif "AMR workflow")</span></span>  
  
 <span data-ttu-id="cbc03-129">パフォーマンス ベースラインは、任意の方法を使用して設定できます。このような方法には、パフォーマンス カウンターのログまたは [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の利用状況モニターを使用する方法がありますが、これに限定されるものではありません。</span><span class="sxs-lookup"><span data-stu-id="cbc03-129">You can use any method to establish a performance baseline, including but not limited to using performance counter logs or the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Activity Monitor.</span></span> <span data-ttu-id="cbc03-130">パフォーマンス ベースラインと比較において使用する情報は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="cbc03-130">The information to use in your performance baseline and your comparisons are:</span></span>  
  
-   <span data-ttu-id="cbc03-131">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の CPU 消費量。</span><span class="sxs-lookup"><span data-stu-id="cbc03-131">CPU consumption of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="cbc03-132">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のメモリ消費量。</span><span class="sxs-lookup"><span data-stu-id="cbc03-132">Memory consumption of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="cbc03-133">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の I/O アクティビティ。</span><span class="sxs-lookup"><span data-stu-id="cbc03-133">I/O activity of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="cbc03-134">トランザクションの処理中のインスタンスのトランザクション スループット。</span><span class="sxs-lookup"><span data-stu-id="cbc03-134">Transaction throughput of the instance while processing transactions.</span></span>  
  
 <span data-ttu-id="cbc03-135">トランザクション パフォーマンス コレクターは、15 分ごとにデータをキャプチャします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-135">The transaction performance collector captures data every 15 minutes.</span></span> <span data-ttu-id="cbc03-136">有効な結果を得るには、少なくとも 1 時間、トランザクション パフォーマンス コレクターを実行してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-136">To obtain usable results, run the transaction performance collector for at least one hour.</span></span> <span data-ttu-id="cbc03-137">最良の結果を得るには、主要なシナリオでデータをキャプチャするために必要なだけ時間をかけて、トランザクション パフォーマンス コレクターを実行します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-137">To obtain best results, run the transaction performance collector for as much time as needed to capture data for your primary scenarios.</span></span> <span data-ttu-id="cbc03-138">トランザクション パフォーマンス分析レポートを生成するのは、データの収集が完了した後にしてください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-138">Generate a transaction performance analysis report only after you have finished gathering data.</span></span>  
  
 <span data-ttu-id="cbc03-139">実稼動中の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスで実行されるようにトランザクション パフォーマンス コレクターを構成します。また、開発 (テスト) 環境の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスではデータを収集して、オーバーヘッドが最小限に抑えられるように構成します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-139">Configure the transaction performance collector to run on your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance in production and collect the data on a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance in your development (test) environment to ensure minimum overhead.</span></span> <span data-ttu-id="cbc03-140">リモートインスタンス上の管理データウェアハウスデータベースにデータを保存する方法については [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 、「[リモート SQL Server インスタンスでのデータ収集の構成](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md#xxx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-140">For information on how to save data in a Management Data Warehouse database on a remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance, see [Configure Data Collection on a Remote SQL Server Instance](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md#xxx).</span></span>  
  
## <a name="performance-impacts"></a><span data-ttu-id="cbc03-141">パフォーマンスへの影響</span><span class="sxs-lookup"><span data-stu-id="cbc03-141">Performance Impacts</span></span>  
 <span data-ttu-id="cbc03-142">トランザクション パフォーマンス コレクターは、次の 2 つのデータ コレクション セットで構成されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-142">The transaction performance collector consists of two data collection sets:</span></span>  
  
-   <span data-ttu-id="cbc03-143">テーブルの使用状況に関する分析</span><span class="sxs-lookup"><span data-stu-id="cbc03-143">Table Usage Analysis</span></span>  
  
-   <span data-ttu-id="cbc03-144">ストアド プロシージャに関する分析</span><span class="sxs-lookup"><span data-stu-id="cbc03-144">Stored Procedure Analysis</span></span>  
  
 <span data-ttu-id="cbc03-145">コレクション セットは 15 分ごとに 3 つの動的管理ビュー (DMV) からデータを収集し、管理データ ウェアハウスとして機能するように構成されたデータベースにそのデータをアップロードします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-145">The collection sets collect data from three dynamic management views (DMV) every fifteen minutes, and upload the data to the database configured to act as the Management Data Warehouse.</span></span> <span data-ttu-id="cbc03-146">収集したデータをアップロードすると、パフォーマンスは極小さな影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-146">Uploading the collected data incurs minimal performance impact.</span></span>  
  
## <a name="use-the-transaction-performance-collector"></a><span data-ttu-id="cbc03-147">トランザクション パフォーマンス コレクターの使用</span><span class="sxs-lookup"><span data-stu-id="cbc03-147">Use the Transaction Performance Collector</span></span>  
 <span data-ttu-id="cbc03-148">次の手順を実行するには、[!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] の [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] が必要です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-148">The following steps require [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="cbc03-149">プロファイル中は、スキーマの変更 (データベースの追加または削除、テーブルの作成または削除など) を行わないでください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-149">Do not change the schema (for example, add or remove databases or create or drop tables) during profiling.</span></span> <span data-ttu-id="cbc03-150">データの収集中にデータベースのスキーマを変更すると、レポートにデータベースが正確に含まれなくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-150">If you change the schema of a database while collecting data, the database may not be accurately included in the report.</span></span>  
  
### <a name="configure-management-data-warehouse"></a><span data-ttu-id="cbc03-151">管理データウェアハウスの構成</span><span class="sxs-lookup"><span data-stu-id="cbc03-151">Configure Management Data Warehouse</span></span>  
 <span data-ttu-id="cbc03-152">トランザクション パフォーマンス コレクターを使用するには、管理データ ウェアハウスを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-152">Management Data Warehouse must be configured to use the transaction performance collector.</span></span>  
  
 <span data-ttu-id="cbc03-153">データ (プロファイル) を収集する [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスのバージョンは、管理データ ウェアハウスが構成されている [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] と同一のバージョンか、それよりも古いバージョンである必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-153">The version of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that you will collect data on (profile) should be the same version or older than the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where Management Data Warehouse is configured.</span></span>  
  
1.  <span data-ttu-id="cbc03-154">オブジェクト エクスプローラーで、 **[管理]** を展開します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-154">In Object Explorer, expand **Management**.</span></span>  
  
2.  <span data-ttu-id="cbc03-155">[**データコレクション**] を右クリックし、[**タスク**] をクリックして、[**管理データウェアハウス**] を構成します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-155">Right click **Data Collection** and select **Tasks** and then **Configure Management Data Warehouse**.</span></span> <span data-ttu-id="cbc03-156">**管理データウェアハウスの構成ウィザード**が開始されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-156">The **Configure Management Data Warehouse Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="cbc03-157">[**次**へ] をクリックして、管理データウェアハウスとして機能するデータベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-157">Click **Next** to select the database that will act as the Management Data Warehouse.</span></span>  
  
4.  <span data-ttu-id="cbc03-158">[**新規**] をクリックして、プロファイルデータを保持する新しいデータベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-158">Click **New** to create a new database to hold the profile data.</span></span> <span data-ttu-id="cbc03-159">データベースの作成が完了したら、ウィザードの [**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-159">After you finish creating the database, click **Next** in the wizard.</span></span>  
  
5.  <span data-ttu-id="cbc03-160">ウィザードの次の手順では、ユーザーとログインを追加します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-160">The next step in the wizard lets you add users and logins.</span></span> <span data-ttu-id="cbc03-161">MDW インスタンスのロールのメンバーシップにログインをマップできます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-161">You may map logins to role memberships for the MDW instance.</span></span> <span data-ttu-id="cbc03-162">ローカル インスタンスからデータを収集する場合は、この手順は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="cbc03-162">This is not required to collect data from the local instance.</span></span> <span data-ttu-id="cbc03-163">ローカル インスタンスからデータを収集しない場合、プロファイルされるトランザクションを実行するアカウントにデータベース ロール メンバーシップ `mdw_admin` を許可できます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-163">If you are not collecting data from the local instance, you can grant database role membership `mdw_admin` to the account that will run transactions that will be profiled.</span></span> <span data-ttu-id="cbc03-164">完了したら、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-164">When done, click **Next**.</span></span>  
  
6.  <span data-ttu-id="cbc03-165">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェントが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-165">Make sure that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent is running.</span></span>  
  
7.  <span data-ttu-id="cbc03-166">次の画面で、[**完了**] をクリックしてウィザードを終了します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-166">On the next screen, click **Finish** to exit the wizard.</span></span>  
  
### <a name="configure-data-collection-on-a-local-ssnoversion-instance"></a><span data-ttu-id="cbc03-167">ローカル [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスでのデータ収集の構成</span><span class="sxs-lookup"><span data-stu-id="cbc03-167">Configure Data Collection on a Local [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance</span></span>  
 <span data-ttu-id="cbc03-168">データ コレクションを実行するには、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェントが起動されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-168">Data collection requires [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent to be started.</span></span> <span data-ttu-id="cbc03-169">サーバーでデータ コレクターを 1 つだけ構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-169">You only need to configure one data collector on a server.</span></span>  
  
 <span data-ttu-id="cbc03-170">データコレクターは、SQL Server 2012 以降のバージョンので構成でき [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-170">A data collector can be configured on a SQL Server 2012 or later version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="cbc03-171">同じインスタンスの管理データ ウェアハウス データベースにアップロードするようにデータ コレクションを構成するには</span><span class="sxs-lookup"><span data-stu-id="cbc03-171">To configure data collection to upload to a Management Data Warehouse database on the same instance,</span></span>  
  
1.  <span data-ttu-id="cbc03-172">**オブジェクトエクスプローラー**で、[**管理**] を展開します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-172">In **Object Explorer**, expand **Management**.</span></span>  
  
2.  <span data-ttu-id="cbc03-173">[**データコレクション**] を右クリックし、[**タスク**] を選択して、[**データコレクション**] を構成します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-173">Right click **Data Collection**, select **Tasks**, and then **Configure Data Collection**.</span></span> <span data-ttu-id="cbc03-174">**データコレクション構成ウィザード**が開始されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-174">The **Configure Data Collection Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="cbc03-175">プロファイルデータを収集するデータベースを選択するには、[**次**へ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-175">Click **Next** to select the database that will collect the profile data.</span></span>  
  
4.  <span data-ttu-id="cbc03-176">現在の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスと、そのインスタンス上の管理データ ウェアハウス データベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-176">Select the current [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance and a Management Data Warehouse database on that instance.</span></span>  
  
5.  <span data-ttu-id="cbc03-177">**[有効にするデータコレクターセットを選択し**てください] というラベルの付いたボックスで、[**トランザクションパフォーマンスコレクションセット**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-177">In the box labeled **Select data collector sets you want to enable**, select **Transaction Performance Collection Sets**.</span></span> <span data-ttu-id="cbc03-178">完了したら、**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-178">Click **Next** when done.</span></span>  
  
6.  <span data-ttu-id="cbc03-179">選択内容を確認します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-179">Verify the selections.</span></span> <span data-ttu-id="cbc03-180">設定を変更するには、[**戻る**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-180">Click **Back** to modify the settings.</span></span> <span data-ttu-id="cbc03-181">終了したら **[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-181">Click **Finish** when done.</span></span>  
  
###  <a name="configure-data-collection-on-a-remote-ssnoversion-instance"></a><a name="xxx"></a><span data-ttu-id="cbc03-182">リモートインスタンスでのデータ収集の構成 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="cbc03-182">Configure Data Collection on a Remote [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance</span></span>  
 <span data-ttu-id="cbc03-183">データを収集するには、データを収集するインスタンスで [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェントが開始されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-183">Data collection requires [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent to be started on the instance that will collect the data.</span></span>  
  
 <span data-ttu-id="cbc03-184">データコレクターは、SQL Server 2012 以降のバージョンので構成でき [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-184">A data collector can be configured on a SQL Server 2012 or later version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="cbc03-185">トランザクションがプロファイルされる場所とは異なるインスタンス上の管理データ ウェアハウス データベースにデータ コレクターがデータをアップロードするためには、適切な資格情報が設定された [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェント プロキシが必要です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-185">You need a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy established with the correct credential for a data collector to upload data to a Management Data Warehouse database on an instance that is different from where transactions will be profiled.</span></span> <span data-ttu-id="cbc03-186">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェント プロキシを有効にするには、ドメイン対応のログインを持つ資格情報を最初に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-186">To enable a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy, you must first establish a credential with a domain-enabled login.</span></span> <span data-ttu-id="cbc03-187">ドメイン対応のログインは、管理データ ウェアハウス データベースの `mdw_admin` グループのメンバーである必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-187">The domain-enabled login must be a member of `mdw_admin` group for the Management Data Warehouse database.</span></span> <span data-ttu-id="cbc03-188">資格情報を作成する方法については[、「方法: 資格情報を作成する (SQL Server Management Studio)](../security/authentication-access/create-a-credential.md) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-188">See [How to: Create a Credential (SQL Server Management Studio)](../security/authentication-access/create-a-credential.md) for information on how to create a credential.</span></span>  
  
 <span data-ttu-id="cbc03-189">別のインスタンスの管理データ ウェアハウス データベースにアップロードするようにデータ コレクションを構成するには</span><span class="sxs-lookup"><span data-stu-id="cbc03-189">To configure data collection to upload to a Management Data Warehouse database on a different instance,</span></span>  
  
1.  <span data-ttu-id="cbc03-190">インメモリ OLTP に移行するディスクベースのオブジェクトを含むインスタンスで、オブジェクトエクスプローラーの [**管理**] ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-190">On the instance that contains the disk-based objects that you want to migrate to In-Memory OLTP, expand the **Management** node in Object Explorer.</span></span>  
  
2.  <span data-ttu-id="cbc03-191">[**データコレクション**] を右クリックして [**タスク**] を選択し、[**データコレクションの構成**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-191">Right click **Data Collection** and select **Tasks** and then **Configure Data Collection**.</span></span> <span data-ttu-id="cbc03-192">**データコレクション構成ウィザード**が開始されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-192">The **Configure Data Collection Wizard** begins.</span></span>  
  
3.  <span data-ttu-id="cbc03-193">プロファイルデータを収集するデータベースを選択するには、[**次**へ] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-193">Click **Next** to select the database that will collect the profile data.</span></span>  
  
4.  <span data-ttu-id="cbc03-194">他の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスに管理データ ウェアハウス データベースが存在していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-194">Make sure that a Management Data Warehouse database exists on the other [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
5.  <span data-ttu-id="cbc03-195">別の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスと、そのインスタンス上の管理データ ウェアハウス データベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-195">Select another [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance and a Management Data Warehouse database on that instance.</span></span>  
  
     <span data-ttu-id="cbc03-196">データ (プロファイル) を収集する [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスのバージョンは、管理データ ウェアハウスが構成されている [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] と同一のバージョンか、それよりも古いバージョンである必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-196">The version of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that you will collect data on (profile) should be the same version or older than the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where Management Data Warehouse is configured.</span></span>  
  
6.  <span data-ttu-id="cbc03-197">**[有効にするデータコレクターセットを選択し**てください] というラベルの付いたボックスで、[**トランザクションパフォーマンスコレクションセット**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-197">In the box labeled **Select data collector sets you want to enable**, select **Transaction Performance Collection Sets**.</span></span>  
  
7.  <span data-ttu-id="cbc03-198">[ \*\* [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リモートアップロードにエージェントプロキシを使用\*\*する] を選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-198">Select **Use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy for remote uploads**.</span></span>  
  
8.  <span data-ttu-id="cbc03-199">完了したら、**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-199">Click **Next** when done.</span></span>  
  
9. <span data-ttu-id="cbc03-200">プロキシを選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-200">Select the proxy.</span></span>  
  
     <span data-ttu-id="cbc03-201">新しい [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェント プロキシを作成する場合</span><span class="sxs-lookup"><span data-stu-id="cbc03-201">If you want to create a new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent proxy,</span></span>  
  
    1.  <span data-ttu-id="cbc03-202">[**新規**] をクリックして、[**新しいプロキシアカウント**] ダイアログボックスを表示します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-202">Click **New** to display the **New Proxy Account** dialog box.</span></span>  
  
    2.  <span data-ttu-id="cbc03-203">[**新しいプロキシアカウント**] ダイアログボックスで、プロキシの名前を入力し、資格情報を選択して、必要に応じて説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-203">In the **New Proxy Account** dialog box, enter the name of the proxy, select the credential, and optionally enter a description.</span></span> <span data-ttu-id="cbc03-204">次に、[**プリンシパル**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-204">Then, click **Principals**.</span></span>  
  
    3.  <span data-ttu-id="cbc03-205">[**追加**] をクリックし、[ **Msdb**ロール] を選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-205">Click **Add** and select **Msdb** role.</span></span>  
  
    4.  <span data-ttu-id="cbc03-206">を選択 `dc_proxy` し、[ **OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-206">Select `dc_proxy` and click **OK**.</span></span> <span data-ttu-id="cbc03-207">もう一度、[**OK**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-207">Then click **OK** again.</span></span>  
  
     <span data-ttu-id="cbc03-208">正しいプロキシを選択したら、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-208">After the correct proxy is selected, click **Next**.</span></span>  
  
10. <span data-ttu-id="cbc03-209">システムコレクションセットを構成するには、**システムコレクションセット**を確認し、[**次へ**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-209">To configure System Collection Sets, check **System Collection Sets** and click **Next**.</span></span>  
  
11. <span data-ttu-id="cbc03-210">選択内容を確認します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-210">Verify the selections.</span></span> <span data-ttu-id="cbc03-211">設定を変更するには、[**戻る**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="cbc03-211">Click **Back** to modify the settings.</span></span> <span data-ttu-id="cbc03-212">完了したら Clicck を**終了**します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-212">Clicck **Finish** when done.</span></span>  
  
 <span data-ttu-id="cbc03-213">データ コレクション セットが構成され、インスタンス上で実行されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-213">Data collection sets should now be configured and running on your instance.</span></span>  
  
### <a name="generate-reports"></a><span data-ttu-id="cbc03-214">レポートの生成</span><span class="sxs-lookup"><span data-stu-id="cbc03-214">Generate Reports</span></span>  
 <span data-ttu-id="cbc03-215">トランザクションパフォーマンス分析レポートを生成するには、管理データウェアハウスのデータベースを右クリックし、[**レポート**]、[**管理データウェアハウス**]、[**トランザクションパフォーマンス分析の概要**] の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-215">You can generate transaction performance analysis reports by right clicking the database of the Management Data Warehouse and selecting **Reports**, then **Management Data Warehouse**, and then **Transaction Performance Analysis Overview**.</span></span>  
  
 <span data-ttu-id="cbc03-216">レポートは、ワークロード サーバーのすべてのユーザー データベースに関する情報を収集します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-216">The report collects information about all user databases on the workload server.</span></span> <span data-ttu-id="cbc03-217">管理データ ウェアハウス (MDW) データベースがローカル コンピューターに存在する場合は、レポートに MDW データベースが表示されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-217">If your Management Data Warehouse (MDW) database is on the local computer, you will see the MDW database(s) in the report.</span></span>  
  
 <span data-ttu-id="cbc03-218">経過時間のうち CPU 時間の割合が高いストアド プロシージャは、移行の対象となります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-218">A stored procedure with high ratio of CPU time to elapsed time is a candidate for migration.</span></span> <span data-ttu-id="cbc03-219">ネイティブ コンパイル ストアド プロシージャはメモリ最適化テーブルのみを参照できるため、レポートはすべてのテーブル参照を示します。これは移行コストに追加できます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-219">The report shows all table references, because natively compiled stored procedures can only reference memory-optimized tables, which can add to the migration cost.</span></span>  
  
 <span data-ttu-id="cbc03-220">テーブルの詳細なレポートは、3 つのセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="cbc03-220">The details report for a table consists of three sections:</span></span>  
  
-   <span data-ttu-id="cbc03-221">スキャン統計セクション</span><span class="sxs-lookup"><span data-stu-id="cbc03-221">Scan Statistics Section</span></span>  
  
     <span data-ttu-id="cbc03-222">このセクションには、データベース テーブルのスキャンに関して収集された統計を示す単一のテーブルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="cbc03-222">This section includes a single table that shows the statistics that were collected about scans on the database table.</span></span> <span data-ttu-id="cbc03-223">列は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="cbc03-223">The columns are:</span></span>  
  
    -   <span data-ttu-id="cbc03-224">総アクセスに対する比率。</span><span class="sxs-lookup"><span data-stu-id="cbc03-224">Percent of total accesses.</span></span> <span data-ttu-id="cbc03-225">データベース全体のアクティビティに対する、このテーブルでのスキャンとシークの割合です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-225">The percentage of scans and seeks on this table with respect to the activity of the entire database.</span></span> <span data-ttu-id="cbc03-226">この割合が高くなるほど、データベース内の他のテーブルと比較して、テーブルが使用される頻度が高くなります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-226">The higher this percentage, the more heavily used the table is compared to other tables in the database.</span></span>  
  
    -   <span data-ttu-id="cbc03-227">参照統計/範囲スキャン統計。</span><span class="sxs-lookup"><span data-stu-id="cbc03-227">Lookup Statistics/Range Scan Statistics.</span></span> <span data-ttu-id="cbc03-228">この列には、プロファイル中にテーブルで行われたポイント参照と範囲スキャン (インデックス スキャンとテーブル スキャン) の回数が記録されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-228">This column records the number of point lookups and range scans (index scans and table scans) conducted on the table during profiling.</span></span> <span data-ttu-id="cbc03-229">トランザクションごとの平均は推定値です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-229">Average per transaction is an estimate.</span></span>  
  
    -   <span data-ttu-id="cbc03-230">相互運用による到達率と本来の到達率。</span><span class="sxs-lookup"><span data-stu-id="cbc03-230">Interop Gain and Native Gain.</span></span> <span data-ttu-id="cbc03-231">これらの列では、テーブルがメモリ最適化テーブルに変換された場合にポイント参照または範囲スキャンによってパフォーマンスがどの程度向上するかを予測します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-231">These columns estimate the amount of performance benefit a point lookup or range scan would have if the table is converted to a memory-optimized table.</span></span>  
  
-   <span data-ttu-id="cbc03-232">競合統計セクション</span><span class="sxs-lookup"><span data-stu-id="cbc03-232">Contention Statistics Section</span></span>  
  
     <span data-ttu-id="cbc03-233">このセクションには、データベース テーブルの競合を示すテーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-233">This section includes a table that shows contention on the database table.</span></span> <span data-ttu-id="cbc03-234">データベースラッチとロックの詳細については、「[ロックアーキテクチャ](https://msdn.microsoft.com/library/aa224738\(v=sql.80\).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-234">For more information regarding database latches and locks, please see [Locking Architecture](https://msdn.microsoft.com/library/aa224738\(v=sql.80\).aspx).</span></span> <span data-ttu-id="cbc03-235">次の列で構成されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-235">The columns are as follows:</span></span>  
  
    -   <span data-ttu-id="cbc03-236">待機の総数に対する比率。</span><span class="sxs-lookup"><span data-stu-id="cbc03-236">Percent of total waits.</span></span> <span data-ttu-id="cbc03-237">データベースのアクティビティと比較した、このデータベース テーブルでのラッチ待機とロック待機の割合です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-237">The percentage of latch and lock waits on this database table compared to activity of the database.</span></span> <span data-ttu-id="cbc03-238">この割合が高くなるほど、データベース内の他のテーブルと比較して、テーブルが使用される頻度が高くなります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-238">The higher this percentage, the more heavily used the table is compared to other tables in the database.</span></span>  
  
    -   <span data-ttu-id="cbc03-239">ラッチ統計。</span><span class="sxs-lookup"><span data-stu-id="cbc03-239">Latch Statistics.</span></span> <span data-ttu-id="cbc03-240">これらの列には、このテーブルの関連するクエリに対するラッチ待機数が記録されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-240">These columns record the number of latch waits for queries involving for this table.</span></span> <span data-ttu-id="cbc03-241">ラッチの詳細については、「[ラッチ](https://msdn.microsoft.com/library/aa224727\(v=SQL.80\).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-241">For information on latches, see [Latching](https://msdn.microsoft.com/library/aa224727\(v=SQL.80\).aspx).</span></span> <span data-ttu-id="cbc03-242">この数値が大きくなるほど、テーブルでのラッチの競合が増加します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-242">The higher this number, the more latch contention on the table.</span></span>  
  
    -   <span data-ttu-id="cbc03-243">ロック統計。</span><span class="sxs-lookup"><span data-stu-id="cbc03-243">Lock Statistics.</span></span> <span data-ttu-id="cbc03-244">この列のグループには、このテーブルのクエリに対するページ ロックの取得および待機の数が記録されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-244">This group of columns record the number of page lock acquisitions and waits for queries for this table.</span></span> <span data-ttu-id="cbc03-245">ロックの詳細については、「 [SQL Server のロックについ](https://msdn.microsoft.com/library/aa213039\(v=SQL.80\).aspx)て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-245">For more information on locks, see [Understanding Locking in SQL Server](https://msdn.microsoft.com/library/aa213039\(v=SQL.80\).aspx).</span></span> <span data-ttu-id="cbc03-246">待機数が多いほど、テーブルでのロックの競合が増加します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-246">The more waits, the more lock contention on the table.</span></span>  
  
-   <span data-ttu-id="cbc03-247">移行難易度セクション</span><span class="sxs-lookup"><span data-stu-id="cbc03-247">Migration Difficulties Section</span></span>  
  
     <span data-ttu-id="cbc03-248">このセクションには、このデータベース テーブルをメモリ最適化テーブルに変換する際の難易度を示すテーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-248">This section includes a table that shows the difficulty of converting this database table to a memory-optimized table.</span></span> <span data-ttu-id="cbc03-249">難易度が高いほど、テーブルの変換が難しくなることを示します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-249">A higher difficulty rating indicates more difficultly to convert the table.</span></span> <span data-ttu-id="cbc03-250">このデータベーステーブルの変換に関する詳細を確認するには、[メモリ最適化アドバイザー](memory-optimization-advisor.md)を使用してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-250">To see details to convert this database table, please use the [Memory Optimization Advisor](memory-optimization-advisor.md).</span></span>  
  
 <span data-ttu-id="cbc03-251">テーブルの詳細レポートのスキャンと競合の統計情報は、 [dm_db_index_operational_stats &#40;transact-sql&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-operational-stats-transact-sql)から収集および集計されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-251">Scan and contention statistics on the table details report is gathered and aggregated from [sys.dm_db_index_operational_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-operational-stats-transact-sql).</span></span>  
  
 <span data-ttu-id="cbc03-252">ストアド プロシージャの詳細レポートは、次の 2 つのセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="cbc03-252">The details report for a stored procedure consists of two sections:</span></span>  
  
-   <span data-ttu-id="cbc03-253">実行の統計セクション</span><span class="sxs-lookup"><span data-stu-id="cbc03-253">Execution Statistics Section</span></span>  
  
     <span data-ttu-id="cbc03-254">このセクションには、ストアド プロシージャの実行に関して収集された統計を示すテーブルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="cbc03-254">This section includes a table that shows the statistics that were collected about the stored procedure's executions.</span></span> <span data-ttu-id="cbc03-255">次の列で構成されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-255">The columns are as follows:</span></span>  
  
    -   <span data-ttu-id="cbc03-256">キャッシュ時間。</span><span class="sxs-lookup"><span data-stu-id="cbc03-256">Cached Time.</span></span> <span data-ttu-id="cbc03-257">この実行プランがキャッシュされた時間です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-257">The time this execution plan is cached.</span></span> <span data-ttu-id="cbc03-258">ストアド プロシージャがプラン キャッシュを途中で抜けてもう一度キャッシュに入る場合、各キャッシュの時間になります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-258">If the stored procedure drops out of the plan cache and re-enters, there will be times for each cache.</span></span>  
  
    -   <span data-ttu-id="cbc03-259">総 CPU 時間。</span><span class="sxs-lookup"><span data-stu-id="cbc03-259">Total CPU Time.</span></span> <span data-ttu-id="cbc03-260">プロファイル中にストアド プロシージャで使用された総 CPU 時間です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-260">The total CPU time that the stored procedure consumed during profiling.</span></span> <span data-ttu-id="cbc03-261">この数値が大きくなるほど、ストアド プロシージャで使用された CPU が増加します。</span><span class="sxs-lookup"><span data-stu-id="cbc03-261">The higher this number, the more CPU the stored procedure used.</span></span>  
  
    -   <span data-ttu-id="cbc03-262">総実行時間。</span><span class="sxs-lookup"><span data-stu-id="cbc03-262">Total Execution Time.</span></span> <span data-ttu-id="cbc03-263">プロファイル中にストアド プロシージャで使用された実行時間の合計です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-263">The total amount of execution time the stored procedure used during profiling.</span></span> <span data-ttu-id="cbc03-264">この数値と CPU 時間の差が大きいほど、ストアド プロシージャによる CPU の使用効率は低くなります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-264">The higher the difference between this number and the CPU time is, the less efficiently the stored procedure is using the CPU.</span></span>  
  
    -   <span data-ttu-id="cbc03-265">キャッシュ ミスの総数。</span><span class="sxs-lookup"><span data-stu-id="cbc03-265">Total Cache Missed.</span></span> <span data-ttu-id="cbc03-266">プロファイル中に、ストアド プロシージャの実行によって発生したキャッシュ ミス (物理ストレージからの読み取り) の数です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-266">The number of cache misses (reads from physical storage) that is caused by the stored procedure's executions during profiling.</span></span>  
  
    -   <span data-ttu-id="cbc03-267">実行回数。</span><span class="sxs-lookup"><span data-stu-id="cbc03-267">Execution Count.</span></span> <span data-ttu-id="cbc03-268">プロファイル中にこのストアド プロシージャが実行された回数です。</span><span class="sxs-lookup"><span data-stu-id="cbc03-268">The number of times this stored procedure executed during profiling.</span></span>  
  
-   <span data-ttu-id="cbc03-269">テーブル参照セクション</span><span class="sxs-lookup"><span data-stu-id="cbc03-269">Table References Section</span></span>  
  
     <span data-ttu-id="cbc03-270">このセクションには、このストアド プロシージャによって参照されるテーブルを示すテーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-270">This section includes a table that shows the tables to which this stored procedure refers.</span></span> <span data-ttu-id="cbc03-271">ストアド プロシージャをネイティブ コンパイル ストアド プロシージャに変換する前に、これらすべてのテーブルをメモリ最適化テーブルに変換する必要があります。また、これらは同じサーバーおよびデータベースに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbc03-271">Before converting the stored procedure into a natively compiled stored procedure, all of these tables must be converted to memory-optimized tables, and they must stay on the same server and database.</span></span>  
  
 <span data-ttu-id="cbc03-272">ストアドプロシージャの詳細レポートの実行の統計情報は、 [dm_exec_procedure_stats &#40;transact-sql&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-procedure-stats-transact-sql)から収集および集計されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-272">Execution Statistics on the stored procedure details report is gathered and aggregated from [sys.dm_exec_procedure_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-exec-procedure-stats-transact-sql).</span></span> <span data-ttu-id="cbc03-273">参照は、 [sql_expression_dependencies &#40;transact-sql&#41;](/sql/relational-databases/system-catalog-views/sys-sql-expression-dependencies-transact-sql)から取得されます。</span><span class="sxs-lookup"><span data-stu-id="cbc03-273">The references are obtained from [sys.sql_expression_dependencies &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-sql-expression-dependencies-transact-sql).</span></span>  
  
 <span data-ttu-id="cbc03-274">ストアドプロシージャをネイティブコンパイルストアドプロシージャに変換する方法の詳細については、[ネイティブコンパイルアドバイザー](native-compilation-advisor.md)を使用してください。</span><span class="sxs-lookup"><span data-stu-id="cbc03-274">To see details about how to convert a stored procedure to a natively compiled stored procedure, please use the [Native Compilation Advisor](native-compilation-advisor.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cbc03-275">参照</span><span class="sxs-lookup"><span data-stu-id="cbc03-275">See Also</span></span>  
 [<span data-ttu-id="cbc03-276">インメモリ OLTP への移行</span><span class="sxs-lookup"><span data-stu-id="cbc03-276">Migrating to In-Memory OLTP</span></span>](migrating-to-in-memory-oltp.md)  
  
  
