---
title: リソース ガバナー | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Resource Governor, overview
- Resource Governor
ms.assetid: 2bc89b66-e801-45ba-b30d-8ed197052212
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 7660446a176b9535883a001318c8f8fc981f99c1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87715130"
---
# <a name="resource-governor"></a><span data-ttu-id="2bc93-102">[リソース ガバナー]</span><span class="sxs-lookup"><span data-stu-id="2bc93-102">Resource Governor</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="2bc93-103">リソース ガバナーは、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のワークロードとシステム リソースの消費を管理するために使用できる機能です。</span><span class="sxs-lookup"><span data-stu-id="2bc93-103">Resource Governor is a feature than you can use to manage [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] workload and system resource consumption.</span></span> <span data-ttu-id="2bc93-104">Resource Governor を使用すると、着信アプリケーション要求で使用できる CPU、物理 IO、およびメモリの量に対して制限を指定できます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-104">Resource Governor enables you to specify limits on the amount of CPU, physical IO, and memory that incoming application requests can use.</span></span>  
  
## <a name="benefits-of-resource-governor"></a><span data-ttu-id="2bc93-105">リソース ガバナーの利点</span><span class="sxs-lookup"><span data-stu-id="2bc93-105">Benefits of Resource Governor</span></span>  
 <span data-ttu-id="2bc93-106">リソース ガバナーでは、受け取った要求に応じてリソース消費を制限することにより、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のワークロードとリソースを管理することができます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-106">Resource Governor enables you to manage [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] workloads and resources by specifying limits on resource consumption by incoming requests.</span></span> <span data-ttu-id="2bc93-107">リソース ガバナーでは、同程度のサイズの複数のクエリや要求を 1 つのエンティティとして扱う場合、それらをワークロードと呼んでいます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-107">In the Resource Governor context, workload is a set of similarly sized queries or requests that can, and should be, treated as a single entity.</span></span> <span data-ttu-id="2bc93-108">これは必須ではありませんが、ワークロードのリソースの使用パターンが統一化されていると、リソース ガバナーから得られる利点も増えます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-108">This is not a requirement, but the more uniform the resource usage pattern of a workload is, the more benefit you are likely to derive from Resource Governor.</span></span> <span data-ttu-id="2bc93-109">リソース制限は、実行中のワークロードへの影響を最小限に抑えながらリアルタイムで再構成できます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-109">Resource limits can be reconfigured in real time with minimal impact on workloads that are executing.</span></span>  
  
 <span data-ttu-id="2bc93-110">複数の個別のワークロードが同一サーバー上に存在する環境でリソース ガバナーを使用すると、指定された制限に基づいてこれらのワークロードを区別し、要求された共有リソースを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-110">In an environment where multiple distinct workloads are present on the same server, Resource Governor enables you to differentiate these workloads and allocate shared resources as they are requested, based on the limits that you specify.</span></span> <span data-ttu-id="2bc93-111">それらのリソースは CPU、物理 IO、およびメモリです。</span><span class="sxs-lookup"><span data-stu-id="2bc93-111">These resources are CPU, physical IO, and memory.</span></span>  
  
 <span data-ttu-id="2bc93-112">リソース ガバナーを使用すると、次のことが可能です。</span><span class="sxs-lookup"><span data-stu-id="2bc93-112">By using Resource Governor, you can:</span></span>  
  
-   <span data-ttu-id="2bc93-113">複数のクライアント ワークロードを提供する SQL Server の 1 つのインスタンスで、マルチテナント機能とリソースの分離を提供します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-113">Provide multitenancy and resource isolation on single instances of SQL Server that serve multiple client workloads.</span></span> <span data-ttu-id="2bc93-114">つまり、サーバー上の使用可能なリソースをワークロード間で分散し、ワークロードがリソースの確保を求めて競合したときに発生する可能性のある問題を最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-114">That is, you can divide the available resources on a server among the workloads and minimize the problems that can occur when workloads compete for resources.</span></span>  
  
-   <span data-ttu-id="2bc93-115">複数のワークロードが存在するマルチユーザー環境で、予測可能なパフォーマンスを実現し、ワークロード テナントの SLA をサポートします。</span><span class="sxs-lookup"><span data-stu-id="2bc93-115">Provide predictable performance and support SLAs for workload tenants in a multi-workload and multi-user environment.</span></span>  
  
-   <span data-ttu-id="2bc93-116">IO サブシステムを飽和させ、他のワークロードに悪影響を与える可能性のある DBCC CHECKDB などの操作に対して、ランナウェイ クエリの分離と制限または IO リソースの調整を行います。</span><span class="sxs-lookup"><span data-stu-id="2bc93-116">Isolate and limit runaway queries or throttle IO resources for operations such as DBCC CHECKDB that can saturate the IO subsystem and negatively impact other workloads.</span></span>  
  
-   <span data-ttu-id="2bc93-117">リソース使用のチャージバックに対して詳細なリソースの追跡を追加し、サーバー リソースの消費者に予測可能な請求情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-117">Add fine-grained resource tracking for resource usage chargebacks and provide predictable billing to the consumers of the server resources.</span></span>  
  
## <a name="resource-governor-constraints"></a><span data-ttu-id="2bc93-118">リソース ガバナーの制約</span><span class="sxs-lookup"><span data-stu-id="2bc93-118">Resource Governor Constraints</span></span>  
 <span data-ttu-id="2bc93-119">このリリースのリソース ガバナーには次の制約があります。</span><span class="sxs-lookup"><span data-stu-id="2bc93-119">This release of Resource Governor has the following constraints:</span></span>  
  
-   <span data-ttu-id="2bc93-120">リソース管理は [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]に制限されています。</span><span class="sxs-lookup"><span data-stu-id="2bc93-120">Resource management is limited to the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)].</span></span> <span data-ttu-id="2bc93-121">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)]、および [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]ではリソース ガバナーを使用できません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-121">Resource Governor can not be used for [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)], and [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="2bc93-122">SQL Server のインスタンス間のワークロードの監視機能、または管理機能はありません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-122">There is no workload monitoring or workload management between SQL Server instances.</span></span>  
  
-   <span data-ttu-id="2bc93-123">リソース ガバナーで OLTP ワークロードを管理することは可能ですが、このような種類のクエリは通常短時間で、CPU 上の滞留期間が短いために帯域幅制御を適用できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="2bc93-123">Resource Governor can manage OLTP workloads but these types of queries, which are typically very short in duration, are not always on the CPU long enough to apply bandwidth controls.</span></span> <span data-ttu-id="2bc93-124">この結果、CPU 使用率 % として返される統計が偏る可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2bc93-124">This may skew in the statistics returned for CPU usage %.</span></span>  
  
-   <span data-ttu-id="2bc93-125">物理 IO を制御する機能は、ユーザー操作のみに適用され、システム タスクには適用されません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-125">The ability to govern physical IO only applies to user operations and not system tasks.</span></span> <span data-ttu-id="2bc93-126">システム タスクには、トランザクション ログへの書き込み操作およびレイジー ライターの IO 操作が含まれます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-126">System tasks include write operations to the transaction log and Lazy Writer IO operations.</span></span> <span data-ttu-id="2bc93-127">ほとんどの書き込み操作は通常システム タスクによって実行されるため、リソース ガバナーは主にユーザーの読み取り操作に適用されます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-127">The Resource Govenor applies primarily to user read operations because most write operations are typically performed by system tasks.</span></span>  
  
-   <span data-ttu-id="2bc93-128">内部リソース プールで IO のしきい値を設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-128">You cannot set IO thresholds on the internal resource pool.</span></span>  
  
## <a name="resource-concepts"></a><span data-ttu-id="2bc93-129">リソースの概念</span><span class="sxs-lookup"><span data-stu-id="2bc93-129">Resource Concepts</span></span>  
 <span data-ttu-id="2bc93-130">次に示す 3 つの概念は、リソース ガバナーを理解し、使用するための基本となります。</span><span class="sxs-lookup"><span data-stu-id="2bc93-130">The following three concepts are fundamental to understanding and using Resource Governor:</span></span>  
  
-   <span data-ttu-id="2bc93-131">**リソース プール。**</span><span class="sxs-lookup"><span data-stu-id="2bc93-131">**Resource pools.**</span></span> <span data-ttu-id="2bc93-132">リソース プールは、サーバーの物理リソースを表します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-132">A resource pool, represents the physical resources of the server.</span></span> <span data-ttu-id="2bc93-133">プールは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンス内部の仮想 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスと考えることができます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-133">You can think of a pool as a virtual [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance inside of a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="2bc93-134">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールすると、2 つのリソース プール (内部と既定) が作成されます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-134">Two resource pools (internal and default) are created when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span> <span data-ttu-id="2bc93-135">リソース ガバナーでは、ユーザー定義のリソース プールもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-135">Resource Governor also supports user-defined resource pools.</span></span> <span data-ttu-id="2bc93-136">詳細については、「 [リソース ガバナー リソース プール](resource-governor-resource-pool.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2bc93-136">For more information, see [Resource Governor Resource Pool](resource-governor-resource-pool.md).</span></span>  
  
-   <span data-ttu-id="2bc93-137">**ワークロード グループ。**</span><span class="sxs-lookup"><span data-stu-id="2bc93-137">**Workload groups.**</span></span> <span data-ttu-id="2bc93-138">ワークロード グループは、分類基準が類似しているセッション要求のコンテナーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-138">A workload group serves as a container for session requests that have similar classification criteria.</span></span> <span data-ttu-id="2bc93-139">ワークロードは、セッションの全体的な監視を可能にし、セッションのポリシーを定義します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-139">A workload allows for aggregate monitoring of the sessions, and defines policies for the sessions.</span></span> <span data-ttu-id="2bc93-140">各ワークロード グループはリソース プールに存在します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-140">Each workload group is in a resource pool.</span></span> <span data-ttu-id="2bc93-141">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールすると、2 つのワークロード グループ (内部と既定) が作成され、対応するリソース プールにマップされます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-141">Two workload groups (internal and default) are created and mapped to their corresponding resource pools when [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is installed.</span></span> <span data-ttu-id="2bc93-142">リソース ガバナーでは、ユーザー定義のワークロード グループもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-142">Resource Governor also supports user-defined workload groups.</span></span> <span data-ttu-id="2bc93-143">詳細については、「 [リソース ガバナー ワークロード グループ](resource-governor-workload-group.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2bc93-143">For more information see, [Resource Governor Workload Group](resource-governor-workload-group.md).</span></span>  
  
-   <span data-ttu-id="2bc93-144">**分類。**</span><span class="sxs-lookup"><span data-stu-id="2bc93-144">**Classification.**</span></span> <span data-ttu-id="2bc93-145">分類プロセスにより、着信セッションがセッションの特性に基づいてワークロード グループに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-145">The Classification process assigns incoming sessions to a workload group based on the characteristics of the session.</span></span> <span data-ttu-id="2bc93-146">分類ロジックは、分類子関数と呼ばれるユーザー定義関数を記述することで調整できます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-146">You can tailor the classification logic by writing a user-defined function, called a classifier function.</span></span> <span data-ttu-id="2bc93-147">リソース ガバナーでは、分類規則を実装するための、ユーザー定義の分類関数もサポートされます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-147">Resource Governor also supports a classifier user-defined function for implementing classification rules.</span></span> <span data-ttu-id="2bc93-148">詳細については、「 [リソース ガバナーの分類子関数](resource-governor-classifier-function.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2bc93-148">For more information, see [Resource Governor Classifier Function](resource-governor-classifier-function.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2bc93-149">リソース ガバナーでは、専用管理者接続 (DAC) が制御されません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-149">Resource Governor does not impose any controls on a dedicated administrator connection (DAC).</span></span> <span data-ttu-id="2bc93-150">内部のワークロード グループおよびリソース プールで実行される DAC クエリは、分類する必要がありません。</span><span class="sxs-lookup"><span data-stu-id="2bc93-150">There is no need to classify DAC queries, which run in the internal workload group and resource pool.</span></span>  
  
 <span data-ttu-id="2bc93-151">リソース ガバナーのコンテキストでは、上記の概念をコンポーネントとして扱うことができます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-151">In the context of Resource Governor, you can treat the preceding concepts as components.</span></span> <span data-ttu-id="2bc93-152">次の図は、これらのコンポーネントと、データベース エンジン環境でのその相互関係を示しています。</span><span class="sxs-lookup"><span data-stu-id="2bc93-152">The following illustration shows these components and their relationship with each other as they exist in the database engine environment.</span></span> <span data-ttu-id="2bc93-153">処理の観点から見たフローを簡単に示すと次のようになります。</span><span class="sxs-lookup"><span data-stu-id="2bc93-153">From a processing perspective, the simplified flow is as follows:</span></span>  
  
-   <span data-ttu-id="2bc93-154">セッション (セッション 1/ *n*) に着信接続が存在します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-154">There is an incoming connection for a session (Session 1 of *n*).</span></span>  
  
-   <span data-ttu-id="2bc93-155">セッションが分類されます (分類)。</span><span class="sxs-lookup"><span data-stu-id="2bc93-155">The session is classified (Classification).</span></span>  
  
-   <span data-ttu-id="2bc93-156">セッション ワークロードがワークロード グループ (グループ 4 など) にルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="2bc93-156">The session workload is routed to a workload group, for example, Group 4.</span></span>  
  
-   <span data-ttu-id="2bc93-157">ワークロード グループは、自身が関連付けられているリソース プール (プール 2 など) を使用します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-157">The workload group uses the resource pool it is associated with, for example, Pool 2.</span></span>  
  
-   <span data-ttu-id="2bc93-158">リソース プールは、アプリケーション (アプリケーション 3 など) に必要なリソースの提供と制限を行います。</span><span class="sxs-lookup"><span data-stu-id="2bc93-158">The resource pool provides and limits the resources required by the application, for example, Application 3.</span></span>  
  
 <span data-ttu-id="2bc93-159">![リソース ガバナーの機能コンポーネント](../../database-engine/media/rg-basic-funct-components.gif "リソース ガバナーの機能コンポーネント")</span><span class="sxs-lookup"><span data-stu-id="2bc93-159">![Resource Governor Functional Components](../../database-engine/media/rg-basic-funct-components.gif "Resource Governor Functional Components")</span></span>  
  
## <a name="resource-governor-tasks"></a><span data-ttu-id="2bc93-160">リソース ガバナーのタスク</span><span class="sxs-lookup"><span data-stu-id="2bc93-160">Resource Governor Tasks</span></span>  
  
|<span data-ttu-id="2bc93-161">タスクの説明</span><span class="sxs-lookup"><span data-stu-id="2bc93-161">Task Description</span></span>|<span data-ttu-id="2bc93-162">トピック</span><span class="sxs-lookup"><span data-stu-id="2bc93-162">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="2bc93-163">リソース ガバナーを有効にする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-163">Describes how to enable Resource Governor.</span></span>|[<span data-ttu-id="2bc93-164">リソース ガバナーの有効化</span><span class="sxs-lookup"><span data-stu-id="2bc93-164">Enable Resource Governor</span></span>](resource-governor.md)|  
|<span data-ttu-id="2bc93-165">リソース ガバナーを無効にする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-165">Describes how to disable Resource Governor.</span></span>|[<span data-ttu-id="2bc93-166">リソース ガバナーの無効化</span><span class="sxs-lookup"><span data-stu-id="2bc93-166">Disable Resource Governor</span></span>](disable-resource-governor.md)|  
|<span data-ttu-id="2bc93-167">リソース プールを作成、変更、および削除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-167">Describes how to create, alter, and drop a resource pool.</span></span>|[<span data-ttu-id="2bc93-168">リソース ガバナー リソース プール</span><span class="sxs-lookup"><span data-stu-id="2bc93-168">Resource Governor Resource Pool</span></span>](resource-governor-resource-pool.md)|  
|<span data-ttu-id="2bc93-169">ワークロード グループを作成、変更、移動、および削除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-169">Describes how to create, alter, move, and drop a workload group.</span></span>|[<span data-ttu-id="2bc93-170">リソース ガバナー ワークロード グループ</span><span class="sxs-lookup"><span data-stu-id="2bc93-170">Resource Governor Workload Group</span></span>](resource-governor-workload-group.md)|  
|<span data-ttu-id="2bc93-171">ユーザー定義の分類子関数を作成およびテストする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-171">Describes how to create and test a classifier user-defined function.</span></span>|[<span data-ttu-id="2bc93-172">リソース ガバナーの分類子関数</span><span class="sxs-lookup"><span data-stu-id="2bc93-172">Resource Governor Classifier Function</span></span>](resource-governor-classifier-function.md)|  
|<span data-ttu-id="2bc93-173">テンプレートを使用してリソース ガバナーを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-173">Describes how to configure Resource Governor using a template.</span></span>|[<span data-ttu-id="2bc93-174">テンプレートを使用してリソース ガバナーを構成する</span><span class="sxs-lookup"><span data-stu-id="2bc93-174">Configure Resource Governor Using a Template</span></span>](configure-resource-governor-using-a-template.md)|  
|<span data-ttu-id="2bc93-175">リソース ガバナーのプロパティを表示する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2bc93-175">Describes how to view Resource Governor properties.</span></span>|[<span data-ttu-id="2bc93-176">リソース ガバナー プロパティの表示</span><span class="sxs-lookup"><span data-stu-id="2bc93-176">View Resource Governor Properties</span></span>](view-resource-governor-properties.md)|  
  
## <a name="see-also"></a><span data-ttu-id="2bc93-177">参照</span><span class="sxs-lookup"><span data-stu-id="2bc93-177">See Also</span></span>  
 [<span data-ttu-id="2bc93-178">データベース エンジンのインスタンス &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="2bc93-178">Database Engine Instances &#40;SQL Server&#41;</span></span>](../../database-engine/configure-windows/database-engine-instances-sql-server.md)  
  
  
