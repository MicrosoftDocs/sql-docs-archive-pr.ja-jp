---
title: リソース ガバナー リソース プール | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
helpviewer_keywords:
- Resource Governor, resource pool
- resource pool [SQL Server], overview
- resource pool [SQL Server]
ms.assetid: 306b6278-e54f-42e6-b746-95a9315e0cbe
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 574d70f23541888ade1e9b827f52fed801c20205
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87715145"
---
# <a name="resource-governor-resource-pool"></a><span data-ttu-id="e55d0-102">リソース ガバナー リソース プール</span><span class="sxs-lookup"><span data-stu-id="e55d0-102">Resource Governor Resource Pool</span></span>
  <span data-ttu-id="e55d0-103">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] リソース ガバナーのリソース プールは、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]インスタンスの物理リソースのサブセットを表します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-103">In the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource Governor, a resource pool represents a subset of the physical resources of an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="e55d0-104">リソース ガバナーを使用すると、受信するアプリケーション要求がリソース プール内で使用できる CPU、物理 IO、およびメモリの量に制限を指定できます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-104">Resource Governor enables you to specify limits on the amount of CPU, physical IO, and memory that incoming application requests can use within the resource pool.</span></span> <span data-ttu-id="e55d0-105">各リソース プールは、1 つまたは複数のワークロード グループを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-105">Each resource pool can contain one or more workload groups.</span></span> <span data-ttu-id="e55d0-106">セッションの起動時に、リソース ガバナーの分類子によって、セッションは指定されたワークロード グループに割り当てられます。セッションの実行にはワークロード グループに割り当てられたリソースを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-106">When a session is started, the Resource Governor classifier assigns the session to a specific workload group, and the session must run using the resources assigned to the workload group.</span></span>  
  
## <a name="resource-pool-concepts"></a><span data-ttu-id="e55d0-107">リソース プールの概念</span><span class="sxs-lookup"><span data-stu-id="e55d0-107">Resource Pool Concepts</span></span>  
 <span data-ttu-id="e55d0-108">リソース プール (プール) は、サーバーの物理リソースを表します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-108">A resource pool, or pool, represents the physical resources of the server.</span></span> <span data-ttu-id="e55d0-109">プールは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス内部の仮想 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスと考えることができます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-109">You can think of a pool as a virtual [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance inside of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="e55d0-110">プールは 2 つの部分で構成されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-110">A pool has two parts.</span></span> <span data-ttu-id="e55d0-111">1 つは他のプールと重複しない部分であり、最小限のリソース予約をサポートします。</span><span class="sxs-lookup"><span data-stu-id="e55d0-111">One part does not overlap with other pools, which enables minimum resource reservation.</span></span> <span data-ttu-id="e55d0-112">もう 1 つは他のプールと共有される部分であり、最大限のリソース消費をサポートします。</span><span class="sxs-lookup"><span data-stu-id="e55d0-112">The other part is shared with other pools, which supports maximum possible resource consumption.</span></span> <span data-ttu-id="e55d0-113">プール リソースを定義するには、各リソース (CPU、メモリ、および物理 I/O) で次の設定の 1 つ以上を指定します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-113">The pool resources are defined by specifying one or more of the following settings for each resource (CPU, memory, and physical IO):</span></span>  
  
-   <span data-ttu-id="e55d0-114">**MIN_CPU_PERCENT および MAX_CPU_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="e55d0-114">**MIN_CPU_PERCENT and MAX_CPU_PERCENT**</span></span>  
  
     <span data-ttu-id="e55d0-115">これらの設定は、CPU の競合がある場合にリソース プールのすべての要求に最大限および最小限保証される平均 CPU 帯域幅です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-115">These settings are the minimum and maximum guaranteed average CPU bandwidth for all requests in the resource pool when there is CPU contention.</span></span> <span data-ttu-id="e55d0-116">これらの設定を使用すると、各ワークロードのニーズに基づく、複数のワークロードの予測可能な CPU リソース使用率を確立できます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-116">You can use these settings to establish predictable CPU resource usage for multiple workloads that is based on the needs of each workload.</span></span> <span data-ttu-id="e55d0-117">たとえば、会社の営業部門とマーケティング部門で同じデータベースを共有するとします。</span><span class="sxs-lookup"><span data-stu-id="e55d0-117">For example, assume the Sales and Marketing departments in a company share the same database.</span></span> <span data-ttu-id="e55d0-118">営業部門には、優先度の高いクエリで CPU を集中的に使用するワークロードがあります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-118">The Sales department has a CPU-intensive workload with high-priority queries.</span></span> <span data-ttu-id="e55d0-119">マーケティング部門にも CPU を集中的に使用するワークロードがありますが、クエリの優先度は低くなっています。</span><span class="sxs-lookup"><span data-stu-id="e55d0-119">The Marketing department also has a CPU-intensive workload, but has lower-priority queries.</span></span> <span data-ttu-id="e55d0-120">各部門に個別のリソース プールを作成することにより、営業部門のリソース プールに対して CPU の割合の *最小値* 70 を、マーケティング部門のリソース プールに対して CPU の割合の *最大値* 30 を割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-120">By creating a separate resource pool for each department, you can assign a *minimum* CPU percentage of 70 for the Sales resource pool and a *maximum* CPU percentage of 30 for the Marketing resource pool.</span></span> <span data-ttu-id="e55d0-121">これにより、営業部門のワークロードは必要な CPU リソースを受け取り、マーケティング部門のワークロードは営業部門のワークロードの CPU 要求から分離されるようになります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-121">This ensures that the Sales workload receives the CPU resources it requires and the Marketing workload is isolated from the CPU demands of the Sales workload.</span></span> <span data-ttu-id="e55d0-122">CPU の最大使用率が便宜上の最大値であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e55d0-122">Note that the maximum CPU percentage is an opportunistic maximum.</span></span> <span data-ttu-id="e55d0-123">使用可能な CPU 容量がある場合、ワークロードではそれを最大 100% まで使用します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-123">If there is available CPU capacity, the workload uses it up to 100 percent.</span></span> <span data-ttu-id="e55d0-124">最大値が適用されるのは、CPU リソースに競合が発生した場合のみです。</span><span class="sxs-lookup"><span data-stu-id="e55d0-124">The maximum value only applies when there is contention for CPU resources.</span></span> <span data-ttu-id="e55d0-125">この例では、営業部門のワークロードがオフに切り替わると、マーケティング部門のワークロードは必要に応じて 100% の CPU を使用できます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-125">In this example, if the Sales workload is switched off, the Marketing workload can use 100 percent of the CPU if needed.</span></span>  
  
-   <span data-ttu-id="e55d0-126">**CAP_CPU_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="e55d0-126">**CAP_CPU_PERCENT**</span></span>  
  
     <span data-ttu-id="e55d0-127">リソース プールのすべての要求に対する CPU 帯域幅にハード キャップの制限を設定します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-127">This settings is a hard cap limit on the CPU bandwidth for all requests in the resource pool.</span></span> <span data-ttu-id="e55d0-128">プールに関連付けられているワークロードは、使用する CPU 処理量が MAX_CPU_PERCENT の値を超えることはできても (利用可能な場合)、CAP_CPU_PERCENT の値を超えることはできません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-128">Workloads associated with the pool can use CPU capacity above the value of MAX_CPU_PERCENT if it is available, but not above the value of CAP_CPU_PERCENT.</span></span> <span data-ttu-id="e55d0-129">上記の例の場合に、マーケティング部門がリソース使用量に対して課金されているとします。</span><span class="sxs-lookup"><span data-stu-id="e55d0-129">Using the example above, lets assume that the Marketing department is being charged for their resource usage.</span></span> <span data-ttu-id="e55d0-130">マーケティング部門は予測可能な請求情報を求めていますが、CPU のうち最大 30% までしか料金を支払いたくありません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-130">They want predictable billing and do not want to pay for more than 30 percent of the CPU.</span></span> <span data-ttu-id="e55d0-131">これを実現するには、マーケティング部門のリソース プールの CAP_CPU_PERCENT を 30 に設定します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-131">This can be accomplished by setting the CAP_CPU_PERCENT to 30 for the Marketing resource pool.</span></span>  
  
-   <span data-ttu-id="e55d0-132">**MIN_MEMORY_PERCENT および MAX_MEMORY_PERCENT**</span><span class="sxs-lookup"><span data-stu-id="e55d0-132">**MIN_MEMORY_PERCENT and MAX_MEMORY_PERCENT**</span></span>  
  
     <span data-ttu-id="e55d0-133">リソース プール用に確保され、他のリソース プールとは共有できないメモリ量の最大値と最小値を設定します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-133">These settings are the minimum and maximum amount of memory reserved for the resource pool that can not be shared with other resource pools.</span></span> <span data-ttu-id="e55d0-134">ここで参照されるメモリは、クエリ実行許可メモリであり、バッファー プール メモリ (データ ページやインデックス ページなど) ではありません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-134">The memory referenced here is query execution grant memory, not buffer pool memory (for example, data and index pages).</span></span> <span data-ttu-id="e55d0-135">プールの最小メモリ値を設定することは、このリソース プールで実行される可能性のあるすべての要求に対して、指定されたメモリの割合を使用できるようにすることを意味します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-135">Setting a minimum memory value for a pool means that you are ensuring that the percentage of memory specified will be available for any requests that might run in this resource pool.</span></span> <span data-ttu-id="e55d0-136">これは、MIN_CPU_PERCENT と比較して重要な要因です。この場合、指定されたリソース プールでは、このプールに属しているワークロード グループの要求がない場合でも、メモリが残っている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-136">This is an important differentiator compared to MIN_CPU_PERCENT, because in this case memory may remain in the given resource pool even when the pool does not have any requests in the workload groups belonging to this pool.</span></span> <span data-ttu-id="e55d0-137">したがって、この設定を使用する際は十分に注意することが重要です。アクティブな要求がない場合も、このメモリはその他のプールで使用できなくなるためです。</span><span class="sxs-lookup"><span data-stu-id="e55d0-137">Therefore it is crucial that you be very careful when using this setting, because this memory will be unavailable for use by any other pool, even when there are no active requests.</span></span> <span data-ttu-id="e55d0-138">プールの最大メモリ値を設定することは、要求がこのプールで実行されているときに、メモリ全体のうちこの割合を超えるメモリを取得することがないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-138">Setting a maximum memory value for a pool means that when requests are running in this pool, they will never get more than this percentage of overall memory.</span></span>  
  
-   <span data-ttu-id="e55d0-139">**AFFINITY**</span><span class="sxs-lookup"><span data-stu-id="e55d0-139">**AFFINITY**</span></span>  
  
     <span data-ttu-id="e55d0-140">この設定を使用すると、CPU リソースの分離を向上するために、リソース プールを 1 つ以上のスケジューラまたは NUMA ノードに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-140">This setting lets you affinitize a resource pool to one or more schedulers or NUMA nodes for greater isolation of CPU resources.</span></span> <span data-ttu-id="e55d0-141">上記の営業とマーケティングのシナリオを使用して、営業部門がより分離された環境を必要とし、常に 100% の CPU コアを必要としているとします。</span><span class="sxs-lookup"><span data-stu-id="e55d0-141">Using the Sales and Marketing scenario above, lets assume that the Sales department needs a more isolated environment and wants 100 percent of a CPU core at all times.</span></span> <span data-ttu-id="e55d0-142">AFFINITY オプションを使用すると、営業部門とマーケティング部門のワークロードを異なる CPU でスケジュールできます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-142">By using the AFFINITY option the Sales and Marketing workloads can be scheduled on different CPUs.</span></span> <span data-ttu-id="e55d0-143">マーケティング部門のプールの CAP_CPU_PERCENT がまだ設定されていると仮定すると、マーケティング部門のワークロードでは、引き続き 1 個のコアの最大 30% を使用するのに対し、営業部門のワークロードでは、他のコアの 100% を使用します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-143">Assuming the CAP_CPU_PERCENT on the Marketing pool is still in place, the Marketing workload continues to use a maximum of 30 percent of one core, while the Sales workload uses 100 percent of the other core.</span></span> <span data-ttu-id="e55d0-144">営業部門とマーケティング部門のワークロードに関しては、2 つの分離されたコンピューターで実行されています。</span><span class="sxs-lookup"><span data-stu-id="e55d0-144">As far as the Sales and Marketing workloads are concerned, they are running on two isolated machines.</span></span>  
  
-   <span data-ttu-id="e55d0-145">**MIN_IOPS_PER_VOLUME および MAX_IOPS_PER_VOLUME**</span><span class="sxs-lookup"><span data-stu-id="e55d0-145">**MIN_IOPS_PER_VOLUME and MAX_IOPS_PER_VOLUME**</span></span>  
  
     <span data-ttu-id="e55d0-146">リソース プールのディスク ボリュームごとに、1 秒あたりの物理 IO 操作 (IOPS) の最小値と最大値を設定します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-146">These settings are the minimum and maximum physical IO operations per second (IOPS) per disk volume for a resource pool.</span></span> <span data-ttu-id="e55d0-147">これらの設定を使用すると、特定のリソース プールのユーザー スレッドに対して発行された物理 IO を制御できます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-147">You can use these settings to control the physical IOs issued for user threads for a given resource pool.</span></span> <span data-ttu-id="e55d0-148">たとえば、営業部門では、大きなバッチで月末の報告書をいくつか生成します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-148">For example, the Sales department generates several end-of-month reports in large batches.</span></span> <span data-ttu-id="e55d0-149">これらのバッチ内のクエリでは、ディスク ボリュームが飽和し、データベース内のその他の優先度の高いワークロードのパフォーマンスに影響を与える可能性のある IO が生成される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-149">The queries in these batches can generate IOs that can saturate the disk volume and impact the performance of other higher priority workloads in the database.</span></span> <span data-ttu-id="e55d0-150">このワークロードを分離するために、営業部門のリソース プールでは MIN_IOPS_PER_VOLUME が 20 に設定され、MAX_IOPS_PER_VOLUME が 100 に設定されます。これにより、ワークロードに対して発行できる IO のレベルが制御されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-150">To isolate this workload, the MIN_IOPS_PER_VOLUME is set to 20 and the MAX_IOPS_PER_VOLUME is set to 100 for the Sales department resource pool, which controls the level of IOs that can issued for the workload.</span></span>  
  
 <span data-ttu-id="e55d0-151">CPU またはメモリを構成する際には、すべてのプールの最小値の合計が、サーバー リソースの 100% を超えないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-151">When configuring CPU or Memory, the sum of MIN values across all pools cannot exceed 100 percent of the server resources.</span></span> <span data-ttu-id="e55d0-152">また、CPU またはメモリを構成する場合、最大値と上限値は、最小値～ 100% (両方を含む) の間で設定できます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-152">In addition, when configuring CPU or Memory, MAX and CAP values can be set anywhere in the range between MIN and 100 percent inclusive.</span></span>  
  
 <span data-ttu-id="e55d0-153">プールに 0 以外の最小値が定義されている場合は、他のプールの有効な最大値が再調整されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-153">If a pool has a nonzero MIN defined, the effective MAX value of other pools is readjusted.</span></span> <span data-ttu-id="e55d0-154">プールに設定されている最大値または他のプールの最小値の合計のいずれか大きい方が、100% から引かれます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-154">The minimum of the configured MAX value of a pool and the sum of the MIN values of other pools is subtracted from 100 percent.</span></span>  
  
 <span data-ttu-id="e55d0-155">次の表は、前述の概念をいくつか説明しています。</span><span class="sxs-lookup"><span data-stu-id="e55d0-155">The following table illustrates a few of the preceding concepts.</span></span> <span data-ttu-id="e55d0-156">表に示されているのは、内部プール、既定のプール、および 2 つのユーザー定義プールの設定です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-156">The table shows the settings for the internal pool, the default pool, and two user-defined pools.</span></span> <span data-ttu-id="e55d0-157">有効な最大 % および共有 % の計算には、次の式が使用されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-157">The following formulas are used for calculating the effective MAX% and the shared %.</span></span>  
  
-   <span data-ttu-id="e55d0-158">min(X,Y) は、X と Y の小さい方の値を意味します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-158">Min(X,Y) means the smaller value of X and Y.</span></span>  
  
-   <span data-ttu-id="e55d0-159">sum(X) はすべてのプールの X 値の合計を意味します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-159">Sum(X) means the sum of value X across all pools.</span></span>  
  
-   <span data-ttu-id="e55d0-160">共有 % の合計 = 100 - sum(最小 %)。</span><span class="sxs-lookup"><span data-stu-id="e55d0-160">Total shared % = 100 - sum(MIN %).</span></span>  
  
-   <span data-ttu-id="e55d0-161">有効な最大 % = min(X,Y)。</span><span class="sxs-lookup"><span data-stu-id="e55d0-161">Effective MAX % = min(X,Y).</span></span>  
  
-   <span data-ttu-id="e55d0-162">共有 % = 有効な最大 % - 最小 %。</span><span class="sxs-lookup"><span data-stu-id="e55d0-162">Shared % = Effective MAX % - MIN %.</span></span>  
  
|<span data-ttu-id="e55d0-163">プール名</span><span class="sxs-lookup"><span data-stu-id="e55d0-163">Pool name</span></span>|<span data-ttu-id="e55d0-164">最小 % の設定</span><span class="sxs-lookup"><span data-stu-id="e55d0-164">MIN % setting</span></span>|<span data-ttu-id="e55d0-165">最大 % の設定</span><span class="sxs-lookup"><span data-stu-id="e55d0-165">MAX % setting</span></span>|<span data-ttu-id="e55d0-166">有効な最大 % の計算値</span><span class="sxs-lookup"><span data-stu-id="e55d0-166">Calculated effective MAX %</span></span>|<span data-ttu-id="e55d0-167">共有 % の計算値</span><span class="sxs-lookup"><span data-stu-id="e55d0-167">Calculated shared %</span></span>|<span data-ttu-id="e55d0-168">解説</span><span class="sxs-lookup"><span data-stu-id="e55d0-168">Comment</span></span>|  
|---------------|-------------------|-------------------|--------------------------------|-------------------------|-------------|  
|<span data-ttu-id="e55d0-169">内部</span><span class="sxs-lookup"><span data-stu-id="e55d0-169">internal</span></span>|<span data-ttu-id="e55d0-170">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-170">0</span></span>|<span data-ttu-id="e55d0-171">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-171">100</span></span>|<span data-ttu-id="e55d0-172">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-172">100</span></span>|<span data-ttu-id="e55d0-173">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-173">0</span></span>|<span data-ttu-id="e55d0-174">内部プールには有効な最大 % と共有 % が適用されません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-174">Effective MAX% and shared% are not applicable to the internal pool.</span></span>|  
|<span data-ttu-id="e55d0-175">default</span><span class="sxs-lookup"><span data-stu-id="e55d0-175">default</span></span>|<span data-ttu-id="e55d0-176">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-176">0</span></span>|<span data-ttu-id="e55d0-177">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-177">100</span></span>|<span data-ttu-id="e55d0-178">30</span><span class="sxs-lookup"><span data-stu-id="e55d0-178">30</span></span>|<span data-ttu-id="e55d0-179">30</span><span class="sxs-lookup"><span data-stu-id="e55d0-179">30</span></span>|<span data-ttu-id="e55d0-180">有効な最大値の計算式は、min(100,100-(20+50)) = 30 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-180">The effective MAX value is calculated as: min(100,100-(20+50)) = 30.</span></span> <span data-ttu-id="e55d0-181">共有 % の計算式は、有効な最大値 - 最小値 = 30 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-181">The calculated shared % is effective MAX - MIN = 30.</span></span>|  
|<span data-ttu-id="e55d0-182">プール 1</span><span class="sxs-lookup"><span data-stu-id="e55d0-182">Pool 1</span></span>|<span data-ttu-id="e55d0-183">20</span><span class="sxs-lookup"><span data-stu-id="e55d0-183">20</span></span>|<span data-ttu-id="e55d0-184">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-184">100</span></span>|<span data-ttu-id="e55d0-185">50</span><span class="sxs-lookup"><span data-stu-id="e55d0-185">50</span></span>|<span data-ttu-id="e55d0-186">30</span><span class="sxs-lookup"><span data-stu-id="e55d0-186">30</span></span>|<span data-ttu-id="e55d0-187">有効な最大値の計算式は、min(100,100-50) = 50 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-187">The effective MAX value is calculated as: min(100,100-50) = 50.</span></span> <span data-ttu-id="e55d0-188">共有 % の計算式は、有効な最大値 - 最小値 = 30 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-188">The calculated Shared % is Effective MAX - MIN = 30.</span></span>|  
|<span data-ttu-id="e55d0-189">プール 2</span><span class="sxs-lookup"><span data-stu-id="e55d0-189">Pool 2</span></span>|<span data-ttu-id="e55d0-190">50</span><span class="sxs-lookup"><span data-stu-id="e55d0-190">50</span></span>|<span data-ttu-id="e55d0-191">70</span><span class="sxs-lookup"><span data-stu-id="e55d0-191">70</span></span>|<span data-ttu-id="e55d0-192">70</span><span class="sxs-lookup"><span data-stu-id="e55d0-192">70</span></span>|<span data-ttu-id="e55d0-193">20</span><span class="sxs-lookup"><span data-stu-id="e55d0-193">20</span></span>|<span data-ttu-id="e55d0-194">有効な最大値の計算式は、min(70,100-20) = 70 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-194">The effective MAX value is calculated as: min(70,100-20) = 70.</span></span> <span data-ttu-id="e55d0-195">共有 % の計算式は、有効な最大値 - 最小値 = 20 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-195">The calculated Shared % is Effective MAX - MIN = 20.</span></span>|  
  
 <span data-ttu-id="e55d0-196">前のテーブルを例として、別のプールが作成されたときに行われる調整について説明します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-196">Using the preceding table as an example we can further illustrate the adjustments that take place when another pool is created.</span></span> <span data-ttu-id="e55d0-197">作成するのはプール 3 で、その最小 % の設定は 5 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-197">This pool is Pool 3 and has a MIN % setting of 5.</span></span>  
  
|<span data-ttu-id="e55d0-198">プール名</span><span class="sxs-lookup"><span data-stu-id="e55d0-198">Pool name</span></span>|<span data-ttu-id="e55d0-199">最小 % の設定</span><span class="sxs-lookup"><span data-stu-id="e55d0-199">MIN % setting</span></span>|<span data-ttu-id="e55d0-200">最大 % の設定</span><span class="sxs-lookup"><span data-stu-id="e55d0-200">MAX % setting</span></span>|<span data-ttu-id="e55d0-201">有効な最大 % の計算値</span><span class="sxs-lookup"><span data-stu-id="e55d0-201">Calculated effective MAX %</span></span>|<span data-ttu-id="e55d0-202">共有 % の計算値</span><span class="sxs-lookup"><span data-stu-id="e55d0-202">Calculated shared %</span></span>|<span data-ttu-id="e55d0-203">解説</span><span class="sxs-lookup"><span data-stu-id="e55d0-203">Comment</span></span>|  
|---------------|-------------------|-------------------|--------------------------------|-------------------------|-------------|  
|<span data-ttu-id="e55d0-204">内部</span><span class="sxs-lookup"><span data-stu-id="e55d0-204">internal</span></span>|<span data-ttu-id="e55d0-205">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-205">0</span></span>|<span data-ttu-id="e55d0-206">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-206">100</span></span>|<span data-ttu-id="e55d0-207">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-207">100</span></span>|<span data-ttu-id="e55d0-208">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-208">0</span></span>|<span data-ttu-id="e55d0-209">内部プールには有効な最大 % と共有 % が適用されません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-209">Effective MAX % and shared % are not applicable to the internal pool.</span></span>|  
|<span data-ttu-id="e55d0-210">default</span><span class="sxs-lookup"><span data-stu-id="e55d0-210">default</span></span>|<span data-ttu-id="e55d0-211">0</span><span class="sxs-lookup"><span data-stu-id="e55d0-211">0</span></span>|<span data-ttu-id="e55d0-212">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-212">100</span></span>|<span data-ttu-id="e55d0-213">25</span><span class="sxs-lookup"><span data-stu-id="e55d0-213">25</span></span>|<span data-ttu-id="e55d0-214">25</span><span class="sxs-lookup"><span data-stu-id="e55d0-214">25</span></span>|<span data-ttu-id="e55d0-215">有効な最大値の計算式は、min(100,100-(20+50+5)) = 25 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-215">The effective MAX value is calculated as: min(100,100-(20+50+5)) = 25.</span></span> <span data-ttu-id="e55d0-216">共有 % の計算式は、有効な最大値 - 最小値 = 25 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-216">The calculated shared % is Effective MAX - MIN = 25.</span></span>|  
|<span data-ttu-id="e55d0-217">プール 1</span><span class="sxs-lookup"><span data-stu-id="e55d0-217">Pool 1</span></span>|<span data-ttu-id="e55d0-218">20</span><span class="sxs-lookup"><span data-stu-id="e55d0-218">20</span></span>|<span data-ttu-id="e55d0-219">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-219">100</span></span>|<span data-ttu-id="e55d0-220">45</span><span class="sxs-lookup"><span data-stu-id="e55d0-220">45</span></span>|<span data-ttu-id="e55d0-221">25</span><span class="sxs-lookup"><span data-stu-id="e55d0-221">25</span></span>|<span data-ttu-id="e55d0-222">有効な最大値の計算式は、min(100,100-55) = 45 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-222">The effective MAX value is calculated as: min(100,100-55) = 45.</span></span> <span data-ttu-id="e55d0-223">共有 % の計算式は、有効な最大値 - 最小値 = 25 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-223">The calculated Shared % is Effective MAX - MIN = 25.</span></span>|  
|<span data-ttu-id="e55d0-224">プール 2</span><span class="sxs-lookup"><span data-stu-id="e55d0-224">Pool 2</span></span>|<span data-ttu-id="e55d0-225">50</span><span class="sxs-lookup"><span data-stu-id="e55d0-225">50</span></span>|<span data-ttu-id="e55d0-226">70</span><span class="sxs-lookup"><span data-stu-id="e55d0-226">70</span></span>|<span data-ttu-id="e55d0-227">70</span><span class="sxs-lookup"><span data-stu-id="e55d0-227">70</span></span>|<span data-ttu-id="e55d0-228">20</span><span class="sxs-lookup"><span data-stu-id="e55d0-228">20</span></span>|<span data-ttu-id="e55d0-229">有効な最大値の計算式は、min(70,100-25) = 70 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-229">The effective MAX value is calculated as: min(70,100-25) = 70.</span></span> <span data-ttu-id="e55d0-230">共有 % の計算式は、有効な最大値 - 最小値 = 20 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-230">The calculated Shared % is effective MAX - MIN = 20.</span></span>|  
|<span data-ttu-id="e55d0-231">プール 3</span><span class="sxs-lookup"><span data-stu-id="e55d0-231">Pool 3</span></span>|<span data-ttu-id="e55d0-232">5</span><span class="sxs-lookup"><span data-stu-id="e55d0-232">5</span></span>|<span data-ttu-id="e55d0-233">100</span><span class="sxs-lookup"><span data-stu-id="e55d0-233">100</span></span>|<span data-ttu-id="e55d0-234">30</span><span class="sxs-lookup"><span data-stu-id="e55d0-234">30</span></span>|<span data-ttu-id="e55d0-235">25</span><span class="sxs-lookup"><span data-stu-id="e55d0-235">25</span></span>|<span data-ttu-id="e55d0-236">有効な最大値の計算式は、min(100,100-70) = 30 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-236">The effective MAX value is calculated as: min(100,100-70) = 30.</span></span> <span data-ttu-id="e55d0-237">共有 % の計算式は、有効な最大値 - 最小値 = 25 です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-237">The calculated Shared % is effective MAX - MIN = 25.</span></span>|  
  
 <span data-ttu-id="e55d0-238">プールの共有部分は、使用可能なリソースの行き先を示すために使用されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-238">The shared part of the pool is used to indicate where available resources can go if resources are available.</span></span> <span data-ttu-id="e55d0-239">ただし、リソースが消費されると、共有部分は指定のプールに移動し、共有されません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-239">However, when resources are consumed they go to the specified pool and are not shared.</span></span> <span data-ttu-id="e55d0-240">これにより、指定のプールに要求がなく、かつそのプールに対して構成されたリソースを他のプールのために解放できる場合は、リソース使用率が向上する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-240">This may improve resource utilization in cases where there are no requests in a given pool and the resources configured to the pool can be freed up for other pools.</span></span>  
  
 <span data-ttu-id="e55d0-241">プール構成の極端なケースを次に示します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-241">Some extreme cases of pool configuration are:</span></span>  
  
-   <span data-ttu-id="e55d0-242">すべてのプールで最小値が定義され、その合計がサーバー リソースの 100% を表しているケース。</span><span class="sxs-lookup"><span data-stu-id="e55d0-242">All pools define minimums that in total represent 100 percent of the server resources.</span></span> <span data-ttu-id="e55d0-243">この場合、有効な最大値は最小値と等しくなります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-243">In this case the effective maximums are equal to minimums.</span></span> <span data-ttu-id="e55d0-244">このとき、いずれかのプール内でサーバー リソースが消費されているかどうかにかかわらず、リソースを重複しない断片に分割した場合と同等の状態になります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-244">This is equivalent to dividing the server resources into non-overlapping pieces regardless of resources are consumed inside any given pool.</span></span>  
  
-   <span data-ttu-id="e55d0-245">すべてのプールの最小値がゼロであるケース。</span><span class="sxs-lookup"><span data-stu-id="e55d0-245">All pools have zero minimums.</span></span> <span data-ttu-id="e55d0-246">すべてのプールが使用可能なリソースの確保を求めて競合し、それぞれの最終的なサイズが各プールのリソース消費に基づいて決まります。</span><span class="sxs-lookup"><span data-stu-id="e55d0-246">All the pools compete for available resources and their final sizes are based on resource consumption in each pool.</span></span> <span data-ttu-id="e55d0-247">ポリシーなどその他の要因も、最終的なプール サイズの決定に影響します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-247">Other factors such as policies play a role in shaping the final pool size.</span></span>  
  
 <span data-ttu-id="e55d0-248">リソース ガバナーでは、内部プールと既定のプールの 2 つのリソース プールが事前に定義されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-248">Resource Governor predefines two resource pools, the internal pool and the default pool.</span></span>  
  
 <span data-ttu-id="e55d0-249">**内部プール**</span><span class="sxs-lookup"><span data-stu-id="e55d0-249">**Internal Pool**</span></span>  
  
 <span data-ttu-id="e55d0-250">内部プールは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 自体が消費するリソースを表します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-250">The internal pool represents the resources consumed by the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] itself.</span></span> <span data-ttu-id="e55d0-251">このプールは、常に内部グループのみを含んでおり、一切変更できません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-251">This pool always contains only the internal group, and the pool is not alterable in any way.</span></span> <span data-ttu-id="e55d0-252">内部プールによるリソースの消費は制限されません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-252">Resource consumption by the internal pool is not restricted.</span></span> <span data-ttu-id="e55d0-253">このプール内のワークロードはサーバーの機能に不可欠と見なされ、内部プールが他のプールを圧迫して他のプールに設定されている制限に違反することになっても、リソース ガバナーはこれを許可します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-253">Any workloads in the pool are considered critical for server function, and Resource Governor allows the internal pool to pressure other pools even if it means the violation of limits set for the other pools.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e55d0-254">内部プールおよび内部グループのリソース使用量は、全体的なリソース使用量から差し引かれません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-254">The internal pool and internal group resource usage is not subtracted from the overall resource usage.</span></span> <span data-ttu-id="e55d0-255">パーセンテージは、使用可能なリソース全体から計算されます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-255">Percentages are calculated from the overall resources available.</span></span>  
  
 <span data-ttu-id="e55d0-256">**既定のプール**</span><span class="sxs-lookup"><span data-stu-id="e55d0-256">**Default Pool**</span></span>  
  
 <span data-ttu-id="e55d0-257">既定のプールは、事前に定義される最初のユーザー プールです。</span><span class="sxs-lookup"><span data-stu-id="e55d0-257">The default pool is the first predefined user pool.</span></span> <span data-ttu-id="e55d0-258">構成が行われる前の既定のプールには、既定のグループのみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="e55d0-258">Prior to any configuration the default pool only contains the default group.</span></span> <span data-ttu-id="e55d0-259">既定のプールは作成または削除できませんが、変更することは可能です。</span><span class="sxs-lookup"><span data-stu-id="e55d0-259">The default pool cannot be created or dropped but it can be altered.</span></span> <span data-ttu-id="e55d0-260">既定のプールには、既定のグループ以外にユーザー定義グループを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="e55d0-260">The default pool can contain user-defined groups in addition to the default group.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e55d0-261">既定のグループは変更できますが、既定のプールから移動することはできません。</span><span class="sxs-lookup"><span data-stu-id="e55d0-261">The default group is alterable but it cannot be moved out of the default pool.</span></span>  
  
 <span data-ttu-id="e55d0-262">**ユーザー定義のリソース プール**</span><span class="sxs-lookup"><span data-stu-id="e55d0-262">**User-Defined Resource Pools**</span></span>  
  
 <span data-ttu-id="e55d0-263">ユーザー定義のリソース プールは、環境内の特定のワークロードに対して作成するリソース プールです。</span><span class="sxs-lookup"><span data-stu-id="e55d0-263">User-defined resource pools are those that you create for specific workloads in your environment.</span></span> <span data-ttu-id="e55d0-264">リソース ガバナーには、リソース プールを作成、変更、および削除するための DDL ステートメントが用意されています。</span><span class="sxs-lookup"><span data-stu-id="e55d0-264">Resource Governor provides DDL statements for creating, changing, and dropping resource pools.</span></span>  
  
## <a name="resource-pool-tasks"></a><span data-ttu-id="e55d0-265">リソース プール タスク</span><span class="sxs-lookup"><span data-stu-id="e55d0-265">Resource Pool Tasks</span></span>  
  
|<span data-ttu-id="e55d0-266">タスクの説明</span><span class="sxs-lookup"><span data-stu-id="e55d0-266">Task Description</span></span>|<span data-ttu-id="e55d0-267">トピック</span><span class="sxs-lookup"><span data-stu-id="e55d0-267">Topic</span></span>|  
|----------------------|-----------|  
|<span data-ttu-id="e55d0-268">リソース プールを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-268">Describes how to create a resource pool.</span></span>|[<span data-ttu-id="e55d0-269">リソース プールの作成</span><span class="sxs-lookup"><span data-stu-id="e55d0-269">Create a Resource Pool</span></span>](create-a-resource-pool.md)|  
|<span data-ttu-id="e55d0-270">リソース プールの設定を変更する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-270">Describes how to change resource pool settings.</span></span>|[<span data-ttu-id="e55d0-271">リソース プールの設定の変更</span><span class="sxs-lookup"><span data-stu-id="e55d0-271">Change Resource Pool Settings</span></span>](change-resource-pool-settings.md)|  
|<span data-ttu-id="e55d0-272">リソース プールを削除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e55d0-272">Describes how to delete a resource pool.</span></span>|[<span data-ttu-id="e55d0-273">リソース プールの削除</span><span class="sxs-lookup"><span data-stu-id="e55d0-273">Delete a Resource Pool</span></span>](delete-a-resource-pool.md)|  
  
## <a name="see-also"></a><span data-ttu-id="e55d0-274">参照</span><span class="sxs-lookup"><span data-stu-id="e55d0-274">See Also</span></span>  
 <span data-ttu-id="e55d0-275">[リソース ガバナー](resource-governor.md) </span><span class="sxs-lookup"><span data-stu-id="e55d0-275">[Resource Governor](resource-governor.md) </span></span>  
 <span data-ttu-id="e55d0-276">[リソース ガバナー ワークロード グループ](resource-governor-workload-group.md) </span><span class="sxs-lookup"><span data-stu-id="e55d0-276">[Resource Governor Workload Group](resource-governor-workload-group.md) </span></span>  
 <span data-ttu-id="e55d0-277">[リソース ガバナーの分類子関数](resource-governor-classifier-function.md) </span><span class="sxs-lookup"><span data-stu-id="e55d0-277">[Resource Governor Classifier Function](resource-governor-classifier-function.md) </span></span>  
 <span data-ttu-id="e55d0-278">[テンプレートを使用してリソース ガバナーを構成する](configure-resource-governor-using-a-template.md) </span><span class="sxs-lookup"><span data-stu-id="e55d0-278">[Configure Resource Governor Using a Template](configure-resource-governor-using-a-template.md) </span></span>  
 [<span data-ttu-id="e55d0-279">リソース ガバナー プロパティの表示</span><span class="sxs-lookup"><span data-stu-id="e55d0-279">View Resource Governor Properties</span></span>](view-resource-governor-properties.md)  
  
  
