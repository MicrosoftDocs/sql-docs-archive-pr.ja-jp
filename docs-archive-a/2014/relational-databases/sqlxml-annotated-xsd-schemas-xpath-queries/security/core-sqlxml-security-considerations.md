---
title: SQLXML のセキュリティに関する重要な考慮事項 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: xml
ms.topic: reference
helpviewer_keywords:
- security [SQLXML], about security
ms.assetid: 330cd2ff-d5d5-4c8e-8f93-0869c977be94
author: rothja
ms.author: jroth
ms.openlocfilehash: eceaa28ff4d1a7b998a51b07df3b1076cf524e81
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87646131"
---
# <a name="core-sqlxml-security-considerations"></a><span data-ttu-id="944a5-102">SQLXML のセキュリティに関する主な注意点</span><span class="sxs-lookup"><span data-stu-id="944a5-102">Core SQLXML Security Considerations</span></span>
  <span data-ttu-id="944a5-103">次に、データ アクセスに SQLXML を使用するときのセキュリティ ガイドラインを示します。</span><span class="sxs-lookup"><span data-stu-id="944a5-103">The following are security guidelines for using SQLXML for data access.</span></span>  
  
-   <span data-ttu-id="944a5-104">SQLXMLOLEDB プロバイダーでは、`StreamFlags` プロパティへのアクセスが提供されます。このプロパティでは、特定の各インスタンスに対して有効または無効にする SQLXML 機能を示すフラグを設定できます。</span><span class="sxs-lookup"><span data-stu-id="944a5-104">The SQLXMLOLEDB provider exposes a `StreamFlags` property which allows you to set flags indicating what SQLXML functionality should be enabled or disabled for each specific instance.</span></span> <span data-ttu-id="944a5-105">このプロパティを使用して、必要なコンポーネントだけが有効になるよう、SQLXML の使用をカスタマイズすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="944a5-105">You can use this property to customize your use of SQLXML and to make sure that only the components you want are enabled.</span></span> <span data-ttu-id="944a5-106">詳細については、「 [SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="944a5-106">For more information, see [SQLXMLOLEDB Provider &#40;SQLXML 4.0&#41;](../../../database-engine/dev-guide/sqlxmloledb-provider-sqlxml-4-0.md).</span></span>  
  
-   <span data-ttu-id="944a5-107">SQLXML エラーが発生した場合、返されるメッセージには、テーブル名、列名、種類の情報など、データベース スキーマに関する情報を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="944a5-107">When SQLXML errors occur and are returned, they can include information about the database schema such as table names, column names or type information.</span></span> <span data-ttu-id="944a5-108">これらのエラーを扱うときには、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインストールに関する情報が関係のないユーザーに伝わらないよう注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-108">You should use care when handling these errors so that information about your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation is not easily discoverable by users where it is not intended or needed.</span></span>  
  
-   <span data-ttu-id="944a5-109">SQLXML では、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] にクエリを実行したり更新を送信するにあたって、交換できるデータ量に制限は設定されません。また、処理前に SQLXML ペイロード内のデータのサイズに関してチェックは行われません。</span><span class="sxs-lookup"><span data-stu-id="944a5-109">When used to either query or send updates to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SQLXML sets no limit on the amount of data that can be exchanged and does not do any checking on the size of data in a SQLXML payload before attempting to process it.</span></span> <span data-ttu-id="944a5-110">SQLXML を使用してアプリケーションを開発する場合は、自身の責任で、システムにデータを処理する十分なメモリがあることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="944a5-110">When you develop your application using SQLXML, it is your responsibility to ensure there is enough memory on the system to process the data.</span></span> <span data-ttu-id="944a5-111">たとえば、サーバーに対してデータのクエリを実行するときには、クライアント側に、データを受信するだけの十分なメモリの空きがあることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-111">For example, when querying data from the server, you should verify there is enough room in memory on the client to receive it.</span></span> <span data-ttu-id="944a5-112">同様に、データをサーバーに読み込むときには、サーバー側に、データ処理に使用できるメモリと、データ保存に使用できるディスク保存領域が十分にあることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-112">Likewise, if you are loading data to the server, you need to verify there is enough available memory on the server to process it and enough available disk storage space on the server to store the data.</span></span>  
  
-   <span data-ttu-id="944a5-113">SQLXML では、動的に [!INCLUDE[tsql](../../../includes/tsql-md.md)] クエリと更新コマンドが生成され、実行のため [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] に送信されます。</span><span class="sxs-lookup"><span data-stu-id="944a5-113">SQLXML dynamically generates [!INCLUDE[tsql](../../../includes/tsql-md.md)] queries and update commands and sends them to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] for execution.</span></span> <span data-ttu-id="944a5-114">これは、SQLXML がサーバーにクエリを実行して更新を適用する唯一の方法です。</span><span class="sxs-lookup"><span data-stu-id="944a5-114">This is the only way in which SQLXML queries and updates the server.</span></span> <span data-ttu-id="944a5-115">結果は、(XML の) ストリームまたは行セットとして受信されます。</span><span class="sxs-lookup"><span data-stu-id="944a5-115">Results will be received either as a stream (of XML) or as a rowset.</span></span>  
  
-   <span data-ttu-id="944a5-116">SQLXML では、クエリ結果を受信しても、そのデータの内容に基づいて何らかの動作が行われるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="944a5-116">When receiving query results, SQLXML takes no actions based on the content of the data that it receives.</span></span> <span data-ttu-id="944a5-117">データの種類や内容に基づいて追加処理は行われず、</span><span class="sxs-lookup"><span data-stu-id="944a5-117">No additional processing is done based on the type or contents of the data.</span></span> <span data-ttu-id="944a5-118">操作を実行するためのコードとしてデータが使用されることはありません。</span><span class="sxs-lookup"><span data-stu-id="944a5-118">The data is never treated as code with which to execute actions.</span></span>  
  
-   <span data-ttu-id="944a5-119">XML テンプレートを実行すると、SQLXML では送信されたテンプレート内に含まれる XPath クエリと DBObject クエリが [!INCLUDE[tsql](../../../includes/tsql-md.md)] コマンドに変換され、そのコマンドが [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] に対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="944a5-119">When executing XML Templates, SQLXML translates the XPath and DBObject queries contained within the submitted template into [!INCLUDE[tsql](../../../includes/tsql-md.md)] commands that are then executed against [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="944a5-120">これらのコマンドは、既存のデータにのみ影響します。</span><span class="sxs-lookup"><span data-stu-id="944a5-120">These commands only ever affect existing data.</span></span> <span data-ttu-id="944a5-121">SQLXML により生成されるコマンドでは、データベースの構造は変更されません。</span><span class="sxs-lookup"><span data-stu-id="944a5-121">Commands generated by SQLXML will never alter the structure of the database.</span></span> <span data-ttu-id="944a5-122">データベースの構造を変更するには、ユーザーは明示的なコマンドを発行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-122">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="944a5-123">たとえば、テンプレートの `sql:query` ブロックにコマンドを含めます。</span><span class="sxs-lookup"><span data-stu-id="944a5-123">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="944a5-124">DBObject クエリと XPath ステートメントをマッピング ファイルに対して実行しても、SQLXML でデータベース内のデータは一切変更されません。</span><span class="sxs-lookup"><span data-stu-id="944a5-124">When executing DBObject queries and XPath statements over mapping files, SQLXML will not alter the data in the database in any way.</span></span>  
  
-   <span data-ttu-id="944a5-125">SQLXML では、XML と [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] データ モデルの違いに基づき、指定されたデータの形式が変更される場合があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-125">SQLXML may make formatting changes to the given data based on differences between the XML and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] data models.</span></span> <span data-ttu-id="944a5-126">たとえば、時間を指定する形式はこれら 2 つで異なるため、</span><span class="sxs-lookup"><span data-stu-id="944a5-126">For example, the format for specifying a time is different.</span></span> <span data-ttu-id="944a5-127">SQLXML ではこの違いの解決が試みられます。</span><span class="sxs-lookup"><span data-stu-id="944a5-127">SQLXML will attempt to resolve these differences.</span></span> <span data-ttu-id="944a5-128">この結果、一部の精度情報が失われる場合があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-128">As a result, some precision information may be lost.</span></span>  
  
-   <span data-ttu-id="944a5-129">SQLXML では、データ処理は時間の制限なく、</span><span class="sxs-lookup"><span data-stu-id="944a5-129">SQLXML sets no limit on the amount of time it takes to process the data.</span></span> <span data-ttu-id="944a5-130">エラーが発生するか処理が完了するまで続けられます。</span><span class="sxs-lookup"><span data-stu-id="944a5-130">Processing will continue until an error occurs or processing is complete.</span></span>  
  
-   <span data-ttu-id="944a5-131">SQLXML ではファイル システムへの書き込みは行われません。</span><span class="sxs-lookup"><span data-stu-id="944a5-131">SQLXML does not write to the file system.</span></span> <span data-ttu-id="944a5-132">データベースから取得したデータを保存するには、ユーザーが自分でコードを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-132">If users wish to save the data they retrieve from the database, they must do this in their code.</span></span>  
  
-   <span data-ttu-id="944a5-133">SQLXML では、ユーザーはデータベースに対して任意の SQL クエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="944a5-133">SQLXML allows users to execute any SQL query they like against the database.</span></span> <span data-ttu-id="944a5-134">この場合、ユーザーの設定なしで SQL データベースを公開することになるため、保護または制御されていないソースに対してこの機能は提供しないでください。</span><span class="sxs-lookup"><span data-stu-id="944a5-134">This functionality should never be exposed to an unsecure or uncontrolled source, as this is essentially opening up the SQL database without provision to any users.</span></span>  
  
-   <span data-ttu-id="944a5-135">アップデートグラムを実行すると、SQLXML では `updg:sync` ブロックが [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスに対する DELETE、UPDATE、および INSERT コマンドに変換されます。</span><span class="sxs-lookup"><span data-stu-id="944a5-135">When executing Updategrams, SQLXML translates the `updg:sync` blocks into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="944a5-136">これらのコマンドは、既存のデータにのみ影響します。</span><span class="sxs-lookup"><span data-stu-id="944a5-136">These commands only ever affect existing data.</span></span> <span data-ttu-id="944a5-137">SQLXML により生成されるコマンドでは、データベースは変更されません。</span><span class="sxs-lookup"><span data-stu-id="944a5-137">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="944a5-138">データベースの構造を変更するには、ユーザーは明示的なコマンドを発行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-138">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="944a5-139">たとえば、テンプレートの `sql:query` ブロックにコマンドを含めます。</span><span class="sxs-lookup"><span data-stu-id="944a5-139">For example, by including them in a `sql:query` block of a template.</span></span>  
  
-   <span data-ttu-id="944a5-140">DiffGrams を実行すると、SQLXML では DiffGram が [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスに対する DELETE、UPDATE、および INSERT コマンドに変換されます。</span><span class="sxs-lookup"><span data-stu-id="944a5-140">When executing DiffGrams, SQLXML translates the DiffGram into DELETE, UPDATE, and INSERT commands against the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="944a5-141">これらのコマンドは、既存のデータにのみ影響します。</span><span class="sxs-lookup"><span data-stu-id="944a5-141">These commands only ever affect existing data.</span></span> <span data-ttu-id="944a5-142">SQLXML により生成されるコマンドでは、データベースは変更されません。</span><span class="sxs-lookup"><span data-stu-id="944a5-142">Commands generated by SQLXML will never alter the database.</span></span> <span data-ttu-id="944a5-143">データベースの構造を変更するには、ユーザーは明示的なコマンドを発行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="944a5-143">Users must issue explicit commands to alter the database structure.</span></span> <span data-ttu-id="944a5-144">たとえば、テンプレートの `sql:query` ブロックにコマンドを含めます。</span><span class="sxs-lookup"><span data-stu-id="944a5-144">For example, by including them in a `sql:query` block of a template.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="944a5-145">参照</span><span class="sxs-lookup"><span data-stu-id="944a5-145">See Also</span></span>  
 [<span data-ttu-id="944a5-146">SQLXML 4.0 のセキュリティに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="944a5-146">SQLXML 4.0 Security Considerations</span></span>](sqlxml-4-0-security-considerations.md)  
  
  
