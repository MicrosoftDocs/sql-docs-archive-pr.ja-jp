---
title: オンライン インデックス操作のガイドライン | Microsoft Docs
ms.custom: ''
ms.date: 11/11/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- clustered indexes, online operations
- online index operations
- indexes [SQL Server], online operations
- disk space [SQL Server], indexes
- nonclustered indexes [SQL Server], online operations
- transaction logs [SQL Server], indexes
ms.assetid: d82942e0-4a86-4b34-a65f-9f143ebe85ce
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 907fe6a826607fe1cb403ad9b8debe6faf6771fc
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87645067"
---
# <a name="guidelines-for-online-index-operations"></a><span data-ttu-id="9bdf0-102">オンライン インデックス操作のガイドライン</span><span class="sxs-lookup"><span data-stu-id="9bdf0-102">Guidelines for Online Index Operations</span></span>
  <span data-ttu-id="9bdf0-103">インデックス操作をオンラインで実行するときは、次のガイドラインに従ってください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-103">When you perform online index operations, the following guidelines apply:</span></span>  
  
-   <span data-ttu-id="9bdf0-104">基になるテーブルに次の LOB (ラージオブジェクト) データ型 ( `image` 、 **ntext**、および) が含まれている場合は、クラスター化インデックスを作成、再構築、または削除する必要があり `text` ます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-104">Clustered indexes must be created, rebuilt, or dropped offline when the underlying table contains the following large object (LOB) data types: `image`, **ntext**, and `text`.</span></span>  
  
-   <span data-ttu-id="9bdf0-105">ローカル一時テーブルのインデックスの作成、再構築、または削除は、オンラインでは実行できません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-105">Indexes on local temp tables cannot be created, rebuilt, or dropped online.</span></span> <span data-ttu-id="9bdf0-106">この制限は、グローバル一時テーブルのインデックスには当てはまりません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-106">This restriction does not apply to indexes on global temp tables.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9bdf0-107">オンラインでのインデックス操作は、[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のすべてのエディションで使用できるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-107">Online index operations are not available in every edition of [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="9bdf0-108">の各エディションでサポートされる機能の一覧につい [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ては、「 [SQL Server 2014 の各エディションがサポートする機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-108">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="9bdf0-109">次の表に、オンラインで実行可能なインデックス操作と、これらのオンライン操作対象から除外されるインデックスを示します。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-109">The following table shows the index operations that can be performed online and the indexes that are excluded from these online operations.</span></span> <span data-ttu-id="9bdf0-110">また、その他の制限についても記載します。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-110">Additional restrictions are also included.</span></span>  
  
|<span data-ttu-id="9bdf0-111">オンラインのインデックス操作</span><span class="sxs-lookup"><span data-stu-id="9bdf0-111">Online index operation</span></span>|<span data-ttu-id="9bdf0-112">操作対象外のインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-112">Excluded indexes</span></span>|<span data-ttu-id="9bdf0-113">その他の制限事項</span><span class="sxs-lookup"><span data-stu-id="9bdf0-113">Other restrictions</span></span>|  
|----------------------------|----------------------|------------------------|  
|<span data-ttu-id="9bdf0-114">ALTER INDEX REBUILD</span><span class="sxs-lookup"><span data-stu-id="9bdf0-114">ALTER INDEX REBUILD</span></span>|<span data-ttu-id="9bdf0-115">無効化されたクラスター化インデックスまたは無効化されたインデックス付きビュー</span><span class="sxs-lookup"><span data-stu-id="9bdf0-115">Disabled clustered index or disabled indexed view</span></span><br /><br /> <span data-ttu-id="9bdf0-116">XML インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-116">XML index</span></span> <br /><br /><span data-ttu-id="9bdf0-117">列ストア インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-117">Columnstore index</span></span><br /><br /> <span data-ttu-id="9bdf0-118">ローカル一時テーブルのインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-118">Index on a local temp table</span></span>|<span data-ttu-id="9bdf0-119">テーブルに操作対象外のインデックスが含まれている場合、キーワード ALL を指定すると操作が失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-119">Specifying the keyword ALL may cause the operation to fail when the table contains an excluded index.</span></span><br /><br /> <span data-ttu-id="9bdf0-120">無効化されたインデックスの再構築には、他にも制限があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-120">Additional restrictions on rebuilding disabled indexes apply.</span></span> <span data-ttu-id="9bdf0-121">詳細については、「 [インデックスと制約の無効化](disable-indexes-and-constraints.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-121">For more information, see [Disable Indexes and Constraints](disable-indexes-and-constraints.md).</span></span>|  
|<span data-ttu-id="9bdf0-122">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="9bdf0-122">CREATE INDEX</span></span>|<span data-ttu-id="9bdf0-123">XML インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-123">XML index</span></span><br /><br /> <span data-ttu-id="9bdf0-124">ビューの最初の一意クラスター化インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-124">Initial unique clustered index on a view</span></span><br /><br /> <span data-ttu-id="9bdf0-125">ローカル一時テーブルのインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-125">Index on a local temp table</span></span>||  
|<span data-ttu-id="9bdf0-126">CREATE INDEX WITH DROP_EXISTING</span><span class="sxs-lookup"><span data-stu-id="9bdf0-126">CREATE INDEX WITH DROP_EXISTING</span></span>|<span data-ttu-id="9bdf0-127">無効化されたクラスター化インデックスまたは無効化されたインデックス付きビュー</span><span class="sxs-lookup"><span data-stu-id="9bdf0-127">Disabled clustered index or disabled indexed view</span></span><br /><br /> <span data-ttu-id="9bdf0-128">ローカル一時テーブルのインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-128">Index on a local temp table</span></span><br /><br /> <span data-ttu-id="9bdf0-129">XML インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-129">XML index</span></span>||  
|<span data-ttu-id="9bdf0-130">DROP INDEX</span><span class="sxs-lookup"><span data-stu-id="9bdf0-130">DROP INDEX</span></span>|<span data-ttu-id="9bdf0-131">無効化されたインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-131">Disabled index</span></span><br /><br /> <span data-ttu-id="9bdf0-132">XML インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-132">XML index</span></span><br /><br /> <span data-ttu-id="9bdf0-133">非クラスター化インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-133">Nonclustered index</span></span><br /><br /> <span data-ttu-id="9bdf0-134">ローカル一時テーブルのインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-134">Index on a local temp table</span></span>|<span data-ttu-id="9bdf0-135">1 つのステートメント内に複数のインデックスは指定できません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-135">Multiple indexes cannot be specified within a single statement.</span></span>|  
|<span data-ttu-id="9bdf0-136">ALTER TABLE ADD CONSTRAINT (PRIMARY KEY または UNIQUE)</span><span class="sxs-lookup"><span data-stu-id="9bdf0-136">ALTER TABLE ADD CONSTRAINT (PRIMARY KEY or UNIQUE)</span></span>|<span data-ttu-id="9bdf0-137">ローカル一時テーブルのインデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-137">Index on a local temp table</span></span><br /><br /> <span data-ttu-id="9bdf0-138">クラスター化インデックス</span><span class="sxs-lookup"><span data-stu-id="9bdf0-138">Clustered index</span></span>|<span data-ttu-id="9bdf0-139">サブ句は、一度に 1 つしか使用できません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-139">Only one subclause is allowed at a time.</span></span> <span data-ttu-id="9bdf0-140">たとえば、同じ ALTER TABLE ステートメント内で PRIMARY KEY 制約または UNIQUE 制約を追加して削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-140">For example, you cannot add and drop PRIMARY KEY or UNIQUE constraints in the same ALTER TABLE statement.</span></span>|  
||||  
  
 <span data-ttu-id="9bdf0-141">オンラインのインデックス操作の実行中は、基になるテーブルを変更、切り捨て、または削除できません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-141">The underlying table cannot be modified, truncated, or dropped while an online index operation is in process.</span></span>  
  
 <span data-ttu-id="9bdf0-142">クラスター化インデックスの作成または削除時に指定したオンライン オプションの設定 (ON または OFF) は、再構築する必要のある非クラスター化インデックスに適用されます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-142">The online option setting (ON or OFF) specified when you create or drop a clustered index is applied to any nonclustered indexes that must be rebuilt.</span></span> <span data-ttu-id="9bdf0-143">たとえば、クラスター化インデックスが CREATE INDEX WITH DROP_EXISTING, ONLINE=ON を使用してオンラインで構築される場合、関連するすべての非クラスター化インデックスも、オンラインで再作成されます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-143">For example, if the clustered index is built online by using CREATE INDEX WITH DROP_EXISTING, ONLINE=ON, all associated nonclustered indexes are re-created online also.</span></span>  
  
 <span data-ttu-id="9bdf0-144">UNIQUE インデックスをオンラインで作成または再構築するときに、インデックス ビルダーと同時実行ユーザー トランザクションが、同じキーの挿入を試み、一意性が損なわれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-144">When you create or rebuild a UNIQUE index online, the index builder and a concurrent user transaction may try to insert the same key, therefore violating uniqueness.</span></span> <span data-ttu-id="9bdf0-145">ソース テーブルの元の行が新しいインデックス (ターゲット) に移動される前に、ユーザーが入力した行が新しいインデックスに挿入されると、オンラインのインデックス操作が失敗します。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-145">If a row entered by a user is inserted into the new index (target) before the original row from the source table is moved to the new index, the online index operation will fail.</span></span>  
  
 <span data-ttu-id="9bdf0-146">ユーザーやアプリケーションの作業によっては、オンラインのインデックス操作とデータベースの更新が連携して実行される場合、まれに、オンラインのインデックス操作によりデッドロックが発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-146">Although not common, the online index operation can cause a deadlock when it interacts with database updates because of user or application activities.</span></span> <span data-ttu-id="9bdf0-147">このようなまれなケースでは、 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] により、ユーザーやアプリケーションの作業がデッドロックの対象として選択されます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-147">In these rare cases, the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] will select the user or application activity as a deadlock victim.</span></span>  
  
 <span data-ttu-id="9bdf0-148">複数の新しい非クラスター化インデックスを作成しているとき、または非クラスター化インデックスを再構成しているときに限り、同じテーブルやビューに対してインデックス DDL 操作をオンラインで同時実行できます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-148">You can perform concurrent online index DDL operations on the same table or view only when you are creating multiple new nonclustered indexes, or reorganizing nonclustered indexes.</span></span> <span data-ttu-id="9bdf0-149">その他すべてのオンライン インデックス操作は、同時に実行しようとしても失敗します。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-149">All other online index operations performed at the same time fail.</span></span> <span data-ttu-id="9bdf0-150">たとえば、既存のインデックスをオンラインで再構築している間に、同じテーブルの新しいインデックスをオンラインで作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-150">For example, you cannot create a new index online while rebuilding an existing index online on the same table.</span></span>  
  
 <span data-ttu-id="9bdf0-151">インデックスにラージ オブジェクト型の列が含まれていて、同じトランザクション内でオンライン操作の前に更新操作がある場合は、このオンライン操作を実行できません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-151">An online operation cannot be performed when an index contains a column of the large object type, and in the same transaction there are update operations before this online operation.</span></span> <span data-ttu-id="9bdf0-152">この問題を回避するには、オンライン操作をトランザクションの外部に配置するか、トランザクション内で更新操作の前に配置してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-152">To work around this issue, place the online operation outside the transaction or place it before any updates in the transaction.</span></span>  
  
## <a name="disk-space-considerations"></a><span data-ttu-id="9bdf0-153">ディスク領域に関する注意点</span><span class="sxs-lookup"><span data-stu-id="9bdf0-153">Disk Space Considerations</span></span>  
 <span data-ttu-id="9bdf0-154">基本的に、オンラインとオフラインのインデックス操作間で、必要なディスク領域に違いはありません。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-154">Generally, disk space requirements are the same for online and offline index operations.</span></span> <span data-ttu-id="9bdf0-155">一時マッピング インデックスに追加のディスク領域が必要になる場合だけは例外です。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-155">An exception is additional disk space required by the temporary mapping index.</span></span> <span data-ttu-id="9bdf0-156">この一時インデックスは、クラスター化インデックスを作成、再構築、または削除する、オンライン インデックス操作で使用されます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-156">This temporary index is used in online index operations that create, rebuild, or drop a clustered index.</span></span> <span data-ttu-id="9bdf0-157">クラスター化インデックスをオンラインで削除する場合と、クラスター化インデックスをオンラインで作成する場合は同じ量の領域が必要になります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-157">Dropping a clustered index online requires as much space as creating a clustered index online.</span></span> <span data-ttu-id="9bdf0-158">詳細については、「 [Disk Space Requirements for Index DDL Operations](disk-space-requirements-for-index-ddl-operations.md)」をご参照ください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-158">For more information, see [Disk Space Requirements for Index DDL Operations](disk-space-requirements-for-index-ddl-operations.md).</span></span>  
  
## <a name="performance-considerations"></a><span data-ttu-id="9bdf0-159">パフォーマンスに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="9bdf0-159">Performance Considerations</span></span>  
 <span data-ttu-id="9bdf0-160">オンラインのインデックス操作では、同時実行ユーザーによる更新操作は許可されていますが、その更新操作の負荷が非常に高いと、インデックス操作の処理時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-160">Although online index operations permit concurrent user update activity, the index operations will take longer if the update activity is very heavy.</span></span> <span data-ttu-id="9bdf0-161">通常、オンラインのインデックス操作は、同時実行更新操作の負荷レベルに関係なく、同じインデックス操作をオフラインで行った場合よりも時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-161">Typically, online index operations will be slower than equivalent offline index operations regardless of the concurrent update activity level.</span></span>  
  
 <span data-ttu-id="9bdf0-162">オンラインのインデックス操作中は、ソースの構造とターゲットの構造の両方が保持されるため、挿入、更新、削除のトランザクションによるリソースの使用量は、最大 2 倍にまで増加する場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-162">Because both the source and target structures are maintained during the online index operation, the resource usage for insert, update, and delete transactions is increased, potentially up to double.</span></span> <span data-ttu-id="9bdf0-163">このため、インデックス操作中のパフォーマンスが低下し、リソースの使用量 (特に CPU 使用時間) が増大する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-163">This could cause a decrease in performance and greater resource usage, especially CPU time, during the index operation.</span></span> <span data-ttu-id="9bdf0-164">オンラインでのインデックス操作は、完全にログに記録されます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-164">Online index operations are fully logged.</span></span>  
  
 <span data-ttu-id="9bdf0-165">オンラインでの操作を推奨しますが、実際の環境と特定の要件を評価してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-165">Although we recommend online operations, you should evaluate your environment and specific requirements.</span></span> <span data-ttu-id="9bdf0-166">オフラインでインデックス操作を実行することが最適な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-166">It may be optimal to run index operations offline.</span></span> <span data-ttu-id="9bdf0-167">この場合、操作中にユーザーからのデータ アクセスは制限されますが、操作をより短時間で完了でき、使用するリソースも軽減できます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-167">In doing this, users have restricted access to the data during the operation, but the operation finishes faster and uses fewer resources.</span></span>  
  
 <span data-ttu-id="9bdf0-168">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]を実行するマルチプロセッサ コンピューターでは、他のクエリと同様に、インデックスのステートメントがこのステートメントに関連付けられているスキャン操作や並べ替え操作の実行に、より多くのプロセッサを使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-168">On multiprocessor computers that are running [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], index statements may use more processors to perform the scan and sort operations associated with the index statement just like other queries do.</span></span> <span data-ttu-id="9bdf0-169">MAXDOP インデックス オプションを使用して、オンラインでのインデックス操作専用に使用するプロセッサ数を制御できます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-169">You can use the MAXDOP index option to control the number of processors dedicated to the online index operation.</span></span> <span data-ttu-id="9bdf0-170">このようにすることで、インデックス操作が使用するリソースと他の同時実行ユーザーが使用するリソースのバランスをとることができます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-170">In this way, you can balance the resources that are used by index operation with those of the concurrent users.</span></span> <span data-ttu-id="9bdf0-171">詳細については、「 [並列インデックス操作の構成](configure-parallel-index-operations.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-171">For more information, see [Configure Parallel Index Operations](configure-parallel-index-operations.md).</span></span> <span data-ttu-id="9bdf0-172">並列インデックス操作をサポートする SQL Server のエディションの詳細については、「 [SQL Server 2014 の各エディションがサポートする機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-172">For more information about the editions of SQL Server that support Parallel indexed operations, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="9bdf0-173">S-Lock または Sch-M ロックはインデックス操作の最後のフェーズで保持されるので、BEGIN TRANSACTION...COMMIT ブロックなど、明示的なユーザー トランザクション内でのオンラインのインデックス操作を実行する場合は十分に注意してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-173">Because an S-lock or Sch-M lock is held in the final phase of the index operation, be careful when you run an online index operation inside an explicit user transaction, such as BEGIN TRANSACTION...COMMIT block.</span></span> <span data-ttu-id="9bdf0-174">この場合、ロックがトランザクションの最後まで保持され、その結果ユーザーのコンカレンシーが損なわれます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-174">Doing this causes the lock to be held until the end of the transaction, therefore impeding user concurrency.</span></span>  
  
 <span data-ttu-id="9bdf0-175">インデックスをオンラインで再構築すると、 `MAX DOP > 1` オプションと `ALLOW_PAGE_LOCKS = OFF` オプションでの実行が許可されたときに断片化が増加する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-175">Online index rebuilding may increase fragmentation when it is allowed to run with `MAX DOP > 1` and `ALLOW_PAGE_LOCKS = OFF` options.</span></span> <span data-ttu-id="9bdf0-176">詳細については、「 [動作方法: オンラインでのインデックス再構築 - 断片化が増加する可能性](https://blogs.msdn.com/b/psssql/archive/2012/09/05/how-it-works-online-index-rebuild-can-cause-increased-fragmentation.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-176">For more information, see [How It Works: Online Index Rebuild - Can Cause Increased Fragmentation](https://blogs.msdn.com/b/psssql/archive/2012/09/05/how-it-works-online-index-rebuild-can-cause-increased-fragmentation.aspx).</span></span>  
  
## <a name="transaction-log-considerations"></a><span data-ttu-id="9bdf0-177">トランザクション ログに関する注意点</span><span class="sxs-lookup"><span data-stu-id="9bdf0-177">Transaction Log Considerations</span></span>  
 <span data-ttu-id="9bdf0-178">オフライン、オンラインを問わず、大規模なインデックス操作を行うと、大量のデータ読み込みが発生し、トランザクション ログがすぐにいっぱいになってしまうことがあります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-178">Large-scale index operations, performed offline or online, can generate large data loads that can cause the transaction log to quickly fill.</span></span> <span data-ttu-id="9bdf0-179">インデックス操作をロールバックできるようにするため、インデックス操作が完了するまでは、トランザクション ログを切り捨てることはできません。ただし、インデックス操作中にログをバックアップすることはできます。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-179">To make sure that the index operation can be rolled back, the transaction log cannot be truncated until the index operation has been completed; however, the log can be backed up during the index operation.</span></span> <span data-ttu-id="9bdf0-180">したがって、トランザクション ログには、インデックス操作中にインデックス操作によるトランザクションと、同時実行ユーザーによるトランザクションの両方を格納できるだけの十分な領域が割り当てられている必要があります。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-180">Therefore, the transaction log must have sufficient space to store both the index operation transactions and any concurrent user transactions for the duration of the index operation.</span></span> <span data-ttu-id="9bdf0-181">詳細については、「 [インデックス操作用のトランザクション ログのディスク領域](transaction-log-disk-space-for-index-operations.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9bdf0-181">For more information, see [Transaction Log Disk Space for Index Operations](transaction-log-disk-space-for-index-operations.md).</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="9bdf0-182">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="9bdf0-182">Related Content</span></span>  
 [<span data-ttu-id="9bdf0-183">オンライン インデックス操作の動作原理</span><span class="sxs-lookup"><span data-stu-id="9bdf0-183">How Online Index Operations Work</span></span>](how-online-index-operations-work.md)  
  
 [<span data-ttu-id="9bdf0-184">オンラインでのインデックス操作の実行</span><span class="sxs-lookup"><span data-stu-id="9bdf0-184">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="9bdf0-185">ALTER INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9bdf0-185">ALTER INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-index-transact-sql)  
  
 [<span data-ttu-id="9bdf0-186">CREATE INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="9bdf0-186">CREATE INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-index-transact-sql)  
  
  
