---
title: Azure Blob Storage サービスを使用したバックアップと復元の SQL Server |Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: 6a0c9b6a-cf71-4311-82f2-12c445f63935
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 943da9018e50e1f287858654d4639035f3aa4532
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87644481"
---
# <a name="sql-server-backup-and-restore-with-azure-blob-storage-service"></a><span data-ttu-id="5bf56-102">Azure Blob Storage サービスを使った SQL Server のバックアップと復元</span><span class="sxs-lookup"><span data-stu-id="5bf56-102">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>
  <span data-ttu-id="5bf56-103">このトピック [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、 [Azure Blob ストレージサービス](https://www.windowsazure.com/develop/net/how-to-guides/blob-storage/)に対するバックアップと復元について説明します。</span><span class="sxs-lookup"><span data-stu-id="5bf56-103">This topic introduces [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups to and restoring from the [Azure Blob storage service](https://www.windowsazure.com/develop/net/how-to-guides/blob-storage/).</span></span> <span data-ttu-id="5bf56-104">また、Azure Blob service を使用してバックアップを格納する利点の概要についても説明し [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-104">It also provides a summary of the benefits of using the Azure Blob service to store [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups.</span></span>  
  
 <span data-ttu-id="5bf56-105">SQL Server は、次の方法で Azure Blob ストレージサービスへのバックアップの格納をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="5bf56-105">SQL Server supports storing backups to the Azure Blob storage service in the following ways:</span></span>  
  
-   <span data-ttu-id="5bf56-106">**Azure へのバックアップを管理します。** ディスクとテープへのバックアップに使用したのと同じ方法を使用して、バックアップ先として URL を指定することで、Azure storage にバックアップできるようになりました。</span><span class="sxs-lookup"><span data-stu-id="5bf56-106">**Manage your backups  to Azure:** Using the same methods used to backup to DISK and TAPE, you can now back up to Azure storage by Specifying URL as the backup destination.</span></span>  <span data-ttu-id="5bf56-107">この機能を使用すると、手動でバックアップすることも、ローカル ストレージまたはその他のオフサイト オプションの場合と同じように独自のバックアップ方法を構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-107">You can use this feature to manually backup or configure your own backup strategy like you would for a local storage or other off-site options.</span></span> <span data-ttu-id="5bf56-108">この機能は、 **SQL Server Backup to URL**とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-108">This feature is also referred to as **SQL Server Backup to URL**.</span></span> <span data-ttu-id="5bf56-109">詳細については、「 [SQL Server Backup to URL](sql-server-backup-to-url.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-109">For more information, see [SQL Server Backup to URL](sql-server-backup-to-url.md).</span></span> <span data-ttu-id="5bf56-110">この機能は、SQL Server 2012 SP1 CU2 以降で使用できます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-110">This feature is available in SQL Server 2012 SP1 CU2 or later.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="5bf56-111">SQL Server 2014 より前の SQL Server バージョンでは、Azure ツールへのバックアップ SQL Server を使用して、Azure storage へのバックアップをすばやく簡単に作成できます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-111">For SQL Server versions previous to SQL Server 2014, you can use the add-in SQL Server Backup to Azure Tool to quickly and easily create backups to Azure storage.</span></span> <span data-ttu-id="5bf56-112">詳細については、 [ダウンロード センター](https://go.microsoft.com/fwlink/?LinkID=324399)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-112">For more information, see [download center](https://go.microsoft.com/fwlink/?LinkID=324399).</span></span>  
  
-   <span data-ttu-id="5bf56-113">**Azure へのバックアップを SQL Server 管理するには、次のようにします。** 1つのデータベースまたは複数のデータベースのバックアップ方法とスケジュールバックアップを管理し、インスタンスレベルで既定値を設定するように SQL Server を構成します。</span><span class="sxs-lookup"><span data-stu-id="5bf56-113">**Let SQL Server Manage backups to Azure:** Configure SQL Server to manage the backup strategy and schedule backups for a single database, or several databases, or set defaults at the instance level.</span></span> <span data-ttu-id="5bf56-114">この機能はと呼ばれ **[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]** ます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-114">This feature is referred to as  **[!INCLUDE[ss_smartbackup](../../includes/ss-smartbackup-md.md)]**.</span></span> <span data-ttu-id="5bf56-115">詳細については[、「Azure へのマネージバックアップの SQL Server](sql-server-managed-backup-to-microsoft-azure.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-115">For more information see [SQL Server Managed  Backup to Azure](sql-server-managed-backup-to-microsoft-azure.md).</span></span> <span data-ttu-id="5bf56-116">この機能は、SQL Server 2014 以降で使用できます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-116">This feature is available in SQL Server 2014 or later.</span></span>  
  
## <a name="benefits-of-using-the-azure-blob-service-for-ssnoversion-backups"></a><span data-ttu-id="5bf56-117">バックアップに Azure Blob サービスを使用する利点 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="5bf56-117">Benefits of Using the Azure Blob Service for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Backups</span></span>  
  
-   <span data-ttu-id="5bf56-118">柔軟で信頼性が高く、無制限のオフサイトストレージ: Azure Blob service へのバックアップの格納は、便利で柔軟性が高く、簡単にアクセスできるオフサイトのオプションです。</span><span class="sxs-lookup"><span data-stu-id="5bf56-118">Flexible, reliable, and limitless off-site storage: Storing your backups on Azure Blob service can be a convenient, flexible, and easy to access off-site option.</span></span> <span data-ttu-id="5bf56-119">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] バックアップ用にオフサイト ストレージを作成するのは、既存のスクリプトやジョブを変更するのと同様に簡単です。</span><span class="sxs-lookup"><span data-stu-id="5bf56-119">Creating off-site storage for your [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups can be as easy as modifying your existing scripts/jobs.</span></span> <span data-ttu-id="5bf56-120">オフサイト ストレージは、通常、災害発生時にオフサイトと運用データベース両方の場所に影響しないように、運用データベースの場所から十分に離れた場所に設置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5bf56-120">Off-site storage should typically be far enough from the production database location to prevent a single disaster that might impact both the off-site and production database locations.</span></span> <span data-ttu-id="5bf56-121">BLOB ストレージを地理的に離れた場所にレプリケートすることによって、地域全体に影響する可能性がある災害が発生した場合の保護レベルが強化されます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-121">By choosing to geo replicate the Blob storage you have an extra layer of protection in the event of a disaster that could affect the whole region.</span></span> <span data-ttu-id="5bf56-122">また、バックアップは場所や時間を問わず使用でき、復元のために簡単にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-122">In addition, backups are available from anywhere and at any time and can easily be accessed for restores.</span></span>  
  
-   <span data-ttu-id="5bf56-123">バックアップアーカイブ: Azure Blob Storage サービスは、バックアップをアーカイブするために頻繁に使用されるテープオプションに代わる優れた手段を提供します。</span><span class="sxs-lookup"><span data-stu-id="5bf56-123">Backup Archive: The Azure Blob Storage service offers a better alternative to the often used tape option to archive backups.</span></span> <span data-ttu-id="5bf56-124">テープ ストレージでは、オフサイトの施設への物理的な輸送手段とメディアを保護する手段が必要になります。</span><span class="sxs-lookup"><span data-stu-id="5bf56-124">Tape storage might require physical transportation to an off-site facility and measures to protect the media.</span></span> <span data-ttu-id="5bf56-125">Azure Blob Storage へのバックアップの保存では、可用性と持続性に優れた高速アーカイブが可能です。</span><span class="sxs-lookup"><span data-stu-id="5bf56-125">Storing your backups in Azure Blob Storage provides an instant, highly available, and a durable archiving option.</span></span>  
  
-   <span data-ttu-id="5bf56-126">ハードウェア管理のオーバーヘッドなし: Azure サービスを使用したハードウェア管理のオーバーヘッドはありません。</span><span class="sxs-lookup"><span data-stu-id="5bf56-126">No overhead of hardware management:There is no overhead of hardware management with Azure services.</span></span> <span data-ttu-id="5bf56-127">Azure サービスのハードウェア管理では、ハードウェア障害に対する冗長性実現と保護のためにgeo レプリケーションが行われます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-127">Azure services manage the hardware and provide geo-replication for redundancy and protection against hardware failures.</span></span>  
  
-   <span data-ttu-id="5bf56-128">現在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 、Azure 仮想マシンで実行されているのインスタンスでは、アタッチされたディスクを作成することによって、Azure Blob ストレージサービスへのバックアップを実行できます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-128">Currently for instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] running in an Azure Virtual Machine, backing up to Azure Blob storage services can be done by creating attached disks.</span></span> <span data-ttu-id="5bf56-129">ただし、Azure 仮想マシンに接続できるディスクの数には制限があります。</span><span class="sxs-lookup"><span data-stu-id="5bf56-129">However, there is a limit to the number of disks you can attach to an Azure Virtual Machine.</span></span> <span data-ttu-id="5bf56-130">ディスク数の上限は、XL インスタンスでは 16 台、サイズの小さいインスタンスではこれより少なくなります。</span><span class="sxs-lookup"><span data-stu-id="5bf56-130">This limit is 16 disks for an extra large instance and fewer for smaller instances.</span></span> <span data-ttu-id="5bf56-131">Azure Blob Storage に直接バックアップを有効にすることで、16ディスク制限を回避できます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-131">By enabling a direct backup to Azure Blob Storage, you can bypass the 16 disk limit.</span></span>  
  
     <span data-ttu-id="5bf56-132">さらに、Azure Blob ストレージサービスに格納されているバックアップファイルは、オンプレミス [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] または [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Azure 仮想マシンで実行されている別ので直接使用できます。データベースのアタッチ/デタッチや、VHD のダウンロードとアタッチは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="5bf56-132">In addition, the backup file which now is stored in the Azure Blob storage service is directly available to either an on-premises [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] or another [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] running in an Azure Virtual Machine, without the need for database attach/detach or downloading and attaching the VHD.</span></span>  
  
-   <span data-ttu-id="5bf56-133">コスト面での利点: 使用するサービスにのみ料金がかかります。</span><span class="sxs-lookup"><span data-stu-id="5bf56-133">Cost Benefits: Pay only for the service that is used.</span></span> <span data-ttu-id="5bf56-134">オフサイトのバックアップ アーカイブ オプションとして、優れたコスト効果を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-134">Can be cost-effective as an off-site and backup archive option.</span></span> <span data-ttu-id="5bf56-135">詳細とリンクについては、「 [Azure の課金に関する注意点](#Billing)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-135">See the [Azure Billing Considerations](#Billing) section for more information and links.</span></span>  
  
##  <a name="azure-billing-considerations"></a><a name="Billing"></a><span data-ttu-id="5bf56-136">Azure の課金に関する考慮事項:</span><span class="sxs-lookup"><span data-stu-id="5bf56-136">Azure Billing Considerations:</span></span>  
 <span data-ttu-id="5bf56-137">Azure storage のコストを把握することで、Azure でのバックアップの作成と保存にかかるコストを予測することができます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-137">Understanding Azure storage costs enables you to forecast the cost of creating and storing backups in Azure.</span></span>  
  
 <span data-ttu-id="5bf56-138">[Azure 料金計算ツール](https://go.microsoft.com/fwlink/?LinkId=277060)を使用すると、コストを見積もることができます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-138">The [Azure pricing calculator](https://go.microsoft.com/fwlink/?LinkId=277060) can help estimate your costs.</span></span>  
  
 <span data-ttu-id="5bf56-139">**ストレージ:** 料金は使用領域に基づいており、段階的に、また、冗長性のレベルに応じて計算されます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-139">**Storage:** Charges are based on the space used and are calculated on a graduated scale and the level of redundancy.</span></span> <span data-ttu-id="5bf56-140">詳細と最新情報については、「 **料金の詳細** 」の「 [データ管理](https://go.microsoft.com/fwlink/?LinkId=277059) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-140">For more details, and up-to-date information, see the **Data Management** section of the [Pricing Details](https://go.microsoft.com/fwlink/?LinkId=277059) article.</span></span>  
  
 <span data-ttu-id="5bf56-141">**データ転送:** Azure への受信データ転送は無料です。</span><span class="sxs-lookup"><span data-stu-id="5bf56-141">**Data Transfers:** Inbound data transfers to Azure are free.</span></span> <span data-ttu-id="5bf56-142">送信転送は、帯域幅の使用量に対して課金され、段階的な地域固有の区分に基づいて計算されます。</span><span class="sxs-lookup"><span data-stu-id="5bf56-142">Outbound transfers are charged for the bandwidth use and calculated based on a graduated region-specific scale.</span></span> <span data-ttu-id="5bf56-143">詳細については、「 [料金の詳細](https://go.microsoft.com/fwlink/?LinkId=277061) 」の「データ転送」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5bf56-143">For more details, see the [Data Transfers](https://go.microsoft.com/fwlink/?LinkId=277061) section of the Pricing Details article.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5bf56-144">参照</span><span class="sxs-lookup"><span data-stu-id="5bf56-144">See Also</span></span>  
 <span data-ttu-id="5bf56-145">[SQL Server Backup to URL に関するベスト プラクティスとトラブルシューティング](sql-server-backup-to-url-best-practices-and-troubleshooting.md) </span><span class="sxs-lookup"><span data-stu-id="5bf56-145">[SQL Server Backup to URL Best Practices and Troubleshooting](sql-server-backup-to-url-best-practices-and-troubleshooting.md) </span></span>  
 <span data-ttu-id="5bf56-146">[システム データベースのバックアップと復元 &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="5bf56-146">[Back Up and Restore of System Databases &#40;SQL Server&#41;](back-up-and-restore-of-system-databases-sql-server.md) </span></span>  
 <span data-ttu-id="5bf56-147">[チュートリアル: SQL Server Azure Blob Storage サービスへのバックアップと復元](../tutorial-sql-server-backup-and-restore-to-azure-blob-storage-service.md) </span><span class="sxs-lookup"><span data-stu-id="5bf56-147">[Tutorial: SQL Server Backup and Restore to Azure Blob Storage Service](../tutorial-sql-server-backup-and-restore-to-azure-blob-storage-service.md) </span></span>  
 [<span data-ttu-id="5bf56-148">SQL Server Backup to URL</span><span class="sxs-lookup"><span data-stu-id="5bf56-148">SQL Server Backup to URL</span></span>](sql-server-backup-to-url.md)  
  
