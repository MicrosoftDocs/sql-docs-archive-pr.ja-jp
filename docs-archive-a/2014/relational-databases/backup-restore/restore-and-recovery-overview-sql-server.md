---
title: 復元と復旧の概要 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
helpviewer_keywords:
- restoring tables [SQL Server]
- backups [SQL Server], restore scenarios
- database backups [SQL Server], restore scenarios
- database restores [SQL Server]
- restoring [SQL Server]
- restores [SQL Server]
- table restores [SQL Server]
- restoring databases [SQL Server], about restoring databases
- database restores [SQL Server], scenarios
ms.assetid: e985c9a6-4230-4087-9fdb-de8571ba5a5f
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 2b8f032dce4f2eb09ef80cfa8c6333de2d563a81
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736433"
---
# <a name="restore-and-recovery-overview-sql-server"></a><span data-ttu-id="bd8ab-102">復元と復旧の概要 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-102">Restore and Recovery Overview (SQL Server)</span></span>
  <span data-ttu-id="bd8ab-103">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースをエラーから復旧するには、データベース管理者が論理的に正しく意味のある復元シーケンスで一連の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] バックアップを復元する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-103">To recover a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database from a failure, a database administrator has to restore a set of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backups in a logically correct and meaningful restore sequence.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="bd8ab-104">の復元および復旧では、次に示すように、データベース全体、データ ファイル、またはデータ ページの各バックアップからのデータの復元をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-104">restore and recovery supports restoring data from backups of a whole database, a data file, or a data page, as follows:</span></span>  
  
-   <span data-ttu-id="bd8ab-105">データベース ( *データベースの全体復元*)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-105">The database (a *complete database restore*)</span></span>  
  
     <span data-ttu-id="bd8ab-106">データベース全体を復元および復旧します。復元および復旧の操作中は、データベースはオフラインになります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-106">The whole database is restored and recovered, and the database is offline for the duration of the restore and recovery operations.</span></span>  
  
-   <span data-ttu-id="bd8ab-107">データ ファイル ( *ファイル復元*)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-107">The data file (a *file restore*)</span></span>  
  
     <span data-ttu-id="bd8ab-108">データ ファイルまたはファイルのセットを復元および復旧します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-108">A data file or a set of files is restored and recovered.</span></span> <span data-ttu-id="bd8ab-109">ファイル復元中は、ファイルを含むファイル グループが自動的にオフラインになります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-109">During a file restore, the filegroups that contain the files are automatically offline for the duration of the restore.</span></span> <span data-ttu-id="bd8ab-110">オフラインのファイル グループにアクセスするとエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-110">Any attempt to access an offline filegroup causes an error.</span></span>  
  
-   <span data-ttu-id="bd8ab-111">データ ページ ( *ページ復元*)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-111">The data page (a *page restore*)</span></span>  
  
     <span data-ttu-id="bd8ab-112">完全復旧モデルまたは一括ログ復旧モデルでは、個々のデータベースを復元できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-112">Under the full recovery model or bulk-logged recovery model, you can restore individual databases.</span></span> <span data-ttu-id="bd8ab-113">ページ復元は、ファイル グループの数に関係なく、どのデータベースでも実行できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-113">Page restores can be performed on any database, regardless of the number of filegroups.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="bd8ab-114">のバックアップと復元は、64 ビット システムか 32 ビット システムかに関係なく、サポートされるすべてのオペレーティング システムで機能します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-114">backup and restore work across all supported operating systems, whether they are 64-bit or 32-bit systems.</span></span> <span data-ttu-id="bd8ab-115">サポートされているオペレーティングシステムの詳細については、「 [SQL Server 2014 をインストールするためのハードウェアおよびソフトウェアの要件](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-115">For information about the supported operating systems, see [Hardware and Software Requirements for Installing SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md).</span></span> <span data-ttu-id="bd8ab-116">以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]からのバックアップに対するサポートの情報については、「 [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql)」の「互換性サポート」のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-116">For information about support for backups from earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see the "Compatibility Support" section of [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql).</span></span>  
  
 <span data-ttu-id="bd8ab-117">**このトピックの内容**</span><span class="sxs-lookup"><span data-stu-id="bd8ab-117">**In this Topic:**</span></span>  
  
-   [<span data-ttu-id="bd8ab-118">復元シナリオの概要</span><span class="sxs-lookup"><span data-stu-id="bd8ab-118">Overview of Restore Scenarios</span></span>](#RestoreScenariosOv)  
  
-   [<span data-ttu-id="bd8ab-119">復旧モデルとサポートされる復元操作</span><span class="sxs-lookup"><span data-stu-id="bd8ab-119">Recovery Models and Supported Restore Operations</span></span>](#RMsAndSupportedRestoreOps)  
  
-   [<span data-ttu-id="bd8ab-120">単純復旧モデルの復元に関する制限事項</span><span class="sxs-lookup"><span data-stu-id="bd8ab-120">Restore Restrictions Under the Simple Recovery Model</span></span>](#RMsimpleScenarios)  
  
-   [<span data-ttu-id="bd8ab-121">一括ログ復旧モデルでの復元</span><span class="sxs-lookup"><span data-stu-id="bd8ab-121">Restore Under the Bulk-Logged Recovery Model</span></span>](#RMblogRestore)  
  
-   [<span data-ttu-id="bd8ab-122">データベース復旧アドバイザー (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-122">Database Recovery Advisor (SQL Server Management Studio)</span></span>](#DRA)  
  
-   [<span data-ttu-id="bd8ab-123">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="bd8ab-123">Related Content</span></span>](#RelatedContent)  
  
##  <a name="overview-of-restore-scenarios"></a><a name="RestoreScenariosOv"></a> <span data-ttu-id="bd8ab-124">復元シナリオの概要</span><span class="sxs-lookup"><span data-stu-id="bd8ab-124">Overview of Restore Scenarios</span></span>  
 <span data-ttu-id="bd8ab-125">*の* 復元シナリオ [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] とは、1 つ以上のバックアップからデータを復元した後にデータベースを復旧するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-125">A *restore scenario* in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is the process of restoring data from one or more backups and then recovering the database.</span></span> <span data-ttu-id="bd8ab-126">サポートされている復元シナリオは、データベースの復旧モデルおよび [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のエディションによって異なります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-126">The supported restore scenarios depend on the recovery model of the database and the edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="bd8ab-127">次の表では、さまざまな復旧モデルでサポートされている復元シナリオについて説明しています。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-127">The following table introduces the possible restore scenarios that are supported for different recovery models.</span></span>  
  
|<span data-ttu-id="bd8ab-128">の</span><span class="sxs-lookup"><span data-stu-id="bd8ab-128">Restore scenario</span></span>|<span data-ttu-id="bd8ab-129">単純復旧モデルの場合</span><span class="sxs-lookup"><span data-stu-id="bd8ab-129">Under simple recovery model</span></span>|<span data-ttu-id="bd8ab-130">完全/一括ログ復旧モデルの場合</span><span class="sxs-lookup"><span data-stu-id="bd8ab-130">Under full/bulk-logged recovery models</span></span>|  
|----------------------|---------------------------------|----------------------------------------------|  
|<span data-ttu-id="bd8ab-131">データベースの全体復元</span><span class="sxs-lookup"><span data-stu-id="bd8ab-131">Complete database restore</span></span>|<span data-ttu-id="bd8ab-132">基本的な復元ストラテジです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-132">This is the basic restore strategy.</span></span> <span data-ttu-id="bd8ab-133">データベースの全体復元では、データベースの完全バックアップを復元し復旧するだけになる場合があります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-133">A complete database restore might involve simply restoring and recovering a full database backup.</span></span> <span data-ttu-id="bd8ab-134">また、データベースの完全バックアップを復元した後で差分バックアップを復元し復旧する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-134">Alternatively, a complete database restore might involve restoring a full database backup followed by restoring and recovering a differential backup.</span></span><br /><br /> <span data-ttu-id="bd8ab-135">詳細については、「[データベースの全体復元 &#40;単純復旧モデル&#41;](complete-database-restores-simple-recovery-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-135">For more information, see [Complete Database Restores &#40;Simple Recovery Model&#41;](complete-database-restores-simple-recovery-model.md).</span></span>|<span data-ttu-id="bd8ab-136">基本的な復元ストラテジです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-136">This is the basic restore strategy.</span></span> <span data-ttu-id="bd8ab-137">データベースの全体復元を行うには、データベースの完全バックアップと差分バックアップ (存在する場合) を復元し、その後で後続のすべてのログ バックアップを順番に復元する必要があります。差分バックアップの復元は省略できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-137">A complete database restore involve restoring a full database backup and, optionally, a differential backup (if any), followed by restoring all subsequent log backups (in sequence).</span></span> <span data-ttu-id="bd8ab-138">データベースの全体復元を完了するには、最新のログ バックアップを復旧して、さらにそれを復元します (RESTORE WITH RECOVERY)。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-138">The complete database restore is finished by recovering the last log backup and also restoring it (RESTORE WITH RECOVERY).</span></span><br /><br /> <span data-ttu-id="bd8ab-139">詳細については、「[データベースの全体復元 &#40;完全復旧モデル&#41;](complete-database-restores-full-recovery-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-139">For more information, see [Complete Database Restores &#40;Full Recovery Model&#41;](complete-database-restores-full-recovery-model.md)</span></span>|  
|<span data-ttu-id="bd8ab-140">File restore **\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-140">File restore **\***</span></span>|<span data-ttu-id="bd8ab-141">データベース全体を復元することなく、破損した 1 つ以上の読み取り専用ファイルを復元します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-141">Restore one or more damaged read-only files, without restoring the entire database.</span></span> <span data-ttu-id="bd8ab-142">ファイル復元は、データベースに読み取り専用のファイル グループが少なくとも 1 つ含まれている場合だけ使用できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-142">File restore is available only if the database has at least one read-only filegroup.</span></span>|<span data-ttu-id="bd8ab-143">データベース全体を復元することなく、1 つ以上のファイルを復元します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-143">Restores one or more files, without restoring the entire database.</span></span> <span data-ttu-id="bd8ab-144">ファイル復元は、データベースがオフラインのときに実行できますが、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のエディションによってはオンラインのままでも実行できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-144">File restore can be performed while the database is offline or, for some editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], while the database remains online.</span></span> <span data-ttu-id="bd8ab-145">ファイル復元の間、復元対象のファイルを含むファイル グループは常にオフラインです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-145">During a file restore, the filegroups that contain the files that are being restored are always offline.</span></span>|  
|<span data-ttu-id="bd8ab-146">ページ復元</span><span class="sxs-lookup"><span data-stu-id="bd8ab-146">Page restore</span></span>|<span data-ttu-id="bd8ab-147">適用なし</span><span class="sxs-lookup"><span data-stu-id="bd8ab-147">Not applicable</span></span>|<span data-ttu-id="bd8ab-148">破損した 1 つ以上のページを復元します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-148">Restores one or more damaged pages.</span></span> <span data-ttu-id="bd8ab-149">ページ復元は、データベースがオフラインのときに実行できますが、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のエディションによってはオンラインのままでも実行できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-149">Page restore can be performed while the database is offline or, for some editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], while the database remains online.</span></span> <span data-ttu-id="bd8ab-150">ページ復元の間、復元対象のページは常にオフラインです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-150">During a page restore, the pages that are being restored are always offline.</span></span><br /><br /> <span data-ttu-id="bd8ab-151">現在のログ ファイルまで、ログ バックアップのチェーンが途切れていないことが必要です。ページを現在のログ ファイルまでの最新状態にするためには、それまでのログ バックアップをすべて適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-151">An unbroken chain of log backups must be available, up to the current log file, and they must all be applied to bring the page up to date with the current log file.</span></span><br /><br /> <span data-ttu-id="bd8ab-152">詳細については、「[ページ復元 &#40;SQL Server&#41;](restore-pages-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-152">For more information, see [Restore Pages &#40;SQL Server&#41;](restore-pages-sql-server.md).</span></span>|  
|<span data-ttu-id="bd8ab-153">段階的な部分復元 **\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-153">Piecemeal restore **\***</span></span>|<span data-ttu-id="bd8ab-154">データベースをファイル グループ レベルで段階的に復元および復旧します。プライマリ ファイル グループとすべての読み書き可能セカンダリ ファイル グループの復元から行います。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-154">Restore and recover the database in stages at the filegroup level, starting with the primary and all read/write, secondary filegroups.</span></span>|<span data-ttu-id="bd8ab-155">データベースをファイル グループ レベルでプライマリ ファイル グループから段階的に復元および復旧します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-155">Restore and recover the database in stages at the filegroup level, starting with the primary filegroup.</span></span>|  
  
 <span data-ttu-id="bd8ab-156">**\*** オンライン復元は、Enterprise Edition でのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-156">**\*** Online restore is supported only in the Enterprise edition.</span></span>  
  
 <span data-ttu-id="bd8ab-157">[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] では、データの復元方法に関係なく、データベース全体の論理的な一貫性が確保されないと、データベースを復旧できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-157">Regardless of how data is restored, before a database can be recovered, the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] guarantees that the whole database is logically consistent.</span></span> <span data-ttu-id="bd8ab-158">たとえば、ファイルを復元する場合、データベースとの一貫性を維持できるように十分なロールフォワードを行うまでは、ファイルを復旧してオンラインにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-158">For example, if you restore a file, you cannot recover it and bring it online until it has been rolled far enough forward to be consistent with the database.</span></span>  
  
### <a name="advantages-of-a-file-or-page-restore"></a><span data-ttu-id="bd8ab-159">ファイルまたはページを復元する利点</span><span class="sxs-lookup"><span data-stu-id="bd8ab-159">Advantages of a File or Page Restore</span></span>  
 <span data-ttu-id="bd8ab-160">データベース全体ではなく、ファイルやページを復元して復旧すると、次のような利点があります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-160">Restoring and recovering files or pages, instead of the whole database, provides the following advantages:</span></span>  
  
-   <span data-ttu-id="bd8ab-161">復元するデータが少ないので、コピーと復旧にかかる時間が短縮されます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-161">Restoring less data reduces the time required to copy and recover it.</span></span>  
  
-   <span data-ttu-id="bd8ab-162">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、ファイルまたはページを復元する場合、復元操作中にデータベース内の他のデータをオンラインのままにすることができます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-162">On [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] restoring files or pages might allow other data in the database to remain online during the restore operation.</span></span>  
  
##  <a name="recovery-models-and-supported-restore-operations"></a><a name="RMsAndSupportedRestoreOps"></a><span data-ttu-id="bd8ab-163">復旧モデルとサポートされる復元操作</span><span class="sxs-lookup"><span data-stu-id="bd8ab-163">Recovery Models and Supported Restore Operations</span></span>  
 <span data-ttu-id="bd8ab-164">データベースで使用できる復元操作は、そのデータベースの復旧モデルによって決まります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-164">The restore operations that are available for a database depend on its recovery model.</span></span> <span data-ttu-id="bd8ab-165">次の表では、特定の復元シナリオごとに、各復旧モデルによりサポートされるかどうかと、どの程度までサポートされるかを示します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-165">The following table summarizes whether and to what extent each of the recovery models supports a given restore scenario.</span></span>  
  
|<span data-ttu-id="bd8ab-166">復元操作</span><span class="sxs-lookup"><span data-stu-id="bd8ab-166">Restore operation</span></span>|<span data-ttu-id="bd8ab-167">完全復旧モデル</span><span class="sxs-lookup"><span data-stu-id="bd8ab-167">Full recovery model</span></span>|<span data-ttu-id="bd8ab-168">一括ログ復旧モデル</span><span class="sxs-lookup"><span data-stu-id="bd8ab-168">Bulk-logged recovery model</span></span>|<span data-ttu-id="bd8ab-169">単純復旧モデル</span><span class="sxs-lookup"><span data-stu-id="bd8ab-169">Simple recovery model</span></span>|  
|-----------------------|-------------------------|---------------------------------|---------------------------|  
|<span data-ttu-id="bd8ab-170">データの復旧</span><span class="sxs-lookup"><span data-stu-id="bd8ab-170">Data recovery</span></span>|<span data-ttu-id="bd8ab-171">完全な復旧 (ログが使用可能な場合)。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-171">Complete recovery (if the log is available).</span></span>|<span data-ttu-id="bd8ab-172">一部データ損失の可能性。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-172">Some data-loss exposure.</span></span>|<span data-ttu-id="bd8ab-173">最新の完全バックアップまたは差分バックアップ以降のデータが損失。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-173">Any data since last full or differential backup is lost.</span></span>|  
|<span data-ttu-id="bd8ab-174">ポイントインタイム リストア</span><span class="sxs-lookup"><span data-stu-id="bd8ab-174">Point-in-time restore</span></span>|<span data-ttu-id="bd8ab-175">ログ バックアップに含まれる任意の時点。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-175">Any time covered by the log backups.</span></span>|<span data-ttu-id="bd8ab-176">ログ バックアップに一括ログ記録された変更が含まれている場合は不可。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-176">Disallowed if the log backup contains any bulk-logged changes.</span></span>|<span data-ttu-id="bd8ab-177">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-177">Not supported.</span></span>|  
|<span data-ttu-id="bd8ab-178">File restore **\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-178">File restore **\***</span></span>|<span data-ttu-id="bd8ab-179">完全にサポートされます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-179">Full support.</span></span>|<span data-ttu-id="bd8ab-180">場合によりサポートされます。 **\*\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-180">Sometimes.**\*\***</span></span>|<span data-ttu-id="bd8ab-181">読み取り専用セカンダリ ファイルの場合のみ使用可能です。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-181">Available only for read-only secondary files.</span></span>|  
|<span data-ttu-id="bd8ab-182">Page restore **\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-182">Page restore **\***</span></span>|<span data-ttu-id="bd8ab-183">完全にサポートされます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-183">Full support.</span></span>|<span data-ttu-id="bd8ab-184">場合によりサポートされます。 **\*\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-184">Sometimes.**\*\***</span></span>|<span data-ttu-id="bd8ab-185">[なし] :</span><span class="sxs-lookup"><span data-stu-id="bd8ab-185">None.</span></span>|  
|<span data-ttu-id="bd8ab-186">段階的な (ファイル グループ レベルの) 部分復元 **\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-186">Piecemeal (filegroup-level) restore **\***</span></span>|<span data-ttu-id="bd8ab-187">完全にサポートされます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-187">Full support.</span></span>|<span data-ttu-id="bd8ab-188">場合によりサポートされます。 **\*\***</span><span class="sxs-lookup"><span data-stu-id="bd8ab-188">Sometimes.**\*\***</span></span>|<span data-ttu-id="bd8ab-189">読み取り専用セカンダリ ファイルの場合のみ使用可能です。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-189">Available only for read-only secondary files.</span></span>|  
  
 <span data-ttu-id="bd8ab-190">**\*** の Enterprise Edition でのみ使用できます。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="bd8ab-190">**\*** Available only in the Enterprise edition of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>  
  
 <span data-ttu-id="bd8ab-191">**\*\*** 必要な条件については、このトピックの「 [単純復旧モデルの復元に関する制限事項](#RMsimpleScenarios)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-191">**\*\*** For the required conditions, see [Restore Restrictions Under the Simple Recovery Model](#RMsimpleScenarios), later in this topic.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bd8ab-192">データベースの復旧モデルにかかわらず、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] バックアップは、バックアップを作成したバージョンより古いバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では復元できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-192">Regardless of the recovery model of a database, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup cannot be restored by a version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is older than the version that created the backup.</span></span>  
  
##  <a name="restore-scenarios-under-the-simple-recovery-model"></a><a name="RMsimpleScenarios"></a><span data-ttu-id="bd8ab-193">単純復旧モデルでの復元シナリオ</span><span class="sxs-lookup"><span data-stu-id="bd8ab-193">Restore Scenarios Under the Simple Recovery Model</span></span>  
 <span data-ttu-id="bd8ab-194">単純復旧モデルの復元操作には次の制限があります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-194">The simple recovery model imposes the following restrictions on restore operations:</span></span>  
  
-   <span data-ttu-id="bd8ab-195">ファイルの復元および段階的な部分復元は、読み取り専用のセカンダリ ファイル グループでのみ使用可能です。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-195">File restore and piecemeal restore are available only for read-only secondary filegroups.</span></span> <span data-ttu-id="bd8ab-196">これらの復元シナリオの詳細については、「[ファイルの復元 &#40;単純復旧モデル&#41;](file-restores-simple-recovery-model.md)」および「[段階的な部分復元 &#40;SQL Server&#41;](piecemeal-restores-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-196">For information about these restore scenarios, see [File Restores &#40;Simple Recovery Model&#41;](file-restores-simple-recovery-model.md) and [Piecemeal Restores &#40;SQL Server&#41;](piecemeal-restores-sql-server.md).</span></span>  
  
-   <span data-ttu-id="bd8ab-197">ページ復元は実行できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-197">Page restore is not allowed.</span></span>  
  
-   <span data-ttu-id="bd8ab-198">特定の時点への復元は実行できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-198">Point-in-time restore is not allowed.</span></span>  
  
 <span data-ttu-id="bd8ab-199">これらの制限事項のいずれかが復旧要件に適合しない場合は、完全復旧モデルの使用を検討することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-199">If any of these restrictions are inappropriate for your recovery needs, we recommend that you consider using the full recovery model.</span></span> <span data-ttu-id="bd8ab-200">詳細については、「 [バックアップの概要 &#40;SQL Server&#41;](backup-overview-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-200">For more information, see [Backup Overview &#40;SQL Server&#41;](backup-overview-sql-server.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="bd8ab-201">データベースの復旧モデルにかかわらず、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] バックアップは、バックアップを作成したバージョンより古いバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では復元できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-201">Regardless of the recovery model of a database, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] backup cannot be restored by a version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is older than the version that created the backup.</span></span>  
  
##  <a name="restore-under-the-bulk-logged-recovery-model"></a><a name="RMblogRestore"></a> <span data-ttu-id="bd8ab-202">一括ログ復旧モデルを使用した復元</span><span class="sxs-lookup"><span data-stu-id="bd8ab-202">Restore Under the Bulk-Logged Recovery Model</span></span>  
 <span data-ttu-id="bd8ab-203">このセクションでは、一括ログ復旧モデルを使用した復元の考慮事項について説明します。一括ログ復旧モデルは、完全復旧モデルの補完のみを目的としたモデルです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-203">This section discusses restore considerations that are unique to bulk-logged recovery model, which is intended exclusively as a supplement to the full recovery model.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bd8ab-204">一括ログ復旧モデルの概要については、「[トランザクション ログ &#40;SQL Server&#41;](../logs/the-transaction-log-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-204">For an introduction to the bulk-logged recovery model, see [The Transaction Log &#40;SQL Server&#41;](../logs/the-transaction-log-sql-server.md).</span></span>  
  
 <span data-ttu-id="bd8ab-205">全般的には、一括ログ復旧モデルは完全復旧モデルに似ており、完全復旧モデルで説明されている情報はどちらにも適用されます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-205">Generally, the bulk-logged recovery model is similar to the full recovery model, and the information described for the full recovery model also applies to both.</span></span> <span data-ttu-id="bd8ab-206">ただし、特定の時点への復旧とオンライン復元は、一括ログ復旧モデルの影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-206">However, point-in-time recovery and online restore are affected by the bulk-logged recovery model.</span></span>  
  
### <a name="restrictions-for-point-in-time-recovery"></a><span data-ttu-id="bd8ab-207">特定の時点への復旧に関する制限</span><span class="sxs-lookup"><span data-stu-id="bd8ab-207">Restrictions for Point-in-time Recovery</span></span>  
 <span data-ttu-id="bd8ab-208">一括ログ復旧モデルで作成されたログ バックアップに一括ログ記録された変更が含まれている場合、特定の時点への復旧は実行できません。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-208">If a log backup taken under the bulk-logged recovery model contains bulk-logged changes, point-in-time recovery is not allowed.</span></span> <span data-ttu-id="bd8ab-209">一括変更を含むログ バックアップに対して特定の時点への復旧を実行しようとすると、復元操作が失敗します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-209">Trying to perform point-in-time recovery on a log backup that contains bulk changes will cause the restore operation to fail.</span></span>  
  
### <a name="restrictions-for-online-restore"></a><span data-ttu-id="bd8ab-210">オンライン復元に関する制限</span><span class="sxs-lookup"><span data-stu-id="bd8ab-210">Restrictions for Online Restore</span></span>  
 <span data-ttu-id="bd8ab-211">オンライン復元シーケンスは、次の条件を満たしている場合のみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-211">An online restore sequence works only if the following conditions are met:</span></span>  
  
-   <span data-ttu-id="bd8ab-212">復元シーケンスを開始する前に、必要なログ バックアップがすべて作成されていること。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-212">All required log backups must have been taken before the restore sequence starts.</span></span>  
  
-   <span data-ttu-id="bd8ab-213">オンライン復元シーケンスを開始する前に、一括変更のバックアップが作成されていること。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-213">Bulk changes must be backed before starting the online restore sequence.</span></span>  
  
-   <span data-ttu-id="bd8ab-214">データベースに一括変更が存在する場合、すべてのファイルがオンラインであるか、[機能していない](remove-defunct-filegroups-sql-server.md)こと</span><span class="sxs-lookup"><span data-stu-id="bd8ab-214">If bulk changes exist in the database, all files must be either online or[defunct](remove-defunct-filegroups-sql-server.md).</span></span> <span data-ttu-id="bd8ab-215">(つまり、このデータベースの一部ではなくなっていること)。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-215">(This means that it is no longer part of the database.)</span></span>  
  
 <span data-ttu-id="bd8ab-216">上記の条件を満たしていない場合、オンライン復元シーケンスは失敗します。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-216">If these conditions are not met, the online restore sequence fails.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bd8ab-217">オンライン復元を開始する前に、完全復旧モデルに切り替えることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-217">We recommend switching to the full recovery model before starting an online restore.</span></span> <span data-ttu-id="bd8ab-218">詳細については、「[復旧モデル &#40;SQL Server&#41;](recovery-models-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-218">For more information, see [Recovery Models &#40;SQL Server&#41;](recovery-models-sql-server.md).</span></span>  
  
 <span data-ttu-id="bd8ab-219">オンライン復元の実行方法の詳細については、「[オンライン復元 &#40;SQL Server&#41;](online-restore-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-219">For information about how to perform an online restore, see [Online Restore &#40;SQL Server&#41;](online-restore-sql-server.md).</span></span>  
  
##  <a name="database-recovery-advisor-sql-server-management-studio"></a><a name="DRA"></a> <span data-ttu-id="bd8ab-220">データベース復旧アドバイザー (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="bd8ab-220">Database Recovery Advisor (SQL Server Management Studio)</span></span>  
 <span data-ttu-id="bd8ab-221">データベース復旧アドバイザーにより、最適な復元シーケンスを実装する復元プランを容易に構築できるようになります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-221">The Database Recovery Advisor facilitates constructing restore plans that implement optimal correct restore sequences.</span></span> <span data-ttu-id="bd8ab-222">お客様からご要望のあった、データベース復元に関するさまざまな既知の問題の解決や機能強化が実施されました。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-222">Many known database restore issues and enhancements requested by customers have been addressed.</span></span> <span data-ttu-id="bd8ab-223">データベース復旧アドバイザーによって導入された主な機能強化は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-223">Major enhancements introduced by the Database Recovery Advisor include the following:</span></span>  
  
-   <span data-ttu-id="bd8ab-224">**復元プラン アルゴリズム:** 特に、複雑な復元シナリオの復元プランの構築に使用されるアルゴリズムが大幅に改善されました。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-224">**Restore-plan algorithm:**  The algorithm used to construct restore plans has improved significantly, particularly for complex restore scenarios.</span></span> <span data-ttu-id="bd8ab-225">特定の時点への復元時の分岐シナリオなど、多数のエッジ ケースが以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]よりも効率的に処理されます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-225">Many edge cases, including forking scenarios in point-in-time restores, are handled more efficiently than in previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="bd8ab-226">**特定の時点への復元:** データベース復旧アドバイザーにより、特定の時点へのデータベースの復元が大幅に簡素化されます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-226">**Point-in-time restores:**  The Database Recovery Advisor greatly simplifies restoring a database to a given point in time.</span></span> <span data-ttu-id="bd8ab-227">バックアップの視覚的タイムラインにより、特定の時点への復元のサポートが大幅に強化されています。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-227">A visual backup timeline significantly enhances support for point-in-time restores.</span></span> <span data-ttu-id="bd8ab-228">この視覚的タイムラインにより、データベースを復元する際の目的の復旧ポイントとして適切な時点を特定できます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-228">This visual timeline allows you to identify a feasible point in time as the target recovery point for restoring a database.</span></span> <span data-ttu-id="bd8ab-229">タイムラインにより、分岐した復旧パス (複数の復旧分岐にまたがるパス) をたどることが容易になります。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-229">The timeline facilitates traversing a forked recovery path (a path that spans recovery forks).</span></span> <span data-ttu-id="bd8ab-230">特定の時点への復元プランには、目的の時点 (日時) への復元に関連するバックアップが自動的に含まれます。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-230">A given point-in-time restore plan automatically includes the backups that are relevant to the restoring to your target point in time (date and time).</span></span> <span data-ttu-id="bd8ab-231">詳細については、「[SQL Server データベースを特定の時点に復元する &#40;完全復旧モデル&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-231">For more information, see [Restore a SQL Server Database to a Point in Time &#40;Full Recovery Model&#41;](restore-a-sql-server-database-to-a-point-in-time-full-recovery-model.md).</span></span>  
  
 <span data-ttu-id="bd8ab-232">データベース復旧アドバイザーの詳細については、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Manageability の次のブログを参照してください。</span><span class="sxs-lookup"><span data-stu-id="bd8ab-232">For more information, see about the Database Recovery Advisor, see the following [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Manageability blogs:</span></span>  
  
-   [<span data-ttu-id="bd8ab-233">復旧アドバイザー: 概要</span><span class="sxs-lookup"><span data-stu-id="bd8ab-233">Recovery Advisor: An Introduction</span></span>](https://blogs.msdn.com/b/managingsql/archive/2011/07/13/recovery-advisor-an-introduction.aspx)  
  
-   [<span data-ttu-id="bd8ab-234">復旧アドバイザー: SSMS を使用して分割バックアップを作成/復元する</span><span class="sxs-lookup"><span data-stu-id="bd8ab-234">Recovery Advisor: Using SSMS to create/restore split backups</span></span>](https://docs.microsoft.com/archive/blogs/managingsql/recovery-advisor-using-ssms-to-createrestore-split-backups)  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="bd8ab-235">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="bd8ab-235">Related Content</span></span>  
 <span data-ttu-id="bd8ab-236">[なし] :</span><span class="sxs-lookup"><span data-stu-id="bd8ab-236">None.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bd8ab-237">参照</span><span class="sxs-lookup"><span data-stu-id="bd8ab-237">See Also</span></span>  
 [<span data-ttu-id="bd8ab-238">バックアップの概要 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="bd8ab-238">Backup Overview &#40;SQL Server&#41;</span></span>](backup-overview-sql-server.md)  
  
  
