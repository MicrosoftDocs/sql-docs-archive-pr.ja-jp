---
title: データベースバックアップの復元 (SQL Server Management Studio) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.locatebackupfileazure.f1
- sql12.swb.specifybackup.f1
helpviewer_keywords:
- full backups [SQL Server]
- database restores [SQL Server], full backups
- backing up databases [SQL Server], full backups
- database backups [SQL Server], full backups
- restoring databases [SQL Server], full backups
ms.assetid: 24b3311d-5ce0-4581-9a05-5c7c726c7b21
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 82c3c7191ab686550885ebdc050f5fb1ac818cb9
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87643433"
---
# <a name="restore-a-database-backup-sql-server-management-studio"></a><span data-ttu-id="e3678-102">データベースのバックアップの復元 (SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="e3678-102">Restore a Database Backup (SQL Server Management Studio)</span></span>
  <span data-ttu-id="e3678-103">このトピックでは、データベースの完全バックアップを復元する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e3678-103">This topic explains how to restore a full database backup.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="e3678-104">完全復旧モデルまたは一括ログ復旧モデルを使用する場合は、[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] でデータベースを復旧する前に、ログの末尾と呼ばれるアクティブ トランザクション ログをバックアップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3678-104">Under the full or bulk-logged recovery model, before you can restore a database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], you must back up the active transaction log (known as the tail of the log).</span></span> <span data-ttu-id="e3678-105">詳細については、「[トランザクション ログのバックアップ &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-105">For more information, see [Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md).</span></span> <span data-ttu-id="e3678-106">暗号化されたデータベースを復元するには、データベースの暗号化に使用された証明書または非対称キーにアクセスできることが必要です。</span><span class="sxs-lookup"><span data-stu-id="e3678-106">To restore a database that is encrypted, you must have access to the certificate or asymmetric key that was used to encrypt the database.</span></span> <span data-ttu-id="e3678-107">証明書または非対称キーがないと、データベースは復元できません。</span><span class="sxs-lookup"><span data-stu-id="e3678-107">Without the certificate or asymmetric key, the database cannot be restored.</span></span> <span data-ttu-id="e3678-108">このため、バックアップが必要である間は、データベース暗号化キーの暗号化に使用する証明書を保持しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3678-108">As a result, the certificate that is used to encrypt the database encryption key must be retained as long as the backup is needed.</span></span> <span data-ttu-id="e3678-109">詳細については、「 [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e3678-109">For more information, see [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md).</span></span>  
  
 <span data-ttu-id="e3678-110">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 以降のデータベースを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] に復元すると、データベースが自動的にアップグレードされることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-110">Note that if you restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] or higher database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database is automatically upgraded.</span></span> <span data-ttu-id="e3678-111">通常、データベースは直ちに使用可能になります。</span><span class="sxs-lookup"><span data-stu-id="e3678-111">Typically, the database becomes available immediately.</span></span> <span data-ttu-id="e3678-112">ただし、 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースにフルテキスト インデックスがある場合、アップグレード プロセスでは、 **[フルテキスト アップグレード オプション]** サーバー プロパティの設定に応じて、インポート、リセット、または再構築が行われます。</span><span class="sxs-lookup"><span data-stu-id="e3678-112">However, if a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database has full-text indexes, the upgrade process either imports, resets, or rebuilds them, depending on the setting of the **Full-Text Upgrade Option** server property.</span></span> <span data-ttu-id="e3678-113">アップグレード オプションが **[インポート]** または **[再構築]** に設定されている場合、アップグレード中はフルテキスト インデックスを使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="e3678-113">If the upgrade option is set to **Import** or **Rebuild**, the full-text indexes will be unavailable during the upgrade.</span></span> <span data-ttu-id="e3678-114">インデックスを作成するデータ量によって、インポートには数時間、再構築には最大でその 10 倍の時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="e3678-114">Depending upon the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="e3678-115">なお、アップグレード オプションが **[インポート]** に設定されており、フルテキスト カタログが使用できない場合は、関連付けられたフルテキスト インデックスが再構築されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-115">Note also that when the upgrade option is set to **Import**, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="e3678-116">**フルテキスト アップグレード オプション** プロパティの設定の表示と変更については、「 [サーバー インスタンスでのフルテキスト検索の管理と監視](../search/manage-and-monitor-full-text-search-for-a-server-instance.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-116">For information about viewing or changing the setting of the **Full-Text Upgrade Option** property, see [Manage and Monitor Full-Text Search for a Server Instance](../search/manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
### <a name="to-restore-a-full-database-backup"></a><span data-ttu-id="e3678-117">データベースの完全バックアップを復元するには</span><span class="sxs-lookup"><span data-stu-id="e3678-117">To restore a full database backup</span></span>  
  
1.  <span data-ttu-id="e3678-118">[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]の適切なインスタンスに接続後、オブジェクト エクスプローラーでサーバー名をクリックして、サーバー ツリーを展開します。</span><span class="sxs-lookup"><span data-stu-id="e3678-118">After you connect to the appropriate instance of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], in Object Explorer, click the server name to expand the server tree.</span></span>  
  
2.  <span data-ttu-id="e3678-119">**[データベース]** を展開します。</span><span class="sxs-lookup"><span data-stu-id="e3678-119">Expand **Databases**.</span></span> <span data-ttu-id="e3678-120">復元するデータベースに応じて、ユーザー データベースを選択するか、 **[システム データベース]** を展開してシステム データベースを選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-120">Depending on the database, either select a user database or expand **System Databases**, and then select a system database.</span></span>  
  
3.  <span data-ttu-id="e3678-121">データベースを右クリックし、[**タスク**]、[**復元**] の順にポイントし、[**データベース**] をクリックすると、[**データベースの復元**] ダイアログボックスが開きます。</span><span class="sxs-lookup"><span data-stu-id="e3678-121">Right-click the database, point to **Tasks**, point to **Restore**, and then click **Database**, which opens the **Restore Database** dialog box.</span></span>  
  
4.  <span data-ttu-id="e3678-122">**[全般]** ページの **復元元**のセクションを使用して、復元するバックアップ セットの復元元ファイルと場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="e3678-122">On the **General** page, use the **Source** section to specify the source and location of the backup sets to restore.</span></span> <span data-ttu-id="e3678-123">以下のオプションの 1 つを選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-123">Select one of the following options:</span></span>  
  
    -   <span data-ttu-id="e3678-124">**[データベース]**</span><span class="sxs-lookup"><span data-stu-id="e3678-124">**Database**</span></span>  
  
         <span data-ttu-id="e3678-125">復元するデータベースをドロップダウン リストから選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-125">Select the database to restore from the drop-down list.</span></span> <span data-ttu-id="e3678-126">このリストには、 **msdb** バックアップ履歴に従ってバックアップされたデータベースのみが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e3678-126">The list contains only databases that have been backed up according to the **msdb** backup history.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e3678-127">別のサーバーで作成されたバックアップの場合、復元先のサーバーには指定されたデータベースのバックアップ履歴情報が存在しません。</span><span class="sxs-lookup"><span data-stu-id="e3678-127">If the backup is taken from a different server, the destination server will not have the backup history information for the specified database.</span></span> <span data-ttu-id="e3678-128">この場合、 **[デバイス]** をクリックして、復元するファイルまたはデバイスを手動で指定します。</span><span class="sxs-lookup"><span data-stu-id="e3678-128">In this case, select **Device** to manually specify the file or device to restore.</span></span>  
  
    -   <span data-ttu-id="e3678-129">**[デバイス]**</span><span class="sxs-lookup"><span data-stu-id="e3678-129">**Device**</span></span>  
  
         <span data-ttu-id="e3678-130">参照ボタン ( **[...]** ) をクリックし、 **[バックアップ デバイスの選択]** ダイアログ ボックスを開きます。</span><span class="sxs-lookup"><span data-stu-id="e3678-130">Click the browse (**...**) button to open the **Select backup devices** dialog box.</span></span> <span data-ttu-id="e3678-131">**[バックアップ メディアの種類]** ボックスから、デバイスの種類を 1 つ選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-131">In the **Backup media type** box, select one of the listed device types.</span></span> <span data-ttu-id="e3678-132">**[バックアップ メディア]** ボックスにデバイスを追加するには、 **[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e3678-132">To select one or more devices for the **Backup media** box, click **Add**.</span></span>  
  
         <span data-ttu-id="e3678-133">**[バックアップ メディア]** ボックスに目的のデバイスを追加したら、 **[OK]** をクリックして、 **[全般]** ページに戻ります。</span><span class="sxs-lookup"><span data-stu-id="e3678-133">After you add the devices you want to the **Backup media** list box, click **OK** to return to the **General** page.</span></span>  
  
         <span data-ttu-id="e3678-134">**[ソース: デバイス:データベース]** リスト ボックスで、復元するデータベースの名前を選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-134">In the **Source: Device: Database** list box, select the name of the database which should be restored.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="e3678-135">この一覧は **[デバイス]** を選択した場合にのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-135">This list is only available when **Device** is selected.</span></span> <span data-ttu-id="e3678-136">選択されたデバイスにバックアップを持つデータベースのみが使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="e3678-136">Only databases that have backups on the selected device will be available.</span></span>  
  
         <span data-ttu-id="e3678-137">**バックアップ メディア**</span><span class="sxs-lookup"><span data-stu-id="e3678-137">**Backup media**</span></span>  
         <span data-ttu-id="e3678-138">復元操作に使用するメディア (**ファイル**、**テープ**、 **URL**、または**バックアップデバイス**) を選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-138">Select the medium for the restore operation: **File**, **Tape**, **URL**or **Backup Device**.</span></span> <span data-ttu-id="e3678-139">**[テープ]** オプションは、テープ ドライブがコンピューターにセットされている場合だけ表示されます。また、**[バックアップ デバイス]** オプションは、1 つ以上のバックアップ デバイスが存在する場合だけ表示されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-139">The **Tape** option appears only if a tape drive is mounted on the computer, and the **Backup Device** option appears, only if at least one backup device exists.</span></span>  
  
         <span data-ttu-id="e3678-140">**［バックアップの場所］**</span><span class="sxs-lookup"><span data-stu-id="e3678-140">**Backup location**</span></span>  
         <span data-ttu-id="e3678-141">復元操作で使用するメディアを表示、追加、または削除します。</span><span class="sxs-lookup"><span data-stu-id="e3678-141">View, add, or remove media for the restore operation.</span></span> <span data-ttu-id="e3678-142">この一覧には、最大で 64 個のファイル、テープ、またはバックアップ デバイスを表示できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-142">The list can contain up to 64 files, tapes, or backup devices.</span></span>  
  
         <span data-ttu-id="e3678-143">**[追加]**</span><span class="sxs-lookup"><span data-stu-id="e3678-143">**Add**</span></span>  
         <span data-ttu-id="e3678-144">バックアップデバイスの場所を [**バックアップの場所**] の一覧に追加します。</span><span class="sxs-lookup"><span data-stu-id="e3678-144">Adds the location of a backup device to the **Backup location** list.</span></span> <span data-ttu-id="e3678-145">[**バックアップメディア**] フィールドで選択したメディアの種類に応じて、[**追加**] をクリックすると、次のいずれかのダイアログボックスが開きます。</span><span class="sxs-lookup"><span data-stu-id="e3678-145">Depending on the type of media you select in the **Backup media** field, clicking **Add** opens one of the following dialog boxes.</span></span>  
  
        |<span data-ttu-id="e3678-146">メディアの種類</span><span class="sxs-lookup"><span data-stu-id="e3678-146">Media type</span></span>|<span data-ttu-id="e3678-147">ダイアログ ボックス</span><span class="sxs-lookup"><span data-stu-id="e3678-147">Dialog box</span></span>|<span data-ttu-id="e3678-148">説明</span><span class="sxs-lookup"><span data-stu-id="e3678-148">Description</span></span>|  
        |----------------|----------------|-----------------|  
        |<span data-ttu-id="e3678-149">**[最近使ったファイル]**</span><span class="sxs-lookup"><span data-stu-id="e3678-149">**File**</span></span>|<span data-ttu-id="e3678-150">**[バックアップ ファイルの検索]**</span><span class="sxs-lookup"><span data-stu-id="e3678-150">**Locate Backup File**</span></span>|<span data-ttu-id="e3678-151">このダイアログ ボックスでは、ツリーからローカル ファイルを選択するか、完全修飾の汎用名前付け規則 (UNC) 名を使用したリモート ファイルを指定できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-151">In this dialog box, you can select a local file from the tree or specify a remote file using its fully qualified universal naming convention (UNC) name.</span></span> <span data-ttu-id="e3678-152">詳細については、「 [バックアップ デバイス &#40;SQL Server&#41;](backup-devices-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-152">For more information, see [Backup Devices &#40;SQL Server&#41;](backup-devices-sql-server.md).</span></span>|  
        |<span data-ttu-id="e3678-153">**[デバイス]**</span><span class="sxs-lookup"><span data-stu-id="e3678-153">**Device**</span></span>|<span data-ttu-id="e3678-154">**[バックアップ デバイスの選択]**</span><span class="sxs-lookup"><span data-stu-id="e3678-154">**Select Backup Device**</span></span>|<span data-ttu-id="e3678-155">このダイアログ ボックスでは、サーバー インスタンスで定義された論理バックアップ デバイスの一覧から選択できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-155">In this dialog box, you can select from a list of the logical backup devices defined on the server instance.</span></span>|  
        |<span data-ttu-id="e3678-156">**[テープ]**</span><span class="sxs-lookup"><span data-stu-id="e3678-156">**Tape**</span></span>|<span data-ttu-id="e3678-157">**[バックアップ テープの選択]**</span><span class="sxs-lookup"><span data-stu-id="e3678-157">**Select Backup Tape**</span></span>|<span data-ttu-id="e3678-158">このダイアログ ボックスでは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスが動作しているコンピューターに物理的に接続されているテープ ドライブの一覧から選択できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-158">In this dialog box, you can select from a list of the tape drives that are physically connected to the computer running the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|  
        |<span data-ttu-id="e3678-159">**URL**</span><span class="sxs-lookup"><span data-stu-id="e3678-159">**URL**</span></span>|<span data-ttu-id="e3678-160">これにより、2 つのダイアログ ボックスが次の順序で表示されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-160">This launches two dialog boxes in the following order:</span></span><br /><br /> <span data-ttu-id="e3678-161">1) **Azure Storage に接続する**</span><span class="sxs-lookup"><span data-stu-id="e3678-161">1) **Connect to Azure Storage**</span></span><br /><br /> <span data-ttu-id="e3678-162">2) **Azure でのバックアップファイルの検索**</span><span class="sxs-lookup"><span data-stu-id="e3678-162">2) **Locate Backup File in Azure**</span></span>|<span data-ttu-id="e3678-163">[ **Azure Storage への接続**] ダイアログボックスで、Azure ストレージアカウント名とアクセスキーの情報を格納する既存の sql 資格情報を選択するか、ストレージアカウント名とストレージアクセスキーの情報を指定して新しい sql 資格情報を作成します。</span><span class="sxs-lookup"><span data-stu-id="e3678-163">In the **Connect to Azure Storage**  dialog box, Select an existing SQL Credential that stores the Azure storage account name and access key information, or create new SQL Credential by specifying the storage account name and storage access key information.</span></span> <span data-ttu-id="e3678-164">詳細については、「 [Connect to Azure Storage &#40;Restore&#41;](connect-to-microsoft-azure-storage-restore.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-164">For more information, see [Connect to Azure Storage &#40;Restore&#41;](connect-to-microsoft-azure-storage-restore.md).</span></span><br /><br /> <span data-ttu-id="e3678-165">[**バックアップファイルの検索**] ダイアログボックスで、左側のフレームに表示されているコンテナーの一覧からファイルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-165">In the **Locate Backup File** dialog box, you can select a file from the list of containers displayed on the left frame.</span></span>|  
  
         <span data-ttu-id="e3678-166">一覧がいっぱいの場合は、[**追加**] ボタンを使用できません。</span><span class="sxs-lookup"><span data-stu-id="e3678-166">If the list is full, the **Add** button is unavailable.</span></span>  
  
         <span data-ttu-id="e3678-167">**削除**</span><span class="sxs-lookup"><span data-stu-id="e3678-167">**Remove**</span></span>  
         <span data-ttu-id="e3678-168">選択されている 1 つまたは複数のファイル、テープ、または論理バックアップ デバイスを削除します。</span><span class="sxs-lookup"><span data-stu-id="e3678-168">Removes one or more selected files, tapes, or logical backup devices.</span></span>  
  
         <span data-ttu-id="e3678-169">**Contents**</span><span class="sxs-lookup"><span data-stu-id="e3678-169">**Contents**</span></span>  
         <span data-ttu-id="e3678-170">選択されているファイル、テープ、または論理バックアップ デバイスのメディアの内容を表示します。</span><span class="sxs-lookup"><span data-stu-id="e3678-170">Displays the media contents of a selected file, tape, or logical backup device.</span></span>  
  
5.  <span data-ttu-id="e3678-171">**復元先のセクション**の **[データベース]** ボックスに、復元するデータベースの名前が自動的に表示されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-171">In the **Destination** section, the **Database** box is automatically populated with the name of the database to be restored.</span></span> <span data-ttu-id="e3678-172">データベースの名前を変更するには、 **[データベース]** ボックスに新しい名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="e3678-172">To change the name of the database, enter the new name in the **Database** box.</span></span>  
  
6.  <span data-ttu-id="e3678-173">**[復元先]** ボックスで、既定値の **[最後に作成されたバックアップ]** のままにするか、 **[タイムライン]** をクリックして、 **[バックアップのタイムライン]** ダイアログ ボックスにアクセスし、具体的にどの時点で復旧アクションを停止するかを手動で選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-173">In the **Restore to** box, leave the default as **To the last backup taken** or click on **Timeline** to access the **Backup Timeline** dialog box to manually select a point in time to stop the recovery action.</span></span> <span data-ttu-id="e3678-174">特定の時点を指定する方法の詳細については、「 [バックアップ タイムライン](backup-timeline.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e3678-174">For more information on designating a specific point in time, see [Backup Timeline](backup-timeline.md).</span></span>  
  
7.  <span data-ttu-id="e3678-175">**[復元するバックアップ セット]** グリッドで、復元するバックアップを選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-175">In the **Backup sets to restore** grid, select the backups to restore.</span></span> <span data-ttu-id="e3678-176">このグリッドには、指定された場所に対して使用可能なバックアップが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-176">This grid displays the backups available for the specified location.</span></span> <span data-ttu-id="e3678-177">既定では、復旧計画が推奨されています。</span><span class="sxs-lookup"><span data-stu-id="e3678-177">By default, a recovery plan is suggested.</span></span> <span data-ttu-id="e3678-178">推奨された復元計画を変更するには、グリッドの選択を変更します。</span><span class="sxs-lookup"><span data-stu-id="e3678-178">To override the suggested recovery plan, you can change the selections in the grid.</span></span> <span data-ttu-id="e3678-179">以前のバックアップの選択を解除すると、以前のバックアップの復元に依存するバックアップは自動的に選択が解除されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-179">Backups that depend on the restoration of an earlier backup are automatically deselected when the earlier backup is deselected.</span></span> <span data-ttu-id="e3678-180">**[復元するバックアップ セット]** グリッドの列の詳細については、「[データベースの復元 &#40;[全般] ページ&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-180">For information about the columns in the **Backup sets to restore** grid, see [Restore Database &#40;General Page&#41;](../../integration-services/general-page-of-integration-services-designers-options.md).</span></span>  
  
8.  <span data-ttu-id="e3678-181">必要に応じて、 **[ページの選択]** ペインの **[ファイル]** をクリックして、 **[ファイル]** ダイアログ ボックスにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="e3678-181">Optionally, click **Files** in the **Select a page** pane to access the **Files** dialog box.</span></span> <span data-ttu-id="e3678-182">このダイアログ ボックスでは、 **[次のデータベース ファイルに復元]** グリッド内の各ファイルに新しい復元先を指定することで、新しい場所にデータベースを復元できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-182">From here, you can restore the database to a new location by specifying a new restore destination for each file in the **Restore the database files as** grid.</span></span> <span data-ttu-id="e3678-183">このグリッドの詳細については、「[データベースの復元 &#40;[ファイル] ページ&#41;](restore-database-files-page.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e3678-183">For more information about this grid, see [Restore Database &#40;Files Page&#41;](restore-database-files-page.md).</span></span>  
  
9. <span data-ttu-id="e3678-184">拡張オプションを表示または選択するには、 **[オプション]** ページの **[復元オプション]** パネルを使用します。状況に応じて、次の任意のオプションを選択できます。</span><span class="sxs-lookup"><span data-stu-id="e3678-184">To view or select the advanced options, on the **Options** page, in the **Restore options** panel, you can select any of the following options, if appropriate for your situation:</span></span>  
  
    1.  <span data-ttu-id="e3678-185">`WITH` オプション (必須ではありません):</span><span class="sxs-lookup"><span data-stu-id="e3678-185">`WITH` options (not required):</span></span>  
  
        -   <span data-ttu-id="e3678-186">**[既存のデータベースを上書きする (WITH REPLACE)]**</span><span class="sxs-lookup"><span data-stu-id="e3678-186">**Overwrite the existing database (WITH REPLACE)**</span></span>  
  
        -   <span data-ttu-id="e3678-187">**[レプリケーションの設定を保存する (WITH KEEP_REPLICATION)]**</span><span class="sxs-lookup"><span data-stu-id="e3678-187">**Preserve the replication settings (WITH KEEP_REPLICATION)**</span></span>  
  
        -   <span data-ttu-id="e3678-188">**[復元するデータベースへのアクセスを制限する (WITH RESTRICTED_USER)]**</span><span class="sxs-lookup"><span data-stu-id="e3678-188">**Restrict access to the restored database (WITH RESTRICTED_USER)**</span></span>  
  
    2.  <span data-ttu-id="e3678-189">**[復旧状態]** ボックスのオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-189">Select an option for the **Recovery state** box.</span></span> <span data-ttu-id="e3678-190">このボックスの選択内容により、復元操作後のデータベースの状態が決まります。</span><span class="sxs-lookup"><span data-stu-id="e3678-190">This box determines the state of the database after the restore operation.</span></span>  
  
        -   <span data-ttu-id="e3678-191">**[RESTORE WITH RECOVERY]** : コミットされていないトランザクションをロールバックして、データベースを使用可能な状態にします。これが既定の動作です。</span><span class="sxs-lookup"><span data-stu-id="e3678-191">**RESTORE WITH RECOVERY** is the default behavior which leaves the database ready for use by rolling back the uncommitted transactions.</span></span> <span data-ttu-id="e3678-192">別のトランザクション ログは復元できません。</span><span class="sxs-lookup"><span data-stu-id="e3678-192">Additional transaction logs cannot be restored.</span></span> <span data-ttu-id="e3678-193">このオプションは、必要なバックアップをすべて復元する場合に選択します。</span><span class="sxs-lookup"><span data-stu-id="e3678-193">Select this option if you are restoring all of the necessary backups now.</span></span>  
  
        -   <span data-ttu-id="e3678-194">**[RESTORE WITH NORECOVERY]** : データベースは操作不可状態のままとなり、コミットされていないトランザクションはロールバックされません。</span><span class="sxs-lookup"><span data-stu-id="e3678-194">**RESTORE WITH NORECOVERY** which leaves the database non-operational, and does not roll back the uncommitted transactions.</span></span> <span data-ttu-id="e3678-195">別のトランザクション ログは復元できます</span><span class="sxs-lookup"><span data-stu-id="e3678-195">Additional transaction logs can be restored.</span></span> <span data-ttu-id="e3678-196">データベースは、復旧されるまで使用できません。</span><span class="sxs-lookup"><span data-stu-id="e3678-196">The database cannot be used until it is recovered.</span></span>  
  
        -   <span data-ttu-id="e3678-197">**[RESTORE WITH STANDBY]** : データベースを読み取り専用モードにします。</span><span class="sxs-lookup"><span data-stu-id="e3678-197">**RESTORE WITH STANDBY** which leaves the database in read-only mode.</span></span> <span data-ttu-id="e3678-198">コミットされていないトランザクションは元に戻されますが、復旧結果を元に戻せるように元に戻す操作をスタンバイ ファイルに保存します。</span><span class="sxs-lookup"><span data-stu-id="e3678-198">It undoes uncommitted transactions, but saves the undo actions in a standby file so that recovery effects can be reverted.</span></span>  
  
    3.  <span data-ttu-id="e3678-199">選択した時点まで復元するために必要であれば、**[復元の前にログ末尾のバックアップを実行する]** が選択されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-199">**Take tail-log backup before restore** will be selected if it is necessary for the point in time that you have selected.</span></span> <span data-ttu-id="e3678-200">この設定を変更する必要はありません。ログの末尾をバックアップする必要がない場合でも、そのように選択してかまいません。</span><span class="sxs-lookup"><span data-stu-id="e3678-200">You do not need to modify this setting, but you can choose to backup the tail of the log even if it is not required.</span></span> <span data-ttu-id="e3678-201">ここにファイル名を挿入します。</span><span class="sxs-lookup"><span data-stu-id="e3678-201">filename here?</span></span> <span data-ttu-id="e3678-202">**[全般**] ページの最初のバックアップセットが Azure にある場合、末尾のログも同じストレージコンテナーにバックアップされます。</span><span class="sxs-lookup"><span data-stu-id="e3678-202">If the first backup set in the **General** page is in Azure, the tail log will also be backed up to the same storage container.</span></span>  
  
    4.  <span data-ttu-id="e3678-203">データベースへのアクティブな接続がある場合、復元操作は失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e3678-203">Restore operations may fail if there are active connections to the database.</span></span> <span data-ttu-id="e3678-204">**とデータベース間のすべてのアクティブな接続を閉じるには、** [既存の接続を閉じる] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] オプションをオンにします。</span><span class="sxs-lookup"><span data-stu-id="e3678-204">Check the **Close existing connections option** to ensure that all active connections between [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] and the database are closed.</span></span> <span data-ttu-id="e3678-205">このチェック ボックスをオンにすると、データベースは復元操作の実行前にシングル ユーザー モードに設定され、復元操作の完了後にマルチユーザー モードに設定されます。</span><span class="sxs-lookup"><span data-stu-id="e3678-205">This check box sets the database to single user mode before performing the restore operations, and sets the database to multi-user mode when complete.</span></span>  
  
    5.  <span data-ttu-id="e3678-206">復元操作と復元操作の間に、その都度、確認のメッセージを表示するには、 **[各バックアップを復元する前に確認する]** をオンにします。</span><span class="sxs-lookup"><span data-stu-id="e3678-206">Select **Prompt before restoring each backup** if you wish to be prompted between each restore operation.</span></span> <span data-ttu-id="e3678-207">通常は、その必要はありません。データベースが大きく、復元操作のステータスを監視する必要がある場合にのみ使用します。</span><span class="sxs-lookup"><span data-stu-id="e3678-207">This is not usually necessary unless the database is large and you wish to monitor the status of the restore operation.</span></span>  
  
     <span data-ttu-id="e3678-208">これらの復元オプションの詳細については、「 [[データベースの復元] &#40;[オプション] ページ&#41;](restore-database-options-page.md)と呼ばれる) をバックアップする必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="e3678-208">For more information about these restore options, see [Restore Database &#40;Options Page&#41;](restore-database-options-page.md).</span></span>  
  
10. [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
## <a name="see-also"></a><span data-ttu-id="e3678-209">参照</span><span class="sxs-lookup"><span data-stu-id="e3678-209">See Also</span></span>  
 <span data-ttu-id="e3678-210">[トランザクション ログのバックアップ &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e3678-210">[Back Up a Transaction Log &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md) </span></span>  
 <span data-ttu-id="e3678-211">[データベースの完全バックアップの作成 &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e3678-211">[Create a Full Database Backup &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md) </span></span>  
 <span data-ttu-id="e3678-212">[データベースを新しい場所に復元する &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e3678-212">[Restore a Database to a New Location &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md) </span></span>  
 <span data-ttu-id="e3678-213">[トランザクション ログ バックアップの復元 &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e3678-213">[Restore a Transaction Log Backup &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md) </span></span>  
 <span data-ttu-id="e3678-214">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="e3678-214">[RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql) </span></span>  
 <span data-ttu-id="e3678-215">[[データベースの復元] &#40;[オプション] ページ&#41;](restore-database-options-page.md) </span><span class="sxs-lookup"><span data-stu-id="e3678-215">[Restore Database &#40;Options Page&#41;](restore-database-options-page.md) </span></span>  
 <span data-ttu-id="e3678-216">[[データベースの復元] &#40;[全般] ページ&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)</span><span class="sxs-lookup"><span data-stu-id="e3678-216">[Restore Database &#40;General Page&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)</span></span>  
  
  
