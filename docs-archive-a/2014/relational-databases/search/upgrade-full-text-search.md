---
title: フルテキスト検索のアップグレード | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text search [SQL Server], installing
- migrating full-text indexes [SQL Server]
- upgrading Full-Text Search
- installing Full-Text Search
- full-text search [SQL Server], upgrading
ms.assetid: 2fee4691-f2b5-472f-8ccc-fa625b654520
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: d2bdf0bdee452101bbafb8108426faf6604e7626
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87643221"
---
# <a name="upgrade-full-text-search"></a><span data-ttu-id="f0f1a-102">フルテキスト検索のアップグレード</span><span class="sxs-lookup"><span data-stu-id="f0f1a-102">Upgrade Full-Text Search</span></span>
  <span data-ttu-id="f0f1a-103">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] へのフルテキスト検索のアップグレードは、セットアップ時のほか、以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のデータベース ファイルとフルテキスト カタログのアタッチ時、復元時、またはデータベース コピー ウィザードによるコピー時に行われます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-103">Upgrading full-text search to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is done during setup and when database files and full-text catalogs from the earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] are attached, restored, or copied using the Copy Database Wizard.</span></span>  
  
 <span data-ttu-id="f0f1a-104">このトピックでは、フルテキスト検索のアップグレードに関して、次の点について説明します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-104">This topic discusses the following aspects of upgrading full-text search:</span></span>  
  
-   [<span data-ttu-id="f0f1a-105">サーバー インスタンスのアップグレード</span><span class="sxs-lookup"><span data-stu-id="f0f1a-105">Upgrading a Server Instance</span></span>](#Upgrade_Server)  
  
-   [<span data-ttu-id="f0f1a-106">フルテキストアップグレードオプション</span><span class="sxs-lookup"><span data-stu-id="f0f1a-106">Full-Text Upgrade Options</span></span>](#FT_Upgrade_Options)  
  
-   [<span data-ttu-id="f0f1a-107">フルテキストアップグレードオプションの選択に関する注意点</span><span class="sxs-lookup"><span data-stu-id="f0f1a-107">Considerations for Choosing a Full-Text Upgrade Option</span></span>](#Choosing_Upgade_Option)  
  
-   [<span data-ttu-id="f0f1a-108">データベースを SQL Server 2014 にアップグレードする際のフルテキスト インデックスの移行</span><span class="sxs-lookup"><span data-stu-id="f0f1a-108">Migrating Full-Text Indexes When Upgrading a Database to SQL Server 2014</span></span>](#Upgrade_Db)  
  
-   [<span data-ttu-id="f0f1a-109">SQL Server 2005 のフルテキスト カタログを SQL Server 2014 に復元する際の注意点</span><span class="sxs-lookup"><span data-stu-id="f0f1a-109">Considerations for Restoring a SQL Server 2005 Full-Text Catalog to SQL Server 2014</span></span>](#Considerations_for_Restore)  
  
-   [<span data-ttu-id="f0f1a-110">SQL Server 2005 データベースの SQL Server 2014 へのアタッチ</span><span class="sxs-lookup"><span data-stu-id="f0f1a-110">Attaching a SQL Server 2005 database to SQL Server 2014</span></span>](#Attaching_2005_ft_catalogs)  
  
##  <a name="upgrading-a-server-instance"></a><a name="Upgrade_Server"></a><span data-ttu-id="f0f1a-111">サーバーインスタンスのアップグレード</span><span class="sxs-lookup"><span data-stu-id="f0f1a-111">Upgrading a Server Instance</span></span>  
 <span data-ttu-id="f0f1a-112">インプレース アップグレードでは、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] のインスタンスが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の旧バージョンとサイド バイ サイドでセットアップされ、データが移行されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-112">For an in-place upgrade, an instance of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is set up side-by-side with the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and data is migrated.</span></span> <span data-ttu-id="f0f1a-113">旧バージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] にフルテキスト検索がインストールされている場合、新しいバージョンのフルテキスト検索が自動的にインストールされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-113">If the old version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] had full-text search installed, a new version of full-text search is automatically installed.</span></span> <span data-ttu-id="f0f1a-114">サイド バイ サイド インストールとは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスごとに次のコンポーネントが存在することを意味します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-114">Side-by-side install means that each of the following components exists at the instance-level of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="f0f1a-115">ワード ブレーカー、ステミング機能、フィルター</span><span class="sxs-lookup"><span data-stu-id="f0f1a-115">Word breakers, stemmers, and filters</span></span>  
 <span data-ttu-id="f0f1a-116">各インスタンスは、オペレーティング システムのバージョンと関係なく、固有のワード ブレーカー、ステミング機能、フィルターのセットを使用するようになりました。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-116">Each instance now uses its own set of word breakers, stemmers, and filters, rather than relying on the operating system version of these components.</span></span> <span data-ttu-id="f0f1a-117">これらのコンポーネントは、インスタンス レベルで簡単に登録し、構成できます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-117">These components are also easier to register and configure at a per-instance level.</span></span> <span data-ttu-id="f0f1a-118">詳細については、「 [検索用のワード ブレーカーとステミング機能の構成と管理](configure-and-manage-word-breakers-and-stemmers-for-search.md) 」と「 [検索用フィルターの構成と管理](configure-and-manage-filters-for-search.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-118">For more information, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) and [Configure and Manage Filters for Search](configure-and-manage-filters-for-search.md).</span></span>  
  
 <span data-ttu-id="f0f1a-119">フィルター デーモン ホスト</span><span class="sxs-lookup"><span data-stu-id="f0f1a-119">Filter daemon host</span></span>  
 <span data-ttu-id="f0f1a-120">フルテキスト フィルター デーモン ホストは、インデックスとクエリに使用する外部の拡張コンポーネント (ワード ブレーカー、ステミング機能、フィルターなど) を、Full-Text Engine の整合性を損なわずに安全に読み込み、駆動するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-120">The full-text filter daemon hosts are processes that safely load and drive extensible external components used for index and query, such as word breakers, stemmers, and filters, without compromising the integrity of the Full-Text Engine.</span></span> <span data-ttu-id="f0f1a-121">サーバー インスタンスでは、マルチスレッド フィルターに対してはすべてマルチスレッド処理が使用され、シングル スレッド フィルターに対してはすべてシングル スレッド処理が使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-121">A server instance uses a multithreaded process for all multithreaded filters and a single-threaded process for all single-threaded filters.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] <span data-ttu-id="f0f1a-122">では、FDHOST ランチャー サービス (MSSQLFDLauncher) のサービス アカウントが導入されました。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-122">introduced a service account for the FDHOST Launcher service (MSSQLFDLauncher).</span></span> <span data-ttu-id="f0f1a-123">このサービスにより、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の特定インスタンスのフィルター デーモン ホスト プロセスに対してサービス アカウント情報が反映されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-123">This service propagates the service account information to the filter daemon host processes of a specific instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f0f1a-124">サービス アカウントの設定の詳細については、「 [フルテキスト フィルター デーモン ランチャーのサービス アカウントの設定](set-the-service-account-for-the-full-text-filter-daemon-launcher.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-124">For information about setting the service account, see [Set the Service Account for the Full-text Filter Daemon Launcher](set-the-service-account-for-the-full-text-filter-daemon-launcher.md).</span></span>  
  
 <span data-ttu-id="f0f1a-125">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]では、各フルテキスト インデックスは、ファイル グループに属するフルテキスト カタログに存在し、物理パスを持ち、データベース ファイルとして扱われます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-125">In [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], each full-text index resides in a full-text catalog that belongs to a filegroup, has a physical path, and is treated as a database file.</span></span> <span data-ttu-id="f0f1a-126">[!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 以降のバージョンでは、フルテキスト カタログは、フルテキスト インデックスのグループを含んだ論理的 (仮想) オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-126">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical or virtual object that contains a group of full-text indexes.</span></span> <span data-ttu-id="f0f1a-127">したがって、新しいフルテキスト カタログは、物理パスを持つデータベース ファイルとしては扱われません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-127">Therefore, a new full-text catalog is not treated as a database file with a physical path.</span></span> <span data-ttu-id="f0f1a-128">ただし、データ ファイルを含むフルテキスト カタログのアップグレード時に、新しいファイル グループが同じディスク上に作成されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-128">However, during upgrade of any full-text catalog that contains data files, a new filegroup is created on same disk.</span></span> <span data-ttu-id="f0f1a-129">これにより、アップグレード後も以前のディスク I/O 動作が維持されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-129">This maintains the old disk I/O behavior after upgrade.</span></span> <span data-ttu-id="f0f1a-130">ルート パスが存在する場合、そのカタログのフルテキスト インデックスは、すべて新しいファイル グループに配置されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-130">Any full-text index from that catalog is placed in the new filegroup if the root path exists.</span></span> <span data-ttu-id="f0f1a-131">前のフルテキスト カタログのパスが無効の場合、フルテキスト インデックスは、ベース テーブルと同じファイル グループで保持されるか、パーティション テーブルの場合にはプライマリ ファイル グループで保持されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-131">If the old full-text catalog path is invalid, the upgrade keeps the full-text index in the same filegroup as the base table or, for a partitioned table, in the primary filegroup.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]<span data-ttu-id="f0f1a-132">[!INCLUDE[tsql](../../includes/tsql-md.md)]フルテキストカタログを指定する DDL ステートメントは、引き続き正常に動作します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-132">[!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements that specify full-text catalogs continue to work correctly.</span></span>  
  
##  <a name="full-text-upgrade-options"></a><a name="FT_Upgrade_Options"></a><span data-ttu-id="f0f1a-133">フルテキストアップグレードオプション</span><span class="sxs-lookup"><span data-stu-id="f0f1a-133">Full-Text Upgrade Options</span></span>  
 <span data-ttu-id="f0f1a-134">サーバー インスタンスを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]にアップグレードする場合、次のいずれかのフルテキスト アップグレード オプションをユーザー インターフェイスで選択できます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-134">When upgrading a server instance to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the user interface allows you to choose one of the following full-text upgrade options.</span></span>  
  
 <span data-ttu-id="f0f1a-135">インポート</span><span class="sxs-lookup"><span data-stu-id="f0f1a-135">Import</span></span>  
 <span data-ttu-id="f0f1a-136">フルテキスト カタログがインポートされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-136">Full-text catalogs are imported.</span></span> <span data-ttu-id="f0f1a-137">通常、インポートの方が再構築よりもかなり高速に処理されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-137">Typically, import is significantly faster than rebuild.</span></span> <span data-ttu-id="f0f1a-138">たとえば、CPU を 1 つだけ使用している場合、インポートは、再構築の約 10 倍の速さで実行されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-138">For example, when using only one CPU, import runs about 10 times faster than rebuild.</span></span> <span data-ttu-id="f0f1a-139">ただし、インポートされたフルテキスト カタログでは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の最新バージョンでインストールされる新しいワード ブレーカーが使用されません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-139">However, an imported full-text catalog does not use the new word breakers installed with the latest version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f0f1a-140">クエリ結果の一貫性を維持するためには、フルテキスト カタログを再作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-140">To ensure consistency in query results, full-text catalogs have to be rebuilt.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f0f1a-141">再構築はマルチスレッド モードで実行できます。10 を超える CPU が使用可能な場合に、再構築でそれらの CPU をすべて使用できるようにすると、再構築の方がインポートよりも高速に実行されることがあります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-141">Rebuild can run in multi-threaded mode, and if more than 10 CPUs are available, rebuild might run faster than import if you allow rebuild to use all of the CPUs.</span></span>  
  
 <span data-ttu-id="f0f1a-142">フルテキスト カタログが使用できない場合は、関連付けられたフルテキスト インデックスが再構築されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-142">If a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span> <span data-ttu-id="f0f1a-143">このオプションは [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースでのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-143">This option is available for only [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] databases.</span></span>  
  
 <span data-ttu-id="f0f1a-144">フルテキスト インデックスのインポートによる影響については、後の「フルテキスト アップグレード オプションの選択に関する注意点」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-144">For information about the impact of importing full-text index, see "Considerations for Choosing a Full-Text Upgrade Option," later in this topic.</span></span>  
  
 <span data-ttu-id="f0f1a-145">[再構築]</span><span class="sxs-lookup"><span data-stu-id="f0f1a-145">Rebuild</span></span>  
 <span data-ttu-id="f0f1a-146">フルテキスト カタログは、導入された新しい拡張機能であるワード ブレーカーを使用して再構築されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-146">Full-text catalogs are rebuilt using the new and enhanced word breakers.</span></span> <span data-ttu-id="f0f1a-147">インデックスの再構築には時間がかかり、アップグレード後に膨大な量の CPU とメモリが必要になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-147">Rebuilding indexes can take a while, and a significant amount of CPU and memory might be required after the upgrade.</span></span>  
  
 <span data-ttu-id="f0f1a-148">Reset</span><span class="sxs-lookup"><span data-stu-id="f0f1a-148">Reset</span></span>  
 <span data-ttu-id="f0f1a-149">フルテキスト カタログがリセットされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-149">Full-text catalogs are reset.</span></span> <span data-ttu-id="f0f1a-150">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]からのアップグレード時には、フルテキスト カタログ ファイルは削除されますが、フルテキスト カタログのメタデータおよびフルテキスト インデックスは保持されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-150">When upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], full-text catalog files are removed, but the metadata for full-text catalogs and full-text indexes is retained.</span></span> <span data-ttu-id="f0f1a-151">アップグレード後、すべてのフルテキスト インデックスで変更の追跡は無効化されており、クロールは自動的には開始されません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-151">After being upgraded, all full-text indexes are disabled for change tracking and crawls are not started automatically.</span></span> <span data-ttu-id="f0f1a-152">アップグレードの完了後、手動で完全作成を実行するまで、カタログは空のままになります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-152">The catalog will remain empty until you manually issue a full population, after the upgrade completes.</span></span>  
  
##  <a name="considerations-for-choosing-a-full-text-upgrade-option"></a><a name="Choosing_Upgade_Option"></a><span data-ttu-id="f0f1a-153">フルテキストアップグレードオプションの選択に関する注意点</span><span class="sxs-lookup"><span data-stu-id="f0f1a-153">Considerations for Choosing a Full-Text Upgrade Option</span></span>  
 <span data-ttu-id="f0f1a-154">アップグレードのためにアップグレード オプションを選択する際は、次の点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-154">When choosing the upgrade option for your upgrade, consider the following:</span></span>  
  
-   <span data-ttu-id="f0f1a-155">クエリ結果の一貫性が必要かどうか。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-155">Do you require consistency in query results?</span></span>  
  
     [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] <span data-ttu-id="f0f1a-156">により、フルテキスト検索およびセマンティック検索に使用する新しいワード ブレーカーがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-156">installs new word breakers for use by Full-Text and Semantic Search.</span></span> <span data-ttu-id="f0f1a-157">ワード ブレーカーは、インデックスの作成時とクエリ時の両方に使用されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-157">The word breakers are used both at indexing time and at query time.</span></span> <span data-ttu-id="f0f1a-158">フルテキスト カタログを再構築しない場合は、検索結果の一貫性が失われる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-158">If you do not rebuild the full-text catalogs, your search results may be inconsistent.</span></span> <span data-ttu-id="f0f1a-159">以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のワード ブレーカーと現在のワード ブレーカーで区切りが異なるフレーズを検索するフルテキスト クエリを発行すると、そのフレーズを含むドキュメントまたは行が検索されない場合があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-159">If you issue a full-text query that looks for a phrase that is broken differently by the word breaker in a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and the current word breaker, a document or row containing the phrase might not be retrieved.</span></span> <span data-ttu-id="f0f1a-160">これはインデックスされたフレーズがクエリとは異なるロジックで区切られたためです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-160">This is because the indexed phrases were broken using different logic than the query is using.</span></span> <span data-ttu-id="f0f1a-161">この問題を解決するには、新しいワード ブレーカーを使用してフルテキスト カタログを再作成 (再構築) し、インデックス時とクエリ時の動作が同一になるようにします。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-161">The solution is to repopulate (rebuild) the full-text catalogs with the new word breakers so that index time and query time behavior are identical.</span></span> <span data-ttu-id="f0f1a-162">これは [再構築] オプションを選択することによって実現できます。または、[インポート] オプションを選択した後で、手動で再構築することもできます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-162">You can choose the Rebuild option to accomplish this, or you can rebuild manually after choosing the Import option.</span></span>  
  
-   <span data-ttu-id="f0f1a-163">整数型のフルテキスト キー列に基づいて構築されているフルテキスト インデックスがあるかどうか。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-163">Were any full-text indexes built on integer full-text key columns?</span></span>  
  
     <span data-ttu-id="f0f1a-164">再構築では内部最適化処理が実行されます。これにより、アップグレードされたフルテキスト インデックスのクエリ パフォーマンスが向上することがあります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-164">Rebuilding performs internal optimizations that improve the query performance of the upgraded full-text index in some cases.</span></span> <span data-ttu-id="f0f1a-165">具体的には、ベース テーブルのフルテキスト キー列が整数データ型であるフルテキスト インデックスを含むフルテキスト カタログがある場合、再構築によって、アップグレード後のフルテキスト クエリのパフォーマンスが理想的なものになります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-165">Specifically, if you have full-text catalogs that contain full-text indexes for which the full-text key column of the base table is an integer data type, rebuilding achieves ideal performance of full-text queries after upgrade.</span></span> <span data-ttu-id="f0f1a-166">この場合は、 **[再構築]** オプションを使用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-166">In this case, we highly recommend you to use the **Rebuild** option.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="f0f1a-167">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]のフルテキスト インデックスでは、フルテキスト キーとして機能する列を整数データ型にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-167">For full-text indexes in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], we recommend that the column serving as the full-text key be an integer data type.</span></span> <span data-ttu-id="f0f1a-168">詳細については、「 [フルテキスト インデックスのパフォーマンスの向上](improve-the-performance-of-full-text-indexes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-168">For more information, see [Improve the Performance of Full-Text Indexes](improve-the-performance-of-full-text-indexes.md).</span></span>  
  
-   <span data-ttu-id="f0f1a-169">サーバー インスタンスをオンラインにする場合に何を優先するか。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-169">What is the priority for getting your server instance online?</span></span>  
  
     <span data-ttu-id="f0f1a-170">アップグレード時のインポートまたは再構築では CPU リソースを大量に消費するので、その他のサーバー インスタンスがアップグレードされてオンラインになるのが遅れます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-170">Importing or rebuilding during upgrade takes a lot of CPU resources, which delays getting the rest of the server instance upgraded and online.</span></span> <span data-ttu-id="f0f1a-171">できるだけ早くサーバー インスタンスをオンラインにすることが重要であり、アップグレード後に手動作成を実行してもよい場合は、 **[リセット]** が最適です。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-171">If getting the server instance online as soon as possible is important and if you are willing to run a manual population after the upgrade, **Reset** is suitable.</span></span>  
  
## <a name="ensuring-consistent-query-results-after-importing-a-sql-server-2005-full-text-index"></a><span data-ttu-id="f0f1a-172">SQL Server 2005 フルテキスト インデックスのインポート後にクエリ結果の一貫性を確保する</span><span class="sxs-lookup"><span data-stu-id="f0f1a-172">Ensuring Consistent Query Results after Importing a SQL Server 2005 Full-Text Index</span></span>  
 <span data-ttu-id="f0f1a-173">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースから [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]へのアップグレード時にフルテキスト カタログをインポートした場合、新旧のワード ブレーカーにおける動作の違いから、クエリとフルテキスト インデックスの内容との間に不一致が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-173">If a full-text catalog was imported when upgrading a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], mismatches between the query and the full-text index content might occur because of differences in the behavior of the old and new word breakers.</span></span> <span data-ttu-id="f0f1a-174">この場合、クエリとフルテキスト インデックスの内容を確実に完全一致させるためには、次のいずれかのオプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-174">In this case, to guarantee a total match between queries and the full-text index content, choose one of the following options:</span></span>  
  
-   <span data-ttu-id="f0f1a-175">フルテキスト インデックスを含むフルテキスト カタログを再構築します ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*catalog_name* REBUILD)。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-175">Rebuild the full-text catalog that contains the full-text index ([ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)*catalog_name* REBUILD)</span></span>  
  
-   <span data-ttu-id="f0f1a-176">フルテキスト インデックスに FULL POPULATION を実行します ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *table_name* START FULL POPULATION)。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-176">Issue a FULL POPULATION on the full-text index ([ALTER FULLTEXT INDEX](/sql/t-sql/statements/alter-fulltext-index-transact-sql) ON *table_name* START FULL POPULATION).</span></span>  
  
 <span data-ttu-id="f0f1a-177">ワード ブレーカーの詳細については、「 [検索用のワード ブレーカーとステミング機能の構成と管理](configure-and-manage-word-breakers-and-stemmers-for-search.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-177">For more information about word breakers, see [Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md).</span></span>  
  
## <a name="upgrading-noise-word-files-to-stoplists"></a><span data-ttu-id="f0f1a-178">ノイズ ワード ファイルからストップリストへのアップグレード</span><span class="sxs-lookup"><span data-stu-id="f0f1a-178">Upgrading Noise-Word Files to Stoplists</span></span>  
 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] <span data-ttu-id="f0f1a-179">のノイズ ワードは、[!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 以降のバージョンではストップワードになりました。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-179">noise words have been replaced by stopwords in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions.</span></span> <span data-ttu-id="f0f1a-180">データベースが [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] から [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]にアップグレードされると、ノイズ ワード ファイルは使用されなくなります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-180">When a database is upgraded to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the noise-word files are no longer used.</span></span> <span data-ttu-id="f0f1a-181">ただし、古いノイズ ワード ファイルは FTDATA\ FTNoiseThesaurusBak フォルダーに保存され、後で更新する際、または対応する [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] ストップリストを作成する際に使用できます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-181">However, the old noise-word files are stored in the FTDATA\ FTNoiseThesaurusBak folder, and you can use them later when updating or building the corresponding [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] stoplists.</span></span>  
  
 <span data-ttu-id="f0f1a-182">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]からのアップグレード後</span><span class="sxs-lookup"><span data-stu-id="f0f1a-182">After upgrading from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="f0f1a-183">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]のインストール時のノイズ ワード ファイルを追加、変更、または削除しなかった場合は、システム ストップリストでニーズが満たされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-183">If you never added, modified, or deleted any noise-word files in your installation of [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the system stoplist should meet your needs.</span></span>  
  
-   <span data-ttu-id="f0f1a-184">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]でノイズ ワード ファイルが変更された場合は、アップグレード時にその変更が失われます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-184">If your noise-word files were modified in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], those modifications are lost during upgrade.</span></span> <span data-ttu-id="f0f1a-185">このような更新を再作成するには、対応する [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] のストップリストで、これらの変更を手動で再作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-185">To re-create those updates, you must manually recreate those modifications in the corresponding [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] stoplist.</span></span> <span data-ttu-id="f0f1a-186">詳細については、「[ALTER FULLTEXT STOPLIST &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-186">For more information, see [ALTER FULLTEXT STOPLIST &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-stoplist-transact-sql).</span></span>  
  
-   <span data-ttu-id="f0f1a-187">フルテキスト インデックスにストップワードを適用しない場合 (たとえば、[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] のインストールでノイズ ワード ファイルを削除または消去した場合) は、アップグレードされたフルテキスト インデックスごとに、ストップリストを無効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-187">If you do not want to apply any stopwords to your full-text indexes (for example, if you deleted or erased your noise-word files in your [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] installation), you must turn off the stoplist for each upgraded full-text index.</span></span> <span data-ttu-id="f0f1a-188">次の [!INCLUDE[tsql](../../includes/tsql-md.md)] ステートメントを実行します ( *database* をアップグレードされたデータベースの名前に置き換え、 *table* を *table*の名前に置き換えます)。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-188">Run the following [!INCLUDE[tsql](../../includes/tsql-md.md)] statement (replacing *database* with the name of the upgraded database and *table* with the name of the *table*):</span></span>  
  
    ```  
    Use database;   
    ALTER FULLTEXT INDEX ON table  
       SET STOPLIST OFF;  
    GO  
    ```  
  
     <span data-ttu-id="f0f1a-189">STOPLIST OFF 句は、ストップワードのフィルター処理を削除し、テーブル作成のトリガーとなります。このとき、ノイズと見なされたワードはフィルター処理されません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-189">The STOPLIST OFF clause removes stop-word filtering, and it will trigger a population of the table, without filtering any words considered to be noise.</span></span>  
  
## <a name="backup-and-imported-full-text-catalogs"></a><span data-ttu-id="f0f1a-190">バックアップとインポートされたフルテキスト カタログ</span><span class="sxs-lookup"><span data-stu-id="f0f1a-190">Backup and Imported Full-Text Catalogs</span></span>  
 <span data-ttu-id="f0f1a-191">アップグレード時に再構築またはリセットされたフルテキスト カタログ (および新しいフルテキスト カタログ) は論理的概念であり、ファイル グループ内には存在しません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-191">For full-text catalogs that are rebuilt or reset during upgrade (and for new full-text catalogs), the fulltext catalog is a logical concept and does not reside in a filegroup.</span></span> <span data-ttu-id="f0f1a-192">そのため、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]でフルテキスト カタログをバックアップするには、カタログのフルテキスト インデックスが含まれるファイル グループをすべて特定し、1 つずつバックアップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-192">Therefore, to back up a full-text catalog in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], you must identify every filegroup that contains a full-text index of the catalog and back each of them up, one by one.</span></span> <span data-ttu-id="f0f1a-193">詳細については、「 [フルテキスト カタログとフルテキスト インデックスのバックアップおよび復元](back-up-and-restore-full-text-catalogs-and-indexes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-193">For more information, see [Back Up and Restore Full-Text Catalogs and Indexes](back-up-and-restore-full-text-catalogs-and-indexes.md).</span></span>  
  
 <span data-ttu-id="f0f1a-194">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]からインポートされたフルテキスト カタログは、元のファイル グループ内のデータベース ファイルのままです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-194">For full-text catalogs that have been imported from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)], the full-text catalog is still a database file in its own filegroup.</span></span> <span data-ttu-id="f0f1a-195">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] におけるフルテキスト カタログのバックアップ プロセスが引き続き適用されます。ただし、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]には MSFTESQL サービスが存在しません。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-195">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] backup process for full-text catalogs still applies except that the MSFTESQL service does not exist in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="f0f1a-196">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] におけるプロセスの詳細については、SQL Server 2005 オンライン ブックの「 [フルテキスト カタログのバックアップと復元](https://go.microsoft.com/fwlink/?LinkId=209154) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-196">For information about the [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] process, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=209154) in SQL Server 2005 Books Online.</span></span>  
  
##  <a name="migrating-full-text-indexes-when-upgrading-a-database-to-sscurrent"></a><a name="Upgrade_Db"></a><span data-ttu-id="f0f1a-197">データベースをにアップグレードする際のフルテキストインデックスの移行[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f0f1a-197">Migrating Full-Text Indexes When Upgrading a Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="f0f1a-198">以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のデータベース ファイルおよびフルテキスト カタログは、アタッチ、復元、またはデータベース コピー ウィザードを使用して、既存の [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] サーバー インスタンスにアップグレードできます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-198">Database files and full-text catalogs from a previous version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can be upgraded to an existing [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance by using attach, restore, or the Copy Database Wizard.</span></span> [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] <span data-ttu-id="f0f1a-199">のフルテキスト インデックスがある場合は、インポート、リセット、または再構築されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-199">full-text indexes, if any, are either imported, reset, or rebuilt.</span></span> <span data-ttu-id="f0f1a-200">**upgrade_option** サーバー プロパティは、これらのデータベース アップグレード時にサーバー インスタンスで使用されるフルテキスト アップグレード オプションを制御します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-200">The **upgrade_option** server property controls which full-text upgrade option the server instance uses during these database upgrades.</span></span>  
  
 <span data-ttu-id="f0f1a-201">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] のデータベースを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]にアタッチ、復元、またはコピーした後は、データベースが直ちに使用可能となり、自動的にアップグレードされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-201">After you attach, restore, or copy any [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], the database becomes available immediately and is then automatically upgraded.</span></span> <span data-ttu-id="f0f1a-202">インデックスを作成するデータ量によって、インポートには数時間、再構築には最大でその 10 倍の時間がかかることがあります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-202">Depending the amount of data being indexed, importing can take several hours, and rebuilding can take up to ten times longer.</span></span> <span data-ttu-id="f0f1a-203">なお、アップグレード オプションがインポートに設定されており、フルテキスト カタログが使用できない場合は、関連付けられたフルテキスト インデックスが再構築されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-203">Note also that when the upgrade option is set to import, if a full-text catalog is not available, the associated full-text indexes are rebuilt.</span></span>  
  
 <span data-ttu-id="f0f1a-204">**サーバー インスタンスでフルテキスト アップグレード動作を変更するには**</span><span class="sxs-lookup"><span data-stu-id="f0f1a-204">**To change full-text upgrade behavior on a server instance**</span></span>  
  
-   [!INCLUDE[tsql](../../includes/tsql-md.md)]<span data-ttu-id="f0f1a-205">: [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql) の **upgrade\_option** アクションを使用します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-205">: Use the **upgrade\_option** action of [sp\_fulltext\_service](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql)</span></span>  
  
-   [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="f0f1a-206">**:\*\*\*\*[サーバーのプロパティ]** ダイアログ ボックスの **[フルテキスト アップグレード オプション]** を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-206">**:** Use the **Full-Text Upgrade Option** of the **Server Properties** dialog box.</span></span> <span data-ttu-id="f0f1a-207">詳細については、「 [サーバー インスタンスでのフルテキスト検索の管理と監視](manage-and-monitor-full-text-search-for-a-server-instance.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-207">For more information, see [Manage and Monitor Full-Text Search for a Server Instance](manage-and-monitor-full-text-search-for-a-server-instance.md).</span></span>  
  
##  <a name="considerations-for-restoring-a-ssversion2005-full-text-catalog-to-sscurrent"></a><a name="Considerations_for_Restore"></a><span data-ttu-id="f0f1a-208">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] のフルテキスト カタログを復元する際の注意点: [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f0f1a-208">Considerations for Restoring a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Full-Text Catalog to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="f0f1a-209">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースのフルテキスト データを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] にアップグレードするには、データベースの完全バックアップを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]に復元する方法があります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-209">One method of upgrading fulltext data from a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is to restore a full database backup to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
 <span data-ttu-id="f0f1a-210">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] フルテキスト カタログのインポート中に、データベースとカタログ ファイルをバックアップおよび復元できます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-210">While importing a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalog, you can back up and restore the database and the catalog file.</span></span> <span data-ttu-id="f0f1a-211">次に示すように、動作は [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]と同じです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-211">The behavior is the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]:</span></span>  
  
-   <span data-ttu-id="f0f1a-212">データベースの完全バックアップには、フルテキスト カタログが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-212">The full database backup will include the full-text catalog.</span></span> <span data-ttu-id="f0f1a-213">フルテキスト カタログを参照するには、その [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] ファイル名 sysft_+*catalog-name*を使用します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-213">To refer to the full-text catalog, use its [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] file name, sysft_+*catalog-name*.</span></span>  
  
-   <span data-ttu-id="f0f1a-214">フルテキスト カタログがオフラインの場合、バックアップは失敗します。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-214">If the full-text catalog is offline, the backup will fail.</span></span>  
  
 <span data-ttu-id="f0f1a-215">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]フルテキスト カタログのバックアップと復元の詳細については、 オンライン ブックの「[フルテキスト カタログのバックアップと復元 ](https://go.microsoft.com/fwlink/?LinkId=121052)」および「[ファイルのバックアップと復元およびフルテキスト カタログ](https://go.microsoft.com/fwlink/?LinkId=121053)」[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-215">For more information about backing up and restoring [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] full-text catalogs, see [Backing Up and Restoring Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121052) and [File Backup and Restore and Full-Text Catalogs](https://go.microsoft.com/fwlink/?LinkId=121053)in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="f0f1a-216">データベースを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]に復元すると、フルテキスト カタログ用の新しいデータベース ファイルが作成されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-216">When the database is restored on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], a new database file will be created for the full-text catalog.</span></span> <span data-ttu-id="f0f1a-217">このファイルの既定の名前は、ftrow_*catalog-name*.ndf です。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-217">The default name of this file is ftrow_*catalog-name*.ndf.</span></span> <span data-ttu-id="f0f1a-218">たとえば、 *catalog-name* が `cat1`の場合、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] データベース ファイルの既定の名前は `ftrow_cat1.ndf`となります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-218">For example, if you *catalog-name* is `cat1`, the default name of the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database file would be `ftrow_cat1.ndf`.</span></span> <span data-ttu-id="f0f1a-219">ただし、既定の名前が既にターゲットディレクトリで使用されている場合、新しいデータベースファイルの名前は `ftrow_` *catalog-name* `{` *GUID* `}.ndf` になります。 *guid*は、新しいファイルのグローバル一意識別子です。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-219">But if the default name is already being used in the target directory, the new database file would be named `ftrow_`*catalog-name*`{`*GUID*`}.ndf`, where *GUID* is the Globally Unique Identifier of the new file.</span></span>  
  
 <span data-ttu-id="f0f1a-220">カタログのインポート後、 **sys.database_files** と **sys.master_files**が更新されてカタログ エントリが削除され、 **sys.fulltext_catalogs** の **path** 列が NULL に設定されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-220">After the catalogs have been imported, the **sys.database_files** and **sys.master_file**s are updated to remove the catalog entries and the **path** column in **sys.fulltext_catalogs** is set to NULL.</span></span>  
  
 <span data-ttu-id="f0f1a-221">**データベースをバックアップするには**</span><span class="sxs-lookup"><span data-stu-id="f0f1a-221">**To back up a database**</span></span>  
  
-   [<span data-ttu-id="f0f1a-222">データベースの完全バックアップ &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f0f1a-222">Full Database Backups &#40;SQL Server&#41;</span></span>](../backup-restore/full-database-backups-sql-server.md)  
  
-   <span data-ttu-id="f0f1a-223">[トランザクション ログのバックアップ &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md) (完全復旧モデルのみ)</span><span class="sxs-lookup"><span data-stu-id="f0f1a-223">[Transaction Log Backups &#40;SQL Server&#41;](../backup-restore/transaction-log-backups-sql-server.md) (full recovery model only)</span></span>  
  
 <span data-ttu-id="f0f1a-224">**データベースのバックアップを復元するには**</span><span class="sxs-lookup"><span data-stu-id="f0f1a-224">**To restore a database backup**</span></span>  
  
-   [<span data-ttu-id="f0f1a-225">データベースの全体復元 &#40;単純復旧モデル&#41;</span><span class="sxs-lookup"><span data-stu-id="f0f1a-225">Complete Database Restores &#40;Simple Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-simple-recovery-model.md)  
  
-   [<span data-ttu-id="f0f1a-226">データベースの全体復元 &#40;完全復旧モデル&#41;</span><span class="sxs-lookup"><span data-stu-id="f0f1a-226">Complete Database Restores &#40;Full Recovery Model&#41;</span></span>](../backup-restore/complete-database-restores-full-recovery-model.md)  
  
### <a name="example"></a><span data-ttu-id="f0f1a-227">例</span><span class="sxs-lookup"><span data-stu-id="f0f1a-227">Example</span></span>  
 <span data-ttu-id="f0f1a-228">次の例では、 [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) ステートメントの MOVE 句を使用して、 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] という `ftdb1`データベースを復元する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-228">The following example uses the MOVE clause in the [RESTORE](/sql/t-sql/statements/restore-statements-transact-sql) statement, to restore a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database named `ftdb1`.</span></span> <span data-ttu-id="f0f1a-229">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] のデータベース ファイル、ログ ファイル、およびカタログ ファイルは、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] サーバー インスタンス上の新しい場所に、次のように移動されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-229">The [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, log, and catalog files are moved to new locations on the [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, as follows:</span></span>  
  
-   <span data-ttu-id="f0f1a-230">データベース ファイル `ftdb1.mdf`は `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`に移動されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-230">The database file, `ftdb1.mdf`, is moved to `C:\Program Files\Microsoft SQL Server\MSSQL.1MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf`.</span></span>  
  
-   <span data-ttu-id="f0f1a-231">ログファイルは、 `ftdb1_log.ldf` ログディスクドライブ上のログディレクトリに移動され、log_directory *log_drive* `:\` *log_directory* `\ftdb1_log.ldf` ます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-231">The log file, `ftdb1_log.ldf`, is moved to a log directory on your log disk drive, *log_drive*`:\`*log_directory*`\ftdb1_log.ldf`.</span></span>  
  
-   <span data-ttu-id="f0f1a-232">`sysft_cat90` カタログに対応するカタログ ファイルは、 `C:\temp`に移動されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-232">The catalog files that correspond to the `sysft_cat90` catalog are moved to `C:\temp`.</span></span> <span data-ttu-id="f0f1a-233">フルテキスト インデックスは、インポートされた後、データベース ファイル C:\ftrow_sysft_cat90.ndf 内に自動的に格納されます。C:\temp は削除されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-233">After the full-text indexes are imported, they will automatically be placed in a database file, C:\ftrow_sysft_cat90.ndf, and the C:\temp will be deleted.</span></span>  
  
```  
RESTORE DATABASE [ftdb1] FROM  DISK = N'C:\temp\ftdb1.bak' WITH  FILE = 1,  
   MOVE N'ftdb1' TO N'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\ftdb1.mdf',  
    MOVE N'ftdb1_log' TO N'log_drive:\log_directory\ftdb1_log.ldf',  
    MOVE N'sysft_cat90' TO N'C:\temp';  
```  
  
##  <a name="attaching-a-sql-server-2005-database-to-sscurrent"></a><a name="Attaching_2005_ft_catalogs"></a><span data-ttu-id="f0f1a-234">SQL Server 2005 データベースのへのアタッチ[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f0f1a-234">Attaching a SQL Server 2005 Database to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]</span></span>  
 <span data-ttu-id="f0f1a-235">[!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 以降のバージョンでは、フルテキスト カタログは、フルテキスト インデックスのグループを指す論理的概念です。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-235">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, a full-text catalog is a logical concept that refers to a group of full-text indexes.</span></span> <span data-ttu-id="f0f1a-236">フルテキスト カタログは、ファイル グループに属さない仮想オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-236">The full-text catalog is a virtual object that does not belong to any filegroup.</span></span> <span data-ttu-id="f0f1a-237">しかし、フルテキスト カタログ ファイルを含む [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] サーバー インスタンスにアタッチする場合、カタログ ファイルは [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]と同様に他のデータベース ファイルと一緒に以前の場所からアタッチされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-237">However, when you attach a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database that contains full-text catalog files onto a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] server instance, the catalog files are attached from their previous location along with the other database files, the same as in [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span>  
  
 <span data-ttu-id="f0f1a-238">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] にアタッチされた各フルテキスト カタログの状態は、データベースが [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)]からデタッチされたときと同じです。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-238">The state of each attached full-text catalog on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] is the same as when the database was detached from [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)].</span></span> <span data-ttu-id="f0f1a-239">フルテキスト インデックスの作成がデタッチ操作により中断されていた場合、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]でその作成が再開され、このフルテキスト インデックスがフルテキスト検索に使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-239">If any full-text index population was suspended by the detach operation, the population is resumed on [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], and the full-text index becomes available for full-text search.</span></span>  
  
 <span data-ttu-id="f0f1a-240">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] がフルテキスト カタログ ファイルを見つけられない場合、またはアタッチ操作時に新しい場所を指定せずにフルテキスト ファイルが移動された場合、選択したフルテキスト アップグレード オプションによって動作が異なります。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-240">If [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] cannot find a full-text catalog file or if the full-text file was moved during the attach operation without specifying a new location, the behavior depends on the selected full-text upgrade option.</span></span> <span data-ttu-id="f0f1a-241">フルテキスト アップグレード オプションが **[インポート]** または **[再構築]** の場合、アタッチされたフルテキスト カタログは再構築されます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-241">If the full-text upgrade option is **Import** or **Rebuild**, the attached full-text catalog is rebuilt.</span></span> <span data-ttu-id="f0f1a-242">フルテキスト アップグレード オプションが **[リセット]** の場合、アタッチされたフルテキスト カタログはリセットされます。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-242">If the full-text upgrade option is **Reset**, the attached full-text catalog is reset.</span></span>  
  
 <span data-ttu-id="f0f1a-243">データベースのデタッチとアタッチの詳細については、「[データベースのデタッチとアタッチ &#40;SQL Server&#41;](../databases/database-detach-and-attach-sql-server.md)」、「[CREATE DATABASE &#40;SQL Server Transact-SQL&#41;](/sql/t-sql/statements/create-database-sql-server-transact-sql)」、「[sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)」、「[sp_detach_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f0f1a-243">For more information about detaching and attaching a database, see [Database Detach and Attach &#40;SQL Server&#41;](../databases/database-detach-and-attach-sql-server.md), [CREATE DATABASE &#40;SQL Server Transact-SQL&#41;](/sql/t-sql/statements/create-database-sql-server-transact-sql), [sp_attach_db](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql), and [sp_detach_db &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-detach-db-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f0f1a-244">参照</span><span class="sxs-lookup"><span data-stu-id="f0f1a-244">See Also</span></span>  
 <span data-ttu-id="f0f1a-245">[フルテキスト検索の概要](get-started-with-full-text-search.md) </span><span class="sxs-lookup"><span data-stu-id="f0f1a-245">[Get Started with Full-Text Search](get-started-with-full-text-search.md) </span></span>  
 <span data-ttu-id="f0f1a-246">[検索用のワードブレーカーとステミング機能の構成と管理](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span><span class="sxs-lookup"><span data-stu-id="f0f1a-246">[Configure and Manage Word Breakers and Stemmers for Search](configure-and-manage-word-breakers-and-stemmers-for-search.md) </span></span>  
 [<span data-ttu-id="f0f1a-247">検索用フィルターの構成と管理</span><span class="sxs-lookup"><span data-stu-id="f0f1a-247">Configure and Manage Filters for Search</span></span>](configure-and-manage-filters-for-search.md)  
  
  
