---
title: フルテキスト インデックスの作成と管理 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- full-text indexes [SQL Server], about
ms.assetid: f8a98486-5438-44a8-b454-9e6ecbc74f83
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 603b5e6b929259dc8b1408c0c2a1afab383446e1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87716217"
---
# <a name="create-and-manage-full-text-indexes"></a><span data-ttu-id="55b67-102">フルテキスト インデックスの作成と管理</span><span class="sxs-lookup"><span data-stu-id="55b67-102">Create and Manage Full-Text Indexes</span></span>
  <span data-ttu-id="55b67-103">フルテキスト インデックスの情報は、特定の単語や単語の組み合わせをすばやく検索できるフルテキスト クエリをコンパイルするために Full-Text Engine で使用されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-103">The information in full-text indexes is used by the Full-Text Engine to compile full-text queries that can quickly search a table for particular words or combinations of words.</span></span> <span data-ttu-id="55b67-104">フルテキスト インデックスには、データベース テーブルの 1 つ以上の列の重要な語およびその場所に関する情報が保存されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-104">A full-text index stores information about significant words and their location within one or more columns of a database table.</span></span> <span data-ttu-id="55b67-105">フルテキスト インデックスは、Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]により構築および管理されるトークンベースの特殊な機能インデックスです。</span><span class="sxs-lookup"><span data-stu-id="55b67-105">A full-text index is a special type of token-based functional index that is built and maintained by the Full-Text Engine for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="55b67-106">フルテキスト インデックスの作成手順は、他のタイプのインデックスの作成手順とは異なります。</span><span class="sxs-lookup"><span data-stu-id="55b67-106">The process of building a full-text index differs from building other types of indexes.</span></span> <span data-ttu-id="55b67-107">特定の行に格納された値に基づいて B ツリー構造を作成するのではなく、Full-Text Engine は、インデックスを作成するテキストの個々のトークンに基づいて、反転、スタック、および圧縮されたインデックス構造を作成します。</span><span class="sxs-lookup"><span data-stu-id="55b67-107">Instead of constructing a B-tree structure based on a value stored in a particular row, the Full-Text Engine builds an inverted, stacked, compressed index structure based on individual tokens from the text being indexed.</span></span>  <span data-ttu-id="55b67-108">フルテキスト インデックスのサイズを制限する要因となるのは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスが実行されているコンピューターで使用できるメモリ リソースのみです。</span><span class="sxs-lookup"><span data-stu-id="55b67-108">The size of a full-text index is limited only by the available memory resources of the computer on which the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running.</span></span>  
  
 <span data-ttu-id="55b67-109">[!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)]以降では、フルテキスト インデックスはデータベース エンジンと統合されており、以前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のようにファイル システムには格納されません。</span><span class="sxs-lookup"><span data-stu-id="55b67-109">Beginning in [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)], the full-text indexes are integrated with the Database Engine, instead of residing in the file system as in previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="55b67-110">新しいデータベースでは、フルテキスト カタログは、ファイル グループに属さない仮想オブジェクトです。これは、フルテキスト インデックスのグループを指す論理的概念に過ぎません。</span><span class="sxs-lookup"><span data-stu-id="55b67-110">For a new database, the full-text catalog is now a virtual object that does not belong to any filegroup; it is merely a logical concept that refers to a group of the full-text indexes.</span></span> <span data-ttu-id="55b67-111">ただし、 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースをアップグレードする場合は、データ ファイルを含むフルテキスト カタログの新しいファイル グループが作成されます。詳細については、「 [フルテキスト検索のアップグレード](upgrade-full-text-search.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="55b67-111">Note, however, that during upgrade of a [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] database, any full-text catalog that contains data files, a new filegroup is created; for more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="55b67-112">[!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 以降では、Full-Text Engine は、個別のサービスではなく [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] プロセス内に存在します。</span><span class="sxs-lookup"><span data-stu-id="55b67-112">In [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] and later versions, the Full-Text Engine resides in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process, rather than in a separate service.</span></span> <span data-ttu-id="55b67-113">Full-Text Engine をデータベース エンジンに統合することにより、フルテキストの管理、混合クエリの最適化、および全体的なパフォーマンスが向上しています。</span><span class="sxs-lookup"><span data-stu-id="55b67-113">Integrating the Full-Text Engine into the Database Engine improves full-text manageability, optimization of mixed query, and overall performance.</span></span>  
  
 <span data-ttu-id="55b67-114">1 つのテーブルに対し、1 つのフルテキスト インデックスしか使用できません。</span><span class="sxs-lookup"><span data-stu-id="55b67-114">Only one full-text index is allowed per table.</span></span> <span data-ttu-id="55b67-115">フルテキスト インデックスをテーブルに作成するためには、一意で NULL が許容されない列がそのテーブルに 1 つ必要です。</span><span class="sxs-lookup"><span data-stu-id="55b67-115">For a full-text index to be created on a table, the table must have a single, unique nonnull column.</span></span> <span data-ttu-id="55b67-116">フルテキスト インデックスを作成できるのは、データ型が `char`、`varchar`、`nchar`、`nvarchar`、`text`、`ntext`、`image`、`xml`、`varbinary`、および `varbinary(max)` の列です。これらの列には、フルテキスト検索用のインデックスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="55b67-116">You can build a full-text index on columns of type `char`, `varchar`, `nchar`, `nvarchar`, `text`, `ntext`, `image`, `xml`, `varbinary`, and `varbinary(max)` can be indexed for full-text search.</span></span> <span data-ttu-id="55b67-117">データ型が `varbinary`、`varbinary(max)`、`image`、または `xml` の列にフルテキスト インデックスを作成する場合は、型列を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-117">Creating a full-text index on a column whose data type is  `varbinary`, `varbinary(max)`, `image`, or `xml` requires that you specify a type column.</span></span> <span data-ttu-id="55b67-118">*型列* は、各行のドキュメントのファイル拡張子 (.doc、.pdf、.xls など) を格納するテーブル列です。</span><span class="sxs-lookup"><span data-stu-id="55b67-118">A *type column* is a table column in which you store the file extension (.doc, .pdf, .xls, and so forth) of the document in each row.</span></span>  
  
 <span data-ttu-id="55b67-119">フルテキスト インデックスを作成および保守するプロセスを *作成* ( *クロール*とも呼ばれます) といいます。</span><span class="sxs-lookup"><span data-stu-id="55b67-119">The process of creating and maintaining a full-text index is called a *population* (also known as a *crawl*).</span></span> <span data-ttu-id="55b67-120">フルテキスト インデックスの作成には、完全作成、変更の追跡に基づく作成、およびタイムスタンプに基づく増分作成の 3 種類があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-120">There are three types of full-text index population: full population, change tracking-based population, and incremental timestamp-based population.</span></span> <span data-ttu-id="55b67-121">詳細については、「 [フルテキスト インデックスの作成](populate-full-text-indexes.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="55b67-121">For more information, see [Populate Full-Text Indexes](populate-full-text-indexes.md).</span></span>  
  
##  <a name="common-tasks"></a><a name="tasks"></a><span data-ttu-id="55b67-122">一般的なタスク</span><span class="sxs-lookup"><span data-stu-id="55b67-122">Common Tasks</span></span>  
 <span data-ttu-id="55b67-123">**フルテキストインデックスを作成するには**</span><span class="sxs-lookup"><span data-stu-id="55b67-123">**To create a full-text index**</span></span>  
  
-   [<span data-ttu-id="55b67-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="55b67-124">CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-fulltext-index-transact-sql)  
  
 <span data-ttu-id="55b67-125">**フルテキスト インデックスを変更するには**</span><span class="sxs-lookup"><span data-stu-id="55b67-125">**To alter a full-text index**</span></span>  
  
-   [<span data-ttu-id="55b67-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="55b67-126">ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-fulltext-index-transact-sql)  
  
 <span data-ttu-id="55b67-127">**フルテキスト インデックスを削除するには**</span><span class="sxs-lookup"><span data-stu-id="55b67-127">**To drop a full-text index**</span></span>  
  
-   [<span data-ttu-id="55b67-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="55b67-128">DROP FULLTEXT INDEX &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/drop-fulltext-index-transact-sql)  
  
 [<span data-ttu-id="55b67-129">このトピックの内容</span><span class="sxs-lookup"><span data-stu-id="55b67-129">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-structure"></a><a name="structure"></a><span data-ttu-id="55b67-130">フルテキストインデックスの構造</span><span class="sxs-lookup"><span data-stu-id="55b67-130">Full-Text Index Structure</span></span>  
 <span data-ttu-id="55b67-131">フルテキスト インデックスの構造をよく理解しておくことは、Full-Text Engine の動作を理解するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="55b67-131">A good understanding of the structure of a full-text index will help you understand how the Full-Text Engine works.</span></span> <span data-ttu-id="55b67-132">このトピックでは、 **の** Document [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] テーブルの抜粋をテーブル例として使用します。</span><span class="sxs-lookup"><span data-stu-id="55b67-132">This topic uses the following excerpt of the **Document** table in [!INCLUDE[ssSampleDBCoShort](../../includes/sssampledbcoshort-md.md)] as an example table.</span></span> <span data-ttu-id="55b67-133">この抜粋には、テーブルの 2 つの列 ( **DocumentID** 列および **Title** 列) と 3 つの行のみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="55b67-133">This excerpt shows only two columns, the **DocumentID** column and the **Title** column, and three rows from the table.</span></span>  
  
 <span data-ttu-id="55b67-134">この例では、 **Title** 列に対してフルテキスト インデックスが作成されているものとします。</span><span class="sxs-lookup"><span data-stu-id="55b67-134">For this example, we will assume that a full-text index has been created on the **Title** column.</span></span>  
  
|<span data-ttu-id="55b67-135">DocumentID</span><span class="sxs-lookup"><span data-stu-id="55b67-135">DocumentID</span></span>|<span data-ttu-id="55b67-136">タイトル</span><span class="sxs-lookup"><span data-stu-id="55b67-136">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="55b67-137">1</span><span class="sxs-lookup"><span data-stu-id="55b67-137">1</span></span>|<span data-ttu-id="55b67-138">Crank Arm and Tire Maintenance</span><span class="sxs-lookup"><span data-stu-id="55b67-138">Crank Arm and Tire Maintenance</span></span>|  
|<span data-ttu-id="55b67-139">2</span><span class="sxs-lookup"><span data-stu-id="55b67-139">2</span></span>|<span data-ttu-id="55b67-140">Front Reflector Bracket and Reflector Assembly 3</span><span class="sxs-lookup"><span data-stu-id="55b67-140">Front Reflector Bracket and Reflector Assembly 3</span></span>|  
|<span data-ttu-id="55b67-141">3</span><span class="sxs-lookup"><span data-stu-id="55b67-141">3</span></span>|<span data-ttu-id="55b67-142">Front Reflector Bracket Installation</span><span class="sxs-lookup"><span data-stu-id="55b67-142">Front Reflector Bracket Installation</span></span>|  
  
 <span data-ttu-id="55b67-143">たとえば、次のテーブル (フラグメント 1) は、 **Document** テーブルの **Title** 列に対して作成されたフルテキスト インデックスの内容を示しています。</span><span class="sxs-lookup"><span data-stu-id="55b67-143">For example, the following table, which shows Fragment 1, depicts the contents of the full-text index created on the **Title** column of the **Document** table.</span></span> <span data-ttu-id="55b67-144">フルテキスト インデックスには、この表に示されているより多くの情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="55b67-144">Full-text indexes contain more information than is presented in this table.</span></span> <span data-ttu-id="55b67-145">このテーブルは、フルテキスト インデックスの論理表現であり、例を挙げる目的で紹介しています。</span><span class="sxs-lookup"><span data-stu-id="55b67-145">The table is a logical representation of a full-text index and is provided for demonstration purposes only.</span></span> <span data-ttu-id="55b67-146">行は、ディスクの使用量を最適化するために圧縮形式で格納されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-146">The rows are stored in a compressed format to optimize disk usage.</span></span>  
  
 <span data-ttu-id="55b67-147">データが元のドキュメントとは逆になっていることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="55b67-147">Notice that the data has been inverted from the original documents.</span></span> <span data-ttu-id="55b67-148">これはキーワードがドキュメント ID にマップされているためです。</span><span class="sxs-lookup"><span data-stu-id="55b67-148">Inversion occurs because the keywords are mapped to the document IDs.</span></span> <span data-ttu-id="55b67-149">このため、フルテキスト インデックスは一般に逆インデックスと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="55b67-149">For this reason, a full-text index is often referred to as an inverted index.</span></span>  
  
 <span data-ttu-id="55b67-150">キーワード "and" がフルテキスト インデックスから削除されていることにも注意してください。</span><span class="sxs-lookup"><span data-stu-id="55b67-150">Also notice that the keyword "and" has been removed from the full-text index.</span></span> <span data-ttu-id="55b67-151">これは "and" がストップワードであり、フルテキスト インデックスからストップワードを削除することで、ディスク領域を大幅に節約し、クエリのパフォーマンスを向上させることができるためです。</span><span class="sxs-lookup"><span data-stu-id="55b67-151">This is done because "and" is a stopword, and removing stopwords from a full-text index can lead to substantial savings in disk space thereby improving query performance.</span></span> <span data-ttu-id="55b67-152">ストップワードの詳細については、「 [フルテキスト検索に使用するストップワードとストップリストの構成と管理](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="55b67-152">For more information about stopwords, see [Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md).</span></span>  
  
 <span data-ttu-id="55b67-153">**フラグメント 1**</span><span class="sxs-lookup"><span data-stu-id="55b67-153">**Fragment 1**</span></span>  
  
|<span data-ttu-id="55b67-154">Keyword</span><span class="sxs-lookup"><span data-stu-id="55b67-154">Keyword</span></span>|<span data-ttu-id="55b67-155">ColId</span><span class="sxs-lookup"><span data-stu-id="55b67-155">ColId</span></span>|<span data-ttu-id="55b67-156">DocId</span><span class="sxs-lookup"><span data-stu-id="55b67-156">DocId</span></span>|<span data-ttu-id="55b67-157">個数</span><span class="sxs-lookup"><span data-stu-id="55b67-157">Occurrence</span></span>|  
|-------------|-----------|-----------|----------------|  
|<span data-ttu-id="55b67-158">Crank</span><span class="sxs-lookup"><span data-stu-id="55b67-158">Crank</span></span>|<span data-ttu-id="55b67-159">1</span><span class="sxs-lookup"><span data-stu-id="55b67-159">1</span></span>|<span data-ttu-id="55b67-160">1</span><span class="sxs-lookup"><span data-stu-id="55b67-160">1</span></span>|<span data-ttu-id="55b67-161">1</span><span class="sxs-lookup"><span data-stu-id="55b67-161">1</span></span>|  
|<span data-ttu-id="55b67-162">Arm</span><span class="sxs-lookup"><span data-stu-id="55b67-162">Arm</span></span>|<span data-ttu-id="55b67-163">1</span><span class="sxs-lookup"><span data-stu-id="55b67-163">1</span></span>|<span data-ttu-id="55b67-164">1</span><span class="sxs-lookup"><span data-stu-id="55b67-164">1</span></span>|<span data-ttu-id="55b67-165">2</span><span class="sxs-lookup"><span data-stu-id="55b67-165">2</span></span>|  
|<span data-ttu-id="55b67-166">Tire</span><span class="sxs-lookup"><span data-stu-id="55b67-166">Tire</span></span>|<span data-ttu-id="55b67-167">1</span><span class="sxs-lookup"><span data-stu-id="55b67-167">1</span></span>|<span data-ttu-id="55b67-168">1</span><span class="sxs-lookup"><span data-stu-id="55b67-168">1</span></span>|<span data-ttu-id="55b67-169">4</span><span class="sxs-lookup"><span data-stu-id="55b67-169">4</span></span>|  
|<span data-ttu-id="55b67-170">メンテナンス</span><span class="sxs-lookup"><span data-stu-id="55b67-170">Maintenance</span></span>|<span data-ttu-id="55b67-171">1</span><span class="sxs-lookup"><span data-stu-id="55b67-171">1</span></span>|<span data-ttu-id="55b67-172">1</span><span class="sxs-lookup"><span data-stu-id="55b67-172">1</span></span>|<span data-ttu-id="55b67-173">5</span><span class="sxs-lookup"><span data-stu-id="55b67-173">5</span></span>|  
|<span data-ttu-id="55b67-174">Front</span><span class="sxs-lookup"><span data-stu-id="55b67-174">Front</span></span>|<span data-ttu-id="55b67-175">1</span><span class="sxs-lookup"><span data-stu-id="55b67-175">1</span></span>|<span data-ttu-id="55b67-176">2</span><span class="sxs-lookup"><span data-stu-id="55b67-176">2</span></span>|<span data-ttu-id="55b67-177">1</span><span class="sxs-lookup"><span data-stu-id="55b67-177">1</span></span>|  
|<span data-ttu-id="55b67-178">Front</span><span class="sxs-lookup"><span data-stu-id="55b67-178">Front</span></span>|<span data-ttu-id="55b67-179">1</span><span class="sxs-lookup"><span data-stu-id="55b67-179">1</span></span>|<span data-ttu-id="55b67-180">3</span><span class="sxs-lookup"><span data-stu-id="55b67-180">3</span></span>|<span data-ttu-id="55b67-181">1</span><span class="sxs-lookup"><span data-stu-id="55b67-181">1</span></span>|  
|<span data-ttu-id="55b67-182">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-182">Reflector</span></span>|<span data-ttu-id="55b67-183">1</span><span class="sxs-lookup"><span data-stu-id="55b67-183">1</span></span>|<span data-ttu-id="55b67-184">2</span><span class="sxs-lookup"><span data-stu-id="55b67-184">2</span></span>|<span data-ttu-id="55b67-185">2</span><span class="sxs-lookup"><span data-stu-id="55b67-185">2</span></span>|  
|<span data-ttu-id="55b67-186">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-186">Reflector</span></span>|<span data-ttu-id="55b67-187">1</span><span class="sxs-lookup"><span data-stu-id="55b67-187">1</span></span>|<span data-ttu-id="55b67-188">2</span><span class="sxs-lookup"><span data-stu-id="55b67-188">2</span></span>|<span data-ttu-id="55b67-189">5</span><span class="sxs-lookup"><span data-stu-id="55b67-189">5</span></span>|  
|<span data-ttu-id="55b67-190">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-190">Reflector</span></span>|<span data-ttu-id="55b67-191">1</span><span class="sxs-lookup"><span data-stu-id="55b67-191">1</span></span>|<span data-ttu-id="55b67-192">3</span><span class="sxs-lookup"><span data-stu-id="55b67-192">3</span></span>|<span data-ttu-id="55b67-193">2</span><span class="sxs-lookup"><span data-stu-id="55b67-193">2</span></span>|  
|<span data-ttu-id="55b67-194">Bracket</span><span class="sxs-lookup"><span data-stu-id="55b67-194">Bracket</span></span>|<span data-ttu-id="55b67-195">1</span><span class="sxs-lookup"><span data-stu-id="55b67-195">1</span></span>|<span data-ttu-id="55b67-196">2</span><span class="sxs-lookup"><span data-stu-id="55b67-196">2</span></span>|<span data-ttu-id="55b67-197">3</span><span class="sxs-lookup"><span data-stu-id="55b67-197">3</span></span>|  
|<span data-ttu-id="55b67-198">Bracket</span><span class="sxs-lookup"><span data-stu-id="55b67-198">Bracket</span></span>|<span data-ttu-id="55b67-199">1</span><span class="sxs-lookup"><span data-stu-id="55b67-199">1</span></span>|<span data-ttu-id="55b67-200">3</span><span class="sxs-lookup"><span data-stu-id="55b67-200">3</span></span>|<span data-ttu-id="55b67-201">3</span><span class="sxs-lookup"><span data-stu-id="55b67-201">3</span></span>|  
|<span data-ttu-id="55b67-202">アセンブリ</span><span class="sxs-lookup"><span data-stu-id="55b67-202">Assembly</span></span>|<span data-ttu-id="55b67-203">1</span><span class="sxs-lookup"><span data-stu-id="55b67-203">1</span></span>|<span data-ttu-id="55b67-204">2</span><span class="sxs-lookup"><span data-stu-id="55b67-204">2</span></span>|<span data-ttu-id="55b67-205">6</span><span class="sxs-lookup"><span data-stu-id="55b67-205">6</span></span>|  
|<span data-ttu-id="55b67-206">3</span><span class="sxs-lookup"><span data-stu-id="55b67-206">3</span></span>|<span data-ttu-id="55b67-207">1</span><span class="sxs-lookup"><span data-stu-id="55b67-207">1</span></span>|<span data-ttu-id="55b67-208">2</span><span class="sxs-lookup"><span data-stu-id="55b67-208">2</span></span>|<span data-ttu-id="55b67-209">7</span><span class="sxs-lookup"><span data-stu-id="55b67-209">7</span></span>|  
|<span data-ttu-id="55b67-210">インストール</span><span class="sxs-lookup"><span data-stu-id="55b67-210">Installation</span></span>|<span data-ttu-id="55b67-211">1</span><span class="sxs-lookup"><span data-stu-id="55b67-211">1</span></span>|<span data-ttu-id="55b67-212">3</span><span class="sxs-lookup"><span data-stu-id="55b67-212">3</span></span>|<span data-ttu-id="55b67-213">4</span><span class="sxs-lookup"><span data-stu-id="55b67-213">4</span></span>|  
  
 <span data-ttu-id="55b67-214">**Keyword** 列には、インデックス作成時に抽出された単一のトークン表現が含まれています。</span><span class="sxs-lookup"><span data-stu-id="55b67-214">The **Keyword** column contains a representation of a single token extracted at indexing time.</span></span> <span data-ttu-id="55b67-215">ワード ブレーカーが、トークンの構成要素を決定します。</span><span class="sxs-lookup"><span data-stu-id="55b67-215">Word breakers determine what makes up a token.</span></span>  
  
 <span data-ttu-id="55b67-216">**ColId** 列には、フルテキスト インデックスが作成されている特定の列に対応する値が含まれています。</span><span class="sxs-lookup"><span data-stu-id="55b67-216">The **ColId** column contains a value that corresponds to a particular column that is full-text indexed.</span></span>  
  
 <span data-ttu-id="55b67-217">列には、 `DocId` フルテキストインデックスが作成されたテーブルの特定のフルテキストキー値にマップされる8バイトの整数値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="55b67-217">The `DocId` column contains values for an eight-byte integer that maps to a particular full-text key value in a full-text indexed table.</span></span> <span data-ttu-id="55b67-218">このマッピングは、フルテキスト キーが整数データ型でない場合に必要になります。</span><span class="sxs-lookup"><span data-stu-id="55b67-218">This mapping is necessary when the full-text key is not an integer data type.</span></span> <span data-ttu-id="55b67-219">このような場合、フルテキストキー値と値のマッピング `DocId` は、DocId マッピングテーブルと呼ばれる別のテーブルに保持されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-219">In such cases, mappings between full-text key values and `DocId` values are maintained in a separate table called the DocId Mapping table.</span></span> <span data-ttu-id="55b67-220">これらのマッピングをクエリするには、 [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) システム ストアド プロシージャを使用します。</span><span class="sxs-lookup"><span data-stu-id="55b67-220">To query for these mappings use the [sp_fulltext_keymappings](/sql/relational-databases/system-stored-procedures/sp-fulltext-keymappings-transact-sql) system stored procedure.</span></span> <span data-ttu-id="55b67-221">検索条件を満たすには、上記の表の DocId 値と DocId Mapping テーブルを結合し、クエリ対象のベース テーブルから行を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-221">To satisfy a search condition, DocId values from the above table need to be joined with the DocId Mapping table to retrieve rows from the base table being queried.</span></span> <span data-ttu-id="55b67-222">ベース テーブルのフルテキスト キー値が整数データ型の場合は、その値を DocId として直接使用できるため、マッピングは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="55b67-222">If the full-text key value of the base table is an integer type, the value directly serves as the DocId and no mapping is necessary.</span></span> <span data-ttu-id="55b67-223">したがって、整数データ型のフルテキスト キー値を使用すると、フルテキスト クエリを最適化できます。</span><span class="sxs-lookup"><span data-stu-id="55b67-223">Therefore, using integer full-text key values can help optimize full-text queries.</span></span>  
  
 <span data-ttu-id="55b67-224">**Occurrence** 列には整数値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="55b67-224">The **Occurrence** column contains an integer value.</span></span> <span data-ttu-id="55b67-225">DocId 値ごとに、その DocId 内の特定キーワードの相対的な単語オフセットに対応するオカレンス値の一覧があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-225">For each DocId value, there is a list of occurrence values that correspond to the relative word offsets of the particular keyword within that DocId.</span></span> <span data-ttu-id="55b67-226">オカレンス値は、句または近接検索の判定に役立ちます。たとえば、句には数値の近いオカレンス値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="55b67-226">Occurrence values are useful in determining phrase or proximity matches, for example, phrases have numerically adjacent occurrence values.</span></span> <span data-ttu-id="55b67-227">また、関連性スコアを計算するのにも役立ちます。たとえば、DocId のキーワードのオカレンス数をスコアリングに使用できます。</span><span class="sxs-lookup"><span data-stu-id="55b67-227">They are also useful in computing relevance scores; for example, the number of occurrences of a keyword in a DocId may be used in scoring.</span></span>  
  
 [<span data-ttu-id="55b67-228">このトピックの内容</span><span class="sxs-lookup"><span data-stu-id="55b67-228">In This Topic</span></span>](#top)  
  
##  <a name="full-text-index-fragments"></a><a name="fragments"></a><span data-ttu-id="55b67-229">フルテキストインデックスフラグメント</span><span class="sxs-lookup"><span data-stu-id="55b67-229">Full-Text Index Fragments</span></span>  
 <span data-ttu-id="55b67-230">論理フルテキスト インデックスは、通常、複数の内部テーブルに分割されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-230">The logical full-text index is usually split across multiple internal tables.</span></span> <span data-ttu-id="55b67-231">各内部テーブルは、フルテキスト インデックス フラグメントと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="55b67-231">Each internal table is called a full-text index fragment.</span></span> <span data-ttu-id="55b67-232">これらのフラグメントの一部は、他のフラグメントよりも新しいデータを含んでいることがあります。</span><span class="sxs-lookup"><span data-stu-id="55b67-232">Some of these fragments might contain newer data than others.</span></span> <span data-ttu-id="55b67-233">たとえば、DocId が 3 である次の行をユーザーが更新し、テーブルの変更が自動的に追跡される場合、新しいフラグメントが作成されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-233">For example, if a user updates the following row whose DocId is 3 and the table is auto change-tracked, a new fragment is created.</span></span>  
  
|<span data-ttu-id="55b67-234">DocumentID</span><span class="sxs-lookup"><span data-stu-id="55b67-234">DocumentID</span></span>|<span data-ttu-id="55b67-235">タイトル</span><span class="sxs-lookup"><span data-stu-id="55b67-235">Title</span></span>|  
|----------------|-----------|  
|<span data-ttu-id="55b67-236">3</span><span class="sxs-lookup"><span data-stu-id="55b67-236">3</span></span>|<span data-ttu-id="55b67-237">Rear Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-237">Rear Reflector</span></span>|  
  
 <span data-ttu-id="55b67-238">次に示すフラグメント 2 には、フラグメント 1 より新しい、DocId 3 に関するデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="55b67-238">In the following example, which shows Fragment 2, the fragment contains newer data about DocId 3 compared to Fragment 1.</span></span> <span data-ttu-id="55b67-239">したがって、ユーザーが "Rear Reflector" をクエリした場合、フラグメント 2 に含まれている DocId 3 のデータが使用されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-239">Therefore, when the user queries for "Rear Reflector" the data from Fragment 2 is used for DocId 3.</span></span> <span data-ttu-id="55b67-240">各フラグメントには、 [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) カタログ ビューを使用してクエリできる作成タイムスタンプが付いています。</span><span class="sxs-lookup"><span data-stu-id="55b67-240">Each fragment is marked with a creation timestamp that can be queried by using the [sys.fulltext_index_fragments](/sql/relational-databases/system-catalog-views/sys-fulltext-index-fragments-transact-sql) catalog view.</span></span>  
  
 <span data-ttu-id="55b67-241">**フラグメント 2**</span><span class="sxs-lookup"><span data-stu-id="55b67-241">**Fragment 2**</span></span>  
  
|<span data-ttu-id="55b67-242">Keyword</span><span class="sxs-lookup"><span data-stu-id="55b67-242">Keyword</span></span>|<span data-ttu-id="55b67-243">ColId</span><span class="sxs-lookup"><span data-stu-id="55b67-243">ColId</span></span>|<span data-ttu-id="55b67-244">DocId</span><span class="sxs-lookup"><span data-stu-id="55b67-244">DocId</span></span>|<span data-ttu-id="55b67-245">Occ</span><span class="sxs-lookup"><span data-stu-id="55b67-245">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="55b67-246">Rear</span><span class="sxs-lookup"><span data-stu-id="55b67-246">Rear</span></span>|<span data-ttu-id="55b67-247">1</span><span class="sxs-lookup"><span data-stu-id="55b67-247">1</span></span>|<span data-ttu-id="55b67-248">3</span><span class="sxs-lookup"><span data-stu-id="55b67-248">3</span></span>|<span data-ttu-id="55b67-249">1</span><span class="sxs-lookup"><span data-stu-id="55b67-249">1</span></span>|  
|<span data-ttu-id="55b67-250">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-250">Reflector</span></span>|<span data-ttu-id="55b67-251">1</span><span class="sxs-lookup"><span data-stu-id="55b67-251">1</span></span>|<span data-ttu-id="55b67-252">3</span><span class="sxs-lookup"><span data-stu-id="55b67-252">3</span></span>|<span data-ttu-id="55b67-253">2</span><span class="sxs-lookup"><span data-stu-id="55b67-253">2</span></span>|  
  
 <span data-ttu-id="55b67-254">フラグメント 2 を見ればわかるように、フルテキスト クエリでは、各フラグメントを内部的にクエリし、古いエントリを破棄する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-254">As can be seen from Fragment 2, full-text queries need to query each fragment internally and discard older entries.</span></span> <span data-ttu-id="55b67-255">したがって、非常に多くのフルテキスト インデックス フラグメントがフルテキスト インデックスに含まれている場合、クエリのパフォーマンスが大幅に低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="55b67-255">Therefore, too many full-text index fragments in the full-text index can lead to substantial degradation in query performance.</span></span> <span data-ttu-id="55b67-256">フラグメントの数を減らすには、 [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] ステートメントの REORGANIZE オプションを使用してフルテキスト カタログを再構成します。</span><span class="sxs-lookup"><span data-stu-id="55b67-256">To reduce the number of fragments, reorganize the fulltext catalog by using the REORGANIZE option of the [ALTER FULLTEXT CATALOG](/sql/t-sql/statements/alter-fulltext-catalog-transact-sql)[!INCLUDE[tsql](../../includes/tsql-md.md)] statement.</span></span> <span data-ttu-id="55b67-257">このステートメントは *マスター マージ*を実行します。マスター マージでは、フラグメントが単一のより大きなフラグメントにマージされ、フルテキスト インデックスから古いエントリがすべて削除されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-257">This statement performs a *master merge*, which merges the fragments into a single larger fragment and removes all obsolete entries from the full-text index.</span></span>  
  
 <span data-ttu-id="55b67-258">再構成が完了すると、次の行が例のインデックスに格納されます。</span><span class="sxs-lookup"><span data-stu-id="55b67-258">After being reorganized, the example index would contain the following rows:</span></span>  
  
|<span data-ttu-id="55b67-259">Keyword</span><span class="sxs-lookup"><span data-stu-id="55b67-259">Keyword</span></span>|<span data-ttu-id="55b67-260">ColId</span><span class="sxs-lookup"><span data-stu-id="55b67-260">ColId</span></span>|<span data-ttu-id="55b67-261">DocId</span><span class="sxs-lookup"><span data-stu-id="55b67-261">DocId</span></span>|<span data-ttu-id="55b67-262">Occ</span><span class="sxs-lookup"><span data-stu-id="55b67-262">Occ</span></span>|  
|-------------|-----------|-----------|---------|  
|<span data-ttu-id="55b67-263">Crank</span><span class="sxs-lookup"><span data-stu-id="55b67-263">Crank</span></span>|<span data-ttu-id="55b67-264">1</span><span class="sxs-lookup"><span data-stu-id="55b67-264">1</span></span>|<span data-ttu-id="55b67-265">1</span><span class="sxs-lookup"><span data-stu-id="55b67-265">1</span></span>|<span data-ttu-id="55b67-266">1</span><span class="sxs-lookup"><span data-stu-id="55b67-266">1</span></span>|  
|<span data-ttu-id="55b67-267">Arm</span><span class="sxs-lookup"><span data-stu-id="55b67-267">Arm</span></span>|<span data-ttu-id="55b67-268">1</span><span class="sxs-lookup"><span data-stu-id="55b67-268">1</span></span>|<span data-ttu-id="55b67-269">1</span><span class="sxs-lookup"><span data-stu-id="55b67-269">1</span></span>|<span data-ttu-id="55b67-270">2</span><span class="sxs-lookup"><span data-stu-id="55b67-270">2</span></span>|  
|<span data-ttu-id="55b67-271">Tire</span><span class="sxs-lookup"><span data-stu-id="55b67-271">Tire</span></span>|<span data-ttu-id="55b67-272">1</span><span class="sxs-lookup"><span data-stu-id="55b67-272">1</span></span>|<span data-ttu-id="55b67-273">1</span><span class="sxs-lookup"><span data-stu-id="55b67-273">1</span></span>|<span data-ttu-id="55b67-274">4</span><span class="sxs-lookup"><span data-stu-id="55b67-274">4</span></span>|  
|<span data-ttu-id="55b67-275">メンテナンス</span><span class="sxs-lookup"><span data-stu-id="55b67-275">Maintenance</span></span>|<span data-ttu-id="55b67-276">1</span><span class="sxs-lookup"><span data-stu-id="55b67-276">1</span></span>|<span data-ttu-id="55b67-277">1</span><span class="sxs-lookup"><span data-stu-id="55b67-277">1</span></span>|<span data-ttu-id="55b67-278">5</span><span class="sxs-lookup"><span data-stu-id="55b67-278">5</span></span>|  
|<span data-ttu-id="55b67-279">Front</span><span class="sxs-lookup"><span data-stu-id="55b67-279">Front</span></span>|<span data-ttu-id="55b67-280">1</span><span class="sxs-lookup"><span data-stu-id="55b67-280">1</span></span>|<span data-ttu-id="55b67-281">2</span><span class="sxs-lookup"><span data-stu-id="55b67-281">2</span></span>|<span data-ttu-id="55b67-282">1</span><span class="sxs-lookup"><span data-stu-id="55b67-282">1</span></span>|  
|<span data-ttu-id="55b67-283">Rear</span><span class="sxs-lookup"><span data-stu-id="55b67-283">Rear</span></span>|<span data-ttu-id="55b67-284">1</span><span class="sxs-lookup"><span data-stu-id="55b67-284">1</span></span>|<span data-ttu-id="55b67-285">3</span><span class="sxs-lookup"><span data-stu-id="55b67-285">3</span></span>|<span data-ttu-id="55b67-286">1</span><span class="sxs-lookup"><span data-stu-id="55b67-286">1</span></span>|  
|<span data-ttu-id="55b67-287">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-287">Reflector</span></span>|<span data-ttu-id="55b67-288">1</span><span class="sxs-lookup"><span data-stu-id="55b67-288">1</span></span>|<span data-ttu-id="55b67-289">2</span><span class="sxs-lookup"><span data-stu-id="55b67-289">2</span></span>|<span data-ttu-id="55b67-290">2</span><span class="sxs-lookup"><span data-stu-id="55b67-290">2</span></span>|  
|<span data-ttu-id="55b67-291">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-291">Reflector</span></span>|<span data-ttu-id="55b67-292">1</span><span class="sxs-lookup"><span data-stu-id="55b67-292">1</span></span>|<span data-ttu-id="55b67-293">2</span><span class="sxs-lookup"><span data-stu-id="55b67-293">2</span></span>|<span data-ttu-id="55b67-294">5</span><span class="sxs-lookup"><span data-stu-id="55b67-294">5</span></span>|  
|<span data-ttu-id="55b67-295">Reflector</span><span class="sxs-lookup"><span data-stu-id="55b67-295">Reflector</span></span>|<span data-ttu-id="55b67-296">1</span><span class="sxs-lookup"><span data-stu-id="55b67-296">1</span></span>|<span data-ttu-id="55b67-297">3</span><span class="sxs-lookup"><span data-stu-id="55b67-297">3</span></span>|<span data-ttu-id="55b67-298">2</span><span class="sxs-lookup"><span data-stu-id="55b67-298">2</span></span>|  
|<span data-ttu-id="55b67-299">Bracket</span><span class="sxs-lookup"><span data-stu-id="55b67-299">Bracket</span></span>|<span data-ttu-id="55b67-300">1</span><span class="sxs-lookup"><span data-stu-id="55b67-300">1</span></span>|<span data-ttu-id="55b67-301">2</span><span class="sxs-lookup"><span data-stu-id="55b67-301">2</span></span>|<span data-ttu-id="55b67-302">3</span><span class="sxs-lookup"><span data-stu-id="55b67-302">3</span></span>|  
|<span data-ttu-id="55b67-303">アセンブリ</span><span class="sxs-lookup"><span data-stu-id="55b67-303">Assembly</span></span>|<span data-ttu-id="55b67-304">1</span><span class="sxs-lookup"><span data-stu-id="55b67-304">1</span></span>|<span data-ttu-id="55b67-305">2</span><span class="sxs-lookup"><span data-stu-id="55b67-305">2</span></span>|<span data-ttu-id="55b67-306">6</span><span class="sxs-lookup"><span data-stu-id="55b67-306">6</span></span>|  
|<span data-ttu-id="55b67-307">3</span><span class="sxs-lookup"><span data-stu-id="55b67-307">3</span></span>|<span data-ttu-id="55b67-308">1</span><span class="sxs-lookup"><span data-stu-id="55b67-308">1</span></span>|<span data-ttu-id="55b67-309">2</span><span class="sxs-lookup"><span data-stu-id="55b67-309">2</span></span>|<span data-ttu-id="55b67-310">7</span><span class="sxs-lookup"><span data-stu-id="55b67-310">7</span></span>|  
  
 [<span data-ttu-id="55b67-311">このトピックの内容</span><span class="sxs-lookup"><span data-stu-id="55b67-311">In This Topic</span></span>](#top)  
  
  
