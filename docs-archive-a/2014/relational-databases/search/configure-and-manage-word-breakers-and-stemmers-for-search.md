---
title: 検索用のワード ブレーカーとステマーの構成と管理 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: search
ms.topic: conceptual
helpviewer_keywords:
- languages [full-text search]
- full-text search [SQL Server], stemmers
- linguistic analysis [full-text search]
- full-text indexes [SQL Server], linguistic analysis
- full-text search [SQL Server], word breakers
- default full-text language option
- stemmers [full-text search]
- conjugating verbs [full-text search]
- word breakers [full-text search]
ms.assetid: d4bdd16b-a2db-4101-a946-583d1c674229
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 22cb7371a0215989d2759ddfb2c84f51ba5c3c31
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87743181"
---
# <a name="configure-and-manage-word-breakers-and-stemmers-for-search"></a><span data-ttu-id="bdbf6-102">検索用のワード ブレーカーとステミング機能の構成と管理</span><span class="sxs-lookup"><span data-stu-id="bdbf6-102">Configure and Manage Word Breakers and Stemmers for Search</span></span>
  <span data-ttu-id="bdbf6-103">ワード ブレーカーとステミング機能は、すべてのフルテキスト インデックス データに対して言語分析を実行します。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-103">Word breakers and stemmers perform linguistic analysis on all full-text indexed data.</span></span> <span data-ttu-id="bdbf6-104">言語分析には、単語の境界 (単語の区切り) の検索と動詞の活用 (ステミング) が含まれます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-104">Linguistic analysis involves finding word boundaries (word-breaking) and conjugating verbs (stemming).</span></span> <span data-ttu-id="bdbf6-105">ワード ブレーカーとステミング機能は言語に固有のものであり、言語分析の規則は言語によって異なります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-105">Word breakers and stemmers are language specific, and the rules for linguistic analysis differ for different languages.</span></span> <span data-ttu-id="bdbf6-106">特定の言語において、 *ワード ブレーカー* によって、言語の語彙の規則に基づいて単語の境界を検出し、個々の単語を識別します。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-106">For a given language, a *word breaker* identifies individual words by determining where word boundaries exist based on the lexical rules of the language.</span></span> <span data-ttu-id="bdbf6-107">各単語 ( *トークン*ともいいます) は、サイズを縮小するために圧縮された表現でフルテキスト インデックスに挿入されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-107">Each word (also known as a *token*) is inserted into the full-text index using a compressed representation to reduce its size.</span></span> <span data-ttu-id="bdbf6-108">*ステミング機能* はその言語の規則に基づいて特定の語の変化形を生成します (たとえば、"running"、"ran"、"runner" は、"run" という語の変化形です)。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-108">The *stemmer* generates inflectional forms of a particular word based on the rules of that language (for example, "running", "ran", and "runner" are various forms of the word "run").</span></span>  
  
 <span data-ttu-id="bdbf6-109">言語固有のワード ブレーカーを使用すると、その言語に対する検索結果の精度が高くなります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-109">Using language-specific word breakers enables the resulting terms to be more accurate for that language.</span></span> <span data-ttu-id="bdbf6-110">言語ファミリにはワード ブレーカーが存在していても、特定のサブ言語は対象とされない場合は、主言語が使用されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-110">Where there is a word breaker for the language family, but not for the specific sub-language, the major language is used.</span></span> <span data-ttu-id="bdbf6-111">たとえば、カナダ系フランス語テキストの処理には、フランス語のワード ブレーカーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-111">For example, the French word breaker is used to handle text that is French Canadian.</span></span> <span data-ttu-id="bdbf6-112">特定の言語用のワード ブレーカーが使用できない場合は、ニュートラル ワード ブレーカーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-112">If no word breaker is available for a particular language, the neutral word breaker is used.</span></span> <span data-ttu-id="bdbf6-113">ニュートラル ワード ブレーカーを使用すると、単語は空白や句読点などのニュートラル文字で分割されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-113">With the neutral word breaker, words are broken at neutral characters such as spaces and punctuation marks.</span></span>  
  
##  <a name="registering-word-breakers"></a><a name="register"></a><span data-ttu-id="bdbf6-114">ワードブレーカーの登録</span><span class="sxs-lookup"><span data-stu-id="bdbf6-114">Registering Word Breakers</span></span>  
 <span data-ttu-id="bdbf6-115">言語のワード ブレーカーを使用する場合は、そのワード ブレーカーを登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-115">For the word breakers of a language to be used, they must be registered.</span></span> <span data-ttu-id="bdbf6-116">登録されているワードブレーカーでは、関連する言語リソース (ステミング機能、ノイズワード (ストップワード)、類義語辞典ファイル) もフルテキストインデックス作成およびクエリ操作で使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-116">For registered word breakers, associated linguistic resources-stemmers, noise words (stopwords), and thesaurus files-also become available to full-text indexing and querying operations.</span></span> <span data-ttu-id="bdbf6-117">現在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]にワード ブレーカーが登録されている言語の一覧を表示するには、次の [!INCLUDE[tsql](../../includes/tsql-md.md)] ステートメントを使用します。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-117">To view a list of the languages whose word breakers are currently registered with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], use the following [!INCLUDE[tsql](../../includes/tsql-md.md)] statement:</span></span>  
  
 <span data-ttu-id="bdbf6-118">SELECT \* FROM sys.fulltext_languages</span><span class="sxs-lookup"><span data-stu-id="bdbf6-118">SELECT \* FROM sys.fulltext_languages</span></span>  
  
 <span data-ttu-id="bdbf6-119">ワード ブレーカーを追加、削除、または変更すると、フルテキスト インデックスおよびフルテキスト クエリでサポートされている Microsoft Windows のロケール識別子 (LCID) の一覧を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-119">If you add, remove, or alter a word breaker, you need to refresh the list of Microsoft Windows locale identifiers (LCIDs) that are supported for full-text indexing and querying.</span></span> <span data-ttu-id="bdbf6-120">詳細については、「 [登録済みのフィルターおよびワード ブレーカーの表示または変更](view-or-change-registered-filters-and-word-breakers.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-120">For more information, see [View or Change Registered Filters and Word Breakers](view-or-change-registered-filters-and-word-breakers.md).</span></span>  
  
##  <a name="setting-the-default-full-text-language-option"></a><a name="default"></a><span data-ttu-id="bdbf6-121">[既定のフルテキスト言語] オプションの設定</span><span class="sxs-lookup"><span data-stu-id="bdbf6-121">Setting the Default Full-Text Language Option</span></span>  
 <span data-ttu-id="bdbf6-122">のローカライズ版では [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 適切な一致が存在する場合、セットアップによって `default full-text language` オプションがサーバーの言語に設定されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-122">For a localized version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Setup sets the `default full-text language` option to the language of the server if an appropriate match exists.</span></span> <span data-ttu-id="bdbf6-123">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のローカライズされていないバージョンでは、`default full-text language` オプションは英語になります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-123">For a non-localized version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the `default full-text language` option is English.</span></span>  
  
 <span data-ttu-id="bdbf6-124">フルテキスト インデックスを作成または変更する際には、フルテキスト インデックス列ごとに言語を指定できます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-124">When creating or altering a full-text index, you can specify a different language for each full-text indexed column.</span></span> <span data-ttu-id="bdbf6-125">列に言語が指定されていない場合、既定では構成オプション `default full-text language` の値になります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-125">If no language is specified for a column, the default is the value of the configuration option `default full-text language`.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="bdbf6-126">1 つのフルテキスト クエリ関数句に指定されるすべての列は、クエリで LANGUAGE オプションが指定されていない限り、同じ言語を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-126">All columns listed in a single full-text query function clause must use the same language, unless the LANGUAGE option is specified in the query.</span></span> <span data-ttu-id="bdbf6-127">クエリ対象のフルテキスト インデックスが付けられた列に使用する言語によって、フルテキスト クエリの述語 ([CONTAINS](/sql/t-sql/queries/contains-transact-sql) および [FREETEXT](/sql/t-sql/queries/freetext-transact-sql)) および関数 ([CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) および [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql)) の引数に対して実行される言語分析が決まります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-127">The language used for the full-text indexed column being queried determines the linguistic analysis performed on arguments of the full-text query predicates ([CONTAINS](/sql/t-sql/queries/contains-transact-sql) and [FREETEXT](/sql/t-sql/queries/freetext-transact-sql)) and functions ([CONTAINSTABLE](/sql/relational-databases/system-functions/containstable-transact-sql) and [FREETEXTTABLE](/sql/relational-databases/system-functions/freetexttable-transact-sql)).</span></span>  
  
##  <a name="choosing-the-language-for-an-indexed-column"></a><a name="lang"></a><span data-ttu-id="bdbf6-128">インデックス付き列の言語の選択</span><span class="sxs-lookup"><span data-stu-id="bdbf6-128">Choosing the Language for an Indexed Column</span></span>  
 <span data-ttu-id="bdbf6-129">フルテキスト インデックスを作成する際には、各インデックス列に対して言語を指定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-129">When creating a full-text index, we recommend that you specify a language for each indexed column.</span></span> <span data-ttu-id="bdbf6-130">列に言語が指定されていない場合、システムの既定の言語が使用されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-130">If a language is not specified for a column, the system default language is used.</span></span> <span data-ttu-id="bdbf6-131">列のインデックス作成に使用されるワード ブレーカーとステミング機能は、列の言語によって決まります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-131">The language of a column determines which word breaker and stemmer are used for indexing that column.</span></span> <span data-ttu-id="bdbf6-132">また、指定した言語の類義語辞典ファイルが、列のフルテキスト クエリで使用されます。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-132">Also, the thesaurus file of that language will be used by full-text queries on the column.</span></span>  
  
 <span data-ttu-id="bdbf6-133">フルテキスト インデックスの作成時に列の言語を選択する際には、注意点が 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-133">There are a couple of things to consider when choosing the column language for creating a full-text index.</span></span> <span data-ttu-id="bdbf6-134">これらの注意点は、テキストをトークン化する方法と、Full-Text Engine によるインデックス作成の方法にかかわるものです。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-134">These considerations relate to how your text is tokenized and then indexed by Full-Text Engine.</span></span> <span data-ttu-id="bdbf6-135">詳細については、「 [フルテキスト インデックス作成時の言語の選択](choose-a-language-when-creating-a-full-text-index.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-135">For more information, see [Choose a Language When Creating a Full-Text Index](choose-a-language-when-creating-a-full-text-index.md).</span></span>  
  
 <span data-ttu-id="bdbf6-136">**列のワード ブレーカーの言語を表示するには**</span><span class="sxs-lookup"><span data-stu-id="bdbf6-136">**To view the word breaker language of a column**</span></span>  
  
-   [<span data-ttu-id="bdbf6-137">フルテキスト インデックスの管理</span><span class="sxs-lookup"><span data-stu-id="bdbf6-137">Manage Full-Text Indexes</span></span>](../indexes/indexes.md)  
  
-   [<span data-ttu-id="bdbf6-138">sys.fulltext_index_columns &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="bdbf6-138">sys.fulltext_index_columns &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-fulltext-index-columns-transact-sql)  
  
    ```  
    SELECT 'language_id' AS "LCID" FROM sys.fulltext_index_columns;  
    ```  
  
##  <a name="obtaining-information-about-word-breakers"></a><a name="info"></a><span data-ttu-id="bdbf6-139">ワードブレーカーに関する情報の取得</span><span class="sxs-lookup"><span data-stu-id="bdbf6-139">Obtaining Information about Word Breakers</span></span>  
 <span data-ttu-id="bdbf6-140">**ワードブレーカー、類義語辞典、およびストップリストの組み合わせによるトークン化の結果の表示**</span><span class="sxs-lookup"><span data-stu-id="bdbf6-140">**Viewing the tokenization result of a word breaker, thesaurus, and stoplist combination**</span></span>  
  
-   <span data-ttu-id="bdbf6-141">[sys.dm_fts_parser &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-parser-transact-sql)</span><span class="sxs-lookup"><span data-stu-id="bdbf6-141">[sys.dm_fts_parser &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-fts-parser-transact-sql).</span></span>  
  
 <span data-ttu-id="bdbf6-142">**登録されているワード ブレーカーに関する情報を返すには**</span><span class="sxs-lookup"><span data-stu-id="bdbf6-142">**To return information about the registered word breakers**</span></span>  
  
-   [<span data-ttu-id="bdbf6-143">sp_help_fulltext_system_components &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="bdbf6-143">sp_help_fulltext_system_components &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-fulltext-system-components-transact-sql)  
  
##  <a name="troubleshooting-word-breaking-time-out-errors"></a><a name="tshoot"></a><span data-ttu-id="bdbf6-144">単語区切りのタイムアウトエラーのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="bdbf6-144">Troubleshooting Word-Breaking Time-out Errors</span></span>  
 <span data-ttu-id="bdbf6-145">単語区切りのタイムアウト エラーは、さまざまな状況で発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-145">A word-breaking time-out error might occur in a variety of situations.</span></span> <span data-ttu-id="bdbf6-146">エラーが発生する状況とその対処方法については、「 [MSSQLSERVER_30053](../errors-events/mssqlserver-30053-database-engine-error.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-146">For information about these situations and how to respond in each situation, see [MSSQLSERVER_30053](../errors-events/mssqlserver-30053-database-engine-error.md).</span></span>  
  
##  <a name="understanding-the-impact-of-new-word-breakers"></a><a name="impact"></a><span data-ttu-id="bdbf6-147">新しいワードブレーカーの影響について</span><span class="sxs-lookup"><span data-stu-id="bdbf6-147">Understanding the Impact of New Word Breakers</span></span>  
 <span data-ttu-id="bdbf6-148">各バージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では、通常、新しいワード ブレーカーが含まれています。これらのワード ブレーカーでは、言語の規則が改良されているため、以前のワード ブレーカーよりも精度が向上しています。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-148">Each version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] typically includes new word breakers that have better linguistic rules and are more accurate than earlier word breakers.</span></span> <span data-ttu-id="bdbf6-149">新しいワード ブレーカーは、前のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]からインポートされたフルテキスト インデックスのワード ブレーカーとは少し動作が異なる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-149">Potentially, the new word breakers might behave slightly differently from the word breakers in full-text indexes that were imported from previous versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="bdbf6-150">データベースが現在のバージョンの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]にアップグレードされたときにフルテキスト カタログをインポートした場合は、この動作の違いが重要になります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-150">This is significant if a full-text catalog was imported when a database was upgraded to the current version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="bdbf6-151">フルテキスト カタログのフルテキスト インデックスで使用される 1 つまたは複数の言語が、新しいワード ブレーカーに関連付けられる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-151">One or more languages used by the full-text indexes in the full-text catalog might now be associated with new word breakers.</span></span> <span data-ttu-id="bdbf6-152">詳細については、「 [フルテキスト検索のアップグレード](upgrade-full-text-search.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-152">For more information, see [Upgrade Full-Text Search](upgrade-full-text-search.md).</span></span>  
  
 <span data-ttu-id="bdbf6-153">すべてのワードブレーカーの完全な一覧については、「 [sys. fulltext_languages &#40;transact-sql&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bdbf6-153">For a complete list of all the word breakers, see [sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bdbf6-154">参照</span><span class="sxs-lookup"><span data-stu-id="bdbf6-154">See Also</span></span>  
 <span data-ttu-id="bdbf6-155">[ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bdbf6-155">[ALTER FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-fulltext-index-transact-sql) </span></span>  
 <span data-ttu-id="bdbf6-156">[CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-fulltext-index-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bdbf6-156">[CREATE FULLTEXT INDEX &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-fulltext-index-transact-sql) </span></span>  
 <span data-ttu-id="bdbf6-157">[sp_fulltext_service &#40;Transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bdbf6-157">[sp_fulltext_service &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-fulltext-service-transact-sql) </span></span>  
 <span data-ttu-id="bdbf6-158">[sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="bdbf6-158">[sys.fulltext_languages &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-fulltext-languages-transact-sql) </span></span>  
 <span data-ttu-id="bdbf6-159">[フルテキスト検索のためのストップワードとストップリストの構成と管理](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md) </span><span class="sxs-lookup"><span data-stu-id="bdbf6-159">[Configure and Manage Stopwords and Stoplists for Full-Text Search](configure-and-manage-stopwords-and-stoplists-for-full-text-search.md) </span></span>  
 [<span data-ttu-id="bdbf6-160">フルテキスト検索のアップグレード</span><span class="sxs-lookup"><span data-stu-id="bdbf6-160">Upgrade Full-Text Search</span></span>](upgrade-full-text-search.md)  
  
  
