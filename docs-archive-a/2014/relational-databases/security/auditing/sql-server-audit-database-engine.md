---
title: SQL Server Audit (データベース エンジン) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
f1_keywords:
- audit
helpviewer_keywords:
- SQL Server Audit
- audits [SQL Server], SQL Server Audit
ms.assetid: 0c1fca2e-f22b-4fe8-806f-c87806664f00
author: VanMSFT
ms.author: vanto
ms.openlocfilehash: 2f4f291e5dc4aaa8a240757713cc65bd2a6a8230
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87633030"
---
# <a name="sql-server-audit-database-engine"></a><span data-ttu-id="a626f-102">SQL Server Audit (データベース エンジン)</span><span class="sxs-lookup"><span data-stu-id="a626f-102">SQL Server Audit (Database Engine)</span></span>
  <span data-ttu-id="a626f-103">[!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] のインスタンスや個々のデータベースの *監査* を行うためには、 [!INCLUDE[ssDE](../../../includes/ssde-md.md)]で発生するイベントの追跡およびログ記録が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-103">*Auditing* an instance of the [!INCLUDE[ssDEnoversion](../../../includes/ssdenoversion-md.md)] or an individual database involves tracking and logging events that occur on the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="a626f-104">監査では、サーバー レベルのイベントのためのサーバー監査仕様とデータベース レベルのイベントのためのデータベース監査仕様を含めることができる、サーバー監査を作成できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-104">audit lets you create server audits, which can contain server audit specifications for server level events, and database audit specifications for database level events.</span></span> <span data-ttu-id="a626f-105">監査イベントは、イベント ログまたは監査ファイルへ書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-105">Audited events can be written to the event logs or to audit files.</span></span>  
  
 <span data-ttu-id="a626f-106">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]では、個々のインストール環境についての政府や標準による要件に応じて、複数のレベルの監査を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-106">There are several levels of auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], depending on government or standards requirements for your installation.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="a626f-107">監査には、サーバーおよびデータベースのさまざまなオブジェクトの監査を有効化、保存、および表示するためのツールとプロセスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="a626f-107">Audit provides the tools and processes you must have to enable, store, and view audits on various server and database objects.</span></span>  
  
 <span data-ttu-id="a626f-108">サーバー監査アクション グループをインスタンスごとに、データベース監査アクション グループまたはデータベース監査アクションをデータベースごとに、それぞれ記録できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-108">You can record server audit action groups per-instance, and either database audit action groups or database audit actions per database.</span></span> <span data-ttu-id="a626f-109">監査可能なアクションが検出されるたびに監査イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="a626f-109">The audit event will occur every time that the auditable action is encountered.</span></span>  
  
 <span data-ttu-id="a626f-110">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のすべてのエディションでサーバー レベルの監査がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="a626f-110">All editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support server level audits.</span></span> <span data-ttu-id="a626f-111">データベース レベルの監査は、Enterprise、Developer、および Evaluation Edition に限定されています。</span><span class="sxs-lookup"><span data-stu-id="a626f-111">Database level auditing is limited to Enterprise, Developer, and Evaluation editions.</span></span> <span data-ttu-id="a626f-112">詳しくは「 [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a626f-112">For more information, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
## <a name="sql-server-audit-components"></a><span data-ttu-id="a626f-113">SQL Server 監査のコンポーネント</span><span class="sxs-lookup"><span data-stu-id="a626f-113">SQL Server Audit Components</span></span>  
 <span data-ttu-id="a626f-114">*監査* では、複数の要素が、サーバー アクションやデータベース アクションの特定のグループのための 1 つのパッケージに組み合わされています。</span><span class="sxs-lookup"><span data-stu-id="a626f-114">An *audit* is the combination of several elements into a single package for a specific group of server actions or database actions.</span></span> <span data-ttu-id="a626f-115">レポート定義がグラフィックやデータ要素と組み合わされてレポートが生成されるように、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査の複数のコンポーネントが組み合わされて、監査と呼ばれる出力が生成されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-115">The components of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit combine to produce an output that is called an audit, just as a report definition combined with graphics and data elements produces a report.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="a626f-116">監査では、 *拡張イベント* を使用して監査を作成できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-116">audit uses *Extended Events* to help create an audit.</span></span> <span data-ttu-id="a626f-117">拡張イベントの詳細については、「 [拡張イベント](../../extended-events/extended-events.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-117">For more information about Extended Events, see [Extended Events](../../extended-events/extended-events.md).</span></span>  
  
### <a name="sql-server-audit"></a><span data-ttu-id="a626f-118">SQL Server Audit</span><span class="sxs-lookup"><span data-stu-id="a626f-118">SQL Server Audit</span></span>  
 <span data-ttu-id="a626f-119">*SQL Server 監査* オブジェクトは、監視するサーバー レベルまたはデータベース レベルのアクションおよびアクションのグループの 1 つのインスタンスを収集します。</span><span class="sxs-lookup"><span data-stu-id="a626f-119">The *SQL Server Audit* object collects a single instance of server or database-level actions and groups of actions to monitor.</span></span> <span data-ttu-id="a626f-120">監査は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンス レベルで行われます。</span><span class="sxs-lookup"><span data-stu-id="a626f-120">The audit is at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance level.</span></span> <span data-ttu-id="a626f-121">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスごとに複数の監査を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-121">You can have multiple audits per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  
  
 <span data-ttu-id="a626f-122">監査を定義する場合、結果を出力する場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="a626f-122">When you define an audit, you specify the location for the output of the results.</span></span> <span data-ttu-id="a626f-123">これが監査の出力先です。</span><span class="sxs-lookup"><span data-stu-id="a626f-123">This is the audit destination.</span></span> <span data-ttu-id="a626f-124">監査は *無効* な状態で作成されるため、アクションの監査は自動的には行われません。</span><span class="sxs-lookup"><span data-stu-id="a626f-124">The audit is created in a *disabled* state, and does not automatically audit any actions.</span></span> <span data-ttu-id="a626f-125">監査を有効にすると、監査の出力先が監査からデータを受け取るようになります。</span><span class="sxs-lookup"><span data-stu-id="a626f-125">After the audit is enabled, the audit destination receives data from the audit.</span></span>  
  
### <a name="server-audit-specification"></a><span data-ttu-id="a626f-126">サーバー監査の仕様</span><span class="sxs-lookup"><span data-stu-id="a626f-126">Server Audit Specification</span></span>  
 <span data-ttu-id="a626f-127">*サーバー監査の仕様* オブジェクトは監査に属しています。</span><span class="sxs-lookup"><span data-stu-id="a626f-127">The *Server Audit Specification* object belongs to an audit.</span></span> <span data-ttu-id="a626f-128">サーバー監査の仕様は監査ごとに 1 つ作成できます。これは、サーバー監査の仕様も監査も [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスのスコープで作成されるためです。</span><span class="sxs-lookup"><span data-stu-id="a626f-128">You can create one server audit specification per audit, because both are created at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance scope.</span></span>  
  
 <span data-ttu-id="a626f-129">サーバー監査の仕様は、拡張イベント機能によって発生するさまざまなサーバー レベルのアクション グループを収集します。</span><span class="sxs-lookup"><span data-stu-id="a626f-129">The server audit specification collects many server-level action groups raised by the Extended Events feature.</span></span> <span data-ttu-id="a626f-130">サーバー監査の仕様には、 *監査アクション グループ* を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-130">You can include *audit action groups* in a server audit specification.</span></span> <span data-ttu-id="a626f-131">監査アクション グループとは、 [!INCLUDE[ssDE](../../../includes/ssde-md.md)]で発生するアトミック イベントであるアクションの定義済みのグループです。</span><span class="sxs-lookup"><span data-stu-id="a626f-131">Audit action groups are predefined groups of actions, which are atomic events occurring in the [!INCLUDE[ssDE](../../../includes/ssde-md.md)].</span></span> <span data-ttu-id="a626f-132">これらのアクションは監査に送信されて、ターゲットに記録されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-132">These actions are sent to the audit, which records them in the target.</span></span>  
  
 <span data-ttu-id="a626f-133">データベース レベルの監査アクション グループと監査アクションの詳細については、「 [SQL Server 監査のアクション グループとアクション](sql-server-audit-action-groups-and-actions.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-133">Server-level audit action groups are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="database-audit-specification"></a><span data-ttu-id="a626f-134">データベース監査の仕様</span><span class="sxs-lookup"><span data-stu-id="a626f-134">Database Audit Specification</span></span>  
 <span data-ttu-id="a626f-135">*Database Audit Specification* オブジェクトも、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に属しています。</span><span class="sxs-lookup"><span data-stu-id="a626f-135">The *Database Audit Specification* object also belongs to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit.</span></span> <span data-ttu-id="a626f-136">各監査では [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] データベースごとに 1 つのデータベース監査の仕様を作成できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-136">You can create one database audit specification per [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database per audit.</span></span>  
  
 <span data-ttu-id="a626f-137">データベース監査の仕様は、拡張イベント機能によって発生するデータベース レベルの監査アクションを収集します。</span><span class="sxs-lookup"><span data-stu-id="a626f-137">The database audit specification collects database-level audit actions raised by the Extended Events feature.</span></span> <span data-ttu-id="a626f-138">データベース監査の仕様には、監査アクション グループまたは監査イベントを追加できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-138">You can add either audit action groups or audit events to a database audit specification.</span></span> <span data-ttu-id="a626f-139">*監査イベント* とは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エンジンで監査できるアトミックなアクションです。</span><span class="sxs-lookup"><span data-stu-id="a626f-139">*Audit events* are the atomic actions that can be audited by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] engine.</span></span> <span data-ttu-id="a626f-140">*監査アクション グループ* とは、アクションの定義済みのグループです。</span><span class="sxs-lookup"><span data-stu-id="a626f-140">*Audit action groups* are predefined groups of actions.</span></span> <span data-ttu-id="a626f-141">これらはいずれも、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] データベースのスコープにあります。</span><span class="sxs-lookup"><span data-stu-id="a626f-141">Both are at the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database scope.</span></span> <span data-ttu-id="a626f-142">これらのアクションは監査に送信されて、ターゲットに記録されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-142">These actions are sent to the audit, which records them in the target.</span></span> <span data-ttu-id="a626f-143">ユーザーのデータベース監査の仕様に、システム ビューなどのサーバー スコープ オブジェクトは含めないでください。</span><span class="sxs-lookup"><span data-stu-id="a626f-143">Do not include server-scoped objects, such as the system views, in a user database audit specification.</span></span>  
  
 <span data-ttu-id="a626f-144">データベース レベルの監査アクション グループと監査アクションの詳細については、「 [SQL Server 監査のアクション グループとアクション](sql-server-audit-action-groups-and-actions.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-144">Database-level audit action groups and audit actions are described in the topic [SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md).</span></span>  
  
### <a name="target"></a><span data-ttu-id="a626f-145">移行先</span><span class="sxs-lookup"><span data-stu-id="a626f-145">Target</span></span>  
 <span data-ttu-id="a626f-146">監査の結果はターゲットに送信されます。ターゲットには、ファイル、Windows セキュリティ イベント ログ、または Windows アプリケーション イベント ログを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-146">The results of an audit are sent to a target, which can be a file, the Windows Security event log, or the Windows Application event log.</span></span> <span data-ttu-id="a626f-147">定期的にログをレビューおよびアーカイブして、ターゲットに追加のレコードを書き込むための十分なスペースを確保しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-147">Logs must be reviewed and archived periodically to make sure that the target has sufficient space to write additional records.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="a626f-148">Windows アプリケーション イベント ログの読み取りおよび書き込みは、認証されているユーザーならば、だれでも行うことができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-148">Any authenticated user can read and write to the Windows Application event log.</span></span> <span data-ttu-id="a626f-149">アプリケーション イベント ログでは、Windows セキュリティ イベント ログほど高いアクセス許可は要求されません。したがって、Windows セキュリティ イベント ログに比べてセキュリティが低くなります。</span><span class="sxs-lookup"><span data-stu-id="a626f-149">The Application event log requires lower permissions than the Windows Security event log and is less secure than the Windows Security event log.</span></span>  
  
 <span data-ttu-id="a626f-150">Windows セキュリティ ログへの書き込みを行うには、"セキュリティ監査の生成 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] **" ポリシーに** サービス アカウントを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-150">Writing to the Windows Security log requires the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service account to be added to the **Generate security audits** policy.</span></span> <span data-ttu-id="a626f-151">既定では、ローカル システム、ローカル サービス、およびネットワーク サービスがこのポリシーに追加されています。</span><span class="sxs-lookup"><span data-stu-id="a626f-151">By default, the Local System, Local Service, and Network Service are part of this policy.</span></span> <span data-ttu-id="a626f-152">この設定は、セキュリティ ポリシー スナップイン (secpol.msc) を使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-152">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="a626f-153">さらに、 **オブジェクト アクセスの監査** セキュリティ ポリシーを、 **成功** と **失敗**の両方について有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-153">Additionally, the **Audit object access** security policy must be enabled for both **Success** and **Failure**.</span></span> <span data-ttu-id="a626f-154">この設定は、セキュリティ ポリシー スナップイン (secpol.msc) を使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-154">This setting can be configured by using the security policy snap-in (secpol.msc).</span></span> <span data-ttu-id="a626f-155">[!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)]または Windows Server 2008 では、コマンドラインから監査ポリシープログラム (を使用して、より詳細な**アプリケーション生成**ポリシーを設定でき `AuditPol.exe)` ます。</span><span class="sxs-lookup"><span data-stu-id="a626f-155">In [!INCLUDE[wiprlhext](../../../includes/wiprlhext-md.md)] or Windows Server 2008, you can set the more granular **application generated** policy from the command line by using the audit policy program (`AuditPol.exe)`.</span></span> <span data-ttu-id="a626f-156">Windows セキュリティ ログへの書き込みを有効にする手順の詳細については、「 [セキュリティ ログへの SQL サーバー監査イベントの書き込み](write-sql-server-audit-events-to-the-security-log.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-156">For more information about the steps to enable writing to the Windows Security log, see [Write SQL Server Audit Events to the Security Log](write-sql-server-audit-events-to-the-security-log.md).</span></span> <span data-ttu-id="a626f-157">Auditpol.exe プログラムの詳細については、 [グループ ポリシーを使用して詳細なセキュリティの監査を構成する方法](https://support.microsoft.com/kb/921469/)に関するサポート技術情報の記事 921469 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-157">For more information about the Auditpol.exe program, see Knowledge Base article 921469, [How to use Group Policy to configure detailed security auditing](https://support.microsoft.com/kb/921469/).</span></span> <span data-ttu-id="a626f-158">Windows イベント ログは、すべての Windows オペレーティング システムで使用できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-158">The Windows event logs are global to the Windows operating system.</span></span> <span data-ttu-id="a626f-159">Windows イベント ログの詳細については、「 [イベント ビューアーの概要](https://go.microsoft.com/fwlink/?LinkId=101455)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-159">For more information about the Windows event logs, see [Event Viewer Overview](https://go.microsoft.com/fwlink/?LinkId=101455).</span></span> <span data-ttu-id="a626f-160">監査でより厳密なアクセス許可が必要な場合は、バイナリ ファイル ターゲットを使用します。</span><span class="sxs-lookup"><span data-stu-id="a626f-160">If you need more precise permissions on the audit, use the binary file target.</span></span>  
  
 <span data-ttu-id="a626f-161">改ざんを防止するために監査情報をファイルに保存している場合、次の方法でそのファイルの場所へのアクセスを制限できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-161">When you are saving audit information to a file, to help prevent tampering, you can restrict access to the file location in the following ways:</span></span>  
  
-   <span data-ttu-id="a626f-162">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービス アカウントには、読み取り権限と書き込み権限の両方が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Service Account must have both Read and Write permission.</span></span>  
  
-   <span data-ttu-id="a626f-163">通常、監査管理者には、読み取り権限と書き込み権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-163">Audit Administrators typically require Read and Write permission.</span></span> <span data-ttu-id="a626f-164">これは、監査管理者が監査ファイルを管理 (他の共有への監査ファイルのコピー、監査ファイルのバックアップなど) するための Windows アカウントであることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="a626f-164">This assumes that the Audit Administrators are Windows accounts for administration of audit files, such as: copying them to different shares, backing them up, and so on.</span></span>  
  
-   <span data-ttu-id="a626f-165">監査ファイルの読み取りが許可されている監査リーダーには、読み取り権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-165">Audit Readers that are authorized to read audit files must have Read permission.</span></span>  
  
 <span data-ttu-id="a626f-166">[!INCLUDE[ssDE](../../../includes/ssde-md.md)] がファイルへの書き込みを行っているときでも、他の Windows ユーザーは、権限を持っていれば、監査ファイルを読み取ることができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-166">Even when the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] is writing to a file, other Windows users can read the audit file if they have permission.</span></span> <span data-ttu-id="a626f-167">排他ロックを取得すると読み取り操作が行われないようになりますが、 [!INCLUDE[ssDE](../../../includes/ssde-md.md)] では排他ロックを取得しません。</span><span class="sxs-lookup"><span data-stu-id="a626f-167">The [!INCLUDE[ssDE](../../../includes/ssde-md.md)] does not take an exclusive lock that prevents read operations.</span></span>  
  
 <span data-ttu-id="a626f-168">[!INCLUDE[ssDE](../../../includes/ssde-md.md)] は監査ファイルにアクセスできるため、CONTROL SERVER 権限を持っている [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ログインは、 [!INCLUDE[ssDE](../../../includes/ssde-md.md)] を利用して監査ファイルにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a626f-168">Because the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] can access the file, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] logins that have CONTROL SERVER permission can use the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] to access the audit files.</span></span> <span data-ttu-id="a626f-169">監査ファイルの読み取りを行っているユーザーを記録するには、master.sys.fn_get_audit_file に監査を定義します。</span><span class="sxs-lookup"><span data-stu-id="a626f-169">To record any user that is reading the audit file, define an audit on master.sys.fn_get_audit_file.</span></span> <span data-ttu-id="a626f-170">これにより、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]を介して監査ファイルにアクセスした、CONTROL SERVER 権限を持つログインが記録されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-170">This records the logins with CONTROL SERVER permission that have accessed the audit file through [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="a626f-171">監査管理者が別の場所に監査ファイルをコピーする場合 (アーカイブ用など)、新しい場所に対する ACL は、次の権限に限定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-171">If an Audit Administrator copies the file to a different location (for archive purposes, and so on), the ACLs on the new location should be reduced to the following permissions:</span></span>  
  
-   <span data-ttu-id="a626f-172">監査管理者 - 読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="a626f-172">Audit Administrator - Read / Write</span></span>  
  
-   <span data-ttu-id="a626f-173">監査リーダー - 読み取り</span><span class="sxs-lookup"><span data-stu-id="a626f-173">Audit Reader - Read</span></span>  
  
 <span data-ttu-id="a626f-174">監査管理者または監査リーダーしかアクセスしない、別の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]インスタンス ( [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)]のインスタンスなど) から監査レポートを作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a626f-174">We recommend that you generate audit reports from a separate instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], such as an instance of [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)], to which only Audit Administrators or Audit Readers have access.</span></span> <span data-ttu-id="a626f-175">レポート作成用に別の [!INCLUDE[ssDE](../../../includes/ssde-md.md)] のインスタンスを使用することで、許可されていないユーザーによる監査レコードへのアクセスを防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-175">By using a separate instance of the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for reporting, you can help prevent unauthorized users from obtaining access to the audit record.</span></span>  
  
 <span data-ttu-id="a626f-176">Windows BitLocker ドライブ暗号化または Windows 暗号化ファイル システムを使用して監査ファイルが格納されているフォルダーを暗号化することにより、許可されていないアクセスに対する保護を強化することができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-176">You can offer additional protection against unauthorized access by encrypting the folder in which the audit file is stored by using Windows BitLocker Drive Encryption or Windows Encrypting File System.</span></span>  
  
 <span data-ttu-id="a626f-177">ターゲットに書き込まれる監査レコードの詳細については、「 [SQL Server Audit Records](sql-server-audit-records.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-177">For more information about the audit records that are written to the target, see [SQL Server Audit Records](sql-server-audit-records.md).</span></span>  
  
## <a name="overview-of-using-sql-server-audit"></a><span data-ttu-id="a626f-178">SQL Server 監査の使用の概要</span><span class="sxs-lookup"><span data-stu-id="a626f-178">Overview of Using SQL Server Audit</span></span>  
 <span data-ttu-id="a626f-179">監査は、 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] または [!INCLUDE[tsql](../../../includes/tsql-md.md)] を使用して定義することができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-179">You can use [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] to define an audit.</span></span> <span data-ttu-id="a626f-180">監査を作成して有効にすると、ターゲットがエントリを受け取るようになります。</span><span class="sxs-lookup"><span data-stu-id="a626f-180">After the audit is created and enabled, the target will receive entries.</span></span>  
  
 <span data-ttu-id="a626f-181">Windows イベント ログを閲覧するには、Windows の **イベント ビューアー** ユーティリティを使用します。</span><span class="sxs-lookup"><span data-stu-id="a626f-181">You can read the Windows event logs by using the **Event Viewer** utility in Windows.</span></span> <span data-ttu-id="a626f-182">ファイル ターゲットの場合は、 **の** [ログ ファイルの表示] [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] か、 [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) 関数を使用して、対象のファイルを閲覧できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-182">For file targets, you can use either the **Log File Viewer** in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or the [fn_get_audit_file](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql) function to read the target file.</span></span>  
  
 <span data-ttu-id="a626f-183">監査の作成および使用の一般的な手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a626f-183">The general process for creating and using an audit is as follows.</span></span>  
  
1.  <span data-ttu-id="a626f-184">監査を作成し、ターゲットを定義します。</span><span class="sxs-lookup"><span data-stu-id="a626f-184">Create an audit and define the target.</span></span>  
  
2.  <span data-ttu-id="a626f-185">監査にマップするサーバー監査の仕様またはデータベース監査の仕様を作成します。</span><span class="sxs-lookup"><span data-stu-id="a626f-185">Create either a server audit specification or database audit specification that maps to the audit.</span></span> <span data-ttu-id="a626f-186">その監査の仕様を有効にします。</span><span class="sxs-lookup"><span data-stu-id="a626f-186">Enable the audit specification.</span></span>  
  
3.  <span data-ttu-id="a626f-187">監査を有効にします。</span><span class="sxs-lookup"><span data-stu-id="a626f-187">Enable the audit.</span></span>  
  
4.  <span data-ttu-id="a626f-188">Windows **イベント ビューアー**、 **[ログ ファイルの表示]** 、または fn_get_audit_file 関数を使用して、監査イベントを閲覧します。</span><span class="sxs-lookup"><span data-stu-id="a626f-188">Read the audit events by using the Windows **Event Viewer**, **Log File Viewe**r, or the fn_get_audit_file function.</span></span>  
  
 <span data-ttu-id="a626f-189">詳細については、「 [サーバー監査およびサーバー監査の仕様を作成する](create-a-server-audit-and-server-audit-specification.md) 」および「 [サーバー監査およびデータベース監査の仕様を作成する](create-a-server-audit-and-database-audit-specification.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-189">For more information, see [Create a Server Audit and Server Audit Specification](create-a-server-audit-and-server-audit-specification.md) and [Create a Server Audit and Database Audit Specification](create-a-server-audit-and-database-audit-specification.md).</span></span>  
  
## <a name="considerations"></a><span data-ttu-id="a626f-190">考慮事項</span><span class="sxs-lookup"><span data-stu-id="a626f-190">Considerations</span></span>  
 <span data-ttu-id="a626f-191">監査の開始時にエラーが発生すると、サーバーが起動しなくなります。</span><span class="sxs-lookup"><span data-stu-id="a626f-191">In the case of a failure during audit initiation, the server will not start.</span></span> <span data-ttu-id="a626f-192">その場合にサーバーを起動するには、コマンド ラインで **-f** オプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="a626f-192">In this case, the server can be started by using the **-f** option at the command line.</span></span>  
  
 <span data-ttu-id="a626f-193">監査に対して ON_FAILURE=SHUTDOWN が指定されているために監査エラーによってサーバーがシャットダウンしたり起動しなくなったりすると、MSG_AUDIT_FORCED_SHUTDOWN イベントがログに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="a626f-193">When an audit failure causes the server to shut down or not to start because ON_FAILURE=SHUTDOWN is specified for the audit, the MSG_AUDIT_FORCED_SHUTDOWN event will be written to the log.</span></span> <span data-ttu-id="a626f-194">シャットダウンはこの設定が初めて検出されたときに生じるため、このイベントが書き込まれるのは 1 回だけです。</span><span class="sxs-lookup"><span data-stu-id="a626f-194">Because the shutdown will occur on the first encounter of this setting, the event will be written one time.</span></span> <span data-ttu-id="a626f-195">このイベントは、シャットダウンを引き起こした監査のエラー メッセージの後に書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="a626f-195">This event is written after the failure message for the audit causing the shutdown.</span></span> <span data-ttu-id="a626f-196">管理者は、 **-m** フラグを使用して [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をシングル ユーザー モードで起動することで、監査に伴うシャットダウンを回避することができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-196">An administrator can bypass audit-induced shutdowns by starting [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] in Single User mode using the **-m** flag.</span></span> <span data-ttu-id="a626f-197">シングル ユーザー モードで起動すると、ON_FAILURE=SHUTDOWN が指定されているすべての監査がダウングレードされて、そのセッションでは ON_FAILURE=CONTINUE として実行されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-197">If you start in Single User mode, you will downgrade any audit where ON_FAILURE=SHUTDOWN is specified to run in that session as ON_FAILURE=CONTINUE.</span></span> <span data-ttu-id="a626f-198">**-m** フラグを使用して [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を起動すると、エラー ログに MSG_AUDIT_SHUTDOWN_BYPASSED メッセージが書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="a626f-198">When [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is started by using the **-m** flag, the MSG_AUDIT_SHUTDOWN_BYPASSED message will be written to the error log.</span></span>  
  
 <span data-ttu-id="a626f-199">スタートアップ オプションの詳細については、「 [データベース エンジン サービスのスタートアップ オプション](../../../database-engine/configure-windows/database-engine-service-startup-options.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-199">For more information about service startup options, see [Database Engine Service Startup Options](../../../database-engine/configure-windows/database-engine-service-startup-options.md).</span></span>  
  
### <a name="attaching-a-database-with-an-audit-defined"></a><span data-ttu-id="a626f-200">定義済みの監査を含むデータベースのインポート</span><span class="sxs-lookup"><span data-stu-id="a626f-200">Attaching a Database with an Audit Defined</span></span>  
 <span data-ttu-id="a626f-201">監査の仕様が含まれていて、サーバーに存在しない GUID が指定されているデータベースをアタッチすると、 *孤立した* 監査の仕様が発生します。</span><span class="sxs-lookup"><span data-stu-id="a626f-201">Attaching a database that has an audit specification and specifies a GUID that does not exist on the server will cause an *orphaned* audit specification.</span></span> <span data-ttu-id="a626f-202">この場合は、一致する GUID を持つ監査がサーバー インスタンスに存在しないため、監査イベントは記録されません。</span><span class="sxs-lookup"><span data-stu-id="a626f-202">Because an audit with a matching GUID does not exist on the server instance, no audit events will be recorded.</span></span> <span data-ttu-id="a626f-203">この状況を修正するには、ALTER DATABASE AUDIT SPECIFICATION コマンドを使用して、孤立した監査の仕様を既存のサーバー監査に関連付けます。</span><span class="sxs-lookup"><span data-stu-id="a626f-203">To correct this situation, use the ALTER DATABASE AUDIT SPECIFICATION command to connect the orphaned audit specification to an existing server audit.</span></span> <span data-ttu-id="a626f-204">または、CREATE SERVER AUDIT コマンドを使用して、指定されている GUID を持つ新しい Server 監査を作成します。</span><span class="sxs-lookup"><span data-stu-id="a626f-204">Or, use the CREATE SERVER AUDIT command to create a new server audit with the specified GUID.</span></span>  
  
 <span data-ttu-id="a626f-205">監査の仕様が定義されているデータベースを、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査をサポートしていない別のエディションの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ( [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] など) にアタッチすることもできますが、監査イベントは記録されません。</span><span class="sxs-lookup"><span data-stu-id="a626f-205">You can attach a database that has an audit specification defined on it to another edition of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that does not support [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit, such as [!INCLUDE[ssExpress](../../../includes/ssexpress-md.md)] but it will not record audit events.</span></span>  
  
### <a name="database-mirroring-and-sql-server-audit"></a><span data-ttu-id="a626f-206">データベース ミラーリングと SQL Server 監査</span><span class="sxs-lookup"><span data-stu-id="a626f-206">Database Mirroring and SQL Server Audit</span></span>  
 <span data-ttu-id="a626f-207">データベース監査の仕様が定義されていて、データベース ミラーリングを使用するデータベースには、そのデータベース監査の仕様が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a626f-207">A database that has a database audit specification defined and that uses database mirroring will include the database audit specification.</span></span> <span data-ttu-id="a626f-208">ミラー化された SQL インスタンスでも正しく機能するようにするには、以下の項目を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-208">To work correctly on the mirrored SQL instance, the following items must be configured:</span></span>  
  
-   <span data-ttu-id="a626f-209">データベース監査の仕様が監査レコードを書き込めるようにするには、同じ GUID を持つ監査をミラー サーバーに作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-209">The mirror server must have an audit with the same GUID to enable the database audit specification to write audit records.</span></span> <span data-ttu-id="a626f-210">これは、CREATE AUDIT WITH GUID コマンドを使用して構成でき `=` \* \<GUID from source Server Audit*> ます。</span><span class="sxs-lookup"><span data-stu-id="a626f-210">This can be configured by using the command CREATE AUDIT WITH GUID`=`\*\<GUID from source Server Audit*>.</span></span>  
  
-   <span data-ttu-id="a626f-211">バイナリ ファイル ターゲットの場合は、監査記録が書き込まれる場所に対する適切なアクセス許可がミラー サーバーのサービス アカウントに必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-211">For binary file targets, the mirror server service account must have appropriate permissions to the location where the audit trail is being written.</span></span>  
  
-   <span data-ttu-id="a626f-212">Windows イベント ログ ターゲットの場合は、ミラー サーバーが配置されているコンピューターのセキュリティ ポリシーで、セキュリティ イベント ログまたはアプリケーション イベント ログへのサービス アカウントのアクセスが許可されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-212">For Windows event log targets, the security policy on the computer where the mirror server is located must allow for service account access to the security or application event log.</span></span>  
  
### <a name="auditing-administrators"></a><span data-ttu-id="a626f-213">監査管理者</span><span class="sxs-lookup"><span data-stu-id="a626f-213">Auditing Administrators</span></span>  
 <span data-ttu-id="a626f-214">`sysadmin`固定サーバーロールのメンバーは、各データベースで**dbo**ユーザーとして識別されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-214">Members of the `sysadmin` fixed server role are identified as the **dbo** user in each database.</span></span> <span data-ttu-id="a626f-215">管理者のアクションを監査するには、 **dbo** ユーザーのアクションを監査します。</span><span class="sxs-lookup"><span data-stu-id="a626f-215">To audit actions of the administrators, audit the actions of the **dbo** user.</span></span>  
  
## <a name="creating-and-managing-audits-with-transact-sql"></a><span data-ttu-id="a626f-216">Transact-SQL を使用した監査の作成と管理</span><span class="sxs-lookup"><span data-stu-id="a626f-216">Creating and Managing Audits with Transact-SQL</span></span>  
 <span data-ttu-id="a626f-217">DDL ステートメント、動的管理ビューと関数、およびカタログ ビューを使用して、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査のすべての機能を実装できます。</span><span class="sxs-lookup"><span data-stu-id="a626f-217">You can use DDL statements, dynamic management views and functions, and catalog views to implement all aspects of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>  
  
### <a name="data-definition-language-statements"></a><span data-ttu-id="a626f-218">データ定義言語ステートメント</span><span class="sxs-lookup"><span data-stu-id="a626f-218">Data Definition Language Statements</span></span>  
 <span data-ttu-id="a626f-219">以下の DDL ステートメントを使用して、監査の仕様を作成、変更、および削除することができます。</span><span class="sxs-lookup"><span data-stu-id="a626f-219">You can use the following DDL statements to create, alter, and drop audit specifications:</span></span>  
  
|||  
|-|-|  
|[<span data-ttu-id="a626f-220">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="a626f-220">ALTER AUTHORIZATION</span></span>](/sql/t-sql/statements/alter-authorization-transact-sql)|[<span data-ttu-id="a626f-221">CREATE SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="a626f-221">CREATE SERVER AUDIT</span></span>](/sql/t-sql/statements/create-server-audit-transact-sql)|  
|[<span data-ttu-id="a626f-222">ALTER DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-222">ALTER DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-database-audit-specification-transact-sql)|[<span data-ttu-id="a626f-223">CREATE SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-223">CREATE SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-server-audit-specification-transact-sql)|  
|[<span data-ttu-id="a626f-224">ALTER SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="a626f-224">ALTER SERVER AUDIT</span></span>](/sql/t-sql/statements/alter-server-audit-specification-transact-sql)|[<span data-ttu-id="a626f-225">DROP DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-225">DROP DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-database-encryption-key-transact-sql)|  
|[<span data-ttu-id="a626f-226">ALTER SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-226">ALTER SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/alter-server-audit-transact-sql)|[<span data-ttu-id="a626f-227">DROP SERVER AUDIT</span><span class="sxs-lookup"><span data-stu-id="a626f-227">DROP SERVER AUDIT</span></span>](/sql/t-sql/statements/drop-server-audit-transact-sql)|  
|[<span data-ttu-id="a626f-228">CREATE DATABASE AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-228">CREATE DATABASE AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/create-database-audit-specification-transact-sql)|[<span data-ttu-id="a626f-229">DROP SERVER AUDIT SPECIFICATION</span><span class="sxs-lookup"><span data-stu-id="a626f-229">DROP SERVER AUDIT SPECIFICATION</span></span>](/sql/t-sql/statements/drop-server-audit-specification-transact-sql)|  
  
### <a name="dynamic-views-and-functions"></a><span data-ttu-id="a626f-230">動的ビューと関数</span><span class="sxs-lookup"><span data-stu-id="a626f-230">Dynamic Views and Functions</span></span>  
 <span data-ttu-id="a626f-231">次の表に、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に使用できる動的ビューと関数の一覧を示します。</span><span class="sxs-lookup"><span data-stu-id="a626f-231">The following table lists the dynamic views and function that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Auditing.</span></span>  
  
|<span data-ttu-id="a626f-232">動的ビューと関数</span><span class="sxs-lookup"><span data-stu-id="a626f-232">Dynamic views and functions</span></span>|<span data-ttu-id="a626f-233">説明</span><span class="sxs-lookup"><span data-stu-id="a626f-233">Description</span></span>|  
|---------------------------------|-----------------|  
|[<span data-ttu-id="a626f-234">sys.dm_audit_actions</span><span class="sxs-lookup"><span data-stu-id="a626f-234">sys.dm_audit_actions</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-actions-transact-sql)|<span data-ttu-id="a626f-235">監査ログで報告される可能性のあるすべての監査アクション、および [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit の一部として構成できるすべての監査アクション グループに対して 1 つの行を返します。</span><span class="sxs-lookup"><span data-stu-id="a626f-235">Returns a row for every audit action that can be reported in the audit log and every audit action group that can be configured as part of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit.</span></span>|  
|[<span data-ttu-id="a626f-236">sys.dm_server_audit_status</span><span class="sxs-lookup"><span data-stu-id="a626f-236">sys.dm_server_audit_status</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-server-audit-status-transact-sql)|<span data-ttu-id="a626f-237">監査の現在の状態に関する情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="a626f-237">Provides information about the current state of the audit.</span></span>|  
|[<span data-ttu-id="a626f-238">sys.dm_audit_class_type_map</span><span class="sxs-lookup"><span data-stu-id="a626f-238">sys.dm_audit_class_type_map</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-audit-class-type-map-transact-sql)|<span data-ttu-id="a626f-239">監査ログ内の class_type フィールドを、sys.dm_audit_actions 内の class_desc フィールドにマップするテーブルを返します。</span><span class="sxs-lookup"><span data-stu-id="a626f-239">Returns a table that maps the class_type field in the audit log to the class_desc field in sys.dm_audit_actions.</span></span>|  
|[<span data-ttu-id="a626f-240">fn_get_audit_file</span><span class="sxs-lookup"><span data-stu-id="a626f-240">fn_get_audit_file</span></span>](/sql/relational-databases/system-functions/sys-fn-get-audit-file-transact-sql)|<span data-ttu-id="a626f-241">サーバー監査で作成された監査ファイルからの情報を返します。</span><span class="sxs-lookup"><span data-stu-id="a626f-241">Returns information from an audit file created by a server audit.</span></span>|  
  
### <a name="catalog-views"></a><span data-ttu-id="a626f-242">カタログ ビュー</span><span class="sxs-lookup"><span data-stu-id="a626f-242">Catalog Views</span></span>  
 <span data-ttu-id="a626f-243">次の表に、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に使用できるカタログ ビューの一覧を示します。</span><span class="sxs-lookup"><span data-stu-id="a626f-243">The following table lists the catalog views that you can use for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] auditing.</span></span>  
  
|<span data-ttu-id="a626f-244">カタログ ビュー</span><span class="sxs-lookup"><span data-stu-id="a626f-244">Catalog views</span></span>|<span data-ttu-id="a626f-245">説明</span><span class="sxs-lookup"><span data-stu-id="a626f-245">Description</span></span>|  
|-------------------|-----------------|  
|[<span data-ttu-id="a626f-246">sys.database_ audit_specifications</span><span class="sxs-lookup"><span data-stu-id="a626f-246">sys.database_ audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specifications-transact-sql)|<span data-ttu-id="a626f-247">サーバー インスタンス上の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に含まれるデータベース監査仕様に関する情報を含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-247">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="a626f-248">sys.database_audit_specification_details</span><span class="sxs-lookup"><span data-stu-id="a626f-248">sys.database_audit_specification_details</span></span>](/sql/relational-databases/system-catalog-views/sys-database-audit-specification-details-transact-sql)|<span data-ttu-id="a626f-249">すべてのデータベースについてサーバー インスタンス上の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に含まれる、データベース監査仕様に関する情報を含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-249">Contains information about the database audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance for all databases.</span></span>|  
|[<span data-ttu-id="a626f-250">sys.server_audits</span><span class="sxs-lookup"><span data-stu-id="a626f-250">sys.server_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audits-transact-sql)|<span data-ttu-id="a626f-251">サーバー インスタンス内の各 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査について行を 1 つずつ含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-251">Contains one row for each [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit in a server instance.</span></span>|  
|[<span data-ttu-id="a626f-252">sys.server_audit_specifications</span><span class="sxs-lookup"><span data-stu-id="a626f-252">sys.server_audit_specifications</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specifications-transact-sql)|<span data-ttu-id="a626f-253">サーバー インスタンス上の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に含まれるサーバー監査仕様に関する情報を含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-253">Contains information about the server audit specifications in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="a626f-254">sys.server_audit_specifications_details</span><span class="sxs-lookup"><span data-stu-id="a626f-254">sys.server_audit_specifications_details</span></span>](/sql/relational-databases/system-catalog-views/sys-server-audit-specification-details-transact-sql)|<span data-ttu-id="a626f-255">サーバー インスタンス上の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に含まれるサーバー監査仕様の詳細 (アクション) に関する情報を含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-255">Contains information about the server audit specification details (actions) in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
|[<span data-ttu-id="a626f-256">sys.server_file_audits</span><span class="sxs-lookup"><span data-stu-id="a626f-256">sys.server_file_audits</span></span>](/sql/relational-databases/system-catalog-views/sys-server-file-audits-transact-sql)|<span data-ttu-id="a626f-257">サーバー インスタンス上の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査に含まれるファイル監査の種類に関する拡張情報を含みます。</span><span class="sxs-lookup"><span data-stu-id="a626f-257">Contains stores extended information about the file audit type in a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] audit on a server instance.</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="a626f-258">アクセス許可</span><span class="sxs-lookup"><span data-stu-id="a626f-258">Permissions</span></span>  
 <span data-ttu-id="a626f-259">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 監査の各機能とコマンドには、個別の権限要件があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-259">Each feature and command for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Audit has individual permission requirements.</span></span>  
  
 <span data-ttu-id="a626f-260">サーバー監査またはサーバー監査の仕様を作成、変更、削除する場合、サーバー プリンシパルには、ALTER ANY SERVER AUDIT または CONTROL SERVER の権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-260">To create, alter, or drop a Server Audit or Server Audit Specification, server principals require the ALTER ANY SERVER AUDIT or the CONTROL SERVER permission.</span></span> <span data-ttu-id="a626f-261">データベース監査の仕様を作成、変更、削除する場合、データベース プリンシパルには、ALTER ANY DATABASE AUDIT 権限、またはデータベースに対する ALTER 権限か CONTROL 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-261">To create, alter, or drop a Database Audit Specification, database principals require the ALTER ANY DATABASE AUDIT permission or the ALTER or CONTROL permission on the database.</span></span> <span data-ttu-id="a626f-262">さらに、プリンシパルには、データベースに接続する権限、または ALTER ANY SERVER AUDIT 権限か CONTROL SERVER 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-262">In addition, principals must have permission to connect to the database, or ALTER ANY SERVER AUDIT or CONTROL SERVER permissions.</span></span>  
  
 <span data-ttu-id="a626f-263">特に指定がない限り、カタログ ビューを表示する場合、プリンシパルに次のいずれかのロールまたは権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-263">Unless otherwise specified, viewing catalog views requires a principal to have one of the following:</span></span>  
  
-   <span data-ttu-id="a626f-264">固定サーバー ロール sysadmin のメンバーシップ。</span><span class="sxs-lookup"><span data-stu-id="a626f-264">Membership in the sysadmin fixed server role.</span></span>  
  
-   <span data-ttu-id="a626f-265">CONTROL SERVER 権限。</span><span class="sxs-lookup"><span data-stu-id="a626f-265">The CONTROL SERVER permission.</span></span>  
  
-   <span data-ttu-id="a626f-266">VIEW SERVER STATE 権限。</span><span class="sxs-lookup"><span data-stu-id="a626f-266">The VIEW SERVER STATE permission.</span></span>  
  
-   <span data-ttu-id="a626f-267">ALTER ANY AUDIT 権限。</span><span class="sxs-lookup"><span data-stu-id="a626f-267">The ALTER ANY AUDIT permission.</span></span>  
  
-   <span data-ttu-id="a626f-268">VIEW AUDIT STATE 権限 (sys.server_audits カタログ ビューにアクセスするプリンシパルのみに付与)。</span><span class="sxs-lookup"><span data-stu-id="a626f-268">The VIEW AUDIT STATE permission (gives only the principal access to the sys.server_audits catalog view).</span></span>  
  
 <span data-ttu-id="a626f-269">動的管理ビューを使用するには、プリンシパルに VIEW SERVER STATE または ALTER ANY AUDIT 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="a626f-269">A principal must have the VIEW SERVER STATE or ALTER ANY AUDIT permission to use the Dynamic Management Views.</span></span>  
  
 <span data-ttu-id="a626f-270">アクセス権および権限を付与する方法の詳細については、「[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-270">For more information about how to grant rights and permissions, see [GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql).</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="a626f-271">sysadmin ロールのプリンシパルによって監査コンポーネントが勝手に書き換えられることも、db_owner ロールのプリンシパルによってデータベース内の監査の仕様が勝手に書き換えられることもないとはいえません。</span><span class="sxs-lookup"><span data-stu-id="a626f-271">Principals in the sysadmin role can tamper with any audit component and those in the db_owner role can tamper with audit specifications in a database.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="a626f-272">監査では、監査の仕様を作成または変更するログオンが、ALTER ANY DATABASE AUDIT 以上の権限を持っているかどうかが検証されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-272">Audit will validate that a logon that creates or alters an audit specification has at least the ALTER ANY DATABASE AUDIT permission.</span></span> <span data-ttu-id="a626f-273">ただし、データベースにアタッチするときには検証は行われません。</span><span class="sxs-lookup"><span data-stu-id="a626f-273">However, it does no validation when you attach a database.</span></span> <span data-ttu-id="a626f-274">すべてのデータベース監査の仕様は、sysadmin ロールまたは db_owner ロールのプリンシパルと同等の信頼性しかないと見なす必要があります。</span><span class="sxs-lookup"><span data-stu-id="a626f-274">You should assume all Database Audit Specifications are only as trustworthy as those principals in the sysadmin or db_owner role.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="a626f-275">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="a626f-275">Related Tasks</span></span>  
 [<span data-ttu-id="a626f-276">サーバー監査およびサーバー監査の仕様を作成する</span><span class="sxs-lookup"><span data-stu-id="a626f-276">Create a Server Audit and Server Audit Specification</span></span>](create-a-server-audit-and-server-audit-specification.md)  
  
 [<span data-ttu-id="a626f-277">サーバー監査およびデータベース監査の仕様を作成する</span><span class="sxs-lookup"><span data-stu-id="a626f-277">Create a Server Audit and Database Audit Specification</span></span>](create-a-server-audit-and-database-audit-specification.md)  
  
 [<span data-ttu-id="a626f-278">SQL Server 監査ログを表示する</span><span class="sxs-lookup"><span data-stu-id="a626f-278">View a SQL Server Audit Log</span></span>](view-a-sql-server-audit-log.md)  
  
 [<span data-ttu-id="a626f-279">セキュリティ ログへの SQL Server 監査イベントの書き込み</span><span class="sxs-lookup"><span data-stu-id="a626f-279">Write SQL Server Audit Events to the Security Log</span></span>](write-sql-server-audit-events-to-the-security-log.md)  
  
## <a name="topics-closely-related-to-auditing"></a><span data-ttu-id="a626f-280">監査と密接に関連したトピック</span><span class="sxs-lookup"><span data-stu-id="a626f-280">Topics Closely Related to Auditing</span></span>  
 <span data-ttu-id="a626f-281">[[サーバーのプロパティ] &#40;[セキュリティ] ページ&#41;](../../../database-engine/configure-windows/server-properties-security-page.md)</span><span class="sxs-lookup"><span data-stu-id="a626f-281">[Server Properties &#40;Security Page&#41;](../../../database-engine/configure-windows/server-properties-security-page.md)</span></span>  
 <span data-ttu-id="a626f-282">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]のログインの監査をオンにする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a626f-282">Explains how to turn on login auditing for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="a626f-283">監査レコードは Windows アプリケーション ログに格納されます。</span><span class="sxs-lookup"><span data-stu-id="a626f-283">The audit records are stored in the Windows application log.</span></span>  
  
 [<span data-ttu-id="a626f-284">c2 audit mode サーバー構成オプション</span><span class="sxs-lookup"><span data-stu-id="a626f-284">c2 audit mode Server Configuration Option</span></span>](../../../database-engine/configure-windows/c2-audit-mode-server-configuration-option.md)  
 <span data-ttu-id="a626f-285">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]の C2 セキュリティ準拠の監査モードについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a626f-285">Explains the C2 security compliance auditing mode in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
 [<span data-ttu-id="a626f-286">Security Audit イベント カテゴリ &#40;SQL Server Profiler&#41;</span><span class="sxs-lookup"><span data-stu-id="a626f-286">Security Audit Event Category &#40;SQL Server Profiler&#41;</span></span>](../../../relational-databases/event-classes/security-audit-event-category-sql-server-profiler.md)  
 <span data-ttu-id="a626f-287">[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]で使用できる監査イベントについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a626f-287">Explains the audit events you can use in [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="a626f-288">詳細については、「 [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a626f-288">For more information, see [SQL Server Profiler](../../../tools/sql-server-profiler/sql-server-profiler.md).</span></span>  
  
 [<span data-ttu-id="a626f-289">SQL トレース (SQL Trace)</span><span class="sxs-lookup"><span data-stu-id="a626f-289">SQL Trace</span></span>](../../sql-trace/sql-trace.md)  
 <span data-ttu-id="a626f-290">SQL トレースを使用して、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler からではなく、ユーザー独自のアプリケーションからトレースを手動で作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a626f-290">Explains how SQL Trace can be used from within your own applications to create traces manually, instead of using [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Profiler.</span></span>  
  
 [<span data-ttu-id="a626f-291">DDL トリガー</span><span class="sxs-lookup"><span data-stu-id="a626f-291">DDL Triggers</span></span>](../../triggers/ddl-triggers.md)  
 <span data-ttu-id="a626f-292">データ定義言語 (DDL) トリガーを使用してデータベースの変更を追跡する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a626f-292">Explains how you can use Data Definition Language (DDL) triggers to track changes to your databases.</span></span>  
  
 [<span data-ttu-id="a626f-293">Microsoft TechNet:SQL Server TechCenter:SQL Server 2005 - セキュリティと保護</span><span class="sxs-lookup"><span data-stu-id="a626f-293">Microsoft TechNet: SQL Server TechCenter: SQL Server 2005 Security and Protection</span></span>](https://go.microsoft.com/fwlink/?LinkId=101152)  
 <span data-ttu-id="a626f-294">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セキュリティに関する最新の情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="a626f-294">Provides up-to-date information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a626f-295">参照</span><span class="sxs-lookup"><span data-stu-id="a626f-295">See Also</span></span>  
 <span data-ttu-id="a626f-296">[SQL Server 監査のアクション グループとアクション](sql-server-audit-action-groups-and-actions.md) </span><span class="sxs-lookup"><span data-stu-id="a626f-296">[SQL Server Audit Action Groups and Actions](sql-server-audit-action-groups-and-actions.md) </span></span>  
 [<span data-ttu-id="a626f-297">SQL Server 監査レコード</span><span class="sxs-lookup"><span data-stu-id="a626f-297">SQL Server Audit Records</span></span>](sql-server-audit-records.md)  
  
  
