---
title: Broker:Conversation イベント クラス | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: supportability
ms.topic: conceptual
topic_type:
- apiref
helpviewer_keywords:
- Broker:Conversation event class
ms.assetid: 784707b5-cc67-46a3-8ae6-8f8ecf4b27c0
author: stevestein
ms.author: sstein
ms.openlocfilehash: 921b23c6aab8be27534d67d7a85bd7adc8258409
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736336"
---
# <a name="brokerconversation-event-class"></a><span data-ttu-id="c5997-102">Broker:Conversation イベント クラス</span><span class="sxs-lookup"><span data-stu-id="c5997-102">Broker:Conversation Event Class</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-103">では、 **Service Broker** メッセージ交換の進行状況を報告するために、Broker:Conversation イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-103">generates a **Broker:Conversation** event to report the progress of a Service Broker conversation.</span></span>  
  
## <a name="brokerconversation-event-class-data-columns"></a><span data-ttu-id="c5997-104">Broker:Conversation イベント クラスのデータ列</span><span class="sxs-lookup"><span data-stu-id="c5997-104">Broker:Conversation Event Class Data Columns</span></span>  
  
|<span data-ttu-id="c5997-105">データ列</span><span class="sxs-lookup"><span data-stu-id="c5997-105">Data column</span></span>|<span data-ttu-id="c5997-106">種類</span><span class="sxs-lookup"><span data-stu-id="c5997-106">Type</span></span>|<span data-ttu-id="c5997-107">説明</span><span class="sxs-lookup"><span data-stu-id="c5997-107">Description</span></span>|<span data-ttu-id="c5997-108">列番号</span><span class="sxs-lookup"><span data-stu-id="c5997-108">Column number</span></span>|<span data-ttu-id="c5997-109">フィルターの適用</span><span class="sxs-lookup"><span data-stu-id="c5997-109">Filterable</span></span>|  
|-----------------|----------|-----------------|-------------------|----------------|  
|<span data-ttu-id="c5997-110">**ApplicationName**</span><span class="sxs-lookup"><span data-stu-id="c5997-110">**ApplicationName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-111">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスへの接続を作成したクライアント アプリケーションの名前。</span><span class="sxs-lookup"><span data-stu-id="c5997-111">The name of the client application that created the connection to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="c5997-112">この列には、プログラムの表示名ではなく、アプリケーションによって渡された値が格納されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-112">This column is populated with the values passed by the application instead of the displayed name of the program.</span></span>|<span data-ttu-id="c5997-113">10</span><span class="sxs-lookup"><span data-stu-id="c5997-113">10</span></span>|<span data-ttu-id="c5997-114">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-114">Yes</span></span>|  
|<span data-ttu-id="c5997-115">**ClientProcessID**</span><span class="sxs-lookup"><span data-stu-id="c5997-115">**ClientProcessID**</span></span>|`int`|<span data-ttu-id="c5997-116">クライアント アプリケーションが実行されているプロセスに対し、ホスト コンピューターによって割り当てられた ID。</span><span class="sxs-lookup"><span data-stu-id="c5997-116">The ID assigned by the host computer to the process where the client application is running.</span></span> <span data-ttu-id="c5997-117">クライアントでクライアント プロセス ID が指定されると、このデータ列が作成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-117">This data column is populated if the client process ID is provided by the client.</span></span>|<span data-ttu-id="c5997-118">9</span><span class="sxs-lookup"><span data-stu-id="c5997-118">9</span></span>|<span data-ttu-id="c5997-119">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-119">Yes</span></span>|  
|<span data-ttu-id="c5997-120">**DatabaseID**</span><span class="sxs-lookup"><span data-stu-id="c5997-120">**DatabaseID**</span></span>|`int`|<span data-ttu-id="c5997-121">USE *database* ステートメントで指定されているデータベースの ID。</span><span class="sxs-lookup"><span data-stu-id="c5997-121">The ID of the database that is specified by the USE *database* statement.</span></span> <span data-ttu-id="c5997-122">特定のインスタンスについて USE *database*ステートメントが実行されていない場合は既定のデータベースの ID となります。</span><span class="sxs-lookup"><span data-stu-id="c5997-122">If no USE *database*statement has been issued, the ID of the default database.</span></span> [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] <span data-ttu-id="c5997-123">では、 **ServerName** データ列がトレースにキャプチャされ、そのサーバーが利用可能な場合、データベースの名前が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-123">displays the name of the database if the **ServerName** data column is captured in the trace and the server is available.</span></span> <span data-ttu-id="c5997-124">**DB_ID**関数を使用して、データベースの値を確認します。</span><span class="sxs-lookup"><span data-stu-id="c5997-124">Determine the value for a database by using the **DB_ID** function.</span></span>|<span data-ttu-id="c5997-125">3</span><span class="sxs-lookup"><span data-stu-id="c5997-125">3</span></span>|<span data-ttu-id="c5997-126">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-126">Yes</span></span>|  
|<span data-ttu-id="c5997-127">**EventClass**</span><span class="sxs-lookup"><span data-stu-id="c5997-127">**EventClass**</span></span>|`int`|<span data-ttu-id="c5997-128">キャプチャされたイベント クラスの種類。</span><span class="sxs-lookup"><span data-stu-id="c5997-128">The type of event class captured.</span></span> <span data-ttu-id="c5997-129">**Broker:Conversation** の場合は、常に **124**です。</span><span class="sxs-lookup"><span data-stu-id="c5997-129">Always **124** for **Broker:Conversation**.</span></span>|<span data-ttu-id="c5997-130">27</span><span class="sxs-lookup"><span data-stu-id="c5997-130">27</span></span>|<span data-ttu-id="c5997-131">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-131">No</span></span>|  
|<span data-ttu-id="c5997-132">**EventSequence**</span><span class="sxs-lookup"><span data-stu-id="c5997-132">**EventSequence**</span></span>|`int`|<span data-ttu-id="c5997-133">このイベントのシーケンス番号。</span><span class="sxs-lookup"><span data-stu-id="c5997-133">Sequence number for this event.</span></span>|<span data-ttu-id="c5997-134">51</span><span class="sxs-lookup"><span data-stu-id="c5997-134">51</span></span>|<span data-ttu-id="c5997-135">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-135">No</span></span>|  
|<span data-ttu-id="c5997-136">**EventSubClass**</span><span class="sxs-lookup"><span data-stu-id="c5997-136">**EventSubClass**</span></span>|`nvarchar`|<span data-ttu-id="c5997-137">イベント サブクラスの種類。</span><span class="sxs-lookup"><span data-stu-id="c5997-137">The type of event subclass.</span></span> <span data-ttu-id="c5997-138">各イベント クラスについての詳細情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="c5997-138">This provides more information about each event class.</span></span>|<span data-ttu-id="c5997-139">21</span><span class="sxs-lookup"><span data-stu-id="c5997-139">21</span></span>|<span data-ttu-id="c5997-140">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-140">Yes</span></span>|  
|<span data-ttu-id="c5997-141">**GUID**</span><span class="sxs-lookup"><span data-stu-id="c5997-141">**GUID**</span></span>|`uniqueidentifier`|<span data-ttu-id="c5997-142">ダイアログのメッセージ交換 ID。</span><span class="sxs-lookup"><span data-stu-id="c5997-142">The conversation ID of the dialog.</span></span> <span data-ttu-id="c5997-143">この ID はメッセージの一部として転送され、メッセージ交換の両側で共有されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-143">This identifier is transmitted as part of the message, and is shared between both sides of the conversation.</span></span>|<span data-ttu-id="c5997-144">54</span><span class="sxs-lookup"><span data-stu-id="c5997-144">54</span></span>|<span data-ttu-id="c5997-145">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-145">No</span></span>|  
|<span data-ttu-id="c5997-146">**HostName**</span><span class="sxs-lookup"><span data-stu-id="c5997-146">**HostName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-147">クライアントが実行しているコンピューターの名前。</span><span class="sxs-lookup"><span data-stu-id="c5997-147">The name of the computer on which the client is running.</span></span> <span data-ttu-id="c5997-148">このデータ列には、クライアントがホスト名を指定している場合にデータが格納されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-148">This data column is populated if the host name is provided by the client.</span></span> <span data-ttu-id="c5997-149">ホスト名を確認するには、 **HOST_NAME**関数を使用します。</span><span class="sxs-lookup"><span data-stu-id="c5997-149">To determine the host name, use the **HOST_NAME** function.</span></span>|<span data-ttu-id="c5997-150">8</span><span class="sxs-lookup"><span data-stu-id="c5997-150">8</span></span>|<span data-ttu-id="c5997-151">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-151">Yes</span></span>|  
|<span data-ttu-id="c5997-152">**IsSystem**</span><span class="sxs-lookup"><span data-stu-id="c5997-152">**IsSystem**</span></span>|`int`|<span data-ttu-id="c5997-153">イベントがシステム プロセスとユーザー プロセスのどちらで発生したか。</span><span class="sxs-lookup"><span data-stu-id="c5997-153">Indicates whether the event occurred on a system process or a user process.</span></span><br /><br /> <span data-ttu-id="c5997-154">0 = ユーザー</span><span class="sxs-lookup"><span data-stu-id="c5997-154">0 = user</span></span><br /><br /> <span data-ttu-id="c5997-155">1 = システム</span><span class="sxs-lookup"><span data-stu-id="c5997-155">1 = system</span></span>|<span data-ttu-id="c5997-156">60</span><span class="sxs-lookup"><span data-stu-id="c5997-156">60</span></span>|<span data-ttu-id="c5997-157">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-157">No</span></span>|  
|<span data-ttu-id="c5997-158">**LoginSid**</span><span class="sxs-lookup"><span data-stu-id="c5997-158">**LoginSid**</span></span>|`image`|<span data-ttu-id="c5997-159">ログイン ユーザーのセキュリティ ID 番号 (SID)。</span><span class="sxs-lookup"><span data-stu-id="c5997-159">The security identification number (SID) of the logged-in user.</span></span> <span data-ttu-id="c5997-160">各 SID はサーバーのログインごとに一意です。</span><span class="sxs-lookup"><span data-stu-id="c5997-160">Each SID is unique for each login in the server.</span></span>|<span data-ttu-id="c5997-161">41</span><span class="sxs-lookup"><span data-stu-id="c5997-161">41</span></span>|<span data-ttu-id="c5997-162">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-162">Yes</span></span>|  
|<span data-ttu-id="c5997-163">**MethodName**</span><span class="sxs-lookup"><span data-stu-id="c5997-163">**MethodName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-164">このメッセージ交換が属しているメッセージ交換グループ。</span><span class="sxs-lookup"><span data-stu-id="c5997-164">The conversation group that the conversation belongs to.</span></span>|<span data-ttu-id="c5997-165">47</span><span class="sxs-lookup"><span data-stu-id="c5997-165">47</span></span>|<span data-ttu-id="c5997-166">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-166">No</span></span>|  
|<span data-ttu-id="c5997-167">**NTDomainName**</span><span class="sxs-lookup"><span data-stu-id="c5997-167">**NTDomainName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-168">ユーザーが属している Windows ドメイン。</span><span class="sxs-lookup"><span data-stu-id="c5997-168">The Windows domain to which the user belongs.</span></span>|<span data-ttu-id="c5997-169">7</span><span class="sxs-lookup"><span data-stu-id="c5997-169">7</span></span>|<span data-ttu-id="c5997-170">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-170">Yes</span></span>|  
|<span data-ttu-id="c5997-171">**NTUserName**</span><span class="sxs-lookup"><span data-stu-id="c5997-171">**NTUserName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-172">このイベントが生成された接続を所有するユーザーの名前。</span><span class="sxs-lookup"><span data-stu-id="c5997-172">The name of the user that owns the connection that generated this event.</span></span>|<span data-ttu-id="c5997-173">6</span><span class="sxs-lookup"><span data-stu-id="c5997-173">6</span></span>|<span data-ttu-id="c5997-174">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-174">Yes</span></span>|  
|<span data-ttu-id="c5997-175">**ObjectName**</span><span class="sxs-lookup"><span data-stu-id="c5997-175">**ObjectName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-176">ダイアログのメッセージ交換ハンドル。</span><span class="sxs-lookup"><span data-stu-id="c5997-176">The conversation handle of the dialog.</span></span>|<span data-ttu-id="c5997-177">34</span><span class="sxs-lookup"><span data-stu-id="c5997-177">34</span></span>|<span data-ttu-id="c5997-178">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-178">No</span></span>|  
|<span data-ttu-id="c5997-179">**優先順位**</span><span class="sxs-lookup"><span data-stu-id="c5997-179">**Priority**</span></span>|`int`|<span data-ttu-id="c5997-180">メッセージ交換の優先度レベル。</span><span class="sxs-lookup"><span data-stu-id="c5997-180">The priority level of the conversation</span></span>|<span data-ttu-id="c5997-181">5</span><span class="sxs-lookup"><span data-stu-id="c5997-181">5</span></span>|<span data-ttu-id="c5997-182">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-182">Yes</span></span>|  
|<span data-ttu-id="c5997-183">**RoleName**</span><span class="sxs-lookup"><span data-stu-id="c5997-183">**RoleName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-184">メッセージ交換ハンドルのロール。</span><span class="sxs-lookup"><span data-stu-id="c5997-184">The role of the conversation handle.</span></span> <span data-ttu-id="c5997-185">**initiator** または **target**のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="c5997-185">This is either **initiator** or **target**.</span></span>|<span data-ttu-id="c5997-186">38</span><span class="sxs-lookup"><span data-stu-id="c5997-186">38</span></span>|<span data-ttu-id="c5997-187">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-187">No</span></span>|  
|<span data-ttu-id="c5997-188">**ServerName**</span><span class="sxs-lookup"><span data-stu-id="c5997-188">**ServerName**</span></span>|`nvarchar`|<span data-ttu-id="c5997-189">トレースしている [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスの名前。</span><span class="sxs-lookup"><span data-stu-id="c5997-189">The name of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that is being traced.</span></span>|<span data-ttu-id="c5997-190">26</span><span class="sxs-lookup"><span data-stu-id="c5997-190">26</span></span>|<span data-ttu-id="c5997-191">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-191">No</span></span>|  
|<span data-ttu-id="c5997-192">**Severity**</span><span class="sxs-lookup"><span data-stu-id="c5997-192">**Severity**</span></span>|`int`|<span data-ttu-id="c5997-193">(このイベントによってエラーが報告された場合) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エラーの重大度。</span><span class="sxs-lookup"><span data-stu-id="c5997-193">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] error severity, if this event reports an error.</span></span>|<span data-ttu-id="c5997-194">29</span><span class="sxs-lookup"><span data-stu-id="c5997-194">29</span></span>|<span data-ttu-id="c5997-195">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-195">No</span></span>|  
|<span data-ttu-id="c5997-196">**SPID**</span><span class="sxs-lookup"><span data-stu-id="c5997-196">**SPID**</span></span>|`int`|<span data-ttu-id="c5997-197">クライアントに関連付けられているプロセスに、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] によって割り当てられているサーバー プロセス ID。</span><span class="sxs-lookup"><span data-stu-id="c5997-197">The server process ID that is assigned by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to the process that is associated with the client.</span></span>|<span data-ttu-id="c5997-198">12</span><span class="sxs-lookup"><span data-stu-id="c5997-198">12</span></span>|<span data-ttu-id="c5997-199">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-199">Yes</span></span>|  
|<span data-ttu-id="c5997-200">**StartTime**</span><span class="sxs-lookup"><span data-stu-id="c5997-200">**StartTime**</span></span>|`datetime`|<span data-ttu-id="c5997-201">イベントの開始時刻 (取得できた場合)。</span><span class="sxs-lookup"><span data-stu-id="c5997-201">The time when the event started, when available.</span></span>|<span data-ttu-id="c5997-202">14</span><span class="sxs-lookup"><span data-stu-id="c5997-202">14</span></span>|<span data-ttu-id="c5997-203">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-203">Yes</span></span>|  
|<span data-ttu-id="c5997-204">**TextData**</span><span class="sxs-lookup"><span data-stu-id="c5997-204">**TextData**</span></span>|`ntext`|<span data-ttu-id="c5997-205">メッセージ交換の現在の状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-205">The current state of the conversation.</span></span> <span data-ttu-id="c5997-206">次のいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="c5997-206">One of the following:</span></span><br /><br /> <span data-ttu-id="c5997-207">では **、**</span><span class="sxs-lookup"><span data-stu-id="c5997-207">**SO**.</span></span> <span data-ttu-id="c5997-208">送信開始状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-208">Started outbound.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-209">でこのメッセージ交換に対して BEGIN CONVERSATION が処理されましたが、メッセージはまだ送信されていません。</span><span class="sxs-lookup"><span data-stu-id="c5997-209">processed a BEGIN CONVERSATION for this conversation, but no messages have been sent.</span></span><br /><br /> <span data-ttu-id="c5997-210">**SI**。</span><span class="sxs-lookup"><span data-stu-id="c5997-210">**SI**.</span></span> <span data-ttu-id="c5997-211">受信開始状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-211">Started inbound.</span></span> <span data-ttu-id="c5997-212">[!INCLUDE[ssDE](../../includes/ssde-md.md)] の別のインスタンスで現在のインスタンスとの新しいメッセージ交換が開始されましたが、現在のインスタンスが最初のメッセージの受信を完了していません。</span><span class="sxs-lookup"><span data-stu-id="c5997-212">Another instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] started a new conversation with the current instance, but the current instance has not finished receiving the first message.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-213">では、最初のメッセージが分割されたものであるか、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で順序どおりにメッセージが受け取られなかった場合は、この状態のメッセージ交換が作成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-213">might create the conversation in this state if the first message is fragmented or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives messages out of order.</span></span> <span data-ttu-id="c5997-214">ただし、メッセージ交換で受信された最初の転送データに最初のメッセージ全体が含まれている場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で CO 状態のメッセージ交換が作成されることがあります。</span><span class="sxs-lookup"><span data-stu-id="c5997-214">However, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] might create the conversation in the CO state if the first transmission that was received for the conversation contains the complete first message.</span></span><br /><br /> <span data-ttu-id="c5997-215">**CO**。</span><span class="sxs-lookup"><span data-stu-id="c5997-215">**CO**.</span></span> <span data-ttu-id="c5997-216">メッセージ交換中状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-216">Conversing.</span></span> <span data-ttu-id="c5997-217">メッセージ交換が確立され、メッセージ交換の両側からメッセージを送信できます。</span><span class="sxs-lookup"><span data-stu-id="c5997-217">The conversation is established, and both sides of the conversation can send messages.</span></span> <span data-ttu-id="c5997-218">通常のサービスに関する通信の大部分は、メッセージ交換がこの状態のときに行われます。</span><span class="sxs-lookup"><span data-stu-id="c5997-218">Most communication for a typical service happens when the conversation is in this state.</span></span><br /><br /> <span data-ttu-id="c5997-219">**DI**。</span><span class="sxs-lookup"><span data-stu-id="c5997-219">**DI**.</span></span> <span data-ttu-id="c5997-220">受信切断状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-220">Disconnected inbound.</span></span> <span data-ttu-id="c5997-221">メッセージ交換のリモート側で END CONVERSATION が発行されました。</span><span class="sxs-lookup"><span data-stu-id="c5997-221">The remote side of the conversation has issued an END CONVERSATION.</span></span> <span data-ttu-id="c5997-222">メッセージ交換のローカル側で END CONVERSATION が発行されるまで、メッセージ交換はこの状態になります。</span><span class="sxs-lookup"><span data-stu-id="c5997-222">The conversation remains in this state until the local side of the conversation issues an END CONVERSATION.</span></span> <span data-ttu-id="c5997-223">アプリケーションは引き続きこのメッセージ交換のメッセージを受信できます。</span><span class="sxs-lookup"><span data-stu-id="c5997-223">An application can still receive messages for the conversation.</span></span> <span data-ttu-id="c5997-224">メッセージ交換のリモート側ではメッセージ交換が終了しているので、このメッセージ交換でアプリケーションからメッセージを送信することはできません。</span><span class="sxs-lookup"><span data-stu-id="c5997-224">Because the remote side of the conversation has ended the conversation, an application cannot send messages on this conversation.</span></span> <span data-ttu-id="c5997-225">アプリケーションで END CONVERSATION を発行すると、メッセージ交換は終了 (CD) 状態に移行します。</span><span class="sxs-lookup"><span data-stu-id="c5997-225">When an application issues an END CONVERSATION, the conversation moves to the Closed (CD) state.</span></span><br /><br /> <span data-ttu-id="c5997-226">**実行**します。</span><span class="sxs-lookup"><span data-stu-id="c5997-226">**DO**.</span></span> <span data-ttu-id="c5997-227">送信切断状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-227">Disconnected outbound.</span></span> <span data-ttu-id="c5997-228">メッセージ交換のローカル側で END CONVERSATION が発行されました。</span><span class="sxs-lookup"><span data-stu-id="c5997-228">The local side of the conversation has issued an END CONVERSATION.</span></span> <span data-ttu-id="c5997-229">メッセージ交換のリモート側で END CONVERSATION が承認されるまで、メッセージ交換はこの状態になります。</span><span class="sxs-lookup"><span data-stu-id="c5997-229">The conversation remains in this state until the remote side of the conversation acknowledges the END CONVERSATION.</span></span> <span data-ttu-id="c5997-230">アプリケーションはこのメッセージ交換でメッセージを送受信することはできません。</span><span class="sxs-lookup"><span data-stu-id="c5997-230">An application cannot send or receive messages for the conversation.</span></span> <span data-ttu-id="c5997-231">メッセージ交換のリモート側で END CONVERSATION が承認されると、メッセージの交換は終了 (CD) 状態に移行します。</span><span class="sxs-lookup"><span data-stu-id="c5997-231">When the remote side of the conversation acknowledges the END CONVERSATION, the conversation moves to the Closed (CD) state.</span></span><br /><br /> <span data-ttu-id="c5997-232">**ER**。</span><span class="sxs-lookup"><span data-stu-id="c5997-232">**ER**.</span></span> <span data-ttu-id="c5997-233">エラー。</span><span class="sxs-lookup"><span data-stu-id="c5997-233">Error.</span></span> <span data-ttu-id="c5997-234">このエンドポイントでエラーが発生しました。</span><span class="sxs-lookup"><span data-stu-id="c5997-234">An error has occurred on this endpoint.</span></span> <span data-ttu-id="c5997-235">Error、Severity、State の各列に、発生した特定のエラーに関する情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="c5997-235">The Error, Severity, and State columns contain information about the specific error that occurred.</span></span><br /><br /> <span data-ttu-id="c5997-236">**CD**。</span><span class="sxs-lookup"><span data-stu-id="c5997-236">**CD**.</span></span> <span data-ttu-id="c5997-237">終了状態。</span><span class="sxs-lookup"><span data-stu-id="c5997-237">Closed.</span></span> <span data-ttu-id="c5997-238">メッセージ交換のエンドポイントは解放されました。</span><span class="sxs-lookup"><span data-stu-id="c5997-238">The conversation endpoint is no longer in use.</span></span>|<span data-ttu-id="c5997-239">1</span><span class="sxs-lookup"><span data-stu-id="c5997-239">1</span></span>|<span data-ttu-id="c5997-240">はい</span><span class="sxs-lookup"><span data-stu-id="c5997-240">Yes</span></span>|  
|<span data-ttu-id="c5997-241">**Transaction ID**</span><span class="sxs-lookup"><span data-stu-id="c5997-241">**Transaction ID**</span></span>|`bigint`|<span data-ttu-id="c5997-242">トランザクションに対してシステムが割り当てた ID。</span><span class="sxs-lookup"><span data-stu-id="c5997-242">The system-assigned ID of the transaction.</span></span>|<span data-ttu-id="c5997-243">4</span><span class="sxs-lookup"><span data-stu-id="c5997-243">4</span></span>|<span data-ttu-id="c5997-244">いいえ</span><span class="sxs-lookup"><span data-stu-id="c5997-244">No</span></span>|  
  
 <span data-ttu-id="c5997-245">次の表は、このイベント クラスのサブクラス値の一覧です。</span><span class="sxs-lookup"><span data-stu-id="c5997-245">The following table lists the subclass values for this event class.</span></span>  
  
|<span data-ttu-id="c5997-246">id</span><span class="sxs-lookup"><span data-stu-id="c5997-246">ID</span></span>|<span data-ttu-id="c5997-247">サブクラス</span><span class="sxs-lookup"><span data-stu-id="c5997-247">Subclass</span></span>|<span data-ttu-id="c5997-248">説明</span><span class="sxs-lookup"><span data-stu-id="c5997-248">Description</span></span>|  
|--------|--------------|-----------------|  
|<span data-ttu-id="c5997-249">1</span><span class="sxs-lookup"><span data-stu-id="c5997-249">1</span></span>|<span data-ttu-id="c5997-250">SEND Message</span><span class="sxs-lookup"><span data-stu-id="c5997-250">SEND Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-251">では、 **で SEND ステートメントが実行されるときに、** SEND Message [!INCLUDE[ssDE](../../includes/ssde-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-251">generates a **SEND Message** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes a SEND statement.</span></span>|  
|<span data-ttu-id="c5997-252">2</span><span class="sxs-lookup"><span data-stu-id="c5997-252">2</span></span>|<span data-ttu-id="c5997-253">END CONVERSATION</span><span class="sxs-lookup"><span data-stu-id="c5997-253">END CONVERSATION</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-254">では、 **で WITH ERROR 句を指定しない END CONVERSATION ステートメントが実行されるときに、** END CONVERSATION [!INCLUDE[ssDE](../../includes/ssde-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-254">generates an **END CONVERSATION** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that does not include the WITH ERROR clause.</span></span>|  
|<span data-ttu-id="c5997-255">3</span><span class="sxs-lookup"><span data-stu-id="c5997-255">3</span></span>|<span data-ttu-id="c5997-256">END CONVERSATION WITH ERROR</span><span class="sxs-lookup"><span data-stu-id="c5997-256">END CONVERSATION WITH ERROR</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-257">では、 **で WITH ERROR 句を指定した END CONVERSATION ステートメントが実行されるときに、** END CONVERSATION WITH ERROR [!INCLUDE[ssDE](../../includes/ssde-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-257">generates an **END CONVERSATION WITH ERROR** event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that includes the WITH ERROR clause.</span></span>|  
|<span data-ttu-id="c5997-258">4</span><span class="sxs-lookup"><span data-stu-id="c5997-258">4</span></span>|<span data-ttu-id="c5997-259">Broker Initiated Error</span><span class="sxs-lookup"><span data-stu-id="c5997-259">Broker Initiated Error</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-260">では、 **でエラー メッセージが作成されるたびに** Broker Initiated Error [!INCLUDE[ssSB](../../includes/sssb-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-260">generates a **Broker Initiated Error** event whenever [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an error message.</span></span> <span data-ttu-id="c5997-261">たとえば、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] がダイアログのメッセージをルーティングできないときは、ブローカーがそのダイアログのエラー メッセージを作成し、このイベントを生成します。</span><span class="sxs-lookup"><span data-stu-id="c5997-261">For example, when [!INCLUDE[ssSB](../../includes/sssb-md.md)] cannot successfully route a message for a dialog, the broker creates an error message for the dialog and generates this event.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-262">では、アプリケーション プログラムがエラーでメッセージ交換を終了しても、このイベントが生成されることはありません。</span><span class="sxs-lookup"><span data-stu-id="c5997-262">does not generate this event when an application program ends a conversation with an error.</span></span>|  
|<span data-ttu-id="c5997-263">5</span><span class="sxs-lookup"><span data-stu-id="c5997-263">5</span></span>|<span data-ttu-id="c5997-264">Terminate Dialog</span><span class="sxs-lookup"><span data-stu-id="c5997-264">Terminate Dialog</span></span>|[!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="c5997-265">がダイアログを終了しました。</span><span class="sxs-lookup"><span data-stu-id="c5997-265">terminated the dialog.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="c5997-266">はダイアログの続行を妨げる条件に反応してダイアログを終了しますが、この条件はエラーやメッセージ交換の通常の終了ではありません。</span><span class="sxs-lookup"><span data-stu-id="c5997-266">terminates dialogs in response to conditions that prevent the dialog from continuing, but which are not errors or the normal end of a conversation.</span></span> <span data-ttu-id="c5997-267">たとえば、サービスを削除すると、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] はそのサービスのダイアログをすべて終了します。</span><span class="sxs-lookup"><span data-stu-id="c5997-267">For example, dropping a service causes [!INCLUDE[ssSB](../../includes/sssb-md.md)] to terminate all dialogs for that service.</span></span>|  
|<span data-ttu-id="c5997-268">6</span><span class="sxs-lookup"><span data-stu-id="c5997-268">6</span></span>|<span data-ttu-id="c5997-269">Received Sequenced Message</span><span class="sxs-lookup"><span data-stu-id="c5997-269">Received Sequenced Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-270">では、 **でメッセージ シーケンス番号を含むメッセージを受信するときに、** Received Sequenced Message [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] イベント クラスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-270">generates a **Received Sequenced Message** event class when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a message that contains a message sequence number.</span></span> <span data-ttu-id="c5997-271">ユーザー定義メッセージ型はすべてシーケンス番号付きメッセージです。</span><span class="sxs-lookup"><span data-stu-id="c5997-271">All user-defined message types are sequenced messages.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="c5997-272">では、次の 2 つの場合にシーケンス番号のないメッセージが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-272">generates an unsequenced message in two cases:</span></span><br /><br /> <span data-ttu-id="c5997-273">[!INCLUDE[ssSB](../../includes/sssb-md.md)] が生成するエラー メッセージにはシーケンス番号が付きません。</span><span class="sxs-lookup"><span data-stu-id="c5997-273">Error messages generated by [!INCLUDE[ssSB](../../includes/sssb-md.md)] are unsequenced.</span></span><br /><br /> <span data-ttu-id="c5997-274">メッセージの受信確認にはシーケンス番号が付けられない場合があります。</span><span class="sxs-lookup"><span data-stu-id="c5997-274">Message acknowledgements might be unsequenced.</span></span> <span data-ttu-id="c5997-275">[!INCLUDE[ssSB](../../includes/sssb-md.md)] では、効率を上げるために、シーケンス番号付きメッセージにすべてのメッセージ受信確認が含められます。</span><span class="sxs-lookup"><span data-stu-id="c5997-275">For efficiency, [!INCLUDE[ssSB](../../includes/sssb-md.md)] includes message any available acknowledgement as part of a sequenced message .</span></span> <span data-ttu-id="c5997-276">ただし、アプリケーションから一定時間内にシーケンス番号付きメッセージがリモート エンドポイントに送信されなかった場合、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] はメッセージ受信確認用にシーケンス番号のないメッセージを作成します。</span><span class="sxs-lookup"><span data-stu-id="c5997-276">However, if an application does not send a sequenced message to the remote endpoint within a certain period of time, [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an unsequenced message for the message acknowledgement.</span></span>|  
|<span data-ttu-id="c5997-277">7</span><span class="sxs-lookup"><span data-stu-id="c5997-277">7</span></span>|<span data-ttu-id="c5997-278">Received END CONVERSATION</span><span class="sxs-lookup"><span data-stu-id="c5997-278">Received END CONVERSATION</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-279">では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がメッセージ交換の相手から End Dialog メッセージを受信するときに、Received END CONVERSATION イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-279">generates a Received END CONVERSATION event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives an End Dialog message from the other side of the conversation.</span></span>|  
|<span data-ttu-id="c5997-280">8</span><span class="sxs-lookup"><span data-stu-id="c5997-280">8</span></span>|<span data-ttu-id="c5997-281">Received END CONVERSATION WITH ERROR</span><span class="sxs-lookup"><span data-stu-id="c5997-281">Received END CONVERSATION WITH ERROR</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-282">では、 **がメッセージ交換の相手側からユーザー定義エラーを受信すると、** Received END CONVERSATION WITH ERROR [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-282">generates a **Received END CONVERSATION WITH ERROR** event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a user-defined error from the other side of the conversation.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-283">では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がブローカー定義エラーを受信した場合は、このイベントは生成されません。</span><span class="sxs-lookup"><span data-stu-id="c5997-283">does not generate this event when [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] receives a broker-defined error.</span></span>|  
|<span data-ttu-id="c5997-284">9</span><span class="sxs-lookup"><span data-stu-id="c5997-284">9</span></span>|<span data-ttu-id="c5997-285">Received Broker Error Message</span><span class="sxs-lookup"><span data-stu-id="c5997-285">Received Broker Error Message</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-286">では、 **がメッセージ交換の相手側からブローカー定義エラー メッセージを受信すると、** Received Broker Error Message [!INCLUDE[ssSB](../../includes/sssb-md.md)] イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-286">generates a **Received Broker Error Message** event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] receives a broker-defined error message from the other side of the conversation.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-287">では、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] がアプリケーションで生成されたエラー メッセージを受信した場合は、このイベントは生成されません。</span><span class="sxs-lookup"><span data-stu-id="c5997-287">does not generate this event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] receives an error message that was generated by an application.</span></span><br /><br /> <span data-ttu-id="c5997-288">たとえば、現在のデータベースに転送先のデータベースへの既定のルートが含まれている場合、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] ではサービス名が不明なメッセージをその転送先にルーティングします。</span><span class="sxs-lookup"><span data-stu-id="c5997-288">For example, if the current database contains a default route to a forwarding database, [!INCLUDE[ssSB](../../includes/sssb-md.md)] routes a message with an unknown service name to the forwarding database.</span></span> <span data-ttu-id="c5997-289">転送先のデータベースがメッセージをルーティングできない場合、そのデータベースのブローカーでエラー メッセージが作成され、現在のデータベースに返されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-289">If that database cannot route the message, the broker in that database creates an error message and returns that error message to the current database.</span></span> <span data-ttu-id="c5997-290">現在のデータベースが転送先のデータベースからブローカーが生成したエラーを受信すると、現在のデータベースで **Received Broker Error Message** イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-290">When the current database receives the broker-generated error from the forwarding database, the current database generates a **Received Broker Error Message** event.</span></span>|  
|<span data-ttu-id="c5997-291">10</span><span class="sxs-lookup"><span data-stu-id="c5997-291">10</span></span>|<span data-ttu-id="c5997-292">Received END CONVERSATION Ack</span><span class="sxs-lookup"><span data-stu-id="c5997-292">Received END CONVERSATION Ack</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-293">では、メッセージ交換のこちら側から送信された End Dialog メッセージまたは Error メッセージの受信が相手側で確認されるときに、 **Received END CONVERSATION Ack** イベント クラスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-293">generates a **Received END CONVERSATION Ack** event class when the other side of a conversation acknowledges an End Dialog or Error message sent by this side of the conversation.</span></span>|  
|<span data-ttu-id="c5997-294">11</span><span class="sxs-lookup"><span data-stu-id="c5997-294">11</span></span>|<span data-ttu-id="c5997-295">BEGIN DIALOG</span><span class="sxs-lookup"><span data-stu-id="c5997-295">BEGIN DIALOG</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-296">では、データベース エンジンで BEGIN DIALOG コマンドが実行されるときに、 **BEGIN DIALOG** イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-296">generates a **BEGIN DIALOG** event when the Database Engine executes a BEGIN DIALOG command.</span></span>|  
|<span data-ttu-id="c5997-297">12</span><span class="sxs-lookup"><span data-stu-id="c5997-297">12</span></span>|<span data-ttu-id="c5997-298">Dialog Created</span><span class="sxs-lookup"><span data-stu-id="c5997-298">Dialog Created</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="c5997-299">によってダイアログのエンドポイントが作成されるときに、Dialog Created イベントが生成**され** [!INCLUDE[ssSB](../../includes/sssb-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="c5997-299">generates a **Dialog Created** event when [!INCLUDE[ssSB](../../includes/sssb-md.md)] creates an endpoint for a dialog.</span></span> [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="c5997-300">は、現在のデータベースがダイアログの開始側か相手側かにかかわらず、新しいダイアログが確立されるたびにエンドポイントを作成します。</span><span class="sxs-lookup"><span data-stu-id="c5997-300">creates an endpoint whenever a new dialog is established, regardless of whether the current database is the initiator or the target of the dialog.</span></span>|  
|<span data-ttu-id="c5997-301">13</span><span class="sxs-lookup"><span data-stu-id="c5997-301">13</span></span>|<span data-ttu-id="c5997-302">END CONVERSATION WITH CLEANUP</span><span class="sxs-lookup"><span data-stu-id="c5997-302">END CONVERSATION WITH CLEANUP</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="c5997-303">では、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] で WITH CLEANUP 句を指定した END CONVERSATION ステートメントが実行されるときに、END CONVERSATION WITH CLEANUP イベントが生成されます。</span><span class="sxs-lookup"><span data-stu-id="c5997-303">generates an END CONVERSATION WITH CLEANUP event when the [!INCLUDE[ssDE](../../includes/ssde-md.md)] executes an END CONVERSATION statement that includes the WITH CLEANUP clause.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="c5997-304">参照</span><span class="sxs-lookup"><span data-stu-id="c5997-304">See Also</span></span>  
 [<span data-ttu-id="c5997-305">SQL Server Service Broker (SQL Server Service Broker)</span><span class="sxs-lookup"><span data-stu-id="c5997-305">SQL Server Service Broker</span></span>](../../database-engine/configure-windows/sql-server-service-broker.md)  
  
  
