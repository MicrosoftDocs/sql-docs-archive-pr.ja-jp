---
title: データ層アプリケーションの監視 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ''
ms.topic: conceptual
helpviewer_keywords:
- monitoring [SQL Server], data-tier applications
- monitoring server performance [SQL Server], DACs
- data-tier application [SQL Server], monitor
ms.assetid: d2765828-2385-4019-aef2-1de3ab7d1b26
author: stevestein
ms.author: sstein
ms.openlocfilehash: 100ad85847c131b71ea6eff93346f283f70aaec0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87645647"
---
# <a name="monitor-data-tier-applications"></a><span data-ttu-id="97bb4-102">データ層アプリケーションの監視</span><span class="sxs-lookup"><span data-stu-id="97bb4-102">Monitor Data-tier Applications</span></span>
  <span data-ttu-id="97bb4-103">データ層アプリケーション (DAC) は、システム ビューおよびシステム テーブルと共に **(SSMS) で** ユーティリティ エクスプローラー **および** オブジェクト エクスプローラー [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] から監視できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-103">A data-tier application (DAC) can be monitored from the **Utility Explorer** and **Object Explorer** in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] (SSMS), along with system views and tables.</span></span> <span data-ttu-id="97bb4-104">さらに、DAC に含まれるデータベース内のオブジェクトもすべて、データベースと [!INCLUDE[ssDE](../../includes/ssde-md.md)] の標準的な監視方法を使用して監視できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-104">In addition, all objects in the database contained in the DAC can be monitored using standard database and [!INCLUDE[ssDE](../../includes/ssde-md.md)] monitoring techniques.</span></span>  
  
## <a name="before-you-begin"></a><span data-ttu-id="97bb4-105">はじめに</span><span class="sxs-lookup"><span data-stu-id="97bb4-105">Before You Begin</span></span>  
 <span data-ttu-id="97bb4-106">[!INCLUDE[ssDE](../../includes/ssde-md.md)]のマネージド インスタンスに DAC を配置した場合、その配置した DAC の情報は、次回ユーティリティ コレクション セットがインスタンスからユーティリティ コントロール ポイントへと送信されるときに SQL Server ユーティリティに組み込まれます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-106">If you deploy a DAC to a managed instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], information about the deployed DAC is incorporated into the SQL Server Utility the next time the utility collection set is sent from the instance to the utility control point.</span></span> <span data-ttu-id="97bb4-107">[!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] **ユーティリティ エクスプローラー**を使用すると、DAC に関する基本的な正常性の情報を表示できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-107">You can then view basic health information about the DAC by using the [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] **Utility Explorer**.</span></span>  
  
 <span data-ttu-id="97bb4-108">SSMS **オブジェクト エクスプローラー** では、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスが SQL Server ユーティリティに管理されているかどうかにかかわらず、インスタンスに配置された各 DAC についての基本的な構成情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-108">The SSMS **Object Explorer** displays basic configuration information about each DAC deployed to an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], regardless of whether the instance is managed in the SQL Server Utility.</span></span> <span data-ttu-id="97bb4-109">また、データベースの監視と同じ手順で、配置された DAC に関連付けられたデータベースを監視することもできます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-109">Also, the database associated with a deployed DAC can be monitored using the same procedures for monitoring any database.</span></span>  
  
## <a name="using-the-sql-server-utility"></a><span data-ttu-id="97bb4-110">SQL Server ユーティリティの使用</span><span class="sxs-lookup"><span data-stu-id="97bb4-110">Using the SQL Server Utility</span></span>  
 <span data-ttu-id="97bb4-111">[!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] **ユーティリティ エクスプローラー**の **[配置済みのデータ層アプリケーション]** 詳細ページにダッシュボードが表示されます。このダッシュボードに[!INCLUDE[ssDE](../../includes/ssde-md.md)]のマネージド インスタンスに配置済みのすべての DAC に関するリソース使用状況が報告されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-111">The **Deployed Data-tier Applications** detail page in the [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] **Utility Explorer** displays a dashboard that reports the resource utilization of all DACs that have been deployed to managed instances of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="97bb4-112">詳細ページの上部ペインには、配置済みの各 DAC が視覚インジケーターと共に表示されます。視覚インジケーターは、CPU およびファイル リソースの使用状況が [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティのために定義されたポリシーに適合しているかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-112">The top pane of the details page lists each deployed DAC with visual indicators showing whether their utilization of CPU and file resources are outside the policies defined for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="97bb4-113">リスト ビュー内の任意の DAC を選択すると、さらに詳細な情報がページの下部ペインにあるタブに表示されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-113">If you select any DAC in the list view, further details are displayed in tabs in the bottom pane of the page.</span></span> <span data-ttu-id="97bb4-114">詳細ページに示される情報の詳細については、「[配置済みのデータ層アプリケーションの詳細 &#40;SQL Server ユーティリティ&#41;](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="97bb4-114">For more information about the information presented on the details page, see [Deployed Data-tier Application Details &#40;SQL Server Utility&#41;](../../database-engine/deployed-data-tier-application-details-sql-server-utility.md).</span></span>  
  
 <span data-ttu-id="97bb4-115">**[配置済みのデータ層アプリケーション]** の詳細ページを使用すると、ハードウェア リソースを十分に活用していない DAC や、ハードウェア リソースに負荷を生じている DAC を迅速に特定でき、問題に対処するための計画を立てることができます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-115">After using the **Deployed Data-tier Applications** detail page to quickly identify any DACs that are either under-utilizing or stressing their hardware resource, you can make plans to address any problems.</span></span> <span data-ttu-id="97bb4-116">現在のハードウェア リソースを十分に活用していない DAC が複数ある場合には、1 台のサーバーに統合して、一部のサーバーを別の用途のために解放することもできます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-116">Multiple DACs that are not fully utilizing their current hardware resources could be consolidated to a single server, freeing some of the servers for other uses.</span></span> <span data-ttu-id="97bb4-117">現在のサーバー上のリソースに負荷を生じている DAC がある場合は、その DAC を規模の大きいサーバーに移動することも、現在のサーバーにリソースを追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-117">If a DAC is stressing the resources on its current server, the DAC can be moved to a larger server, or additional resources can be added to the current server.</span></span>  
  
 <span data-ttu-id="97bb4-118">リソース使用率の制限の最小値と最大値は、アプリケーション監視ポリシーによって定義されます。このポリシーは、 **[ユーティリティ管理]** 詳細ページで定義されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-118">The minimum and maximum limits for resource usage are defined by application monitoring policies defined in the **Utility Administration** details page.</span></span> <span data-ttu-id="97bb4-119">データベース管理者は、所属する組織で規定されている制限値に適合するようポリシーを調整できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-119">Database administrators can tailor the policies to match the limits established by their organizations.</span></span> <span data-ttu-id="97bb4-120">たとえば、ある企業では DAC の最大 CPU 使用率を 75% に設定し、別の企業では 80% に設定する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="97bb4-120">For example, one company might set 75% as the maximum CPU utilization for a DAC, while another company might set the maximum at 80%.</span></span> <span data-ttu-id="97bb4-121">アプリケーション監視ポリシーの設定の詳細については、「[ユーティリティの管理 &#40;SQL Server ユーティリティ&#41;](../../database-engine/utility-administration-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="97bb4-121">For more information about setting application monitoring policies, see [Utility Administration &#40;SQL Server Utility&#41;](../../database-engine/utility-administration-sql-server-utility.md).</span></span>  
  
 <span data-ttu-id="97bb4-122">**[配置済みのデータ層アプリケーション]** 詳細ページを表示するには</span><span class="sxs-lookup"><span data-stu-id="97bb4-122">To view the **Deployed Data-tier Applications** detail page:</span></span>  
  
1.  <span data-ttu-id="97bb4-123">**[表示]** メニューの [ユーティリティ エクスプローラー] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="97bb4-123">Select the **View/Utility Explorer** menu.</span></span>  
  
2.  <span data-ttu-id="97bb4-124">**ユーティリティ エクスプローラー** をユーティリティ コントロール ポイント (UCP) に接続します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-124">Connect the **Utility Explorer** to the utility control point (UCP).</span></span>  
  
3.  <span data-ttu-id="97bb4-125">**[表示]** メニューの [ユーティリティ エクスプローラーの詳細] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="97bb4-125">Select the **View/Utility Explorer Details** menu.</span></span>  
  
4.  <span data-ttu-id="97bb4-126">**ユーティリティ エクスプローラー** で **[配置済みのデータ層アプリケーション]** ノードをクリックします。</span><span class="sxs-lookup"><span data-stu-id="97bb4-126">Select the **Deployed Data-tier Applications** node in the **Utility Explorer**.</span></span>  
  
 <span data-ttu-id="97bb4-127">**[配置済みのデータ層アプリケーション]** 詳細ページに表示される情報は、ユーティリティ管理データ ウェアハウスのデータから取得されます。データ ウェアハウスは、既定で 15 分ごとにデータを収集します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-127">The information in the **Deployed Data-tier Applications** detail page comes from the data in the utility management data warehouse, which defaults to collecting the data every 15 minutes.</span></span> <span data-ttu-id="97bb4-128">この間隔も **[ユーティリティ管理]** 詳細ページで調整できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-128">The interval can also be tailored using the **Utility Administration** details page.</span></span>  
  
## <a name="using-object-explorer"></a><span data-ttu-id="97bb4-129">オブジェクト エクスプローラーの使用</span><span class="sxs-lookup"><span data-stu-id="97bb4-129">Using Object Explorer</span></span>  
 <span data-ttu-id="97bb4-130">SSMS **オブジェクト エクスプローラー** には、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスに配置された各 DAC についての基本的な構成情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-130">The SSMS **Object Explorer** displays basic configuration information about each DAC deployed to an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="97bb4-131">これには、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティに登録済みのマネージド インスタンスと、 **ユーティリティ エクスプローラー**では表示できないスタンドアロン インスタンスの両方が含まれます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-131">This includes both managed instances that have been enrolled in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, and stand-alone instances that cannot be viewed in the **Utility Explorer**.</span></span>  
  
 <span data-ttu-id="97bb4-132">[!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスに配置された DAC の詳細を表示するには</span><span class="sxs-lookup"><span data-stu-id="97bb4-132">To view the details of a DAC deployed to an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)]:</span></span>  
  
1.  <span data-ttu-id="97bb4-133">**[表示]** メニューの [オブジェクト エクスプローラー] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="97bb4-133">Select the **View/Object Explorer** menu.</span></span>  
  
2.  <span data-ttu-id="97bb4-134">[オブジェクト エクスプローラー] ペインから [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスに接続します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-134">Connect to the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)]from the Object Explorer pane.</span></span>  
  
3.  <span data-ttu-id="97bb4-135">**[表示]** メニューの [オブジェクト エクスプローラーの詳細] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="97bb4-135">Select the **View/Object Explorer Details** menu.</span></span>  
  
4.  <span data-ttu-id="97bb4-136">**オブジェクト エクスプローラー** でインスタンスにマップしているサーバー ノードを選択して、 **[管理]** 、[データ層アプリケーション] の順に移動します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-136">Select the server node in **Object Explorer** that maps to the instance, and then navigate to the **Management\Data-tier Applications** node.</span></span>  
  
5.  <span data-ttu-id="97bb4-137">詳細ページの上部ペインにあるリスト ビューに、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンスに配置された各 DAC が一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-137">The list view in the top pane of the details page lists each DAC deployed to the instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="97bb4-138">ページ下部にある詳細ペインに情報を表示する DAC を選択します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-138">Select a DAC to display the information in the detail pane at the bottom of the page.</span></span>  
  
 <span data-ttu-id="97bb4-139">**[データ層アプリケーション]** ノードの右クリック メニューを使用して、新しい DAC を配置したり、既存の DAC を削除することもできます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-139">The right-click menu of the **Data-tier Applications** node is also used to deploy a new DAC or delete an existing DAC.</span></span>  
  
## <a name="using-the-dac-system-views-and-tables"></a><span data-ttu-id="97bb4-140">DAC のシステム ビューとシステム テーブルの使用</span><span class="sxs-lookup"><span data-stu-id="97bb4-140">Using the DAC System Views and Tables</span></span>  
 <span data-ttu-id="97bb4-141">msdb.dbo.sysdac_history_internal システム テーブルは、 [!INCLUDE[ssDE](../../includes/ssde-md.md)]のインスタンス上で実行されるすべての DAC 管理アクションの成功または失敗を記録します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-141">The msdb.dbo.sysdac_history_internal system table records the success or failure of all DAC management actions performed on an instance of the [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span> <span data-ttu-id="97bb4-142">このテーブルには、各アクションの発生時刻とアクションを開始したログインが記録されます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-142">The table records the time each action occurred, and which login initiated the action.</span></span> <span data-ttu-id="97bb4-143">詳細については、「[sysdac_history_internal &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/data-tier-application-tables-sysdac-history-internal)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="97bb4-143">For more information, see [sysdac_history_internal &#40;Transact-SQL&#41;](/sql/relational-databases/system-tables/data-tier-application-tables-sysdac-history-internal).</span></span>  
  
 <span data-ttu-id="97bb4-144">DAC システム ビューは、基本的なカタログ情報を報告します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-144">The DAC system views report basic catalog information.</span></span> <span data-ttu-id="97bb4-145">詳細については、「[データ層アプリケーションのビュー &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/data-tier-application-views-dbo-sysdac-instances)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="97bb4-145">For more information, see [Data-tier Application Views &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/data-tier-application-views-dbo-sysdac-instances).</span></span>  
  
## <a name="monitoring-dac-databases"></a><span data-ttu-id="97bb4-146">DAC データベースの監視</span><span class="sxs-lookup"><span data-stu-id="97bb4-146">Monitoring DAC Databases</span></span>  
 <span data-ttu-id="97bb4-147">DAC が正常に配置されると、DAC に含まれるデータベースは、他のデータベースと同様に動作します。</span><span class="sxs-lookup"><span data-stu-id="97bb4-147">After a DAC has been successfully deployed, the database contained in the DAC operates the same as any other database.</span></span> <span data-ttu-id="97bb4-148">データベースに関するパフォーマンス、ログ、イベント、およびリソース使用状況は、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] の標準的なテクニックとツールを使用して監視できます。</span><span class="sxs-lookup"><span data-stu-id="97bb4-148">Use standard [!INCLUDE[ssDE](../../includes/ssde-md.md)] techniques and tools for monitoring the performance, log, events, and resource utilization of the database.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="97bb4-149">参照</span><span class="sxs-lookup"><span data-stu-id="97bb4-149">See Also</span></span>  
 <span data-ttu-id="97bb4-150">[[データ層アプリケーション]](data-tier-applications.md) </span><span class="sxs-lookup"><span data-stu-id="97bb4-150">[Data-tier Applications](data-tier-applications.md) </span></span>  
 [<span data-ttu-id="97bb4-151">データ層アプリケーションの配置</span><span class="sxs-lookup"><span data-stu-id="97bb4-151">Deploy a Data-tier Application</span></span>](deploy-a-data-tier-application.md)  
  
  
