---
title: SQL Server ユーティリティ コントロール ポイントの作成 (SQL Server ユーティリティ) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
f1_keywords:
- SQL12.SWB.create.ucp.progress.F1
- SQL12.SWB.create.ucp.welcome.F1
- SQL12.SWB.create.ucp.Summary.F1
- SQL12.SWB.create.ucp.validation.F1
- SQL12.SWB.create.ucp.instancename.F1
- SQL12.SWB.create.ucp.agentconfiguration.F1
helpviewer_keywords:
- Create UCP
- UCP
ms.assetid: d5335124-1625-47ce-b4ac-36078967158c
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 833c83868230c2ac05514db666bd4cab629d9588
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87633147"
---
# <a name="create-a-sql-server-utility-control-point-sql-server-utility"></a><span data-ttu-id="8f07c-102">SQL Server ユーティリティ コントロール ポイントの作成 (SQL Server ユーティリティ)</span><span class="sxs-lookup"><span data-stu-id="8f07c-102">Create a SQL Server Utility Control Point (SQL Server Utility)</span></span>
  <span data-ttu-id="8f07c-103">企業では、複数の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティを所有することができ、各 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティでは、多くの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスおよびデータ層アプリケーションを管理できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-103">An enterprise can have multiple [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utilities, and each [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility can manage many instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and data-tier applications.</span></span> <span data-ttu-id="8f07c-104">各 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティには、ユーティリティ コントロール ポイント (UCP) を 1 つだけ含めることができます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-104">Every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility has one and only one utility control point (UCP).</span></span> <span data-ttu-id="8f07c-105">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティごとに新しい UCP を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-105">You must create a new UCP for each [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="8f07c-106">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の各マネージド インスタンス、および各データ層アプリケーション コンポーネントは、1 つの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティのみのメンバーであり、1 つの UCP で管理されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-106">Each managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and every data-tier application is a member of one and only one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, and is managed by a single UCP.</span></span>

 <span data-ttu-id="8f07c-107">UCP では、15 分ごとに、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスから構成情報およびパフォーマンス情報を収集します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-107">The UCP collects configuration and performance information from managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] every 15 minutes.</span></span> <span data-ttu-id="8f07c-108">情報は UCP のユーティリティ管理データ ウェアハウス (UMDW) に格納されます。UMDW ファイル名は sysutility_mdw です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-108">This information is stored in the utility management data warehouse (UMDW) on the UCP; the UMDW file name is sysutility_mdw.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="8f07c-109">のパフォーマンス データはポリシーと比較され、リソース使用時のボトルネックおよび統合の可能性を特定するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-109">performance data is compared to policies to help identify resource use bottlenecks and consolidation opportunities.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="8f07c-110">はじめに</span><span class="sxs-lookup"><span data-stu-id="8f07c-110">Before You Begin</span></span>
 <span data-ttu-id="8f07c-111">UCP を作成する前に、次の要件と推奨事項を確認してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-111">Before you create a UCP, review the following requirements and recommendations.</span></span>

 <span data-ttu-id="8f07c-112">このリリースでは、UCP および [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のすべてのマネージド インスタンスが次の要件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-112">In this release, the UCP and all managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must satisfy the following requirements:</span></span>

-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="8f07c-113">は Version 10.50 以上である必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-113">must be version 10.50 or higher.</span></span>

-   <span data-ttu-id="8f07c-114">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスの型は [!INCLUDE[ssDE](../../includes/ssde-md.md)]であることが必要です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-114">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance type must be [!INCLUDE[ssDE](../../includes/ssde-md.md)].</span></span>

-   <span data-ttu-id="8f07c-115">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティは、単一の Windows ドメイン、または双方向の信頼関係を持つドメイン間で操作する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-115">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility must operate within a single Windows domain, or across domains with two-way trust relationships.</span></span>

-   <span data-ttu-id="8f07c-116">SQL Server の UCP およびすべてのマネージド インスタンスの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] サービス アカウントには、Active Directory 内のユーザーに対する読み取り権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-116">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service accounts on the UCP and all managed instances of SQL Server must have read permission to Users in Active Directory.</span></span>

 <span data-ttu-id="8f07c-117">このリリースでは、UCP が次の要件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-117">In this release, the UCP must satisfy the following requirements:</span></span>

-   <span data-ttu-id="8f07c-118">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスはサポートされているエディションである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-118">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be a supported edition.</span></span> <span data-ttu-id="8f07c-119">の各エディションでサポートされる機能の一覧につい [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ては、「 [SQL Server 2014 の各エディションがサポートする機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-119">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

-   <span data-ttu-id="8f07c-120">UCP は [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の大文字と小文字が区別されるインスタンスでホストすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-120">We recommend that the UCP is hosted by a case-sensitive instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>

 <span data-ttu-id="8f07c-121">UCP コンピューター上のキャパシティ プランニングについては、次の推奨事項を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-121">Consider the following recommendations for capacity planning on the UCP computer:</span></span>

-   <span data-ttu-id="8f07c-122">一般的なシナリオでは、UCP の UMDW データベース (sysutility_mdw) で使用されるディスク領域は、SQL Server のマネージド インスタンス 1 つにつき年間約 2 GB です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-122">In a typical scenario, disk space used by the UMDW database (sysutility_mdw) on the UCP is approximately 2 GB per managed instance of SQL Server per year.</span></span> <span data-ttu-id="8f07c-123">この推定値は、マネージド インスタンスによって収集されるデータベース オブジェクトおよびシステム オブジェクトの数に応じて変化します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-123">This estimate can vary depending on the number of database and system objects collected by the managed instance.</span></span> <span data-ttu-id="8f07c-124">UMDW (sysutility_mdw) のディスク領域の増加率は、最初の 2 日間で最大になります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-124">The UMDW (sysutility_mdw) disk space growth rate is highest during the first two days.</span></span>

-   <span data-ttu-id="8f07c-125">一般的なシナリオでは、UCP の msdb に使用されるディスク領域は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のマネージド インスタンス 1 つにつき約 20 MB です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-125">In a typical scenario, disk space used by msdb on the UCP is approximately 20 MB per managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="8f07c-126">この推定値は、リソース使用率のポリシーと、マネージド インスタンスによって収集されるデータベース オブジェクトおよびシステム オブジェクトの数に応じて変化します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-126">Note that this estimate can vary depending on the resource utilization policies and the number of database and system objects collected by the managed instance.</span></span> <span data-ttu-id="8f07c-127">一般に、ポリシー違反の数が増加したり、変化しやすいリソースの移動期間が長くなるにつれて、使用されるディスク領域が増加します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-127">In general, disk space usage increases as the number of policy violations increases and the duration of the moving time window for volatile resources increases.</span></span>

-   <span data-ttu-id="8f07c-128">UCP からマネージド インスタンスを削除しても、マネージド インスタンスのデータ保持期間の有効期限が切れるまでは、UCP のデータベースで使用されているディスク領域は縮小されません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-128">Note that removing a managed instance from the UCP will not reduce the disk space used by UCP databases until expiration of data retention periods for the managed instance.</span></span>

 <span data-ttu-id="8f07c-129">このリリースでは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のすべてのマネージド インスタンスが次の要件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-129">In this release, all managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must satisfy the following requirements:</span></span>

-   <span data-ttu-id="8f07c-130">UCP をホストする [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]インスタンスが大文字と小文字を区別しない場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスでも大文字と小文字を区別しないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-130">We recommend that if the UCP is hosted by a case-insensitive instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], then managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should also be case-insensitive.</span></span>

-   <span data-ttu-id="8f07c-131">FILESTREAM データは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティの監視機能ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-131">FILESTREAM data are not supported for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility monitoring.</span></span>

 <span data-ttu-id="8f07c-132">詳細については、 [SQL Server 2014 の各エディションがサポート](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)する SQL Server および機能[の最大容量仕様に](../../sql-server/maximum-capacity-specifications-for-sql-server.md)関する説明を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-132">For more information, see [Maximum Capacity Specifications for SQL Server](../../sql-server/maximum-capacity-specifications-for-sql-server.md) and [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

### <a name="remove-previous-utility-control-points-before-installing-a-new-one"></a><span data-ttu-id="8f07c-133">新しいユーティリティ コントロール ポイントをインストールする前に、以前のものを削除する</span><span class="sxs-lookup"><span data-stu-id="8f07c-133">Remove Previous Utility Control Points Before Installing a New One</span></span>
 <span data-ttu-id="8f07c-134">ユーティリティ コントロール ポイント (UCP) として構成されたことのある SQL Server インスタンスに UCP をインストールする場合、事前に SQL Server のすべてのマネージド インスタンスと UCP を削除しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-134">If you are installing a utility control point (UCP) on an instance of SQL Server that was ever configured as a UCP, you must remove all managed instances of SQL Server and remove the UCP before doing so.</span></span> <span data-ttu-id="8f07c-135">これには、 **sp_sysutility_ucp_remove** ストアド プロシージャを実行します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-135">You do this by running the **sp_sysutility_ucp_remove** stored procedure.</span></span>

 <span data-ttu-id="8f07c-136">このプロシージャは、次の要件を理解したうえで実行してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-136">Before you run the procedure, note the following requirements:</span></span>

-   <span data-ttu-id="8f07c-137">このプロシージャは、UCP として構成されたコンピューターで実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-137">This procedure must be run on a computer that is a UCP.</span></span>

-   <span data-ttu-id="8f07c-138">このプロシージャは、sysadmin 権限を持つユーザーが実行する必要があります。この権限は、UCP の作成に必要な権限と同じです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-138">This procedure must be run by a user with sysadmin permissions, the same permissions required to create a UCP.</span></span>

-   <span data-ttu-id="8f07c-139">SQL Server のマネージド インスタンスをすべて UCP から削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-139">All managed instances of SQL Server must be removed from the UCP.</span></span> <span data-ttu-id="8f07c-140">UCP は、SQL Server のマネージド インスタンスの 1 つです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-140">Note that the UCP is a managed instance of SQL Server.</span></span> <span data-ttu-id="8f07c-141">詳細については、「[SQL Server ユーティリティから SQL Server のインスタンスを削除する方法](https://go.microsoft.com/fwlink/?LinkId=169392)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-141">For more information, see [How to: Remove an Instance of SQL Server from the SQL Server Utility](https://go.microsoft.com/fwlink/?LinkId=169392).</span></span>

 <span data-ttu-id="8f07c-142">このプロシージャを使用して、SQL Server UCP を SQL Server ユーティリティから削除します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-142">Use this procedure to remove a SQL Server UCP from the SQL Server Utility.</span></span> <span data-ttu-id="8f07c-143">操作の完了後は、この SQL Server インスタンスに再度 UCP を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-143">After the operation is complete, a UCP can be created on the instance of SQL Server again.</span></span>

 <span data-ttu-id="8f07c-144">UCP に接続するには、SQL Server Management Studio を使用して、次のスクリプトを実行します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-144">Use SQL Server Management Studio to connect to the UCP, then run this script:</span></span>

```sql
EXEC msdb.dbo.sp_sysutility_ucp_remove;
```

> [!NOTE]
>  <span data-ttu-id="8f07c-145">UCP を削除した SQL Server インスタンスにユーティリティ以外のデータ コレクション セットがある場合、このプロシージャでは sysutility_mdw データベースが削除されません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-145">If the instance of SQL Server where the UCP was removed has a non-Utility data collection set, the sysutility_mdw database is not dropped by the procedure.</span></span> <span data-ttu-id="8f07c-146">この場合、再度 UCP を作成するには、あらかじめ手動で sysutility_mdw データベースを削除しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-146">If this is the case, the sysutility_mdw database must be dropped manually before the UCP can be created again.</span></span>

 <span data-ttu-id="8f07c-147">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の各マネージド インスタンス、および各データ層アプリケーション コンポーネントは、1 つの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティのみのメンバーであり、1 つの UCP で管理されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-147">Each managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and every data-tier application is a member of one and only one [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, and is managed by a single UCP.</span></span> <span data-ttu-id="8f07c-148">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティの概念の詳細については、「 [SQL Server ユーティリティの機能とタスク](sql-server-utility-features-and-tasks.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-148">For more information about [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility concepts, see [SQL Server Utility Features and Tasks](sql-server-utility-features-and-tasks.md).</span></span>

 <span data-ttu-id="8f07c-149">UCP は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティの中心的な裏付けとなるポイントです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-149">A UCP is the central reasoning point of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="8f07c-150">UCP を使用すると、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスと [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データ層アプリケーションから収集された構成情報およびパフォーマンス情報を表示して、一般的なキャパシティ プランニングのアクティビティを実行できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-150">Using the UCP, you can view configuration and performance information collected from managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data-tier applications, and perform general capacity planning activities.</span></span> <span data-ttu-id="8f07c-151">UCP は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティから [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスを登録および削除するための開始ポイントです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-151">The UCP is the launch point for enrolling and removing instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

 <span data-ttu-id="8f07c-152">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティに登録した後、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスとデータ層アプリケーションのリソースの正常性を監視して、統合の可能性を特定し、リソースのボトルネックを分離できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-152">After enrolling instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, you can monitor resource health for managed instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and data-tier applications to identify consolidation opportunities and isolate resource bottlenecks.</span></span> <span data-ttu-id="8f07c-153">詳細については、「 [SQL Server ユーティリティでの SQL Server のインスタンスの監視](monitor-instances-of-sql-server-in-the-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-153">For more information, see [Monitor Instances of SQL Server in the SQL Server Utility](monitor-instances-of-sql-server-in-the-sql-server-utility.md).</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="8f07c-154">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ コレクション セットは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ以外のコレクション セットとサイド バイ サイドで実行できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-154">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set is supported side-by-side with non- [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection sets.</span></span> <span data-ttu-id="8f07c-155">つまり、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティのメンバーであれば、他のコレクション セットによって監視できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-155">That is, a managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can be monitored by other collection sets while it is a member of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span> <span data-ttu-id="8f07c-156">ただし、マネージド インスタンス上のすべてのコレクション セットは、データを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ管理データ ウェアハウスにアップロードすることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-156">Note, however, that all collection sets on the managed instance will upload their data to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility management data warehouse.</span></span> <span data-ttu-id="8f07c-157">詳細については、「[SQL Server の同じインスタンスでユーティリティ コレクション セットとユーティリティ以外のコレクション セットを実行する場合の考慮事項](run-utility-and-non-utility-collection-sets-on-same-sql-instance.md)」、および「[ユーティリティ コントロール ポイント データ ウェアハウスの構成 &#40;SQL Server Utility&#41;](configure-your-utility-control-point-data-warehouse-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-157">For more information, see [Considerations for Running Utility and non-Utility Collection Sets on the Same Instance of SQL Server](run-utility-and-non-utility-collection-sets-on-same-sql-instance.md) and [Configure Your Utility Control Point Data Warehouse &#40;SQL Server Utility&#41;](configure-your-utility-control-point-data-warehouse-sql-server-utility.md).</span></span>

## <a name="wizard-steps"></a><span data-ttu-id="8f07c-158">ウィザードの手順</span><span class="sxs-lookup"><span data-stu-id="8f07c-158">Wizard Steps</span></span>
 ![](../../database-engine/media/create-ucp.gif "Create_UCP")

 <span data-ttu-id="8f07c-159">以降のセクションでは、新しい [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP を作成するワーク フローで使用するウィザードの各ページについて説明します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-159">The following sections provide information about each page in the wizard work flow to create a new [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP.</span></span> <span data-ttu-id="8f07c-160">新しい UCP を作成するウィザードを起動するには、SSMS の [表示] メニューからユーティリティ エクスプローラーを開き、ユーティリティ エクスプローラーのウィンドウ上部にある ![](../../database-engine/media/create-ucp.gif "Create_UCP") **[UCP の作成]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-160">To launch the wizard to create a new UCP, open the Utility Explorer pane from the View menu in SSMS, then click on the ![](../../database-engine/media/create-ucp.gif "Create_UCP") **Create UCP** button at the top of the Utility Explorer pane.</span></span>

 <span data-ttu-id="8f07c-161">次の一覧にあるリンクをクリックすると、ウィザードのページの詳細に移動できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-161">Click on a link in the list below to navigate to details for a page in the Wizard.</span></span>

 <span data-ttu-id="8f07c-162">この操作を実行する PowerShell スクリプトの詳細については、 [例](#PowerShell_create_UCP)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-162">For more information about a PowerShell script of this operation, see the [example](#PowerShell_create_UCP).</span></span>

-   [<span data-ttu-id="8f07c-163">UCP の作成ウィザードの概要</span><span class="sxs-lookup"><span data-stu-id="8f07c-163">Introduction to Create UCP Wizard</span></span>](#Welcome)

-   [<span data-ttu-id="8f07c-164">インスタンスの指定</span><span class="sxs-lookup"><span data-stu-id="8f07c-164">Specify Instance</span></span>](#Instance_name)

-   [<span data-ttu-id="8f07c-165">接続ダイアログ</span><span class="sxs-lookup"><span data-stu-id="8f07c-165">Connection Dialog</span></span>](#Connection_dialog)

-   [<span data-ttu-id="8f07c-166">ユーティリティ コレクション セットのアカウント</span><span class="sxs-lookup"><span data-stu-id="8f07c-166">Utility Collection Set Account</span></span>](#Agent_configuration)

-   [<span data-ttu-id="8f07c-167">検証規則</span><span class="sxs-lookup"><span data-stu-id="8f07c-167">Validation Rules</span></span>](#Validation_rules)

-   [<span data-ttu-id="8f07c-168">まとめ</span><span class="sxs-lookup"><span data-stu-id="8f07c-168">Summary</span></span>](#Summary)

-   [<span data-ttu-id="8f07c-169">ユーティリティ コントロール ポイントの作成</span><span class="sxs-lookup"><span data-stu-id="8f07c-169">Creating the Utility Control Point</span></span>](#Creating_UCP)

##  <a name="introduction-to-create-ucp-wizard"></a><a name="Welcome"></a> <span data-ttu-id="8f07c-170">UCP の作成ウィザードの概要</span><span class="sxs-lookup"><span data-stu-id="8f07c-170">Introduction to Create UCP Wizard</span></span>
 <span data-ttu-id="8f07c-171">ユーティリティ エクスプローラーを開いたときに、接続されたユーティリティ コントロール ポイントがない場合は、ユーティリティ コントロール ポイントに接続するか、新しいユーティリティ コントロール ポイントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-171">If you open Utility Explorer and there is no connected utility control point, you must connect to one or create a new one.</span></span>

 <span data-ttu-id="8f07c-172">**既存の UCP に接続する** - ユーティリティ コントロール ポイントが既に配置されている場合は、ユーティリティ エクスプローラーのウィンドウ上部にある ![](../../database-engine/media/connect-to-utility.gif "Connect_to_Utility") **[ユーティリティへの接続]** ボタンをクリックして接続できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-172">**Connect to existing UCP** - If there is already a utility control point in your deployment, you can connect to it by clicking the ![](../../database-engine/media/connect-to-utility.gif "Connect_to_Utility")**Connect to Utility** button at the top of the Utility Explorer pane.</span></span> <span data-ttu-id="8f07c-173">既存の UCP に接続するには、管理者資格情報を持っているか、Utility Reader ロールのメンバーである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-173">To connect to an existing UCP, you must have administrator credentials or be a member of the Utility Reader role.</span></span> <span data-ttu-id="8f07c-174">UCP は [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティごとに 1 つだけ存在できます。また、1 つの SSMS インスタンスから接続できる UCP は 1 つだけです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-174">Note that there can only be one UCP per [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility and you can only be connected to one UCP from an instance of SSMS.</span></span>

 <span data-ttu-id="8f07c-175">**新しい UCP を作成する** - 新しいユーティリティ コントロール ポイントを作成するには、ユーティリティ エクスプローラーのウィンドウ上部にある ![](../../database-engine/media/create-ucp.gif "Create_UCP") **[UCP の作成]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-175">**Create a new UCP** - To create a new utility control point, click the ![](../../database-engine/media/create-ucp.gif "Create_UCP")**Create UCP** button at the top of the Utility Explorer pane.</span></span> <span data-ttu-id="8f07c-176">新しい UCP を作成するには、接続ダイアログで、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス名と管理者資格情報を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-176">To create a new UCP, you must specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name and provide administrator credentials in the connection dialog.</span></span> <span data-ttu-id="8f07c-177">UCP は 1 つの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティにつき 1 つだけ存在します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-177">Note that there can only be one UCP per [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

##  <a name="specify-instance"></a><a name="Instance_name"></a> <span data-ttu-id="8f07c-178">インスタンスの指定</span><span class="sxs-lookup"><span data-stu-id="8f07c-178">Specify Instance</span></span>
 <span data-ttu-id="8f07c-179">作成する UCP について、次の情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-179">Specify the following information about the UCP you are creating:</span></span>

-   <span data-ttu-id="8f07c-180">**インスタンス名** - 接続ダイアログで [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスを選択するには、 **[接続]** をクリックします。ComputerName\InstanceName の形式でコンピューター名と [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス名を指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-180">**Instance Name** - To select an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the connection dialog, click **Connect...**. Provide the computer name and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name in the format ComputerName\InstanceName.</span></span>

-   <span data-ttu-id="8f07c-181">**ユーティリティ名** - ネットワーク上で [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティを識別するために使用される名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-181">**Utility Name** - Specify a name that will be used to identify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility on the network.</span></span>

 <span data-ttu-id="8f07c-182">続行するには、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-182">To continue, click **Next**.</span></span>

##  <a name="connection-dialog"></a><a name="Connection_dialog"></a> <span data-ttu-id="8f07c-183">接続ダイアログ</span><span class="sxs-lookup"><span data-stu-id="8f07c-183">Connection Dialog</span></span>
 <span data-ttu-id="8f07c-184">[サーバーへの接続] ダイアログ ボックスで、サーバーの種類、コンピューター名、および [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス名の情報を確認します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-184">On the Connect to Server dialog box, verify the server type, computer name, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name information.</span></span> <span data-ttu-id="8f07c-185">詳細については、「[サーバーへの接続 &#40;データベース エンジン&#41;](../../ssms/f1-help/connect-to-server-database-engine.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-185">For more information, see [Connect to Server &#40;Database Engine&#41;](../../ssms/f1-help/connect-to-server-database-engine.md).</span></span>

> [!NOTE]
>  <span data-ttu-id="8f07c-186">接続が暗号化されている場合、暗号化された接続が使用されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-186">If the connection is encrypted, the encrypted connection will be used.</span></span> <span data-ttu-id="8f07c-187">接続が暗号化されていない場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティは暗号化された接続を使用して再接続します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-187">If the connection is not encrypted, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility will reconnect using an encrypted connection.</span></span>

 <span data-ttu-id="8f07c-188">続行するには、 **[接続]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-188">To continue, click **Connect...**.</span></span>

##  <a name="utility-collection-set-account"></a><a name="Agent_configuration"></a> <span data-ttu-id="8f07c-189">ユーティリティ コレクション セットのアカウント</span><span class="sxs-lookup"><span data-stu-id="8f07c-189">Utility Collection Set Account</span></span>
 <span data-ttu-id="8f07c-190">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ コレクション セットを実行する Windows ドメイン アカウントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-190">Specify a Windows domain account to run the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span> <span data-ttu-id="8f07c-191">このアカウントは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ コレクション セットの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント プロキシ アカウントとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-191">This account is used as the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span> <span data-ttu-id="8f07c-192">また、既存の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-192">Alternatively, you can use the existing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account.</span></span> <span data-ttu-id="8f07c-193">検証の要件を満たすには、次のガイドラインに従ってアカウントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-193">To pass validation requirements, use the following guidelines to specify the account.</span></span>

 <span data-ttu-id="8f07c-194">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントのオプションを指定する場合は、次のガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="8f07c-194">If you specify the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account option:</span></span>

-   <span data-ttu-id="8f07c-195">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントには、ビルトイン アカウント (LocalSystem、NetworkService、LocalService など) ではなく、Windows ドメイン アカウントを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-195">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a Windows domain account that is not a built-in account like LocalSystem, NetworkService, or LocalService.</span></span>

 <span data-ttu-id="8f07c-196">続行するには、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-196">To continue, click **Next**.</span></span>

##  <a name="validation-rules"></a><a name="Validation_rules"></a> <span data-ttu-id="8f07c-197">検証規則</span><span class="sxs-lookup"><span data-stu-id="8f07c-197">Validation Rules</span></span>
 <span data-ttu-id="8f07c-198">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のこのリリースでは、UCP が作成される [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスで、次の条件が満たされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-198">In this release of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the following conditions must be true on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where the UCP will be created:</span></span>

|<span data-ttu-id="8f07c-199">検証規則</span><span class="sxs-lookup"><span data-stu-id="8f07c-199">Validation rule</span></span>|<span data-ttu-id="8f07c-200">是正措置</span><span class="sxs-lookup"><span data-stu-id="8f07c-200">Corrective action</span></span>|
|---------------------|-----------------------|
|<span data-ttu-id="8f07c-201">ユーティリティ コントロール ポイントが作成される [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスに対する管理者特権が必要です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-201">You must have administrator privileges on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] where the utility control point will be created.</span></span>|<span data-ttu-id="8f07c-202">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスに対する管理者特権を持つアカウントでログオンします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-202">Log on with an account that has administrator privileges on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="8f07c-203">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のバージョンは 10.50 以上である必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-203">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] version must be 10.50 or higher.</span></span>|<span data-ttu-id="8f07c-204">UCP をホストする別の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-204">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="8f07c-205">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスはサポートされているエディションである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-205">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be a supported edition.</span></span> <span data-ttu-id="8f07c-206">の各エディションでサポートされる機能の一覧につい [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ては、「 [SQL Server 2014 の各エディションがサポートする機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-206">For a list of features that are supported by the editions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>|<span data-ttu-id="8f07c-207">UCP をホストする別の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-207">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="8f07c-208">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスに、別の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP に登録されている [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスは指定できません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-208">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must not be an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] enrolled with any other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UCP.</span></span>|<span data-ttu-id="8f07c-209">異なる [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスを指定して UCP をホストするか、現在 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のマネージド インスタンスである UCP から [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]インスタンスの登録を解除します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-209">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP, or unenroll the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] from the UCP where it is currently a managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="8f07c-210">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスは既にユーティリティ コントロール ポイントをホストしていてはいけません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-210">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot already be host to a utility control point.</span></span>|<span data-ttu-id="8f07c-211">UCP をホストする別の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-211">Specify a different instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to host the UCP.</span></span>|
|<span data-ttu-id="8f07c-212">指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスで TCP/IP を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-212">The specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have TCP/IP enabled.</span></span>|<span data-ttu-id="8f07c-213">指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]インスタンスの TCP/IP を有効にします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-213">Enable TCP/IP for the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>|
|<span data-ttu-id="8f07c-214">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスでは、データベースに "sysutility_mdw" という名前を付けることはできません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-214">The instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot have a database named "sysutility_mdw."</span></span>|<span data-ttu-id="8f07c-215">UCP を作成する操作により、"sysutility_mdw" という名前のユーティリティ管理データ ウェアハウス (UMDW) が作成されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-215">The create UCP operation will create a utility management data warehouse (UMDW) named "sysutility_mdw."</span></span> <span data-ttu-id="8f07c-216">この操作では、検証規則の実行時にこの名前がコンピューター上に存在しないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-216">The operation requires that the name does not exist on the computer at the time that validation rules are run.</span></span> <span data-ttu-id="8f07c-217">続行するには、"sysutility_mdw" という名前のデータベースを削除するか、その名前を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-217">To continue, you must remove or rename any database named "sysutility_mdw."</span></span> <span data-ttu-id="8f07c-218">名前変更操作の詳細については、「[ALTER DATABASE (Transact-SQL)](/sql/t-sql/statements/alter-database-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-218">For more information about renaming operations, see [ALTER DATABASE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-database-transact-sql).</span></span>|
|<span data-ttu-id="8f07c-219">指定された [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスのコレクション セットを停止する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-219">Collection sets on the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] must be stopped.</span></span>|<span data-ttu-id="8f07c-220">指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスで UCP が作成されている間は、既存のコレクション セットを停止します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-220">Stop pre-existing collection sets while the UCP is created on the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="8f07c-221">データ コレクターが無効になっている場合は、それを有効にして、実行中のコレクション セットを停止し、UCP の作成操作に対して検証規則を再実行します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-221">If the data collector is disabled, enable it, stop any running collection sets, then re-run validation rules for the Create UCP operation.</span></span><br /><br /> <span data-ttu-id="8f07c-222">データ コレクターを有効にするには :</span><span class="sxs-lookup"><span data-stu-id="8f07c-222">To enable the data collector:</span></span><br /><br /> <span data-ttu-id="8f07c-223">オブジェクト エクスプローラーで、 **[管理]** ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-223">In Object Explorer, expand the **Management** node.</span></span><br /><br /> <span data-ttu-id="8f07c-224">**[データ コレクション]** を右クリックし、 **[データ コレクションの有効化]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-224">Right-click **Data Collection**, and then click **Enable Data Collection**.</span></span><br /><br /> <span data-ttu-id="8f07c-225">コレクション セットを停止するには :</span><span class="sxs-lookup"><span data-stu-id="8f07c-225">To stop a collection set:</span></span><br /><br /> <span data-ttu-id="8f07c-226">オブジェクト エクスプローラーで、[管理] ノード、 **[データ コレクション]** 、 **[システム データ コレクション セット]** の順に展開します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-226">In Object Explorer, expand the Management node, expand **Data Collection**, and then expand **System Data Collection Sets**.</span></span><br /><br /> <span data-ttu-id="8f07c-227">停止するコレクション セットを右クリックして **[データ コレクション セットの停止]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-227">Right-click the collection set that you want to stop, and then click **Stop Data Collection Set**.</span></span><br /><br /> <span data-ttu-id="8f07c-228">メッセージ ボックスにはこのアクションの結果が表示され、コレクション セットのアイコンに赤い丸が付いている場合は、コレクション セットが停止していることを示します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-228">A message box will display the result of this action, and a red circle on the icon for the collection set indicates that the collection set has stopped.</span></span>|
|<span data-ttu-id="8f07c-229">指定したインスタンスで [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスを開始する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-229">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service on the specified instance must be started.</span></span> <span data-ttu-id="8f07c-230">指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] フェールオーバー クラスターのインスタンスである場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスを手動で開始するように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-230">If the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service must be configured to start manually.</span></span> <span data-ttu-id="8f07c-231">それ以外の場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスが自動的に開始されるように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-231">Otherwise, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service must be configured to start automatically.</span></span>|<span data-ttu-id="8f07c-232">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスを開始します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-232">Start the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service.</span></span> <span data-ttu-id="8f07c-233">指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] フェールオーバー クラスターのインスタンスである場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスを手動で開始するように構成します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-233">If the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance, configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service to start manually.</span></span> <span data-ttu-id="8f07c-234">それ以外の場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスが自動的に開始されるように構成します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-234">Otherwise, configure the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service to start automatically.</span></span>|
|<span data-ttu-id="8f07c-235">WMI が正しく構成されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-235">WMI must be configured correctly.</span></span>|<span data-ttu-id="8f07c-236">WMI の構成をトラブルシューティングするには、「 [SQL Server ユーティリティのトラブルシューティング](../../database-engine/troubleshoot-the-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-236">To troubleshoot WMI configuration, see [Troubleshoot the SQL Server Utility](../../database-engine/troubleshoot-the-sql-server-utility.md).</span></span>|
|<span data-ttu-id="8f07c-237">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント プロキシ アカウントには、ビルトイン アカウント (Network Service など) を使用できません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-237">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account cannot be a built-in account, like Network Service.</span></span>|<span data-ttu-id="8f07c-238">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント プロキシ アカウントがビルトイン アカウント (Network Service など) の場合は、Windows ドメイン アカウント sysadmin にアカウントを再割り当てします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-238">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account is a built-in account, like Network Service, re-assign the account to a Windows domain account that is sysadmin.</span></span>|
|<span data-ttu-id="8f07c-239">プロキシ アカウント オプションを選択した場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント プロキシ アカウントが Windows ドメインの有効なアカウントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-239">If you select the proxy account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent proxy account must be a valid Windows domain account.</span></span>|<span data-ttu-id="8f07c-240">有効な Windows ドメイン アカウントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-240">Specify a valid Windows domain account.</span></span> <span data-ttu-id="8f07c-241">アカウントが有効であることを確認するには、Windows ドメイン アカウントを使用して、指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスにログオンします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-241">To ensure that the account is valid, logon to the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the Windows domain account.</span></span>|
|<span data-ttu-id="8f07c-242">サービス アカウント オプションを選択した場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントにビルトイン アカウント (Network Service など) を使用できません。</span><span class="sxs-lookup"><span data-stu-id="8f07c-242">If you select the service account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account cannot be a built-in account, like Network Service.</span></span>|<span data-ttu-id="8f07c-243">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントがビルトイン アカウント (Network Service など) の場合は、Windows ドメイン アカウントにアカウントを再割り当てします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-243">If the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account is a built-in account, like Network Service, re-assign the account to a Windows domain account.</span></span>|
|<span data-ttu-id="8f07c-244">サービス アカウント オプションを選択した場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントは Windows ドメインの有効なアカウントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-244">If you select the service account option, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a valid Windows domain account.</span></span>|<span data-ttu-id="8f07c-245">有効な Windows ドメイン アカウントを指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-245">Specify a valid Windows domain account.</span></span> <span data-ttu-id="8f07c-246">アカウントが有効であることを確認するには、Windows ドメイン アカウントを使用して、指定した [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスにログオンします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-246">To ensure that the account is valid, logon to the specified instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using the Windows domain account.</span></span>|

 <span data-ttu-id="8f07c-247">検証結果に失敗した条件が示されている場合は、支障をきたす問題を解決した後、 **[検証の再実行]** をクリックして、コンピューターの構成を確認します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-247">If there are failed conditions in the validation results, correct the blocking issues and then click **Rerun Validation** to verify the computer configuration.</span></span>

 <span data-ttu-id="8f07c-248">検証レポートを保存するには、 **[レポートの保存]** をクリックし、ファイルの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-248">To save the validation report, click **Save Report** then specify a location for the file.</span></span>

 <span data-ttu-id="8f07c-249">続行するには、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-249">To continue, click **Next**.</span></span>

##  <a name="summary"></a><a name="Summary"></a> <span data-ttu-id="8f07c-250">まとめ</span><span class="sxs-lookup"><span data-stu-id="8f07c-250">Summary</span></span>
 <span data-ttu-id="8f07c-251">概要ページには、UCP について指定した情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-251">The summary page displays the information that you provided about the UCP:</span></span>

-   <span data-ttu-id="8f07c-252">UCP をホストする [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスの名前。</span><span class="sxs-lookup"><span data-stu-id="8f07c-252">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name that hosts the UCP.</span></span>

-   <span data-ttu-id="8f07c-253">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティの名前。</span><span class="sxs-lookup"><span data-stu-id="8f07c-253">The name of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

-   <span data-ttu-id="8f07c-254">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティのデータ収集に対してジョブを実行するために使用されるアカウントの名前。</span><span class="sxs-lookup"><span data-stu-id="8f07c-254">The name of the account that will be used to run jobs for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility data collection.</span></span>

 <span data-ttu-id="8f07c-255">UCP 構成設定を変更するには、 **[前へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-255">To change UCP configuration settings, click **Previous**.</span></span> <span data-ttu-id="8f07c-256">続行するには、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-256">To continue, click **Next**.</span></span>

##  <a name="creating-the-utility-control-point"></a><a name="Creating_UCP"></a> <span data-ttu-id="8f07c-257">ユーティリティ コントロール ポイントの作成</span><span class="sxs-lookup"><span data-stu-id="8f07c-257">Creating the Utility Control Point</span></span>
 <span data-ttu-id="8f07c-258">UCP の作成操作中は、ウィザードに手順と進行状況が表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-258">During the operation to create the UCP, the wizard will display the steps and provide status:</span></span>

-   <span data-ttu-id="8f07c-259">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスで UCP を作成する準備をしています。</span><span class="sxs-lookup"><span data-stu-id="8f07c-259">Preparing the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance for UCP creation.</span></span>

-   <span data-ttu-id="8f07c-260">ユーティリティ管理データ ウェアハウス (UMDW) を作成しています。</span><span class="sxs-lookup"><span data-stu-id="8f07c-260">Creating the utility management data warehouse (UMDW).</span></span>

-   <span data-ttu-id="8f07c-261">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UMDW を初期化しています。UMDW ファイル名は sysutility_mdw です。</span><span class="sxs-lookup"><span data-stu-id="8f07c-261">Initializing the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] UMDW; the UMDW file name is sysutility_mdw.</span></span>

-   <span data-ttu-id="8f07c-262">UCP を構成しています。</span><span class="sxs-lookup"><span data-stu-id="8f07c-262">Configuring the UCP.</span></span>

-   <span data-ttu-id="8f07c-263">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ コレクション セットを構成しています。</span><span class="sxs-lookup"><span data-stu-id="8f07c-263">Configuring the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility collection set.</span></span>

 <span data-ttu-id="8f07c-264">UCP の作成操作に関するレポートを保存するには、 **[レポートの保存]** をクリックし、ファイルの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-264">To save a report about the create UCP operation, click **Save Report** then specify a location for the file.</span></span>

 <span data-ttu-id="8f07c-265">ウィザードを完了するには、 **[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-265">To complete the wizard, click **Finish**.</span></span>

 <span data-ttu-id="8f07c-266">UCP の作成ウィザードを完了すると、SSMS のユーティリティ エクスプローラーのナビゲーション ウィンドウでは、UCP のノードが表示され、その下に、配置済みのデータ層アプリケーション、マネージド インスタンス、およびユーティリティ管理のノードが表示されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-266">After completing the Create UCP Wizard, the Utility Explorer navigation pane in SSMS displays a node for the UCP with nodes under it for Deployed Data-tier Applications, Managed Instances, and Utility Administration.</span></span> <span data-ttu-id="8f07c-267">UCP は自動的にマネージド インスタンスになります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-267">The UCP automatically becomes a managed instance.</span></span>

 <span data-ttu-id="8f07c-268">データ収集プロセスはすぐに開始されますが、ユーティリティ エクスプローラーのコンテンツ ウィンドウ内のダッシュボードとビューポイントに最初に表示されるまで最大 30 分かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="8f07c-268">The data collection process begins immediately, but it can take up to 30 minutes for data to first appear in the dashboard and viewpoints in the Utility Explorer content pane.</span></span> <span data-ttu-id="8f07c-269">データの収集は 15 分間隔で続行されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-269">Data collection continues once every 15 minutes.</span></span> <span data-ttu-id="8f07c-270">初期データは UCP 自体から取得されます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-270">Initial data will be from the UCP itself.</span></span> <span data-ttu-id="8f07c-271">つまり、UCP は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティにおいて、最初の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] マネージド インスタンスです。</span><span class="sxs-lookup"><span data-stu-id="8f07c-271">That is, the UCP is the first managed instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility.</span></span>

 <span data-ttu-id="8f07c-272">ダッシュボードを表示するには、SSMS のメニューで **[表示]** をクリックし、 **[ユーティリティ エクスプローラーのコンテンツ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-272">To display the dashboard, click **View** then select **Utility Explorer Content** from the SSMS menu.</span></span> <span data-ttu-id="8f07c-273">データを更新するには、ユーティリティ エクスプローラーのウィンドウでユーティリティ名を右クリックし、 **[更新]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="8f07c-273">To refresh data, right-click the utility name in the Utility Explorer pane, then select **Refresh**.</span></span>

 <span data-ttu-id="8f07c-274">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の追加のインスタンスを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティに登録する方法については、「[SQL Server のインスタンスの登録 (SQL Server ユーティリティ)](enroll-an-instance-of-sql-server-sql-server-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8f07c-274">For more information about how to enroll additional instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] into the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, see [Enroll an Instance of SQL Server &#40;SQL Server Utility&#41;](enroll-an-instance-of-sql-server-sql-server-utility.md).</span></span> <span data-ttu-id="8f07c-275">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティからマネージド インスタンスである UCP を削除するには、 **ユーティリティ エクスプローラー** のウィンドウで **[マネージド インスタンス]** を選択してマネージド インスタンスのリスト ビューを設定し、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ユーティリティ エクスプローラー **のコンテンツ ウィンドウのリスト ビューで** インスタンス名を右クリックして、 **[マネージド インスタンスを削除]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="8f07c-275">To remove the UCP as a managed instance from the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Utility, select **Managed Instances** in the **Utility Explorer** pane to populate the list view of managed instances, right-click on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance name in the **Utility Explorer Content** list view, then select **Make Instance Unmanaged**.</span></span>

##  <a name="create-a-new-utility-control-point-using-powershell"></a><a name="PowerShell_create_UCP"></a> <span data-ttu-id="8f07c-276">PowerShell を使用したユーティリティ コントロール ポイントの新規作成</span><span class="sxs-lookup"><span data-stu-id="8f07c-276">Create a New Utility Control Point Using PowerShell</span></span>
 <span data-ttu-id="8f07c-277">次の例を使用すると、新しいユーティリティ コントロール ポイントを作成できます。</span><span class="sxs-lookup"><span data-stu-id="8f07c-277">Use the following example to create a new utility control point:</span></span>

```powershell
$UtilityInstance = new-object -Type Microsoft.SqlServer.Management.Smo.Server "ComputerName\UCP-Name";
$SqlStoreConnection = new-object -Type Microsoft.SqlServer.Management.Sdk.Sfc.SqlStoreConnection $UtilityInstance.ConnectionContext.SqlConnectionObject;
$Utility = [Microsoft.SqlServer.Management.Utility.Utility]::CreateUtility("Utility", $SqlStoreConnection, "ProxyAccount", "ProxyAccountPassword");
```

## <a name="see-also"></a><span data-ttu-id="8f07c-278">参照</span><span class="sxs-lookup"><span data-stu-id="8f07c-278">See Also</span></span>
 <span data-ttu-id="8f07c-279">[SQL Server ユーティリティの機能とタスク](sql-server-utility-features-and-tasks.md)[のトラブルシューティング SQL Server ユーティリティ](../../database-engine/troubleshoot-the-sql-server-utility.md)</span><span class="sxs-lookup"><span data-stu-id="8f07c-279">[SQL Server Utility Features and Tasks](sql-server-utility-features-and-tasks.md) [Troubleshoot the SQL Server Utility](../../database-engine/troubleshoot-the-sql-server-utility.md)</span></span>
