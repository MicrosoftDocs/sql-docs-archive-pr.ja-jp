---
title: レプリケーション セキュリティの推奨事項 | Microsoft Docs
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- security [SQL Server replication], best practices
- security [SQL Server replication], between domains
- authentication [SQL Server replication]
- Internet [SQL Server replication], security
ms.assetid: 1ab2635d-0992-4c99-b17d-041d02ec9a7c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8e5918bfed52a6ed1befd81d2fdb7910062060e6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87630891"
---
# <a name="replication-security-best-practices"></a><span data-ttu-id="fe6ed-102">レプリケーション セキュリティの推奨事項</span><span class="sxs-lookup"><span data-stu-id="fe6ed-102">Replication Security Best Practices</span></span>
  <span data-ttu-id="fe6ed-103">レプリケーションでは、単一ドメインのイントラネットから、信頼できないドメイン間およびインターネット経由でデータにアクセスするアプリケーションに及ぶ分散環境でデータを移動します。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-103">Replication moves data in distributed environments ranging from intranets on a single domain to applications that access data between untrusted domains and over the Internet.</span></span> <span data-ttu-id="fe6ed-104">これらのさまざまな状況下でレプリケーション接続のセキュリティを確保するためには、推奨事項を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-104">It is important to understand the best approach for securing replication connections under these different circumstances.</span></span>  
  
 <span data-ttu-id="fe6ed-105">次の情報は、すべての環境のレプリケーションに関連します。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-105">The following information is relevant to replication in all environments:</span></span>  
  
-   <span data-ttu-id="fe6ed-106">レプリケーション トポロジ内のコンピューター間の接続を、仮想プライベート ネットワーク (VPN)、SSL (Secure Sockets Layer)、IPSEC (IP Secrity) などの業界標準の方式を使用して暗号化する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-106">Encrypt the connections between computers in a replication topology using an industry standard method, such as Virtual Private Networks (VPN), Secure Sockets Layer (SSL), or IP Security (IPSEC).</span></span> <span data-ttu-id="fe6ed-107">詳細については、「[データベース エンジンへの暗号化接続の有効化 &#40;SQL Server 構成マネージャー&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-107">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span> <span data-ttu-id="fe6ed-108">VPN と SSL を使用したインターネット経由のデータのレプリケーションについては、「 [Securing Replication Over the Internet](securing-replication-over-the-internet.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-108">For information about using VPN and SSL for replicating data over the Internet, see [Securing Replication Over the Internet](securing-replication-over-the-internet.md).</span></span>  
  
     <span data-ttu-id="fe6ed-109">SSL を使用してレプリケーション トポロジのコンピューター間の接続をセキュリティで保護する場合、各レプリケーション エージェントの **-EncryptionLevel** パラメーターに値 **1** または **2** を指定します (値 **2** が推奨値です)。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-109">If you use SSL to secure the connections between computers in a replication topology, specify a value of **1** or **2** for the **-EncryptionLevel** parameter of each replication agent (a value of **2** is recommended).</span></span> <span data-ttu-id="fe6ed-110">値 **1** は、暗号化を使用していますが、SSL サーバー証明書が信頼されている発行者によって署名されていることをエージェントが検証していないことを示します。値 **2** は、証明書が検証されていることを示します。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-110">A value of **1** specifies that encryption is used, but the agent does not verify that the SSL server certificate is signed by a trusted issuer; a value of **2** specifies that the certificate is verified.</span></span> <span data-ttu-id="fe6ed-111">エージェント パラメーターは、エージェント プロファイルおよびコマンド ラインで指定できます。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-111">Agent parameters can be specified in agent profiles and on the command line.</span></span> <span data-ttu-id="fe6ed-112">詳細については、次を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-112">For more information, see:</span></span>  
  
    -   [<span data-ttu-id="fe6ed-113">レプリケーション エージェント プロファイルの操作</span><span class="sxs-lookup"><span data-stu-id="fe6ed-113">Work with Replication Agent Profiles</span></span>](../agents/replication-agent-profiles.md)  
  
    -   [<span data-ttu-id="fe6ed-114">レプリケーション エージェント コマンド プロンプト パラメーターを表示および変更する &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="fe6ed-114">View and Modify Replication Agent Command Prompt Parameters &#40;SQL Server Management Studio&#41;</span></span>](../agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
    -   [<span data-ttu-id="fe6ed-115">Replication Agent Executables Concepts</span><span class="sxs-lookup"><span data-stu-id="fe6ed-115">Replication Agent Executables Concepts</span></span>](../concepts/replication-agent-executables-concepts.md)  
  
-   <span data-ttu-id="fe6ed-116">異なる Windows アカウントで各レプリケーション エージェントを実行し、すべてのレプリケーション エージェント接続に対して Windows 認証を使用する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-116">Run each replication agent under a different Windows account, and use Windows Authentication for all replication agent connections.</span></span> <span data-ttu-id="fe6ed-117">アカウントの指定の詳細については、「[レプリケーションのログインとパスワードの管理](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-117">For more information about specifying accounts, see [Manage Logins and Passwords in Replication](identity-and-access-control-replication.md#manage-logins-and-passwords-in-replication).</span></span>  
  
-   <span data-ttu-id="fe6ed-118">各エージェントに必要な権限のみを許可する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-118">Grant only the required permissions to each agent.</span></span> <span data-ttu-id="fe6ed-119">詳細については、「 [Replication Agent Security Model](replication-agent-security-model.md)」の「エージェントに必要な権限」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-119">For more information, see the "Permissions Required by Agents" section of [Replication Agent Security Model](replication-agent-security-model.md).</span></span>  
  
-   <span data-ttu-id="fe6ed-120">マージ エージェントとディストリビューション エージェントのすべてのアカウントがパブリケーション アクセス リスト (PAL) に含まれているかどうかを確認する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-120">Ensure all Merge Agent and Distribution Agent accounts are in the publication access list (PAL).</span></span> <span data-ttu-id="fe6ed-121">詳細については、「[パブリッシャーのセキュリティ保護](secure-the-publisher.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-121">For more information, see [Secure the Publisher](secure-the-publisher.md).</span></span>  
  
-   <span data-ttu-id="fe6ed-122">最小特権の原則に従って、PAL 内のアカウントに、レプリケーション タスクを実行するために必要な権限のみを許可する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-122">Follow the principle of least privilege by allowing accounts in the PAL only the permissions they need to perform replication tasks.</span></span> <span data-ttu-id="fe6ed-123">レプリケーションに必要のない固定サーバー ロールにはログインを追加しないでください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-123">Do not add the logins to any fixed server roles that are not required for replication.</span></span>  
  
-   <span data-ttu-id="fe6ed-124">すべてのマージ エージェントおよびディストリビューション エージェントによる読み取りアクセスを許可するようにスナップショット共有を構成する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-124">Configure the snapshot share to allow read access by all Merge Agents and Distribution Agents.</span></span> <span data-ttu-id="fe6ed-125">パラメーター化されたフィルターを使用するパブリケーションのスナップショットの場合は、適切なマージ エージェント アカウントへのアクセスのみを許可するように各フォルダーを設定してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-125">In the case of snapshots for publications with parameterized filters, ensure that each folder is configured to allow access only to the appropriate Merge Agent accounts.</span></span>  
  
-   <span data-ttu-id="fe6ed-126">スナップショット エージェントによる書き込みアクセスを許可するようにスナップショット共有を構成する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-126">Configure the snapshot share to allow write access by the Snapshot Agent.</span></span>  
  
-   <span data-ttu-id="fe6ed-127">プル サブスクリプションを使用する場合は、スナップショット フォルダーにローカル パスではなく、ネットワーク共有を使用する。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-127">If you use pull subscriptions, use a network share rather than a local path for the snapshot folder.</span></span>  
  
 <span data-ttu-id="fe6ed-128">レプリケーション トポロジに、同じドメイン内に存在しないコンピューター、または相互に信頼関係を持たないドメインに存在するコンピューターが含まれている場合、エージェントが確立する接続には Windows 認証または [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 認証を使用できます (ドメインの詳細については、Windows のマニュアルを参照してください)。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-128">If your replication topology includes computers that are not in the same domain or are in domains that do not have trust relationships with each other, you can use Windows Authentication or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication for the connections made by agents (For more information about domains, see the Windows documentation).</span></span> <span data-ttu-id="fe6ed-129">セキュリティの推奨方法としては、Windows 認証の使用をお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-129">It is recommended as a security best practice that you use Windows Authentication.</span></span>  
  
-   <span data-ttu-id="fe6ed-130">Windows 認証を使用するには</span><span class="sxs-lookup"><span data-stu-id="fe6ed-130">To use Windows Authentication:</span></span>  
  
    -   <span data-ttu-id="fe6ed-131">適切なノードで、各エージェントのドメイン アカウントではない、ローカルの Windows アカウントを追加します (各ノードでは同じ名前とパスワードを使用します)。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-131">Add a local Windows account (not a domain account) for each agent at the appropriate nodes (use the same name and password at each node).</span></span> <span data-ttu-id="fe6ed-132">たとえば、プッシュ サブスクリプションのディストリビューション エージェントをディストリビューターで実行し、ディストリビューターとサブスクライバーに接続しているとします。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-132">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="fe6ed-133">この場合、ディストリビューション エージェントの Windows アカウントを、ディストリビューターおよびサブスクライバーに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-133">The Windows account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="fe6ed-134">指定されたエージェント (たとえば、サブスクリプションのディストリビューション エージェント) が、各コンピューターで同じアカウントを使用して実行されているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-134">Ensure that a given agent (for example the Distribution Agent for a subscription) runs under the same account at each computer.</span></span>  
  
-   <span data-ttu-id="fe6ed-135">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 認証を使用するには</span><span class="sxs-lookup"><span data-stu-id="fe6ed-135">To use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication:</span></span>  
  
    -   <span data-ttu-id="fe6ed-136">適切なノードで、各エージェントのローカルの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] アカウントを追加します (各ノードで同じ名前とパスワードを使用します)。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-136">Add a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for each agent at the appropriate nodes (use the same account name and password at each node).</span></span> <span data-ttu-id="fe6ed-137">たとえば、プッシュ サブスクリプションのディストリビューション エージェントをディストリビューターで実行し、ディストリビューターとサブスクライバーに接続しているとします。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-137">For example, the Distribution Agent for a push subscription runs at the Distributor and makes connections to the Distributor and Subscriber.</span></span> <span data-ttu-id="fe6ed-138">この場合、ディストリビューション エージェントの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] アカウントを、ディストリビューターおよびサブスクライバーに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-138">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] account for the Distribution Agent should be added to the Distributor and Subscriber.</span></span>  
  
    -   <span data-ttu-id="fe6ed-139">指定されたエージェント (たとえば、サブスクリプションのディストリビューション エージェント) が、各コンピューターで同じアカウントを使用して接続しているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-139">Ensure that a given agent (for example the Distribution Agent for a subscription) makes connections under the same account at each computer.</span></span>  
  
    -   <span data-ttu-id="fe6ed-140">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 認証が必要な状況では、多くの場合、UNC スナップショット共有へのアクセスは実行できません (たとえば、アクセスがファイアウォールでブロックされます)。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-140">In situations that require [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication, access to UNC snapshot shares is often not available (for example access might be blocked by a firewall).</span></span> <span data-ttu-id="fe6ed-141">この場合は、ファイル転送プロトコル (FTP) を使用して、スナップショットをサブスクライバーに転送できます。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-141">In this case, you can transfer the snapshot to Subscribers through file transfer protocol (FTP).</span></span> <span data-ttu-id="fe6ed-142">詳細については、「[FTP によるスナップショットの転送](../transfer-snapshots-through-ftp.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fe6ed-142">For more information, see [Transfer Snapshots Through FTP](../transfer-snapshots-through-ftp.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fe6ed-143">参照</span><span class="sxs-lookup"><span data-stu-id="fe6ed-143">See Also</span></span>  
 <span data-ttu-id="fe6ed-144">[データベース エンジンへの暗号化接続の有効化 &#40;SQL Server 構成マネージャー&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span><span class="sxs-lookup"><span data-stu-id="fe6ed-144">[Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) </span></span>  
 <span data-ttu-id="fe6ed-145">[インターネット経由のレプリケーション](../replication-over-the-internet.md) </span><span class="sxs-lookup"><span data-stu-id="fe6ed-145">[Replication over the Internet](../replication-over-the-internet.md) </span></span>  
 <span data-ttu-id="fe6ed-146">[サブスクライバーのセキュリティ保護](secure-the-subscriber.md) </span><span class="sxs-lookup"><span data-stu-id="fe6ed-146">[Secure the Subscriber](secure-the-subscriber.md) </span></span>  
 <span data-ttu-id="fe6ed-147">[ディストリビューターのセキュリティ保護](secure-the-distributor.md) </span><span class="sxs-lookup"><span data-stu-id="fe6ed-147">[Secure the Distributor](secure-the-distributor.md) </span></span>  
 <span data-ttu-id="fe6ed-148">[パブリッシャーのセキュリティ保護](secure-the-publisher.md) </span><span class="sxs-lookup"><span data-stu-id="fe6ed-148">[Secure the Publisher](secure-the-publisher.md) </span></span>  
 [<span data-ttu-id="fe6ed-149">SQL Server レプリケーションのセキュリティ</span><span class="sxs-lookup"><span data-stu-id="fe6ed-149">SQL Server Replication Security</span></span>](view-and-modify-replication-security-settings.md)  
  
  
