---
title: レプリケートされたデータの検証 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- Subscribers [SQL Server replication], data validation
- replication [SQL Server], validating data
- transactional replication, validating data
- validating data
- merge replication data validation [SQL Server replication], SQL Server Management Studio
ms.assetid: 215b4c9a-0ce9-4c00-ac0b-43b54151dfa3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 4d09750c0cb81d64f5921ae2064b2e75edb6ca96
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87630889"
---
# <a name="validate-replicated-data"></a><span data-ttu-id="2cce1-102">レプリケートされたデータの検証</span><span class="sxs-lookup"><span data-stu-id="2cce1-102">Validate Replicated Data</span></span>
  <span data-ttu-id="2cce1-103">このトピックでは、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] で [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]、 [!INCLUDE[tsql](../../includes/tsql-md.md)]、またはレプリケーション管理オブジェクト (RMO) を使用して、サブスクライバーでデータを検証する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-103">This topic describes how to validate data at the Subscriber in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  

  <span data-ttu-id="2cce1-104">トランザクション レプリケーションとマージ レプリケーションを使用すると、サブスクライバーのデータがパブリッシャーのデータと一致するかどうかを検証できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-104">Transactional and merge replication allow you to validate that data at the Subscriber matches data at the Publisher.</span></span> <span data-ttu-id="2cce1-105">検証は、1 つのパブリケーションの特定のサブスクリプション、またはすべてのサブスクリプションに対して行うことができます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-105">Validation can be performed for specific subscriptions or for all subscriptions to a publication.</span></span> <span data-ttu-id="2cce1-106">次のいずれかの種類の検証を指定すると、ディストリビューション エージェントまたはマージ エージェントは次回の実行時にデータを検証します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-106">Specify one of the following validation types and the Distribution Agent or Merge Agent will validate data the next time it runs:</span></span>  
  
-   <span data-ttu-id="2cce1-107">**行数のみ**。</span><span class="sxs-lookup"><span data-stu-id="2cce1-107">**Row count only**.</span></span> <span data-ttu-id="2cce1-108">サブスクライバーのテーブルにパブリッシャーのテーブルと同じ数の行があるかどうかを検証しますが、行の内容が一致するかどうかについては検証しません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-108">This validates whether the table at the Subscriber has the same number of rows as the table at the Publisher, but does not validate that the content of the rows matches.</span></span> <span data-ttu-id="2cce1-109">行数の確認は、データに問題があるかどうかを調べる手軽な検証方法です。</span><span class="sxs-lookup"><span data-stu-id="2cce1-109">Row count validation provides a lightweight approach to validation that can make you aware of issues with your data.</span></span>    
-   <span data-ttu-id="2cce1-110">**行数とバイナリ チェックサム**。</span><span class="sxs-lookup"><span data-stu-id="2cce1-110">**Row count and binary checksum**.</span></span> <span data-ttu-id="2cce1-111">パブリッシャーとサブスクライバーの行数に加え、チェックサム アルゴリズムを使用して、すべてのデータのチェックサムが計算されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-111">In addition to taking a count of rows at the Publisher and Subscriber, a checksum of all the data is calculated using the checksum algorithm.</span></span> <span data-ttu-id="2cce1-112">行数の検証で失敗となった場合、チェックサムは実行されません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-112">If the row count fails, the checksum is not performed.</span></span>  
  
 <span data-ttu-id="2cce1-113">サブスクライバーとパブリッシャーのデータが一致するかどうかの検証に加え、マージ レプリケーションでは、各サブスクライバーに対してデータが正しくパーティション分割されているかどうかを検証する機能も用意されています。</span><span class="sxs-lookup"><span data-stu-id="2cce1-113">In addition to validating that data at the Subscriber and Publisher match, merge replication provides the ability to validate that data is partitioned correctly for each Subscriber.</span></span> <span data-ttu-id="2cce1-114">詳細については、「[Validate Partition Information for a Merge Subscriber](validate-partition-information-for-a-merge-subscriber.md)」 (マージ サブスクライバーのパーティション情報の検証) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-114">For more information, see [Validate Partition Information for a Merge Subscriber](validate-partition-information-for-a-merge-subscriber.md).</span></span>  

## <a name="how-data-validation-works"></a><span data-ttu-id="2cce1-115">データ検証の動作</span><span class="sxs-lookup"><span data-stu-id="2cce1-115">How Data Validation Works</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="2cce1-116">では、パブリッシャー側の行数やチェックサムを計算し、それらの値をサブスクライバー側で計算された行数やチェックサムと比較することで、データの検証を行います。</span><span class="sxs-lookup"><span data-stu-id="2cce1-116">validates data by calculating a row count or a checksum at the Publisher and then comparing those values to the row count or checksum calculated at the Subscriber.</span></span> <span data-ttu-id="2cce1-117">一方の値はパブリケーション テーブル全体に対して計算され、もう一方の値はサブスクリプション テーブル全体に対して計算されます。ただし、`text` 列、`ntext` 列、または `image` 列にあるデータはその計算には含まれません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-117">One value is calculated for the entire publication table and one value is calculated for the entire subscription table, but data in `text`, `ntext`, or `image` columns is not included in the calculations.</span></span>  
  
 <span data-ttu-id="2cce1-118">計算が行われている間は、行数またはチェックサムの計算が行われているテーブルに共有ロックが一時的にかかりますが、計算はすぐに終了し、通常、数秒で共有ロックは解除されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-118">While the calculations are performed, shared locks are placed temporarily on tables for which row counts or checksums are being run, but the calculations are completed quickly and the shared locks removed, usually in a matter of seconds.</span></span>  
  
 <span data-ttu-id="2cce1-119">バイナリ チェックサムを使用する場合は、32 ビット CRC (冗長性検査) がデータ ページの物理的な行ではなく、列ごとに実行されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-119">When binary checksums are used, 32-bit redundancy check (CRC) occurs on a column-by-column basis rather than a CRC on the physical row on the data page.</span></span> <span data-ttu-id="2cce1-120">これにより、テーブルの列がデータ ページで物理的にどのような順序であっても、行については同じ CRC 値が計算されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-120">This allows the columns with the table to be in any order physically on the data page, but still compute to the same CRC for the row.</span></span> <span data-ttu-id="2cce1-121">バイナリ チェックサムを使用した検証は、パブリケーション上に行フィルターまたは列フィルターがある場合に使用できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-121">Binary checksum validation can be used when there are row or column filters on the publication.</span></span>  
  
 <span data-ttu-id="2cce1-122">データの検証は、3 つの部分で構成されるプロセスです。</span><span class="sxs-lookup"><span data-stu-id="2cce1-122">Validating data is a three-part process:</span></span>  
  
1.  <span data-ttu-id="2cce1-123">パブリケーションの単一のサブスクリプションまたはすべてのサブスクリプションが検証対象として *マーク* されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-123">A single subscription or all subscriptions to a publication are *marked* for validation.</span></span> <span data-ttu-id="2cce1-124">[!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] の **[ローカル パブリケーション]** フォルダーと **[ローカル サブスクリプション]** フォルダーから使用できる、 **[サブスクリプションの検証]** 、 **[サブスクリプションの検証]** および **[すべてのサブスクリプションの検証]** の各ダイアログ ボックスで検証対象のサブスクリプションにマークを付けます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-124">Mark subscriptions for validation in the **Validate Subscription**, **Validate Subscriptions**, and **Validate All Subscriptions** dialog boxes, which are available from the **Local Publications** folder and the **Local Subscriptions** folder in [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="2cce1-125">また、 **[すべてのサブスクリプション]** タブ、 **[サブスクリプション ウォッチ リスト]** タブ、およびレプリケーション モニターのパブリケーション ノードでもサブスクリプションにマークを付けることができます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-125">You can also mark subscriptions from the **All Subscriptions** tab, the **Subscription Watch List** tab, and the publications node in Replication Monitor.</span></span> <span data-ttu-id="2cce1-126">レプリケーション モニターの起動の詳細については、「[Start the Replication Monitor](monitor/start-the-replication-monitor.md)」 (レプリケーション モニターの開始) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-126">For information about starting Replication Monitor, see [Start the Replication Monitor](monitor/start-the-replication-monitor.md).</span></span>  
  
2.  <span data-ttu-id="2cce1-127">サブスクリプションは、ディストリビューション エージェント (トランザクション レプリケーションの場合) またはマージ エージェント (マージ レプリケーションの場合) による次回の同期時に検証されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-127">A subscription is validated the next time it is synchronized by the Distribution Agent (for transactional replication) or the Merge Agent (for merge replication).</span></span> <span data-ttu-id="2cce1-128">ディストリビューション エージェントは、通常は連続して実行されるので、検証はすぐに実行されます。マージ エージェントは、通常は要求時に実行されるので、エージェントを実行した後で検証が実行されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-128">The Distribution Agent typically runs continuously, in which case validation occurs immediately; the Merge Agent typically runs on demand, in which case validation occurs after you run the agent.</span></span>  
  
3.  <span data-ttu-id="2cce1-129">検証結果は次の場所で表示できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-129">View the validation results:</span></span>  
  
    -  <span data-ttu-id="2cce1-130">レプリケーション モニターの詳細ウィンドウ : トランザクション レプリケーションの場合は **[ディストリビューターからサブスクライバーまでの履歴]** タブ、およびマージ レプリケーションの場合は **[同期の履歴]** タブ</span><span class="sxs-lookup"><span data-stu-id="2cce1-130">In the detail windows in Replication Monitor: on the **Distributor to Subscriber History** tab for transactional replication and the **Synchronization History** tab for merge replication.</span></span>    
    -  <span data-ttu-id="2cce1-131">**の** [同期の状態の表示] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]ダイアログ ボックス</span><span class="sxs-lookup"><span data-stu-id="2cce1-131">In the **View Synchronization Status** dialog box in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)].</span></span>  
  


  
## <a name="considerations-and-restrictions"></a><span data-ttu-id="2cce1-132">注意点と制約</span><span class="sxs-lookup"><span data-stu-id="2cce1-132">Considerations and restrictions</span></span>  
  
-   <span data-ttu-id="2cce1-133">レプリケーション モニターの手順は、プッシュ サブスクリプションにのみ適用されます。プル サブスクリプションはレプリケーション モニターでは同期できないからです。</span><span class="sxs-lookup"><span data-stu-id="2cce1-133">The procedures for Replication Monitor are for push subscriptions only because pull subscriptions cannot be synchronized in Replication Monitor.</span></span> <span data-ttu-id="2cce1-134">ただし、レプリケーション モニターで、サブスクリプションに検証対象のマークを付けたり、プル サブスクリプションの検証結果を表示することはできます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-134">However, you can mark a subscription for validation and view validation results for pull subscriptions in Replication Monitor.</span></span>    
-   <span data-ttu-id="2cce1-135">検証結果には、検証が成功したかどうかが示されますが、失敗した場合、検証に失敗した行は示されません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-135">The validation results indicate whether validation succeeded or failed, but do not specify which rows failed validation if a failure occurred.</span></span> <span data-ttu-id="2cce1-136">パブリッシャーとサブスクライバーのデータを比較するには、 [tablediff Utility](../../tools/tablediff-utility.md)を使用します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-136">To compare data at the Publisher and Subscriber, use the [tablediff Utility](../../tools/tablediff-utility.md).</span></span> <span data-ttu-id="2cce1-137">レプリケートされたデータでのこのユーティリティの使用の詳細については、「[Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md)」 (レプリケートされたテーブルを比較して相違があるかどうかを確認する &#40;レプリケーション プログラミング&#41;) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-137">For more information about using this utility with replicated data, see [Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md).</span></span>  
 
<span data-ttu-id="2cce1-138">データの検証に際しては、次の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-138">Take the following issues into consideration when validating data:</span></span>  
  
-   <span data-ttu-id="2cce1-139">データを検証する前にサブスクライバー側のすべての更新操作を停止する必要があります (検証実行時にパブリッシャー側の操作を停止する必要はありません)。</span><span class="sxs-lookup"><span data-stu-id="2cce1-139">You must stop all update activity at Subscribers before validating data (it is not necessary to stop activity at the Publisher when validation is occurring).</span></span>    
-   <span data-ttu-id="2cce1-140">チェックサムおよびバイナリ チェックサムを使用した検証を大規模なデータセットに対して行う場合には、大量のプロセッサ リソースが必要になるので、レプリケーションで使用するサーバーの利用状況が最小のときに検証を行うようにスケジュールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="2cce1-140">Because checksums and binary checksums can require large amounts of processor resources when validating a large data set, you should schedule validation to occur when there is the least activity on the servers used in replication.</span></span>    
-   <span data-ttu-id="2cce1-141">レプリケーションはテーブルのみを検証します。スキーマのみのアーティクル (ストアド プロシージャなど) がパブリッシャーとサブスクライバーで同じであるかどうかは検証しません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-141">Replication validates tables only; it does not validate whether schema only articles (such as stored procedures) are the same at the Publisher and Subscriber.</span></span>    
-   <span data-ttu-id="2cce1-142">バイナリ チェックサムは、パブリッシュされたどのテーブルでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-142">Binary checksum can be used with any published table.</span></span> <span data-ttu-id="2cce1-143">チェックサムは、列フィルターの設定されたテーブル、または列オフセットが異なる論理テーブル構造 (列を削除または追加する ALTER TABLE ステートメントの結果) は検証できません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-143">Checksum cannot validate tables with column filters, or logical table structures where column offsets differ (due to ALTER TABLE statements that drop or add columns).</span></span>    
-   <span data-ttu-id="2cce1-144">レプリケーションの検証では、 `checksum` 関数と**binary_checksum**関数を使用します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-144">Replication validation uses the `checksum` and **binary_checksum** functions.</span></span> <span data-ttu-id="2cce1-145">各関数の動作については、「[CHECKSUM &#40;Transact-SQL&#41;](/sql/t-sql/functions/checksum-transact-sql)」と「[BINARY_CHECKSUM  &#40;Transact-SQL&#41;](/sql/t-sql/functions/binary-checksum-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-145">For  information about their behavior, see  [CHECKSUM &#40;Transact-SQL&#41;](/sql/t-sql/functions/checksum-transact-sql) and [BINARY_CHECKSUM  &#40;Transact-SQL&#41;](/sql/t-sql/functions/binary-checksum-transact-sql).</span></span>  
  
-   <span data-ttu-id="2cce1-146">バイナリ チェックサムまたはチェックサムを使用した検証では、データ型がサブスクライバー側とパブリッシャー側とで異なる場合には、誤ってエラーを報告することがあります。</span><span class="sxs-lookup"><span data-stu-id="2cce1-146">Validation by using binary checksum or checksum can incorrectly report a failure if data types are different at the Subscriber than they are at the Publisher.</span></span> <span data-ttu-id="2cce1-147">これは、次のいずれかの場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2cce1-147">This can occur if you do any one of the following:</span></span>    
    -   <span data-ttu-id="2cce1-148">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の以前のバージョンのデータ型をマップするスキーマ オプションを明示的に設定している場合。</span><span class="sxs-lookup"><span data-stu-id="2cce1-148">Explicitly set schema options to map data types for earlier versions of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>    
    -   <span data-ttu-id="2cce1-149">マージ パブリケーションのパブリケーションの互換性レベルを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の以前のバージョンに設定し、パブリッシュされたテーブルに、このバージョンに対してマップする必要がある 1 つ以上のデータ型が含まれている場合。</span><span class="sxs-lookup"><span data-stu-id="2cce1-149">Set the publication compatibility level for a merge publication to an earlier version of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and published tables contain one or more data types that must be mapped for this version.</span></span>    
    -   <span data-ttu-id="2cce1-150">サブスクリプションを手動で初期化し、サブスクライバーで異なるデータ型を使用している場合。</span><span class="sxs-lookup"><span data-stu-id="2cce1-150">Manually initialize a subscription and are using different data types at the Subscriber.</span></span>    
-   <span data-ttu-id="2cce1-151">バイナリ チェックサムおよびチェックサムによる検証は、トランザクション レプリケーションの変換可能なサブスクリプションではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-151">Binary checksum and checksum validations are not supported for transformable subscriptions for transactional replication.</span></span>   
-   <span data-ttu-id="2cce1-152">検証は、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 以外のサブスクライバーにレプリケートされたデータに対してはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-152">Validation is not supported for data replicated to non-[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Subscribers.</span></span>  

## <a name="data-validation-results"></a><span data-ttu-id="2cce1-153">データ検証の結果</span><span class="sxs-lookup"><span data-stu-id="2cce1-153">Data Validation Results</span></span>  
 <span data-ttu-id="2cce1-154">検証が完了すると、ディストリビューション エージェントまたはマージ エージェントは成功または失敗に関するメッセージをログに記録します (レプリケーションでは失敗した行については報告されません)。</span><span class="sxs-lookup"><span data-stu-id="2cce1-154">When validation is complete, the Distribution Agent or Merge Agent logs messages regarding success or failure (replication does not report which rows failed).</span></span> <span data-ttu-id="2cce1-155">これらのメッセージは [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]、レプリケーション モニター、およびレプリケーション システム テーブルで参照できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-155">These messages can be viewed in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], Replication Monitor, and replication system tables.</span></span> <span data-ttu-id="2cce1-156">操作方法に関する上記のトピックは、検証の実行方法と結果を表示する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="2cce1-156">The how-to topic listed above demonstrates how to run validation and view the results.</span></span>  
  
 <span data-ttu-id="2cce1-157">データ検証の問題に対処するために、次の点を検討してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-157">To handle validation failures, consider the following:</span></span>  
  
-   <span data-ttu-id="2cce1-158">レプリケーション警告を **[レプリケーション: サブスクライバーでデータ検証の問題が見つかりました]** というレプリケーション警告が通知されるようにします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-158">Configure the replication alert named **Replication: Subscriber has failed data validation** so that you are notified of the failure.</span></span> <span data-ttu-id="2cce1-159">詳細については、「[定義済みのレプリケーションの警告を構成する &#40;SQL Server Management Studio& # 41 (管理/構成-定義済み-レプリケーション-警告-SQL-サーバー-管理-スタジオ)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-159">For more information, see [Configure Predefined Replication Alerts &#40;SQL Server Management Studio&#41(administration/configure-predefined-replication-alerts-sql-server-management-studio.md).</span></span>  
  
-   <span data-ttu-id="2cce1-160">検証の失敗はアプリケーションにとって問題となりますか?</span><span class="sxs-lookup"><span data-stu-id="2cce1-160">Is the fact that validation failed an issue for your application?</span></span> <span data-ttu-id="2cce1-161">検証の失敗が問題となる場合、データを手動で更新して同期するか、サブスクリプションを再初期化してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-161">If the validation failure is an issue, manually update the data so that it is synchronized, or reinitialize the subscription:</span></span>  
  
    -   <span data-ttu-id="2cce1-162">データを更新するには [tablediff ユーティリティ](../../tools/tablediff-utility.md)を使用します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-162">Data can be updated using the [tablediff utility](../../tools/tablediff-utility.md).</span></span> <span data-ttu-id="2cce1-163">このユーティリティの使用方法の詳細については、「[Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md)」 (レプリケートされたテーブルを比較して相違があるかどうかを確認する &#40;レプリケーション プログラミング&#41;) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-163">For more information about using this utility, see [Compare Replicated Tables for Differences &#40;Replication Programming&#41;](administration/compare-replicated-tables-for-differences-replication-programming.md).</span></span>  
  
    -   <span data-ttu-id="2cce1-164">再初期化の詳細については、「[Reinitialize Subscriptions](reinitialize-subscriptions.md)」 (サブスクリプションの再初期化) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-164">For more information about reinitializaton, see [Reinitialize Subscriptions](reinitialize-subscriptions.md).</span></span>   
 
  
## <a name="articles-in-transactional-replication"></a><span data-ttu-id="2cce1-165">トランザクション レプリケーションのアーティクル</span><span class="sxs-lookup"><span data-stu-id="2cce1-165">Articles in Transactional Replication</span></span> 

### <a name="using-sql-server-management-studio"></a><span data-ttu-id="2cce1-166">SQL Server Management Studio を使用する</span><span class="sxs-lookup"><span data-stu-id="2cce1-166">Using SQL Server Management Studio</span></span>  
  
  
1.  <span data-ttu-id="2cce1-167">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]でパブリッシャーに接続し、サーバー ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-167">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="2cce1-168">**[レプリケーション]** フォルダーを展開し、 **[ローカル パブリケーション]** フォルダーを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-168">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="2cce1-169">サブスクリプションを検証するパブリケーションを右クリックし、 **[サブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-169">Right-click the publication for which you want to validate subscriptions, and then click **Validate Subscriptions**.</span></span>    
4.  <span data-ttu-id="2cce1-170">**[サブスクリプションの検証]** ダイアログ ボックスで、次のように検証するサブスクリプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-170">In the **Validate Subscriptions** dialog box, select which subscriptions to validate:</span></span>    
    -   <span data-ttu-id="2cce1-171">**[すべての SQL Server サブスクリプションを検証する]** を選択する。</span><span class="sxs-lookup"><span data-stu-id="2cce1-171">Select **Validate all SQL Server subscriptions**.</span></span>    
    -   <span data-ttu-id="2cce1-172">**[以下のサブスクリプションを検証する]** を選択し、1 つ以上のサブスクリプションを選択する。</span><span class="sxs-lookup"><span data-stu-id="2cce1-172">Select **Validate the following subscriptions**, and then select one or more subscriptions.</span></span>    
5.  <span data-ttu-id="2cce1-173">実行する検証の種類 (行数、または行数とチェックサム) を指定するには、 **[検証オプション]** をクリックし、 **[サブスクリプションの検証オプション]** ダイアログ ボックスでオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-173">To specify the type of validation to perform (row count, or row count and checksum) click **Validation Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
7.  <span data-ttu-id="2cce1-174">レプリケーション モニターまたは **[同期の状態の表示]** ダイアログ ボックスで検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-174">View validation results in Replication Monitor or the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="2cce1-175">サブスクリプションごとに、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-175">For each subscription:</span></span>    
    1.  <span data-ttu-id="2cce1-176">パブリケーションを展開し、サブスクリプションを右クリックして、 **[同期の状態の表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-176">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>    
    2.  <span data-ttu-id="2cce1-177">エージェントが実行されていない場合は、 **[同期の状態の表示]** ダイアログ ボックスの **[開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-177">If the agent is not running click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="2cce1-178">ダイアログ ボックスには、検証に関する情報メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-178">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="2cce1-179">検証に関するメッセージが表示されない場合、エージェントは既にその後のメッセージを記録しています。</span><span class="sxs-lookup"><span data-stu-id="2cce1-179">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="2cce1-180">この場合は、検証結果をレプリケーション モニターに表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-180">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="2cce1-181">詳細については、このトピックのレプリケーション モニターの実行手順を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-181">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="2cce1-182">Transact-SQL (T-SQL) の使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-182">Using Transact-SQL (T-SQL)</span></span>

#### <a name="all-articles"></a><span data-ttu-id="2cce1-183">すべてのアーティクル</span><span class="sxs-lookup"><span data-stu-id="2cce1-183">All articles</span></span>
  
1.  <span data-ttu-id="2cce1-184">パブリッシャー側のパブリケーション データベースに対して [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-184">At the Publisher on the publication database, execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql).</span></span> <span data-ttu-id="2cce1-185">[ \*\* \@ パブリケーション**] を指定し、 \*\* \@ rowcount_only**に次のいずれかの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-185">Specify **\@publication** and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="2cce1-186">**1** - 行数チェックのみ (既定値)</span><span class="sxs-lookup"><span data-stu-id="2cce1-186">**1** - rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="2cce1-187">**2** - 行数とバイナリ チェックサム</span><span class="sxs-lookup"><span data-stu-id="2cce1-187">**2** - rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2cce1-188">[sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql) を実行する場合、[sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) がパブリケーション内の各アーティクルに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-188">When you execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql), [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) is executed for each article in the publication.</span></span> <span data-ttu-id="2cce1-189">[sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql) を正常に実行するためには、パブリッシュされたベース テーブルのすべての列に対して SELECT 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="2cce1-189">To successfully execute [sp_publication_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-publication-validation-transact-sql), you must have SELECT permissions on all columns in the published base tables.</span></span>  
  
2.  <span data-ttu-id="2cce1-190">(省略可) ディストリビューション エージェントがまだ実行されていない場合は、各サブスクリプションについてディストリビューション エージェントを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-190">(Optional) Start the Distribution Agent for each subscription if it is not already running.</span></span> <span data-ttu-id="2cce1-191">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-191">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="2cce1-192">エージェントの出力で検証結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-192">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="2cce1-193">詳細については、「[レプリケートされたデータの検証](validate-data-at-the-subscriber.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-193">For more information, see [Validate Replicated Data](validate-data-at-the-subscriber.md).</span></span>  
  
#### <a name="single-article"></a><span data-ttu-id="2cce1-194">単一のアーティクル</span><span class="sxs-lookup"><span data-stu-id="2cce1-194">Single article</span></span> 
  
1.  <span data-ttu-id="2cce1-195">パブリッシャー側のパブリケーション データベースに対して [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-195">At the Publisher on the publication database, execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span></span> <span data-ttu-id="2cce1-196">[ \*\* \@ パブリケーション**] を指定し、アーティクルのアーティクルの名前を指定して、 \*\* \@ rowcount_only**に次のいずれかの値を指定します。 \*\* \@ \*\*</span><span class="sxs-lookup"><span data-stu-id="2cce1-196">Specify **\@publication**, the name of the article for **\@article**, and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="2cce1-197">**1** - 行数チェックのみ (既定値)</span><span class="sxs-lookup"><span data-stu-id="2cce1-197">**1** - Rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="2cce1-198">**2** -行数とバイナリチェックサム。</span><span class="sxs-lookup"><span data-stu-id="2cce1-198">**2** - Rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2cce1-199">[sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) を正常に実行するためには、パブリッシュされたベース テーブルのすべての列に対して SELECT 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="2cce1-199">To successfully execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql), you must have SELECT permissions on all columns in the published base table.</span></span>  
  
2.  <span data-ttu-id="2cce1-200">(省略可) ディストリビューション エージェントがまだ実行されていない場合は、各サブスクリプションについてディストリビューション エージェントを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-200">(Optional) Start the Distribution Agent for each subscription if it is not already running.</span></span> <span data-ttu-id="2cce1-201">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-201">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="2cce1-202">エージェントの出力で検証結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-202">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="2cce1-203">詳細については、「[レプリケートされたデータの検証](validate-data-at-the-subscriber.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-203">For more information, see [Validate Replicated Data](validate-data-at-the-subscriber.md).</span></span>  
  
#### <a name="single-subscriber"></a><span data-ttu-id="2cce1-204">単一のサブスクライバー</span><span class="sxs-lookup"><span data-stu-id="2cce1-204">Single subscriber</span></span>
  
1.  <span data-ttu-id="2cce1-205">パブリッシャーのパブリケーション データベースで、[BEGIN TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/begin-transaction-transact-sql) を使用して明示的なトランザクションを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-205">At the Publisher on the publication database, open an explicit transaction using [BEGIN TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/begin-transaction-transact-sql).</span></span>    
2.  <span data-ttu-id="2cce1-206">パブリッシャー側のパブリケーション データベースに対して、[sp_marksubscriptionvalidation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-marksubscriptionvalidation-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-206">At the Publisher on the publication database, execute [sp_marksubscriptionvalidation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-marksubscriptionvalidation-transact-sql).</span></span> <span data-ttu-id="2cce1-207">**パブリケーションのパブリケーション、 \@ \*\* \*\* \@ サブスクライバー**のサブスクライバーの名前、および\*\* \@ destination_db\*\*に使用するサブスクリプションデータベースの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-207">Specify the publication for **\@publication**, the name of the Subscriber for **\@subscriber**, and the name of the subscription database for **\@destination_db**.</span></span>    
3.  <span data-ttu-id="2cce1-208">(省略可) 検証の対象となる各サブスクリプションについて、手順 2. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-208">(Optional) Repeat step 2 for each subscription being validated.</span></span>    
4.  <span data-ttu-id="2cce1-209">パブリッシャー側のパブリケーション データベースに対して [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-209">At the Publisher on the publication database, execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql).</span></span> <span data-ttu-id="2cce1-210">[ \*\* \@ パブリケーション**] を指定し、アーティクルのアーティクルの名前を指定して、 \*\* \@ rowcount_only**に次のいずれかの値を指定します。 \*\* \@ \*\*</span><span class="sxs-lookup"><span data-stu-id="2cce1-210">Specify **\@publication**, the name of the article for **\@article**, and one of the following values for **\@rowcount_only**:</span></span>    
    -   <span data-ttu-id="2cce1-211">**1** - 行数チェックのみ (既定値)</span><span class="sxs-lookup"><span data-stu-id="2cce1-211">**1** - Rowcount check only (the default)</span></span>    
    -   <span data-ttu-id="2cce1-212">**2** -行数とバイナリチェックサム。</span><span class="sxs-lookup"><span data-stu-id="2cce1-212">**2** - Rowcount and binary checksum.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2cce1-213">[sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql) を正常に実行するためには、パブリッシュされたベース テーブルのすべての列に対して SELECT 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="2cce1-213">To successfully execute [sp_article_validation &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-article-validation-transact-sql), you must have SELECT permissions on all columns in the published base table.</span></span>  
  
5.  <span data-ttu-id="2cce1-214">パブリッシャー側のパブリケーション データベースに対して、[COMMIT TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/commit-transaction-transact-sql) を使用してトランザクションをコミットします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-214">At the Publisher on the publication database, commit the transaction using [COMMIT TRANSACTION &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/commit-transaction-transact-sql).</span></span>    
6.  <span data-ttu-id="2cce1-215">(省略可) 検証の対象となる各アーティクルについて、手順 1. から手順 5. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-215">(Optional) Repeat steps 1 through 5 for each article being validated.</span></span>    
7.  <span data-ttu-id="2cce1-216">(省略可) ディストリビューション エージェントがまだ実行されていない場合は、開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-216">(Optional) Start the Distribution Agent if it is not already running.</span></span> <span data-ttu-id="2cce1-217">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-217">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
8.  <span data-ttu-id="2cce1-218">エージェントの出力で検証結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-218">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="2cce1-219">詳しくは、「 [Validate Data at the Subscriber](validate-data-at-the-subscriber.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-219">For more information, see [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span></span>  

##  <a name="all-push-subscriptions-to-a-transactional-publication"></a><span data-ttu-id="2cce1-220">トランザクションパブリケーションに対するすべてのプッシュサブスクリプション</span><span class="sxs-lookup"><span data-stu-id="2cce1-220">All push subscriptions to a Transactional Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="2cce1-221">レプリケーション モニターの使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-221">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="2cce1-222">レプリケーション モニターの左ペインでパブリッシャー グループを展開し、パブリッシャーを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-222">In Replication Monitor, expand a Publisher group in the left pane, and then expand a Publisher.</span></span>    
2.  <span data-ttu-id="2cce1-223">サブスクリプションを検証するパブリケーションを右クリックし、 **[サブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-223">Right-click the publication for which you want to validate subscriptions, and then click **Validate Subscriptions**.</span></span>    
3.  <span data-ttu-id="2cce1-224">**[サブスクリプションの検証]** ダイアログ ボックスで、次のように検証するサブスクリプションを選択します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-224">In the **Validate Subscriptions** dialog box, select which subscriptions to validate:</span></span>    
    -   <span data-ttu-id="2cce1-225">**[すべての SQL Server サブスクリプションを検証する]** を選択する。</span><span class="sxs-lookup"><span data-stu-id="2cce1-225">Select **Validate all SQL Server subscriptions**.</span></span>    
    -   <span data-ttu-id="2cce1-226">**[以下のサブスクリプションを検証する]** を選択し、1 つ以上のサブスクリプションを選択する。</span><span class="sxs-lookup"><span data-stu-id="2cce1-226">Select **Validate the following subscriptions**, and then select one or more subscriptions.</span></span>   
4.  <span data-ttu-id="2cce1-227">実行する検証の種類 (行数、または行数とチェックサム) を指定するには、 **[検証オプション]** をクリックし、 **[サブスクリプションの検証オプション]** ダイアログ ボックスでオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-227">To specify the type of validation to perform (row count, or row count and checksum) click **Validation Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
6.  <span data-ttu-id="2cce1-228">**[すべてのサブスクリプション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-228">Click the **All Subscriptions** tab.</span></span>    
7.  <span data-ttu-id="2cce1-229">検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-229">View validation results.</span></span> <span data-ttu-id="2cce1-230">プッシュ サブスクリプションごとに、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-230">For each push subscription:</span></span>   
    1.  <span data-ttu-id="2cce1-231">エージェントが実行されていない場合、サブスクリプションを右クリックし、 **[同期の開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-231">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>   
    2.  <span data-ttu-id="2cce1-232">サブスクリプションを右クリックし、 **[詳細表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-232">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="2cce1-233">**[ディストリビューターからサブスクライバーまでの履歴]** タブの **[選択されたセッションのアクション]** テキスト領域に情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-233">View information on the **Distributor to Subscriber History** tab in the **Actions in the selected session** text area.</span></span>  
  

## <a name="for-a-single-subscription-to-a-merge-publication"></a><span data-ttu-id="2cce1-234">マージ パブリケーションの単一のサブスクリプション</span><span class="sxs-lookup"><span data-stu-id="2cce1-234">For a single subscription to a Merge Publication</span></span>
  
### <a name="using-sql-server-management-studio"></a><span data-ttu-id="2cce1-235">SQL Server Management Studio を使用する</span><span class="sxs-lookup"><span data-stu-id="2cce1-235">Using SQL Server Management Studio</span></span>
  
1.  <span data-ttu-id="2cce1-236">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]でパブリッシャーに接続し、サーバー ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-236">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="2cce1-237">**[レプリケーション]** フォルダーを展開し、 **[ローカル パブリケーション]** フォルダーを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-237">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="2cce1-238">サブスクリプションを検証するパブリケーションを展開し、サブスクリプションを右クリックして、 **[サブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-238">Expand the publication for which you want to validate subscriptions, right-click the subscription, and then click **Validate Subscription**.</span></span>    
4.  <span data-ttu-id="2cce1-239">**[サブスクリプションの検証]** ダイアログ ボックスで、 **[このサブスクリプションを検証する]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-239">In the **Validate Subscription** dialog box, select **Validate this subscription**.</span></span>    
5.  <span data-ttu-id="2cce1-240">実行する検証の種類 (行数、または行数とチェックサム) を指定するには、 **[オプション]** をクリックし、 **[サブスクリプションの検証オプション]** ダイアログ ボックスでオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-240">To specify the type of validation to perform (row count, or row count and checksum) click **Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
7.  <span data-ttu-id="2cce1-241">レプリケーションモニターまたは [**同期の状態の表示**] ダイアログボックスで検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-241">View validation results in Replication Monitor or the **View Synchronization Status** dialog box:</span></span>  
    1.  <span data-ttu-id="2cce1-242">パブリケーションを展開し、サブスクリプションを右クリックして、 **[同期の状態の表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-242">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>   
    2.  <span data-ttu-id="2cce1-243">エージェントが実行されていない場合は、[**同期の状態の表示**] ダイアログボックスの [**開始**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-243">If the agent is not running, click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="2cce1-244">ダイアログ ボックスには、検証に関する情報メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-244">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="2cce1-245">検証に関するメッセージが表示されない場合、エージェントは既にその後のメッセージを記録しています。</span><span class="sxs-lookup"><span data-stu-id="2cce1-245">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="2cce1-246">この場合は、検証結果をレプリケーション モニターに表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-246">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="2cce1-247">詳細については、このトピックのレプリケーション モニターの実行手順を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-247">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="2cce1-248">Transact-SQL (T-SQL) の使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-248">Using Transact-SQL (T-SQL)</span></span>

1.  <span data-ttu-id="2cce1-249">パブリッシャー側のパブリケーション データベースに対して、[sp_validatemergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergesubscription-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-249">At the Publisher on the publication database, execute [sp_validatemergesubscription &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergesubscription-transact-sql).</span></span> <span data-ttu-id="2cce1-250">\*\* \@ パブリケーション\*\* \*\* \@ 、サブスクライバーの**サブスクライバー名、 \*\* \@ subscriber_db**に使用するサブスクリプションデータベースの名前、 \*\* \@ level\*\*に次のいずれかの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-250">Specify **\@publication**, the name of the Subscriber for **\@subscriber**, the name of the subscription database for **\@subscriber_db**, and one of the following values for **\@level**:</span></span>   
    -   <span data-ttu-id="2cce1-251">**1** - 行数の検証のみ</span><span class="sxs-lookup"><span data-stu-id="2cce1-251">**1** - Rowcount-only validation.</span></span>    
    -   <span data-ttu-id="2cce1-252">**3** - 行数とバイナリ チェックサムの検証</span><span class="sxs-lookup"><span data-stu-id="2cce1-252">**3** - Rowcount binary checksum validation.</span></span>  
  
     <span data-ttu-id="2cce1-253">これにより、選択されたサブスクリプションが検証対象としてマークされます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-253">This marks the selected subscription for validation.</span></span>  
  
2.  <span data-ttu-id="2cce1-254">各サブスクリプションのマージ エージェントを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-254">Start the merge agent for each subscription.</span></span> <span data-ttu-id="2cce1-255">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-255">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="2cce1-256">エージェントの出力で検証結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-256">Check the agent output for the result of the validation.</span></span>    
4.  <span data-ttu-id="2cce1-257">検証の対象となる各サブスクリプションについて、手順 1. から手順 3. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-257">Repeat steps 1 through 3 for each subscription being validated.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2cce1-258">**Replication Merge Agent** を実行するときに、 [-Validate](agents/replication-merge-agent.md)パラメーターを指定することによって、マージ パブリケーションのサブスクリプションについても同期処理の最後に検証を実行できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-258">A subscription to a merge publication can also be validated at the end of a synchronization by specifying the **-Validate** parameter when running the [Replication Merge Agent](agents/replication-merge-agent.md).</span></span>  

  
## <a name="for-all-subscriptions-to-a-merge-publication"></a><span data-ttu-id="2cce1-259">マージ パブリケーションのすべてのサブスクリプション</span><span class="sxs-lookup"><span data-stu-id="2cce1-259">For all subscriptions to a Merge Publication</span></span>

### <a name="using-sql-server-management-studio"></a><span data-ttu-id="2cce1-260">SQL Server Management Studio を使用する</span><span class="sxs-lookup"><span data-stu-id="2cce1-260">Using SQL Server Management Studio</span></span> 
  
1.  <span data-ttu-id="2cce1-261">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]でパブリッシャーに接続し、サーバー ノードを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-261">Connect to the Publisher in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], and then expand the server node.</span></span>    
2.  <span data-ttu-id="2cce1-262">**[レプリケーション]** フォルダーを展開し、 **[ローカル パブリケーション]** フォルダーを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-262">Expand the **Replication** folder, and then expand the **Local Publications** folder.</span></span>    
3.  <span data-ttu-id="2cce1-263">サブスクリプションを検証するパブリケーションを右クリックし、 **[すべてのサブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-263">Right-click the publication for which you want to validate subscriptions, and then click **Validate All Subscriptions**.</span></span>    
4.  <span data-ttu-id="2cce1-264">**[すべてのサブスクリプションの検証]** ダイアログ ボックスで、実行する検証の種類 (行数、または行数とチェックサム) を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-264">In the **Validate All Subscriptions** dialog box, specify the type of validation to perform (row count, or row count and checksum).</span></span>    
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
6.  <span data-ttu-id="2cce1-265">レプリケーション モニターまたは **[同期の状態の表示]** ダイアログ ボックスで検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-265">View validation results in Replication Monitor or the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="2cce1-266">サブスクリプションごとに、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-266">For each subscription:</span></span>    
    1.  <span data-ttu-id="2cce1-267">パブリケーションを展開し、サブスクリプションを右クリックして、 **[同期の状態の表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-267">Expand the publication, right-click the subscription, and then click **View Synchronization Status**.</span></span>   
    2.  <span data-ttu-id="2cce1-268">エージェントが実行されていない場合は、[**同期の状態の表示**] ダイアログボックスの [**開始**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-268">If the agent is not running, click **Start** in the **View Synchronization Status** dialog box.</span></span> <span data-ttu-id="2cce1-269">ダイアログ ボックスには、検証に関する情報メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-269">The dialog box will display informational messages regarding validation.</span></span>  
  
     <span data-ttu-id="2cce1-270">検証に関するメッセージが表示されない場合、エージェントは既にその後のメッセージを記録しています。</span><span class="sxs-lookup"><span data-stu-id="2cce1-270">If you do not see any messages regarding validation, the agent has already logged a subsequent message.</span></span> <span data-ttu-id="2cce1-271">この場合は、検証結果をレプリケーション モニターに表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-271">In this case, view the validation results in Replication Monitor.</span></span> <span data-ttu-id="2cce1-272">詳細については、このトピックのレプリケーション モニターの実行手順を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-272">For more information, see the Replication Monitor how to procedures in this topic.</span></span>  

### <a name="using-transact-sql-t-sql"></a><span data-ttu-id="2cce1-273">Transact-SQL (T-SQL) の使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-273">Using Transact-SQL (T-SQL)</span></span>

1.  <span data-ttu-id="2cce1-274">パブリッシャー側のパブリケーション データベースに対して、[sp_validatemergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergepublication-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-274">At the Publisher on the publication database, execute [sp_validatemergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-validatemergepublication-transact-sql).</span></span> <span data-ttu-id="2cce1-275">[ \*\* \@ パブリケーション**] を指定し、[ \*\* \@ レベル**] に次のいずれかの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-275">Specify **\@publication** and one of the following values for **\@level**:</span></span>    
    -   <span data-ttu-id="2cce1-276">**1** - 行数の検証のみ</span><span class="sxs-lookup"><span data-stu-id="2cce1-276">**1** - Rowcount-only validation.</span></span>    
    -   <span data-ttu-id="2cce1-277">**3** - 行数とバイナリ チェックサムの検証</span><span class="sxs-lookup"><span data-stu-id="2cce1-277">**3** - Rowcount binary checksum validation.</span></span>  
  
     <span data-ttu-id="2cce1-278">これにより、すべてのサブスクリプションが検証対象としてマークされます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-278">This marks all subscriptions for validation.</span></span>  
  
2.  <span data-ttu-id="2cce1-279">各サブスクリプションのマージ エージェントを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-279">Start the merge agent for each subscription.</span></span> <span data-ttu-id="2cce1-280">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-280">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>    
3.  <span data-ttu-id="2cce1-281">エージェントの出力で検証結果を確認します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-281">Check the agent output for the result of the validation.</span></span> <span data-ttu-id="2cce1-282">詳しくは、「 [Validate Data at the Subscriber](validate-data-at-the-subscriber.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-282">For more information, see [Validate Data at the Subscriber](validate-data-at-the-subscriber.md).</span></span>  


## <a name="for-a-single-push-subscription-to-a-merge-publication"></a><span data-ttu-id="2cce1-283">マージ パブリケーションの単一のプッシュ サブスクリプション</span><span class="sxs-lookup"><span data-stu-id="2cce1-283">For a single push subscription to a Merge Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="2cce1-284">レプリケーション モニターの使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-284">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="2cce1-285">レプリケーション モニターで、左ペインのパブリッシャー グループを展開し、パブリッシャーを展開してパブリケーションをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-285">In Replication Monitor, expand a Publisher group in the left pane, expand a Publisher, and then click a publication.</span></span>    
2.  <span data-ttu-id="2cce1-286">**[すべてのサブスクリプション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-286">Click the **All Subscriptions** tab.</span></span>    
3.  <span data-ttu-id="2cce1-287">検証するサブスクリプションを右クリックし、 **[サブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-287">Right-click the subscription you want to validate, and then click **Validate Subscription**.</span></span>    
4.  <span data-ttu-id="2cce1-288">**[サブスクリプションの検証]** ダイアログ ボックスで、 **[このサブスクリプションを検証する]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-288">In the **Validate Subscription** dialog box, select **Validate this subscription**.</span></span>    
5.  <span data-ttu-id="2cce1-289">実行する検証の種類 (行数、または行数とチェックサム) を指定するには、 **[オプション]** をクリックし、 **[サブスクリプションの検証オプション]** ダイアログ ボックスでオプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-289">To specify the type of validation to perform (row count, or row count and checksum) click **Options**, and then specify options in the **Subscription Validation Options** dialog box.</span></span>    
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
7.  <span data-ttu-id="2cce1-290">**[すべてのサブスクリプション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-290">Click the **All Subscriptions** tab.</span></span>    
8.  <span data-ttu-id="2cce1-291">検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-291">View validation results:</span></span>    
    1.  <span data-ttu-id="2cce1-292">エージェントが実行されていない場合、サブスクリプションを右クリックし、 **[同期の開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-292">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>    
    2.  <span data-ttu-id="2cce1-293">サブスクリプションを右クリックし、 **[詳細表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-293">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="2cce1-294">**[同期の履歴]** タブの **[選択されたセッションの最終メッセージ]** テキスト領域に情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-294">View information on the **Synchronization History** tab in the **Last message of the selected session** text area.</span></span>  
  
## <a name="for-all-push-subscriptions-to-a-merge-publication"></a><span data-ttu-id="2cce1-295">マージ パブリケーションのすべてのプッシュ サブスクリプション</span><span class="sxs-lookup"><span data-stu-id="2cce1-295">For all push subscriptions to a Merge Publication</span></span> 

### <a name="using-replication-monitor"></a><span data-ttu-id="2cce1-296">レプリケーション モニターの使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-296">Using Replication Monitor</span></span>
  
1.  <span data-ttu-id="2cce1-297">レプリケーション モニターの左ペインでパブリッシャー グループを展開し、パブリッシャーを展開します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-297">In Replication Monitor, expand a Publisher group in the left pane, and then expand a Publisher.</span></span>    
2.  <span data-ttu-id="2cce1-298">サブスクリプションを検証するパブリケーションを右クリックし、 **[すべてのサブスクリプションの検証]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-298">Right-click the publication for which you want to validate subscriptions, and then click **Validate All Subscriptions**.</span></span>    
3.  <span data-ttu-id="2cce1-299">**[すべてのサブスクリプションの検証]** ダイアログ ボックスで、実行する検証の種類 (行数、または行数とチェックサム) を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-299">In the **Validate All Subscriptions** dialog box, specify the type of validation to perform (row count, or row count and checksum).</span></span>    
4.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]    
5.  <span data-ttu-id="2cce1-300">**[すべてのサブスクリプション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-300">Click the **All Subscriptions** tab.</span></span>    
6.  <span data-ttu-id="2cce1-301">検証結果を表示します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-301">View validation results.</span></span> <span data-ttu-id="2cce1-302">プッシュ サブスクリプションごとに、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-302">For each push subscription:</span></span>    
    1.  <span data-ttu-id="2cce1-303">エージェントが実行されていない場合、サブスクリプションを右クリックし、 **[同期の開始]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-303">If the agent is not running, right-click the subscription, and then click **Start Synchronizing**.</span></span>    
    2.  <span data-ttu-id="2cce1-304">サブスクリプションを右クリックし、 **[詳細表示]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-304">Right-click the subscription, and then click **View Details**.</span></span>    
    3.  <span data-ttu-id="2cce1-305">**[同期の履歴]** タブの **[選択されたセッションの最終メッセージ]** テキスト領域に情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-305">View information on the **Synchronization History** tab in the **Last message of the selected session** text area.</span></span>  
  
  
## <a name="validate-data-using-merge-agent-parameters"></a><span data-ttu-id="2cce1-306">マージエージェントパラメーターを使用してデータを検証する</span><span class="sxs-lookup"><span data-stu-id="2cce1-306">Validate data using Merge Agent Parameters</span></span>
  
1.  <span data-ttu-id="2cce1-307">サブスクライバー (プル サブスクリプションの場合) またはディストリビューター (プッシュ サブスクリプションの場合) で、次のいずれかの方法でコマンド プロンプトからマージ エージェントを開始します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-307">Start the Merge Agent at the Subscriber (pull subscription) or at the Distributor (push subscription) from the command prompt in one of the following ways.</span></span>    
    -   <span data-ttu-id="2cce1-308">**-Validate** パラメーターの値に、 **1** (行数) または **3** (行数とバイナリ チェックサム) を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-308">Specifying a value of **1** (rowcount) or **3** (rowcount and binary checksum) for the **-Validate** parameter.</span></span>   
    -   <span data-ttu-id="2cce1-309">**-ProfileName** パラメーターに、 **rowcount validation** または **rowcount and checksum validation** を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-309">Specifying **rowcount validation** or **rowcount and checksum validation** for the **-ProfileName** parameter.</span></span>  
  
     <span data-ttu-id="2cce1-310">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」または「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-310">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) or [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span>  
  
## <a name="using-replication-management-objects-rmo"></a><span data-ttu-id="2cce1-311">レプリケーション管理オブジェクト (RMO) の使用</span><span class="sxs-lookup"><span data-stu-id="2cce1-311">Using Replication Management Objects (RMO)</span></span>  
 <span data-ttu-id="2cce1-312">レプリケーションでは、サブスクライバーのデータがパブリッシャーのデータと一致するかどうかを、レプリケーション管理オブジェクト (RMO) を使用してプログラムから検証できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-312">Replication enables you to use Replication Management Objects (RMO) to programmatically validate that data at the Subscriber matches data at the Publisher.</span></span> <span data-ttu-id="2cce1-313">使用するオブジェクトは、レプリケーション トポロジの種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="2cce1-313">The objects you use depend on the type of replication topology.</span></span> <span data-ttu-id="2cce1-314">トランザクション レプリケーションでは、パブリケーションのサブスクリプションをすべて検証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2cce1-314">Transactional replication requires validation of all subscriptions to a publication.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2cce1-315">例については、このセクションの後半の「 [例 (RMO)](#RMOExample)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-315">For an example, see [Example (RMO)](#RMOExample), later in this section.</span></span>  
  
#### <a name="to-validate-data-for-all-articles-in-a-transactional-publication"></a><span data-ttu-id="2cce1-316">トランザクション パブリケーションのすべてのアーティクルについてデータを検証するには</span><span class="sxs-lookup"><span data-stu-id="2cce1-316">To validate data for all articles in a transactional publication</span></span>  
  
1.  <span data-ttu-id="2cce1-317"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> クラスを使用して、パブリッシャーへの接続を作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-317">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>    
2.  <span data-ttu-id="2cce1-318"><xref:Microsoft.SqlServer.Replication.TransPublication> クラスのインスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-318">Create an instance of the <xref:Microsoft.SqlServer.Replication.TransPublication> class.</span></span> <span data-ttu-id="2cce1-319">パブリケーションの <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> プロパティおよび <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-319">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="2cce1-320"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> プロパティに、手順 1. の接続を設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-320">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>   
3.  <span data-ttu-id="2cce1-321"><xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> メソッドを呼び出して、オブジェクトの残りのプロパティを取得します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-321">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="2cce1-322">このメソッドが `false` を返す場合、手順 2. でパブリケーション プロパティを不適切に設定したか、パブリケーションが存在していません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-322">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="2cce1-323"><xref:Microsoft.SqlServer.Replication.TransPublication.ValidatePublication%2A> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-323">Call the <xref:Microsoft.SqlServer.Replication.TransPublication.ValidatePublication%2A> method.</span></span> <span data-ttu-id="2cce1-324">次のパラメーターを指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-324">Pass the following:</span></span>    
    -   <xref:Microsoft.SqlServer.Replication.ValidationOption>    
    -   <xref:Microsoft.SqlServer.Replication.ValidationMethod>    
    -   <span data-ttu-id="2cce1-325">検証が終了した後、ディストリビューション エージェントを停止するかどうかを示すブール値</span><span class="sxs-lookup"><span data-stu-id="2cce1-325">A Boolean that indicates whether to stop the Distribution Agent after validation is completed.</span></span>  
  
     <span data-ttu-id="2cce1-326">これにより、アーティクルが検証対象としてマークされます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-326">This marks the articles for validation.</span></span>  
  
5.  <span data-ttu-id="2cce1-327">まだディストリビューション エージェントを実行していない場合は、ディストリビューション エージェントを起動して、各サブスクリプションを同期します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-327">If not already running, start the Distribution Agent to synchronize each subscription.</span></span> <span data-ttu-id="2cce1-328">詳細については、「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md) 」または「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-328">For more information, see [Synchronize a Push Subscription](synchronize-a-push-subscription.md) or [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md).</span></span> <span data-ttu-id="2cce1-329">検証操作の結果は、エージェントの履歴に出力されます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-329">The result of the validation operation is written to the agent history.</span></span> <span data-ttu-id="2cce1-330">詳しくは、「 [Monitoring Replication](monitoring-replication.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-330">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
#### <a name="to-validate-data-in-all-subscriptions-to-a-merge-publication"></a><span data-ttu-id="2cce1-331">マージ パブリケーションのすべてのサブスクリプションについてデータを検証するには</span><span class="sxs-lookup"><span data-stu-id="2cce1-331">To validate data in all subscriptions to a merge publication</span></span>  
  
1.  <span data-ttu-id="2cce1-332"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> クラスを使用して、パブリッシャーへの接続を作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-332">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>   
2.  <span data-ttu-id="2cce1-333"><xref:Microsoft.SqlServer.Replication.MergePublication> クラスのインスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-333">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class.</span></span> <span data-ttu-id="2cce1-334">パブリケーションの <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> プロパティおよび <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-334">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="2cce1-335"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> プロパティに、手順 1. の接続を設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-335">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>   
3.  <span data-ttu-id="2cce1-336"><xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> メソッドを呼び出して、オブジェクトの残りのプロパティを取得します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-336">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="2cce1-337">このメソッドが `false` を返す場合、手順 2. でパブリケーション プロパティを不適切に設定したか、パブリケーションが存在していません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-337">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="2cce1-338"><xref:Microsoft.SqlServer.Replication.MergePublication.ValidatePublication%2A> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-338">Call the <xref:Microsoft.SqlServer.Replication.MergePublication.ValidatePublication%2A> method.</span></span> <span data-ttu-id="2cce1-339">必要な <xref:Microsoft.SqlServer.Replication.ValidationOption>を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-339">Pass the desired <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span></span>    
5.  <span data-ttu-id="2cce1-340">各サブスクリプションについてマージ エージェントを実行して検証を開始するか、次回予定されているエージェントの実行を待ちます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-340">Run the Merge Agent for each subscription to start validation, or wait for the next scheduled agent run.</span></span> <span data-ttu-id="2cce1-341">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-341">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span> <span data-ttu-id="2cce1-342">検証操作の結果は、エージェントの履歴に出力されます。この履歴は、レプリケーション モニターを使って表示できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-342">The result of the validation operation is written to the agent history, which you view by using Replication Monitor.</span></span> <span data-ttu-id="2cce1-343">詳しくは、「 [Monitoring Replication](monitoring-replication.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-343">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
#### <a name="to-validate-data-in-a-single-subscription-to-a-merge-publication"></a><span data-ttu-id="2cce1-344">マージ パブリケーションの単一のサブスクリプションについてデータを検証するには</span><span class="sxs-lookup"><span data-stu-id="2cce1-344">To validate data in a single subscription to a merge publication</span></span>  
  
1.  <span data-ttu-id="2cce1-345"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> クラスを使用して、パブリッシャーへの接続を作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-345">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>    
2.  <span data-ttu-id="2cce1-346"><xref:Microsoft.SqlServer.Replication.MergePublication> クラスのインスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-346">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class.</span></span> <span data-ttu-id="2cce1-347">パブリケーションの <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> プロパティおよび <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-347">Set the <xref:Microsoft.SqlServer.Replication.Publication.Name%2A> and <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A> properties for the publication.</span></span> <span data-ttu-id="2cce1-348"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> プロパティに、手順 1. の接続を設定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-348">Set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the connection created in step 1.</span></span>    
3.  <span data-ttu-id="2cce1-349"><xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> メソッドを呼び出して、オブジェクトの残りのプロパティを取得します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-349">Call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method to get the remaining properties of the object.</span></span> <span data-ttu-id="2cce1-350">このメソッドが `false` を返す場合、手順 2. でパブリケーション プロパティを不適切に設定したか、パブリケーションが存在していません。</span><span class="sxs-lookup"><span data-stu-id="2cce1-350">If this method returns `false`, either the publication properties in step 2 were defined incorrectly or the publication does not exist.</span></span>    
4.  <span data-ttu-id="2cce1-351"><xref:Microsoft.SqlServer.Replication.MergePublication.ValidateSubscription%2A> メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-351">Call the <xref:Microsoft.SqlServer.Replication.MergePublication.ValidateSubscription%2A> method.</span></span> <span data-ttu-id="2cce1-352">サブスクライバーの名前、検証対象のサブスクリプション データベース、および、必要な <xref:Microsoft.SqlServer.Replication.ValidationOption>を指定します。</span><span class="sxs-lookup"><span data-stu-id="2cce1-352">Pass the name of the Subscriber and subscription database being validated and the desired <xref:Microsoft.SqlServer.Replication.ValidationOption>.</span></span>    
5.  <span data-ttu-id="2cce1-353">目的のサブスクリプションについてマージ エージェントを実行して検証を開始するか、次回予定されているエージェントの実行を待ちます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-353">Run the Merge Agent for the subscription to start validation, or wait for the next scheduled agent run.</span></span> <span data-ttu-id="2cce1-354">詳細については、「 [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) 」および「 [Synchronize a Push Subscription](synchronize-a-push-subscription.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-354">For more information, see [Synchronize a Pull Subscription](synchronize-a-pull-subscription.md) and [Synchronize a Push Subscription](synchronize-a-push-subscription.md).</span></span> <span data-ttu-id="2cce1-355">検証操作の結果は、エージェントの履歴に出力されます。この履歴は、レプリケーション モニターを使って表示できます。</span><span class="sxs-lookup"><span data-stu-id="2cce1-355">The result of the validation operation is written to the agent history, which you view by using Replication Monitor.</span></span> <span data-ttu-id="2cce1-356">詳しくは、「 [Monitoring Replication](monitoring-replication.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2cce1-356">For more information, see [Monitoring Replication](monitoring-replication.md).</span></span>  
  
###  <a name="example-rmo"></a><a name="RMOExample"></a> <span data-ttu-id="2cce1-357">例 (RMO)</span><span class="sxs-lookup"><span data-stu-id="2cce1-357">Example (RMO)</span></span>  
 <span data-ttu-id="2cce1-358">次の例では、トランザクション パブリケーションのすべてのサブスクリプションを、行数検証の対象としてマークします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-358">This example marks all subscriptions to a transactional publication for rowcount validation.</span></span>  
  
 [!code-csharp[HowTo#rmo_ValidateTranPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_validatetranpub)]  
  
 [!code-vb[HowTo#rmo_vb_ValidateTranPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_validatetranpub)]  
  
 <span data-ttu-id="2cce1-359">次の例では、マージ パブリケーションの特定のサブスクリプションを、行数検証の対象としてマークします。</span><span class="sxs-lookup"><span data-stu-id="2cce1-359">This example marks a specific subscription to a merge publication for rowcount validation.</span></span>  
  
 [!code-csharp[HowTo#rmo_ValidateMergeSub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_validatemergesub)]  
  
 [!code-vb[HowTo#rmo_vb_ValidateMergeSub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_validatemergesub)]  
  
  
