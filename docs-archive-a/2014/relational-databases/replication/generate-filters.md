---
title: '[フィルターの生成] | Microsoft Docs'
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
f1_keywords:
- sql12.rep.newpubwizard.generatefilters.f1
ms.assetid: be28515c-5d6d-467b-b933-d7c8d97a45b4
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b0e484c89c97d3f32f3e41197800202f796a25d2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87632347"
---
# <a name="generate-filters"></a><span data-ttu-id="6488f-102">[フィルターの生成]</span><span class="sxs-lookup"><span data-stu-id="6488f-102">Generate Filters</span></span>
  <span data-ttu-id="6488f-103">**[フィルターの生成]** ダイアログ ボックスでは、マージ パブリケーション内の 1 つのテーブルに対して行フィルターを定義できます。これを行うと、レプリケーションによって、外部キー リレーションシップを介して関連付けられる他のテーブルにそのフィルターが自動的に拡張されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-103">The **Generate Filters** dialog box allows you to define a row filter on one table in a merge publication; replication then automatically extends the filter to other tables that are related through foreign key relationships.</span></span> <span data-ttu-id="6488f-104">たとえば、フランスの顧客データのみを含むように、フィルターを顧客テーブルに定義した場合、レプリケーションによってこのフィルターが拡張され、関連する受注テーブルや受注詳細テーブルには、フランスの顧客に関連する情報のみが含まれることになります。</span><span class="sxs-lookup"><span data-stu-id="6488f-104">For example, if you define a filter on a customer table so that it only contains data on French customers, replication extends that filter so that related orders and order details tables contain only information related to French customers.</span></span>  
  
## <a name="options"></a><span data-ttu-id="6488f-105">オプション</span><span class="sxs-lookup"><span data-stu-id="6488f-105">Options</span></span>  
 <span data-ttu-id="6488f-106">このダイアログ ボックスには、テーブルに行フィルターを作成するための 3 段階のプロセスがあります。</span><span class="sxs-lookup"><span data-stu-id="6488f-106">This dialog box involves a three-step process to create a row filter on a table.</span></span> <span data-ttu-id="6488f-107">主キーと外部キーのリレーションシップを通じて、フィルターされたテーブルと関連するテーブルにフィルターが拡張されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-107">The filter is then extended to the tables related to the filtered table through primary key and foreign key relationships.</span></span> <span data-ttu-id="6488f-108">たとえば、3 つのテーブル、 **Customer**、 **SalesOrderHeader**、および **SalesOrderDetail**に、 **Customer** と **SalesOrderHeader**のリレーションシップおよび **SalesOrderHeader** と **SalesOrderDetail**のリレーションシップが与えられている場合、 **Customer**に行フィルターを適用すると、レプリケーションによってこのフィルターが **SalesOrderHeader** と **SalesOrderDetail**に拡張されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-108">For example, given the three tables **Customer**, **SalesOrderHeader**, and **SalesOrderDetail**, with a relationship between **Customer** and **SalesOrderHeader**, and a relationship between **SalesOrderHeader** and **SalesOrderDetail**, apply a row filter to **Customer**, and replication extends that filter to **SalesOrderHeader** and **SalesOrderDetail**.</span></span>  
  
1.  <span data-ttu-id="6488f-109">**[フィルターを適用するテーブルを選択します。]**</span><span class="sxs-lookup"><span data-stu-id="6488f-109">**Select the table to filter.**</span></span>  
  
     <span data-ttu-id="6488f-110">ドロップダウン リスト ボックスからテーブルを選択します。</span><span class="sxs-lookup"><span data-stu-id="6488f-110">Select a table from the drop-down list box.</span></span> <span data-ttu-id="6488f-111">テーブルは、 **[アーティクル]** ページで選択されている場合のみ、このリスト ボックスに表示されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-111">Tables appear in the list box only if they were selected on the **Articles** page.</span></span>  
  
2.  <span data-ttu-id="6488f-112">**[フィルター ステートメントを完成させ、サブスクライバーが受け取るテーブル行を指定します。]**</span><span class="sxs-lookup"><span data-stu-id="6488f-112">**Complete the filter statement to identify which table rows Subscribers will receive.**</span></span>  
  
     <span data-ttu-id="6488f-113">新しいフィルター ステートメントを定義します。</span><span class="sxs-lookup"><span data-stu-id="6488f-113">Define a new filter statement.</span></span> <span data-ttu-id="6488f-114">**[列]** リスト ボックスには、 **[フィルターを適用するテーブルを選択します。]** で選択したテーブルからパブリッシュするすべての列が一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-114">The **Columns** list box lists all the columns that you are publishing from the table you selected in **Select the table to filter**.</span></span> <span data-ttu-id="6488f-115">**[フィルター ステートメント]** テキスト領域には、次の形式の既定のテキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-115">The **Filter statement** text area includes the default text, which is in the form of:</span></span>  
  
     `SELECT <published_columns> FROM [tableowner].[tablename] WHERE`  
  
     <span data-ttu-id="6488f-116">このテキストは変更できません。標準の [!INCLUDE[tsql](../../includes/tsql-md.md)] 構文を使用して、WHERE キーワードの後にフィルター句を入力します。</span><span class="sxs-lookup"><span data-stu-id="6488f-116">This text cannot be changed; type the filter clause after the WHERE keyword using standard [!INCLUDE[tsql](../../includes/tsql-md.md)] syntax.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="6488f-117">パラメーター化された行フィルター句では列名に関数を適用しないことをお勧めします。これは、 `LEFT([MyColumn]) = SUSER_SNAME()`のように指定すると、パフォーマンスに問題が生じるためです。</span><span class="sxs-lookup"><span data-stu-id="6488f-117">For performance reasons, we recommended that you not apply functions to column names in parameterized row filter clauses, such as `LEFT([MyColumn]) = SUSER_SNAME()`.</span></span> <span data-ttu-id="6488f-118">フィルター句で HOST_NAME を使用していて、HOST_NAME 値をオーバーライドする場合は、CONVERT を使用するデータ型の変換が必要になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6488f-118">If you use HOST_NAME in a filter clause and override the HOST_NAME value, it might be necessary to convert data types using CONVERT.</span></span> <span data-ttu-id="6488f-119">このようなケースの推奨事項の詳細については、「[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md)」の「HOST_NAME() 値のオーバーライド」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="6488f-119">For more information about best practices for this case, see the section "Overriding the HOST_NAME() Value" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
3.  <span data-ttu-id="6488f-120">**[このテーブルからデータを取得するサブスクリプションの数を指定します。]**</span><span class="sxs-lookup"><span data-stu-id="6488f-120">**Specify how many subscriptions will receive data from this table.**</span></span>  
  
     [!INCLUDE[msCoName](../../includes/msconame-md.md)] <span data-ttu-id="6488f-121">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 以降のバージョンのみです。</span><span class="sxs-lookup"><span data-stu-id="6488f-121">[!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and later versions only.</span></span> <span data-ttu-id="6488f-122">マージ レプリケーションを使用して、お使いのデータとアプリケーションに最適なパーティションの種類を指定できます。</span><span class="sxs-lookup"><span data-stu-id="6488f-122">Merge replication allows you to specify the type of partitions that are best suited to your data and application.</span></span> <span data-ttu-id="6488f-123">**[このテーブルの 1 行を 1 つのサブスクリプションのみに移動する]** を選択すると、マージ レプリケーションでは、重複しないパーティションのオプションが設定されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-123">If you select **A row from this table will go to only one subscription**, merge replication sets the nonoverlapping partitions option.</span></span> <span data-ttu-id="6488f-124">重複しないパーティションを事前計算済みパーティションと共に使用することで、パフォーマンスが向上します。事前計算済みパーティションに関連するアップロードの負担が、重複しないパーティションによって最小限に抑えられるためです。</span><span class="sxs-lookup"><span data-stu-id="6488f-124">Nonoverlapping partitions work in conjunction with precomputed partitions to improve performance, with nonoverlapping partitions minimizing the upload cost associated with precomputed partitions.</span></span> <span data-ttu-id="6488f-125">重複しないパーティションのパフォーマンス上の利点は、使用するパラメーター化されたフィルターと結合フィルターが複雑になるほど明確になります。</span><span class="sxs-lookup"><span data-stu-id="6488f-125">The performance benefit of nonoverlapping partitions is more noticeable when the parameterized filters and join filters used are more complex.</span></span> <span data-ttu-id="6488f-126">このオプションを選択する場合は、データのパーティション分割によって、1 つの行が複数のサブスクライバーにレプリケートされないことを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6488f-126">If you select this option, you must ensure that the data is partitioned in such a way that a row cannot be replicated to more than one Subscriber.</span></span> <span data-ttu-id="6488f-127">詳細については、「 [パラメーター化された行フィルター](merge/parameterized-filters-parameterized-row-filters.md)」トピックの「[パーティションのオプション] の設定」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="6488f-127">For more information, see the section "Setting 'partition options'" in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
 <span data-ttu-id="6488f-128">フィルターを追加した後で、 **[OK]** をクリックして終了し、ダイアログ ボックスを閉じます。</span><span class="sxs-lookup"><span data-stu-id="6488f-128">After you have added a filter, click **OK** to exit and close the dialog box.</span></span> <span data-ttu-id="6488f-129">指定したフィルターは、SELECT 句のテーブルに対して解析され、実行されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-129">The filter you specified is parsed and run against the table in the SELECT clause.</span></span> <span data-ttu-id="6488f-130">フィルター ステートメントに構文エラーなどの問題がある場合には通知され、フィルター ステートメントを編集することができます。</span><span class="sxs-lookup"><span data-stu-id="6488f-130">If the filter statement contains syntax errors or other problems, you will be notified and will be able to edit the filter statement.</span></span>  
  
 <span data-ttu-id="6488f-131">ステートメントが解析された後で、レプリケーションによって必要な結合フィルターが作成されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-131">After the statement is parsed, replication creates the necessary join filters.</span></span> <span data-ttu-id="6488f-132">このウィザードが実行されているパブリッシャーにディストリビューターを構成していない場合、ディストリビューターを構成するように要求されます。</span><span class="sxs-lookup"><span data-stu-id="6488f-132">If you have not yet configured the Distributor for the Publisher against which this wizard is running, you are prompted to configure it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6488f-133">参照</span><span class="sxs-lookup"><span data-stu-id="6488f-133">See Also</span></span>  
 <span data-ttu-id="6488f-134">[Create a Publication](publish/create-a-publication.md) </span><span class="sxs-lookup"><span data-stu-id="6488f-134">[Create a Publication](publish/create-a-publication.md) </span></span>  
 <span data-ttu-id="6488f-135">[パブリケーション プロパティの表示および変更](publish/view-and-modify-publication-properties.md) </span><span class="sxs-lookup"><span data-stu-id="6488f-135">[View and Modify Publication Properties](publish/view-and-modify-publication-properties.md) </span></span>  
 <span data-ttu-id="6488f-136">[パブリッシュされたデータのフィルター処理](publish/filter-published-data.md) </span><span class="sxs-lookup"><span data-stu-id="6488f-136">[Filter Published Data](publish/filter-published-data.md) </span></span>  
 <span data-ttu-id="6488f-137">[Join Filters](merge/join-filters.md) </span><span class="sxs-lookup"><span data-stu-id="6488f-137">[Join Filters](merge/join-filters.md) </span></span>  
 <span data-ttu-id="6488f-138">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="6488f-138">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span></span>  
 [<span data-ttu-id="6488f-139">データとデータベース オブジェクトのパブリッシュ</span><span class="sxs-lookup"><span data-stu-id="6488f-139">Publish Data and Database Objects</span></span>](publish/publish-data-and-database-objects.md)  
  
  
