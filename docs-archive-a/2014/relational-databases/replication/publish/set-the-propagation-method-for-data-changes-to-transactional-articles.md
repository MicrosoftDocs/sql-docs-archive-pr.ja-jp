---
title: データの変更をトランザクション アーティクルに反映する方法の設定 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, propagation methods
- propagating data changes [SQL Server replication]
ms.assetid: 0a291582-f034-42da-a1a3-29535b607b74
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a3f8be8b6df1034b06d0aaff6ee61c0c494833c5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87717847"
---
# <a name="set-the-propagation-method-for-data-changes-to-transactional-articles"></a><span data-ttu-id="2a051-102">データの変更をトランザクション アーティクルに反映する方法の設定</span><span class="sxs-lookup"><span data-stu-id="2a051-102">Set the Propagation Method for Data Changes to Transactional Articles</span></span>
  <span data-ttu-id="2a051-103">このトピックでは、 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] で [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] または [!INCLUDE[tsql](../../../includes/tsql-md.md)]を使用して、トランザクション アーティクルへのデータの変更の反映方法を設定する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="2a051-103">This topic describes how to set the propagation method for data changes to transactional articles in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
 <span data-ttu-id="2a051-104">既定では、トランザクション レプリケーションは、各アーティクルのストアド プロシージャ セットを使用して変更内容をサブスクライバーに反映します。</span><span class="sxs-lookup"><span data-stu-id="2a051-104">By default, transactional replication propagates changes to Subscribers using a set of stored procedures for each article.</span></span> <span data-ttu-id="2a051-105">これらのプロシージャはカスタム プロシージャに置換することができます。</span><span class="sxs-lookup"><span data-stu-id="2a051-105">You can replace these procedures with custom procedures.</span></span> <span data-ttu-id="2a051-106">詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-106">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
 <span data-ttu-id="2a051-107">**このトピックの内容**</span><span class="sxs-lookup"><span data-stu-id="2a051-107">**In This Topic**</span></span>  
  
-   <span data-ttu-id="2a051-108">**作業を開始する準備:**</span><span class="sxs-lookup"><span data-stu-id="2a051-108">**Before you begin:**</span></span>  
  
     [<span data-ttu-id="2a051-109">制限事項と制約事項</span><span class="sxs-lookup"><span data-stu-id="2a051-109">Limitations and Restrictions</span></span>](#Restrictions)  
  
-   <span data-ttu-id="2a051-110">**データの変更をトランザクション アーティクルに反映する方法を設定するために、使用するもの:**</span><span class="sxs-lookup"><span data-stu-id="2a051-110">**To set the propagation method for data changes to transactional articles, using:**</span></span>  
  
     [<span data-ttu-id="2a051-111">SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="2a051-111">SQL Server Management Studio</span></span>](#SSMSProcedure)  
  
     [<span data-ttu-id="2a051-112">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="2a051-112">Transact-SQL</span></span>](#TsqlProcedure)  
  
## <a name="before-you-begin"></a><span data-ttu-id="2a051-113">はじめに</span><span class="sxs-lookup"><span data-stu-id="2a051-113">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="2a051-114">制限事項と制約事項</span><span class="sxs-lookup"><span data-stu-id="2a051-114">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="2a051-115">レプリケーションによって生成されたスナップショット ファイルを編集する場合には注意が必要です。</span><span class="sxs-lookup"><span data-stu-id="2a051-115">Care must be taken when editing any of the snapshot files generated by replication.</span></span> <span data-ttu-id="2a051-116">カスタム ストアド プロシージャのカスタム ロジックをテストしてサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a051-116">You must test and support custom logic in the custom stored procedures.</span></span> [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="2a051-117">ではカスタム ロジックをサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="2a051-117">does not provide support for custom logic.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="2a051-118">SQL Server Management Studio の使用</span><span class="sxs-lookup"><span data-stu-id="2a051-118">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="2a051-119">反映方法は、パブリケーションの新規作成ウィザードからアクセスできる **[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスおよび **[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスの **[プロパティ]** タブで指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-119">Specify the propagation method on the **Properties** tab of the **Article Properties - \<Article>** dialog box, which is available in the New Publication Wizard and the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="2a051-120">ウィザードの使用およびダイアログ ボックスへのアクセスの詳細については、「[パブリケーションの作成](create-a-publication.md)」および「[View and Modify Publication Properties](view-and-modify-publication-properties.md)」 (パブリケーション プロパティの表示および変更) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-120">For more information about using the wizard and accessing the dialog box, see [Create a Publication](create-a-publication.md) and [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-the-propagation-method"></a><span data-ttu-id="2a051-121">反映方法を指定するには</span><span class="sxs-lookup"><span data-stu-id="2a051-121">To specify the propagation method</span></span>  
  
1.  <span data-ttu-id="2a051-122">パブリケーションの新規作成ウィザードの **[アーティクル]** ページ、または **[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスでテーブルを選択し、 **[アーティクルのプロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2a051-122">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table, and then click **Article Properties**.</span></span>  
  
2.  <span data-ttu-id="2a051-123">**[反転表示されたテーブル アーティクルのプロパティを設定]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2a051-123">Click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="2a051-124">**[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブの **[ステートメントの配信]** セクションで、 **[INSERT 配信形式]** 、 **[UPDATE 配信形式]** 、 **[DELETE 配信形式]** の各メニューを使用して各操作の反映方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-124">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Statement Delivery** section, specify the propagation method for each operation using the **INSERT delivery format**, **UPDATE delivery format**, and **DELETE delivery format** menus.</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="2a051-125">**[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスが表示されている場合は、 **[OK]** をクリックして保存し、ダイアログ ボックスを閉じます。</span><span class="sxs-lookup"><span data-stu-id="2a051-125">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
#### <a name="to-generate-and-use-custom-stored-procedures"></a><span data-ttu-id="2a051-126">カスタム ストアド プロシージャを生成して使用するには</span><span class="sxs-lookup"><span data-stu-id="2a051-126">To generate and use custom stored procedures</span></span>  
  
1.  <span data-ttu-id="2a051-127">パブリケーションの新規作成ウィザードの **[アーティクル]** ページ、または **[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスでテーブルを選択し、 **[アーティクルのプロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2a051-127">On the **Articles** page of the New Publication Wizard or the **Publication Properties - \<Publication>** dialog box, select a table, and then click **Article Properties**.</span></span>  
  
2.  <span data-ttu-id="2a051-128">**[反転表示されたテーブル アーティクルのプロパティを設定]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2a051-128">Click **Set Properties of Highlighted Table Article**.</span></span>  
  
     <span data-ttu-id="2a051-129">**[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブの **[ステートメントの配信]** セクションで、該当する配信形式メニュー ( **[INSERT 配信形式]** 、 **[UPDATE 配信形式]** 、または **[DELETE 配信形式]** ) から CALL 構文を選択し、 **[INSERT ストアド プロシージャ]** 、 **[DELETE ストアド プロシージャ]** 、または **[UPDATE ストアド プロシージャ]** で使用するプロシージャ名を入力します。</span><span class="sxs-lookup"><span data-stu-id="2a051-129">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Statement Delivery** section, select the CALL syntax from the appropriate delivery format menu (**INSERT delivery format**, **UPDATE delivery format**, or **DELETE delivery format**), and then type the name of the procedure to use in **INSERT stored procedure**, **DELETE stored procedure**, or **UPDATE stored procedure**.</span></span> <span data-ttu-id="2a051-130">CALL 構文の詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」の「ストアド プロシージャの呼び出し構文」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-130">For more information about CALL syntax, see the section "Call syntax for stored procedures" in [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
4.  <span data-ttu-id="2a051-131">**[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスが表示されている場合は、 **[OK]** をクリックして保存し、ダイアログ ボックスを閉じます。</span><span class="sxs-lookup"><span data-stu-id="2a051-131">If you are in the **Publication Properties - \<Publication>** dialog box, click **OK** to save and close the dialog box.</span></span>  
  
5.  <span data-ttu-id="2a051-132">パブリケーションのスナップショットが生成されると、そのスナップショットには前の手順で指定したプロシージャが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2a051-132">When the snapshot for the publication is generated, it will include the procedure you specified in the previous step.</span></span> <span data-ttu-id="2a051-133">このプロシージャは指定した CALL 構文を使用しますが、レプリケーションが使用する既定のロジックを含んでいます。</span><span class="sxs-lookup"><span data-stu-id="2a051-133">The procedures will use the CALL syntax you specified, but will include the default logic that replication uses.</span></span>  
  
     <span data-ttu-id="2a051-134">スナップショットが生成された後、このアーティクルが属するパブリケーションのスナップショット フォルダーに移動し、アーティクルと同じ名前の **.sch** ファイルを見つけます。</span><span class="sxs-lookup"><span data-stu-id="2a051-134">After the snapshot has been generated, navigate to the snapshot folder for the publication to which this article belongs and locate the **.sch** file with the same name as the article.</span></span> <span data-ttu-id="2a051-135">メモ帳などのテキスト エディターでこのファイルを開き、挿入、更新、または削除の各ストアド プロシージャで CREATE PROCEDURE コマンドを検索し、プロシージャ定義を編集してデータの変更を反映するためのカスタム ロジックを指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-135">Open this file using Notepad or another text editor, locate the CREATE PROCEDURE command for the insert, update, or delete stored procedures, and edit the procedure definition to supply any custom logic for propagating data changes.</span></span> <span data-ttu-id="2a051-136">スナップショットが再生成された場合は、カスタム プロシージャを再作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a051-136">If the snapshot is regenerated, you must re-create the custom procedure.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="2a051-137">Transact-SQL の使用</span><span class="sxs-lookup"><span data-stu-id="2a051-137">Using Transact-SQL</span></span>  
 <span data-ttu-id="2a051-138">トランザクション レプリケーションでは、パブリッシャーからサブスクライバーへの変更の反映方法を制御できます。この反映メソッドは、アーティクルの作成時やその後の変更時に、レプリケーションのストアド プロシージャを使用してプログラムから設定できます。</span><span class="sxs-lookup"><span data-stu-id="2a051-138">Transactional replication enables you to control how changes are propagated from the Publisher to Subscribers, and this propagation method can be set programmatically when an article is created and changed later using replication stored procedures.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2a051-139">パブリッシュされたデータ行に適用される DML (データ操作言語) 操作には、挿入、更新、削除などがありますが、各種の操作に対して異なる反映メソッドを指定できます。</span><span class="sxs-lookup"><span data-stu-id="2a051-139">You can specify a different propagation method for each type of DML (data manipulation language) operation (insert, update, or delete) that occurs on a row of a published data.</span></span>  
  
 <span data-ttu-id="2a051-140">詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-140">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
#### <a name="to-create-an-article-that-uses-transact-sql-commands-to-propagate-data-changes"></a><span data-ttu-id="2a051-141">データ変更を Transact-SQL コマンドを使って反映するアーティクルを作成するには</span><span class="sxs-lookup"><span data-stu-id="2a051-141">To create an article that uses Transact-SQL commands to propagate data changes</span></span>  
  
1.  <span data-ttu-id="2a051-142">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a051-142">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="2a051-143">**\@publication**、 **\@article**、および **\@source_object** に、それぞれ、アーティクルが属しているパブリケーションの名前、アーティクルの名前、および、パブリッシュ対象のデータベース オブジェクトを指定し、さらに、次のパラメーターの少なくとも 1 つに **SQL** を指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-143">Specify the name of the publication to which the article belongs for **\@publication**, a name for the article for **\@article**, the database object being published for **\@source_object**, and a value of **SQL** for at least one of the following parameters:</span></span>  
  
    -   <span data-ttu-id="2a051-144">**\@ins_cmd** - [INSERT](/sql/t-sql/statements/insert-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-144">**\@ins_cmd** - controls the replication of [INSERT](/sql/t-sql/statements/insert-transact-sql) commands.</span></span>  
  
    -   <span data-ttu-id="2a051-145">**\@upd_cmd** - [UPDATE](/sql/t-sql/queries/update-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-145">**\@upd_cmd** - controls the replication of [UPDATE](/sql/t-sql/queries/update-transact-sql) commands.</span></span>  
  
    -   <span data-ttu-id="2a051-146">**\@del_cmd** - [DELETE](/sql/t-sql/statements/delete-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-146">**\@del_cmd** - controls the replication of [DELETE](/sql/t-sql/statements/delete-transact-sql) commands.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-147">上記のパラメーターに対して **SQL** を指定すると、各種のコマンドが適切な [!INCLUDE[tsql](../../../includes/tsql-md.md)] コマンドとしてサブスクライバーにレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="2a051-147">When specifying a value of **SQL** for any of the above parameters, commands of that type will be replicated to the Subscriber as the appropriate [!INCLUDE[tsql](../../../includes/tsql-md.md)] command.</span></span>  
  
     <span data-ttu-id="2a051-148">詳しくは、「 [アーティクルを定義](define-an-article.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2a051-148">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
#### <a name="to-create-an-article-that-does-not-propagate-data-changes"></a><span data-ttu-id="2a051-149">データ変更を反映しないアーティクルを作成するには</span><span class="sxs-lookup"><span data-stu-id="2a051-149">To create an article that does not propagate data changes</span></span>  
  
1.  <span data-ttu-id="2a051-150">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a051-150">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="2a051-151">**\@publication**、 **\@article**、および **\@source_object** に、それぞれ、アーティクルが属しているパブリケーションの名前、アーティクルの名前、および、パブリッシュ対象のデータベース オブジェクトを指定し、さらに、次のパラメーターの少なくとも 1 つに **NONE** を指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-151">Specify the name of the publication to which the article belongs for **\@publication**, a name for the article for **\@article**, the database object being published for **\@source_object**, and a value of **NONE** for at least one of the following parameters:</span></span>  
  
    -   <span data-ttu-id="2a051-152">**\@ins_cmd** - [INSERT](/sql/t-sql/statements/insert-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-152">**\@ins_cmd** - controls the replication of [INSERT](/sql/t-sql/statements/insert-transact-sql) commands.</span></span>  
  
    -   <span data-ttu-id="2a051-153">**\@upd_cmd** - [UPDATE](/sql/t-sql/queries/update-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-153">**\@upd_cmd** - controls the replication of [UPDATE](/sql/t-sql/queries/update-transact-sql) commands.</span></span>  
  
    -   <span data-ttu-id="2a051-154">**\@del_cmd** - [DELETE](/sql/t-sql/statements/delete-transact-sql) コマンドのレプリケーションを制御します。</span><span class="sxs-lookup"><span data-stu-id="2a051-154">**\@del_cmd** - controls the replication of [DELETE](/sql/t-sql/statements/delete-transact-sql) commands.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-155">上記のパラメーターに対して **NONE** を指定すると、対応するコマンドはサブスクライバーにレプリケートされません。</span><span class="sxs-lookup"><span data-stu-id="2a051-155">When specifying a value of **NONE** for any of the above parameters, commands of that type will not be replicated to the Subscriber.</span></span>  
  
     <span data-ttu-id="2a051-156">詳しくは、「 [アーティクルを定義](define-an-article.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2a051-156">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
#### <a name="to-create-an-article-with-user-modified-custom-stored-procedures"></a><span data-ttu-id="2a051-157">ユーザーが変更したカスタム ストアド プロシージャを含むアーティクルを作成するには</span><span class="sxs-lookup"><span data-stu-id="2a051-157">To create an article with user-modified custom stored procedures</span></span>  
  
1.  <span data-ttu-id="2a051-158">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a051-158">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="2a051-159">**\@publication**、 **\@article**、および **\@source_object** に、それぞれ、アーティクルが属しているパブリケーションの名前、アーティクルの名前、および、パブリッシュ対象のデータベース オブジェクトを指定します。さらに、 **\@schema_option** にビットマスク **0x02** (カスタム ストアド プロシージャの自動生成を有効にする) を指定し、次のいずれかのパラメーターを指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-159">Specify the name of the publication to which the article belongs for **\@publication**, a name for the article for **\@article**, the database object being published for **\@source_object**, a value for the **\@schema_option** bitmask that contains the value **0x02** (enables automatic generation of custom stored procedures), and at least one of the following parameters:</span></span>  
  
    -   <span data-ttu-id="2a051-160">\*\* \@ ins_cmd\*\* - <strong>sp_MSins_*article_name*の呼び出し</strong>の値を指定します。 **_article_name_** は\*\* \@ article\*\*に対して指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-160">**\@ins_cmd** - specify a value of <strong>CALL sp_MSins_*article_name*</strong>, where **_article_name_** is the value specified for **\@article**.</span></span>  
  
    -   <span data-ttu-id="2a051-161">\*\* \@ Del_cmd\*\* - <strong>CALL Sp_MSdel_*article_name* </strong>または<strong>XCALL sp_MSdel_*article_name*</strong>の値を指定します。ここで**_article_name_** は、_ \* \@ article \* \* に指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-161">**\@del_cmd** - specify a value of <strong>CALL sp_MSdel_*article_name*</strong> or <strong>XCALL sp_MSdel_*article_name*</strong>, where **_article_name_** is the value specified for _\*\@article\*\*.</span></span>  
  
    -   <span data-ttu-id="2a051-162">\*\* \@ upd_cmd\*\* - <strong>scall sp_MSupd_*article_name*</strong>、 <strong>sp_MSupd_*article_name*</strong>、 <strong>XCALL sp_MSupd__article_name *</strong> 、または<strong>MCALL sp_MSupd_* article_name *</strong>のいずれかの値を指定します。ここで、 _**article_name**_ は*\* \@ article\*\*に指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-162">**\@upd_cmd** - specify a value of <strong>SCALL sp_MSupd_*article_name*</strong>, <strong>CALL sp_MSupd_*article_name*</strong>, <strong>XCALL sp_MSupd__article_name*</strong>, or <strong>MCALL sp_MSupd_* article_name\*</strong>, where _**article_name**_ is the value specified for **\@article**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-163">上記コマンド パラメーターのそれぞれについて、レプリケーションによって生成されるストアド プロシージャに独自の名前を指定できます。</span><span class="sxs-lookup"><span data-stu-id="2a051-163">For each of the above command parameters, you can specify your own name for the stored procedures that replication generates.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-164">CALL、SCALL、XCALL、MCALL の各構文の詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-164">For more information on CALL, SCALL, XCALL, and MCALL syntax, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
     <span data-ttu-id="2a051-165">詳しくは、「 [アーティクルを定義](define-an-article.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2a051-165">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="2a051-166">スナップショットが生成された後、このアーティクルが属するパブリケーションのスナップショット フォルダーに移動し、アーティクルと同じ名前の **.sch** ファイルを見つけます。</span><span class="sxs-lookup"><span data-stu-id="2a051-166">After the snapshot has been generated, navigate to the snapshot folder for the publication to which this article belongs and locate the **.sch** file with the same name as the article.</span></span> <span data-ttu-id="2a051-167">このファイルを Notepad.exe で開き、挿入、更新、削除のストアド プロシージャに対応する CREATE PROCEDURE コマンドを見つけ、そのプロシージャ定義を編集して、データ変更を反映するためのカスタム ロジックを指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-167">Open this file using Notepad.exe, locate the CREATE PROCEDURE command for the insert, update, or delete stored procedures, and edit the procedure definition to supply any custom logic for propagating data changes.</span></span> <span data-ttu-id="2a051-168">詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-168">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
#### <a name="to-create-an-article-with-custom-scripting-in-the-custom-stored-procedures-to-propagate-data-changes"></a><span data-ttu-id="2a051-169">カスタム ストアド プロシージャにデータ変更を反映するカスタム スクリプトを含むアーティクルを作成するには</span><span class="sxs-lookup"><span data-stu-id="2a051-169">To create an article with custom scripting in the custom stored procedures to propagate data changes</span></span>  
  
1.  <span data-ttu-id="2a051-170">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a051-170">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="2a051-171">**\@publication**、 **\@article**、および **\@source_object** に、それぞれ、アーティクルが属しているパブリケーションの名前、アーティクルの名前、および、パブリッシュ対象のデータベース オブジェクトを指定します。さらに、 **\@schema_option** にビットマスク **0x02** (カスタム ストアド プロシージャの自動生成を有効にする) を指定し、次のいずれかのパラメーターを指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-171">Specify the name of the publication to which the article belongs for **\@publication**, a name for the article for **\@article**, the database object being published for **\@source_object**, a value for the **\@schema_option** bitmask that contains the value **0x02** (enables automatic generation of custom stored procedures), and at least one of the following parameters:</span></span>  
  
    -   <span data-ttu-id="2a051-172">\*\* \@ ins_cmd\*\* - <strong>sp_MSins_*article_name*の呼び出し</strong>の値を指定します。 _**article_name**_ は\*\* \@ article\*\*に対して指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-172">**\@ins_cmd** - specify a value of <strong>CALL sp_MSins_*article_name*</strong>, where _**article_name**_ is the value specified for **\@article**.</span></span>  
  
    -   <span data-ttu-id="2a051-173">\*\* \@ Del_cmd\*\* - <strong>CALL Sp_MSdel_*article_name* </strong>または<strong>XCALL sp_MSdel_*article_name*</strong>の値を指定します。ここで、 _**article_name**_ は\*\* \@ article\*\*に指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-173">**\@del_cmd** - specify a value of <strong>CALL sp_MSdel_*article_name*</strong> or <strong>XCALL sp_MSdel_*article_name*</strong>, where _**article_name**_ is the value specified for **\@article**.</span></span>  
  
    -   <span data-ttu-id="2a051-174">\*\* \@ upd_cmd\*\* - <strong>scall sp_MSupd_*article_name*</strong>、 <strong>sp_MSupd_*article_name*</strong>、 <strong>XCALL sp_MSupd_*article_name*</strong>、 <strong>MCALL sp_MSupd_*article_name*</strong>のいずれかの値を指定します。ここで_**article_name**_ は、 \*\* \@ アーティクル\*\*に対して指定された値です。</span><span class="sxs-lookup"><span data-stu-id="2a051-174">**\@upd_cmd** - specify a value of <strong>SCALL sp_MSupd_*article_name*</strong>, <strong>CALL sp_MSupd_*article_name*</strong>, <strong>XCALL sp_MSupd_*article_name*</strong>, <strong>MCALL sp_MSupd_*article_name*</strong>, where _**article_name**_ is the value specified for **\@article**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-175">上記コマンド パラメーターのそれぞれについて、レプリケーションによって生成されるストアド プロシージャに独自の名前を指定できます。</span><span class="sxs-lookup"><span data-stu-id="2a051-175">For each of the above command parameters, you can specify your own name for the stored procedures that replication generates.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2a051-176">CALL、SCALL、XCALL、MCALL の各構文の詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-176">For more information on CALL, SCALL, XCALL, and MCALL syntax, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
     <span data-ttu-id="2a051-177">詳しくは、「 [アーティクルを定義](define-an-article.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2a051-177">For more information, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="2a051-178">パブリッシャーのパブリケーション データベースで、 [ALTER PROCEDURE](/sql/t-sql/statements/alter-procedure-transact-sql) ステートメントを使用して、挿入、更新、および削除のカスタム ストアド プロシージャに対応する [CREATE PROCEDURE](/sql/relational-databases/system-stored-procedures/sp-scriptpublicationcustomprocs-transact-sql) スクリプトが返されるように [sp_scriptpublicationcustomprocs](/sql/t-sql/statements/create-procedure-transact-sql) を編集します。</span><span class="sxs-lookup"><span data-stu-id="2a051-178">At the Publisher on the publication database, use the [ALTER PROCEDURE](/sql/t-sql/statements/alter-procedure-transact-sql) statement to edit [sp_scriptpublicationcustomprocs](/sql/relational-databases/system-stored-procedures/sp-scriptpublicationcustomprocs-transact-sql) so that it returns a [CREATE PROCEDURE](/sql/t-sql/statements/create-procedure-transact-sql) script for the insert, update, and delete custom stored procedures.</span></span> <span data-ttu-id="2a051-179">詳細については、「[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2a051-179">For more information, see [Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md).</span></span>  
  
#### <a name="to-change-the-method-of-propagating-changes-for-an-existing-article"></a><span data-ttu-id="2a051-180">既存のアーティクルの変更反映メソッドを変更するには</span><span class="sxs-lookup"><span data-stu-id="2a051-180">To change the method of propagating changes for an existing article</span></span>  
  
1.  <span data-ttu-id="2a051-181">パブリッシャーのパブリケーション データベースで [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="2a051-181">At the Publisher on the publication database, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql).</span></span> <span data-ttu-id="2a051-182">**\@publication** と **\@article** を指定して、 **\@property** に **ins_cmd**、**upd_cmd**、または **del_cmd** を指定し、さらに、該当する反映メソッドを **\@value** に指定します。</span><span class="sxs-lookup"><span data-stu-id="2a051-182">Specify **\@publication**, **\@article**, a value of **ins_cmd**, **upd_cmd**, or **del_cmd** for **\@property**, and the appropriate propagation method for **\@value**.</span></span>  
  
2.  <span data-ttu-id="2a051-183">変更対象の各反映メソッドについて、手順 1. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="2a051-183">Repeat step 1 for each propagation method to be changed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a051-184">参照</span><span class="sxs-lookup"><span data-stu-id="2a051-184">See Also</span></span>  
 <span data-ttu-id="2a051-185">[トランザクション アーティクルに変更を反映する方法の指定](../transactional/transactional-articles-specify-how-changes-are-propagated.md) </span><span class="sxs-lookup"><span data-stu-id="2a051-185">[Specify How Changes Are Propagated for Transactional Articles](../transactional/transactional-articles-specify-how-changes-are-propagated.md) </span></span>  
 [<span data-ttu-id="2a051-186">パブリケーションの作成</span><span class="sxs-lookup"><span data-stu-id="2a051-186">Create a publication</span></span>](create-a-publication.md)  
  
  
