---
title: ID 列の管理 | Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- identity values [SQL Server replication]
- merge replication [SQL Server replication], identity range management
- publishing [SQL Server replication], identity columns
- transactional replication, identity range management
- identity columns [SQL Server], replication
ms.assetid: 98892836-cf63-494a-bd5d-6577d9810ddf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 1b9a7b28c288ef80d24fb67479727d94c3c09fa5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87631794"
---
# <a name="manage-identity-columns"></a><span data-ttu-id="6457d-102">ID 列の管理</span><span class="sxs-lookup"><span data-stu-id="6457d-102">Manage Identity Columns</span></span>
  <span data-ttu-id="6457d-103">このトピックでは、 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] で [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] または [!INCLUDE[tsql](../../../includes/tsql-md.md)]を使用して、ID 列を管理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="6457d-103">This topic describes how to manage identity columns in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="6457d-104">サブスクライバー挿入がパブリッシャーにレプリケートされる場合、サブスクライバーとパブリッシャーに同じ ID 値が割り当てられないように、ID 列を管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6457d-104">When Subscriber inserts are replicated back to the Publisher, identity columns must be managed to avoid assignment of the same identity value at both the Subscriber and Publisher.</span></span> <span data-ttu-id="6457d-105">レプリケーションでは ID の範囲を自動的に管理することも、ID の範囲を手動で管理することもできます。</span><span class="sxs-lookup"><span data-stu-id="6457d-105">Replication can manage identity ranges automatically or you can choose to manually handle identity range management.</span></span>  <span data-ttu-id="6457d-106">レプリケーションで使用できる ID 範囲管理オプションについては、「[ID 列のレプリケート](replicate-identity-columns.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-106">For information about the identity range management options provided by replication, see [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="6457d-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="6457d-107">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="6457d-108">推奨事項</span><span class="sxs-lookup"><span data-stu-id="6457d-108">Recommendations</span></span>  
  
-   <span data-ttu-id="6457d-109">複数のパブリケーションでテーブルをパブリッシュする場合、両方のパブリケーションに同じ ID 範囲管理オプションを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6457d-109">When publishing a table in more than one publication, you must specify the same identity range management options for both publications.</span></span> <span data-ttu-id="6457d-110">詳細については、「[データとデータベース オブジェクトのパブリッシュ](publish-data-and-database-objects.md)」の「複数のパブリケーションでのテーブルのパブリッシュ」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-110">For more information, see "Publishing Tables in More Than One Publication" in [Publish Data and Database Objects](publish-data-and-database-objects.md).</span></span>  
  
-   <span data-ttu-id="6457d-111">複数のテーブルで使用できる自動的に増分する番号、またはテーブルを参照せずにアプリケーションから呼び出すことができる自動的に増分する番号を作成するには、「[シーケンス番号](../../sequence-numbers/sequence-numbers.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-111">To create an automatically incrementing number that can be used in multiple tables or that can be called from applications without referencing any table, see [Sequence Numbers](../../sequence-numbers/sequence-numbers.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="6457d-112">SQL Server Management Studio の使用</span><span class="sxs-lookup"><span data-stu-id="6457d-112">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="6457d-113">パブリケーションの新規作成ウィザードの **[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブで、ID 列の管理オプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-113">Specify an identity column management option on the **Properties** tab of the **Article Properties -\<Article>** dialog box of the New Publication Wizard.</span></span> <span data-ttu-id="6457d-114">このウィザードの使用の詳細については、「[パブリケーションの作成](create-a-publication.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-114">For more information about using this wizard, see [Create a Publication](create-a-publication.md).</span></span> <span data-ttu-id="6457d-115">パブリケーションの新規作成ウィザードで選択した内容に応じて、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="6457d-115">In the New Publication Wizard:</span></span>  
  
-   <span data-ttu-id="6457d-116">**[パブリケーションの種類]** ページで **[マージ パブリケーション]** または **[更新可能なサブスクリプションを含むトランザクション パブリケーション]** を選択した場合は、ID 範囲の管理を自動または手動に設定します (自動 (既定値) に設定することを推奨します)。</span><span class="sxs-lookup"><span data-stu-id="6457d-116">If you select **Merge publication** or **Transactional publication with updating subscriptions** on the **Publication Type** page, select automatic or manual identity range management (automatic, the default, is recommended).</span></span> <span data-ttu-id="6457d-117">このプロパティは、テーブルがパブリッシュされた後は変更できません。ただし、その他の関連プロパティは変更できます。</span><span class="sxs-lookup"><span data-stu-id="6457d-117">After the table is published, the property cannot be modified, but other related properties can be modified.</span></span>  
  
-   <span data-ttu-id="6457d-118">他のパブリケーションの種類を選択した場合は、ID 範囲の管理を手動に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6457d-118">If you select other publication types, identity range management should be set to manual.</span></span>  
  
 <span data-ttu-id="6457d-119">**[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブで、ID 範囲としきい値を変更します。このダイアログ ボックスは、 **[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスから開くことができます。</span><span class="sxs-lookup"><span data-stu-id="6457d-119">Modify identity ranges and thresholds on the **Properties** tab of the **Article Properties -\<Article>**, which is available in the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="6457d-120">このダイアログ ボックスへのアクセス方法の詳細については、「[パブリケーション プロパティの表示および変更](view-and-modify-publication-properties.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-120">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-an-identity-column-management-option"></a><span data-ttu-id="6457d-121">ID 列の管理オプションを指定するには</span><span class="sxs-lookup"><span data-stu-id="6457d-121">To specify an identity column management option</span></span>  
  
1.  <span data-ttu-id="6457d-122">パブリッシャーが [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] よりも前のバージョンの [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]を実行している場合は、パブリケーションの新規作成ウィザードの **[パブリケーションの種類]** ページで、 **[マージ パブリケーション]** または **[更新可能なサブスクリプションを含むトランザクション パブリケーション]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="6457d-122">If the Publisher is running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], on the **Publication Type** page of the New Publication Wizard, select **Merge publication** or **Transactional publication with updating subscriptions**.</span></span>  
  
2.  <span data-ttu-id="6457d-123">**[アーティクル]** ページで、ID 列があるテーブルを選択します。</span><span class="sxs-lookup"><span data-stu-id="6457d-123">On the **Articles** page, select a table with an identity column.</span></span>  
  
3.  <span data-ttu-id="6457d-124">**[アーティクルのプロパティ]** をクリックしてから、 **[反転表示されたテーブル アーティクルのプロパティを設定]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6457d-124">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
4.  <span data-ttu-id="6457d-125">**[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブの **[ID 範囲の管理]** セクションで、 **[ID 範囲を自動的に管理します]** プロパティを **[自動]** または **[手動]** (パブリッシャーが [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 以降を実行している場合)、あるいは **[True]** または **[False]** (パブリッシャーが [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] よりも前のバージョンの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を実行している場合) に設定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-125">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, set the **Automatically manage identity ranges** property to **Automatic** or **Manual** (for Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later), or **True** or **False** (for Publishers running a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] prior to [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]).</span></span>  
  
5.  <span data-ttu-id="6457d-126">手順 4. で **[自動]** または **[True]** を選択した場合は、次の表のオプションの値を入力します。</span><span class="sxs-lookup"><span data-stu-id="6457d-126">If you selected **Automatic** or **True** in step 4, enter values for the options in the following table.</span></span> <span data-ttu-id="6457d-127">これらの設定の使用方法の詳細については、「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-127">For more information on how these settings are used, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    |<span data-ttu-id="6457d-128">オプション</span><span class="sxs-lookup"><span data-stu-id="6457d-128">Option</span></span>|<span data-ttu-id="6457d-129">値</span><span class="sxs-lookup"><span data-stu-id="6457d-129">Value</span></span>|<span data-ttu-id="6457d-130">説明</span><span class="sxs-lookup"><span data-stu-id="6457d-130">Description</span></span>|  
    |------------|-----------|-----------------|  
    |<span data-ttu-id="6457d-131">**[パブリッシャーの範囲サイズ]**</span><span class="sxs-lookup"><span data-stu-id="6457d-131">**Publisher range size**</span></span>|<span data-ttu-id="6457d-132">範囲サイズの整数値 (たとえば 20000)。</span><span class="sxs-lookup"><span data-stu-id="6457d-132">Integer value for range size (for example, 20000).</span></span>|<span data-ttu-id="6457d-133">「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-133">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="6457d-134">**[サブスクライバーの範囲サイズ]**</span><span class="sxs-lookup"><span data-stu-id="6457d-134">**Subscriber range size**</span></span>|<span data-ttu-id="6457d-135">範囲サイズの整数値 (たとえば 10000)。</span><span class="sxs-lookup"><span data-stu-id="6457d-135">Integer value for range size (for example, 10000).</span></span>|<span data-ttu-id="6457d-136">「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-136">See the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="6457d-137">**[範囲しきい値の割合]**</span><span class="sxs-lookup"><span data-stu-id="6457d-137">**Range threshold percentage**</span></span>|<span data-ttu-id="6457d-138">パーセントによるしきい値の整数値 (たとえば、90 は 90% を表します)。</span><span class="sxs-lookup"><span data-stu-id="6457d-138">Integer value for percent threshold (for example, 90 is equivalent to 90 percent).</span></span>|<span data-ttu-id="6457d-139">ノードで使用されている ID 値全体の比率がこの値を超えると、新しい ID 範囲が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="6457d-139">Percent of total identity values used at a node before a new identity range is assigned.</span></span><br /><br /> <span data-ttu-id="6457d-140">注:この値の指定は必須ですが、この値は、キュー更新サブスクリプションを使用するサブスクライバーと、[!INCLUDE[ssEW](../../../includes/ssew-md.md)] または他のエディションの SQL Server の旧バージョンを実行しているマージ パブリケーションのサブスクライバーのみが使用します。</span><span class="sxs-lookup"><span data-stu-id="6457d-140">Note: This value must be specified, but it is only used by: Subscribers using queued updating subscriptions; and Subscribers to merge publications running [!INCLUDE[ssEW](../../../includes/ssew-md.md)] or previous versions of other SQL Server editions.</span></span> <span data-ttu-id="6457d-141">詳細については、「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-141">For more information, see the "Assigning Identity Ranges" section of [Replicate Identity Columns](replicate-identity-columns.md).</span></span>|  
    |<span data-ttu-id="6457d-142">**[次の範囲の開始値]**</span><span class="sxs-lookup"><span data-stu-id="6457d-142">**Next range starting value**</span></span>|<span data-ttu-id="6457d-143">整数値。</span><span class="sxs-lookup"><span data-stu-id="6457d-143">Integer value.</span></span> <span data-ttu-id="6457d-144">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="6457d-144">Read-only.</span></span>|<span data-ttu-id="6457d-145">次の範囲はこの値から始まります。</span><span class="sxs-lookup"><span data-stu-id="6457d-145">The value at which the next range will start.</span></span> <span data-ttu-id="6457d-146">たとえば、現在の範囲が 5001 ～ 6000 の場合、この値は 6001 になります。</span><span class="sxs-lookup"><span data-stu-id="6457d-146">For example, if the current range is 5001-6000, this value will be 6001.</span></span>|  
    |<span data-ttu-id="6457d-147">**[最大 ID 値]**</span><span class="sxs-lookup"><span data-stu-id="6457d-147">**Maximum identity value**</span></span>|<span data-ttu-id="6457d-148">整数値。</span><span class="sxs-lookup"><span data-stu-id="6457d-148">Integer value.</span></span> <span data-ttu-id="6457d-149">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="6457d-149">Read-only.</span></span>|<span data-ttu-id="6457d-150">ID 列の最大値です。</span><span class="sxs-lookup"><span data-stu-id="6457d-150">The largest value for the identity column.</span></span> <span data-ttu-id="6457d-151">列の基本データ型によって決まります。</span><span class="sxs-lookup"><span data-stu-id="6457d-151">Determined by the base data type of the column.</span></span>|  
    |<span data-ttu-id="6457d-152">**Increment**</span><span class="sxs-lookup"><span data-stu-id="6457d-152">**Increment**</span></span>|<span data-ttu-id="6457d-153">整数値。</span><span class="sxs-lookup"><span data-stu-id="6457d-153">Integer value.</span></span> <span data-ttu-id="6457d-154">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="6457d-154">Read-only.</span></span>|<span data-ttu-id="6457d-155">挿入のたびに ID 列の番号が増減する量。通常は 1 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="6457d-155">The amount by which the number in the identity column should increase or decrease for each insert: typically set to 1.</span></span>|  
  
6.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### <a name="to-modify-identity-ranges-and-thresholds-after-a-table-is-published"></a><span data-ttu-id="6457d-156">テーブルがパブリッシュされた後に ID 範囲としきい値を変更するには</span><span class="sxs-lookup"><span data-stu-id="6457d-156">To modify identity ranges and thresholds after a table is published</span></span>  
  
1.  <span data-ttu-id="6457d-157">**[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスの **[アーティクル]** ページで、ID 列があるテーブルを選択します。</span><span class="sxs-lookup"><span data-stu-id="6457d-157">On the **Articles** page of the **Publication Properties - \<Publication>** dialog box, select a table with an identity column.</span></span>  
  
2.  <span data-ttu-id="6457d-158">**[アーティクルのプロパティ]** をクリックしてから、 **[反転表示されたテーブル アーティクルのプロパティを設定]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6457d-158">Click **Article Properties**, and then click **Set Properties of Highlighted Table Article**.</span></span>  
  
3.  <span data-ttu-id="6457d-159">**[アーティクルのプロパティ - \<Article>]** ダイアログ ボックスの **[プロパティ]** タブの **[ID 範囲の管理]** セクションで、 **[パブリッシャーの範囲サイズ]** 、 **[サブスクライバーの範囲サイズ]** 、および **[範囲しきい値の割合]** プロパティの 1 つ以上に値を入力します。</span><span class="sxs-lookup"><span data-stu-id="6457d-159">On the **Properties** tab of the **Article Properties - \<Article>** dialog box, in the **Identity Range Management** section, enter values for one or more of the following properties: **Publisher range size**, **Subscriber range size**, and **Range threshold percentage**.</span></span>  
  
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
5.  <span data-ttu-id="6457d-160">**[パブリケーションのプロパティ - \<Publication>]** ダイアログ ボックスで、 **[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="6457d-160">Click **OK** on the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="6457d-161">Transact-SQL の使用</span><span class="sxs-lookup"><span data-stu-id="6457d-161">Using Transact-SQL</span></span>  
 <span data-ttu-id="6457d-162">レプリケーション ストアド プロシージャを使用して、アーティクルを作成するときの ID 範囲管理オプションを指定できます。</span><span class="sxs-lookup"><span data-stu-id="6457d-162">You can use replication stored procedures to specify identity range management options when an article is created.</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="6457d-163">トランザクション パブリケーションのアーティクルを定義する際に自動 ID 範囲管理を有効にするには</span><span class="sxs-lookup"><span data-stu-id="6457d-163">To enable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="6457d-164">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-164">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="6457d-165">パブリッシュするソース テーブルに ID 列がある場合、 **\@identityrangemanagementoption** に **auto** を指定し、パブリッシャーに割り当てる ID 値の範囲を **\@pub_identity_range** に、各サブスクライバーに割り当てる ID 値の範囲を **\@identity_range** に、新しい ID 範囲を割り当てる前に使用されていた ID 値の総数のパーセンテージを **\@threshold** に指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-165">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to the Publisher for **\@pub_identity_range**, the range of identity values assigned to each Subscribers for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="6457d-166">アーティクルの定義の詳細については、「[Define an Article](define-an-article.md)」 (アーティクルの定義) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-166">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6457d-167">ID 列のデータ型のサイズが、すべてのサブスクライバーに割り当てられる ID 範囲の総計をサポートできるだけの大きさであることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-167">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-transactional-publication"></a><span data-ttu-id="6457d-168">トランザクション パブリケーションのアーティクルを定義する際に自動 ID 範囲管理を無効にするには</span><span class="sxs-lookup"><span data-stu-id="6457d-168">To disable automatic identity range management when defining articles for a transactional publication</span></span>  
  
1.  <span data-ttu-id="6457d-169">パブリッシャー側のパブリケーション データベースに対して、 [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-169">At the Publisher on the publication database, execute [sp_addarticle](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql).</span></span> <span data-ttu-id="6457d-170">**\@identityrangemanagementoption** に **manual** を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-170">Specify a value of **manual** for **\@identityrangemanagementoption**.</span></span> <span data-ttu-id="6457d-171">アーティクルの定義の詳細については、「[Define an Article](define-an-article.md)」 (アーティクルの定義) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-171">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="6457d-172">サブスクライバーの更新時に競合が発生しないように、サブスクライバーの ID アーティクル列に範囲を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="6457d-172">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span> <span data-ttu-id="6457d-173">詳細については、トピック「[ID 列のレプリケート](replicate-identity-columns.md)」で、手動による ID 範囲管理用に範囲を割り当てる方法に関する部分を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-173">For more information, see the section on assigning ranges for manual identity range management in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
#### <a name="to-enable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="6457d-174">マージ パブリケーションのアーティクルを定義する際の自動 ID 範囲管理を有効にするには</span><span class="sxs-lookup"><span data-stu-id="6457d-174">To enable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="6457d-175">パブリッシャー側のパブリケーション データベースに対して、 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-175">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="6457d-176">パブリッシュするソース テーブルに ID 列がある場合、 **\@identityrangemanagementoption** に **auto** を指定し、サーバー サブスクリプションに割り当てる ID 値の範囲を **\@pub_identity_range** に、パブリッシャーおよび各クライアント サブスクリプションに割り当てる ID 値の範囲を **\@identity_range** に、新しい ID 範囲を割り当てる前に使用されていた ID 値の総数のパーセンテージを **\@threshold** に指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-176">If the source table being published has an identity column, specify a value of **auto** for **\@identityrangemanagementoption**, the range of identity values assigned to a server subscription for **\@pub_identity_range**, the range of identity values assigned to the Publisher and each client subscription for **\@identity_range**, and the percent of total identity values used before a new identity range is assigned for **\@threshold**.</span></span> <span data-ttu-id="6457d-177">いつ新しい ID 範囲が割り当てられるのかについては、「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-177">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span> <span data-ttu-id="6457d-178">アーティクルの定義の詳細については、「[Define an Article](define-an-article.md)」 (アーティクルの定義) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-178">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="6457d-179">特にサーバー サブスクリプションを使用するサブスクライバーの場合、ID 列のデータ型のサイズが、すべてのサブスクライバーに割り当てられる ID 範囲の総計をサポートできるだけの大きさであることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-179">Ensure that the data type of the identity column is large enough to support the total range of identities being assigned to all Subscribers, particularly for Subscribers with server subscriptions.</span></span>  
  
#### <a name="to-disable-automatic-identity-range-management-when-defining-articles-for-a-merge-publication"></a><span data-ttu-id="6457d-180">マージ パブリケーションのアーティクルを定義する際に自動 ID 範囲管理を無効にするには</span><span class="sxs-lookup"><span data-stu-id="6457d-180">To disable automatic identity range management when defining articles for a merge publication</span></span>  
  
1.  <span data-ttu-id="6457d-181">パブリッシャー側のパブリケーション データベースに対して、 [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-181">At the Publisher on the publication database, execute [sp_addmergearticle](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql).</span></span> <span data-ttu-id="6457d-182">次のいずれかの値を **\@identityrangemanagementoption** に指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-182">Specify one of the following values for **\@identityrangemanagementoption**:</span></span>  
  
    -   <span data-ttu-id="6457d-183">**manual** - サブスクライバーを更新するには、手動で ID 範囲を割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="6457d-183">**manual** - Identity ranges must be assigned manually for updating Subscribers.</span></span>  
  
    -   <span data-ttu-id="6457d-184">**none** - パブリッシャーの ID 列は、サブスクライバーの ID 列として定義されません。</span><span class="sxs-lookup"><span data-stu-id="6457d-184">**none** - Identity columns at the Publisher will not be defined as identity columns at the Subscriber.</span></span>  
  
     <span data-ttu-id="6457d-185">アーティクルの定義の詳細については、「[Define an Article](define-an-article.md)」 (アーティクルの定義) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-185">For more information about defining articles, see [Define an Article](define-an-article.md).</span></span>  
  
2.  <span data-ttu-id="6457d-186">サブスクライバーの更新時に競合が発生しないように、サブスクライバーの ID アーティクル列に範囲を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="6457d-186">Assign ranges to identity article columns at the Subscriber to avoid generating conflicts for updating Subscribers.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-snapshot-or-transactional-publication"></a><span data-ttu-id="6457d-187">スナップショット パブリケーションまたはトランザクション パブリケーションの既存のアーティクルに対する ID 範囲管理設定を自動的に変更するには</span><span class="sxs-lookup"><span data-stu-id="6457d-187">To change automatic identity range management settings for an existing article in a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="6457d-188">パブリッシャー側のパブリケーション データベースに対して [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) を実行し、結果セットの **identityrangemanagementoption** の値を確認します。</span><span class="sxs-lookup"><span data-stu-id="6457d-188">At the Publisher on the publication database, execute [sp_helparticle](/sql/relational-databases/system-stored-procedures/sp-helparticle-transact-sql) and note the value of **identityrangemanagementoption** in the result set.</span></span> <span data-ttu-id="6457d-189">値が **0**の場合、自動 ID 範囲管理は有効ではありません。</span><span class="sxs-lookup"><span data-stu-id="6457d-189">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="6457d-190">結果セットの **identityrangemanagementoption** の値が **1**の場合、次のようにして設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="6457d-190">If the value of **identityrangemanagementoption** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="6457d-191">割り当てられている ID 範囲を変更するには、パブリッシャー側のパブリケーション データベースに対して [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-191">To change the assigned identity ranges, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="6457d-192">**\@property** に **identity_range** か **pub_identity_range** を指定し、 **\@value** に新しい範囲値を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-192">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="6457d-193">新しい範囲の割り当てのしきい値を変更するには、パブリッシャー側のパブリケーション データベースに対して [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-193">To change the threshold at which new ranges are assigned, execute [sp_changearticle](/sql/relational-databases/system-stored-procedures/sp-changearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="6457d-194">**\@property** に **threshold** を指定し、 **\@value** に新しいしきい値を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-194">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span>  
  
#### <a name="to-change-automatic-identity-range-management-settings-for-an-existing-article-in-a-merge-publication"></a><span data-ttu-id="6457d-195">マージ パブリケーションの既存のアーティクルに対する ID 範囲管理設定を自動的に変更するには</span><span class="sxs-lookup"><span data-stu-id="6457d-195">To change automatic identity range management settings for an existing article in a merge publication</span></span>  
  
1.  <span data-ttu-id="6457d-196">パブリッシャー側のパブリケーション データベースに対して [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) を実行し、結果セットの **identity_support** の値を確認します。</span><span class="sxs-lookup"><span data-stu-id="6457d-196">At the Publisher on the publication database, execute [sp_helpmergearticle](/sql/relational-databases/system-stored-procedures/sp-helpmergearticle-transact-sql) and note the value of **identity_support** in the result set.</span></span> <span data-ttu-id="6457d-197">値が **0**の場合、自動 ID 範囲管理は有効ではありません。</span><span class="sxs-lookup"><span data-stu-id="6457d-197">If this value is **0**, automatic identity range management is not enabled.</span></span>  
  
2.  <span data-ttu-id="6457d-198">結果セットの **identity_support** の値が **1**の場合、次のようにして設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="6457d-198">If the value of **identity_support** in the result set is **1**, change the settings as follows:</span></span>  
  
    -   <span data-ttu-id="6457d-199">割り当てられている ID 範囲を変更するには、パブリッシャー側のパブリケーション データベースに対して [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-199">To change the assigned identity ranges, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="6457d-200">**\@property** に **identity_range** か **pub_identity_range** を指定し、 **\@value** に新しい範囲値を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-200">Specify a value of **identity_range** or **pub_identity_range** for **\@property** and the new range value for **\@value**.</span></span>  
  
    -   <span data-ttu-id="6457d-201">新しい範囲の割り当てのしきい値を変更するには、パブリッシャー側のパブリケーション データベースに対して [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-201">To change the threshold at which new ranges are assigned, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="6457d-202">**\@property** に **threshold** を指定し、 **\@value** に新しいしきい値を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-202">Specify a value of **threshold** for **\@property** and the new threshold value for **\@value**.</span></span> <span data-ttu-id="6457d-203">いつ新しい ID 範囲が割り当てられるのかについては、「[ID 列のレプリケート](replicate-identity-columns.md)」の「ID 範囲の割り当て」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6457d-203">For more information on when new identity ranges are assigned, see Assigning Identity Ranges in the topic [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
    -   <span data-ttu-id="6457d-204">自動 ID 範囲管理を無効にするには、パブリッシャー側のパブリケーション データベースに対して [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) を実行します。</span><span class="sxs-lookup"><span data-stu-id="6457d-204">To disable automatic identity range management, execute [sp_changemergearticle](/sql/relational-databases/system-stored-procedures/sp-changemergearticle-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="6457d-205">**\@property** に **identityrangemanagementoption** を指定し、 **\@value** に **manual** または **none** を指定します。</span><span class="sxs-lookup"><span data-stu-id="6457d-205">Specify a value of **identityrangemanagementoption** for **\@property** and either **manual** or **none** for **\@value**.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6457d-206">参照</span><span class="sxs-lookup"><span data-stu-id="6457d-206">See Also</span></span>  
 <span data-ttu-id="6457d-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="6457d-207">[Peer-to-Peer Transactional Replication](../transactional/peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="6457d-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="6457d-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 [<span data-ttu-id="6457d-209">ID 列のレプリケート</span><span class="sxs-lookup"><span data-stu-id="6457d-209">Replicate Identity Columns</span></span>](replicate-identity-columns.md)  
  
  
