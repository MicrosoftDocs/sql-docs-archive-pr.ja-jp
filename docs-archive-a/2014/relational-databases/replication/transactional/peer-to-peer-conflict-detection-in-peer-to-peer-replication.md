---
title: ピア ツー ピア レプリケーションにおける競合検出 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, peer-to-peer replication
- peer-to-peer transactional replication, conflict detection
ms.assetid: 754a1070-59bc-438d-998b-97fdd77d45ca
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 301a751bf5b5959ab1fc434ac2a583a6b0378fdd
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87641594"
---
# <a name="conflict-detection-in-peer-to-peer-replication"></a><span data-ttu-id="84a7f-102">ピア ツー ピア レプリケーションにおける競合検出</span><span class="sxs-lookup"><span data-stu-id="84a7f-102">Conflict Detection in Peer-to-Peer Replication</span></span>
  <span data-ttu-id="84a7f-103">ピア ツー ピア トランザクション レプリケーションを使用すると、トポロジ内の任意のノードでデータの挿入、更新、または削除を実行し、データ変更をその他のノードに反映させることができます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-103">Peer-to-peer transactional replication lets you insert, update, or delete data at any node in a topology and have data changes propagated to the other nodes.</span></span> <span data-ttu-id="84a7f-104">どのノードでもデータを変更できるので、さまざまなノードで行われたデータ変更が相互に競合する場合があります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-104">Because you can change data at any node, data changes at different nodes could conflict with each other.</span></span> <span data-ttu-id="84a7f-105">行が複数のノードで変更されると、他のノードに反映される際に競合が発生したり、場合によっては更新データが失われたりする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-105">If a row is modified at more than one node, it can cause a conflict or even a lost update when the row is propagated to other nodes.</span></span>  
  
 <span data-ttu-id="84a7f-106">[!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] 以降のバージョンのピア ツー ピア レプリケーションには、ピア ツー ピア トポロジの競合の検出を有効にするオプションが導入されています。</span><span class="sxs-lookup"><span data-stu-id="84a7f-106">Peer-to-peer replication in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions provides the option to enable conflict detection across a peer-to-peer topology.</span></span> <span data-ttu-id="84a7f-107">このオプションは、検出されない競合によって引き起こされる問題 (アプリケーションの動作の矛盾や更新データの喪失など) の防止に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-107">This option would help prevent the issues that are caused by undetected conflicts, including inconsistent application behavior and lost updates.</span></span> <span data-ttu-id="84a7f-108">このオプションが有効になっている場合は、競合する変更が、ディストリビューション エージェントの障害を引き起こす重大なエラーとして既定で扱われるようになります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-108">With this option enabled, by default a conflicting change is treated as a critical error that causes the failure of the Distribution Agent.</span></span> <span data-ttu-id="84a7f-109">競合が発生した場合は、その競合が解決されて、トポロジでデータの一貫性が確保されるまで、トポロジが一貫性のない状態のままになります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-109">In the event of a conflict, the topology remains in an inconsistent state until the conflict is resolved and the data is made consistent across the topology.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="84a7f-110">データの不整合が生じないようにするため、競合の検出を有効にしている場合でも、ピア ツー ピア トポロジで競合を発生させないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-110">To avoid potential data inconsistency, make sure that you avoid conflicts in a peer-to-peer topology, even with conflict detection enabled.</span></span> <span data-ttu-id="84a7f-111">特定の行の書き込み操作が 1 つのノードだけで行われるようにするには、データにアクセスしてそのデータを変更するアプリケーションで、挿入、更新、および削除の各操作をパーティション分割する必要があります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-111">To ensure that write operations for a particular row are performed at only one node, applications that access and change data must partition insert, update, and delete operations.</span></span> <span data-ttu-id="84a7f-112">これにより、1 つのノードの特定の行に対する変更は、トポロジ内の他のすべてのノードと同期されてから、別のノードでその行が変更されるようになります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-112">This partitioning ensures that modifications to a given row that is originating at one node are synchronized with all other nodes in the topology before the row is modified by a different node.</span></span> <span data-ttu-id="84a7f-113">競合の検出と解決のための高度な機能がアプリケーションに必要な場合は、マージ レプリケーションを使用します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-113">If an application requires sophisticated conflict detection and resolution capabilities, use merge replication.</span></span> <span data-ttu-id="84a7f-114">詳細については、「[Merge Replication](../merge/merge-replication.md)」 (マージ レプリケーション) と「[マージ レプリケーションの競合の検出と解決](../merge/advanced-merge-replication-conflict-detection-and-resolution.md)」 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-114">For more information, see [Merge Replication](../merge/merge-replication.md) and [Detect and Resolve Merge Replication Conflicts](../merge/advanced-merge-replication-conflict-detection-and-resolution.md).</span></span>  
  
## <a name="understanding-conflicts-and-conflict-detection"></a><span data-ttu-id="84a7f-115">競合と競合検出について</span><span class="sxs-lookup"><span data-stu-id="84a7f-115">Understanding Conflicts and Conflict Detection</span></span>  
 <span data-ttu-id="84a7f-116">1 つのデータベース内では、異なるアプリケーションによって同じ行が変更されても、競合は発生しません。</span><span class="sxs-lookup"><span data-stu-id="84a7f-116">In a single database, changes that are made to the same row by different applications do not cause a conflict.</span></span> <span data-ttu-id="84a7f-117">これは、トランザクションがシリアル化され、同時変更はロックを使用して処理されるためです。</span><span class="sxs-lookup"><span data-stu-id="84a7f-117">This is because transactions are serialized, and locks are used to handle concurrent changes.</span></span> <span data-ttu-id="84a7f-118">ピア ツー ピア レプリケーションなどの非同期の分散システムでは、トランザクションが各ノードで独立して実行されます。つまり、複数のノード間でトランザクションをシリアル化するメカニズムはありません。</span><span class="sxs-lookup"><span data-stu-id="84a7f-118">In an asynchronous distributed system such as peer-to-peer replication, transactions act independently on each node; and there is no mechanism to serialize transactions across multiple nodes.</span></span> <span data-ttu-id="84a7f-119">2 フェーズ コミットのようなプロトコルを使用することはできますが、これはパフォーマンスに重大な影響を及ぼします。</span><span class="sxs-lookup"><span data-stu-id="84a7f-119">A protocol like two-phase commit could be used, but this affects performance significantly.</span></span>  
  
 <span data-ttu-id="84a7f-120">ピア ツー ピア レプリケーションなどのシステムでは、各ピアで変更がコミットされた場合、競合が検出されません。</span><span class="sxs-lookup"><span data-stu-id="84a7f-120">In systems such as peer-to-peer replication, conflicts are not detected when changes are committed at individual peers.</span></span> <span data-ttu-id="84a7f-121">競合が検出されるのは、こうした変更が他のピアにレプリケートされて適用された場合です。</span><span class="sxs-lookup"><span data-stu-id="84a7f-121">Instead, they are detected when those changes are replicated and applied at other peers.</span></span> <span data-ttu-id="84a7f-122">ピア ツー ピア レプリケーションでは、各ノードに変更を適用するストアド プロシージャが、パブリッシュされた各テーブルの非表示の列に基づいて、競合を検出します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-122">In peer-to-peer replication, conflicts are detected by the stored procedures that apply changes to each node, based on a hidden column in each published table.</span></span> <span data-ttu-id="84a7f-123">この非表示の列には、各ノードに指定する *発信元 ID* と行のバージョンを組み合わせた ID が格納されます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-123">This hidden column stores an ID that combines an *originator ID* that you specify for each node and the version of the row.</span></span> <span data-ttu-id="84a7f-124">同期中、ディストリビューション エージェントは各テーブルに対してストアド プロシージャを実行します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-124">During synchronization, the Distribution Agent executes procedures for each table.</span></span> <span data-ttu-id="84a7f-125">これらのストアド プロシージャは、他のピアからの挿入操作、更新操作、および削除操作を適用します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-125">These procedures apply insert, update, and delete operations from other peers.</span></span> <span data-ttu-id="84a7f-126">プロシージャの 1 つが非表示列の値を読み取る際に競合を検出すると、次に示す、重大度レベル 16 のエラー 22815 が発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-126">If one of the procedures detects a conflict when it reads the hidden column value, it raises error 22815 that has a severity level of 16:</span></span>  
  
 `A conflict of type '%s' was detected at peer %d between peer %d (incoming), transaction id %s  and peer %d (on disk), transaction id %s`  
  
 <span data-ttu-id="84a7f-127">既定では、このエラーにより、ディストリビューション エージェントがそのノードへの変更の適用を中止します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-127">By default, this error causes the Distribution Agent to stop applying changes to that node.</span></span> <span data-ttu-id="84a7f-128">検出される競合の処理方法の詳細については、このトピックの「競合の処理」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-128">For information about how to handle the conflicts that are detected, see "Handling Conflicts" later in this topic.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="84a7f-129">非表示の列にアクセスできるのは、専用管理者接続 (DAC) を使用してログインしているユーザーのみです。</span><span class="sxs-lookup"><span data-stu-id="84a7f-129">The hidden column can be accessed only by a user that is logged in through the Dedicated Administrator Connection (DAC).</span></span> <span data-ttu-id="84a7f-130">DAC の詳細については、「[データベース管理者用の診断接続](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md)」 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-130">For information about DAC, see [Diagnostic Connection for Database Administrators](../../../database-engine/configure-windows/diagnostic-connection-for-database-administrators.md).</span></span>  
  
 <span data-ttu-id="84a7f-131">ピア ツー ピア レプリケーションでは、次の種類の競合が検出されます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-131">Peer-to-peer replication detects the following types of conflicts:</span></span>  
  
-   <span data-ttu-id="84a7f-132">挿入と挿入</span><span class="sxs-lookup"><span data-stu-id="84a7f-132">Insert-insert</span></span>  
  
     <span data-ttu-id="84a7f-133">ピア ツー ピア レプリケーションに参加している各テーブルのすべての行は、主キー値を使用して一意に識別されます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-133">All rows in each table participating in peer-to-peer replication are uniquely identified by using primary key values.</span></span> <span data-ttu-id="84a7f-134">挿入と挿入の競合は、キー値の同じ行が複数のノードで挿入されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-134">An insert-insert conflict occurs when a row with the same key value was inserted at more than one node.</span></span>  
  
-   <span data-ttu-id="84a7f-135">更新と更新</span><span class="sxs-lookup"><span data-stu-id="84a7f-135">Update-update</span></span>  
  
     <span data-ttu-id="84a7f-136">複数のノードで同じ行が更新されたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-136">Occurs when the same row was updated at more than one node.</span></span>  
  
-   <span data-ttu-id="84a7f-137">挿入と更新</span><span class="sxs-lookup"><span data-stu-id="84a7f-137">Insert-update</span></span>  
  
     <span data-ttu-id="84a7f-138">あるノードで行が更新され、別のノードで同じ行が削除された後に再挿入された場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-138">Occurs if a row was updated at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="84a7f-139">挿入と削除</span><span class="sxs-lookup"><span data-stu-id="84a7f-139">Insert-delete</span></span>  
  
     <span data-ttu-id="84a7f-140">あるノードで行が削除され、別のノードで同じ行が削除された後に再挿入された場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-140">Occurs if a row was deleted at one node, but the same row was deleted and then reinserted at another node.</span></span>  
  
-   <span data-ttu-id="84a7f-141">更新と削除</span><span class="sxs-lookup"><span data-stu-id="84a7f-141">Update-delete</span></span>  
  
     <span data-ttu-id="84a7f-142">あるノードで行が更新され、別のノードで同じ行が削除された場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-142">Occurs if a row was updated at one node, but the same row was deleted at another node.</span></span>  
  
-   <span data-ttu-id="84a7f-143">削除と削除</span><span class="sxs-lookup"><span data-stu-id="84a7f-143">Delete-delete</span></span>  
  
     <span data-ttu-id="84a7f-144">複数のノードで同じ行が削除された場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-144">Occurs when a row was deleted at more than one node.</span></span>  
  
## <a name="enabling-conflict-detection"></a><span data-ttu-id="84a7f-145">競合検出の有効化</span><span class="sxs-lookup"><span data-stu-id="84a7f-145">Enabling Conflict Detection</span></span>  
 <span data-ttu-id="84a7f-146">競合検出を使用するには、すべてのノードが [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] 以降のバージョンを実行しており、すべてのノードで検出が有効になっている必要があります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-146">To use conflict detection, all nodes must be running [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] or a later version; and detection must be enabled for all nodes.</span></span> <span data-ttu-id="84a7f-147">[!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] 以降のバージョンの [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]では、既定で、競合検出が有効になっています。</span><span class="sxs-lookup"><span data-stu-id="84a7f-147">In [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] and later versions, by default, conflict detection is enabled in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="84a7f-148">競合を想定していない場合でも、競合検出を有効にしておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="84a7f-148">We recommend that you have detection enabled, even in scenarios in which you do not expect any conflicts.</span></span> <span data-ttu-id="84a7f-149">競合検出は、 [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] または [!INCLUDE[tsql](../../../includes/tsql-md.md)] ストアド プロシージャを使用して有効または無効にできます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-149">Conflict detection can be enabled and disabled by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)] stored procedures:</span></span>  
  
-   <span data-ttu-id="84a7f-150">[!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] では、 **[パブリケーションのプロパティ]** ダイアログ ボックスの **[サブスクリプション オプション]** ページまたはピア ツー ピア トポロジ構成ウィザードの **[トポロジの構成]** ページを使用して、検出を有効または無効にできます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-150">You can enable and disable detection in [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] either by using the **Subscription Options** page of the **Publication Properties** dialog box or the **Configure Topology** page of the Configure Peer-to-Peer Topology Wizard.</span></span>  
  
     <span data-ttu-id="84a7f-151">[!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]を使用して競合検出を構成すると、ディストリビューション エージェントは、競合の検出時に変更の適用を停止するように構成されます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-151">If you configure conflict detection by using [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)], the Distribution Agent is configured to stop applying changes when a conflict is detected.</span></span>  
  
-   <span data-ttu-id="84a7f-152">検出は、 [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) ストアド プロシージャまたは [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql)ストアド プロシージャを使用して有効または無効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-152">You can also enable and disable detection by using the following stored procedures: [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql) or [sp_configure_peerconflictdetection](/sql/relational-databases/system-stored-procedures/sp-configure-peerconflictdetection-transact-sql).</span></span>  
  
     <span data-ttu-id="84a7f-153">ストアド プロシージャを使用して競合検出を構成すると、競合の検出時にディストリビューション エージェントが変更の適用を停止するかどうかを指定できます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-153">If you configure conflict detection by using stored procedures, you can specify whether the Distribution Agent should stop applying changes when a conflict is detected.</span></span> <span data-ttu-id="84a7f-154">既定では、ディストリビューション エージェントは変更の適用を停止します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-154">The default is for the agent to stop.</span></span> <span data-ttu-id="84a7f-155">ここでは、既定の設定を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="84a7f-155">We recommend that you use the default setting.</span></span>  
  
## <a name="handling-conflicts"></a><span data-ttu-id="84a7f-156">競合の処理</span><span class="sxs-lookup"><span data-stu-id="84a7f-156">Handling Conflicts</span></span>  
 <span data-ttu-id="84a7f-157">ピア ツー ピア レプリケーションで競合が発生した場合、ピア ツー ピア競合検出の警告が発生します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-157">When a conflict occurs in peer-to-peer replication, the Peer-to-peer conflict detection alert is raised.</span></span> <span data-ttu-id="84a7f-158">競合の発生時に通知されるように、この警告を構成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="84a7f-158">We recommend that you configure this alert so that you are notified when a conflict occurs.</span></span> <span data-ttu-id="84a7f-159">警告の詳細については、「[レプリケーション エージェント イベントに対する警告の使用](../agents/use-alerts-for-replication-agent-events.md)」 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-159">For more information about alerts, see [Use Alerts for Replication Agent Events](../agents/use-alerts-for-replication-agent-events.md).</span></span>  
  
 <span data-ttu-id="84a7f-160">ディストリビューション エージェントが停止して警告が発生したら、次のいずれかの方法を使用して、発生した競合を処理します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-160">After the Distribution Agent stops and the alert is raised, use one of the following approaches to handle the conflicts that occurred:</span></span>  
  
-   <span data-ttu-id="84a7f-161">競合が検出されたノードを、必要なデータが格納されているノードのバックアップから再初期化します (推奨)。</span><span class="sxs-lookup"><span data-stu-id="84a7f-161">Reinitialize the node where the conflict was detected from the backup of a node that contains the required data (the recommended approach).</span></span> <span data-ttu-id="84a7f-162">これにより、データの一貫性を確保します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-162">This method ensures that data is in a consistent state.</span></span>  
  
-   <span data-ttu-id="84a7f-163">ディストリビューション エージェントが引き続き変更を適用できるようにすることで、ノードの同期を再試行します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-163">Try to synchronize the node again by enabling the Distribution Agent to continue to apply changes:</span></span>  
  
    1.  <span data-ttu-id="84a7f-164">[Sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)の実行: パラメーターに ' p2p_continue_onconflict ' を指定し、パラメーターにを指定し @property `true` @value ます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-164">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `true` for the @value parameter.</span></span>  
  
    2.  <span data-ttu-id="84a7f-165">ディストリビューション エージェントを再起動します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-165">Restart the Distribution Agent.</span></span>  
  
    3.  <span data-ttu-id="84a7f-166">競合表示モジュールを使用して検出された競合を確認し、関係する行、競合の種類、および優先されたデータを特定します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-166">Verify the conflicts that were detected by using the conflict viewer and determine the rows that were involved, the type of conflict, and the winner.</span></span> <span data-ttu-id="84a7f-167">競合は、構成時に指定した発信元 ID 値に基づいて解決されます。つまり、最も ID の大きいノードの行が競合で優先されます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-167">The conflict is resolved based on the originator ID value that you specified during configuration: the row that originated at the node with the highest ID wins the conflict.</span></span> <span data-ttu-id="84a7f-168">詳細については、「[トランザクション パブリケーションのデータの競合の表示 &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-168">For more information, see [View Data Conflicts for Transactional Publications &#40;SQL Server Management Studio&#41;](../view-data-conflicts-for-transactional-publications-sql-server-management-studio.md).</span></span>  
  
    4.  <span data-ttu-id="84a7f-169">検証を実行して、競合する行が正しく収束したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="84a7f-169">Run validation to ensure that the conflicting rows converged correctly.</span></span> <span data-ttu-id="84a7f-170">詳細については、「[レプリケートされたデータの検証](../validate-data-at-the-subscriber.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="84a7f-170">For more information, see [Validate Replicated Data](../validate-data-at-the-subscriber.md).</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="84a7f-171">この手順の実行後にデータに一貫性がない場合は、最も優先度の高いノードの行を手動で更新して、そのノードから変更を反映する必要があります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-171">If data is inconsistent after this step, you must manually update rows on the node that has the highest priority, and then let the changes propagate from this node.</span></span> <span data-ttu-id="84a7f-172">競合する変更がトポロジ内になくなると、すべてのノードが一貫性のある状態になります。</span><span class="sxs-lookup"><span data-stu-id="84a7f-172">If there are no further conflicting changes in the topology, all nodes will be brought to a consistent state.</span></span>  
  
    5.  <span data-ttu-id="84a7f-173">[Sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)の実行: パラメーターに ' p2p_continue_onconflict ' を指定し、パラメーターにを指定し @property `false` @value ます。</span><span class="sxs-lookup"><span data-stu-id="84a7f-173">Execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql): specify 'p2p_continue_onconflict' for the @property parameter and `false` for the @value parameter.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="84a7f-174">参照</span><span class="sxs-lookup"><span data-stu-id="84a7f-174">See Also</span></span>  
 [<span data-ttu-id="84a7f-175">ピア ツー ピア トランザクション レプリケーション</span><span class="sxs-lookup"><span data-stu-id="84a7f-175">Peer-to-Peer Transactional Replication</span></span>](peer-to-peer-transactional-replication.md)  
  
  
