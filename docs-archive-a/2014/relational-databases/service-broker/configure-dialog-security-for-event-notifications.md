---
title: イベント通知のダイアログ セキュリティの構成 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- event notifications [SQL Server], security
ms.assetid: 12afbc84-2d2a-4452-935e-e1c70e8c53c1
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: d83bfe63c3a9b24c2be8d08916dd2384c59edc93
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87643738"
---
# <a name="configure-dialog-security-for-event-notifications"></a><span data-ttu-id="2c37b-102">イベント通知のダイアログ セキュリティの構成</span><span class="sxs-lookup"><span data-stu-id="2c37b-102">Configure Dialog Security for Event Notifications</span></span>
  [!INCLUDE[ssSB](../../includes/sssb-md.md)] <span data-ttu-id="2c37b-103">ダイアログ セキュリティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-103">dialog security should be configured for event notifications that send messages to a service broker on a remote server.</span></span> <span data-ttu-id="2c37b-104">ダイアログ セキュリティは、 [!INCLUDE[ssSB](../../includes/sssb-md.md)] ダイアログの完全セキュリティ モデルに従って手動で構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-104">Dialog security must be manually configured according to the [!INCLUDE[ssSB](../../includes/sssb-md.md)] dialog full-security model.</span></span> <span data-ttu-id="2c37b-105">完全セキュリティ モデルでは、リモート サーバーとの間で送受信するメッセージの暗号化および暗号化解除が可能です。</span><span class="sxs-lookup"><span data-stu-id="2c37b-105">The full-security model enables encryption and decryption of messages that are sent to and from remote servers.</span></span> <span data-ttu-id="2c37b-106">イベント通知は一方向に送信されますが、エラーなどのメッセージは逆方向にも返されます。</span><span class="sxs-lookup"><span data-stu-id="2c37b-106">Although event notifications are sent in one direction, other messages, such as errors, are also returned in the opposite direction.</span></span>  
  
## <a name="configuring-dialog-security-for-event-notifications"></a><span data-ttu-id="2c37b-107">イベント通知のダイアログ セキュリティの構成</span><span class="sxs-lookup"><span data-stu-id="2c37b-107">Configuring Dialog Security for Event Notifications</span></span>  
 <span data-ttu-id="2c37b-108">イベント通知のダイアログ セキュリティを実装するために必要な処理は、以下に示す手順のようになります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-108">The process required to implement dialog security for event notification is described in the following steps.</span></span> <span data-ttu-id="2c37b-109">これらの手順には、ソース サーバーとターゲット サーバーの両方で実行する必要のある操作が含まれています。</span><span class="sxs-lookup"><span data-stu-id="2c37b-109">These steps include actions to take on both the source server and the target server.</span></span> <span data-ttu-id="2c37b-110">送信元サーバーとは、イベント通知が作成されるサーバーです。</span><span class="sxs-lookup"><span data-stu-id="2c37b-110">The source server is the server on which the event notification is being created.</span></span> <span data-ttu-id="2c37b-111">ターゲット サーバーとは、イベント通知メッセージを受信するサーバーです。</span><span class="sxs-lookup"><span data-stu-id="2c37b-111">The target server is the server that receives the event notification message.</span></span> <span data-ttu-id="2c37b-112">ソース サーバーとターゲット サーバーで各手順の操作を実行する必要がある場合は、次の手順に進む前に両方のサーバーで完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-112">You must complete the actions in each step for both the source server and the target server before you continue to the next step.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2c37b-113">すべての証明書は、有効となる開始日と有効期限終了日を指定して作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-113">All certificates must be created with valid start and expiration dates.</span></span>  
  
 <span data-ttu-id="2c37b-114">**手順 1. : TCP ポート番号と送信先サービスの名前を設定します。**</span><span class="sxs-lookup"><span data-stu-id="2c37b-114">**Step 1: Establish a TCP port number and target service name.**</span></span>  
  
 <span data-ttu-id="2c37b-115">ソース サーバーとターゲット サーバーの両方がメッセージを受信する TCP ポートを設定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-115">Establish the TCP port on which both the source server and the target server will receive messages.</span></span> <span data-ttu-id="2c37b-116">送信先サービスの名前も決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-116">You must also determine the name of the target service.</span></span>  
  
 <span data-ttu-id="2c37b-117">**手順 2. : データベース レベルの認証で共有される暗号化と証明書を構成します。**</span><span class="sxs-lookup"><span data-stu-id="2c37b-117">**Step 2: Configure encryption and certificate sharing for database-level authentication.**</span></span>  
  
 <span data-ttu-id="2c37b-118">ソース サーバーとターゲット サーバーの両方で次の操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-118">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="2c37b-119">[転送元サーバー]</span><span class="sxs-lookup"><span data-stu-id="2c37b-119">Source server</span></span>|<span data-ttu-id="2c37b-120">ターゲット サーバー</span><span class="sxs-lookup"><span data-stu-id="2c37b-120">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="2c37b-121">イベント通知とマスター キーを格納するデータベースを選択または作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-121">Choose or create a database to hold the event notification and master key.</span></span>|<span data-ttu-id="2c37b-122">マスター キーを格納するデータベースを選択または作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-122">Choose or create a database to hold the master key.</span></span>|  
|<span data-ttu-id="2c37b-123">送信元データベースにマスター キーが存在しない場合は、 [マスター キーを作成](/sql/t-sql/statements/create-master-key-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-123">If no master key exists for the source database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span> <span data-ttu-id="2c37b-124">マスター キーは、送信元サーバーと送信先サーバーの両方のデータベースで、それぞれの証明書のセキュリティを確保するために必要となります。</span><span class="sxs-lookup"><span data-stu-id="2c37b-124">A master key is required on both the source and target databases to help secure their respective certificates.</span></span>|<span data-ttu-id="2c37b-125">送信先データベースにマスター キーが存在しない場合は、マスター キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-125">If no master key exists for the target database, create a master key.</span></span>|  
|<span data-ttu-id="2c37b-126">送信元データベースで[ログインの作成](/sql/t-sql/statements/create-login-transact-sql) とそれに対応する [ユーザー](/sql/t-sql/statements/create-user-transact-sql) の作成を行います。</span><span class="sxs-lookup"><span data-stu-id="2c37b-126">[Create a login](/sql/t-sql/statements/create-login-transact-sql) and a corresponding [user](/sql/t-sql/statements/create-user-transact-sql) for the source database.</span></span>|<span data-ttu-id="2c37b-127">送信先データベースでログインとそれに対応するユーザーを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-127">Create a login and a corresponding user for the target database.</span></span>|  
|<span data-ttu-id="2c37b-128">送信元データベースのユーザーが所有する[証明書を作成](/sql/t-sql/statements/create-certificate-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-128">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that is owned by the user of the source database.</span></span>|<span data-ttu-id="2c37b-129">送信先データベースのユーザーが所有する証明書を作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-129">Create a certificate that is owned by the user of the target database.</span></span>|  
|<span data-ttu-id="2c37b-130">ターゲット サーバーからアクセス可能なファイルに[証明書をバックアップ](/sql/t-sql/statements/backup-certificate-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-130">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="2c37b-131">送信元サーバーからアクセス可能なファイルに証明書をバックアップします。</span><span class="sxs-lookup"><span data-stu-id="2c37b-131">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="2c37b-132">送信先データベースのユーザーと WITHOUT LOGIN を指定して[ユーザーを作成](/sql/t-sql/statements/create-user-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-132">[Create a user](/sql/t-sql/statements/create-user-transact-sql), specifying the user of the target database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="2c37b-133">このユーザーは、バックアップ ファイルから作成された送信先データベースの証明書を所有します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-133">This user will own the target database certificate to be created from the backup file.</span></span> <span data-ttu-id="2c37b-134">このユーザーをログインにマッピングする必要はありません。なぜなら、このユーザーの唯一の目的は、後述の手順 3. で作成する送信先データベースの証明書を所有することだからです。</span><span class="sxs-lookup"><span data-stu-id="2c37b-134">The user does not have to be mapped to a login, because the only purpose of this user is to own the target database certificate created in step 3 that follows.</span></span>|<span data-ttu-id="2c37b-135">送信元データベースのユーザーと WITHOUT LOGIN を指定してユーザーを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-135">Create a user, specifying the user of the source database, and WITHOUT LOGIN.</span></span> <span data-ttu-id="2c37b-136">このユーザーは、バックアップ ファイルから作成された送信元データベースの証明書を所有します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-136">This user will own the source database certificate to be created from the backup file.</span></span> <span data-ttu-id="2c37b-137">このユーザーをログインにマッピングする必要はありません。なぜなら、このユーザーの唯一の目的は、後述の手順 3. で作成する送信元データベースの証明書を所有することだからです。</span><span class="sxs-lookup"><span data-stu-id="2c37b-137">The user does not have to be mapped to a login, because the only purpose of this user is to own the source database certificate created in step 3 that follows.</span></span>|  
  
 <span data-ttu-id="2c37b-138">**手順 3. : データベース レベルの認証で使用する証明書を共有し、権限を許可します。**</span><span class="sxs-lookup"><span data-stu-id="2c37b-138">**Step 3: Share certificates and grant permissions for database-level authentication.**</span></span>  
  
 <span data-ttu-id="2c37b-139">ソース サーバーとターゲット サーバーの両方で次の操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-139">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="2c37b-140">[転送元サーバー]</span><span class="sxs-lookup"><span data-stu-id="2c37b-140">Source server</span></span>|<span data-ttu-id="2c37b-141">ターゲット サーバー</span><span class="sxs-lookup"><span data-stu-id="2c37b-141">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="2c37b-142">送信先データベースのユーザーを所有者に指定して、送信先の証明書のバックアップ ファイルから[証明書を作成](/sql/t-sql/statements/create-certificate-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-142">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target database user as the owner.</span></span>|<span data-ttu-id="2c37b-143">送信元データベースのユーザーを所有者に指定して、送信元の証明書のバックアップ ファイルから証明書を作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-143">Create a certificate from the backup file of the source certificate, specifying the source database user as the owner.</span></span>|  
|<span data-ttu-id="2c37b-144">送信元データベースのユーザーに、イベント通知を作成する[権限を許可](/sql/t-sql/statements/grant-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-144">[Grant permission](/sql/t-sql/statements/grant-transact-sql) to create the event notification to the source database user.</span></span> <span data-ttu-id="2c37b-145">この権限の詳細については、「 [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-145">For more information about this permission, see [CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-event-notification-transact-sql).</span></span>|<span data-ttu-id="2c37b-146">送信先データベースのユーザーに既存のイベント通知の [!INCLUDE[ssSB](../../includes/sssb-md.md)] コントラクト : `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`に対する REFERENCES 権限を許可します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-146">Grant REFERENCES permission to the target database user on the existing event notifications [!INCLUDE[ssSB](../../includes/sssb-md.md)] contract: `https://schemas.microsoft.com/SQL/Notifications/PostEventNotification`.</span></span>|  
|<span data-ttu-id="2c37b-147">送信先サービスへの[リモート サービス バインドを作成](/sql/t-sql/statements/create-remote-service-binding-transact-sql) し、送信先データベースのユーザーの資格情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-147">[Create a remote service binding](/sql/t-sql/statements/create-remote-service-binding-transact-sql) to the target service and specify the credentials of the target database user.</span></span> <span data-ttu-id="2c37b-148">リモート サービス バインドは、ターゲット サーバーに送信されるメッセージが、送信元データベースのユーザーが所有する証明書の公開キーによって認証されることを保証します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-148">The remote service binding guarantees that the public key in the certificate owned by the source database user will authenticate messages that are sent to the target server.</span></span>|<span data-ttu-id="2c37b-149">送信先データベースのユーザーに CREATE QUEUE 権限、CREATE SERVICE 権限、および CREATE SCHEMA 権限を[許可](/sql/t-sql/statements/grant-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-149">[Grant](/sql/t-sql/statements/grant-transact-sql) CREATE QUEUE, CREATE SERVICE, and CREATE SCHEMA permissions to the target database user.</span></span>|  
||<span data-ttu-id="2c37b-150">まだデータベースに送信先データベース ユーザーとして接続していない場合は、直ちに接続してください。</span><span class="sxs-lookup"><span data-stu-id="2c37b-150">If not already connected to the database as the target database user, do so now.</span></span>|  
||<span data-ttu-id="2c37b-151">イベント通知メッセージを受信する[キューを作成](/sql/t-sql/statements/create-queue-transact-sql) し、メッセージを配信する [サービスを作成](/sql/t-sql/statements/create-service-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-151">[Create a queue](/sql/t-sql/statements/create-queue-transact-sql) to receive the event notification messages and [create a service](/sql/t-sql/statements/create-service-transact-sql) to deliver the messages.</span></span>|  
||<span data-ttu-id="2c37b-152">送信元データベースのユーザーに、送信先サービスに対する[SEND 権限を許可](/sql/t-sql/statements/grant-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-152">[Grant SEND permission](/sql/t-sql/statements/grant-transact-sql) on the target service to the source database user.</span></span>|  
|<span data-ttu-id="2c37b-153">送信元データベースの Service Broker 識別子をターゲット サーバーに指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-153">Provide the service broker identifier of the source database to the target server.</span></span> <span data-ttu-id="2c37b-154">この識別子は、 **sys.databases** カタログ ビューの [service_broker_guid](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) 列にクエリを実行することで取得できます。</span><span class="sxs-lookup"><span data-stu-id="2c37b-154">This identifier can be obtained by querying the **service_broker_guid** column of the [sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) catalog view.</span></span> <span data-ttu-id="2c37b-155">サーバー レベルのイベント通知の場合は、Service Broker 識別子として **msdb**を使用します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-155">For a server-level event notification, use the service broker identifier of **msdb**.</span></span>|<span data-ttu-id="2c37b-156">送信先データベースの Service Broker 識別子を送信元サーバーに指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-156">Provide the service broker identifier of the target database to the source server.</span></span>|  
  
 <span data-ttu-id="2c37b-157">**手順 4. : ルートを作成し、サーバー レベルの認証を設定します。**</span><span class="sxs-lookup"><span data-stu-id="2c37b-157">**Step 4: Create routes and set up server-level authentication.**</span></span>  
  
 <span data-ttu-id="2c37b-158">ソース サーバーとターゲット サーバーの両方で次の操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-158">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="2c37b-159">[転送元サーバー]</span><span class="sxs-lookup"><span data-stu-id="2c37b-159">Source server</span></span>|<span data-ttu-id="2c37b-160">ターゲット サーバー</span><span class="sxs-lookup"><span data-stu-id="2c37b-160">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="2c37b-161">送信先サービスへの[ルートを作成](/sql/t-sql/statements/create-route-transact-sql) し、送信先データベースの Service Broker 識別子と設定済み TCP ポート番号を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-161">[Create a route](/sql/t-sql/statements/create-route-transact-sql) to the target service, and specify the service broker identifier of the target database and the agreed-upon TCP port number.</span></span>|<span data-ttu-id="2c37b-162">送信元サービスへのルートを作成し、送信元データベースの Service Broker 識別子と設定済み TCP ポート番号を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-162">Create a route to the source service, and specify the service broker identifier of the source database and the agreed-upon TCP port number.</span></span> <span data-ttu-id="2c37b-163">送信元サービスを指定するには、 `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`で提供されるサービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-163">To specify the source service, use the following supplied service: `https://schemas.microsoft.com/SQL/Notifications/EventNotificationService`.</span></span>|  
|<span data-ttu-id="2c37b-164">**master** データベースに切り替えて、サーバー レベルの認証を構成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-164">Switch to the **master** database to configure server-level authentication.</span></span>|<span data-ttu-id="2c37b-165">**master** データベースに切り替えて、サーバー レベルの認証を構成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-165">Switch to the **master** database to configure server-level authentication.</span></span>|  
|<span data-ttu-id="2c37b-166">**master** データベースにマスター キーが存在しない場合は、 [マスター キーを作成](/sql/t-sql/statements/create-master-key-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-166">If no master key exists for the **master** database, [create a master key](/sql/t-sql/statements/create-master-key-transact-sql).</span></span>|<span data-ttu-id="2c37b-167">**master** データベースにマスター キーが存在しない場合は、マスター キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-167">If no master key exists for the **master** database, create a master key.</span></span>|  
|<span data-ttu-id="2c37b-168">データベースを認証する[証明書を作成](/sql/t-sql/statements/create-certificate-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-168">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) that authenticates the database.</span></span>|<span data-ttu-id="2c37b-169">データベースを認証する証明書を作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-169">Create a certificate that authenticates the database.</span></span>|  
|<span data-ttu-id="2c37b-170">ターゲット サーバーからアクセス可能なファイルに[証明書をバックアップ](/sql/t-sql/statements/backup-certificate-transact-sql)します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-170">[Back up the certificate](/sql/t-sql/statements/backup-certificate-transact-sql) to a file that can be accessed by the target server.</span></span>|<span data-ttu-id="2c37b-171">送信元サーバーからアクセス可能なファイルに証明書をバックアップします。</span><span class="sxs-lookup"><span data-stu-id="2c37b-171">Back up the certificate to a file that can be accessed by the source server.</span></span>|  
|<span data-ttu-id="2c37b-172">[エンドポイントを作成](/sql/t-sql/statements/create-endpoint-transact-sql)し、設定済み TCP ポート番号、FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*)、および認証で使用する証明書の名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-172">[Create an endpoint](/sql/t-sql/statements/create-endpoint-transact-sql), and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|<span data-ttu-id="2c37b-173">エンドポイントを作成し、設定済み TCP ポート番号、FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*)、および認証で使用する証明書の名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-173">Create an endpoint, and specify the agreed-upon TCP port number, FOR SERVICE_BROKER (AUTHENTICATION = CERTIFICATE *certificate_name*), and the name of the authenticating certificate.</span></span>|  
|<span data-ttu-id="2c37b-174">[ログインを作成](/sql/t-sql/statements/create-login-transact-sql)し、ターゲット サーバーのログインを指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-174">[Create a login](/sql/t-sql/statements/create-login-transact-sql), and specify the login of the target server.</span></span>|<span data-ttu-id="2c37b-175">ログインを作成し、送信元サーバーのログインを指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-175">Create a login, and specify the login of the source server.</span></span>|  
|<span data-ttu-id="2c37b-176">送信先の認証子のログインに、エンドポイントに対する[CONNECT 権限を許可](/sql/t-sql/statements/grant-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-176">[Grant CONNECT permission](/sql/t-sql/statements/grant-transact-sql) on the endpoint to the target authenticator login.</span></span>|<span data-ttu-id="2c37b-177">送信元の認証子のログインに、エンドポイントに対する CONNECT 権限を許可します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-177">Grant CONNECT permission on the endpoint to the source authenticator login.</span></span>|  
|<span data-ttu-id="2c37b-178">[ユーザーを作成](/sql/t-sql/statements/create-user-transact-sql)し、送信先の認証子のログインを指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-178">[Create a user](/sql/t-sql/statements/create-user-transact-sql), and specify the target authenticator login.</span></span>|<span data-ttu-id="2c37b-179">ユーザーを作成し、送信元の認証子のログインを指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-179">Create a user, and specify the source authenticator login.</span></span>|  
  
 <span data-ttu-id="2c37b-180">**手順 5. : サーバー レベルの認証で使用する証明書を共有し、イベント通知を作成します。**</span><span class="sxs-lookup"><span data-stu-id="2c37b-180">**Step 5: Share certificates for server-level authentication and create the event notification.**</span></span>  
  
 <span data-ttu-id="2c37b-181">ソース サーバーとターゲット サーバーの両方で次の操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-181">Complete the following actions on both the source and target servers.</span></span>  
  
|<span data-ttu-id="2c37b-182">[転送元サーバー]</span><span class="sxs-lookup"><span data-stu-id="2c37b-182">Source server</span></span>|<span data-ttu-id="2c37b-183">ターゲット サーバー</span><span class="sxs-lookup"><span data-stu-id="2c37b-183">Target server</span></span>|  
|-------------------|-------------------|  
|<span data-ttu-id="2c37b-184">送信先の認証子のユーザーを所有者に指定して、送信先の証明書のバックアップ ファイルから[証明書を作成](/sql/t-sql/statements/create-certificate-transact-sql) します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-184">[Create a certificate](/sql/t-sql/statements/create-certificate-transact-sql) from the backup file of the target certificate, specifying the target authenticator user as the owner.</span></span>|<span data-ttu-id="2c37b-185">送信元の認証子のユーザーを所有者に指定して、送信元の証明書のバックアップ ファイルから証明書を作成します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-185">Create a certificate from the backup file of the source certificate, specifying the source authenticator user as the owner.</span></span>|  
|<span data-ttu-id="2c37b-186">イベント通知を作成する送信元データベースに切り替えます。まだ送信元データベースのユーザーとして接続していない場合は、直ちに接続します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-186">Switch to the source database on which to create the event notification, and if you are not already connected as the source database user, do so now.</span></span>|<span data-ttu-id="2c37b-187">送信先データベースに切り替えて、イベント通知メッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-187">Switch to the target database to receive event notification messages.</span></span>|  
|<span data-ttu-id="2c37b-188">[イベント通知を作成](/sql/t-sql/statements/create-event-notification-transact-sql)し、送信先データベースの Broker Service と識別子を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c37b-188">[Create the event notification](/sql/t-sql/statements/create-event-notification-transact-sql), and specify the broker service and identifier of the target database.</span></span>||  
  
## <a name="see-also"></a><span data-ttu-id="2c37b-189">参照</span><span class="sxs-lookup"><span data-stu-id="2c37b-189">See Also</span></span>  
 <span data-ttu-id="2c37b-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-190">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-191">[BACKUP CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/backup-certificate-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-192">[sys.databases &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-193">[暗号化階層](../security/encryption/encryption-hierarchy.md) </span><span class="sxs-lookup"><span data-stu-id="2c37b-193">[Encryption Hierarchy](../security/encryption/encryption-hierarchy.md) </span></span>  
 <span data-ttu-id="2c37b-194">[イベント通知の実装](event-notifications.md) </span><span class="sxs-lookup"><span data-stu-id="2c37b-194">[Implement Event Notifications](event-notifications.md) </span></span>  
 <span data-ttu-id="2c37b-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-195">[CREATE MASTER KEY &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-master-key-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-196">[CREATE LOGIN &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-login-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-197">[CREATE USER &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-user-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-198">[CREATE CERTIFICATE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-certificate-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-199">[CREATE REMOTE SERVICE BINDING &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-remote-service-binding-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-200">[GRANT &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-201">[CREATE ROUTE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-route-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-202">[CREATE QUEUE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-queue-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-203">[CREATE SERVICE &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-service-transact-sql) </span></span>  
 <span data-ttu-id="2c37b-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="2c37b-204">[CREATE ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/create-endpoint-transact-sql) </span></span>  
 [<span data-ttu-id="2c37b-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2c37b-205">CREATE EVENT NOTIFICATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-event-notification-transact-sql)  
  
  
