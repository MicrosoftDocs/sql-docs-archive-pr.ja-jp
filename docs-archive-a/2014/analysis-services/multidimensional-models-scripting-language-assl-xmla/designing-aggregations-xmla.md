---
title: 集計のデザイン (XMLA) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: reference
helpviewer_keywords:
- statistical information [XML for Analysis]
- batches [XML for Analysis]
- aggregations [Analysis Services], XML for Analysis
- XMLA, aggregations
- queries [XMLA]
- XML for Analysis, aggregations
- iterative aggregation process [XMLA]
ms.assetid: 4dd27afa-10c7-408d-bc24-ca74217ddbcb
author: minewiskan
ms.author: owend
ms.openlocfilehash: 632cc071605cff6e42adec4acd32c9bd9949fc77
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87644195"
---
# <a name="designing-aggregations-xmla"></a><span data-ttu-id="cbad9-102">集計のデザイン (XMLA)</span><span class="sxs-lookup"><span data-stu-id="cbad9-102">Designing Aggregations (XMLA)</span></span>
  <span data-ttu-id="cbad9-103">集計デザインは、集計の格納時に複数のパーティションで同じ構造を確実に使用するようにするため、特定のメジャー グループのパーティションに関連付けられるものです。</span><span class="sxs-lookup"><span data-stu-id="cbad9-103">Aggregation designs are associated with the partitions of a particular measure group to make sure that the partitions use the same structure when storing aggregations.</span></span> <span data-ttu-id="cbad9-104">パーティションに同じストレージ構造を使用すると、後で[mergepartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla)コマンドを使用してマージできるパーティションを簡単に定義できます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-104">Using the same storage structure for partitions lets you to easily define partitions that can be later merged using the [MergePartitions](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/mergepartitions-element-xmla) command.</span></span> <span data-ttu-id="cbad9-105">集計デザインの詳細については、「[集計と集計デザイン](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-105">For more information about aggregation designs, see [Aggregations and Aggregation Designs](../multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md).</span></span>  
  
 <span data-ttu-id="cbad9-106">集計デザインの集計を定義するには、XML for Analysis (XMLA) で[designaggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla)コマンドを使用します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-106">To define aggregations for an aggregation design, you can use the [DesignAggregations](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/designaggregations-element-xmla) command in XML for Analysis (XMLA).</span></span> <span data-ttu-id="cbad9-107">`DesignAggregations` コマンドには、参照として使用する集計デザインを識別し、その参照に基づいたデザイン プロセスを制御するためのプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-107">The `DesignAggregations` command has properties that identify which aggregation design to use as a reference and how to control the design process based upon that reference.</span></span> <span data-ttu-id="cbad9-108">`DesignAggregations` コマンドとそのプロパティを使用すると、集計を反復処理またはバッチ処理でデザインし、その結果のデザイン統計を表示してデザイン プロセスを評価することができます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-108">Using the `DesignAggregations` command and its properties, you can design aggregations iteratively or in batch, and then view the resulting design statistics to evaluate the design process.</span></span>  
  
## <a name="specifying-an-aggregation-design"></a><span data-ttu-id="cbad9-109">集計デザインの指定</span><span class="sxs-lookup"><span data-stu-id="cbad9-109">Specifying an Aggregation Design</span></span>  
 <span data-ttu-id="cbad9-110">コマンドの[object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla)プロパティには、 `DesignAggregations` 既存の集計デザインへのオブジェクト参照が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-110">The [Object](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/object-element-xmla) property of the `DesignAggregations` command must contain an object reference to an existing aggregation design.</span></span> <span data-ttu-id="cbad9-111">オブジェクト参照には、データベース識別子、キューブ識別子、メジャー グループ識別子、および集計デザイン識別子が含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-111">The object reference contains a database identifier, cube identifier, measure group identifier, and aggregation design identifier.</span></span> <span data-ttu-id="cbad9-112">既存の集計デザインがない場合、エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-112">If the aggregation design does not already exist, an error occurs.</span></span>  
  
## <a name="controlling-the-design-process"></a><span data-ttu-id="cbad9-113">デザイン プロセスの制御</span><span class="sxs-lookup"><span data-stu-id="cbad9-113">Controlling the Design Process</span></span>  
 <span data-ttu-id="cbad9-114">`DesignAggregations` コマンドの以下のプロパティを使用して、集計デザインに対応した集計を定義するために使用するアルゴリズムを制御できます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-114">You can use the following properties of the `DesignAggregations` command to control the algorithm used to define aggregations for the aggregation design:</span></span>  
  
-   <span data-ttu-id="cbad9-115">[Steps](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla)プロパティは、 `DesignAggregations` コマンドがクライアントアプリケーションに制御を返す前に実行する必要があるイテレーションの数を決定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-115">The [Steps](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/steps-element-xmla) property determines how many iterations the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="cbad9-116">[Time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla)プロパティは、 `DesignAggregations` コマンドがクライアントアプリケーションに制御を返すまでにかかったミリ秒数を決定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-116">The [Time](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/time-element-xmla) property determines how many milliseconds the `DesignAggregations` command should take before it returns control to the client application.</span></span>  
  
-   <span data-ttu-id="cbad9-117">[Optimization](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla)プロパティは、コマンドが達成しようとするパフォーマンス向上率の推定値を決定し `DesignAggregations` ます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-117">The [Optimization](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/optimization-element-xmla) property determines the estimated percentage of performance improvement the `DesignAggregations` command should try to achieve.</span></span> <span data-ttu-id="cbad9-118">集計を反復的にデザインする場合、このプロパティは最初のコマンドで送信するだけで十分です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-118">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="cbad9-119">[ストレージ](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla)プロパティは、コマンドによって使用されるディスクストレージの推定サイズ (バイト単位) を決定し `DesignAggregations` ます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-119">The [Storage](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/storage-element-xmla) property determines the estimated amount of disk storage, in bytes, used by the `DesignAggregations` command.</span></span> <span data-ttu-id="cbad9-120">集計を反復的にデザインする場合、このプロパティは最初のコマンドで送信するだけで十分です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-120">If you are iteratively designing aggregations, you only have to send this property on the first command.</span></span>  
  
-   <span data-ttu-id="cbad9-121">[具体化](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla)プロパティは、コマンドで `DesignAggregations` デザインプロセス中に定義された集計を作成するかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-121">The [Materialize](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/materialize-element-xmla) property determines whether the `DesignAggregations` command should create the aggregations defined during the design process.</span></span> <span data-ttu-id="cbad9-122">集計を反復的にデザインする場合、デザインした集計を保存する用意ができるまで、このプロパティは false に設定しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-122">If you are iteratively designing aggregations, this property should be set to false until you are ready to save the designed aggregations.</span></span> <span data-ttu-id="cbad9-123">true に設定した場合、現在のデザイン プロセスが終了し、定義された集計は指定した集計デザインに追加されます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-123">When set to true, the current design process ends and the defined aggregations are added to the specified aggregation design.</span></span>  
  
## <a name="specifying-queries"></a><span data-ttu-id="cbad9-124">クエリの指定</span><span class="sxs-lookup"><span data-stu-id="cbad9-124">Specifying Queries</span></span>  
 <span data-ttu-id="cbad9-125">DesignAggregations コマンド `Query` では、 [Queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla)プロパティに1つ以上の要素を含めることにより、使用法に基づく最適化コマンドがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="cbad9-125">The DesignAggregations command supports usage-based optimization command by including one or more `Query` elements in the [Queries](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/queries-element-xmla) property.</span></span> <span data-ttu-id="cbad9-126">プロパティには、 `Queries` 1 つまたは複数の[クエリ](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla)要素を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-126">The `Queries` property can contain one or more [Query](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla) elements.</span></span> <span data-ttu-id="cbad9-127">`Queries` プロパティに `Query` 要素が含まれていない場合、`Object` 要素で指定された集計デザインでは、一般的な集計のセットを含む既定の構造が使用されます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-127">If the `Queries` property does not contain any `Query` elements, the aggregation design specified in the `Object` element uses a default structure that contains a general set of aggregations.</span></span> <span data-ttu-id="cbad9-128">この一般的な集計のセットは、`Optimization` コマンドの `Storage` および `DesignAggregations` プロパティで指定される条件を満たすようにデザインされています。</span><span class="sxs-lookup"><span data-stu-id="cbad9-128">This general set of aggregations is designed to meet the criteria specified in the `Optimization` and `Storage` properties of the `DesignAggregations` command.</span></span>  
  
 <span data-ttu-id="cbad9-129">各 `Query` 要素は、最もよく使用するクエリを対象とする集計を定義するためにデザイン プロセスが使用する、目標クエリを表します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-129">Each `Query` element represents a goal query that the design process uses to define aggregations that target the most frequently used queries.</span></span> <span data-ttu-id="cbad9-130">独自の目標クエリを指定することも、のインスタンスによってクエリログに格納されている情報を使用して、 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 最も頻繁に使用されるクエリに関する情報を取得することもできます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-130">You can either specify your own goal queries, or you can use the information stored by an instance of [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] in the query log to retrieve information about the most frequently used queries.</span></span> <span data-ttu-id="cbad9-131">使用法に基づく最適化ウィザードでは、`DesignAggregations` コマンドの送信時にクエリ ログを使用して、時間、使用法、または指定されたユーザーに基づいて目標クエリを取得します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-131">The Usage-Based Optimization Wizard uses the query log to retrieve goal queries based on time, usage, or a specified user when it sends a `DesignAggregations` command.</span></span> <span data-ttu-id="cbad9-132">詳細については、「[使用法に基づく最適化ウィザードの F1 ヘルプ](../usage-based-optimization-wizard-f1-help.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-132">For more information, see [Usage-Based Optimization Wizard F1 Help](../usage-based-optimization-wizard-f1-help.md).</span></span>  
  
 <span data-ttu-id="cbad9-133">集計を反復的にデザインする場合、目標クエリは最初の `DesignAggregations` コマンドで送信するだけで十分です。これは、[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスがこれらの目標クエリを保存し、後続の `DesignAggregations` コマンドでそれらのクエリを使用するためです。</span><span class="sxs-lookup"><span data-stu-id="cbad9-133">If you are iteratively designing aggregations, you only have to pass goal queries in the first `DesignAggregations` command because the [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] instance stores these goal queries and uses these queries during subsequent `DesignAggregations` commands.</span></span> <span data-ttu-id="cbad9-134">反復処理の最初の `DesignAggregations` コマンドで目標クエリを渡した場合、後続の `DesignAggregations` コマンドの `Queries` プロパティに目標クエリが含まれていると、エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-134">After you pass goal queries in the first `DesignAggregations` command of an iterative process, any subsequent `DesignAggregations` command that contains goal queries in the `Queries` property generates an error.</span></span>  
  
 <span data-ttu-id="cbad9-135">`Query` 要素には、以下の引数を含むコンマ区切りの値が含まれます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-135">The `Query` element contains a comma-delimited value that contains the following arguments:</span></span>  
  
 <span data-ttu-id="cbad9-136">*Frequency*,*Dataset*[,*Dataset*...]</span><span class="sxs-lookup"><span data-stu-id="cbad9-136">*Frequency*,*Dataset*[,*Dataset*...]</span></span>  
  
 <span data-ttu-id="cbad9-137">*頻度*</span><span class="sxs-lookup"><span data-stu-id="cbad9-137">*Frequency*</span></span>  
 <span data-ttu-id="cbad9-138">クエリが以前に実行された回数に対応する重み係数です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-138">A weighting factor that corresponds to the number of times that the query has previously been executed.</span></span> <span data-ttu-id="cbad9-139">要素が `Query` 新しいクエリを表す場合、 *Frequency*値はクエリを評価するためにデザインプロセスによって使用される重み付け係数を表します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-139">If the `Query` element represents a new query, the *Frequency* value represents the weighting factor used by the design process to evaluate the query.</span></span> <span data-ttu-id="cbad9-140">この値が大きいほど、デザイン プロセスでクエリに対して付けられる重みが増加します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-140">As the frequency value becomes larger, the weight that is put on the query during the design process increases.</span></span>  
  
 <span data-ttu-id="cbad9-141">*データセット*</span><span class="sxs-lookup"><span data-stu-id="cbad9-141">*Dataset*</span></span>  
 <span data-ttu-id="cbad9-142">ディメンション内のどの属性をクエリに含めるかを指定する数値文字列です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-142">A numeric string that specifies which attributes from a dimension are to be included in the query.</span></span> <span data-ttu-id="cbad9-143">この文字列の文字数は、ディメンション内の属性の数と一致している必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-143">This string must have the same number of characters as the number of attributes in the dimension.</span></span> <span data-ttu-id="cbad9-144">0 は、その位置にある属性が、指定されたディメンションのクエリに含まれないことを示します。1 は、その位置にある属性が、指定されたディメンションのクエリに含まれることを示します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-144">Zero (0) indicates that the attribute in the specified ordinal position is not included in the query for the specified dimension, while one (1) indicates that the attribute in the specified ordinal position is included in the query for the specified dimension.</span></span>  
  
 <span data-ttu-id="cbad9-145">たとえば文字列 "011" は、3 つの属性を持つディメンションを処理するクエリの中に、2 番目と 3 番目の属性が含まれることを示しています。</span><span class="sxs-lookup"><span data-stu-id="cbad9-145">For example, the string "011" would refer to a query involving a dimension with three attributes, from which the second and third attributes are included in the query.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="cbad9-146">いくつかの属性は、データセットでの考慮の対象から除外されます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-146">Some attributes are excluded from consideration in the dataset.</span></span> <span data-ttu-id="cbad9-147">除外する属性の詳細については、「 [Query Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-147">For more information about excluded attributes, see [Query Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/query-element-xmla).</span></span>  
  
 <span data-ttu-id="cbad9-148">集計デザインを含むメジャーグループ内の各ディメンションは、要素内の*データセット*値によって表され `Query` ます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-148">Each dimension in the measure group that contains the aggregation design is represented by a *Dataset* value in the `Query` element.</span></span> <span data-ttu-id="cbad9-149">*Dataset* の値の順序は、メジャー グループに含まれるディメンションの順序と一致している必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-149">The order of *Dataset* values must match the order of dimensions included in the measure group.</span></span>  
  
## <a name="designing-aggregations-using-iterative-or-batch-processes"></a><span data-ttu-id="cbad9-150">反復処理またはバッチ処理を使用した集計のデザイン</span><span class="sxs-lookup"><span data-stu-id="cbad9-150">Designing Aggregations Using Iterative or Batch Processes</span></span>  
 <span data-ttu-id="cbad9-151">`DesignAggregations` コマンドは、デザイン プロセスで必要な対話性に応じて、反復処理またはバッチ処理の一部として使用することができます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-151">You can use the `DesignAggregations` command as part of an iterative process or a batch process, depending on the interactivity required by the design process.</span></span>  
  
### <a name="designing-aggregations-using-an-iterative-process"></a><span data-ttu-id="cbad9-152">反復処理を使用した集計のデザイン</span><span class="sxs-lookup"><span data-stu-id="cbad9-152">Designing Aggregations Using an Iterative Process</span></span>  
 <span data-ttu-id="cbad9-153">集計を反復処理によってデザインするには、複数の `DesignAggregations` コマンドを送信して、デザイン プロセスを細かく制御します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-153">To iteratively design aggregations, you send multiple `DesignAggregations` commands to provide fine control over the design process.</span></span> <span data-ttu-id="cbad9-154">集計のデザイン ウィザードでも、同じアプローチを使用してデザイン プロセスを細かく制御します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-154">The Aggregation Design Wizard uses this same approach to provide fine control over the design process.</span></span> <span data-ttu-id="cbad9-155">詳細については、「[集計のデザインウィザードの F1 ヘルプ](../aggregation-design-wizard-f1-help.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-155">For more information, see [Aggregation Design Wizard F1 Help](../aggregation-design-wizard-f1-help.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="cbad9-156">集計を反復処理によってデザインするには、明示的なセッションが必要です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-156">An explicit session is required to iteratively design aggregations.</span></span> <span data-ttu-id="cbad9-157">明示的なセッションの詳細については、「 [XMLA&#41;&#40;の接続とセッションの管理](managing-connections-and-sessions-xmla.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-157">For more information about explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
 <span data-ttu-id="cbad9-158">反復処理を開始するには、最初に以下の情報を含む `DesignAggregations` コマンドを送信します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-158">To start the iterative process, you first send a `DesignAggregations` command that contains the following information:</span></span>  
  
-   <span data-ttu-id="cbad9-159">`Storage` および `Optimization` プロパティの値。これが、デザイン プロセス全体での設定になります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-159">The `Storage` and `Optimization` property values on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="cbad9-160">`Steps` および `Time` プロパティの値。これに基づいて、デザイン プロセスの最初のステップが制限されます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-160">The `Steps` and `Time` property values on which the first step of the design process is limited.</span></span>  
  
-   <span data-ttu-id="cbad9-161">(使用法に基づく最適化を行う場合) 目標クエリを含む `Queries` プロパティ。これが、デザイン プロセス全体での設定になります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-161">If you want usage-based optimization, the `Queries` property that contains the goal queries on which the whole design process is targeted.</span></span>  
  
-   <span data-ttu-id="cbad9-162">`Materialize` プロパティは、false に設定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-162">The `Materialize` property set to false.</span></span> <span data-ttu-id="cbad9-163">このプロパティを false に設定することは、コマンドの完了時に、定義された集計がデザイン プロセスによって集計デザインに保存されないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-163">Setting this property to false indicates that the design process does not save the defined aggregations to the aggregation design when the command is completed.</span></span>  
  
 <span data-ttu-id="cbad9-164">最初の `DesignAggregations` コマンドが終了すると、コマンドはデザインの統計を含む行セットを返します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-164">When the first `DesignAggregations` command finishes, the command returns a rowset that contains design statistics.</span></span> <span data-ttu-id="cbad9-165">これらのデザインの統計を評価して、デザイン プロセスを継続するか、あるいは終了するかを判断することができます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-165">You can evaluate these design statistics to determine whether the design process should continue or whether the design process is finished.</span></span> <span data-ttu-id="cbad9-166">プロセスを継続する場合は、次の `DesignAggregations` コマンドを送信します。そのコマンドには、デザイン プロセスのこのステップを制限するための `Steps` および `Time` の値を含めます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-166">If the process should continue, you then send another `DesignAggregations` command that contains the `Steps` and `Time` values with which this step of the design process is limited.</span></span> <span data-ttu-id="cbad9-167">そして結果の統計を評価し、デザイン プロセスを継続すべきかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-167">You evaluate the resulting statistics and then determine whether the design process should continue.</span></span> <span data-ttu-id="cbad9-168">このように、`DesignAggregations` コマンドを送信してその結果を評価するプロセスを、目標に到達して集計の適切なセットが定義されるまで繰り返します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-168">This iterative process of sending `DesignAggregations` commands and evaluating the results continues until you reach your goals and have a appropriate set of aggregations defined.</span></span>  
  
 <span data-ttu-id="cbad9-169">目標の集計のセットに到達したら、最後の `DesignAggregations` コマンドを送信します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-169">After you have reached the set of aggregations that you want, you send one final `DesignAggregations` command.</span></span> <span data-ttu-id="cbad9-170">この最後の `DesignAggregations` コマンドでは、`Steps` プロパティを 1 に設定し、`Materialize` プロパティを true に設定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-170">This final `DesignAggregations` command should have its `Steps` property set to 1 and its `Materialize` property set to true.</span></span> <span data-ttu-id="cbad9-171">これらの設定により、この最後の `DesignAggregations` コマンドはデザイン プロセスを終了し、定義された集計を集計デザインに保存します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-171">By using these settings, this final `DesignAggregations` command completes the design process and saves the defined aggregation to the aggregation design.</span></span>  
  
### <a name="designing-aggregations-using-a-batch-process"></a><span data-ttu-id="cbad9-172">バッチ処理を使用した集計のデザイン</span><span class="sxs-lookup"><span data-stu-id="cbad9-172">Designing Aggregations Using a Batch Process</span></span>  
 <span data-ttu-id="cbad9-173">集計のデザインは、単一の `DesignAggregations` コマンドを送信することにより、バッチ処理を使用して行うこともできます。そのコマンドには、デザイン プロセス全体の設定となり制限する `Steps`、`Time`、`Storage`、および `Optimization` プロパティの値を含めます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-173">You can also design aggregations in a batch process by sending a single `DesignAggregations` command that contains the `Steps`, `Time`, `Storage`, and `Optimization` property values on which the whole design process is targeted and limited.</span></span> <span data-ttu-id="cbad9-174">使用法に基づく最適化を行う場合は、`Queries` プロパティに、デザイン プロセスの対象となる目標クエリを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="cbad9-174">If you want usage-based optimization, the goal queries on which the design process is targeted should also be included in the `Queries` property.</span></span> <span data-ttu-id="cbad9-175">また、コマンドの終了時に、定義された集計がデザイン プロセスによって集計デザインに保存されるように、`Materialize` を true に設定します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-175">Also make sure that the `Materialize` property is set to true, so that the design process saves the defined aggregations to the aggregation design when the command finishes.</span></span>  
  
 <span data-ttu-id="cbad9-176">バッチ処理による集計のデザインは、暗黙のセッションまたは明示的なセッションのいずれでも行うことができます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-176">You can design aggregations using a batch process in either an implicit or explicit session.</span></span> <span data-ttu-id="cbad9-177">暗黙のセッションと明示的なセッションの詳細については、「 [XMLA&#41;&#40;の接続とセッションの管理](managing-connections-and-sessions-xmla.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cbad9-177">For more information about implicit and explicit sessions, see [Managing Connections and Sessions &#40;XMLA&#41;](managing-connections-and-sessions-xmla.md).</span></span>  
  
## <a name="returning-design-statistics"></a><span data-ttu-id="cbad9-178">デザインの統計を返す処理</span><span class="sxs-lookup"><span data-stu-id="cbad9-178">Returning Design Statistics</span></span>  
 <span data-ttu-id="cbad9-179">`DesignAggregations` コマンドは、クライアント アプリケーションに制御を返すときに、そのコマンドに関するデザインの統計を表す 1 つの行を含む行セットを返します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-179">When the `DesignAggregations` command returns control to the client application, the command returns a rowset that contains a single row representing the design statistics for the command.</span></span> <span data-ttu-id="cbad9-180">行セットに含まれる列は、次の表のとおりです。</span><span class="sxs-lookup"><span data-stu-id="cbad9-180">The rowset contains the columns listed in the following table.</span></span>  
  
|<span data-ttu-id="cbad9-181">列</span><span class="sxs-lookup"><span data-stu-id="cbad9-181">Column</span></span>|<span data-ttu-id="cbad9-182">データ型</span><span class="sxs-lookup"><span data-stu-id="cbad9-182">Data type</span></span>|<span data-ttu-id="cbad9-183">説明</span><span class="sxs-lookup"><span data-stu-id="cbad9-183">Description</span></span>|  
|------------|---------------|-----------------|  
|<span data-ttu-id="cbad9-184">手順</span><span class="sxs-lookup"><span data-stu-id="cbad9-184">Steps</span></span>|<span data-ttu-id="cbad9-185">Integer</span><span class="sxs-lookup"><span data-stu-id="cbad9-185">Integer</span></span>|<span data-ttu-id="cbad9-186">クライアント アプリケーションに制御を返すまでに、コマンドによって行われたステップの数です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-186">The number of steps taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="cbad9-187">Time</span><span class="sxs-lookup"><span data-stu-id="cbad9-187">Time</span></span>|<span data-ttu-id="cbad9-188">Long integer</span><span class="sxs-lookup"><span data-stu-id="cbad9-188">Long integer</span></span>|<span data-ttu-id="cbad9-189">クライアント アプリケーションに制御を返すまでに、コマンドで経過したミリ秒単位の時間です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-189">The number of milliseconds taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="cbad9-190">最適化</span><span class="sxs-lookup"><span data-stu-id="cbad9-190">Optimization</span></span>|<span data-ttu-id="cbad9-191">Double</span><span class="sxs-lookup"><span data-stu-id="cbad9-191">Double</span></span>|<span data-ttu-id="cbad9-192">クライアント アプリケーションに制御を返すまでに、コマンドによって達成されたパフォーマンス向上率の予測値です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-192">The estimated percentage of performance improvement achieved by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="cbad9-193">ストレージ</span><span class="sxs-lookup"><span data-stu-id="cbad9-193">Storage</span></span>|<span data-ttu-id="cbad9-194">Long integer</span><span class="sxs-lookup"><span data-stu-id="cbad9-194">Long integer</span></span>|<span data-ttu-id="cbad9-195">クライアント アプリケーションに制御を返すまでに、コマンドによって使用されたバイト数の予測値です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-195">The estimated number of bytes taken by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="cbad9-196">集計</span><span class="sxs-lookup"><span data-stu-id="cbad9-196">Aggregations</span></span>|<span data-ttu-id="cbad9-197">Long integer</span><span class="sxs-lookup"><span data-stu-id="cbad9-197">Long integer</span></span>|<span data-ttu-id="cbad9-198">クライアント アプリケーションに制御を返すまでに、コマンドによって定義された集計の数です。</span><span class="sxs-lookup"><span data-stu-id="cbad9-198">The number of aggregations defined by the command before returning control to the client application.</span></span>|  
|<span data-ttu-id="cbad9-199">LastStep</span><span class="sxs-lookup"><span data-stu-id="cbad9-199">LastStep</span></span>|<span data-ttu-id="cbad9-200">Boolean</span><span class="sxs-lookup"><span data-stu-id="cbad9-200">Boolean</span></span>|<span data-ttu-id="cbad9-201">行セット内のデータがデザイン プロセス内の最後のステップを表しているかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="cbad9-201">Indicates whether the data in the rowset represents the last step in the design process.</span></span> <span data-ttu-id="cbad9-202">コマンドの `Materialize` プロパティが true に設定されている場合、この列の値が true に設定されます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-202">If the `Materialize` property of the command was set to true,  the value of this column is set to true.</span></span>|  
  
 <span data-ttu-id="cbad9-203">各 `DesignAggregations` コマンドの後に返される行セットに含まれるデザインの統計は、反復処理によるデザインとバッチ処理によるデザインの両方で使用できます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-203">You can use the design statistics that are contained in the rowset returned after each `DesignAggregations` command in both iterative and batch design.</span></span> <span data-ttu-id="cbad9-204">反復処理によるデザインの場合、進行状況の判別と表示を行うために、デザインの統計を使用できます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-204">In iterative design, you can use the design statistics to determine and display progress.</span></span> <span data-ttu-id="cbad9-205">集計をバッチ処理によってデザインする場合は、コマンドによって作成された集計の数を判断するために、デザインの統計を使用できます。</span><span class="sxs-lookup"><span data-stu-id="cbad9-205">When you are designing aggregations in batch, you can use the design statistics to determine the number of aggregations created by the command.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cbad9-206">参照</span><span class="sxs-lookup"><span data-stu-id="cbad9-206">See Also</span></span>  
 [<span data-ttu-id="cbad9-207">Analysis Services での XMLA による開発</span><span class="sxs-lookup"><span data-stu-id="cbad9-207">Developing with XMLA in Analysis Services</span></span>](developing-with-xmla-in-analysis-services.md)  
  
  
