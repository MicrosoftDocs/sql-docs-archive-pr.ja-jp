---
title: 'レッスン 5: リレーションシップの作成 |Microsoft Docs'
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
ms.openlocfilehash: f622f88d4d400fedf24e99059eda94882b1bcc3f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87718861"
---
# <a name="lesson-5-create-relationships"></a><span data-ttu-id="a1546-102">レッスン 5: [リレーションシップの作成]</span><span class="sxs-lookup"><span data-stu-id="a1546-102">Lesson 5: Create Relationships</span></span>
  <span data-ttu-id="a1546-103">このレッスンでは、データをインポートした際に自動的に作成されたリレーションシップを確認し、異なるテーブル間に新しいリレーションシップを追加します。</span><span class="sxs-lookup"><span data-stu-id="a1546-103">In this lesson, you will verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="a1546-104">リレーションシップとは、2 つのテーブル間を接続し、それらのテーブル内のデータをどのように関連付けるかを決定するものです。</span><span class="sxs-lookup"><span data-stu-id="a1546-104">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="a1546-105">たとえば、Product テーブルと Product Subcategory テーブルの間には、どの製品も特定のサブカテゴリに属しているという事実に基づいたリレーションシップが存在します。</span><span class="sxs-lookup"><span data-stu-id="a1546-105">For example, the Product table and the Product Subcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="a1546-106">詳細については、[「リレーションシップ (SSAS テーブル)」](tabular-models/relationships-ssas-tabular.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a1546-106">To learn more, see [Relationships &#40;SSAS Tabular&#41;](tabular-models/relationships-ssas-tabular.md).</span></span>  
  
 <span data-ttu-id="a1546-107">このレッスンの推定所要時間: **10 分**</span><span class="sxs-lookup"><span data-stu-id="a1546-107">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="a1546-108">前提条件</span><span class="sxs-lookup"><span data-stu-id="a1546-108">Prerequisites</span></span>  
 <span data-ttu-id="a1546-109">このトピックは、表形式モデルのチュートリアルの一部であり、チュートリアルでの順番に従って実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-109">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="a1546-110">このレッスンの実習を行う前に、前のレッスン [「レッスン 3: 列名の変更」](rename-columns.md)を完了している必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-110">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Rename Columns](rename-columns.md).</span></span>  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="a1546-111">既存のリレーションシップの確認と新しいリレーションシップの追加</span><span class="sxs-lookup"><span data-stu-id="a1546-111">Review Existing Relationships and Add New Relationships</span></span>  
 <span data-ttu-id="a1546-112">テーブルのインポート ウィザードを使用してデータをインポートした際に、AdventureWorksDW データベースから 7 つのテーブルがインポートされました。</span><span class="sxs-lookup"><span data-stu-id="a1546-112">When you imported data by using the Table Import Wizard, you imported seven tables from the AdventureWorksDW database.</span></span> <span data-ttu-id="a1546-113">通常、リレーショナル ソースからデータをインポートすると、データと共に既存のリレーションシップがインポートされます。</span><span class="sxs-lookup"><span data-stu-id="a1546-113">Generally, if you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="a1546-114">ただし、モデルのオーサリングを続行する前に、テーブル間のリレーションシップが正しく作成されたかどうかを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-114">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="a1546-115">またこのチュートリアルでは、3 つの新しいリレーションシップの追加も行います。</span><span class="sxs-lookup"><span data-stu-id="a1546-115">For this tutorial, you will also add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="a1546-116">既存のリレーションシップを確認するには</span><span class="sxs-lookup"><span data-stu-id="a1546-116">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="a1546-117">[!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]で、[ **モデル** ] メニューをクリックし、[ **モデル ビュー**] をポイントして、[ **ダイアグラム ビュー**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a1546-117">In [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)], click on the **Model** menu, then point to **Model View**, and then click **Diagram View**.</span></span>  
  
     <span data-ttu-id="a1546-118">モデル デザイナーがダイアグラム ビューで表示されます。このグラフィカルな形式では、インポートしたすべてのテーブルが、それらを結ぶ線と共に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-118">The model designer now appears in Diagram View, a graphical format displaying all of the tables you imported with lines between them.</span></span> <span data-ttu-id="a1546-119">テーブル間の線は、データのインポート時に自動的に作成されたリレーションシップを表します。</span><span class="sxs-lookup"><span data-stu-id="a1546-119">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>  
  
     <span data-ttu-id="a1546-120">モデル デザイナーの右上隅にあるミニマップ コントロールを使用すると、できるだけ多くのテーブルが表示されるようにビューを調整できます。</span><span class="sxs-lookup"><span data-stu-id="a1546-120">Use the minimap controls in the upper-right corner of the model designer to adjust the view to include as many of the tables as possible.</span></span> <span data-ttu-id="a1546-121">テーブルをクリックして別の場所にドラッグすれば、テーブルどうし近づけたり、特定の順序に並べたりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a1546-121">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="a1546-122">テーブルを移動しても、テーブル間の既存のリレーションシップには影響しません。</span><span class="sxs-lookup"><span data-stu-id="a1546-122">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="a1546-123">特定のテーブル内のすべての列を表示するには、テーブルの端をクリックしてドラッグし、大きさを調整します。</span><span class="sxs-lookup"><span data-stu-id="a1546-123">To view all of the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="a1546-124">**Customer** テーブルと **Geography** テーブルの間の実線をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a1546-124">Click on the solid line between the **Customer** table and the **Geography** table.</span></span> <span data-ttu-id="a1546-125">これら 2 つのテーブル間の実線は、そのリレーションシップがアクティブであることを示します。つまり、そのリレーションシップは DAX 数式の計算時に既定で使用されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-125">The solid line between these two tables show this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
     <span data-ttu-id="a1546-126">**Customer** テーブル内の **Geography Id** 列と **Geography** テーブル内の **Geography Id** 列が、どちらもボックス内に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-126">Notice the **Geography Id** column in the **Customer** table and the **Geography Id** column in the **Geography** table now both each appear within a box.</span></span> <span data-ttu-id="a1546-127">これは、これらの列がリレーションシップに使用されていることを示しています。</span><span class="sxs-lookup"><span data-stu-id="a1546-127">This shows these are the columns used in the relationship.</span></span> <span data-ttu-id="a1546-128">リレーションシップのプロパティが [**プロパティ**] ウィンドウにも表示されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="a1546-128">The relationship's properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    >  <span data-ttu-id="a1546-129">ダイアグラム ビューのモデル デザイナーを使用することに加え、[ **リレーションシップの管理** ] ダイアログ ボックスを使用して、すべてのテーブル間のリレーションシップをテーブル形式で表示することもできます。</span><span class="sxs-lookup"><span data-stu-id="a1546-129">In addition to using the model designer in diagram view, you can also use the **Manage Relationships** dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="a1546-130">[ **テーブル** ] メニューをクリックし、[ **リレーションシップの管理**] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a1546-130">Click on the **Table** menu, and then click **Manage Relationships**.</span></span> <span data-ttu-id="a1546-131">[ **リレーションシップの管理** ] ダイアログ ボックスに、データのインポート時に自動的に作成されたリレーションシップが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-131">The **Manage Relationships** dialog box shows the relationships that were automatically created when you imported data.</span></span>  
  
3.  <span data-ttu-id="a1546-132">ダイアグラム ビューのモデル デザイナーか、または [ **リレーションシップの管理** ] ダイアログ ボックスを使用して、各テーブルが AdventureWorksDW データベースからインポートされた際に、次のリレーションシップが作成されたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="a1546-132">Use the model designer in diagram view, or the **Manage Relationships** dialog box, to verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="a1546-133">アクティブ</span><span class="sxs-lookup"><span data-stu-id="a1546-133">Active</span></span>|<span data-ttu-id="a1546-134">テーブル</span><span class="sxs-lookup"><span data-stu-id="a1546-134">Table</span></span>|<span data-ttu-id="a1546-135">関連する参照テーブル</span><span class="sxs-lookup"><span data-stu-id="a1546-135">Related Lookup Table</span></span>|  
    |------------|-----------|--------------------------|  
    |<span data-ttu-id="a1546-136">はい</span><span class="sxs-lookup"><span data-stu-id="a1546-136">Yes</span></span>|<span data-ttu-id="a1546-137">**Customer [Geography Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-137">**Customer [Geography Id]**</span></span>|<span data-ttu-id="a1546-138">**Geography [Geography Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-138">**Geography [Geography Id]**</span></span>|  
    |<span data-ttu-id="a1546-139">はい</span><span class="sxs-lookup"><span data-stu-id="a1546-139">Yes</span></span>|<span data-ttu-id="a1546-140">**Product [Product Subcategory Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-140">**Product [Product Subcategory Id]**</span></span>|<span data-ttu-id="a1546-141">**Product Subcategory [Product Subcategory Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-141">**Product Subcategory [Product Subcategory Id]**</span></span>|  
    |<span data-ttu-id="a1546-142">はい</span><span class="sxs-lookup"><span data-stu-id="a1546-142">Yes</span></span>|<span data-ttu-id="a1546-143">**Product Subcategory [Product Category Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-143">**Product Subcategory [Product Category Id]**</span></span>|<span data-ttu-id="a1546-144">**Product Category [Product Category Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-144">**Product Category [Product Category Id]**</span></span>|  
    |<span data-ttu-id="a1546-145">はい</span><span class="sxs-lookup"><span data-stu-id="a1546-145">Yes</span></span>|<span data-ttu-id="a1546-146">**Internet Sales [Customer Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-146">**Internet Sales [Customer Id]**</span></span>|<span data-ttu-id="a1546-147">**Customer [Customer Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-147">**Customer [Customer Id]**</span></span>|  
    |<span data-ttu-id="a1546-148">はい</span><span class="sxs-lookup"><span data-stu-id="a1546-148">Yes</span></span>|<span data-ttu-id="a1546-149">**Internet Sales [Product Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-149">**Internet Sales [Product Id]**</span></span>|<span data-ttu-id="a1546-150">**Product [Product Id]**</span><span class="sxs-lookup"><span data-stu-id="a1546-150">**Product [Product Id]**</span></span>|  
  
 <span data-ttu-id="a1546-151">上記のいずれかのテーブル間リレーションシップが存在しない場合は、モデルに次のテーブルが含まれていることを確認します: Customer、Date、Geography、Product、Product Category、Product Subcategory、および Internet Sales。</span><span class="sxs-lookup"><span data-stu-id="a1546-151">If any of the relationships in the table above are missing, verify that your model includes the following tables: Customer, Date, Geography, Product, Product Category, Product Subcategory, and Internet Sales.</span></span> <span data-ttu-id="a1546-152">同じデータ ソース接続のテーブルが別々の時期にインポートされた場合、これらのテーブル間のリレーションシップは作成されないので手動で作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-152">If tables from the same data source connection are imported at separate times, any relationships between those tables will not be created and must be created manually.</span></span>  
  
 <span data-ttu-id="a1546-153">場合によっては、特定のビジネス ロジックをサポートするために、モデル内のテーブル間に追加でリレーションシップを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-153">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="a1546-154">このチュートリアルでは、Internet Sales テーブルと Date テーブルの間に 3 つの追加リレーションシップを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a1546-154">For this tutorial, you need to create three additional relationships between the Internet Sales table and the Date table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="a1546-155">テーブル間に新しいリレーションシップを追加するには</span><span class="sxs-lookup"><span data-stu-id="a1546-155">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="a1546-156">モデル デザイナーの **Internet Sales** テーブルで、 **Order Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。</span><span class="sxs-lookup"><span data-stu-id="a1546-156">In the model designer, in the **Internet Sales** table, click and hold on the **Order Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="a1546-157">**Internet Sales** テーブルの **Order Date** 列と **Date** テーブルの **Date** 列の間にアクティブなリレーションシップが作成され、それを示す実線が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-157">A solid line appears showing you have created an active relationship between the **Order Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a1546-158">リレーションシップを作成する際には、主テーブルと、関連する参照テーブルの順序は自動的に正しい順序に設定されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-158">When creating relationships, the order between the primary table and the related lookup table is automatically put in the correct order.</span></span>  
  
2.  <span data-ttu-id="a1546-159">**Internet Sales** テーブルで、 **Due Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。</span><span class="sxs-lookup"><span data-stu-id="a1546-159">In the **Internet Sales** table, click and hold on the **Due Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="a1546-160">**Internet Sales** テーブルの **Due Date** 列と **Date** テーブルの **Date** 列の間に非アクティブなリレーションシップが作成され、それを示す点線が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-160">A dotted line appears showing you have created an inactive relationship between the **Due Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span> <span data-ttu-id="a1546-161">テーブル間には複数のリレーションシップを持つことができますが、一度にアクティブにできるリレーションシップは 1 つのみです。</span><span class="sxs-lookup"><span data-stu-id="a1546-161">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span>  
  
3.  <span data-ttu-id="a1546-162">最後に、もう 1 つリレーションシップを作成します。 **Internet Sales** テーブルで、 **Ship Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。</span><span class="sxs-lookup"><span data-stu-id="a1546-162">Finally, create one more relationship; in the **Internet Sales** table, click and hold on the **Ship Date** column, then drag the cursor to the **Date** column in the **Date** table, and then release.</span></span>  
  
     <span data-ttu-id="a1546-163">**InternetSales** テーブルの **Ship Date** 列と **Date** テーブルの **Date** 列の間に非アクティブなリレーションシップが作成され、それを示す点線が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a1546-163">A dotted line appears showing you have created an inactive relationship between the **Ship Date** column in the **Internet Sales** table and the **Date** column in the **Date** table.</span></span>  
  
## <a name="next-step"></a><span data-ttu-id="a1546-164">次の手順</span><span class="sxs-lookup"><span data-stu-id="a1546-164">Next Step</span></span>  
 <span data-ttu-id="a1546-165">このチュートリアルを続行するには、次のレッスン [「レッスン 6: 計算列の作成」](lesson-5-create-calculated-columns.md)に進んでください。</span><span class="sxs-lookup"><span data-stu-id="a1546-165">To continue this lesson, go to the next lesson: [Lesson 6: Create Calculated Columns](lesson-5-create-calculated-columns.md).</span></span>  
  
  
