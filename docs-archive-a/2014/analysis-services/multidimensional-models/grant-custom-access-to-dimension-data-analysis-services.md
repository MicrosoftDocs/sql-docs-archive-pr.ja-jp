---
title: ディメンションデータへのカスタムアクセス権の付与 (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
f1_keywords:
- sql12.asvs.roledesignerdialog.dimensiondata.f1
helpviewer_keywords:
- dimensions [Analysis Services], security
- AllowedSet property
- IsAllowed property
- DeniedSet property
- user access rights [Analysis Services], dimensions
- custom dimension data access [Analysis Services]
- permissions [Analysis Services], dimensions
- DefaultMember property
- VisualTotals property
- ApplyDenied property
ms.assetid: b028720d-3785-4381-9572-157d13ec4291
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4d3f91fef6410e05bfd9014f3f2db67530e83e5e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87711089"
---
# <a name="grant-custom-access-to-dimension-data-analysis-services"></a><span data-ttu-id="e4d38-102">ディメンション データへのカスタム アクセス権の付与 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="e4d38-102">Grant custom access to dimension data (Analysis Services)</span></span>
  <span data-ttu-id="e4d38-103">キューブに対する読み取りアクセスを有効にすると、ディメンション メンバー (キューブで使用されるすべてのメジャーを含むメジャー ディメンションのメジャーを含む) へのアクセスを明示的に許可または拒否する追加の権限を設定できます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-103">After enabling read access to a cube, you can set additional permissions that explicitly allow or deny access to dimension members (including measures contained in the Measures Dimension containing all of the measures used in a cube).</span></span> <span data-ttu-id="e4d38-104">たとえば、再販業者のカテゴリが複数ある場合は、特定のビジネスの種類のデータを除外する権限を設定できます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-104">For example, given multiple categories of resellers, you might want to set permissions to exclude data for a specific business type.</span></span> <span data-ttu-id="e4d38-105">次の図は、Reseller ディメンションでウェアハウスのビジネスの種類へのアクセスを拒否した場合の、前後の影響を比較しています。</span><span class="sxs-lookup"><span data-stu-id="e4d38-105">The following illustration is a before-and-after effect of denying access to the Warehouse business type in the Reseller dimension.</span></span>  
  
 <span data-ttu-id="e4d38-106">![ディメンション メンバーを含むピボットテーブルと含まないピボットテーブル](../media/ssas-permsdimdenied.png "ディメンション メンバーを含むピボットテーブルと含まないピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="e4d38-106">![PivotTables with and without a dimension member](../media/ssas-permsdimdenied.png "PivotTables with and without a dimension member")</span></span>  
  
 <span data-ttu-id="e4d38-107">既定では、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] キューブからデータを読み込めるのであれば、そのキューブに関連付けられているすべてのメジャーおよびディメンション メンバーに対する読み込み権限は自動的に付与されています。</span><span class="sxs-lookup"><span data-stu-id="e4d38-107">By default, if you can read data from an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] cube, you automatically have read permissions on all measures and dimension members associated with that cube.</span></span> <span data-ttu-id="e4d38-108">多くのシナリオではこの動作で十分ですが、同じディメンションのそれぞれのユーザーに応じたさまざまなレベルのアクセスと共に、よりセグメント化された承認戦略がセキュリティ要件で求められる場合があります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-108">While this behavior might be sufficient for many scenarios, sometimes security requirements call for a more segmented authorization strategy, with varying levels of access for different users, on the same dimension.</span></span>  
  
 <span data-ttu-id="e4d38-109">アクセスを制限するには、アクセスを許可するメンバー (AllowedSet) または拒否するメンバー (DeniedSet) を選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-109">You can restrict access by choosing which members to allow (AllowedSet) or deny (DeniedSet) access.</span></span> <span data-ttu-id="e4d38-110">そのためには、ロールに含めるまたはロールから除外するディメンション メンバーを選択または選択解除します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-110">You do this by either selecting or deselecting dimension members to include or exclude from the role.</span></span>  
  
 <span data-ttu-id="e4d38-111">基本的なディメンション セキュリティが最も簡単です。ロールに含めるまたはロールから除外するディメンション属性と属性階層を選択するだけです。</span><span class="sxs-lookup"><span data-stu-id="e4d38-111">Basic dimension security is the easiest; you simply select which dimension attributes and attribute hierarchies to include or exclude in the role.</span></span> <span data-ttu-id="e4d38-112">強化されたセキュリティはより複雑なため、MDX スクリプトの専門知識が必要です。</span><span class="sxs-lookup"><span data-stu-id="e4d38-112">Advanced security is more complex and requires expertise in MDX scripting.</span></span> <span data-ttu-id="e4d38-113">両方の方法について次に説明します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-113">Both approaches are described below.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e4d38-114">前提条件</span><span class="sxs-lookup"><span data-stu-id="e4d38-114">Prerequisites</span></span>  
 <span data-ttu-id="e4d38-115">すべてのメジャーまたはディメンション メンバーがカスタム アクセス シナリオで使用できる訳ではありません。</span><span class="sxs-lookup"><span data-stu-id="e4d38-115">Not all measures or dimension members can be used in custom access scenarios.</span></span> <span data-ttu-id="e4d38-116">ロールが既定のメジャーまたはメンバーへのアクセスを制限したり、メジャー式の一部であるメジャーへのアクセスを制限したりすると、接続は失敗します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-116">A connection will fail if a role restricts access to a default measure or member, or restricts access to measures that are part of measure expressions.</span></span>  
  
 <span data-ttu-id="e4d38-117">**ディメンション セキュリティに対する障害 (既定のメジャー、既定のメンバー、メジャー式に使用されるメジャー) を確認します。**</span><span class="sxs-lookup"><span data-stu-id="e4d38-117">**Check for obstructions to dimension security: default measures, default members, and measures used in measure expressions**</span></span>  
  
1.  <span data-ttu-id="e4d38-118">SQL Server Management Studio で、キューブを右クリックし、[**キューブをスクリプト**化] [ALTER] [  |  **ALTER To**  |  **新しいクエリエディターウィンドウ]** の順に選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-118">In SQL Server Management Studio, right-click a cube and select **Script Cube as** | **ALTER To** | **New Query Editor Window**.</span></span>  
  
2.  <span data-ttu-id="e4d38-119">`DefaultMeasure` を検索します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-119">Search for `DefaultMeasure`.</span></span> <span data-ttu-id="e4d38-120">キューブに対して 1 つと、パースペクティブごとに 1 つ見つかります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-120">You should find one for the cube, and one for each perspective.</span></span> <span data-ttu-id="e4d38-121">ディメンション セキュリティを定義する際、既定のメジャーへのアクセスを制限しないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-121">When defining dimension security, avoid restricting access to default measures.</span></span>  
  
3.  <span data-ttu-id="e4d38-122">次に、`MeasureExpression` を検索します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-122">Next, search for `MeasureExpression`.</span></span> <span data-ttu-id="e4d38-123">メジャー式は、計算に基づいたメジャーです。通常、この計算には他のメジャーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-123">A measure expression is a measure, based on a calculation, where the calculation often includes other measures.</span></span> <span data-ttu-id="e4d38-124">制限するメジャーが、式では使用されていないことを確認してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-124">Verify that the measure you want to restrict is not used in an expression.</span></span> <span data-ttu-id="e4d38-125">あるいは、アクセスを制限し、同時にそのメジャーに対するすべての参照をキューブ全体から必ず除外します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-125">Alternatively, go ahead and restrict access, just make sure to also exclude all references to that measure throughout the cube.</span></span>  
  
4.  <span data-ttu-id="e4d38-126">最後に、`DefaultMember` を検索します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-126">Finally, search for `DefaultMember`.</span></span> <span data-ttu-id="e4d38-127">属性の既定のメンバーとして機能する属性をメモしておきます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-127">Make a note of any attributes that serve as a default member of an attribute.</span></span> <span data-ttu-id="e4d38-128">ディメンション セキュリティを設定する場合は、これらの属性に制限を設けないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-128">Avoid putting restrictions on those attributes when setting up dimension security.</span></span>  
  
## <a name="basic-dimension-security"></a><span data-ttu-id="e4d38-129">基本的なディメンション セキュリティ</span><span class="sxs-lookup"><span data-stu-id="e4d38-129">Basic dimension security</span></span>  
  
1.  <span data-ttu-id="e4d38-130">で、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] のインスタンスに接続し [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] 、オブジェクトエクスプローラーで適切なデータベースの [**ロール**] を展開します。次に、データベースロールをクリックするか、新しいデータベースロールを作成します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-130">In [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the instance of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], expand **Roles** for the appropriate database in Object Explorer, and then click a database role (or create a new database role).</span></span>  
  
     <span data-ttu-id="e4d38-131">ロールは、既にキューブへの読み込みアクセス権を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-131">The role should already have read access to the cube.</span></span> <span data-ttu-id="e4d38-132">詳細については、「 [キューブ権限またはモデル権限の付与 &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-132">See [Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) if you need help with this step.</span></span>  
  
2.  <span data-ttu-id="e4d38-133">[**ディメンションデータ**の  |  **基本**] で、権限を設定するディメンションを選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-133">On **Dimension Data** | **Basic**, select the dimension for which you are setting permissions.</span></span>  
  
3.  <span data-ttu-id="e4d38-134">属性階層を選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-134">Choose the attribute hierarchy.</span></span> <span data-ttu-id="e4d38-135">属性の一部は、利用できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-135">Not all attributes will be available.</span></span> <span data-ttu-id="e4d38-136">**[AttributeHierarchyEnabled]** を持つ属性のみが、 **[属性階層]** の一覧に表示されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-136">Only those attributes having **AttributeHierarchyEnabled** appear in the **Attribute Hierarchy** list.</span></span>  
  
4.  <span data-ttu-id="e4d38-137">アクセスを許可または拒否するメンバーを選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-137">Choose which members to allow or deny access.</span></span> <span data-ttu-id="e4d38-138">既定では、 **[すべてのメンバーを選択する]** オプションでアクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-138">Allowing access, through the **Select all members** option, is the default.</span></span> <span data-ttu-id="e4d38-139">この既定を維持し、 **[メンバーシップ]** ペイン内の Windows ユーザー アカウントとグループ アカウントに対して表示しない個々のメンバーを、このロールによってオフにすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-139">We suggest you keep this default and then clear individual members that should not be visible to the Windows user and group accounts in the **Memberships** pane via this role.</span></span> <span data-ttu-id="e4d38-140">この利点は、このロールを介して接続するユーザーが、その後の処理操作で追加される新しいメンバーを自動的に使用できるようになることです。</span><span class="sxs-lookup"><span data-stu-id="e4d38-140">The advantage is that new members added in future processing operations are automatically available to people connecting through this role.</span></span>  
  
     <span data-ttu-id="e4d38-141">また、 **[すべてのメンバーの選択を解除する]** を実行してすべてのアクセスを取り消してから、許可するメンバーを選択することもできます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-141">Alternatively, you can **Deselect all members** to revoke access overall, and then pick which members to allow.</span></span> <span data-ttu-id="e4d38-142">その後の処理操作で、新しいメンバーは、アクセスを許可するようにディメンション データ セキュリティが手動で編集されるまで表示されません。</span><span class="sxs-lookup"><span data-stu-id="e4d38-142">In future processing operations, new members are not visible until you manually edit dimension data security to allow access to them.</span></span>  
  
5.  <span data-ttu-id="e4d38-143">必要に応じて、[**詳細設定**] をクリックし `Visual Totals` て、この属性階層を有効にします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-143">Optionally, click **Advanced** to enable `Visual Totals` for this attribute hierarchy.</span></span> <span data-ttu-id="e4d38-144">このオプションは、ロールを介して使用できるメンバーに基づいて集計を再計算します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-144">This option recalculates aggregations based on the members available through the role.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e4d38-145">ディメンション メンバーを取り除く権限を適用する場合は、集計合計は自動的には再計算されません。</span><span class="sxs-lookup"><span data-stu-id="e4d38-145">When applying permissions that trim dimension members, aggregated totals are not recalculated automatically.</span></span> <span data-ttu-id="e4d38-146">`All`権限が適用される前に、属性階層のメンバーが200の数を返したとします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-146">Suppose the `All` member of an attribute hierarchy returns a count of 200 before permissions are applied.</span></span> <span data-ttu-id="e4d38-147">一部のメンバーへのアクセスを拒否するアクセス許可を適用した後 `All` も、ユーザーに表示されるメンバー値がはるかに少ない場合でも、は200を返します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-147">After applying permissions that deny access to some members, `All` still returns 200, even though the member values visible to the user are much less.</span></span> <span data-ttu-id="e4d38-148">キューブのコンシューマーが混乱するのを避けるために、メンバーは、 `All` 属性階層のすべてのメンバーの集計ではなく、ロールメンバーに対するメンバーの集計にするように構成できます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-148">To avoid confusing the consumers of your cube, you can configure the `All` member be the aggregate of just those members to which role members, rather than the aggregate of all of the members of the attribute hierarchy.</span></span> <span data-ttu-id="e4d38-149">この動作を呼び出すには、 `Visual Totals` ディメンションのセキュリティを構成するときに [**詳細設定**] タブでを有効にします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-149">To invoke this behavior, you can enable `Visual Totals` on the **Advanced** tab when configuring dimension security.</span></span> <span data-ttu-id="e4d38-150">有効になると、集計値は事前計算された集計値から取得されるのではなく、クエリの実行時に計算されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-150">Once enabled, the aggregate is calculated at query time rather than retrieved from pre-calculated aggregations.</span></span> <span data-ttu-id="e4d38-151">これにより、クエリのパフォーマンスに大きな影響が出る可能性があるため、必要な場合にのみ使用してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-151">This can have a noticeable effect on query performance, so use it only when necessary.</span></span>  
  
## <a name="hiding-measures"></a><span data-ttu-id="e4d38-152">メジャーの非表示</span><span class="sxs-lookup"><span data-stu-id="e4d38-152">Hiding measures</span></span>  
 <span data-ttu-id="e4d38-153">「 [セル データへのカスタム アクセス権の付与 &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md)」で、セル データだけでなく、メジャーのすべての表示部分を完全に非表示にするには、ディメンション メンバーに対する権限が必要であることが説明されています。</span><span class="sxs-lookup"><span data-stu-id="e4d38-153">In [Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md), it was explained that fully hiding all visual aspects of a measure, and not just its cell data, requires permissions on dimension members.</span></span> <span data-ttu-id="e4d38-154">ここでは、メジャーのオブジェクト メタデータへのアクセスを拒否する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-154">This section explains how to deny access to the object metadata of a measure.</span></span>  
  
1.  <span data-ttu-id="e4d38-155">[**ディメンションデータ**の  |  **基本**] で、キューブディメンションに達するまでディメンションの一覧を下にスクロールし、[**メジャーディメンション**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-155">On **Dimension Data** | **Basic**, scroll down the Dimension list until you reach cube dimensions, and then select **Measures Dimension**.</span></span>  
  
2.  <span data-ttu-id="e4d38-156">メジャーの一覧から、このロールを使用して接続しているユーザーに対しては表示しないメジャーのチェック ボックスをオフにします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-156">From the list of measures, clear the check box for measures that should not appear to users connecting via this role.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e4d38-157">ロール セキュリティを解除できるメジャーを識別する方法については、前提条件を確認してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-157">Check the Prerequisites to learn how to identify measures that can break role security.</span></span>  
  
## <a name="advanced-dimension-security"></a><span data-ttu-id="e4d38-158">強化されたディメンション セキュリティ</span><span class="sxs-lookup"><span data-stu-id="e4d38-158">Advanced dimension security</span></span>  
 <span data-ttu-id="e4d38-159">MDX の専門知識がある場合は、別の方法として、アクセスが許可または拒否されたメンバー用の条件を設定するための MDX 式を記述します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-159">If you have MDX expertise, another approach is to write MDX expressions that set the criteria for which members are allowed or denied access.</span></span> <span data-ttu-id="e4d38-160">[**ロール**  |  **ディメンションデータ**  |  の**詳細**を作成] をクリックして、スクリプトを指定します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-160">Click **Create Role** | **Dimension Data** | **Advanced** to provide the script.</span></span>  
  
 <span data-ttu-id="e4d38-161">MDX ビルダーを使用すると、MDX ステートメントを記述できます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-161">You can the MDX Builder to write the MDX statement.</span></span> <span data-ttu-id="e4d38-162">詳細については、「[MDX ビルダー &#40;Analysis Services - 多次元データ&#41;](../mdx-builder-analysis-services-multidimensional-data.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-162">See [MDX Builder &#40;Analysis Services - Multidimensional Data&#41;](../mdx-builder-analysis-services-multidimensional-data.md) for details.</span></span> <span data-ttu-id="e4d38-163">**[詳細設定]** タブには次のオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-163">The **Advanced** tab has the following options:</span></span>  
  
 <span data-ttu-id="e4d38-164">**属性**</span><span class="sxs-lookup"><span data-stu-id="e4d38-164">**Attribute**</span></span>  
 <span data-ttu-id="e4d38-165">メンバーのセキュリティを管理する属性を選択します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-165">Select the attribute for which you want to manage member security.</span></span>  
  
 <span data-ttu-id="e4d38-166">**[許可されたメンバー セット]**</span><span class="sxs-lookup"><span data-stu-id="e4d38-166">**Allowed member set**</span></span>  
 <span data-ttu-id="e4d38-167">AllowedSet は、空のメンバー (既定)、すべてのメンバー、または一部のメンバーに解決されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-167">The AllowedSet can resolve to no members (default), all members, or some members.</span></span> <span data-ttu-id="e4d38-168">属性へのアクセスを許可しているにもかかわらず、許可されたセットにメンバーを定義していない場合は、すべてのメンバーへのアクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-168">If you allow access to an attribute and do not define any members of the allowed set, access to all members is granted.</span></span> <span data-ttu-id="e4d38-169">属性へのアクセスを許可していて、属性メンバーの特定のセットを定義した場合は、明示的に許可されているメンバーのみが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-169">If you allow access to an attribute and define a specific set of attribute members, only the explicitly allowed members are visible.</span></span>  
  
 <span data-ttu-id="e4d38-170">AllowedSet を作成すると、属性が複数階層に参加する際に波及効果があります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-170">Creating an AllowedSet has a ripple effect when the attribute participates in a multi-level hierarchy.</span></span> <span data-ttu-id="e4d38-171">たとえば、ロールが Washington 州へのアクセスを許可するとします (ロールから、Washington 州 にある会社の営業部門に権限が付与されるというシナリオを想定します)。</span><span class="sxs-lookup"><span data-stu-id="e4d38-171">For example, suppose a role allows access to Washington state (assume a scenario where the role is granting permissions to a company's Washington state sales division).</span></span> <span data-ttu-id="e4d38-172">このロールを使用して接続しているユーザーの場合、先祖 (United States) または子孫 (Seattle および Redmond) を含むクエリに対しては、Washington 州を含むチェーンにあるメンバーのみが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-172">For people connecting through this role, queries that include ancestors (United States) or descendants (Seattle and Redmond) will only see members in a chain including Washington state.</span></span> <span data-ttu-id="e4d38-173">他の州は明示的に許可されていないため、与える影響は拒否された場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="e4d38-173">Because other states are not explicitly allowed, the effect will be the same as if they were denied.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e4d38-174">属性メンバーの空のセット () を定義すると {} 、その属性のメンバーはデータベースロールに表示されません。</span><span class="sxs-lookup"><span data-stu-id="e4d38-174">If you define an empty set ({}) of attribute members, no members of the attribute will be visible to the database role.</span></span> <span data-ttu-id="e4d38-175">許可されたセットが存在しない場合は、空のセットが存在するものとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-175">The absence of an allowed set is not interpreted as an empty set.</span></span>  
  
 <span data-ttu-id="e4d38-176">**[拒否されたメンバー セット]**</span><span class="sxs-lookup"><span data-stu-id="e4d38-176">**Denied member set**</span></span>  
 <span data-ttu-id="e4d38-177">DeniedSet プロパティは、空のメンバー、すべてのメンバー (既定)、または一部の属性メンバーに解決されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-177">The DeniedSet property can resolve to no members, all members (default), or some attribute members.</span></span> <span data-ttu-id="e4d38-178">拒否されたセットに特定の属性メンバーのセットのみが含まれている場合、データベース ロールに対しては、それらの特定のメンバーと子孫 (属性が複数階層にある場合) へのアクセスのみが拒否されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-178">When the denied set contains only a specific set of attribute members, the database role is denied access only to those specific members, as well as descendants if the attribute is in a multi-level hierarchy.</span></span> <span data-ttu-id="e4d38-179">Washington 州の営業部門の例を考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="e4d38-179">Consider the Washington state sales division example.</span></span> <span data-ttu-id="e4d38-180">Washington が DeniedSet に配置されている場合、このロールを使用して接続しているユーザーには、Washington 以外のすべての州とそれらの子孫の属性が表示されます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-180">If Washington is placed in the DeniedSet, people connecting through this role will see all other states except Washington and its descendent attributes.</span></span>  
  
 <span data-ttu-id="e4d38-181">前のセクションで説明したように、拒否されたセットは固定コレクションです。</span><span class="sxs-lookup"><span data-stu-id="e4d38-181">Recall from the previous section that the denied set is a fixed collection.</span></span> <span data-ttu-id="e4d38-182">その後、アクセスが拒否される必要のある新しいメンバーが処理によって追加された場合、このロールを編集して、それらのメンバーを一覧に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-182">If processing subsequently introduces new members that should also be denied access, you will need to edit this role to add those members to the list.</span></span>  
  
 <span data-ttu-id="e4d38-183">**[既定のメンバー]**</span><span class="sxs-lookup"><span data-stu-id="e4d38-183">**Default member**</span></span>  
 <span data-ttu-id="e4d38-184">DefaultMember プロパティは、属性がクエリに明示的に含まれていない場合に、クライアントに返されるデータセットを決定します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-184">The DefaultMember property determines the data set returned to a client when an attribute is not explicitly included in a query.</span></span> <span data-ttu-id="e4d38-185">属性が明示的に含まれていない場合、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では属性に対して次の既定メンバーのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-185">When the attribute is not explicitly included, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses one of the following default members for the attribute:</span></span>  
  
-   <span data-ttu-id="e4d38-186">データベース ロールで属性の既定メンバーを定義している場合、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ではこの既定メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-186">If the database role defines a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses this default member.</span></span>  
  
-   <span data-ttu-id="e4d38-187">データベース ロールが属性の既定メンバーを定義していない場合、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では属性自体に定義されている既定メンバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-187">If the database role does not define a default member for the attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the default member that is defined for the attribute itself.</span></span> <span data-ttu-id="e4d38-188">属性の既定メンバーは、特別に指定していない限り、`All` のメンバーになります (属性が非集計として定義されている場合を除く)。</span><span class="sxs-lookup"><span data-stu-id="e4d38-188">The default member for an attribute, unless you specify otherwise, is the `All` member (unless the attribute is defined as non-aggregatable).</span></span>  
  
 <span data-ttu-id="e4d38-189">たとえば、データベース ロールで、`Male` を `Gender` 属性の既定のメンバーとして指定しているとします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-189">For example, suppose a database role specifies `Male` as the default member for the `Gender` attribute.</span></span> <span data-ttu-id="e4d38-190">クエリに、`Gender` 属性が明示的に含まれており、この属性に別のメンバーが指定されているのでない限り、[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では男性顧客のみを含むデータセットを返します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-190">Unless a query both explicitly includes the `Gender` attribute and specifies a different member for this attribute, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would return a data set that included only male customers.</span></span> <span data-ttu-id="e4d38-191">既定メンバーの設定の詳細については、「 [既定メンバーの定義](attribute-properties-define-a-default-member.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e4d38-191">For more information about setting the default member, see [Define a Default Member](attribute-properties-define-a-default-member.md).</span></span>  
  
 <span data-ttu-id="e4d38-192">**[表示部分の合計を表示する]**</span><span class="sxs-lookup"><span data-stu-id="e4d38-192">**Enable Visual Total**</span></span>  
 <span data-ttu-id="e4d38-193">VisualTotals プロパティは、表示される集計セル値がすべてのセル値に基づいて計算されるか、データベース ロールが表示可能なセル値のみに基づいて計算されるかを示します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-193">The VisualTotals property indicates whether the aggregated cell values that are displayed are calculated according to all cell values or only according to the cell values that are visible to the database role.</span></span>  
  
 <span data-ttu-id="e4d38-194">既定では、VisualTotals プロパティは無効になっています (に設定されてい `False` ます)。</span><span class="sxs-lookup"><span data-stu-id="e4d38-194">By default, the VisualTotals property is disabled (set to `False`).</span></span> <span data-ttu-id="e4d38-195">この既定の設定では、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] は、計算に使用するセル値の選択に時間を費やすことなく、すべてのセル値の合計をすばやく計算できるので、最大限のパフォーマンスが実現します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-195">This default setting maximizes performance because [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] can quickly calculate the total of all cell values, instead of having to spend time selecting which cells values to calculate.</span></span>  
  
 <span data-ttu-id="e4d38-196">ただし、VisualTotals プロパティを無効にすると、集計されたセル値を使用して、ユーザーのデータベース ロールにアクセス権のない属性メンバーの値をユーザーが推定しようとした場合に、セキュリティの問題が発生するおそれがあります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-196">However, having the VisualTotals property disabled could create a security issue if a user can use the aggregated cell values to deduce values for attribute members to which the user's database role does not have access.</span></span> <span data-ttu-id="e4d38-197">たとえば、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では 3 つの属性メンバーの値を使用して、集計セル値を計算します。</span><span class="sxs-lookup"><span data-stu-id="e4d38-197">For example, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] uses the values for three attribute members to calculate an aggregated cell value.</span></span> <span data-ttu-id="e4d38-198">データベース ロールには、これらの 3 つの属性メンバーのうちの 2 つを表示するためのアクセス権が許可されています。</span><span class="sxs-lookup"><span data-stu-id="e4d38-198">The database role has access to view two of these three attribute members.</span></span> <span data-ttu-id="e4d38-199">集計セル値を使用すると、このデータベース ロールのメンバーは、3 番目の属性メンバーの値を推定できるようになります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-199">Using the aggregated cell value, a member of this database role would be able to deduce the value for the third attribute member.</span></span>  
  
 <span data-ttu-id="e4d38-200">VisualTotals プロパティをに設定すると、 `True` このリスクを回避できます。</span><span class="sxs-lookup"><span data-stu-id="e4d38-200">Setting VisualTotals property to `True` can eliminate this risk.</span></span> <span data-ttu-id="e4d38-201">VisualTotals プロパティを有効にすると、データベース ロールでは、権限のあるディメンション メンバーの集計合計のみを表示できるようになります。</span><span class="sxs-lookup"><span data-stu-id="e4d38-201">When you enable the VisualTotals property, a database role can only view aggregated totals for dimension members to which the role has permission.</span></span>  
  
 <span data-ttu-id="e4d38-202">**確認事項**</span><span class="sxs-lookup"><span data-stu-id="e4d38-202">**Check**</span></span>  
 <span data-ttu-id="e4d38-203">このページに定義された MDX 構文をテストします。</span><span class="sxs-lookup"><span data-stu-id="e4d38-203">Click to test the MDX syntax defined on this page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e4d38-204">参照</span><span class="sxs-lookup"><span data-stu-id="e4d38-204">See Also</span></span>  
 <span data-ttu-id="e4d38-205">[キューブまたはモデルの権限を &#40;Analysis Services に付与する&#41;](grant-cube-or-model-permissions-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e4d38-205">[Grant cube or model permissions &#40;Analysis Services&#41;](grant-cube-or-model-permissions-analysis-services.md) </span></span>  
 <span data-ttu-id="e4d38-206">[セルデータへのカスタムアクセス権の付与 &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e4d38-206">[Grant custom access to cell data &#40;Analysis Services&#41;](grant-custom-access-to-cell-data-analysis-services.md) </span></span>  
 <span data-ttu-id="e4d38-207">[データマイニング構造およびデータマイニングモデルに対する権限の許可 &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="e4d38-207">[Grant permissions on data mining structures and models &#40;Analysis Services&#41;](grant-permissions-on-data-mining-structures-and-models-analysis-services.md) </span></span>  
 [<span data-ttu-id="e4d38-208">データ ソース オブジェクトに対する権限の付与 &#40;Analysis Services&#41;</span><span class="sxs-lookup"><span data-stu-id="e4d38-208">Grant permissions on a data source object &#40;Analysis Services&#41;</span></span>](grant-permissions-on-a-data-source-object-analysis-services.md)  
  
  
