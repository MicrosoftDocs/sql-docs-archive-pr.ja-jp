---
title: ローカルパーティションを作成および管理する (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- local partitions [Analysis Services]
- partitions [Analysis Services], local
- partitions [Analysis Services], creating
ms.assetid: eaa95278-9ce9-47d5-a6b6-1046e7076599
author: minewiskan
ms.author: owend
ms.openlocfilehash: 7251f9e9422a79c214d27d913112a28ff43d56b1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87631277"
---
# <a name="create-and-manage-a-local-partition-analysis-services"></a><span data-ttu-id="a2947-102">ローカル パーティションの作成と管理 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="a2947-102">Create and Manage a Local Partition (Analysis Services)</span></span>
  <span data-ttu-id="a2947-103">メジャー グループに追加のパーティションを作成すると、処理パフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="a2947-103">You can create additional partitions for a measure group to improve processing performance.</span></span> <span data-ttu-id="a2947-104">複数のパーティションがあると、ローカル サーバーとリモート サーバー上の対応する数の物理データ ファイルにファクト データを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="a2947-104">Having multiple partitions allows you to allocate fact data across a corresponding number of physical data files on local as well as remote servers.</span></span> <span data-ttu-id="a2947-105">Analysis Services では、パーティションを個別に処理することも並列に処理することもできるため、サーバー上の処理ワークロードをより細かく制御できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-105">In Analysis Services, partitions can be processed independently and in parallel, giving you more control over processing workloads on the server.</span></span>

 <span data-ttu-id="a2947-106">パーティションは、 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] でモデルのデザイン時に作成するか、または [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] または XMLA を使用してソリューションを配置した後に作成することができます。</span><span class="sxs-lookup"><span data-stu-id="a2947-106">Partitions can be created in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] during model design, or after the solution is deployed using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] or XMLA.</span></span> <span data-ttu-id="a2947-107">方法を 1 つだけ選択することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a2947-107">We recommend that you choose one approach only.</span></span> <span data-ttu-id="a2947-108">ツールを何度も切り替えると、後で [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] からソリューションを再配置したときに、 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]で配置されたデータベースに対して行った変更が上書きされることがあります。</span><span class="sxs-lookup"><span data-stu-id="a2947-108">If you alternate between tools, you might find that changes made to a deployed database in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] are overwritten when you subsequently redeploy the solution from [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span>

## <a name="before-you-start"></a><span data-ttu-id="a2947-109">開始する前に</span><span class="sxs-lookup"><span data-stu-id="a2947-109">Before you start</span></span>
 <span data-ttu-id="a2947-110">Business Intelligence Edition または Enterprise Edition を持っているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="a2947-110">Check whether you have either the business intelligence edition or enterprise edition.</span></span> <span data-ttu-id="a2947-111">Standard Edition では、複数のパーティションがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="a2947-111">Standard edition does not support multiple partitions.</span></span> <span data-ttu-id="a2947-112">エディションを確認するには、でサーバーノードを右クリックし、[ [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] **レポート**] [全般] を選択し  |  **General**ます。</span><span class="sxs-lookup"><span data-stu-id="a2947-112">To check the edition, right-click the server node in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] and choose **Reports** | **General**.</span></span> <span data-ttu-id="a2947-113">使用可能な機能の詳細については、「 [SQL Server 2014 の各エディションがサポートする機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-113">For more information about feature availability, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

 <span data-ttu-id="a2947-114">パーティションを後でマージする場合は、パーティションで同じ集計デザインを共有する必要があることを最初に理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="a2947-114">From the outset, it's important to understand that partitions must share the same aggregation design if you want to merge them later.</span></span> <span data-ttu-id="a2947-115">パーティションをマージできるのは、集計デザインとストレージ モードが同じ場合のみです。</span><span class="sxs-lookup"><span data-stu-id="a2947-115">Partitions can be merged only if they have identical aggregation designs and storage modes.</span></span>

> [!TIP]
>  <span data-ttu-id="a2947-116">データ ソース ビュー (DSV) 内のデータを調べて、パーティション分割するデータの範囲と深さを把握します。</span><span class="sxs-lookup"><span data-stu-id="a2947-116">Explore the data in Data Source View (DSV) to understand the range and depth of the data you are partitioning.</span></span> <span data-ttu-id="a2947-117">たとえば、日付でパーティション分割する場合、日付列で並べ替えると、各パーティションの上限と下限を判別できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-117">For example, if partitioning by date, you can sort on a date column to determine the upper and lower bounds of each partition.</span></span>

## <a name="choose-an-approach"></a><span data-ttu-id="a2947-118">アプローチの選択</span><span class="sxs-lookup"><span data-stu-id="a2947-118">Choose an approach</span></span>
 <span data-ttu-id="a2947-119">パーティションを作成する際に最も重要な考慮事項は、重複する行がないようにデータを分割することです。</span><span class="sxs-lookup"><span data-stu-id="a2947-119">The most important consideration when creating partitions is to segment the data so that there are no duplicate rows.</span></span> <span data-ttu-id="a2947-120">行が二重カウントされないように、データは 1 つのパーティションだけに格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-120">Data must be stored in one, and only one, partition to avoid double counting any rows.</span></span> <span data-ttu-id="a2947-121">そのため、各パーティションの間に明確な境界を定義できるように、日付でパーティション分割するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="a2947-121">As such, it's common to partition by DATE so that you can define clear boundaries between each partition.</span></span>

 <span data-ttu-id="a2947-122">または、複数のパーティションにファクト データを分散する手法も使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-122">You can use either technique to distribute the fact data across multiple partitions.</span></span> <span data-ttu-id="a2947-123">データを分割するには、次の手法を使用できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-123">The following techniques can be used to segment the data.</span></span>

|<span data-ttu-id="a2947-124">手法</span><span class="sxs-lookup"><span data-stu-id="a2947-124">Technique</span></span>|<span data-ttu-id="a2947-125">Recommendations</span><span class="sxs-lookup"><span data-stu-id="a2947-125">Recommendations</span></span>|
|---------------|---------------------|
|<span data-ttu-id="a2947-126">SQL クエリを使用してファクト データを分割する</span><span class="sxs-lookup"><span data-stu-id="a2947-126">Use SQL queries to segment fact data</span></span>|<span data-ttu-id="a2947-127">パーティションのソースには SQL クエリを指定できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-127">Partitions can be sourced from SQL queries.</span></span> <span data-ttu-id="a2947-128">処理中に、SQL クエリによってデータが取得されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-128">During processing, the SQL query is to retrieve the data.</span></span> <span data-ttu-id="a2947-129">クエリの WHERE 句では、各パーティションにデータを分割するフィルターを指定します。</span><span class="sxs-lookup"><span data-stu-id="a2947-129">The query's WHERE clause provides the filter that segments the data for each partition.</span></span> <span data-ttu-id="a2947-130">Analysis Services によってクエリが生成されますが、データを適切に分割するために WHERE 句を自分で入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-130">Analysis Services generates the query for you, but you must fill in the WHERE clause to properly segment the data.</span></span><br /><br /> <span data-ttu-id="a2947-131">このアプローチの主な利点は、1 つのソース テーブルから簡単にデータをパーティション分割できることです。</span><span class="sxs-lookup"><span data-stu-id="a2947-131">The primary advantage of this approach is the ease with which you can partition data from a single source table.</span></span> <span data-ttu-id="a2947-132">すべてのソース データが大きなファクト テーブルから取得される場合、そのデータを個別のパーティションにフィルター処理するクエリを作成できます。データ ソース ビュー (DSV) で追加のデータ構造を作成する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a2947-132">If all of the source data originates from a large fact table, you can build queries that filter that data into discrete partitions, without having to create additional data structures in the Data Source View (DSV).</span></span><br /><br /> <span data-ttu-id="a2947-133">1 つの欠点として、クエリを使用すると、パーティションと DSV のバインドが機能しなくなることが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="a2947-133">One disadvantage is that using queries will break the binding between the partition and the DSV.</span></span> <span data-ttu-id="a2947-134">ファクト テーブルに列を追加するなど、後で Analysis Services プロジェクトで DSV を更新する場合は、新しい列を含めるように各パーティションのクエリを手動で編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-134">If you later update the DSV in the Analysis Services project, such as adding columns to the fact table, you must manually edit the queries for each partition to include the new column.</span></span> <span data-ttu-id="a2947-135">次に説明する 2 番目のアプローチにはこの欠点はありません。</span><span class="sxs-lookup"><span data-stu-id="a2947-135">The second approach, discussed next, does not have this disadvantage.</span></span>|
|<span data-ttu-id="a2947-136">DSV 内のテーブルを使用してファクト データを分割する</span><span class="sxs-lookup"><span data-stu-id="a2947-136">Use tables in the DSV to segment fact data</span></span>|<span data-ttu-id="a2947-137">DSV 内のテーブル、名前付きクエリ、またはビューにパーティションをバインドできます。</span><span class="sxs-lookup"><span data-stu-id="a2947-137">You can bind a partition to a table, named query, or view in the DSV.</span></span> <span data-ttu-id="a2947-138">パーティションの基盤として、この 3 つすべては機能的に等価です。</span><span class="sxs-lookup"><span data-stu-id="a2947-138">As the basis of a partition, all three are functionally equivalent.</span></span> <span data-ttu-id="a2947-139">テーブル全体、名前付きクエリ、またはビューで、すべてのデータが 1 つのパーティションに提供されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-139">The entire table, named query, or view provides all of the data to a single partition.</span></span><br /><br /> <span data-ttu-id="a2947-140">テーブル、ビュー、または名前付きクエリを使用すると、DSV にデータ選択ロジック全体が配置され、長期にわたる管理とメンテナンスがより簡単になります。</span><span class="sxs-lookup"><span data-stu-id="a2947-140">Using a table, view, or named query places all of the data selection logic in the DSV, which can be easier to manage and maintain over time.</span></span> <span data-ttu-id="a2947-141">このアプローチの重要な利点は、テーブルのバインドが保持されることです。</span><span class="sxs-lookup"><span data-stu-id="a2947-141">An important advantage to this approach is that table bindings are preserved.</span></span> <span data-ttu-id="a2947-142">ソース テーブルを後で更新する場合に、そのソース テーブルを使用するパーティションを変更する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a2947-142">If you update the source table later, you do not have to modify the partitions that use it.</span></span> <span data-ttu-id="a2947-143">もう 1 つの利点として、すべてのテーブル、名前付きクエリ、およびビューが共通のワークスペースに存在するため、更新がより簡単になり、パーティションのクエリを個別に開いて編集する必要がありません。</span><span class="sxs-lookup"><span data-stu-id="a2947-143">Secondly, all of the tables, named queries and views exist in a common work space, making updates more convenient than having to open and edit partition queries individually.</span></span>|

## <a name="option-1-filter-a-fact-table-for-multiple-partitions"></a><span data-ttu-id="a2947-144">オプション 1: 複数パーティション用のファクト テーブルをフィルター選択する</span><span class="sxs-lookup"><span data-stu-id="a2947-144">Option 1: Filter a Fact Table for Multiple Partitions</span></span>
 <span data-ttu-id="a2947-145">複数のパーティションを作成するには、最初に、既定のパーティションの **[ソース]** プロパティを変更します。</span><span class="sxs-lookup"><span data-stu-id="a2947-145">To create multiple partitions, you begin by modifying the **Source** property of the default partition.</span></span> <span data-ttu-id="a2947-146">既定では、メジャー グループは、DSV 内の 1 つのテーブルにバインドされている 1 つのパーティションを使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-146">By default, a measure group is created using a single partition that is bound to a single table in the DSV.</span></span> <span data-ttu-id="a2947-147">さらにパーティションを追加する前に、まず、ファクト データの一部だけが含まれるように元のパーティションを変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-147">Before you can add more partitions, you must first modify the original partition to contain just a portion of the fact data.</span></span> <span data-ttu-id="a2947-148">その後、残りのデータを格納するための追加のパーティションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-148">You can then proceed to create additional partitions for storing the remainder of the data.</span></span>

 <span data-ttu-id="a2947-149">パーティション間でデータが重複しないように、フィルターを作成します。</span><span class="sxs-lookup"><span data-stu-id="a2947-149">Construct your filters such that data is not duplicated among the partitions.</span></span> <span data-ttu-id="a2947-150">パーティションのフィルターは、そのパーティションで使用されるファクト テーブル内のデータを指定します。</span><span class="sxs-lookup"><span data-stu-id="a2947-150">A partition's filter specifies which data in the fact table is used in the partition.</span></span> <span data-ttu-id="a2947-151">キューブに含まれるすべてのパーティションのフィルターが、ファクト テーブルから相互排他的なデータセットを取り出すことが重要です。</span><span class="sxs-lookup"><span data-stu-id="a2947-151">It is important that the filters for all partitions in a cube extract mutually exclusive datasets from the fact table.</span></span> <span data-ttu-id="a2947-152">同一のファクト データは、複数のパーティションに存在すると二重カウントされることがあります。</span><span class="sxs-lookup"><span data-stu-id="a2947-152">The same fact data might be double-counted if it appears in multiple partitions.</span></span>

1.  <span data-ttu-id="a2947-153">[!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]のソリューション エクスプローラーで、キューブをダブルクリックしてキューブ デザイナーで開き、 **[パーティション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2947-153">In [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], in Solution Explorer, double-click the cube to open it in Cube Designer, and then click the **Partitions** tab.</span></span>

2.  <span data-ttu-id="a2947-154">パーティションを追加するメジャー グループを展開します。</span><span class="sxs-lookup"><span data-stu-id="a2947-154">Expand the measure group for which are adding partitions.</span></span> <span data-ttu-id="a2947-155">既定では、各メジャー グループには、DSV 内のファクト テーブルにバインドされた 1 つのパーティションがあります。</span><span class="sxs-lookup"><span data-stu-id="a2947-155">By default, each measure group has one partition, bound to a fact table in the DSV.</span></span>

3.  <span data-ttu-id="a2947-156">[ソース] 列で、参照ボタン ([.</span><span class="sxs-lookup"><span data-stu-id="a2947-156">In the Source column, click the browse (.</span></span> <span data-ttu-id="a2947-157">.]) をクリックして、[パーティション ソース] ダイアログ ボックスを開きます。</span><span class="sxs-lookup"><span data-stu-id="a2947-157">.) button to open the Partition Source dialog box.</span></span>

     <span data-ttu-id="a2947-158">![[パーティション] ペイン内の基になる列](../media/ssas-partitionsource.png "[パーティション] ペイン内の基になる列")</span><span class="sxs-lookup"><span data-stu-id="a2947-158">![Source column in Partition pane](../media/ssas-partitionsource.png "Source column in Partition pane")</span></span>

4.  <span data-ttu-id="a2947-159">[バインドの種類] で **[クエリ バインド]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="a2947-159">In Binding Type, select **Query Binding**.</span></span> <span data-ttu-id="a2947-160">データを選択する SQL クエリが自動的に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-160">The SQL query that selects the data appears automatically.</span></span>

5.  <span data-ttu-id="a2947-161">下部にある WHERE 句で、このパーティションのデータを分割するフィルターを追加します。</span><span class="sxs-lookup"><span data-stu-id="a2947-161">In the WHERE clause at the bottom, add a filter that segments data for this partition.</span></span>

     <span data-ttu-id="a2947-162">WHERE 句の構文例として、 `WHERE OrderDateKey >= '20060101'` や `WHERE OrderDateKey BETWEEN '20051001' AND '20051201'`があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-162">Examples of WHERE clause syntax include `WHERE OrderDateKey >= '20060101'` or `WHERE OrderDateKey BETWEEN '20051001' AND '20051201'`.</span></span> <span data-ttu-id="a2947-163">その他の例については、「[WHERE &#40;Transact-SQL&#41;](/sql/t-sql/queries/where-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-163">For other examples, see [WHERE &#40;Transact-SQL&#41;](/sql/t-sql/queries/where-transact-sql).</span></span>

     <span data-ttu-id="a2947-164">次のフィルターは各セット内で相互排他的であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-164">Notice that the following filters are mutually exclusive within each set:</span></span>

    |||
    |-|-|
    |<span data-ttu-id="a2947-165">セット 1:</span><span class="sxs-lookup"><span data-stu-id="a2947-165">Set 1:</span></span>|<span data-ttu-id="a2947-166">"SaleYear" = 2012</span><span class="sxs-lookup"><span data-stu-id="a2947-166">"SaleYear" = 2012</span></span><br /><br /> <span data-ttu-id="a2947-167">"SaleYear" = 2013</span><span class="sxs-lookup"><span data-stu-id="a2947-167">"SaleYear" = 2013</span></span>|
    |<span data-ttu-id="a2947-168">セット 2:</span><span class="sxs-lookup"><span data-stu-id="a2947-168">Set 2:</span></span>|<span data-ttu-id="a2947-169">"Continent" = 'NorthAmerica'</span><span class="sxs-lookup"><span data-stu-id="a2947-169">"Continent" = 'NorthAmerica'</span></span><br /><br /> <span data-ttu-id="a2947-170">"Continent" = 'Europe'</span><span class="sxs-lookup"><span data-stu-id="a2947-170">"Continent" = 'Europe'</span></span><br /><br /> <span data-ttu-id="a2947-171">"Continent" = 'SouthAmerica'</span><span class="sxs-lookup"><span data-stu-id="a2947-171">"Continent" = 'SouthAmerica'</span></span>|
    |<span data-ttu-id="a2947-172">セット 3:</span><span class="sxs-lookup"><span data-stu-id="a2947-172">Set 3:</span></span>|<span data-ttu-id="a2947-173">"Country" = 'USA'</span><span class="sxs-lookup"><span data-stu-id="a2947-173">"Country" = 'USA'</span></span><br /><br /> <span data-ttu-id="a2947-174">"Country" = 'Mexico'</span><span class="sxs-lookup"><span data-stu-id="a2947-174">"Country" = 'Mexico'</span></span><br /><br /> <span data-ttu-id="a2947-175">("Country" <> 'USA' AND "Country" <> 'Mexico')</span><span class="sxs-lookup"><span data-stu-id="a2947-175">("Country" <> 'USA' AND "Country" <> 'Mexico')</span></span>|

6.  <span data-ttu-id="a2947-176">**[確認]** をクリックして構文エラーの有無を確認し、 **[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2947-176">Click **Check** to check for syntax errors, and then click **OK**.</span></span>

7.  <span data-ttu-id="a2947-177">前の手順を繰り返して残りのパーティションを作成し、毎回次のデータ スライスを選択するように WHERE 句を変更します。</span><span class="sxs-lookup"><span data-stu-id="a2947-177">Repeat the previous steps to create the remaining partitions, modifying the WHERE clause each time to select the next data slice.</span></span>

8.  <span data-ttu-id="a2947-178">ソリューションを配置するかパーティションを処理して、データを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="a2947-178">Deploy the solution or process the partition to load the data.</span></span> <span data-ttu-id="a2947-179">必ずすべてのパーティションを処理してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-179">Be sure to process all partitions.</span></span>

9. <span data-ttu-id="a2947-180">キューブを参照して、正しいデータが返されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="a2947-180">Browse the cube to verify the correct data is returned.</span></span>

 <span data-ttu-id="a2947-181">複数のメジャー グループを使用するメジャー グループを作成したら、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]で追加のパーティションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-181">After you have a measure group that uses multiple measure groups, you can create additional partitions in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="a2947-182">メジャー グループで、[パーティション] フォルダーを右クリックし、 **[新しいパーティション]** をクリックしてウィザードを開始します。</span><span class="sxs-lookup"><span data-stu-id="a2947-182">Under a measure group, right-click the Partitions folder and select **New Partitions** to start the wizard.</span></span>

> [!NOTE]
>  <span data-ttu-id="a2947-183">パーティション内のデータをフィルター選択する代わりに、同じクエリを使用して DSV で名前付きクエリを作成し、その名前付きクエリに基づいてパーティションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-183">Instead of filtering data in a partition, you can use the same query to create a name query in the DSV, and then base the partition on the named query.</span></span>

## <a name="option-2-use-tables-views-or-named-queries"></a><span data-ttu-id="a2947-184">オプション 2: テーブル、ビュー、または名前付きクエリを使用する</span><span class="sxs-lookup"><span data-stu-id="a2947-184">Option 2: Use Tables, Views, or Named Queries</span></span>
 <span data-ttu-id="a2947-185">DSV で既にファクトが個々のテーブル (年ごとや四半期ごとなど) に編成されている場合は、個々のテーブルに基づくパーティションを作成できます。各パーティションには独自のデータ ソース テーブルが用意されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-185">If the DSV already organizes facts into individual tables (for example, by year or quarter), you can create partitions based on an individual table, where each partition has its own data source table.</span></span> <span data-ttu-id="a2947-186">基本的には、これがメジャー グループをパーティション分割する既定の方法となりますが、複数のパーティションの場合は、元のパーティションを複数のパーティションに分割し、新しい各パーティションを、データを提供するデータ ソース テーブルにマップします。</span><span class="sxs-lookup"><span data-stu-id="a2947-186">This is essentially how measure groups are partitioned by default but in the case of multiple partitions, you break the original partition into multiple partitions, and map each new partition to the data source table providing the data.</span></span>

 <span data-ttu-id="a2947-187">ビューおよび名前付きクエリはテーブルと機能的に同等です。これら 3 つのオブジェクトはすべて、DSV で定義され、[パーティション ソース] ダイアログ ボックスの [テーブル バインド] オプションを使用してパーティションにバインドされます。</span><span class="sxs-lookup"><span data-stu-id="a2947-187">Views and named queries are functional equivalent to tables, in that all three objects are defined in the DSV and bound to a partition using the Table Binding option in the Partition Source dialog box.</span></span> <span data-ttu-id="a2947-188">ビューまたは名前付きクエリを作成して、各パーティションに必要なデータ セグメントを生成できます。</span><span class="sxs-lookup"><span data-stu-id="a2947-188">You can create a view or named query to generate the data segment needed for each partition.</span></span> <span data-ttu-id="a2947-189">詳細については、「[データ ソース ビューでの名前付きクエリの定義 &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-189">For more information, see [Define Named Queries in a Data Source View &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md).</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="a2947-190">DSV で複数のパーティションに対して相互排他的な名前付きクエリを作成する場合は、パーティションの結合データに、キューブに含めるメジャー グループのデータがすべて含まれるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="a2947-190">When you create mutually exclusive named queries for partitions in a DSV, ensure that the combined data for the partitions includes all data from a measure group that you want to include in the cube.</span></span> <span data-ttu-id="a2947-191">メジャー グループのテーブル全体に基づいた既定のパーティションを残さないようにしてください。残しておくと、パーティションに基づくクエリが、完全なテーブルに基づくクエリと重複します。</span><span class="sxs-lookup"><span data-stu-id="a2947-191">Make sure that you do not leave a default partition based on the entire table for the measure group, or else the query based partitions will overlap the query based on the complete table.</span></span>

1.  <span data-ttu-id="a2947-192">パーティション ソースとして使用する 1 つ以上の名前付きクエリを作成します。</span><span class="sxs-lookup"><span data-stu-id="a2947-192">Create one or more named queries to use as the partition source.</span></span> <span data-ttu-id="a2947-193">詳細については、「[データ ソース ビューでの名前付きクエリの定義 &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-193">For more information, see [Define Named Queries in a Data Source View &#40;Analysis Services&#41;](define-named-queries-in-a-data-source-view-analysis-services.md).</span></span>

     <span data-ttu-id="a2947-194">名前付きクエリは、メジャー グループに関連付けられたファクト テーブルに基づいている必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-194">The named query must be based on the fact table associated with the measure group.</span></span> <span data-ttu-id="a2947-195">たとえば、FactInternetSales メジャー グループをパーティション分割する場合、DSV の名前付きクエリでは FROM ステートメントで FactInternetSales テーブルを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-195">For example, if you are partitioning the FactInternetSales measure group, the named queries in the DSV must specify the FactInternetSales table in the FROM statement.</span></span>

2.  <span data-ttu-id="a2947-196">[!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]のソリューション エクスプローラーで、キューブをダブルクリックしてキューブ デザイナーで開き、 **[パーティション]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2947-196">In [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], in Solution Explorer, double-click the cube to open it in Cube Designer, and then click the **Partitions** tab.</span></span>

3.  <span data-ttu-id="a2947-197">パーティションを追加するメジャー グループを展開します。</span><span class="sxs-lookup"><span data-stu-id="a2947-197">Expand the measure group for which are adding partitions.</span></span>

4.  <span data-ttu-id="a2947-198">**[新しいパーティション]** をクリックして、パーティション ウィザードを開始します。</span><span class="sxs-lookup"><span data-stu-id="a2947-198">Click **New Partition** to start the Partition Wizard.</span></span> <span data-ttu-id="a2947-199">メジャー グループにバインドされたファクト テーブルを使用して名前付きクエリを作成した場合は、前の手順で作成した名前付きクエリがそれぞれ表示されます。</span><span class="sxs-lookup"><span data-stu-id="a2947-199">If you created the named queries using the fact table bound to the measure group, you should see each of the named queries you created in the previous step.</span></span>

5.  <span data-ttu-id="a2947-200">[基になる情報の指定] で、前の手順で作成した名前付きクエリの 1 つを選択します。</span><span class="sxs-lookup"><span data-stu-id="a2947-200">In Specify Source Information, choose one of the named queries you created in a previous step.</span></span> <span data-ttu-id="a2947-201">名前付きクエリが表示されない場合は、DSV に戻り、FROM ステートメントを確認します。</span><span class="sxs-lookup"><span data-stu-id="a2947-201">If you do not see any named queries, go back to the DSV and check the FROM statement.</span></span>

6.  <span data-ttu-id="a2947-202">**[次へ]** をクリックして、以降の各ページで既定値をそのまま使用します。</span><span class="sxs-lookup"><span data-stu-id="a2947-202">Click **Next** to accept the default values for each subsequent page.</span></span>

7.  <span data-ttu-id="a2947-203">最後の [ウィザードの完了] ページで、パーティションにわかりやすい名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="a2947-203">On the last page, Completing the Wizard, give the partition a descriptive name.</span></span>

8.  <span data-ttu-id="a2947-204">**[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2947-204">Click **Finish**.</span></span>

9. <span data-ttu-id="a2947-205">前の手順を繰り返して残りのパーティションを作成し、毎回次のデータ スライスを選択するように別の名前付きクエリを選択します。</span><span class="sxs-lookup"><span data-stu-id="a2947-205">Repeat the previous steps to create the remaining partitions, choosing a different named query each time to select the next data slice.</span></span>

10. <span data-ttu-id="a2947-206">ソリューションを配置するかパーティションを処理して、データを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="a2947-206">Deploy the solution or process the partition to load the data.</span></span> <span data-ttu-id="a2947-207">必ずすべてのパーティションを処理してください。</span><span class="sxs-lookup"><span data-stu-id="a2947-207">Be sure to process all partitions.</span></span>

11. <span data-ttu-id="a2947-208">キューブを参照して、正しいデータが返されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="a2947-208">Browse the cube to verify the correct data is returned.</span></span>

## <a name="next-step"></a><span data-ttu-id="a2947-209">次の手順</span><span class="sxs-lookup"><span data-stu-id="a2947-209">Next Step</span></span>
 <span data-ttu-id="a2947-210">パーティション用に相互排他的なクエリを作成する場合は、キューブに含めようとしたデータが結合後のパーティション データにすべて含まれていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2947-210">When you create mutually exclusive queries for partitions, ensure that the combined partition data includes all data you want to include in the cube.</span></span>

 <span data-ttu-id="a2947-211">最後に、通常、テーブル自体に基づいた既定のパーティション (まだ存在する場合) は削除してください。そうしないと、クエリ パーティションに基づいたクエリが、完全なテーブルに基づいたクエリと重複することになります。</span><span class="sxs-lookup"><span data-stu-id="a2947-211">As a final step, you normally want to remove the default partition that was based on the table itself (if it still exists), or else the query based partitions will overlap the query based on the complete table.</span></span>

## <a name="see-also"></a><span data-ttu-id="a2947-212">参照</span><span class="sxs-lookup"><span data-stu-id="a2947-212">See Also</span></span>
 <span data-ttu-id="a2947-213">[パーティション &#40;Analysis Services-多次元データ&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) [リモートパーティション](../multidimensional-models-olap-logical-cube-objects/partitions-remote-partitions.md)[でのパーティションのマージ Analysis Services &#40;SSAS-多次元&#41;](merge-partitions-in-analysis-services-ssas-multidimensional.md)</span><span class="sxs-lookup"><span data-stu-id="a2947-213">[Partitions &#40;Analysis Services - Multidimensional Data&#41;](../multidimensional-models-olap-logical-cube-objects/partitions-analysis-services-multidimensional-data.md) [Remote Partitions](../multidimensional-models-olap-logical-cube-objects/partitions-remote-partitions.md) [Merge Partitions in Analysis Services &#40;SSAS - Multidimensional&#41;](merge-partitions-in-analysis-services-ssas-multidimensional.md)</span></span>


