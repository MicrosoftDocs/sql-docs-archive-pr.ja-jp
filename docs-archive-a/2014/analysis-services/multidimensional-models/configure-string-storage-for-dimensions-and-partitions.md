---
title: ディメンションとパーティションの文字列ストレージの構成 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 987f6cfc-da82-4b2e-96ef-a8af88339e5f
author: minewiskan
ms.author: owend
ms.openlocfilehash: 2817af382599d4495dddbd8951a72a47629cf824
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87737105"
---
# <a name="configure-string-storage-for-dimensions-and-partitions"></a><span data-ttu-id="7fb7f-102">ディメンションおよびパーティションの文字列ストレージの構成</span><span class="sxs-lookup"><span data-stu-id="7fb7f-102">Configure String Storage for Dimensions and Partitions</span></span>
  <span data-ttu-id="7fb7f-103">文字列ストレージは、ディメンション属性またはパーティションの非常に大きな文字列 (文字列ストアの 4 GB のファイル サイズ制限を超えるもの) に対応するように再構成できます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-103">You can reconfigure string storage to accommodate very large strings in dimension attributes or partitions that exceed the 4 GB file size limit for string stores.</span></span> <span data-ttu-id="7fb7f-104">このサイズの文字列ストアがディメンションまたはパーティションに含まれている場合、ディメンション レベルまたはパーティション レベルで **[StringStoresCompatibilityLevel]** プロパティを変更することによって、ファイル サイズの制約を回避できます。これは、ローカル オブジェクトとリンクされている (ローカルまたはリモート) オブジェクトの両方に適用されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-104">If your dimensions or partitions include string stores of this size, you can work around the file size constraint by changing the **StringStoresCompatibilityLevel** property at the dimension or partition level, for local as well as linked (local or remote) objects.</span></span>  
  
 <span data-ttu-id="7fb7f-105">文字列ストレージは、追加容量が必要なそれらのオブジェクトに対してのみ増やすことができます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-105">Note that you can increase string storage on just those objects that require additional capacity.</span></span> <span data-ttu-id="7fb7f-106">多くの多次元モデルでは、文字列データはディメンションに関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-106">In most multidimensional models, string data is associated with dimensions.</span></span> <span data-ttu-id="7fb7f-107">ただし、文字列の上に個別のカウント メジャーが含まれているパーティションも、この設定の影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-107">However, partitions that contain distinct count measures on top of strings can also benefit from this setting.</span></span> <span data-ttu-id="7fb7f-108">この設定は文字列のためであるため、数値データは影響を受けません。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-108">Because the setting is for strings, numeric data is unaffected.</span></span>  
  
 <span data-ttu-id="7fb7f-109">このプロパティの有効値を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-109">Valid values for this property include the following:</span></span>  
  
|<span data-ttu-id="7fb7f-110">値</span><span class="sxs-lookup"><span data-stu-id="7fb7f-110">Value</span></span>|<span data-ttu-id="7fb7f-111">説明</span><span class="sxs-lookup"><span data-stu-id="7fb7f-111">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="7fb7f-112">**1050**</span><span class="sxs-lookup"><span data-stu-id="7fb7f-112">**1050**</span></span>|<span data-ttu-id="7fb7f-113">既定の文字列ストレージ アーキテクチャを指定します。ストアごとの最大ファイル サイズが 4 GB に制限されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-113">Specifies the default string storage architecture, subject to a 4 GB maximum file size per store.</span></span>|  
|<span data-ttu-id="7fb7f-114">**1100**</span><span class="sxs-lookup"><span data-stu-id="7fb7f-114">**1100**</span></span>|<span data-ttu-id="7fb7f-115">大きな文字列ストレージを指定します。ストアごとに最大 40 億個の一意な文字列がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-115">Specifies larger string storage, supports up to 4 billion unique strings per store.</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7fb7f-116">オブジェクトの文字列ストレージ設定を変更すると、そのオブジェクト自体と依存オブジェクトの再処理が必要になります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-116">Changing the string storage settings of an object requires that you reprocess the object itself and any dependent object.</span></span> <span data-ttu-id="7fb7f-117">手順を完了するには処理が必要です。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-117">Processing is required to complete the procedure.</span></span>  
  
 <span data-ttu-id="7fb7f-118">このトピックは、次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-118">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="7fb7f-119">文字列ストアについて</span><span class="sxs-lookup"><span data-stu-id="7fb7f-119">About String Stores</span></span>](#bkmk_background)  
  
-   [<span data-ttu-id="7fb7f-120">前提条件</span><span class="sxs-lookup"><span data-stu-id="7fb7f-120">Prerequisites</span></span>](#bkmk_prereq)  
  
-   [<span data-ttu-id="7fb7f-121">手順 1: SQL Server Data Tools で StringStoreCompatiblityLevel プロパティを設定する</span><span class="sxs-lookup"><span data-stu-id="7fb7f-121">Step 1: Set the StringStoreCompatiblityLevel Property in SQL Server Data Tools</span></span>](#bkmk_step1)  
  
-   [<span data-ttu-id="7fb7f-122">手順 2: オブジェクトを処理する</span><span class="sxs-lookup"><span data-stu-id="7fb7f-122">Step 2: Process the Objects</span></span>](#bkmk_step2)  
  
##  <a name="about-string-stores"></a><a name="bkmk_background"></a><span data-ttu-id="7fb7f-123">文字列ストアについて</span><span class="sxs-lookup"><span data-stu-id="7fb7f-123">About String Stores</span></span>  
 <span data-ttu-id="7fb7f-124">文字列ストレージの構成はオプションです。つまり、作成した新規データベースでも、既定の文字列ストア アーキテクチャが使用され、最大ファイル サイズが 4 GB に制限されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-124">String storage configuration is optional, which means that even new databases that you create use the default string store architecture that is subject to the 4 GB maximum file size.</span></span> <span data-ttu-id="7fb7f-125">大きな文字列ストレージ アーキテクチャを使用すると、パフォーマンスにわずかながら明白な影響が生じます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-125">Using the larger string storage architecture has a small but noticeable impact on performance.</span></span> <span data-ttu-id="7fb7f-126">文字列ストレージ ファイルが最大 4 GB の制限に達しているか、それに近い場合にだけ使用してください。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-126">You should use it only if your string storage files are close to or at the maximum 4 GB limit.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7fb7f-127">この設定はデータ マイニング モデルには適用されません。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-127">This setting does not apply to data mining models.</span></span> <span data-ttu-id="7fb7f-128">現在、データ マイニング構造を含むモデルでは、GB 単位のファイル サイズの制限が引き続き発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-128">Currently, it is still possible to encounter the GB file size limitation on models containing data mining structures.</span></span>  
  
 <span data-ttu-id="7fb7f-129">Analysis Services 多次元データベースでは、データの特性に基づく最適化が実行できるように、文字列は数値データとは別に格納されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-129">In an Analysis Services multidimensional database, strings are stored separately from numeric data to allow for optimizations based on characteristics of the data.</span></span> <span data-ttu-id="7fb7f-130">文字列データは、通常、名前や説明を表すディメンション属性で使用されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-130">String data is typically found in dimension attributes that represent names or descriptions.</span></span> <span data-ttu-id="7fb7f-131">文字列データを個別のカウント メジャー内に置くこともできます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-131">It is also possible to have string data in distinct count measures.</span></span> <span data-ttu-id="7fb7f-132">文字列データはキーで使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-132">String data can also be used in keys.</span></span>  
  
 <span data-ttu-id="7fb7f-133">文字列ストアは、そのファイル拡張子 (たとえば、asstore、.bstore、.ksstore、または .string) によって識別できます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-133">You can identify a string store by its file extension (for example, asstore, .bstore, .ksstore, or .string files).</span></span> <span data-ttu-id="7fb7f-134">既定では、これらの各ファイルは、最大 4 GB に制限されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-134">By default, each of these files is subject to a maximum 4 GB limit.</span></span> <span data-ttu-id="7fb7f-135">[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)]では、必要に応じて文字列ストアを拡張できる別のストレージ方式を指定することにより、最大ファイル サイズをオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-135">In [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], you can override the maximum file size by specifying an alternative storage mechanism that allows a string store to grow as needed.</span></span>  
  
 <span data-ttu-id="7fb7f-136">物理ファイルのサイズを制限する既定の文字列ストレージ アーキテクチャとは異なり、大きな文字列ストレージでは文字列の最大数を制限します。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-136">In contrast with the default string storage architecture which limits the size of the physical file, larger string storage is based on a maximum number of strings.</span></span> <span data-ttu-id="7fb7f-137">大きな文字列ストレージの上限は、一意の文字列とレコードのどちらかの数が 40 億に達した時点となります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-137">The maximum limit for larger string storage is 4 billion unique strings or 4 billion records, whichever occurs first.</span></span> <span data-ttu-id="7fb7f-138">大きな文字列ストレージでは均等なサイズのレコードが作成され、各レコードのサイズは 64 K ページに等しくなります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-138">Larger string storage creates records of an even size, where each record is equal to a 64K page.</span></span> <span data-ttu-id="7fb7f-139">1 つのレコードに収まらない非常に長い文字列がある場合、文字列数の実際の制限は 40 億よりも少なくなります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-139">If you have very long strings that do not fit in a single record, your effective limit will be less than 4 billion strings.</span></span>  
  
##  <a name="prerequisites"></a><a name="bkmk_prereq"></a> <span data-ttu-id="7fb7f-140">前提条件</span><span class="sxs-lookup"><span data-stu-id="7fb7f-140">Prerequisites</span></span>  
 <span data-ttu-id="7fb7f-141">[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] の [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]以上のバージョンが必要です。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-141">You must have a [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] or later version of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="7fb7f-142">ディメンションとパーティションは MOLAP ストレージを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-142">Dimensions and partitions must use MOLAP storage.</span></span>  
  
 <span data-ttu-id="7fb7f-143">データベース互換性レベルを 1100 に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-143">The database compatibility level must be set to 1100.</span></span> <span data-ttu-id="7fb7f-144">[!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] と [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以上のバージョンの [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]を使用してデータベースを作成または配置した場合、データベース互換性レベルはあらかじめ 1100 に設定されています。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-144">If you created or deployed a database using [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] and the [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] or later version of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], the database compatibility level is already set to 1100.</span></span> <span data-ttu-id="7fb7f-145">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] の以前のバージョンで作成したデータベースを ssSQL11 以上に移動した場合、互換性レベルを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-145">If you moved a database created in an earlier version of [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to ssSQL11 or later, you must update the compatibility level.</span></span> <span data-ttu-id="7fb7f-146">再配置ではなく、移動するデータベースには、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] を使用して互換性レベルを設定できます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-146">For databases that you are moving, but not redeploying, you can use [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to set the compatibility level.</span></span> <span data-ttu-id="7fb7f-147">詳細については、「[多次元データベースの互換性レベルを設定する &#40;Analysis Services&#41;](compatibility-level-of-a-multidimensional-database-analysis-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-147">For more information, see [Set the Compatibility Level of a Multidimensional Database &#40;Analysis Services&#41;](compatibility-level-of-a-multidimensional-database-analysis-services.md).</span></span>  
  
##  <a name="step-1-set-the-stringstorecompatiblitylevel-property-in-sql-server-data-tools"></a><a name="bkmk_step1"></a><span data-ttu-id="7fb7f-148">手順 1: SQL Server Data Tools で StringStoreCompatiblityLevel プロパティを設定する</span><span class="sxs-lookup"><span data-stu-id="7fb7f-148">Step 1: Set the StringStoreCompatiblityLevel Property in SQL Server Data Tools</span></span>  
  
1.  <span data-ttu-id="7fb7f-149">[!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]を使用して、変更するディメンションまたはパーティションが含まれているプロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-149">Using [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], open the project that contains the dimensions or partitions you want to modify.</span></span>  
  
2.  <span data-ttu-id="7fb7f-150">ディメンションの文字列ストレージを変更するには、ソリューション エクスプローラーを開きます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-150">To change the string storage for dimensions, open Solution Explorer.</span></span> <span data-ttu-id="7fb7f-151">文字列ストレージを変更するディメンションをダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-151">Double-click the dimension for which you are modifying string storage.</span></span>  
  
3.  <span data-ttu-id="7fb7f-152">ディメンション デザイナーの [属性] ペインで、ディメンションの親ノードが選択されていることを確認します (たとえば、ディメンションが Customers の場合は、子属性のいずれかではなく、Customers を選択します)。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-152">In Dimension Designer, in the Attributes pane, make sure that the parent node of the dimension is selected (for example, if the dimension is Customers, select Customers and not one of the child attributes).</span></span>  
  
4.  <span data-ttu-id="7fb7f-153">[プロパティ] ペインの [詳細設定] セクションで、 **[StringStoresCompatibilityLevel]** を **1100**に設定します。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-153">In the Properties pane, in the Advanced section, set **StringStoresCompatibilityLevel** to **1100**.</span></span> <span data-ttu-id="7fb7f-154">大きなストレージを必要とする他のディメンションで同じ手順を繰り返すか、残りのディメンションの値を **1050** のままにします。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-154">Repeat for other dimensions that require larger storage, otherwise leave the remaining dimensions at the **1050** value.</span></span>  
  
5.  <span data-ttu-id="7fb7f-155">パーティションに対しては、ソリューション エクスプローラーから、キューブを開きます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-155">For partitions, open a cube from Solution Explorer.</span></span>  
  
6.  <span data-ttu-id="7fb7f-156">[パーティション] タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-156">Click the Partitions tab.</span></span>  
  
7.  <span data-ttu-id="7fb7f-157">パーティションを展開し、追加のストレージ容量を必要とするパーティションを選択して、 **StringStoresCompatibilityLevel** プロパティを変更します。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-157">Expand the partition, select the partition that requires extra storage capacity, and then modify the **StringStoresCompatibilityLevel** property.</span></span>  
  
8.  <span data-ttu-id="7fb7f-158">ファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-158">Save the file.</span></span>  
  
##  <a name="step-2-process-the-objects"></a><a name="bkmk_step2"></a><span data-ttu-id="7fb7f-159">手順 2: オブジェクトを処理する</span><span class="sxs-lookup"><span data-stu-id="7fb7f-159">Step 2: Process the Objects</span></span>  
 <span data-ttu-id="7fb7f-160">オブジェクトを処理した後は、新しいストレージ アーキテクチャが使用されます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-160">The new storage architecture will be used after you process the objects.</span></span> <span data-ttu-id="7fb7f-161">オブジェクトを処理することで、以前は文字列ストアのオーバーフロー状態を報告していたエラーが発生しなくなるため、ストレージの制約の問題が正常に解決されたことも確認できます。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-161">Processing objects also proves you have successfully resolved storage constraint problem because the error that previously reported a string store overflow condition should no longer occur.</span></span>  
  
-   <span data-ttu-id="7fb7f-162">ソリューション エクスプローラーで、変更したディメンションを右クリックし、 **[処理]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-162">In Solution Explorer, right-click the dimension or you just modified and select **Process**.</span></span>  
  
 <span data-ttu-id="7fb7f-163">新しい文字列ストア アーキテクチャを使用している各オブジェクトに、完全処理オプションを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-163">You must use the Process Full option on each object that is using the new string store architecture.</span></span> <span data-ttu-id="7fb7f-164">処理の前に、ディメンションに対する影響分析を必ず実行して、依存オブジェクトも再処理が必要かどうかを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7fb7f-164">Before processing, be sure to run an impact analysis on the dimension to check whether dependent objects also require reprocessing.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7fb7f-165">参照</span><span class="sxs-lookup"><span data-stu-id="7fb7f-165">See Also</span></span>  
 <span data-ttu-id="7fb7f-166">[&#40;Analysis Services を処理するためのツールと方法&#41;](tools-and-approaches-for-processing-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="7fb7f-166">[Tools and Approaches for Processing &#40;Analysis Services&#41;](tools-and-approaches-for-processing-analysis-services.md) </span></span>  
 <span data-ttu-id="7fb7f-167">[処理オプションと設定 &#40;Analysis Services&#41;](processing-options-and-settings-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="7fb7f-167">[Processing Options and Settings &#40;Analysis Services&#41;](processing-options-and-settings-analysis-services.md) </span></span>  
 <span data-ttu-id="7fb7f-168">[パーティションストレージモードと処理](../multidimensional-models-olap-logical-cube-objects/partitions-partition-storage-modes-and-processing.md) </span><span class="sxs-lookup"><span data-stu-id="7fb7f-168">[Partition Storage Modes and Processing](../multidimensional-models-olap-logical-cube-objects/partitions-partition-storage-modes-and-processing.md) </span></span>  
 [<span data-ttu-id="7fb7f-169">ディメンションのストレージ</span><span class="sxs-lookup"><span data-stu-id="7fb7f-169">Dimension Storage</span></span>](../multidimensional-models-olap-logical-dimension-objects/dimensions-storage.md)  
  
  
