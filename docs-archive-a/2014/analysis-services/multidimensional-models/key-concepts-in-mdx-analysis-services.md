---
title: MDX の主な概念 (Analysis Services) |Microsoft Docs
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- Multidimensional Expressions [Analysis Services], about MDX
- dimensional modeling [MDX]
- MDX [Analysis Services], about MDX
- Multidimensional Expressions [Analysis Services], dimensional modeling
- MDX [Analysis Services], dimensional modeling
ms.assetid: 4797ddc8-6423-497a-9a43-81a1af7eb36c
author: minewiskan
ms.author: owend
ms.openlocfilehash: 1e6907913bd5e068f30cea2e652ccdad5247d965
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87641339"
---
# <a name="key-concepts-in-mdx-analysis-services"></a><span data-ttu-id="26bbc-102">MDX の主な概念 (Analysis Services)</span><span class="sxs-lookup"><span data-stu-id="26bbc-102">Key Concepts in MDX (Analysis Services)</span></span>
  <span data-ttu-id="26bbc-103">多次元式 (MDX) を使用して多次元データを照会したり、キューブ内で MDX 式を作成したりするには、多次元の概念と用語を理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-103">Before you can use Multidimensional Expressions (MDX) to query multidimensional data or create MDX expressions within a cube, it helps to understand multidimensional concepts and terms.</span></span>  
  
 <span data-ttu-id="26bbc-104">既にご存じのデータ要約の例を足掛かりにして、それと MDX の関連性を確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="26bbc-104">The best place to start is with a data summarization example you already know, and then see how MDX relates to it.</span></span> <span data-ttu-id="26bbc-105">ここでは、Excel で作成された、Analysis Services のサンプルキューブのデータを含む PivotTable を作成します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-105">Here's a PivotTable created in Excel, populated with data from an Analysis Services sample cube.</span></span>  
  
 <span data-ttu-id="26bbc-106">![メジャーとディメンションが呼び出されたピボットテーブル](../media/ssas-keyconcepts-pivot1-measures-dimensions.png "メジャーとディメンションが呼び出されたピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-106">![PivotTable with measures and dimensions called out](../media/ssas-keyconcepts-pivot1-measures-dimensions.png "PivotTable with measures and dimensions called out")</span></span>  
  
## <a name="measures-and-dimensions"></a><span data-ttu-id="26bbc-107">メジャーとディメンション</span><span class="sxs-lookup"><span data-stu-id="26bbc-107">Measures and Dimensions</span></span>  
 <span data-ttu-id="26bbc-108">Analysis Services キューブは、ピボットテーブルの例で示したメジャー、ディメンション、およびディメンション属性で構成されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-108">An Analysis Services cube consists of measures, dimensions, and dimension attributes, all of which are evident in the PivotTable example.</span></span>  
  
 <span data-ttu-id="26bbc-109">**メジャー** は、合計、カウント、パーセンテージ、最小、最大、または平均として集計されるセル内の数値データ値です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-109">**Measures** are numeric data values found in cells, aggregated as a sum, count, percentage, min, max, or average.</span></span> <span data-ttu-id="26bbc-110">メジャー値は、動的で、ユーザーのナビゲーションやピボットテーブルとのやり取りに反応して、リアルタイムに計算されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-110">Measure values are dynamic, calculated in real time, in response to user navigation and interaction with the PivotTable.</span></span> <span data-ttu-id="26bbc-111">この例では、各セルが軸の展開と折りたたみに基づいて増減する Reseller Sales Amounts を表しています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-111">In this example, the cells show Reseller Sales Amounts that increase or decrease based on whether you expand or collapse the axes.</span></span> <span data-ttu-id="26bbc-112">Date (年、四半期、月、または日付) と Sales Territory (国のグループ、国、地域) の任意の組み合わせに対して、その特定のコンテキストで集計された Reseller Sales Amount を取得できます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-112">For any combination of Date (year, quarter, month, or date) and Sales Territory (Country group, Country, Region) you can get a Reseller Sales Amount, summed for that particular context.</span></span> <span data-ttu-id="26bbc-113">メジャーの同義語である他の用語としては、ファクト (データ ウェアハウス内) と計算フィールド (テーブルと Excel データ モデル内) があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-113">Other terms that are synonymous with measures are facts (in data warehouses) and calculated fields (in tabular and Excel data models).</span></span>  
  
 <span data-ttu-id="26bbc-114">**ディメンション** は、ピボットテーブルの列軸と行軸上に表示され、メジャーの背後にある意味を表します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-114">**Dimensions** are on the column and row axes of a PivotTable, providing the meaning behind the measure.</span></span> <span data-ttu-id="26bbc-115">ディメンションは、リレーショナル データ モデル内のテーブルに似ています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-115">Dimensions are analogous to Tables in a relational data model.</span></span> <span data-ttu-id="26bbc-116">ディメンションの一般的な例として、Time、Geography、Products、Customers、Employees などが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-116">Common examples of a dimension include Time, Geography, Products, Customers, Employees, and so on.</span></span> <span data-ttu-id="26bbc-117">この例は、各行の Sales Territory と最上部の Date の 2 つのディメンションで構成されていますが、Promotions や Products などの Reseller Sales に関連付けられた他のディメンションをドラッグ アンド ドロップして、簡単に、それらのディメンションに沿った販売実績を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-117">This example has two dimensions, Sales Territory on the rows, and Date across the top, but you could easily drag and drop other dimensions associated with Reseller Sales, such as Promotions or Products, to view sales performance along those dimensions.</span></span> <span data-ttu-id="26bbc-118">データを効率的に探索できるかどうかは、作成するディメンションと、それがデータ ソース内のファクト テーブルと関連性があるかどうかに応じて異なります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-118">Your ability to explore data in interesting ways depends on the dimensions you create, and whether they are related to fact tables in your data source.</span></span>  
  
 <span data-ttu-id="26bbc-119">**ディメンション属性** は、テーブル内の列と同様の、ディメンション内の名前付きアイテムです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-119">**Dimension attributes** are the named items within a dimension, similar to columns in a table.</span></span> <span data-ttu-id="26bbc-120">この例では、Sales Territory ディメンション属性が、Country Group (Europe、North America、Pacific)、Country (Canada、United States)、および Region (Central、Northeast、Northwest、Southeast、Southwest) で構成されています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-120">In this example, the Sales Territory dimension attributes consist of Country Group (Europe, North America, Pacific), Country (Canada, United States), and Region (Central, Northeast, Northwest, Southeast, Southwest).</span></span>  
  
 <span data-ttu-id="26bbc-121">各属性には、データ値のコレクション、または、それに関連付けられたメンバーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-121">Each attribute has a collection of data values, or members, associated with it.</span></span> <span data-ttu-id="26bbc-122">この例では、Country Group 属性のメンバーは、Europe、North America、および Pacific です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-122">In our example, members of the Country Group attribute are Europe, North America, and Pacific.</span></span> <span data-ttu-id="26bbc-123">**メンバー** は、属性に属している実際のデータ値を表します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-123">**Members** refers to the actual data values that belong to an attribute.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="26bbc-124">データ モデリングの 1 つの側面は、データ自体に内在するパターンとリレーションシップを形式化することです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-124">One aspect of data modeling is to formalize the patterns and relationships that already exist within the data itself.</span></span> <span data-ttu-id="26bbc-125">国/地域/都市のような自然階層に分類されるデータを操作する場合は、 **属性リレーションシップ**を作成することによって、そのリレーションシップを形式化することができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-125">When working with data that falls into a natural hierarchy, as is the case with countries-regions-cities, you can formalize that relationship by creating an **attribute relationship**.</span></span> <span data-ttu-id="26bbc-126">属性リレーションシップは、属性間の一対多リレーションシップです。たとえば、州と都市の間のリレーションシップには多くの都市がありますが、都市は1つの州にのみ属します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-126">An attribute relationship is a one-to-many relationship between attributes, for example a relationship between a state and a city - a state has many cities, but a city belongs to just one state.</span></span> <span data-ttu-id="26bbc-127">モデル内で属性リレーションシップを作成すると、クエリのパフォーマンスが向上します。そのため、データでサポートされている場合は、作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="26bbc-127">Creating attribute relationships in the model speeds up query performance, so it's a best practice to create them if the data supports it.</span></span> <span data-ttu-id="26bbc-128">属性リレーションシップは、SQL Server Data Tools 内のディメンション デザイナーで作成できます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-128">You can create an attribute relationship in Dimension Designer in SQL Server Data Tools.</span></span> <span data-ttu-id="26bbc-129">「 [Define Attribute Relationships](attribute-relationships-define.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="26bbc-129">See [Define Attribute Relationships](attribute-relationships-define.md).</span></span>  
  
 <span data-ttu-id="26bbc-130">Excel 内部のピボットテーブル フィールド リストにモデル メタデータが表示されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-130">Inside Excel, model metadata shows up in the PivotTable field list.</span></span>  <span data-ttu-id="26bbc-131">上のピボットテーブルと下のフィールド リストを比較します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-131">Compare the PivotTable above to the field list below.</span></span> <span data-ttu-id="26bbc-132">フィールド リストには Sales Territory、Group、Country、Region (メタデータ) が含まれているのに対して、ピボットテーブルにはメンバー (データ値) しか含まれていないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="26bbc-132">Notice that the field list contains Sales Territory, Group, Country, Region (metadata), whereas the PivotTable contains just the members (data values).</span></span> <span data-ttu-id="26bbc-133">アイコンの外観を識別することによって、多次元モデルの部品を容易に Excel 内のピボットテーブルに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-133">Knowing what the icons look like can help you easily relate the parts of a multidimensional model to a PivotTable in Excel.</span></span>  
  
 <span data-ttu-id="26bbc-134">![ピボットテーブルのフィールドリスト](../media/ssas-keyconcepts-ptfieldlist.png "ピボットテーブルのフィールド リスト")</span><span class="sxs-lookup"><span data-stu-id="26bbc-134">![PivotTable field list](../media/ssas-keyconcepts-ptfieldlist.png "PivotTable field list")</span></span>  
  
## <a name="attribute-hierarchies"></a><span data-ttu-id="26bbc-135">属性階層</span><span class="sxs-lookup"><span data-stu-id="26bbc-135">Attribute Hierarchies</span></span>  
 <span data-ttu-id="26bbc-136">深く考えなくても、各軸に沿ってレベルを展開したり、折りたたんだりするだけで、ピボットテーブル内の値が増減することがわかっていますが、どうしてこんなことができるのでしょうか。</span><span class="sxs-lookup"><span data-stu-id="26bbc-136">Almost without having to think about it, you know that values in a PivotTable go up or down as you expand and collapse the levels along each axis, but what makes this so?</span></span> <span data-ttu-id="26bbc-137">答えは属性階層にあります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-137">The answer lies in attribute hierarchies.</span></span>  
  
 <span data-ttu-id="26bbc-138">すべてのレベルを折りたたむと、各 Country Group と Calendar Year の総合計が表示されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-138">Collapse all the levels and notice the grand totals for each Country Group and Calendar Year.</span></span> <span data-ttu-id="26bbc-139">この値は、階層内の **(すべての) メンバー** と呼ばれるものから抽出されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-139">This value is derived from something called the **(All) member** within a hierarchy.</span></span> <span data-ttu-id="26bbc-140">(すべての) メンバーは、属性階層内のすべてのメンバーの値を計算したものです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-140">The (All) member is the calculated value of all members in an attribute hierarchy.</span></span>  
  
-   <span data-ttu-id="26bbc-141">すべての Country Groups と Dates の (すべての) メンバーを集計すると、$80,450,596.98 になります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-141">The (All) member for all Country Groups and Dates combined is $80,450,596.98</span></span>  
  
-   <span data-ttu-id="26bbc-142">CY2008 の (すべての) メンバーは $16,038,062.60 です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-142">The (All) member for CY2008 is $16,038,062.60</span></span>  
  
-   <span data-ttu-id="26bbc-143">Pacific の (すべての) メンバーは $1,594,335.38 です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-143">The (All) member for Pacific is $1,594,335.38</span></span>  
  
 <span data-ttu-id="26bbc-144">このような集計は、事前に計算され、保存されます。これが、Analysis Services のクエリ パフォーマンスが優れている秘密の一部です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-144">Aggregations like this are pre-computed and stored in advance, which is part of the secret to fast query performance of Analysis Services.</span></span>  
  
 <span data-ttu-id="26bbc-145">![すべてのメンバーが呼び出されたピボットテーブル](../media/ssas-keyconcepts-pivot2-allmember.png "すべてのメンバーが呼び出されたピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-145">![PivotTable with all member called out](../media/ssas-keyconcepts-pivot2-allmember.png "PivotTable with all member called out")</span></span>  
  
 <span data-ttu-id="26bbc-146">階層を展開すると、最終的に、最下位レベルに到達します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-146">Expand the hierarchy, and eventually you get to the lowest level.</span></span> <span data-ttu-id="26bbc-147">これは **リーフ メンバー**と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-147">This is called the **leaf member**.</span></span> <span data-ttu-id="26bbc-148">リーフ メンバーは、子が存在しない階層のメンバーです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-148">A leaf member is a member of a hierarchy that has no children.</span></span> <span data-ttu-id="26bbc-149">この例では、Australia がリーフ メンバーです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-149">In this example, Australia is the leaf member.</span></span>  
  
 <span data-ttu-id="26bbc-150">![リーフ メンバーが呼び出されたピボットテーブル](../media/ssas-keyconcepts-pivot3-leafparent.PNG "リーフ メンバーが呼び出されたピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-150">![PivotTable with leaf member calle dout](../media/ssas-keyconcepts-pivot3-leafparent.PNG "PivotTable with leaf member calle dout")</span></span>  
  
 <span data-ttu-id="26bbc-151">上位にあるものは **親メンバー**と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-151">Anything above it is called a **parent member**.</span></span> <span data-ttu-id="26bbc-152">Pacific は Australia の親です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-152">Pacific is the parent of Australia.</span></span>  
  
 <span data-ttu-id="26bbc-153">**属性階層の構成要素**</span><span class="sxs-lookup"><span data-stu-id="26bbc-153">**Components of an attribute hierarchy**</span></span>  
  
 <span data-ttu-id="26bbc-154">総じて、これらの概念のすべてが **属性階層**という概念を作り上げています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-154">Together, all these concepts build towards the concept of an **attribute hierarchy**.</span></span> <span data-ttu-id="26bbc-155">属性階層は、さまざまな属性メンバーからなる 1 つのツリー構造であり、それには以下のレベルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-155">An attribute hierarchy is a tree of attribute members containing the following levels:</span></span>  
  
-   <span data-ttu-id="26bbc-156">リーフ レベル。個別の属性メンバーが含まれています。リーフ レベルの各メンバーを **リーフ メンバー**ともいいます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-156">A leaf level that contains each distinct attribute member, with each member of the leaf level also known as a **leaf member**.</span></span>  
  
-   <span data-ttu-id="26bbc-157">属性階層が親子階層の場合の中間レベル (詳細は後述)。</span><span class="sxs-lookup"><span data-stu-id="26bbc-157">Intermediate levels if the attribute hierarchy is a parent-child hierarchy (more on that later).</span></span>  
  
-   <span data-ttu-id="26bbc-158">すべての子属性の集計値を含む (すべての) メンバー。</span><span class="sxs-lookup"><span data-stu-id="26bbc-158">An (All) member that contains the aggregated value of all the child attributes.</span></span> <span data-ttu-id="26bbc-159">必要に応じて、データが意味を持たない場合に、(All) レベルを非表示にしたり、無効にしたりすることができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-159">Optionally, you can hide or turn off the (All) level when it doesn't make sense for the data.</span></span> <span data-ttu-id="26bbc-160">たとえば、製品コードは数値ですが、合計または平均を意味したり、すべての製品コードを集計したりすることは意味がありません。</span><span class="sxs-lookup"><span data-stu-id="26bbc-160">For example, although Product Code is numeric, it wouldn't make sense to sum or average or otherwise aggregate all of the Product Codes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="26bbc-161">BI 開発者の多くは、クライアント アプリケーションで特定の動作を実現するためや特定のパフォーマンス メリットを得るために、属性階層のプロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-161">BI developers often set properties on the attribute hierarchy to achieve certain behaviors in client applications, or gain certain performance benefits.</span></span> <span data-ttu-id="26bbc-162">たとえば、(All) メンバーが意味を持たない属性に対しては、AttributeHierarchyEnabled = False を設定します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-162">For example, you would set AttributeHierarchyEnabled=False on attributes for which the (All) member doesn't make sense.</span></span> <span data-ttu-id="26bbc-163">または、(すべての) メンバーを非表示にするだけなら、AttributeHierarchyVisible=False を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-163">Alternatively, perhaps you simply want to hide the (All) member, in which case you would set AttributeHierarchyVisible=False.</span></span> <span data-ttu-id="26bbc-164">プロパティの詳細については、「 [Dimension Attribute Properties Reference](dimension-attribute-properties-reference.md) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="26bbc-164">See [Dimension Attribute Properties Reference](dimension-attribute-properties-reference.md) for more details about properties.</span></span>  
  
## <a name="navigation-hierarchies"></a><span data-ttu-id="26bbc-165">ナビゲーション階層</span><span class="sxs-lookup"><span data-stu-id="26bbc-165">Navigation Hierarchies</span></span>  
 <span data-ttu-id="26bbc-166">ピボットテーブル (少なくともこの例の) では、行軸と列軸を展開すると、下位レベルの属性が表示されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-166">Within the PivotTable (at least in this example), row and column axes expand to show lower levels of attributes.</span></span> <span data-ttu-id="26bbc-167">拡張可能なツリーは、モデル内に作成されたナビゲーション階層を通して実現されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-167">An expandable tree is achieved through navigation hierarchies that you create in a model.</span></span>  <span data-ttu-id="26bbc-168">AdventureWorks サンプル モデルでは、Sales Territory ディメンションに Country Group、Country、および Region の順で複数レベル階層が含まれています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-168">In the AdventureWorks sample model, the Sales Territory dimension has a multi-level hierarchy that begins with a Country Group, followed by Country, followed by Region.</span></span>  
  
 <span data-ttu-id="26bbc-169">ご存じのように、階層はピボットテーブルまたはその他のデータ要約オブジェクト内のナビゲーション パスを提供するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-169">As you can see, hierarchies are used to provide a navigation path in a PivotTable or other data summarization objects.</span></span> <span data-ttu-id="26bbc-170">これには均衡と不均衡という 2 つの基本的な種類があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-170">There are two basic types: balanced and unbalanced.</span></span>  
  
 <span data-ttu-id="26bbc-171">**均衡階層**</span><span class="sxs-lookup"><span data-stu-id="26bbc-171">**Balanced Hierarchies**</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="26bbc-172">![均衡階層が呼び出されたピボットテーブル](../media/ssas-keyconcepts-pivot4-balancedhierarchy.PNG "均衡階層が呼び出されたピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-172">![PivotTable with balanced hierarchy called out](../media/ssas-keyconcepts-pivot4-balancedhierarchy.PNG "PivotTable with balanced hierarchy called out")</span></span>|<span data-ttu-id="26bbc-173">**均衡階層** は、最上位メンバーと任意のリーフ メンバーの間のレベル数が等しい階層です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-173">A **balanced hierarchy** is a hierarchy in which the same number of levels exists between the top level and any leaf member.</span></span><br /><br /> <span data-ttu-id="26bbc-174">**自然階層** は基になるデータから自然に発生する階層です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-174">A **natural hierarchy** is one that emerges naturally from the underlying data.</span></span> <span data-ttu-id="26bbc-175">一般的な例は、それぞれの下位レベルが予想どおり親から派生する、国/地域/州や年/月/日などのカテゴリ/サブカテゴリ モデルです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-175">A common example is Country-Region-State or Year-Month-Date or Category-Subcategory-Model, where each subordinate level flows predictably from the parent.</span></span><br /><br /> <span data-ttu-id="26bbc-176">多次元モデルでは、ほとんどの階層が均衡階層で、その多くが自然階層でもあります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-176">In a multidimensional model, most hierarchies are balanced hierarchies, and many of them are also natural hierarchies.</span></span><br /><br /> <span data-ttu-id="26bbc-177">属性階層とよく対比される、もう 1 つの関連モデリング用語として、`user-defined hierarchy`があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-177">Another related modeling term is a `user-defined hierarchy`, often used as a contrast with attribute hierarchies.</span></span> <span data-ttu-id="26bbc-178">これは、属性を定義すると Analysis Services によって自動的に生成される属性階層とは対照的に、BI 開発者によって作成される階層を意味します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-178">It simply means a hierarchy created by the BI developer, as opposed to attribute hierarchies that are automatically generated by Analysis Services when you define an attribute.</span></span>|  
  
 <span data-ttu-id="26bbc-179">**不均衡階層**</span><span class="sxs-lookup"><span data-stu-id="26bbc-179">**Unbalanced Hierarchies**</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="26bbc-180">![不規則階層が呼び出されたピボットテーブル](../media/ssas-keyconcepts-pivot15-raggedhierarchy.PNG "不規則階層が呼び出されたピボットテーブル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-180">![PivotTable with ragged hierarchy called out](../media/ssas-keyconcepts-pivot15-raggedhierarchy.PNG "PivotTable with ragged hierarchy called out")</span></span>|<span data-ttu-id="26bbc-181">**不規則階層** または **不均衡階層** は、トップ レベル メンバーとリーフ メンバーの間に存在するレベルの数が一様でない階層です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-181">A **ragged hierarchy** or **unbalanced hierarchy** is a hierarchy in which different numbers of levels exist between the top level and the leaf members.</span></span> <span data-ttu-id="26bbc-182">ここでも、BI 開発者によって作成される階層ですが、この場合はデータにギャップがあります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-182">Again, it's a hierarchy created by the BI developer, but in this case there are gaps in the data.</span></span><br /><br /> <span data-ttu-id="26bbc-183">AdventureWorks サンプル モデルでは、United States に他の国には存在しない追加のレベル (Regions) が含まれている Sales Territory が不規則階層を表しています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-183">In the AdventureWorks sample model, Sales Territory illustrates a ragged hierarchy because the United States has an additional level (Regions) that does not exist for other countries in this example.</span></span><br /><br /> <span data-ttu-id="26bbc-184">不規則階層は、クライアント アプリケーションでうまく処理されない場合、BI 開発者が対処する必要があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-184">Ragged hierarchies are a challenge to BI developers if the client application does not handle ragged hierarchies in an elegant manner.</span></span> <span data-ttu-id="26bbc-185">Analysis Services モデルでは、複数レベルのデータ間のリレーションシップを明示的に定義することによって、レベル間のあいまいな関係性を排除した **親子階層** を構築できます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-185">In Analysis Services model, you can build a **parent-child hierarchy** that explicitly defines a relationship among multi-level data, eliminating any ambiguity as to how one level relates to the next.</span></span> <span data-ttu-id="26bbc-186">「 [Parent-Child Hierarchy](parent-child-dimension.md) 」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="26bbc-186">See [Parent-Child Hierarchy](parent-child-dimension.md) for details.</span></span>|  
  
## <a name="key-attributes"></a><span data-ttu-id="26bbc-187">キー属性</span><span class="sxs-lookup"><span data-stu-id="26bbc-187">Key Attributes</span></span>  
 <span data-ttu-id="26bbc-188">モデルは、キーとインデックスを使って関連付けを示す関連オブジェクトのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-188">Models are a collection of related objects that rely on keys and indexes to make the associations.</span></span> <span data-ttu-id="26bbc-189">Analysis Services モデルについても違いはありません。</span><span class="sxs-lookup"><span data-stu-id="26bbc-189">Analysis Services models are no different.</span></span> <span data-ttu-id="26bbc-190">ディメンション (リレーショナル モデルのテーブルに相当することを思い出してください) ごとに、キー属性が存在します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-190">For each dimension (recall it is equivalent to a table in a relational model), there is a key attribute.</span></span> <span data-ttu-id="26bbc-191">**キー属性** は、ファクト テーブル (メジャー グループ) に対する外部キー リレーションシップで使用されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-191">The **key attribute** is used in foreign key relationships to the fact table (measure group).</span></span> <span data-ttu-id="26bbc-192">ディメンション内のすべての非キー属性がキー属性に (直接的または間接的に) リンクされます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-192">All non-key attributes in the dimension are linked (directly or indirectly) to the key attribute.</span></span>  
  
 <span data-ttu-id="26bbc-193">必ずではありませんが、キー属性の多くは **粒度属性**でもあります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-193">Often, but not always, the key attribute is also the **Granularity Attribute**.</span></span> <span data-ttu-id="26bbc-194">粒度は、データ内の詳細または精度のレベルを表します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-194">Granularity refers to the level of detail or precision within the data.</span></span> <span data-ttu-id="26bbc-195">この場合も、一般的な例が理解の助けになります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-195">Again, a common example offers the quickest path to understanding.</span></span> <span data-ttu-id="26bbc-196">日付の値を考えてみましょう。日次売上の場合は、日付の値を日に設定する必要があります。売上予算の場合は、四半期ごとで十分ですが、分析データがスポーツ イベントのレース結果で構成されている場合は、粒度をミリ秒にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-196">Consider date values: For daily sales, you need date values specified to the day; for quotas, quarterly might be sufficient, but if your analytical data consists of race results from a sporting event, the grain might very well need to be milliseconds.</span></span> <span data-ttu-id="26bbc-197">データ値の精度のレベルが粒度です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-197">The level of precision in your data values is the grain.</span></span>  
  
 <span data-ttu-id="26bbc-198">通貨はもう1つの例です。金融アプリケーションでは、多くの小数点以下の通貨値を追跡する場合があります。一方、地元の学校のファンド調達担当者では、最も近いドルの値のみが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-198">Currency is another example: a financial application might track monetary values out to many decimal places, whereas your local school's fund raiser might only need values to the nearest dollar.</span></span> <span data-ttu-id="26bbc-199">粒度の理解は、不要なデータの保存を避けるという意味でも重要です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-199">Understanding grain is important because you want to avoid storing unnecessary data.</span></span> <span data-ttu-id="26bbc-200">詳細のレベルが分析に影響しない場合は、タイムスタンプからミリ秒を切り捨てる、または、売上高から少額を切り捨てることによって、ストレージと処理時間を節約することができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-200">Trimming milliseconds from a timestamp, or pennies from a sales amount, can save storage and processing time when that level of detail is not relevant to your analysis.</span></span>  
  
 <span data-ttu-id="26bbc-201">粒度属性を設定するには、SQL Server Data Tools 内のキューブ デザイナーの [ディメンションの使用法] タブを使用します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-201">To set the granularity attribute, use the Dimension Usage tab in Cube Designer in SQL Server Data Tools.</span></span> <span data-ttu-id="26bbc-202">AdventureWorks サンプル モデルでは、Date ディメンションのキー属性は Date キーです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-202">In the AdventureWorks sample model, the key attribute of the Date dimension is the Date key.</span></span> <span data-ttu-id="26bbc-203">Sales Orders の場合は、粒度属性がキー属性と等価です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-203">For Sales Orders, the granularity attribute is equivalent to the key attribute.</span></span> <span data-ttu-id="26bbc-204">Sales Targets の場合は、粒度のレベルが四半期ごとであり、それに応じて、粒度属性が Calendar Quarter に設定されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-204">For Sales Targets, the level of granularity is quarterly, and so the granularity attribute is set to Calendar Quarter, accordingly.</span></span>  
  
 <span data-ttu-id="26bbc-205">![粒度属性を示すモデル](../media/ssas-keyconcepts-granularityattrib.png "粒度属性を示すモデル")</span><span class="sxs-lookup"><span data-stu-id="26bbc-205">![Model showing the granularity attribute](../media/ssas-keyconcepts-granularityattrib.png "Model showing the granularity attribute")</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="26bbc-206">粒度属性とキー属性が異なる場合は、すべての非キー属性を直接的または間接的に粒度属性にリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-206">If the granularity attribute and the key attribute are different, all non-key attributes must be linked, directly or indirectly, to the granularity attribute.</span></span> <span data-ttu-id="26bbc-207">キューブ内ではディメンションの粒度が粒度属性で定義されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-207">Within a cube, the granularity attribute defines a dimension's granularity.</span></span>  
  
## <a name="query-scope-cube-space"></a><span data-ttu-id="26bbc-208">クエリ スコープ (キューブ空間)</span><span class="sxs-lookup"><span data-stu-id="26bbc-208">Query Scope (Cube Space)</span></span>  
 <span data-ttu-id="26bbc-209">クエリのスコープは、データが選択される境界を意味します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-209">Scope of a query refers to the boundaries within which data is being selected.</span></span> <span data-ttu-id="26bbc-210">これは、キューブ全体 (キューブは最大のクエリ オブジェクト) からセルまでの範囲になります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-210">It can range from the entire cube (a cube is the largest query object) to a cell.</span></span>  
  
 <span data-ttu-id="26bbc-211">**キューブ空間** は、そのキューブのメジャーを伴った、キューブの属性階層のメンバーから構成されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-211">**Cube space** is the product of the members of a cube's attribute hierarchies with the cube's measures.</span></span>  
  
 <span data-ttu-id="26bbc-212">**サブキューブ** は、キューブのフィルターを適用したビューを表す、キューブのサブセットです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-212">**Subcube** is a subset of a cube that represents a filtered view of the cube.</span></span> <span data-ttu-id="26bbc-213">サブキューブは、MDX 計算スクリプト内の Scope ステートメントを使用して、あるいは、MDX クエリ内のサブセレクト句で、または、セッション キューブとして定義することができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-213">Subcubes can be defined with a Scope statement in the MDX calculation script, or in a subselect clause in an MDX query or as a session cube.</span></span>  
  
 <span data-ttu-id="26bbc-214">**セル** は、メジャー ディメンション メンバーのメンバーとキューブ内の各属性階層からのメンバー間のスペースを意味します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-214">**Cell** refers to the space at the intersection of a member of the measures dimension member and a member from each attribute hierarchy in a cube.</span></span>  
  
## <a name="other-modeling-terms"></a><span data-ttu-id="26bbc-215">その他のモデリング用語</span><span class="sxs-lookup"><span data-stu-id="26bbc-215">Other Modeling Terms</span></span>  
 <span data-ttu-id="26bbc-216">このセクションは、他のセクションには簡単には記載されていない概念と用語をまとめたものですが、それでも理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="26bbc-216">This section is a collection of concepts and terms that don't fit easily into other sections, but you still need to know about.</span></span>  
  
 <span data-ttu-id="26bbc-217">**計算メンバー** は、クエリ実行時に定義と計算がなされるディメンション メンバーです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-217">**Calculated member** is a dimension member that is defined and calculated at query time.</span></span> <span data-ttu-id="26bbc-218">計算されるメンバーをユーザー クエリまたは MDX 計算スクリプトで定義して、サーバーに保存しておくことができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-218">A calculated member can be defined in a user query or in the MDX calculation script and stored on the server.</span></span> <span data-ttu-id="26bbc-219">計算されるメンバーは、その計算されるメンバーが定義されているディメンション内のディメンション テーブルの行と対応します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-219">A calculated member corresponds to rows in the dimension table of the dimension in which it is defined.</span></span>  
  
 <span data-ttu-id="26bbc-220">**個別カウント** は、1 度しかカウントされないデータ項目に使用される特殊なメジャーです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-220">**Distinct Count** is a special type of measure used for data items that should only be counted once.</span></span> <span data-ttu-id="26bbc-221">AdventureWorks サンプル モデルには、Internet Orders、Reseller Orders、および Sales Orders の個別カウント メジャーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="26bbc-221">The AdventureWorks sample model includes distinct count measures for Internet Orders, Reseller Orders, and Sales Orders.</span></span>  
  
 <span data-ttu-id="26bbc-222">**メジャー グループ** は、1 つ以上のメジャーのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-222">**Measure groups** are a collection of one or more measures.</span></span> <span data-ttu-id="26bbc-223">そのほとんどは、ユーザー定義であり、関連メジャーをまとめて保持するために使用します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-223">Mostly these are user-defined, and you use them to keep related measures together.</span></span> <span data-ttu-id="26bbc-224">個別カウント メジャーは例外です。</span><span class="sxs-lookup"><span data-stu-id="26bbc-224">Distinct count measures are an exception.</span></span> <span data-ttu-id="26bbc-225">このメジャーは、必ず、個別メジャーのみを含む専用のメジャー グループに配置されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-225">These are always placed in a dedicated measure group that contains only the distinct measure.</span></span> <span data-ttu-id="26bbc-226">ピボットテーブルの例の図ではメジャーグループを表示できませんが、メジャーの名前付きコレクションとしてピボットテーブルのフィールドリストに表示されます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-226">You can't see the measure group in the PivotTable example illustration, but it does appear in a PivotTable field list, as a named collection of measures.</span></span>  
  
 <span data-ttu-id="26bbc-227">**メジャー ディメンション** は、キューブ内のすべてのメジャーを含むディメンションです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-227">**Measures dimension** is the dimension that contains all of the measures in a cube.</span></span> <span data-ttu-id="26bbc-228">SQL Server Data Tools で構築する多次元モデルでは公開されませんが、まったく同じように存在します。</span><span class="sxs-lookup"><span data-stu-id="26bbc-228">It's not exposed in a multidimensional model that you build in SQL Server Data Tools, but it exists just the same.</span></span> <span data-ttu-id="26bbc-229">これにはメジャーが含まれているため、通常は、メジャー ディメンションのすべてのメンバーが集計されます (合計またはカウントによって)。</span><span class="sxs-lookup"><span data-stu-id="26bbc-229">Because it contains measures, all of the members of a measures dimension are typically aggregated (generally by sum or by count).</span></span>  
  
 <span data-ttu-id="26bbc-230">**データベース ディメンションとキューブ ディメンション**。</span><span class="sxs-lookup"><span data-stu-id="26bbc-230">**Database Dimensions and Cube Dimensions**.</span></span> <span data-ttu-id="26bbc-231">モデル内では、スタンドアロン ディメンションを定義して、同じモデル内の任意の数のキューブに含めることができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-231">Within a model, you can define standalone dimensions that are then included in any number of cubes in the same model.</span></span> <span data-ttu-id="26bbc-232">キューブにディメンションを追加すると、キューブディメンションと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-232">When you add a dimension to a cube, it's called a cube dimension.</span></span> <span data-ttu-id="26bbc-233">プロジェクト内では、オブジェクトエクスプローラーのスタンドアロンアイテムとして、データベースディメンションと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-233">By itself within a project, as a standalone item in Object Explorer, it's called a database dimension.</span></span> <span data-ttu-id="26bbc-234">どうして区別が必要なのでしょうか。</span><span class="sxs-lookup"><span data-stu-id="26bbc-234">Why make the distinction?</span></span> <span data-ttu-id="26bbc-235">それは、それぞれに独立的にプロパティを設定できるからです。</span><span class="sxs-lookup"><span data-stu-id="26bbc-235">Because you can set properties on them independently.</span></span> <span data-ttu-id="26bbc-236">製品ドキュメントでは、両方の用語が使用されているので、その意味を理解しておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="26bbc-236">In product documentation, you'll see both terms used, so it's worthwhile to understand what they mean.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="26bbc-237">次の手順</span><span class="sxs-lookup"><span data-stu-id="26bbc-237">Next Steps</span></span>  
 <span data-ttu-id="26bbc-238">これで、重要な概念と用語が理解できたところで、Analysis Services の基本的な概念をさらに詳しく説明している以下のトピックに進むことができます。</span><span class="sxs-lookup"><span data-stu-id="26bbc-238">Now that you have a grasp of important concepts and terminology, you can continue on to these additional topics that further explain fundamental concepts in Analysis Services:</span></span>  
  
-   [<span data-ttu-id="26bbc-239">MDX の基本的なクエリ &#40;MDX&#41;</span><span class="sxs-lookup"><span data-stu-id="26bbc-239">The Basic MDX Query &#40;MDX&#41;</span></span>](mdx/mdx-query-the-basic-query.md)  
  
-   [<span data-ttu-id="26bbc-240">基本的な MDX スクリプト &#40;MDX&#41;</span><span class="sxs-lookup"><span data-stu-id="26bbc-240">The Basic MDX Script &#40;MDX&#41;</span></span>](mdx/the-basic-mdx-script-mdx.md)  
  
-   [<span data-ttu-id="26bbc-241">多次元モデリング (Adventure Works チュートリアル)</span><span class="sxs-lookup"><span data-stu-id="26bbc-241">Multidimensional Modeling &#40;Adventure Works Tutorial&#41;</span></span>](../multidimensional-modeling-adventure-works-tutorial.md)  
  
## <a name="see-also"></a><span data-ttu-id="26bbc-242">参照</span><span class="sxs-lookup"><span data-stu-id="26bbc-242">See Also</span></span>  
 <span data-ttu-id="26bbc-243">[キューブ空間](mdx/cube-space.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-243">[Cube Space](mdx/cube-space.md) </span></span>  
 <span data-ttu-id="26bbc-244">[組](mdx/tuples.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-244">[Tuples](mdx/tuples.md) </span></span>  
 <span data-ttu-id="26bbc-245">[Autoexists](mdx/autoexists.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-245">[Autoexists](mdx/autoexists.md) </span></span>  
 <span data-ttu-id="26bbc-246">[MDX&#41;&#40;メンバー、組、およびセットの操作](mdx/working-with-members-tuples-and-sets-mdx.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-246">[Working with Members, Tuples, and Sets &#40;MDX&#41;](mdx/working-with-members-tuples-and-sets-mdx.md) </span></span>  
 <span data-ttu-id="26bbc-247">[ビジュアルの合計と非表示の合計](mdx/visual-totals-and-non-visual-totals.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-247">[Visual Totals and Non Visual Totals](mdx/visual-totals-and-non-visual-totals.md) </span></span>  
 <span data-ttu-id="26bbc-248">[MDX クエリの基礎 &#40;Analysis Services&#41;](mdx/mdx-query-fundamentals-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-248">[MDX Query Fundamentals &#40;Analysis Services&#41;](mdx/mdx-query-fundamentals-analysis-services.md) </span></span>  
 <span data-ttu-id="26bbc-249">[MDX スクリプティングの基礎 &#40;Analysis Services&#41;](mdx/mdx-scripting-fundamentals-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="26bbc-249">[MDX Scripting Fundamentals &#40;Analysis Services&#41;](mdx/mdx-scripting-fundamentals-analysis-services.md) </span></span>  
 <span data-ttu-id="26bbc-250">[Mdx 言語リファレンス &#40;MDX&#41;](/sql/mdx/mdx-language-reference-mdx) </span><span class="sxs-lookup"><span data-stu-id="26bbc-250">[MDX Language Reference &#40;MDX&#41;](/sql/mdx/mdx-language-reference-mdx) </span></span>  
 [<span data-ttu-id="26bbc-251">多次元式 &#40;MDX&#41; リファレンス</span><span class="sxs-lookup"><span data-stu-id="26bbc-251">Multidimensional Expressions &#40;MDX&#41; Reference</span></span>](/sql/mdx/multidimensional-expressions-mdx-reference)  
  
  
