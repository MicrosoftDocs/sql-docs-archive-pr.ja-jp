---
title: 欠損値 (Analysis Services-データマイニング) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- attributes [data mining]
- MISSING_VALUE_SUBSTITUTION
- MissingValueSubstitution property
- MISSING_VALUE_SUBSTITUTION parameter
- null values [Analysis Services]
- coding [Data Mining]
ms.assetid: 2b34abdc-7ed4-4ec1-8780-052a704d6dbe
author: minewiskan
ms.author: owend
ms.openlocfilehash: 91bc709d61c786c165711cfdb31ff696456997ff
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87641906"
---
# <a name="missing-values-analysis-services---data-mining"></a><span data-ttu-id="3bb0d-102">不足値 (Analysis Services - データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3bb0d-102">Missing Values (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="3bb0d-103">*不足値* の適切な処理は効果的なモデル化の重要な部分です。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-103">Handling  *missing values* correctly is an important part of effective modeling.</span></span> <span data-ttu-id="3bb0d-104">このセクションでは、不足値を定義すると共に、データ マイニング構造およびマイニング モデルの作成時に [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] が提供する不足値の処理機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-104">This section explains what missing values are, and describes the features provided in [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] to work with missing values when building data mining structures and mining models.</span></span>  
  
## <a name="definition-of-missing-values-in-data-mining"></a><span data-ttu-id="3bb0d-105">データ マイニングにおける不足値の定義</span><span class="sxs-lookup"><span data-stu-id="3bb0d-105">Definition of Missing Values in Data Mining</span></span>  
 <span data-ttu-id="3bb0d-106">不足値は、さまざまな状況を表します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-106">A missing value can signify a number of different things.</span></span> <span data-ttu-id="3bb0d-107">たとえば、フィールドが該当しなかった、イベントが発生しなかった、データを使用できなかった、</span><span class="sxs-lookup"><span data-stu-id="3bb0d-107">Perhaps the field was not applicable, the event did not happen, or the data was not available.</span></span> <span data-ttu-id="3bb0d-108">データの入力者が正しい値を知らなかった、入力者がフィールドにデータが入力されていなくてもかまわないと考えた、などです。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-108">It could be that the person who entered the data did not know the right value, or did not care if a field was not filled in.</span></span>  
  
 <span data-ttu-id="3bb0d-109">一方、不足値が重要な情報を提供するデータ マイニング シナリオが数多く存在します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-109">However, there are many data mining scenarios in which missing values provide important information.</span></span> <span data-ttu-id="3bb0d-110">このように、不足値の意味は文脈によって大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-110">The meaning of the missing values depends largely on context.</span></span> <span data-ttu-id="3bb0d-111">たとえば、請求書の一覧で日付が不足値である場合と、従業員の雇用開始日を示す列の日付が欠落している場合とでは、大きな意味の違いがあります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-111">For example, a missing value for the date in a list of invoices has a meaning substantially different from the lack of a date in column that indicates an employee hire date.</span></span> <span data-ttu-id="3bb0d-112">通常、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では不足値が有益なデータとして扱われ、不足値を計算に含めるために確率が調整されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-112">Generally, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] treats missing values as informative and adjusts the probabilities to incorporate the missing values into its calculations.</span></span> <span data-ttu-id="3bb0d-113">これにより、既存のケースに偏ったモデルにならないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-113">By doing so, you can ensure that models are balanced and do not weight existing cases too heavily.</span></span>  
  
 <span data-ttu-id="3bb0d-114">そのため、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では、不足値を管理および計算するための、明確に異なる 2 つのメカニズムを提供しています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-114">Therefore, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] provides two distinctly different mechanisms for managing and calculating missing values.</span></span> <span data-ttu-id="3bb0d-115">最初の方法では、マイニング構造のレベルで null の処理を制御します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-115">The first method controls the handling of nulls at the level of the mining structure.</span></span> <span data-ttu-id="3bb0d-116">2 番目の方法ではアルゴリズムによって実装が異なりますが、一般に、null 値が使用できるモデルでの不足値の処理方法やカウント方法が定義されています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-116">The second method differs in implementation for each algorithm, but generally defines how missing values are processed and counted in models that permit null values.</span></span>  
  
## <a name="specifying-handling-of-nulls"></a><span data-ttu-id="3bb0d-117">Null 値の処理の指定</span><span class="sxs-lookup"><span data-stu-id="3bb0d-117">Specifying Handling of Nulls</span></span>  
 <span data-ttu-id="3bb0d-118">データ ソースで、不足値はさまざまな形式で表されます。null 値、スプレッドシートの空のセル、N/A という値やその他のコード、または 9999 などの人工的な値が使用される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-118">In your data source, missing values might be represented in many ways: as nulls, as empty cells in a spreadsheet, as the value N/A or some other code, or as an artificial value such as 9999.</span></span> <span data-ttu-id="3bb0d-119">しかし、データ マイニングの目的では、null 値のみが不足値として扱われます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-119">However, for purposes of data mining, only nulls are considered missing values.</span></span> <span data-ttu-id="3bb0d-120">データ内に null ではなくプレースホルダー値が含まれていると、モデルの結果に影響を与えることがあるため、null に置き換えるか、可能であれば正しい値を推測して置き換えてください。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-120">If your data contains placeholder values instead of nulls, they can affect the results of the model, so you should replace them with nulls or infer correct values if possible.</span></span> <span data-ttu-id="3bb0d-121">適切な値を推定して入力するためには、SQL Server Integration Services の参照変換または Data Profiler タスクや、Excel 用データ マイニング アドインの Fill By Example ツールなど、さまざまなツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-121">There are a variety of tools that you can use to infer and fill in appropriate values, such as the Lookup transformation or the Data Profiler task in SQL Server Integration Services, or the Fill By Example tool provided in the Data Mining Add-Ins for Excel.</span></span>  
  
 <span data-ttu-id="3bb0d-122">列に不足値があってはならないタスクをモデル化している場合は、マイニング構造を定義するときに `NOT_NULL` モデリング フラグを列に適用します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-122">If the task that you are modeling specifies that a column must never have missing values, you should apply the `NOT_NULL` modeling flag to the column when you define the mining structure.</span></span> <span data-ttu-id="3bb0d-123">このフラグにより、ケースに適切な値がない場合は処理が失敗するように指定されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-123">This flag indicates that processing should fail if a case does not have an appropriate value.</span></span> <span data-ttu-id="3bb0d-124">モデルの処理中にこのエラーが発生した場合は、そのエラーをログに記録して、モデルに入力されたデータを修正することができます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-124">If this error occurs when processing a model, you can log the error and take steps to correct the data that is supplied to the model.</span></span>  
  
## <a name="calculation-of-the-missing-state"></a><span data-ttu-id="3bb0d-125">不足状態の計算</span><span class="sxs-lookup"><span data-stu-id="3bb0d-125">Calculation of the Missing State</span></span>  
 <span data-ttu-id="3bb0d-126">データ マイニング アルゴリズムにとって不足値は有益なデータであり、</span><span class="sxs-lookup"><span data-stu-id="3bb0d-126">To the data mining algorithm, missing values are informative.</span></span> <span data-ttu-id="3bb0d-127">ケース テーブルにおいて `Missing` は他の状態と同様の有効な状態です。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-127">In case tables, `Missing` is a valid state like any other.</span></span> <span data-ttu-id="3bb0d-128">さらに、データ マイニング モデルでは他の値を使用して値が不足するかどうかを予測できます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-128">Moreover, a data mining model can use other values to predict whether a value is missing.</span></span> <span data-ttu-id="3bb0d-129">要するに、値が不足していることはエラーではありません。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-129">In other words, the fact that a value is missing is not an error.</span></span>  
  
 <span data-ttu-id="3bb0d-130">マイニング モデルを作成すると、すべての不連続列についてモデルに `Missing` 状態が自動的に追加されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-130">When you create a mining model, a `Missing` state is automatically added to the model for all discrete columns.</span></span> <span data-ttu-id="3bb0d-131">たとえば、入力列 [Gender] に Male と Female の 2 つの可能な値が含まれている場合、`Missing` 値を表すために 3 つ目の値が自動的に追加されます。また、その列のすべての値の分布を示すヒストグラムには、`Missing` 値を持つケースの数が常に含まれます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-131">For example, if the input column [Gender] contains two possible values, Male and Female, a third value is automatically added to represent the `Missing` value, and the histogram that shows the distribution of all values for the column always includes a count of the cases with `Missing` values.</span></span> <span data-ttu-id="3bb0d-132">Gender 列に値の不足がない場合は、Missing 状態が見つかったケースの数が 0 としてヒストグラムに示されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-132">If the Gender column is not missing any values, the histogram shows that the Missing state is found in 0 cases.</span></span>  
  
 <span data-ttu-id="3bb0d-133">既定に `Missing` 状態を含めると、可能な値の例をデータ内で完全に網羅したとは考えられない場合に、データに例が含まれていないというだけの理由でその可能性がモデルから排除されないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-133">The rationale for including the `Missing` state by default becomes clear when you consider that your data might not have examples of all possible values, and you would not want the model to exclude the possibility just because there was no example in the data.</span></span> <span data-ttu-id="3bb0d-134">たとえば、店舗の売上データで、特定の製品を購入した顧客がたまたますべて女性だったからと言って、その製品は女性しか購入しないと予測するモデルが作成されるようでは問題があります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-134">For example, if sales data for a store showed that all customers who purchased a certain product happened to be women, you would not want to create a model that predicts that only women could purchase the product.</span></span> <span data-ttu-id="3bb0d-135">これに対して [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では、可能なその他の状態を考慮に入れるための手段として、`Missing` という追加の不明な値のためのプレースホルダーが追加されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-135">Instead, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] adds a placeholder for the extra unknown value, called `Missing`, as a way of accommodating possible other states.</span></span>  
  
 <span data-ttu-id="3bb0d-136">たとえば次の表は、Bike Buyer チュートリアルのために作成されたデシジョン ツリー モデルの (すべて) ノードの値の分布を示しています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-136">For example, the following table shows the distribution of values for the (All) node in the decision tree model created for the Bike Buyer tutorial.</span></span> <span data-ttu-id="3bb0d-137">この例のシナリオでは、[Bike Buyer] 列は予測可能な属性です。1 は "Yes" を表し、0 は "No" を表します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-137">In the example scenario, the [Bike Buyer] column is the predictable attribute, where 1 indicates "Yes" and 0 indicates "No".</span></span>  
  
|<span data-ttu-id="3bb0d-138">値</span><span class="sxs-lookup"><span data-stu-id="3bb0d-138">Value</span></span>|<span data-ttu-id="3bb0d-139">ケース</span><span class="sxs-lookup"><span data-stu-id="3bb0d-139">Cases</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="3bb0d-140">0</span><span class="sxs-lookup"><span data-stu-id="3bb0d-140">0</span></span>|<span data-ttu-id="3bb0d-141">9296</span><span class="sxs-lookup"><span data-stu-id="3bb0d-141">9296</span></span>|  
|<span data-ttu-id="3bb0d-142">1</span><span class="sxs-lookup"><span data-stu-id="3bb0d-142">1</span></span>|<span data-ttu-id="3bb0d-143">9098</span><span class="sxs-lookup"><span data-stu-id="3bb0d-143">9098</span></span>|  
|<span data-ttu-id="3bb0d-144">Missing</span><span class="sxs-lookup"><span data-stu-id="3bb0d-144">Missing</span></span>|<span data-ttu-id="3bb0d-145">0</span><span class="sxs-lookup"><span data-stu-id="3bb0d-145">0</span></span>|  
  
 <span data-ttu-id="3bb0d-146">この分布からは、自転車を購入した顧客と購入しなかった顧客の数がほぼ半々であることがわかります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-146">This distribution shows that about half of the customers have purchased a bike, and half have not.</span></span> <span data-ttu-id="3bb0d-147">このデータセットは完璧であるため、すべてのケースが [Bike Buyer] 列の値を持ち、`Missing` 値の数は 0 になっています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-147">This particular data set is very clean; therefore, every case has a value in the [Bike Buyer] column, and the count of `Missing` values is 0.</span></span> <span data-ttu-id="3bb0d-148">ただし、いずれかのケースで [自転車購入者] フィールドに null が含まれている場合、では、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] その行が値を持つケースとしてカウントさ `Missing` れます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-148">However, if any case had a null in the [Bike Buyer] field, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] would count that row as a case with a `Missing` value.</span></span>  
  
 <span data-ttu-id="3bb0d-149">入力が連続列の場合には、この属性に対して `Existing` と `Missing` の 2 つの可能な状態が適用されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-149">If the input is a continuous column, the model tabulates two possible states for the attribute: `Existing` and `Missing`.</span></span> <span data-ttu-id="3bb0d-150">つまり、その列に何らかの数値データ型の値が含まれているか、値が何も含まれていないかのいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-150">In other words, either the column contains a value of some numeric data type, or it contains no value.</span></span> <span data-ttu-id="3bb0d-151">値があるケースの場合は、平均、標準偏差、およびその他の意味のある統計がモデルで計算されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-151">For cases that have a value, the model calculates mean, standard deviation, and other meaningful statistics.</span></span> <span data-ttu-id="3bb0d-152">値がないケースの場合は、`Missing` 値の数がカウントされ、それに基づいて予測が調整されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-152">For cases that have no value, the model provides a count of the `Missing` vales and adjusts predictions accordingly.</span></span> <span data-ttu-id="3bb0d-153">予測を調整する方法はアルゴリズムによって異なります。詳細については次のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-153">The method for adjusting the prediction differs depending on the algorithm and is described in the following section.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3bb0d-154">入れ子になったテーブルの属性では、不足値は有益なデータにはなりません。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-154">For attributes in a nested table, missing values are not informative.</span></span> <span data-ttu-id="3bb0d-155">たとえば、顧客が製品を購入していない場合は、入れ子になった **Products** テーブルにその製品に対応する行は含まれず、マイニング モデルでその不足している製品の属性は作成されません。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-155">For example, if a customer has not purchased a product, the nested **Products** table would not have a row corresponding to that product, and the mining model would not create an attribute for the missing product.</span></span> <span data-ttu-id="3bb0d-156">ただし、特定の製品を購入していない顧客に関心がある場合は、モデル フィルターで NOT EXISTS ステートメントを使用することにより、入れ子になったテーブルにその製品が存在しないという属性に基づいてフィルター処理されるモデルを作成できます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-156">However, if you are interested in customers who have not purchased certain products, you can create a model that is filtered on the non-existence of the products in the nested table, by using a NOT EXISTS statement in the model filter.</span></span> <span data-ttu-id="3bb0d-157">詳細については、「 [マイニング モデルへのフィルターの適用](apply-a-filter-to-a-mining-model.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-157">For more information, see [Apply a Filter to a Mining Model](apply-a-filter-to-a-mining-model.md).</span></span>  
  
## <a name="adjusting-probability-for-missing-states"></a><span data-ttu-id="3bb0d-158">不足状態のための確率の調整</span><span class="sxs-lookup"><span data-stu-id="3bb0d-158">Adjusting Probability for Missing States</span></span>  
 <span data-ttu-id="3bb0d-159">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] では、値がカウントされるだけでなく、データセット全体での値の確率も計算されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-159">In addition to counting values, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] calculates the probability of any value across the data set.</span></span> <span data-ttu-id="3bb0d-160">これは、`Missing` 値にも当てはまります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-160">The same is true for the `Missing` value.</span></span> <span data-ttu-id="3bb0d-161">たとえば次の表は、前の例のケースの確率を示しています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-161">For example, the following table shows the probabilities for the cases in the previous example:</span></span>  
  
|<span data-ttu-id="3bb0d-162">値</span><span class="sxs-lookup"><span data-stu-id="3bb0d-162">Value</span></span>|<span data-ttu-id="3bb0d-163">ケース</span><span class="sxs-lookup"><span data-stu-id="3bb0d-163">Cases</span></span>|<span data-ttu-id="3bb0d-164">確率</span><span class="sxs-lookup"><span data-stu-id="3bb0d-164">Probability</span></span>|  
|-----------|-----------|-----------------|  
|<span data-ttu-id="3bb0d-165">0</span><span class="sxs-lookup"><span data-stu-id="3bb0d-165">0</span></span>|<span data-ttu-id="3bb0d-166">9296</span><span class="sxs-lookup"><span data-stu-id="3bb0d-166">9296</span></span>|<span data-ttu-id="3bb0d-167">50.55%</span><span class="sxs-lookup"><span data-stu-id="3bb0d-167">50.55%</span></span>|  
|<span data-ttu-id="3bb0d-168">1</span><span class="sxs-lookup"><span data-stu-id="3bb0d-168">1</span></span>|<span data-ttu-id="3bb0d-169">9098</span><span class="sxs-lookup"><span data-stu-id="3bb0d-169">9098</span></span>|<span data-ttu-id="3bb0d-170">49.42%</span><span class="sxs-lookup"><span data-stu-id="3bb0d-170">49.42%</span></span>|  
|<span data-ttu-id="3bb0d-171">Missing</span><span class="sxs-lookup"><span data-stu-id="3bb0d-171">Missing</span></span>|<span data-ttu-id="3bb0d-172">0</span><span class="sxs-lookup"><span data-stu-id="3bb0d-172">0</span></span>|<span data-ttu-id="3bb0d-173">0.03%</span><span class="sxs-lookup"><span data-stu-id="3bb0d-173">0.03%</span></span>|  
  
 <span data-ttu-id="3bb0d-174">`Missing` 値の確率が、ケースの数が 0 なのに 0.03% として計算されているのは奇妙に見えるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-174">It may seem odd that the probability of the `Missing` value is calculated as 0.03%, when the number of cases is 0.</span></span> <span data-ttu-id="3bb0d-175">実のところ、この動作は意図的なものであり、モデルで不明な値を適切に処理できるようにするための調整を表しています。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-175">In fact, this behavior is by design, and represents an adjustment that lets the model handle unknown values gracefully.</span></span>  
  
 <span data-ttu-id="3bb0d-176">一般に確率は、好ましいケースをすべての可能なケースで割ることによって計算されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-176">In general, probability is calculated as the favorable cases divided by all possible cases.</span></span> <span data-ttu-id="3bb0d-177">この例の場合は、特定の条件 ([Bike Buyer] = 1 または [Bike Buyer] = 0) を満たすケースの合計を計算し、その数を行の合計数で割ります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-177">In this example, the algorithm computes the sum of the cases that meet a particular condition ([Bike Buyer] = 1, or [Bike Buyer] = 0), and divides that number by the total count of rows.</span></span> <span data-ttu-id="3bb0d-178">ただしここでは、`Missing` のケースを計算に入れるために、すべての可能なケースの数に 1 が追加されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-178">However, to account for the `Missing` cases, 1 is added to the number of all possible cases.</span></span> <span data-ttu-id="3bb0d-179">その結果、不明なケースの確率は、0 ではなくごく小さな値になります。これにより、その状態がありそうにないだけで、あり得なくはないことが示されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-179">As a result, the probability for the unknown case is no longer zero, but a very small number, indicating that the state is merely improbable, not impossible.</span></span>  
  
 <span data-ttu-id="3bb0d-180">小さな `Missing` 値が追加されても予測子の結果は変わりませんが、過去のデータにすべての考えられる結果が含まれてはいないシナリオで、モデリングを改善することが可能になります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-180">The addition of the small `Missing` value does not change the outcome of the predictor; however, it enables better modeling in scenarios where the historical data does not include all possible outcomes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3bb0d-181">不足値を処理する方法はデータ マイニング プロバイダーによって異なります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-181">Data mining providers differ in the way they handle missing values.</span></span> <span data-ttu-id="3bb0d-182">たとえば、入れ子になった列の不足しているデータはスパース表現だが、入れ子になっていない列ではそのデータが不規則に不足していると想定するプロバイダーもあります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-182">For example, some providers assume that missing data in a nested column is sparse representation, but that missing data in a non-nested column is missing at random.</span></span>  
  
 <span data-ttu-id="3bb0d-183">データですべての結果が指定されていることがわかっている場合に、確率が調整されないようにするには、マイニング構造の列で NOT_NULL モデリング フラグを設定します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-183">If you are certain that all outcomes are specified in your data and want to prevent probabilities from being adjusted, you should set the NOT_NULL modeling flag on the column in the mining structure.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="3bb0d-184">不足値の処理方法は、アルゴリズム (サード パーティ プラグインから入手したカスタム アルゴリズムを含む) ごとに異なる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-184">Each algorithm, including custom algorithms that you may have obtained from a third-party plug-in, can handle missing values differently.</span></span>  
  
### <a name="special-handling-of-missing-values-in-decision-tree-models"></a><span data-ttu-id="3bb0d-185">デシジョン ツリー モデルにおける不足値の特別な処理</span><span class="sxs-lookup"><span data-stu-id="3bb0d-185">Special Handling of Missing Values in Decision Tree Models</span></span>  
 <span data-ttu-id="3bb0d-186">Microsoft デシジョン ツリー アルゴリズムによる不足値の確率の計算方法は、他のアルゴリズムと異なります。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-186">The Microsoft Decision Trees algorithm calculates probabilities for missing values differently than in other algorithms.</span></span> <span data-ttu-id="3bb0d-187">デシジョン ツリー アルゴリズムでは、ケースの合計数に単純に 1 を追加する代わりに、若干異なる式を使用して `Missing` 状態のための調整を行います。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-187">Instead of just adding 1 to the total number of cases, the decision trees algorithm adjusts for the `Missing` state by using a slightly different formula.</span></span>  
  
 <span data-ttu-id="3bb0d-188">`Missing` 状態の確率は、デシジョン ツリー モデルでは次のように計算されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-188">In a decision tree model, the probability of the `Missing` state is calculated as follows:</span></span>  
  
 <span data-ttu-id="3bb0d-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span><span class="sxs-lookup"><span data-stu-id="3bb0d-189">StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStates)</span></span>  
  
 <span data-ttu-id="3bb0d-190">さらに、 [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)]のデシジョン ツリー アルゴリズムでは、モデルのフィルターの存在を補正するための追加の調整が行われます (フィルターが存在すると、トレーニングの間に多くの状態が除外される可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-190">Moreover, in [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)], the Decision Trees algorithm provides an additional adjustment that helps the algorithm compensate for the presence of filters on the model, which may result in many states to be excluded during training.</span></span>  
  
 <span data-ttu-id="3bb0d-191">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]では、状態がトレーニング中に存在したが、たまたま特定のノードのサポートが 0 だったという場合には、標準の調整が行われます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-191">In [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], if a state is present during training but just happens to have zero support in a certain node, the standard adjustment is made.</span></span> <span data-ttu-id="3bb0d-192">一方、トレーニング中に状態が一度も検出されなかった場合には、その確率が厳密に 0 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-192">However, if a state is never encountered during training, the algorithm sets the probability to exactly zero.</span></span> <span data-ttu-id="3bb0d-193">この調整は `Missing` 状態だけでなく、トレーニング データに存在するがモデル フィルターの結果としてサポートが 0 になるその他の状態にも適用されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-193">This adjustment applies not only to the `Missing` state, but also to other states that exist in the training data but have zero support as result of model filtering.</span></span>  
  
 <span data-ttu-id="3bb0d-194">この追加の調整の結果となる式を次に示します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-194">This additional adjustment results in the following formula:</span></span>  
  
 <span data-ttu-id="3bb0d-195">トレーニング セットでその状態のサポートが 0 の場合、StateProbability = 0.0</span><span class="sxs-lookup"><span data-stu-id="3bb0d-195">StateProbability = 0.0 if that state has 0 support in the training set</span></span>  
  
 <span data-ttu-id="3bb0d-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span><span class="sxs-lookup"><span data-stu-id="3bb0d-196">ELSE StateProbability = (NodePriorProbability)\* (StateSupport + 1) / (NodeSupport + TotalStatesWithNonZeroSupport)</span></span>  
  
 <span data-ttu-id="3bb0d-197">この調整の最終的な効果として、ツリーの安定性が維持されます。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-197">The net effect of this adjustment is to maintain the stability of the tree.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="3bb0d-198">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="3bb0d-198">Related Tasks</span></span>  
 <span data-ttu-id="3bb0d-199">次のトピックでは、不足値の処理方法の詳細について説明します。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-199">The following topics provide more information about how to handle missing values.</span></span>  
  
|<span data-ttu-id="3bb0d-200">タスク</span><span class="sxs-lookup"><span data-stu-id="3bb0d-200">Tasks</span></span>|<span data-ttu-id="3bb0d-201">リンク</span><span class="sxs-lookup"><span data-stu-id="3bb0d-201">Links</span></span>|  
|-----------|-----------|  
|<span data-ttu-id="3bb0d-202">不足値の処理を制御するためのフラグを個々のモデル列に追加する。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-202">Add flags to individual model columns to control handling of missing values</span></span>|[<span data-ttu-id="3bb0d-203">モデリング フラグの表示または変更 &#40;データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="3bb0d-203">View or Change Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)|  
|<span data-ttu-id="3bb0d-204">マイニング モデルに、不足値の処理を制御するためのプロパティを設定する。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-204">Set properties on a mining model to control handling of missing values</span></span>|[<span data-ttu-id="3bb0d-205">マイニング モデルのプロパティの変更</span><span class="sxs-lookup"><span data-stu-id="3bb0d-205">Change the Properties of a Mining Model</span></span>](change-the-properties-of-a-mining-model.md)|  
|<span data-ttu-id="3bb0d-206">DMX でモデリング フラグを指定する方法を習得する。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-206">Learn how to specify modeling flags in DMX</span></span>|[<span data-ttu-id="3bb0d-207">モデリング フラグ (DMX)</span><span class="sxs-lookup"><span data-stu-id="3bb0d-207">Modeling Flags &#40;DMX&#41;</span></span>](/sql/dmx/modeling-flags-dmx)|  
|<span data-ttu-id="3bb0d-208">マイニング構造が不足値を処理する方法を変更する。</span><span class="sxs-lookup"><span data-stu-id="3bb0d-208">Alter the way that the mining structure handles missing values</span></span>|[<span data-ttu-id="3bb0d-209">マイニング構造のプロパティの変更</span><span class="sxs-lookup"><span data-stu-id="3bb0d-209">Change the Properties of a Mining Structure</span></span>](change-the-properties-of-a-mining-structure.md)|  
  
## <a name="see-also"></a><span data-ttu-id="3bb0d-210">参照</span><span class="sxs-lookup"><span data-stu-id="3bb0d-210">See Also</span></span>  
 <span data-ttu-id="3bb0d-211">[マイニングモデルコンテンツ &#40;Analysis Services-データマイニング&#41;](mining-model-content-analysis-services-data-mining.md) </span><span class="sxs-lookup"><span data-stu-id="3bb0d-211">[Mining Model Content &#40;Analysis Services - Data Mining&#41;](mining-model-content-analysis-services-data-mining.md) </span></span>  
 [<span data-ttu-id="3bb0d-212">モデリング フラグ (データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3bb0d-212">Modeling Flags &#40;Data Mining&#41;</span></span>](modeling-flags-data-mining.md)  
  
  
