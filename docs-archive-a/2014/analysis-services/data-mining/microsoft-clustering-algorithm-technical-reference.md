---
title: Microsoft クラスタリングアルゴリズムテクニカルリファレンス |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- clustering [Data Mining]
- MAXIMUM_INPUT_ATTRIBUTES parameter
- CLUSTER_SEED parameter
- MODELLING_CARDINALITY parameter
- MINIMUM_SUPPORT parameter
- STOPPING_TOLERANCE parameter
- MAXIMUM_STATES parameter
- SAMPLE_SIZE parameter
- CLUSTERING_METHOD parameter
- soft clustering [Data Mining]
- clustering algorithms [Analysis Services]
- CLUSTER_COUNT parameter
ms.assetid: ec40868a-6dc7-4dfa-aadc-dedf69e555eb
author: minewiskan
ms.author: owend
ms.openlocfilehash: ee9019f821c5608527e0bdca5eddc8f1ead52f41
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87642412"
---
# <a name="microsoft-clustering-algorithm-technical-reference"></a><span data-ttu-id="8ae2b-102">Microsoft クラスタリング アルゴリズム テクニカル リファレンス</span><span class="sxs-lookup"><span data-stu-id="8ae2b-102">Microsoft Clustering Algorithm Technical Reference</span></span>
  <span data-ttu-id="8ae2b-103">ここでは、 [!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムの実装について、クラスター モデルの動作を制御するために使用できるパラメーターを含めて説明します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-103">This section explains the implementation of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm, including the parameters that you can use to control the behavior of clustering models.</span></span> <span data-ttu-id="8ae2b-104">クラスター モデルの作成時や処理時のパフォーマンスを向上させる方法に関するアドバイスも含まれています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-104">It also provides guidance about how to improve performance when you create and process clustering models.</span></span>  
  
 <span data-ttu-id="8ae2b-105">クラスター モデルの使用方法の詳細については、次のトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-105">For additional information about how to use clustering models, see the following topics:</span></span>  
  
-   [<span data-ttu-id="8ae2b-106">クラスター モデルのマイニング モデル コンテンツ &#40;Analysis Services - データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="8ae2b-106">Mining Model Content for Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](mining-model-content-for-clustering-models-analysis-services-data-mining.md)  
  
-   [<span data-ttu-id="8ae2b-107">クラスタリング モデルのクエリ例</span><span class="sxs-lookup"><span data-stu-id="8ae2b-107">Clustering Model Query Examples</span></span>](clustering-model-query-examples.md)  
  
## <a name="implementation-of-the-microsoft-clustering-algorithm"></a><span data-ttu-id="8ae2b-108">Microsoft クラスタリング アルゴリズムの実装</span><span class="sxs-lookup"><span data-stu-id="8ae2b-108">Implementation of the Microsoft Clustering Algorithm</span></span>  
 <span data-ttu-id="8ae2b-109">[!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムには、クラスターを作成し、クラスターにデータ ポイントを割り当てるための 2 つの方法が用意されています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-109">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm provides two methods for creating clusters and assigning data points to the clusters.</span></span> <span data-ttu-id="8ae2b-110">1 つ目の *K-Means* アルゴリズムは、ハード クラスタリングの手法です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-110">The first, the *K-means* algorithm, is a hard clustering method.</span></span> <span data-ttu-id="8ae2b-111">この手法では、データ ポイントが所属できるクラスターは 1 つだけであるため、そのクラスターの各データ ポイントのメンバーシップについて 1 つの確率が計算されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-111">This means that a data point can belong to only one cluster, and that a single probability is calculated for the membership of each data point in that cluster.</span></span> <span data-ttu-id="8ae2b-112">2 つ目の *Expectation Maximization* (EM) 手法は、 *ソフト クラスタリング* の手法です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-112">The second method, the *Expectation Maximization* (EM) method, is a *soft clustering* method.</span></span> <span data-ttu-id="8ae2b-113">この手法では、データ ポイントが常に複数のクラスターに所属するため、データ ポイントとクラスターの組み合わせごとに確率が計算されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-113">This means that a data point always belongs to multiple clusters, and that a probability is calculated for each combination of data point and cluster.</span></span>  
  
 <span data-ttu-id="8ae2b-114">どちらのアルゴリズムを使用するかは、 *CLUSTERING_METHOD* パラメーターを設定して選択できます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-114">You can choose which algorithm to use by setting the *CLUSTERING_METHOD* parameter.</span></span> <span data-ttu-id="8ae2b-115">既定のクラスタリング手法はスケーラブル EM です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-115">The default method for clustering is scalable EM.</span></span>  
  
### <a name="em-clustering"></a><span data-ttu-id="8ae2b-116">EM クラスタリング</span><span class="sxs-lookup"><span data-stu-id="8ae2b-116">EM Clustering</span></span>  
 <span data-ttu-id="8ae2b-117">EM クラスタリングでは、初期クラスター モデルがデータに合わせて反復的に調整され、データ ポイントがクラスター内に存在する確率が判定されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-117">In EM clustering, the algorithm iteratively refines an initial cluster model to fit the data and determines the probability that a data point exists in a cluster.</span></span> <span data-ttu-id="8ae2b-118">このプロセスは、その確率論的モデルがデータに適合すると終了します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-118">The algorithm ends the process when the probabilistic model fits the data.</span></span> <span data-ttu-id="8ae2b-119">適合の判定に使用される関数は、与えられたモデルに対するデータの対数尤度です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-119">The function used to determine the fit is the log-likelihood of the data given the model.</span></span>  
  
 <span data-ttu-id="8ae2b-120">このプロセスで空のクラスターが生成された場合や、メンバーシップが指定のしきい値に達していないクラスターがあった場合は、母集団の小さいクラスターが新しいポイントで再シードされ、EM アルゴリズムが再実行されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-120">If empty clusters are generated during the process, or if the membership of one or more of the clusters falls below a given threshold, the clusters with low populations are reseeded at new points and the EM algorithm is rerun.</span></span>  
  
 <span data-ttu-id="8ae2b-121">EM クラスタリング手法の結果は確率論的です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-121">The results of the EM clustering method are probabilistic.</span></span> <span data-ttu-id="8ae2b-122">つまり、すべてのデータ ポイントがすべてのクラスターに所属しますが、割り当ての確率はそれぞれ異なります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-122">This means that every data point belongs to all clusters, but each assignment of a data point to a cluster has a different probability.</span></span> <span data-ttu-id="8ae2b-123">この手法ではクラスターの重複が許可されるため、すべてのクラスター内のアイテムの合計がトレーニング セットのアイテムの合計数を上回る場合もあります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-123">Because the method allows for clusters to overlap, the sum of items in all the clusters may exceed the total items in the training set.</span></span> <span data-ttu-id="8ae2b-124">マイニング モデルの結果では、このことを反映してサポートのスコアが調整されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-124">In the mining model results, scores that indicate support are adjusted to account for this.</span></span>  
  
 <span data-ttu-id="8ae2b-125">EM アルゴリズムは、Microsoft クラスター モデルで使用される既定のアルゴリズムです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-125">The EM algorithm is the default algorithm used in Microsoft clustering models.</span></span> <span data-ttu-id="8ae2b-126">このアルゴリズムが既定で使用されるのは、K-Means クラスタリングに比べて次のような利点があるためです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-126">This algorithm is used as the default because it offers multiple advantages in comparison to k-means clustering:</span></span>  
  
-   <span data-ttu-id="8ae2b-127">データベースのスキャンが 1 回で済む。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-127">Requires one database scan, at most.</span></span>  
  
-   <span data-ttu-id="8ae2b-128">メモリ (RAM) が限られていても動作する。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-128">Will work despite limited memory (RAM).</span></span>  
  
-   <span data-ttu-id="8ae2b-129">順方向専用カーソルを使用できる。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-129">Has the ability to use a forward-only cursor.</span></span>  
  
-   <span data-ttu-id="8ae2b-130">サンプリングの手法よりパフォーマンスが高い。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-130">Outperforms sampling approaches.</span></span>  
  
 <span data-ttu-id="8ae2b-131">Microsoft による実装には、スケーラブル EM と非スケーラブル EM という 2 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-131">The Microsoft implementation provides two options: scalable and non-scalable EM.</span></span> <span data-ttu-id="8ae2b-132">既定のスケーラブル EM では、初期スキャンのシードに最初の 50,000 レコードが使用されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-132">By default, in scalable EM, the first 50,000 records are used to seed the initial scan.</span></span> <span data-ttu-id="8ae2b-133">これが成功した場合は、モデルでそのデータのみが使用されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-133">If this is successful, the model uses this data only.</span></span> <span data-ttu-id="8ae2b-134">50,000 個のレコードを使用して適切なモデルを作成できなかった場合は、さらに 50,000 個のレコードが読み取られます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-134">If the model cannot be fit using 50,000 records, an additional 50,000 records are read.</span></span> <span data-ttu-id="8ae2b-135">非スケーラブル EM では、サイズにかかわらずデータセット全体が読み取られます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-135">In non-scalable EM, the entire dataset is read regardless of its size.</span></span> <span data-ttu-id="8ae2b-136">これにより、より正確なクラスターが作成される場合もありますが、必要なメモリの量が大幅に増加する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-136">This method might create more accurate clusters, but the memory requirements can be significant.</span></span> <span data-ttu-id="8ae2b-137">スケーラブル EM では、ローカル バッファーが使用されるため、データの反復処理が大幅に高速化されます。また、非スケーラブル EM よりはるかに効率的に CPU メモリ キャッシュを活用できます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-137">Because scalable EM operates on a local buffer, iterating through the data is much faster, and the algorithm makes much better use of the CPU memory cache than non-scalable EM.</span></span> <span data-ttu-id="8ae2b-138">さらに、すべてのデータがメイン メモリに収まる場合でも非スケーラブル EM に比べて 3 倍高速になります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-138">Moreover, scalable EM is three times faster than non-scalable EM, even if all the data can fit in main memory.</span></span> <span data-ttu-id="8ae2b-139">このパフォーマンスの改善によって最終的なモデルの質が低下することもほとんどありません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-139">In the majority of cases, the performance improvement does not lead to lower quality of the complete model.</span></span>  
  
 <span data-ttu-id="8ae2b-140">[!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムの EM の実装に関する技術的なレポートについては、「 [EM (Expectation Maximization) クラスタリングの大規模データベースへのスケーリング](https://go.microsoft.com/fwlink/?LinkId=45964)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-140">For a technical report that describes the implementation of EM in the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm, see [Scaling EM (Expectation Maximization) Clustering to Large Databases](https://go.microsoft.com/fwlink/?LinkId=45964).</span></span>  
  
### <a name="k-means-clustering"></a><span data-ttu-id="8ae2b-141">K-Means クラスタリング</span><span class="sxs-lookup"><span data-stu-id="8ae2b-141">K-Means Clustering</span></span>  
 <span data-ttu-id="8ae2b-142">K-Means クラスタリングは、クラスター内のアイテム間の相違を最小化し、クラスター間の距離を最大化することによってクラスター メンバーシップを割り当てる、よく知られている手法です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-142">K-means clustering is a well-known method of assigning cluster membership by minimizing the differences among items in a cluster while maximizing the distance between clusters.</span></span> <span data-ttu-id="8ae2b-143">K-Means の "Means" は、クラスターの *重心* を表します。クラスターの重心とは、任意に選択され、クラスター内のすべてのデータ ポイントの真の平均を表すようになるまで反復的に調整されるデータ ポイントです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-143">The "means" in k-means refers to the *centroid* of the cluster, which is a data point that is chosen arbitrarily and then refined iteratively until it represents the true mean of all data points in the cluster.</span></span> <span data-ttu-id="8ae2b-144">"K" は、クラスタリング処理のシードに使用される任意の数のポイントを表します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-144">The "k" refers to an arbitrary number of points that are used to seed the clustering process.</span></span> <span data-ttu-id="8ae2b-145">K-Means アルゴリズムでは、クラスター内のデータ レコードと、クラスターの平均を表すベクトルとの間のユークリッド距離の 2 乗を計算し、その総和が最小値に達したとき、最終的な k 個のクラスターのセットに収束します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-145">The k-means algorithm calculates the squared Euclidean distances between data records in a cluster and the vector that represents the cluster mean, and converges on a final set of k clusters when that sum reaches its minimum value.</span></span>  
  
 <span data-ttu-id="8ae2b-146">K-Means アルゴリズムでは、各データ ポイントが割り当てられるクラスターは 1 つだけであり、メンバーシップのあいまいさは許容されません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-146">The k-means algorithm assigns each data point to exactly one cluster, and does not allow for uncertainty in membership.</span></span> <span data-ttu-id="8ae2b-147">クラスターのメンバーシップは重心からの距離として表されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-147">Membership in a cluster is expressed as a distance from the centroid.</span></span>  
  
 <span data-ttu-id="8ae2b-148">K-Means アルゴリズムは、平均への距離を簡単に計算できる連続属性のクラスターの作成に使用されるのが一般的ですが、</span><span class="sxs-lookup"><span data-stu-id="8ae2b-148">Typically, the k-means algorithm is used for creating clusters of continuous attributes, where calculating distance to a mean is straightforward.</span></span> <span data-ttu-id="8ae2b-149">[!INCLUDE[msCoName](../../includes/msconame-md.md)] の実装では、確率を使用することにより、不連続属性に対しても使用できるようになっています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-149">However, the [!INCLUDE[msCoName](../../includes/msconame-md.md)] implementation adapts the k-means method to cluster discrete attributes, by using probabilities.</span></span>  <span data-ttu-id="8ae2b-150">不連続属性の場合、特定のクラスターからデータ ポイントまでの距離は次のように計算されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-150">For discrete attributes, the distance of a data point from a particular cluster is calculated as follows:</span></span>  
  
 <span data-ttu-id="8ae2b-151">1 - P(data point, cluster)</span><span class="sxs-lookup"><span data-stu-id="8ae2b-151">1 - P(data point, cluster)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8ae2b-152">[!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムでは、K-Means の計算に使用される距離関数は公開されておらず、完成したモデルで距離の測定値を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-152">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm does not expose the distance function used in computing k-means, and measures of distance are not available in the completed model.</span></span> <span data-ttu-id="8ae2b-153">ただし、予測関数を使用して、距離に相当する値を取得することができます。この場合の距離は、データ ポイントがクラスターに属する確率として計算されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-153">However, you can use a prediction function to return a value that corresponds to distance, where distance is computed as the probability of a data point belonging to the cluster.</span></span> <span data-ttu-id="8ae2b-154">詳細については、「[ClusterProbability &#40;DMX&#41;](/sql/dmx/clusterprobability-dmx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-154">For more information, see [ClusterProbability &#40;DMX&#41;](/sql/dmx/clusterprobability-dmx).</span></span>  
  
 <span data-ttu-id="8ae2b-155">K-Means アルゴリズムには、データセットのサンプリング方法が 2 つ用意されています。1 つ目の非スケーラブル K-Means では、データセット全体を読み込んで 1 つのクラスタリング パスを作成します。2 つ目のスケーラブル K-Means では、最初の 50,000 ケースを使用してデータに適合するモデルを作成できなかった場合にのみ追加のケースが読み取られます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-155">The k-means algorithm provides two methods of sampling the data set: non-scalable K-means, which loads the entire data set and makes one clustering pass, or scalable k-means, where the algorithm uses the first 50,000 cases and reads more cases only if it needs more data to achieve a good fit of model to data.</span></span>  
  
### <a name="updates-to-the-microsoft-clustering-algorithm-in-sql-server-2008"></a><span data-ttu-id="8ae2b-156">SQL Server 2008 の Microsoft クラスタリング アルゴリズムへの更新</span><span class="sxs-lookup"><span data-stu-id="8ae2b-156">Updates to the Microsoft Clustering Algorithm in SQL Server 2008</span></span>  
 <span data-ttu-id="8ae2b-157">SQL Server 2008 では、 [!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムの既定の構成が、内部パラメーター NORMALIZATION = 1 を使用するように変更されました。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-157">In SQL Server 2008, the default configuration of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] clustering algorithm was changed to use the internal parameter, NORMALIZATION = 1.</span></span> <span data-ttu-id="8ae2b-158">正規化は z スコア統計を使用して実行され、正規分布を想定しています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-158">Normalization is performed using z-score statistics, and assumes normal distribution.</span></span> <span data-ttu-id="8ae2b-159">既定の動作をこのように変更したのは、規模が大きくなり外れ値が増える可能性がある属性の影響を最小限に抑えるためです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-159">The intent of this change in the default behavior is to minimize the effect of attributes that might have large magnitudes and many outliers.</span></span> <span data-ttu-id="8ae2b-160">ただし、z スコア正規化により、正規ではない分布 (均一分布など) のクラスタリング結果が異なる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-160">However, z-score normalization may alter the clustering results on distributions that are not normal (such as uniform distributions).</span></span> <span data-ttu-id="8ae2b-161">正規化を回避し、SQL Server 2005 の K-Means クラスタリング アルゴリズムと同じ動作を得るには、 **[パラメーター設定]** ダイアログ ボックスを使用して、カスタム パラメーター NORMALIZATION を追加し、その値を 0 に設定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-161">To prevent normalization and obtain the same behavior as the K-means clustering algorithm in SQL Server 2005, you can use the **Parameter Settings** dialog box to add the custom parameter, NORMALIZATION, and set its value to 0.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8ae2b-162">NORMALIZATION パラメーターは [!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムの内部プロパティであり、サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-162">The NORMALIZATION parameter is an internal property of the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm and is not supported.</span></span> <span data-ttu-id="8ae2b-163">通常、モデルの結果を向上させるには、クラスタリング モデルで正規化を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-163">In general, the use of normalization is recommended in clustering models to improve model results.</span></span>  
  
## <a name="customizing-the-microsoft-clustering-algorithm"></a><span data-ttu-id="8ae2b-164">Microsoft クラスタリング アルゴリズムのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="8ae2b-164">Customizing the Microsoft Clustering Algorithm</span></span>  
 <span data-ttu-id="8ae2b-165">[!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムでは、結果として得られるマイニング モデルの動作、パフォーマンス、および精度に影響を与えるいくつかのパラメーターがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-165">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm supports several parameters that affect the behavior, performance, and accuracy of the resulting mining model.</span></span>  
  
### <a name="setting-algorithm-parameters"></a><span data-ttu-id="8ae2b-166">アルゴリズム パラメーターの設定</span><span class="sxs-lookup"><span data-stu-id="8ae2b-166">Setting Algorithm Parameters</span></span>  
 <span data-ttu-id="8ae2b-167">次の表は、 [!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムで使用できるパラメーターを示しています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-167">The following table describes the parameters that can be used with the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm.</span></span> <span data-ttu-id="8ae2b-168">これらのパラメーターは、結果として得られるマイニング モデルのパフォーマンスと精度の両方に影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-168">These parameters affect both the performance and accuracy of the resulting mining model.</span></span>  
  
 <span data-ttu-id="8ae2b-169">CLUSTERING_METHOD</span><span class="sxs-lookup"><span data-stu-id="8ae2b-169">CLUSTERING_METHOD</span></span>  
 <span data-ttu-id="8ae2b-170">アルゴリズムで使用するクラスタリング手法を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-170">Specifies the clustering method for the algorithm to use.</span></span> <span data-ttu-id="8ae2b-171">使用可能なクラスタリング手法は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-171">The following clustering methods are available:</span></span>  
  
|<span data-ttu-id="8ae2b-172">id</span><span class="sxs-lookup"><span data-stu-id="8ae2b-172">ID</span></span>|<span data-ttu-id="8ae2b-173">メソッド</span><span class="sxs-lookup"><span data-stu-id="8ae2b-173">Method</span></span>|  
|--------|------------|  
|<span data-ttu-id="8ae2b-174">1</span><span class="sxs-lookup"><span data-stu-id="8ae2b-174">1</span></span>|<span data-ttu-id="8ae2b-175">スケーラブル EM</span><span class="sxs-lookup"><span data-stu-id="8ae2b-175">Scalable EM</span></span>|  
|<span data-ttu-id="8ae2b-176">2</span><span class="sxs-lookup"><span data-stu-id="8ae2b-176">2</span></span>|<span data-ttu-id="8ae2b-177">非スケーラブル EM (Non-scalable EM)</span><span class="sxs-lookup"><span data-stu-id="8ae2b-177">Non-scalable EM</span></span>|  
|<span data-ttu-id="8ae2b-178">3</span><span class="sxs-lookup"><span data-stu-id="8ae2b-178">3</span></span>|<span data-ttu-id="8ae2b-179">スケーラブル K-Means</span><span class="sxs-lookup"><span data-stu-id="8ae2b-179">Scalable K-Means</span></span>|  
|<span data-ttu-id="8ae2b-180">4</span><span class="sxs-lookup"><span data-stu-id="8ae2b-180">4</span></span>|<span data-ttu-id="8ae2b-181">非スケーラブル K-Means</span><span class="sxs-lookup"><span data-stu-id="8ae2b-181">Non-scalable K-Means.</span></span>|  
  
 <span data-ttu-id="8ae2b-182">既定値は 1 (スケーラブル EM) です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-182">The default is 1 (scalable EM).</span></span>  
  
 <span data-ttu-id="8ae2b-183">CLUSTER_COUNT</span><span class="sxs-lookup"><span data-stu-id="8ae2b-183">CLUSTER_COUNT</span></span>  
 <span data-ttu-id="8ae2b-184">アルゴリズムによって作成されるクラスターの概数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-184">Specifies the approximate number of clusters to be built by the algorithm.</span></span> <span data-ttu-id="8ae2b-185">その数のクラスターをデータから作成できない場合は、可能な限り多数のクラスターが作成されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-185">If the approximate number of clusters cannot be built from the data, the algorithm builds as many clusters as possible.</span></span> <span data-ttu-id="8ae2b-186">CLUSTER_COUNT を 0 に設定すると、アルゴリズムではヒューリスティックを使用して、作成するクラスターの数が最適に決定されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-186">Setting the CLUSTER_COUNT to 0 causes the algorithm to use heuristics to best determine the number of clusters to build.</span></span>  
  
 <span data-ttu-id="8ae2b-187">既定値は 10 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-187">The default is 10.</span></span>  
  
 <span data-ttu-id="8ae2b-188">CLUSTER_SEED</span><span class="sxs-lookup"><span data-stu-id="8ae2b-188">CLUSTER_SEED</span></span>  
 <span data-ttu-id="8ae2b-189">モデル作成の初期段階にクラスターをランダムに生成するために使用するシード数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-189">Specifies the seed number that is used to randomly generate clusters for the initial stage of model building.</span></span>  
  
 <span data-ttu-id="8ae2b-190">この数を変更することにより、初期クラスターの作成方法を変更できます。その後、異なるシードを使用して作成したモデルを比較することができます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-190">By changing this number, you can change the way that the initial clusters are built, and then compare models that have been built using different seeds.</span></span> <span data-ttu-id="8ae2b-191">シードを変更しても検出されるクラスターがあまり変わらない場合は、モデルが比較的安定していると考えることができます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-191">If the seed is changed but the clusters that are found do not change greatly , the model can be considered relatively stable.</span></span>  
  
 <span data-ttu-id="8ae2b-192">既定値は 0 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-192">The default is 0.</span></span>  
  
 <span data-ttu-id="8ae2b-193">MINIMUM_SUPPORT</span><span class="sxs-lookup"><span data-stu-id="8ae2b-193">MINIMUM_SUPPORT</span></span>  
 <span data-ttu-id="8ae2b-194">クラスターの作成に必要なケースの最小数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-194">Specifies the minimum number of cases that are required to build a cluster.</span></span> <span data-ttu-id="8ae2b-195">ケースの数がこの数より少ないクラスターは空のクラスターとして扱われ、破棄されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-195">If the number of cases in the cluster is lower than this number, the cluster is treated as empty and discarded.</span></span>  
  
 <span data-ttu-id="8ae2b-196">この数を高く設定しすぎると、有効なクラスターを見落とす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-196">If you set this number too high, you may miss valid clusters.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8ae2b-197">既定のクラスタリング手法である EM を使用すると、指定した値より低いサポート値を持つクラスターが作成される場合があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-197">If you use EM, which is the default clustering method, some clusters may have a support value that is lower than the specified value.</span></span> <span data-ttu-id="8ae2b-198">これは、各ケースがすべての可能なクラスターのメンバーシップについて評価されるため、中には最小限のサポートしかないクラスターもあるからです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-198">This is because each case is evaluated for its membership in all possible clusters, and for some clusters there may be only minimal support.</span></span>  
  
 <span data-ttu-id="8ae2b-199">既定値は 1 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-199">The default is 1.</span></span>  
  
 <span data-ttu-id="8ae2b-200">MODELLING_CARDINALITY</span><span class="sxs-lookup"><span data-stu-id="8ae2b-200">MODELLING_CARDINALITY</span></span>  
 <span data-ttu-id="8ae2b-201">クラスタリング処理中に作成されるサンプル モデルの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-201">Specifies the number of sample models that are constructed during the clustering process.</span></span>  
  
 <span data-ttu-id="8ae2b-202">この数を減らすと、適切な候補モデルが作成されなくなる可能性もありますが、パフォーマンスを向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-202">Reducing the number of candidate models can improve performance at the risk of missing some good candidate models.</span></span>  
  
 <span data-ttu-id="8ae2b-203">既定値は 10 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-203">The default is 10.</span></span>  
  
 <span data-ttu-id="8ae2b-204">STOPPING_TOLERANCE</span><span class="sxs-lookup"><span data-stu-id="8ae2b-204">STOPPING_TOLERANCE</span></span>  
 <span data-ttu-id="8ae2b-205">収束に到達し、アルゴリズムによるモデルの作成が完了する時点を決定するための値を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-205">Specifies the value that is used to determine when convergence is reached and the algorithm is finished building the model.</span></span> <span data-ttu-id="8ae2b-206">収束に到達するのは、クラスターの確率の全体的な変化が、モデルのサイズで除算された STOPPING_TOLERANCE パラメーターの比率に満たないときです。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-206">Convergence is reached when the overall change in cluster probabilities is less than the ratio of the STOPPING_TOLERANCE parameter divided by the size of the model.</span></span>  
  
 <span data-ttu-id="8ae2b-207">既定値は 10 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-207">The default is 10.</span></span>  
  
 <span data-ttu-id="8ae2b-208">SAMPLE_SIZE</span><span class="sxs-lookup"><span data-stu-id="8ae2b-208">SAMPLE_SIZE</span></span>  
 <span data-ttu-id="8ae2b-209">CLUSTERING_METHOD パラメーターをスケーラブルなクラスタリング手法のいずれかに設定する場合に、アルゴリズムにより各パスで使用されるケースの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-209">Specifies the number of cases that the algorithm uses on each pass if the CLUSTERING_METHOD parameter is set to one of the scalable clustering methods.</span></span> <span data-ttu-id="8ae2b-210">SAMPLE_SIZE パラメーターを 0 に設定すると、データセット全体が単一のパスでクラスター化されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-210">Setting the SAMPLE_SIZE parameter to 0 will cause the whole dataset to be clustered in a single pass.</span></span> <span data-ttu-id="8ae2b-211">データセット全体を単一のパスで読み込むと、メモリやパフォーマンスの問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-211">Loading the entire dataset in a single pass can cause memory and performance issues.</span></span>  
  
 <span data-ttu-id="8ae2b-212">既定値は 50000 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-212">The default is 50000.</span></span>  
  
 <span data-ttu-id="8ae2b-213">MAXIMUM_INPUT_ATTRIBUTES</span><span class="sxs-lookup"><span data-stu-id="8ae2b-213">MAXIMUM_INPUT_ATTRIBUTES</span></span>  
 <span data-ttu-id="8ae2b-214">選択した機能を呼び出す前にアルゴリズムが処理できる入力属性の最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-214">Specifies the maximum number of input attributes that the algorithm can handle before it invokes feature selection.</span></span> <span data-ttu-id="8ae2b-215">この値を 0 に設定した場合、属性数の上限はありません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-215">Setting this value to 0 specifies that there is no maximum number of attributes.</span></span>  
  
 <span data-ttu-id="8ae2b-216">属性の数を増やすと、パフォーマンスが大幅に低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-216">Increasing the number of attributes can significantly degrade performance.</span></span>  
  
 <span data-ttu-id="8ae2b-217">既定値は 255 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-217">The default is 255.</span></span>  
  
 <span data-ttu-id="8ae2b-218">MAXIMUM_STATES</span><span class="sxs-lookup"><span data-stu-id="8ae2b-218">MAXIMUM_STATES</span></span>  
 <span data-ttu-id="8ae2b-219">アルゴリズムによってサポートされる属性状態の最大数を指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-219">Specifies the maximum number of attribute states that the algorithm supports.</span></span> <span data-ttu-id="8ae2b-220">属性の状態の数が最大数よりも大きい場合、アルゴリズムでは最も一般的な状態が使用され、残りの状態は無視されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-220">If an attribute has more states than the maximum, the algorithm uses the most popular states and ignores the remaining states.</span></span>  
  
 <span data-ttu-id="8ae2b-221">状態の数を増やすと、パフォーマンスが大幅に低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-221">Increasing the number of states can significantly degrade performance.</span></span>  
  
 <span data-ttu-id="8ae2b-222">既定値は、100 です。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-222">The default is 100.</span></span>  
  
### <a name="modeling-flags"></a><span data-ttu-id="8ae2b-223">ModelingFlags</span><span class="sxs-lookup"><span data-stu-id="8ae2b-223">Modeling Flags</span></span>  
 <span data-ttu-id="8ae2b-224">アルゴリズムでは、次のモデリング フラグがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-224">The algorithm supports the following modeling flags.</span></span> <span data-ttu-id="8ae2b-225">モデリング フラグは、マイニング構造やマイニング モデルを作成するときに定義し、</span><span class="sxs-lookup"><span data-stu-id="8ae2b-225">You define modeling flags when you create the mining structure or mining model.</span></span> <span data-ttu-id="8ae2b-226">分析時に各列の値をどのように処理するかを指定します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-226">The modeling flags specify how values in each column are handled during analysis.</span></span>  
  
|<span data-ttu-id="8ae2b-227">モデリング フラグ</span><span class="sxs-lookup"><span data-stu-id="8ae2b-227">Modeling Flag</span></span>|<span data-ttu-id="8ae2b-228">説明</span><span class="sxs-lookup"><span data-stu-id="8ae2b-228">Description</span></span>|  
|-------------------|-----------------|  
|<span data-ttu-id="8ae2b-229">MODEL_EXISTENCE_ONLY</span><span class="sxs-lookup"><span data-stu-id="8ae2b-229">MODEL_EXISTENCE_ONLY</span></span>|<span data-ttu-id="8ae2b-230">列が、Missing および Existing の 2 つの可能な状態を持つ列として扱われます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-230">The column will be treated as having two possible states: Missing and Existing.</span></span> <span data-ttu-id="8ae2b-231">NULL は Missing 値になります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-231">A null is a missing value.</span></span><br /><br /> <span data-ttu-id="8ae2b-232">マイニング モデル列に適用されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-232">Applies to mining model column.</span></span>|  
|<span data-ttu-id="8ae2b-233">NOT NULL</span><span class="sxs-lookup"><span data-stu-id="8ae2b-233">NOT NULL</span></span>|<span data-ttu-id="8ae2b-234">列に NULL を含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-234">The column cannot contain a null.</span></span> <span data-ttu-id="8ae2b-235">モデルのトレーニング中に NULL が検出された場合はエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-235">An error will result if Analysis Services encounters a null during model training.</span></span><br /><br /> <span data-ttu-id="8ae2b-236">マイニング構造列に適用されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-236">Applies to mining structure column.</span></span>|  
  
## <a name="requirements"></a><span data-ttu-id="8ae2b-237">必要条件</span><span class="sxs-lookup"><span data-stu-id="8ae2b-237">Requirements</span></span>  
 <span data-ttu-id="8ae2b-238">クラスタリング モデルは、キー列と入力列を含んでいる必要があります。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-238">A clustering model must contain a key column and input columns.</span></span> <span data-ttu-id="8ae2b-239">入力列は、予測可能列として定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-239">You can also define input columns as being predictable.</span></span> <span data-ttu-id="8ae2b-240">`Predict Only` に設定されている列は、クラスターの作成には使用されません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-240">Columns set to `Predict Only` are not used to build clusters.</span></span> <span data-ttu-id="8ae2b-241">クラスター内のそれらの値の分布は、クラスターの作成後に算出されます。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-241">The distribution of these values in the clusters are calculated after the clusters are built.</span></span>  
  
### <a name="input-and-predictable-columns"></a><span data-ttu-id="8ae2b-242">入力列と予測可能列</span><span class="sxs-lookup"><span data-stu-id="8ae2b-242">Input and Predictable Columns</span></span>  
 <span data-ttu-id="8ae2b-243">[!INCLUDE[msCoName](../../includes/msconame-md.md)] クラスタリング アルゴリズムでは、次の表に示す特定の入力列と予測可能列がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-243">The [!INCLUDE[msCoName](../../includes/msconame-md.md)] Clustering algorithm supports the specific input columns and predictable columns that are listed in the following table.</span></span> <span data-ttu-id="8ae2b-244">マイニング モデルにおけるコンテンツの種類の意味については、「[コンテンツの種類 &#40;データ マイニング&#41;](content-types-data-mining.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-244">For more information about what the content types mean when used in a mining model, see [Content Types &#40;Data Mining&#41;](content-types-data-mining.md).</span></span>  
  
|<span data-ttu-id="8ae2b-245">列</span><span class="sxs-lookup"><span data-stu-id="8ae2b-245">Column</span></span>|<span data-ttu-id="8ae2b-246">コンテンツの種類</span><span class="sxs-lookup"><span data-stu-id="8ae2b-246">Content types</span></span>|  
|------------|-------------------|  
|<span data-ttu-id="8ae2b-247">入力属性</span><span class="sxs-lookup"><span data-stu-id="8ae2b-247">Input attribute</span></span>|<span data-ttu-id="8ae2b-248">Continuous、Cyclical、Discrete、Discretized、Key、Table、Ordered</span><span class="sxs-lookup"><span data-stu-id="8ae2b-248">Continuous, Cyclical, Discrete, Discretized, Key, Table, Ordered</span></span>|  
|<span data-ttu-id="8ae2b-249">予測可能な属性</span><span class="sxs-lookup"><span data-stu-id="8ae2b-249">Predictable attribute</span></span>|<span data-ttu-id="8ae2b-250">Continuous、Cyclical、Discrete、Discretized、Table、Ordered</span><span class="sxs-lookup"><span data-stu-id="8ae2b-250">Continuous, Cyclical, Discrete, Discretized, Table, Ordered</span></span>|  
  
> [!NOTE]  
>  <span data-ttu-id="8ae2b-251">コンテンツの種類 Cyclical および Ordered はサポートされますが、アルゴリズムはこれらを不連続の値として扱い、特別な処理は行いません。</span><span class="sxs-lookup"><span data-stu-id="8ae2b-251">Cyclical and Ordered content types are supported, but the algorithm treats them as discrete values and does not perform special processing.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8ae2b-252">参照</span><span class="sxs-lookup"><span data-stu-id="8ae2b-252">See Also</span></span>  
 <span data-ttu-id="8ae2b-253">[Microsoft クラスタリングアルゴリズム](microsoft-clustering-algorithm.md) </span><span class="sxs-lookup"><span data-stu-id="8ae2b-253">[Microsoft Clustering Algorithm](microsoft-clustering-algorithm.md) </span></span>  
 <span data-ttu-id="8ae2b-254">[クラスタリングモデルのクエリ例](clustering-model-query-examples.md) </span><span class="sxs-lookup"><span data-stu-id="8ae2b-254">[Clustering Model Query Examples](clustering-model-query-examples.md) </span></span>  
 [<span data-ttu-id="8ae2b-255">クラスター モデルのマイニング モデル コンテンツ &#40;Analysis Services - データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="8ae2b-255">Mining Model Content for Clustering Models &#40;Analysis Services - Data Mining&#41;</span></span>](mining-model-content-for-clustering-models-analysis-services-data-mining.md)  
  
  
