---
title: データマイニングクエリインターフェイス |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- predictions [Analysis Services], DMX prediction queries
- predictions [DMX]
- DMX [Analysis Services], prediction queries
- prediction queries [DMX]
- predictions [Analysis Services]
- queries [DMX], prediction queries
- mining models [Analysis Services], DMX
ms.assetid: a8952427-fd8c-4300-8f62-25f57ac1be0c
author: minewiskan
ms.author: owend
ms.openlocfilehash: 1702ad82c65b5a7370a62c4bc31a08007f374c9f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87645269"
---
# <a name="data-mining-query-interfaces"></a><span data-ttu-id="d81a2-102">データ マイニング クエリ インターフェイス</span><span class="sxs-lookup"><span data-stu-id="d81a2-102">Data Mining Query Interfaces</span></span>
  <span data-ttu-id="d81a2-103">データ マイニング クエリは、データ マイニング拡張機能 (DMX) の言語に基づいています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-103">Data mining queries are based on the Data Mining Extensions (DMX) language.</span></span> <span data-ttu-id="d81a2-104">DMX は、分類、リスク分析、推奨設定の生成、線形回帰などのすべての予測およびモデリングのタスクに使用できます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-104">You use DMX for all prediction and modeling tasks, including classification, risk analysis, generation of recommendations, and linear regression.</span></span> <span data-ttu-id="d81a2-105">またモデル処理時に生成されたパターンおよび統計を取得することもできます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-105">You can also retrieve the patterns and statistics that were generated when you processed the model.</span></span>  
  
 <span data-ttu-id="d81a2-106">DMX を使用した予測クエリの構文は、[!INCLUDE[tsql](../../includes/tsql-md.md)] でのクエリの構文に似ています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-106">The syntax for a prediction query using DMX is similar to the syntax for a query in [!INCLUDE[tsql](../../includes/tsql-md.md)].</span></span> <span data-ttu-id="d81a2-107">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] と [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] のどちらにも、DMX 予測クエリの作成に便利なツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-107">Both [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] and [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] provide tools that help you build DMX prediction queries.</span></span>  
  
 <span data-ttu-id="d81a2-108">このトピックでは、DMX によりデータ マイニング クエリを作成および実行するために使用するインターフェイスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-108">This topic describes the interfaces that you can use to create and execute data mining queries using DMX.</span></span>  
  
 [<span data-ttu-id="d81a2-109">クエリツール</span><span class="sxs-lookup"><span data-stu-id="d81a2-109">Query Tools</span></span>](#bkmk_Tools)  
  
-   [<span data-ttu-id="d81a2-110">予測クエリビルダー</span><span class="sxs-lookup"><span data-stu-id="d81a2-110">Prediction Query Builder</span></span>](#bkmk_Builder)  
  
-   [<span data-ttu-id="d81a2-111">クエリ エディター</span><span class="sxs-lookup"><span data-stu-id="d81a2-111">Query Editor</span></span>](#bkmk_QueryEditor)  
  
-   <span data-ttu-id="d81a2-112">[[DMX テンプレート]](#bkmk_Templates)</span><span class="sxs-lookup"><span data-stu-id="d81a2-112">[DMX Templates](#bkmk_Templates)</span></span>  
  
-   [<span data-ttu-id="d81a2-113">統合サービス</span><span class="sxs-lookup"><span data-stu-id="d81a2-113">Integration Services</span></span>](#bkmk_SSIS)  
  
 [<span data-ttu-id="d81a2-114">アプリケーション プログラミング インターフェイス</span><span class="sxs-lookup"><span data-stu-id="d81a2-114">Application Programming Interfaces</span></span>](#bkmk_API)  
  
##  <a name="data-mining-query-tools"></a><a name="bkmk_Tools"></a><span data-ttu-id="d81a2-115">データマイニングクエリツール</span><span class="sxs-lookup"><span data-stu-id="d81a2-115">Data Mining Query Tools</span></span>  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d81a2-116">には、データ マイニング オブジェクトに対する、予測クエリ、コンテンツ クエリ、およびデータ定義クエリのビルドに使用できる次のツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-116">provides the following tools that you can use to build prediction queries, content queries, and data definition queries against data mining objects:</span></span>  
  
-   <span data-ttu-id="d81a2-117">予測クエリ ビルダー</span><span class="sxs-lookup"><span data-stu-id="d81a2-117">Prediction Query Builder</span></span>  
  
-   <span data-ttu-id="d81a2-118">クエリ エディター</span><span class="sxs-lookup"><span data-stu-id="d81a2-118">Query Editor</span></span>  
  
-   <span data-ttu-id="d81a2-119">DMX テンプレート</span><span class="sxs-lookup"><span data-stu-id="d81a2-119">DMX templates</span></span>  
  
-   <span data-ttu-id="d81a2-120">Integration Services データ マイニング コンポーネント</span><span class="sxs-lookup"><span data-stu-id="d81a2-120">Integration Services data mining components</span></span>  
  
###  <a name="prediction-query-builder"></a><a name="bkmk_Builder"></a> <span data-ttu-id="d81a2-121">予測クエリ ビルダー</span><span class="sxs-lookup"><span data-stu-id="d81a2-121">Prediction Query Builder</span></span>  
 <span data-ttu-id="d81a2-122">予測クエリ ビルダーは、データ マイニング デザイナーの **[マイニング モデル予測]** タブに含まれ、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]および [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]で入手できます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-122">Prediction Query Builder is included in the **Mining Model Prediction** tab of Data Mining Designer, which is available in both [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]and [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="d81a2-123">クエリ ビルダーでは、グラフィカルなツールを使用して、マイニング モデルの選択、新しいケース データの追加、予測関数の追加などの操作を実行できます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-123">When you use the query builder, you can use graphical tools to select a mining model, add new case data, and add prediction functions.</span></span> <span data-ttu-id="d81a2-124">予測クエリビルダーには、クエリを手動で変更するために使用できるテキストエディターと、クエリの結果を表示するための単純な**結果**ペインが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-124">The Prediction Query Builder includes a text editor that you can use to modify the query manually, and a simple **Results** pane to view the results of the query.</span></span>  
  
###  <a name="query-editor"></a><a name="bkmk_QueryEditor"></a> <span data-ttu-id="d81a2-125">クエリ エディター</span><span class="sxs-lookup"><span data-stu-id="d81a2-125">Query Editor</span></span>  
 <span data-ttu-id="d81a2-126">のクエリエディターに [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] は、DMX クエリの作成と実行に使用できるツールが用意されています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-126">The Query Editor in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] provides tools that you can use to build and run DMX queries.</span></span> <span data-ttu-id="d81a2-127">SQL Server Analysis Services のインスタンスに接続して、データベース、マイニング構造列、およびマイニング モデルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-127">You can connect to an instance of SQL Server Analysis Services, and then select a database, mining structure columns, and a mining model.</span></span> <span data-ttu-id="d81a2-128">**メタデータ エクスプ ローラー** には、参照できる予測関数の一覧が含まれています。</span><span class="sxs-lookup"><span data-stu-id="d81a2-128">The **Metadata Explorer** contains a list of prediction functions that you can browse.</span></span>  
  
###  <a name="dmx-templates"></a><a name="bkmk_Templates"></a><span data-ttu-id="d81a2-129">DMX テンプレート</span><span class="sxs-lookup"><span data-stu-id="d81a2-129">DMX Templates</span></span>  
 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] <span data-ttu-id="d81a2-130">では、DMX クエリの作成に使用できる対話型の DMX クエリ テンプレートが提供されます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-130">provides interactive DMX query templates that you can use to build DMX queries.</span></span> <span data-ttu-id="d81a2-131">テンプレートの一覧を表示するには、ツール バーの **[表示]** をクリックし、 **[テンプレート エクスプローラー]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-131">If you do not see the list of templates, click **View** on the toolbar, and select **Template Explorer**.</span></span> <span data-ttu-id="d81a2-132">DMX、MDX、および XMLA のテンプレートを含むすべての Analysis Services テンプレートを表示するには、キューブ アイコンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="d81a2-132">To see all Analysis Services templates, including templates for DMX, MDX, and XMLA, click the cube icon.</span></span>  
  
 <span data-ttu-id="d81a2-133">テンプレートを使用してクエリをビルドするには、開いているクエリ ウィンドウにテンプレートをドラッグするか、テンプレートをダブルクリックして新しい接続と新しいクエリ ペインを開きます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-133">To build a query using a template, you can drag the template into an open query window, or you can double-click the template to open a new connection and a new query pane.</span></span>  
  
 <span data-ttu-id="d81a2-134">テンプレートから予測クエリを作成する方法の例については、「 [テンプレートからの単一予測クエリの作成](create-a-singleton-prediction-query-from-a-template.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d81a2-134">For an example of how to create a prediction query from a template, see [Create a Singleton Prediction Query from a Template](create-a-singleton-prediction-query-from-a-template.md).</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="d81a2-135">Microsoft Office Excel データ マイニング アドインにも多くのクエリ テンプレートが含まれ、複雑な DMX ステートメントを作成するための対話形式のクエリ ビルダーも提供されます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-135">The Data Mining Add-in for Microsoft Office Excel also contains a number of templates, along with an interactive query builder which can help you compose complex DMX statements.</span></span> <span data-ttu-id="d81a2-136">テンプレートを使用するには、データ マイニング クライアントで **[クエリ]** と **[詳細設定]** を順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="d81a2-136">To use the templates, click **Query**, and click **Advanced** in the Data Mining Client.</span></span>  
  
###  <a name="integration-services-data-mining-components"></a><a name="bkmk_SSIS"></a><span data-ttu-id="d81a2-137">データマイニングコンポーネントの Integration Services</span><span class="sxs-lookup"><span data-stu-id="d81a2-137">Integration Services Data Mining Components</span></span>  
 <span data-ttu-id="d81a2-138">また、予測クエリをパッケージの一部として含めることもでき [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-138">You can also include prediction queries as part of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] package.</span></span> <span data-ttu-id="d81a2-139">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] の次のタスクおよび変換では、DMX 予測クエリと DMX ステートメントの作成と実行がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-139">The following tasks and transformations in [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] support the creation and execution of DMX prediction queries and DMX statements.</span></span>  
  
|<span data-ttu-id="d81a2-140">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="d81a2-140">Component</span></span>|<span data-ttu-id="d81a2-141">説明</span><span class="sxs-lookup"><span data-stu-id="d81a2-141">Description</span></span>|  
|---------------|-----------------|  
|<span data-ttu-id="d81a2-142">データ マイニング クエリ タスク</span><span class="sxs-lookup"><span data-stu-id="d81a2-142">Data Mining Query task</span></span>|<span data-ttu-id="d81a2-143">DMX クエリおよびその他の DMX ステートメントを制御フローの一部として実行します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-143">Executes DMX queries and other DMX statements as part of a control flow.</span></span><br /><br /> <span data-ttu-id="d81a2-144">タスク エディターには、予測クエリ ビルダーと、手動で DMX クエリを変更するためのテキスト ボックスがあります。</span><span class="sxs-lookup"><span data-stu-id="d81a2-144">The task editor provides the Prediction Query Builder, and a text box for modifying the DMX query manually.</span></span> <span data-ttu-id="d81a2-145">ただし、タスク エディターでは、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] ソリューションでのオブジェクトに対するクエリを検証できません。</span><span class="sxs-lookup"><span data-stu-id="d81a2-145">However, the task editor cannot validate the query against objects in an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] solution.</span></span> <span data-ttu-id="d81a2-146">このため、 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] または [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] でクエリを作成してから、ステートメントまたはクエリのテキストをタスク エディターに貼り付けることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d81a2-146">Therefore, it is best to create a query within [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)] or [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] and then paste the text of the statement or query into the task editor.</span></span>|  
|<span data-ttu-id="d81a2-147">データ マイニング クエリ変換</span><span class="sxs-lookup"><span data-stu-id="d81a2-147">Data Mining Query transformation</span></span>|<span data-ttu-id="d81a2-148">データ フロー ソースから渡されるデータを使用してデータ フロー内で予測クエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-148">Executes a prediction query within a data flow, using data supplied by a data flow source.</span></span><br /><br /> <span data-ttu-id="d81a2-149">タスク エディターには、予測クエリ ビルダーと、手動で DMX クエリを変更するためのテキスト ボックスがあります。</span><span class="sxs-lookup"><span data-stu-id="d81a2-149">The task editor provides the Prediction Query Builder, and a text box for modifying the DMX query manually.</span></span><br /><br /> <span data-ttu-id="d81a2-150">変換を使用できるのは、データ フローのデータを使用するクエリ (つまり、PREDICTION JOIN 構文を使用するクエリ) を作成する場合のみです。</span><span class="sxs-lookup"><span data-stu-id="d81a2-150">The transformation can only be used for creating queries that use data in the data flow; that is, queries that use the PREDICTION JOIN syntax.</span></span> <span data-ttu-id="d81a2-151">このコンポーネントは、コンテンツ クエリまたはその他の種類の DMX ステートメントの実行には使用できません。</span><span class="sxs-lookup"><span data-stu-id="d81a2-151">This component cannot be used for executing content queries or other kinds of DMX statements.</span></span>|  
  
##  <a name="application-programming-interfaces"></a><a name="bkmk_API"></a><span data-ttu-id="d81a2-152">アプリケーションプログラミングインターフェイス</span><span class="sxs-lookup"><span data-stu-id="d81a2-152">Application Programming Interfaces</span></span>  
 <span data-ttu-id="d81a2-153">さまざまなプログラミング言語を使用し、OLE DB、Analysis Services ADOMD クライアントなどのサーバー プロトコルを組み合わせ、データ マイニング モデルに対してクエリを実行するカスタム アプリケーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-153">You can create custom applications that execute queries against data mining models by using a variety of programming languages, in combination with server protocols such as OLE DB or Analysis Services ADOMD client.</span></span> <span data-ttu-id="d81a2-154">詳細については、「 [データ マイニングのプログラミング](../dev-guide/data-mining-programming.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d81a2-154">For more information, see [Data Mining Programming](../dev-guide/data-mining-programming.md).</span></span>  
  
 <span data-ttu-id="d81a2-155">ただし、XMLA は、Analysis Service サーバーとのすべてのやり取りのもとになるメッセージ形式を構成します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-155">However, XMLA constitutes the underlying message format for all interactions with an Analysis Service server.</span></span> <span data-ttu-id="d81a2-156">XMLA メッセージ内では、DMX に基づく予測クエリ、コンテンツ クエリ、またはデータ マイニング スキーマ行セットを使用してモデル メタデータを取得するクエリのどれを送信しているかにより、クエリの表示の方法が異なります。</span><span class="sxs-lookup"><span data-stu-id="d81a2-156">Within an XMLA message, queries are represented differently depending on whether you are sending a prediction query based on DMX, a content query, or a query that retrieves model metadata using the data mining schema rowsets.</span></span>  
  
-   <span data-ttu-id="d81a2-157">**予測クエリ** (および他のすべての DMX ステートメント) のテキストは、[Execute (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-methods-execute) メソッドを使用し、XMLA [Command (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/command-element-xmla) 要素の [Statement (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/statement-element-xmla) 要素内のテキストとして配置される DMX クエリと共に、XMLA で送信されます。</span><span class="sxs-lookup"><span data-stu-id="d81a2-157">The text of **prediction queries** (and all other DMX statements) is sent in XMLA by using the [Execute Method &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-methods-execute) method, with the DMX query placed as text within the [Statement Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/statement-element-xmla) element of the XMLA [Command Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/command-element-xmla) element.</span></span>  
  
-   <span data-ttu-id="d81a2-158">クラスター数、デシジョン ツリーで使用される属性、モデルの最終処理日、モデル作成時に使用されるアルゴリズム パラメーターなどの**モデル コンテンツ**および**モデル メタデータ**を取得するには、[Discover (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-methods-discover) メソッドを使用し、[RequestType (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/type-element-xmla) ヘッダーでデータ マイニング スキーマ行セットの 1 つを指定します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-158">To retrieve **model content** and **model metadata**, such as the number of clusters, the attributes used in decision trees, the date the model was last processed, and the algorithm parameters used when creating the model, you can use the [Discover Method &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-methods-discover) method and specify one of the data mining schema rowsets in the [RequestType Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/type-element-xmla) header.</span></span> <span data-ttu-id="d81a2-159">クエリの範囲を絞り込むには、基準を [RestrictionList (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/restrictionlist-element-xmla) 要素の制限として入力します。</span><span class="sxs-lookup"><span data-stu-id="d81a2-159">To narrow the scope of the query, enter criteria as restrictions within the [RestrictionList Element &#40;XMLA&#41;](https://docs.microsoft.com/bi-reference/xmla/xml-elements-properties/restrictionlist-element-xmla) element.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d81a2-160">参照</span><span class="sxs-lookup"><span data-stu-id="d81a2-160">See Also</span></span>  
 <span data-ttu-id="d81a2-161">[DMX&#41; リファレンス &#40;データマイニング拡張機能](/sql/dmx/data-mining-extensions-dmx-reference) </span><span class="sxs-lookup"><span data-stu-id="d81a2-161">[Data Mining Extensions &#40;DMX&#41; Reference](/sql/dmx/data-mining-extensions-dmx-reference) </span></span>  
 <span data-ttu-id="d81a2-162">[データマイニングソリューション](data-mining-solutions.md) </span><span class="sxs-lookup"><span data-stu-id="d81a2-162">[Data Mining Solutions](data-mining-solutions.md) </span></span>  
 <span data-ttu-id="d81a2-163">[DMX Select ステートメントについて](/sql/dmx/understanding-the-dmx-select-statement) </span><span class="sxs-lookup"><span data-stu-id="d81a2-163">[Understanding the DMX Select Statement](/sql/dmx/understanding-the-dmx-select-statement) </span></span>  
 <span data-ttu-id="d81a2-164">[構造と DMX 予測クエリの使用](/sql/dmx/structure-and-usage-of-dmx-prediction-queries) </span><span class="sxs-lookup"><span data-stu-id="d81a2-164">[Structure and Usage of DMX Prediction Queries](/sql/dmx/structure-and-usage-of-dmx-prediction-queries) </span></span>  
 <span data-ttu-id="d81a2-165">[予測クエリビルダーを使用して予測クエリを作成する](create-a-prediction-query-using-the-prediction-query-builder.md) </span><span class="sxs-lookup"><span data-stu-id="d81a2-165">[Create a Prediction Query Using the Prediction Query Builder](create-a-prediction-query-using-the-prediction-query-builder.md) </span></span>  
 [<span data-ttu-id="d81a2-166">SQL Server Management Studio で DMX クエリを作成する</span><span class="sxs-lookup"><span data-stu-id="d81a2-166">Create a DMX Query in SQL Server Management Studio</span></span>](create-a-dmx-query-in-sql-server-management-studio.md)  
  
  
