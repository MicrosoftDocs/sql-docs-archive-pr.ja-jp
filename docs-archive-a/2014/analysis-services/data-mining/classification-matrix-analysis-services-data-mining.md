---
title: 分類マトリックス (Analysis Services-データマイニング) |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- mining models [Analysis Services], validating
- validating data mining models
- viewing mining accuracy
- displaying mining accuracy
- confusion matrix [data mining]
- classification matrix [Analysis Services]
- accuracy testing [data mining]
ms.assetid: 5c12f202-2ed9-41fa-bee2-0f7ab3ff058a
author: minewiskan
ms.author: owend
ms.openlocfilehash: d880eb48e249d5e26611765fea7c9bd3b3e2216f
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87643643"
---
# <a name="classification-matrix-analysis-services---data-mining"></a><span data-ttu-id="3a331-102">分類マトリックス (Analysis Services - データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3a331-102">Classification Matrix (Analysis Services - Data Mining)</span></span>
  <span data-ttu-id="3a331-103">*分類マトリックス* は、モデルのすべてのケースについて、予測値が実際の値と一致したかどうかを判断してカテゴリに分類します。</span><span class="sxs-lookup"><span data-stu-id="3a331-103">A *classification matrix* sorts all cases from the model into categories, by determining whether the predicted value matched the actual value.</span></span> <span data-ttu-id="3a331-104">各カテゴリのすべてのケースがカウントされ、合計がマトリックスに表示されます。</span><span class="sxs-lookup"><span data-stu-id="3a331-104">All the cases in each category are then counted, and the totals are displayed in the matrix.</span></span> <span data-ttu-id="3a331-105">分類マトリックスは統計モデルの評価に使用する標準のツールで、 *混同行列*とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="3a331-105">The classification matrix is a standard tool for evaluation of statistical models and is sometimes referred to as a *confusion matrix*.</span></span>  
  
 <span data-ttu-id="3a331-106">**[分類マトリックス]** オプションを選択して作成されるグラフでは、実際の値が、指定した各予測状態の予測値と比較されます。</span><span class="sxs-lookup"><span data-stu-id="3a331-106">The chart that is created when you choose the **Classification Matrix** option compares actual to predicted values for each predicted state that you specify.</span></span> <span data-ttu-id="3a331-107">各マトリックスの行はモデルの予測値を表し、列は実際の値を表します。</span><span class="sxs-lookup"><span data-stu-id="3a331-107">The rows in the matrix represent the predicted values for the model, whereas the columns represent the actual values.</span></span> <span data-ttu-id="3a331-108">分析で使用されるこれらのカテゴリは、 *偽陽性*, *真陽性*, *偽陰性*、および *真陰性*と呼ばれる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3a331-108">The categories used in analysis are *false positive*, *true positive*, *false negative*, and *true negative*</span></span>  
  
 <span data-ttu-id="3a331-109">分類マトリックスは、間違った予測の影響を容易に理解し説明できるため、予測の結果を評価するための重要なツールです。</span><span class="sxs-lookup"><span data-stu-id="3a331-109">A classification matrix is an important tool for assessing the results of prediction because it makes it easy to understand and account for the effects of wrong predictions.</span></span> <span data-ttu-id="3a331-110">このマトリックスの各セルに示された数値とパーセンテージを見ると、モデルの予測が正しかった頻度がすぐにわかります。</span><span class="sxs-lookup"><span data-stu-id="3a331-110">By viewing the amount and percentages in each cell of this matrix, you can quickly see how often the model predicted accurately.</span></span>  
  
 <span data-ttu-id="3a331-111">ここでは、分類マトリックスを作成する方法と、その結果を解釈する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3a331-111">This section explains how to create a classification matrix and how to interpret the results.</span></span>  
  
## <a name="understanding-the-classification-matrix"></a><span data-ttu-id="3a331-112">分類マトリックスについて</span><span class="sxs-lookup"><span data-stu-id="3a331-112">Understanding the Classification Matrix</span></span>  
 <span data-ttu-id="3a331-113">「基本的なデータ マイニング チュートリアル」で作成したモデルを例に考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="3a331-113">Consider the model that you created as part of the Basic Data Mining Tutorial.</span></span> <span data-ttu-id="3a331-114">ターゲット メーリング キャンペーンの作成に [TM_DecisionTree] モデルを使用し、自転車を購入する可能性が最も高いのはどの顧客かを予測することができます。</span><span class="sxs-lookup"><span data-stu-id="3a331-114">The [TM_DecisionTree] model is used to help create a targeted mailing campaign, and can be used to predict which customers are most likely to buy a bike.</span></span> <span data-ttu-id="3a331-115">このモデルのこの期待される有用性をテストするには、結果の属性である [Bike Buyer] の値が既にわかっているデータセットを使用します。</span><span class="sxs-lookup"><span data-stu-id="3a331-115">To test this expected usefulness of this model, you use a data set for which the values of the outcome attribute, [Bike Buyer], are already known.</span></span> <span data-ttu-id="3a331-116">通常は、モデルのトレーニングに使用するマイニング構造を作成したときに確保しておいたテスト データセットを使用します。</span><span class="sxs-lookup"><span data-stu-id="3a331-116">Typically, you would use the testing data set that you set aside when you created the mining structure that is used for training the model.</span></span>  
  
 <span data-ttu-id="3a331-117">結果の有効値は、"yes" (顧客が自転車を購入する可能性が高い) と "no" (顧客が自転車を購入する可能性が低い) の 2 つだけです。</span><span class="sxs-lookup"><span data-stu-id="3a331-117">There are only two possible outcomes: yes (the customer is likely to buy a bike), and no (the customer will likely not purchase a bike).</span></span> <span data-ttu-id="3a331-118">したがって、結果の分類マトリックスは、比較的単純です。</span><span class="sxs-lookup"><span data-stu-id="3a331-118">Therefore, the resulting classification matrix is relatively simple.</span></span>  
  
## <a name="interpreting-the-results"></a><span data-ttu-id="3a331-119">結果の解釈</span><span class="sxs-lookup"><span data-stu-id="3a331-119">Interpreting the Results</span></span>  
 <span data-ttu-id="3a331-120">次の表は、TM_DecisionTree モデルの分類マトリックスを示しています。</span><span class="sxs-lookup"><span data-stu-id="3a331-120">The following table shows the classification matrix for the TM_DecisionTree model.</span></span> <span data-ttu-id="3a331-121">この予測可能な属性で、0 は "No" を、1 は "Yes" を意味します。</span><span class="sxs-lookup"><span data-stu-id="3a331-121">Remember that for this predictable attribute, 0 means No and 1 means Yes.</span></span>  
  
|<span data-ttu-id="3a331-122">[予測]</span><span class="sxs-lookup"><span data-stu-id="3a331-122">Predicted</span></span>|<span data-ttu-id="3a331-123">0 (実際の値)</span><span class="sxs-lookup"><span data-stu-id="3a331-123">0 (Actual)</span></span>|<span data-ttu-id="3a331-124">1 (実際の値)</span><span class="sxs-lookup"><span data-stu-id="3a331-124">1 (Actual)</span></span>|  
|---------------|------------------|------------------|  
|<span data-ttu-id="3a331-125">0</span><span class="sxs-lookup"><span data-stu-id="3a331-125">0</span></span>|<span data-ttu-id="3a331-126">362</span><span class="sxs-lookup"><span data-stu-id="3a331-126">362</span></span>|<span data-ttu-id="3a331-127">144</span><span class="sxs-lookup"><span data-stu-id="3a331-127">144</span></span>|  
|<span data-ttu-id="3a331-128">1</span><span class="sxs-lookup"><span data-stu-id="3a331-128">1</span></span>|<span data-ttu-id="3a331-129">121</span><span class="sxs-lookup"><span data-stu-id="3a331-129">121</span></span>|<span data-ttu-id="3a331-130">373</span><span class="sxs-lookup"><span data-stu-id="3a331-130">373</span></span>|  
  
 <span data-ttu-id="3a331-131">値 362 を含む最初の結果セルは、値 0 に対する *真陽性* の数を表します。</span><span class="sxs-lookup"><span data-stu-id="3a331-131">The first result cell, which contains the value 362, indicates the number of *true positives* for the value 0.</span></span> <span data-ttu-id="3a331-132">値 0 は顧客が自転車を購入しなかったことを表すため、この統計から、モデルが 362 のケースで、自転車を購入しない顧客について正しい値を予測したことがわかります。</span><span class="sxs-lookup"><span data-stu-id="3a331-132">Because 0 indicates that the customer did not purchase a bike, this statistic tells you that model predicted the correct value for non bike-buyers in 362 cases.</span></span>  
  
 <span data-ttu-id="3a331-133">その下の、値 121 を含むセルは、 *偽陽性*の数 (実際には自転車を購入しなかった顧客について購入するとモデルが予測した回数) を表します。</span><span class="sxs-lookup"><span data-stu-id="3a331-133">The cell directly underneath that one, which contains the value 121, tells you the number of *false positives*, or how many times the model predicted that someone would buy a bike when actually they did not.</span></span>  
  
 <span data-ttu-id="3a331-134">値 144 を含むセルは、値 1 に対する *偽陽性* の数を表します。</span><span class="sxs-lookup"><span data-stu-id="3a331-134">The cell that contains the value 144 indicates the number of *false positives* for the value 1.</span></span> <span data-ttu-id="3a331-135">値 1 は顧客が自転車を購入したことを表すため、この統計から、モデルが 144 のケースで、実際には自転車を購入した顧客について購入しないと予測したことがわかります。</span><span class="sxs-lookup"><span data-stu-id="3a331-135">Because 1 means that the customer did purchase a bike, this statistic tells you that in 144 cases, the model predicted someone would not buy a bike when in fact they did.</span></span>  
  
 <span data-ttu-id="3a331-136">最後の、値 373 を含むセルは、対象の値 1 に対する真陽性の数を表します。</span><span class="sxs-lookup"><span data-stu-id="3a331-136">Finally, the cell that contains the value 373 indicates the number of true positives for the target value of 1.</span></span> <span data-ttu-id="3a331-137">つまり、モデルが 373 のケースで、自転車を購入する顧客を正しく予測したことになります。</span><span class="sxs-lookup"><span data-stu-id="3a331-137">In other words, in 373 cases the model correctly predicted that someone would buy a bike.</span></span>  
  
 <span data-ttu-id="3a331-138">対角線上にあるセルの値を合計すると、モデルの全体的な精度を調べることができます。</span><span class="sxs-lookup"><span data-stu-id="3a331-138">By summing the values in cells that are diagonally adjacent, you can determine the overall accuracy of the model.</span></span> <span data-ttu-id="3a331-139">一方の対角線からは正しい予測の合計数が、もう一方の対角線からは間違った予測の合計数がわかります。</span><span class="sxs-lookup"><span data-stu-id="3a331-139">One diagonal tells you the total number of accurate predictions, and the other diagonal tells you the total number of erroneous predictions.</span></span>  
  
### <a name="using-multiple-predictable-values"></a><span data-ttu-id="3a331-140">複数の予測可能な値の使用</span><span class="sxs-lookup"><span data-stu-id="3a331-140">Using Multiple Predictable Values</span></span>  
 <span data-ttu-id="3a331-141">[Bike Buyer] のケースは、取りうる値が 2 つしかないため、特に解釈が簡単です。</span><span class="sxs-lookup"><span data-stu-id="3a331-141">The [Bike Buyer] case is especially easy to interpret because there are only two possible values.</span></span> <span data-ttu-id="3a331-142">予測可能な属性が取りうる値が複数ある場合、分類マトリックスでは、取りうる値が増えるたびに実際の値の列が追加され、予測された各値が一致した数がカウントされます。</span><span class="sxs-lookup"><span data-stu-id="3a331-142">When the predictable attribute has multiple possible values, the classification matrix adds a new column for each possible actual value and then counts the number of matches for each predicted value.</span></span> <span data-ttu-id="3a331-143">次の表は、3 つの値 (0、1、2) を取る別のモデルの結果を示しています。</span><span class="sxs-lookup"><span data-stu-id="3a331-143">The following table shows the results on a different model, where three values (0, 1, 2) are possible.</span></span>  
  
|<span data-ttu-id="3a331-144">[予測]</span><span class="sxs-lookup"><span data-stu-id="3a331-144">Predicted</span></span>|<span data-ttu-id="3a331-145">0 (実際の値)</span><span class="sxs-lookup"><span data-stu-id="3a331-145">0 (Actual)</span></span>|<span data-ttu-id="3a331-146">1 (実際の値)</span><span class="sxs-lookup"><span data-stu-id="3a331-146">1 (Actual)</span></span>|<span data-ttu-id="3a331-147">2 (実際の値)</span><span class="sxs-lookup"><span data-stu-id="3a331-147">2 (Actual)</span></span>|  
|---------------|------------------|------------------|------------------|  
|<span data-ttu-id="3a331-148">0</span><span class="sxs-lookup"><span data-stu-id="3a331-148">0</span></span>|<span data-ttu-id="3a331-149">111</span><span class="sxs-lookup"><span data-stu-id="3a331-149">111</span></span>|<span data-ttu-id="3a331-150">3</span><span class="sxs-lookup"><span data-stu-id="3a331-150">3</span></span>|<span data-ttu-id="3a331-151">5</span><span class="sxs-lookup"><span data-stu-id="3a331-151">5</span></span>|  
|<span data-ttu-id="3a331-152">1</span><span class="sxs-lookup"><span data-stu-id="3a331-152">1</span></span>|<span data-ttu-id="3a331-153">2</span><span class="sxs-lookup"><span data-stu-id="3a331-153">2</span></span>|<span data-ttu-id="3a331-154">123</span><span class="sxs-lookup"><span data-stu-id="3a331-154">123</span></span>|<span data-ttu-id="3a331-155">17</span><span class="sxs-lookup"><span data-stu-id="3a331-155">17</span></span>|  
|<span data-ttu-id="3a331-156">2</span><span class="sxs-lookup"><span data-stu-id="3a331-156">2</span></span>|<span data-ttu-id="3a331-157">19</span><span class="sxs-lookup"><span data-stu-id="3a331-157">19</span></span>|<span data-ttu-id="3a331-158">0</span><span class="sxs-lookup"><span data-stu-id="3a331-158">0</span></span>|<span data-ttu-id="3a331-159">20</span><span class="sxs-lookup"><span data-stu-id="3a331-159">20</span></span>|  
  
 <span data-ttu-id="3a331-160">列が増えたためにレポートが複雑に見えますが、この追加の詳細が、間違った予測の累積コストを評価する際に非常に役立つ場合もあります。</span><span class="sxs-lookup"><span data-stu-id="3a331-160">Although the addition of more columns makes the report look more complex, the additional detail can be very useful when you want to assess the cumulative cost of making the wrong prediction.</span></span> <span data-ttu-id="3a331-161">対角線上のセルの合計を計算したり、さまざまな行の組み合わせの結果を比較したりする際には、 **[分類マトリックス]** タブの **[コピー]** ボタンをクリックして、レポートを Excel に貼り付けることができます。</span><span class="sxs-lookup"><span data-stu-id="3a331-161">To create sums on the diagonals or to compare the results for different combinations of rows, you can click the **Copy** button provided in the **Classification Matrix** tab and paste the report into Excel.</span></span> <span data-ttu-id="3a331-162">また、 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 以降をサポートする Excel 用データ マイニング クライアントなどのクライアントを使用して、回数と割合の両方を含む分類レポートを直接 Excel で作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="3a331-162">Alternatively, you can use a client such as the Data Mining Client for Excel, which supports [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] and later versions, to create a classification report directly in Excel that includes both counts and percentages.</span></span> <span data-ttu-id="3a331-163">詳細については、「 [SQL Server データ マイニング](https://go.microsoft.com/fwlink/?LinkID=77733)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="3a331-163">For more information, see [SQL Server Data Mining](https://go.microsoft.com/fwlink/?LinkID=77733).</span></span>  
  
## <a name="restrictions-on-the-classification-matrix"></a><span data-ttu-id="3a331-164">分類マトリックスの制限</span><span class="sxs-lookup"><span data-stu-id="3a331-164">Restrictions on the Classification Matrix</span></span>  
 <span data-ttu-id="3a331-165">分類マトリックスは、不連続の予測可能な属性でのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="3a331-165">A classification matrix can be used only with discrete predictable attributes.</span></span>  
  
 <span data-ttu-id="3a331-166">**[マイニング精度チャート]** デザイナーの **[入力の選択]** タブでモデルを選択する場合、複数のモデルを追加することができますが、 **[分類マトリックス]** タブではモデルごとに別のマトリックスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="3a331-166">Although you can add multiple models when selecting models on the **Input Selection** tab of the **Mining Accuracy Chart** designer, the **Classification Matrix** tab will display a separate matrix for each model.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="3a331-167">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="3a331-167">Related Content</span></span>  
 <span data-ttu-id="3a331-168">次のトピックには、分類マトリックスやその他のチャートの構築方法と使用方法に関する詳細な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="3a331-168">The following topics contain more information about how you can build and use classification matrices and other charts.</span></span>  
  
|<span data-ttu-id="3a331-169">トピック</span><span class="sxs-lookup"><span data-stu-id="3a331-169">Topics</span></span>|<span data-ttu-id="3a331-170">リンク</span><span class="sxs-lookup"><span data-stu-id="3a331-170">Links</span></span>|  
|------------|-----------|  
|<span data-ttu-id="3a331-171">Targeted Mailing モデルのリフト チャートの作成方法に関するチュートリアルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="3a331-171">Provides a walkthrough of how to create a lift chart for the Targeted Mailing model.</span></span>|[<span data-ttu-id="3a331-172">基本的なデータ マイニング チュートリアル</span><span class="sxs-lookup"><span data-stu-id="3a331-172">Basic Data Mining Tutorial</span></span>](../../tutorials/basic-data-mining-tutorial.md)<br /><br /> [<span data-ttu-id="3a331-173">リフト チャートを使用した精度テスト (基本的なデータ マイニング チュートリアル)</span><span class="sxs-lookup"><span data-stu-id="3a331-173">Testing Accuracy with Lift Charts &#40;Basic Data Mining Tutorial&#41;</span></span>](../../tutorials/testing-accuracy-with-lift-charts-basic-data-mining-tutorial.md)|  
|<span data-ttu-id="3a331-174">関連するグラフの種類について説明します。</span><span class="sxs-lookup"><span data-stu-id="3a331-174">Explains related chart types.</span></span>|[<span data-ttu-id="3a331-175">リフト チャート &#40;Analysis Services - データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="3a331-175">Lift Chart &#40;Analysis Services - Data Mining&#41;</span></span>](lift-chart-analysis-services-data-mining.md)<br /><br /> [<span data-ttu-id="3a331-176">利益チャート (Analysis Services - データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3a331-176">Profit Chart &#40;Analysis Services - Data Mining&#41;</span></span>](profit-chart-analysis-services-data-mining.md)<br /><br /> [<span data-ttu-id="3a331-177">散布図 (Analysis Services - データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3a331-177">Scatter Plot &#40;Analysis Services - Data Mining&#41;</span></span>](scatter-plot-analysis-services-data-mining.md)|  
|<span data-ttu-id="3a331-178">マイニング モデルとマイニング構造の相互検証の使用法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3a331-178">Describes uses of cross-validation for mining models and mining structures.</span></span>|[<span data-ttu-id="3a331-179">相互検証 &#40;Analysis Services - データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="3a331-179">Cross-Validation &#40;Analysis Services - Data Mining&#41;</span></span>](cross-validation-analysis-services-data-mining.md)|  
|<span data-ttu-id="3a331-180">リフト チャートおよびその他の精度チャートを作成する手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="3a331-180">Describes steps for creating lift charts and other accuracy charts.</span></span>|[<span data-ttu-id="3a331-181">テストおよび検証タスク、および操作方法 (データ マイニング)</span><span class="sxs-lookup"><span data-stu-id="3a331-181">Testing and Validation Tasks and How-tos &#40;Data Mining&#41;</span></span>](testing-and-validation-tasks-and-how-tos-data-mining.md)|  
  
## <a name="see-also"></a><span data-ttu-id="3a331-182">参照</span><span class="sxs-lookup"><span data-stu-id="3a331-182">See Also</span></span>  
 [<span data-ttu-id="3a331-183">テストおよび検証 &#40;データ マイニング&#41;</span><span class="sxs-lookup"><span data-stu-id="3a331-183">Testing and Validation &#40;Data Mining&#41;</span></span>](testing-and-validation-data-mining.md)  
  
  
