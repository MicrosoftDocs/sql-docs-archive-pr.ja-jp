---
title: Analysis Services によってサポートされる認証方法Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b7aee903-d33a-4c20-86c2-aa013a50949f
author: minewiskan
ms.author: owend
ms.openlocfilehash: e3ce8dfc47b2c57fcc8ae336160ff81f87a8a157
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87641359"
---
# <a name="authentication-methodologies-supported-by-analysis-services"></a><span data-ttu-id="8178b-102">Analysis Services でサポートされる認証方法</span><span class="sxs-lookup"><span data-stu-id="8178b-102">Authentication methodologies supported by Analysis Services</span></span>
  <span data-ttu-id="8178b-103">クライアント アプリケーションから Analysis Services インスタンスへの接続には Windows 認証 (統合) が必要です。</span><span class="sxs-lookup"><span data-stu-id="8178b-103">Connections from a client application to an Analysis Services instance require Windows authentication (integrated).</span></span> <span data-ttu-id="8178b-104">次の手法のいずれかを使用して Windows ユーザー ID を指定できます。</span><span class="sxs-lookup"><span data-stu-id="8178b-104">You can provide a Windows user identity using any of the following methods:</span></span>  
  
-   <span data-ttu-id="8178b-105">NTLM</span><span class="sxs-lookup"><span data-stu-id="8178b-105">NTLM</span></span>  
  
-   <span data-ttu-id="8178b-106">Kerberos (詳細については、「 [Kerberos の制約付き委任のための Analysis Services の構成](configure-analysis-services-for-kerberos-constrained-delegation.md)」をご覧ください)</span><span class="sxs-lookup"><span data-stu-id="8178b-106">Kerberos (see [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md))</span></span>  
  
-   <span data-ttu-id="8178b-107">接続文字列での EffectiveUserName</span><span class="sxs-lookup"><span data-stu-id="8178b-107">EffectiveUserName on the connection string</span></span>  
  
-   <span data-ttu-id="8178b-108">基本または匿名 (HTTP アクセスの構成が必要)</span><span class="sxs-lookup"><span data-stu-id="8178b-108">Basic or Anonymous (requires configuration for HTTP access)</span></span>  
  
-   <span data-ttu-id="8178b-109">格納された資格情報</span><span class="sxs-lookup"><span data-stu-id="8178b-109">Stored credentials</span></span>  
  
 <span data-ttu-id="8178b-110">要求認証はサポートされません。</span><span class="sxs-lookup"><span data-stu-id="8178b-110">Notice that Claims authentication is not supported.</span></span> <span data-ttu-id="8178b-111">Windows クレーム トークンを使用して Analysis Services にアクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="8178b-111">You cannot use a Windows Claims token to access Analysis Services.</span></span> <span data-ttu-id="8178b-112">Analysis Services クライアント ライブラリは、Windows セキュリティ プリンシパルでのみ機能します。</span><span class="sxs-lookup"><span data-stu-id="8178b-112">The Analysis Services client libraries only work with Windows security principles.</span></span> <span data-ttu-id="8178b-113">使用する BI ソリューションにクレーム ID が含まれている場合は、各ユーザーの Windows ID シャドウ アカウントが必要になるか、保存された資格情報を使用して Analysis Services データにアクセスすることになります。</span><span class="sxs-lookup"><span data-stu-id="8178b-113">If your BI solution includes claims identities, you will need Windows identity shadow accounts for each user, or use stored credentials to access Analysis Services data.</span></span>  
  
 <span data-ttu-id="8178b-114">BI および Analysis Services の認証フローの詳細については、「 [Microsoft BI 認証と ID 委任](https://go.microsoft.com/fwlink/?LinkID=286576)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8178b-114">For more information about BI and Analysis Services authentication flows, see [Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkID=286576).</span></span>  
  
##  <a name="understanding-your-authentication-alternatives"></a><a name="bkmk_auth"></a> <span data-ttu-id="8178b-115">別の認証手法について</span><span class="sxs-lookup"><span data-stu-id="8178b-115">Understanding your authentication alternatives</span></span>  
 <span data-ttu-id="8178b-116">Analysis Services データベースへの接続には、Windows ユーザーまたはグループの ID と、関連付けられた権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="8178b-116">Connecting to an Analysis Services database requires a Windows user or group identity and associated permissions.</span></span> <span data-ttu-id="8178b-117">ID は、レポートを表示する必要のある任意のユーザーが使用する、一般的な目的のログインである場合もありますが、通常のシナリオでは、個々のユーザーの ID です。</span><span class="sxs-lookup"><span data-stu-id="8178b-117">The identity might be a general purpose login used by anyone who needs to view a report, but a more likely scenario includes the identity of individual users.</span></span>  
  
 <span data-ttu-id="8178b-118">多くの場合、表形式または多次元のモデルには、だれが要求しているかに応じて、オブジェクトごとに、またはデータ自体の内部にさまざまなレベルのデータ アクセスがあります。</span><span class="sxs-lookup"><span data-stu-id="8178b-118">Often, a tabular or multidimensional model will have different levels of data access, by object or within the data itself, based on who is making the request.</span></span> <span data-ttu-id="8178b-119">この要件を満たすには、NTLM、Kerberos、EffectiveUserName、または基本認証を使用できます。</span><span class="sxs-lookup"><span data-stu-id="8178b-119">To meet this requirement, you can use NTLM, Kerberos, EffectiveUserName, or Basic authentication.</span></span> <span data-ttu-id="8178b-120">これらの手法はすべて、各接続で異なるユーザー ID を渡すための方法です。</span><span class="sxs-lookup"><span data-stu-id="8178b-120">All of these techniques offer an approach for passing in different user identities with each connection.</span></span> <span data-ttu-id="8178b-121">ただし、これらのほとんどは、シングルホップの制限の対象です。</span><span class="sxs-lookup"><span data-stu-id="8178b-121">However, most of these choices are subject to a single hop limitation.</span></span> <span data-ttu-id="8178b-122">委任を伴う Kerberos でのみ、元のユーザー ID を、リモート サーバー上のバックエンド データ ストアへの複数のコンピューター接続にわたって使用できます。</span><span class="sxs-lookup"><span data-stu-id="8178b-122">Only Kerberos with delegation allows the original user identity to flow across multiple computer connections to a backend data store on a remote server.</span></span>  
  
 <span data-ttu-id="8178b-123">**NTLM**</span><span class="sxs-lookup"><span data-stu-id="8178b-123">**NTLM**</span></span>  
  
 <span data-ttu-id="8178b-124">`SSPI=Negotiate`を指定した接続では、Kerberos ドメイン コントローラーを使用できない場合に、NTLM がバックアップ認証サブシステムとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-124">For connections that specify `SSPI=Negotiate`, NTLM is the backup authentication subsystem used when a Kerberos domain controller is not available.</span></span> <span data-ttu-id="8178b-125">NTLM では、あらゆるユーザーまたはクライアント アプリケーションがサーバー リソースにアクセスできます。ただし、要求がクライアントからサーバーへの直接接続で、接続を要求しているユーザーにリソースへのアクセス権があり、クライアント コンピューターとサーバー コンピューターが同じドメインにある場合に限ります。</span><span class="sxs-lookup"><span data-stu-id="8178b-125">Under NTLM, any user or client application can access a server resource as long as the request is a direct connection from a client to the server, the person requesting the connection has permission to the resource, and the client and server computers are in the same domain.</span></span>  
  
 <span data-ttu-id="8178b-126">多層ソリューションでは、NLTM のシングルホップ制限が大きな制約となる場合があります。</span><span class="sxs-lookup"><span data-stu-id="8178b-126">In multi-tier solutions, the single hop restriction of NLTM can be a major constraint.</span></span> <span data-ttu-id="8178b-127">要求を行っているユーザー ID は、ただ 1 台のリモート サーバーでのみ権限を借用できます。それ以上は不可能です。</span><span class="sxs-lookup"><span data-stu-id="8178b-127">The user identity making the request can be impersonated on exactly one remote server, but travels no further.</span></span> <span data-ttu-id="8178b-128">現在の操作に、複数のコンピューターで動作しているサービスが必要な場合は、セキュリティ トークンの再利用によって、同じ ID がバックエンド サーバーでも使用できるように、Kerberos の制約付き委任を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8178b-128">If the current operation requires services running on multiple computers, you will need to configure Kerberos constrained delegation to reuse the security token on backend servers.</span></span> <span data-ttu-id="8178b-129">別の方法として、保存された資格情報または基本認証を使用して、シングルホップ接続上に新しい ID 情報を渡すこともできます。</span><span class="sxs-lookup"><span data-stu-id="8178b-129">Alternatively, you can use stored credentials or Basic authentication to pass in new identity information over a single hop connection.</span></span>  
  
 <span data-ttu-id="8178b-130">**Kerberos 認証および Kerberos 制約付き委任**</span><span class="sxs-lookup"><span data-stu-id="8178b-130">**Kerberos Authentication and Kerberos Constrained Delegation**</span></span>  
  
 <span data-ttu-id="8178b-131">Kerberos 認証は、Active Directory ドメインの Windows 統合セキュリティの基礎です。</span><span class="sxs-lookup"><span data-stu-id="8178b-131">Kerberos authentication is the basis of Windows integrated security in Active Directory domains.</span></span> <span data-ttu-id="8178b-132">NTLM のように、委任を有効にしない限り、Kerberos での権限借用はシングルホップに制限されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-132">As with NTLM, impersonation under Kerberos is limited to a single hop unless you enable delegation.</span></span>  
  
 <span data-ttu-id="8178b-133">マルチホップ接続をサポートするために、Kerberos は、制約付き委任と制約なし委任の両方を提供していますが、ほとんどのシナリオでは、制約付き委任がセキュリティの推奨方法と見なされます。</span><span class="sxs-lookup"><span data-stu-id="8178b-133">To support multi-hop connections, Kerberos provides both constrained and unconstrained delegation, but for most scenarios, constrained delegation is considered a security best practice.</span></span> <span data-ttu-id="8178b-134">制約付き委任では、サービスがユーザー ID のセキュリティ トークンを、リモート コンピューター上の指定された下位レベル サービスに渡すことが許可されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-134">Constrained delegation allows a service to pass the security token of the user identity to a designated down-level service on a remote computer.</span></span> <span data-ttu-id="8178b-135">多層アプリケーションの場合、中間層アプリケーション サーバーから、Analysis Services などのバックエンド データベースへのユーザー ID の委任は、一般的な要件です。</span><span class="sxs-lookup"><span data-stu-id="8178b-135">For multi-tier applications, delegating a user identity from a middle tier application server to a backend database such as Analysis Services is a common requirement.</span></span> <span data-ttu-id="8178b-136">たとえば、ユーザー ID に基づいてさまざまなデータを返す表形式または多次元のモデルでは、中間層サービスからの ID の委任を要求し、ユーザーが資格情報を再入力せずに済むようにしたり、セキュリティ資格情報を他の方法で入手したりします。</span><span class="sxs-lookup"><span data-stu-id="8178b-136">For example, a tabular or multidimensional model that returns different data based on user identity would require identity delegation from a middle tier service to avoid having the user re-enter credentials, or getting security credentials some other way.</span></span>  
  
 <span data-ttu-id="8178b-137">Active Directory では、制約付き委任に、追加の構成が必要です。これは、要求の送信側と受信側の両方にあるサービスが明示的に委任を承認されているためです。</span><span class="sxs-lookup"><span data-stu-id="8178b-137">Constrained delegation requires additional configuration in Active Directory, where services on both the sending and receiving end of the request are explicitly authorized for delegation.</span></span> <span data-ttu-id="8178b-138">事前に構成のコストが発生しますが、サービスを構成した後は、パスワードの更新が Active Directory で個別に管理されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-138">Although there are configuration costs up front, once the service is configured, password updates are managed independently in Active Directory.</span></span> <span data-ttu-id="8178b-139">以降で説明する、保存された資格情報オプションを使用している場合のように、アプリケーションに保存されたアカウント情報を更新する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="8178b-139">You do not need to update stored account information in applications, as you would if using the stored credentials option described further on.</span></span>  
  
 <span data-ttu-id="8178b-140">制約付き委任用に Analysis Services を構成する方法の詳細については、「 [Kerberos の制約付き委任のための Analysis Services の構成](configure-analysis-services-for-kerberos-constrained-delegation.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8178b-140">For more information about configuring Analysis Services for constrained delegation, see [Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8178b-141">Windows Server 2012 は、すべてのドメインで制約付き委任をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="8178b-141">Windows Server 2012 supports constrained delegation across domains.</span></span> <span data-ttu-id="8178b-142">対照的に、Windows Server 2008 や 2008 R2 など、より低い機能レベルのドメインでの Kerberos 制約付き委任の構成では、クライアントとサーバーのコンピューターが両方とも、同じドメインのメンバーであることが必要です。</span><span class="sxs-lookup"><span data-stu-id="8178b-142">In contrast, configuring Kerberos constrained delegation in domains at lower functional levels, such as Windows Server 2008 or 2008 R2, require both client and server computers to be members of the same domain.</span></span>  
  
 <span data-ttu-id="8178b-143">**EffectiveUserName**</span><span class="sxs-lookup"><span data-stu-id="8178b-143">**EffectiveUserName**</span></span>  
  
 <span data-ttu-id="8178b-144">EffectiveUserName は、ID 情報を Analysis Services に渡すために使用される接続文字列です。</span><span class="sxs-lookup"><span data-stu-id="8178b-144">EffectiveUserName is a connection string property used for passing identity information to Analysis Services.</span></span> <span data-ttu-id="8178b-145">PowerPivot for SharePoint は、これを使用して、ユーザーの利用状況を使用状況ログに記録します。</span><span class="sxs-lookup"><span data-stu-id="8178b-145">PowerPivot for SharePoint uses it to record user activity in the usage logs.</span></span> <span data-ttu-id="8178b-146">Excel Services と PerformancePoint Services は、これを使用して、SharePoint でブックやダッシュボードが使用するデータを取得します。</span><span class="sxs-lookup"><span data-stu-id="8178b-146">Excel Services and PerformancePoint Services can use it to retrieve data used by workbooks or dashboards in SharePoint.</span></span> <span data-ttu-id="8178b-147">また、Analysis Services インスタンスで操作を実行するカスタムのアプリケーションやスクリプトでも、この接続文字列が使用されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-147">It can also be used in custom applications or scripts that perform operations on an Analysis Services instance.</span></span>  
  
 <span data-ttu-id="8178b-148">SharePoint での EffectiveUserName の使用の詳細については、「 [Use Analysis Services EffectiveUserName in SharePoint Server 2010](https://go.microsoft.com/fwlink/?LinkId=311905)」(SharePoint Server 2010 で Analysis Services の EffectiveUserName を使用する) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8178b-148">For more information about using EffectiveUserName in SharePoint, see [Use Analysis Services EffectiveUserName in SharePoint Server 2010](https://go.microsoft.com/fwlink/?LinkId=311905).</span></span>  
  
 <span data-ttu-id="8178b-149">**基本認証と匿名ユーザー**</span><span class="sxs-lookup"><span data-stu-id="8178b-149">**Basic Authentication and Anonymous User**</span></span>  
  
 <span data-ttu-id="8178b-150">基本認証は、特定のユーザーとしてバックエンド サーバーに接続する場合の第 4 の方法となります。</span><span class="sxs-lookup"><span data-stu-id="8178b-150">Basic authentication provides yet a fourth alternative for connecting to a backend server as a specific user.</span></span> <span data-ttu-id="8178b-151">基本認証を使用すると、ワイヤ暗号化の要件が強化されて、Windows のユーザー名とパスワードが接続文字列で渡されるため、転送中に機密情報が確実に保護されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-151">Using Basic authentication, the Windows user name and password are passed on the connection string, introducing additional wire encryption requirements to ensure sensitive information is protected while in transit.</span></span> <span data-ttu-id="8178b-152">基本認証の使用の重要なメリットは、ドメインの境界を越えて認証を要求できることです。</span><span class="sxs-lookup"><span data-stu-id="8178b-152">An important advantage to using Basic authentication is that the authentication request can cross domain boundaries.</span></span>  
  
 <span data-ttu-id="8178b-153">匿名認証の場合は、匿名ユーザー ID を、特定の Windows ユーザー アカウント (既定では IUSR_GUEST) またはアプリケーション プール ID に対して設定できます。</span><span class="sxs-lookup"><span data-stu-id="8178b-153">For Anonymous authentication, you can set the anonymous user identity to a specific Windows user account (IUSR_GUEST by default) or an application pool identity.</span></span> <span data-ttu-id="8178b-154">匿名ユーザー アカウントは、Analysis Services 接続で使用され、Analysis Services インスタンスに対するデータ アクセス権限を備えている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8178b-154">The anonymous user account will be used on the Analysis Services connection, and must have data access permissions on the Analysis Services instance.</span></span> <span data-ttu-id="8178b-155">このアプローチを使用すると、匿名アカウントに関連付けられたユーザー ID のみが接続で使用されます。</span><span class="sxs-lookup"><span data-stu-id="8178b-155">When you use this approach, only the user identity associated with the Anonymous account is used on the connection.</span></span> <span data-ttu-id="8178b-156">追加の ID 管理がアプリケーションに必要な場合は、他のアプローチのいずれかを選択するか、現在の ID 管理ソリューションを補う必要があります。</span><span class="sxs-lookup"><span data-stu-id="8178b-156">If your application requires additional identity management, you will need to choose one of the other approaches, or supplement with an identity management solution that you provide.</span></span>  
  
 <span data-ttu-id="8178b-157">基本と匿名は、IIS と msmdpump.dll を使用して接続を確立し、Analysis Services を HTTP アクセス向けに構成した場合にのみ使用できます。</span><span class="sxs-lookup"><span data-stu-id="8178b-157">Basic and Anonymous are available only when you configure Analysis Services for HTTP access, using IIS and the msmdpump.dll to establish the connection.</span></span> <span data-ttu-id="8178b-158">詳細については、「 [インターネット インフォメーション サービス &#40;IIS&#41; 8.0 上の Analysis Services への HTTP アクセスの構成](configure-http-access-to-analysis-services-on-iis-8-0.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8178b-158">For more information, see [Configure HTTP Access to Analysis Services on Internet Information Services &#40;IIS&#41; 8.0](configure-http-access-to-analysis-services-on-iis-8-0.md).</span></span>  
  
 <span data-ttu-id="8178b-159">**保存された資格情報**</span><span class="sxs-lookup"><span data-stu-id="8178b-159">**Stored Credentials**</span></span>  
  
 <span data-ttu-id="8178b-160">中間層アプリケーションのほとんどには、ユーザー名とパスワードを保存する機能が含まれており、これを使用して、以降の動作で、Analysis Services や SQL Server リレーショナル エンジンなどの下位データ ストアからデータを取得します。</span><span class="sxs-lookup"><span data-stu-id="8178b-160">Most middle tier application services include functionality for storing a user name and password subsequently used to retrieve data from a down-level data store, such as Analysis Services or the SQL Server relational engine.</span></span> <span data-ttu-id="8178b-161">そのため、保存された資格情報は、データを取得するための第 5 の方法となります。</span><span class="sxs-lookup"><span data-stu-id="8178b-161">As such, stored credentials provide a fifth alternative for retrieving data.</span></span> <span data-ttu-id="8178b-162">このアプローチでの制限としては、ユーザー名とパスワードを最新の状態に保つためのメンテナンスのオーバーヘッドと、接続での単一の ID の使用があります。</span><span class="sxs-lookup"><span data-stu-id="8178b-162">Limitations with this approach include maintenance overhead associated with keeping user names and passwords up to date, and the use of a single identity on the connection.</span></span> <span data-ttu-id="8178b-163">本来の呼び出し元の ID がソリューションに必要な場合、保存された資格情報は、利用可能な方法ではありません。</span><span class="sxs-lookup"><span data-stu-id="8178b-163">If your solution requires the identity of the original caller, then stored credentials would not be a viable alternative.</span></span>  
  
 <span data-ttu-id="8178b-164">保存された資格情報の詳細については、「[共有データ ソースを作成、変更、および削除する &#40;SSRS&#41;](../../reporting-services/report-data/create-modify-and-delete-shared-data-sources-ssrs.md)」および「[SharePoint Server 2013 の Secure Store Service で Excel Services を使用する](https://go.microsoft.com/fwlink/?LinkID=309869)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8178b-164">For more information about stored credentials, see [Create, Modify, and Delete Shared Data Sources &#40;SSRS&#41;](../../reporting-services/report-data/create-modify-and-delete-shared-data-sources-ssrs.md) and [Use Excel Services with Secure Store Service in SharePoint Server 2013](https://go.microsoft.com/fwlink/?LinkID=309869).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8178b-165">参照</span><span class="sxs-lookup"><span data-stu-id="8178b-165">See Also</span></span>  
 <span data-ttu-id="8178b-166">[トランスポートセキュリティでの権限借用の使用](https://go.microsoft.com/fwlink/?LinkId=311727) </span><span class="sxs-lookup"><span data-stu-id="8178b-166">[Using Impersonation with Transport Security](https://go.microsoft.com/fwlink/?LinkId=311727) </span></span>  
 <span data-ttu-id="8178b-167">[インターネットインフォメーションサービス &#40;IIS&#41; 8.0 の Analysis Services への HTTP アクセスを構成する](configure-http-access-to-analysis-services-on-iis-8-0.md) </span><span class="sxs-lookup"><span data-stu-id="8178b-167">[Configure HTTP Access to Analysis Services on Internet Information Services &#40;IIS&#41; 8.0](configure-http-access-to-analysis-services-on-iis-8-0.md) </span></span>  
 <span data-ttu-id="8178b-168">[Kerberos の制約付き委任の Analysis Services を構成する](configure-analysis-services-for-kerberos-constrained-delegation.md) </span><span class="sxs-lookup"><span data-stu-id="8178b-168">[Configure Analysis Services for Kerberos constrained delegation](configure-analysis-services-for-kerberos-constrained-delegation.md) </span></span>  
 <span data-ttu-id="8178b-169">[Analysis Services インスタンスの SPN の登録](spn-registration-for-an-analysis-services-instance.md) </span><span class="sxs-lookup"><span data-stu-id="8178b-169">[SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md) </span></span>  
 [<span data-ttu-id="8178b-170">Analysis Services への接続</span><span class="sxs-lookup"><span data-stu-id="8178b-170">Connect to Analysis Services</span></span>](connect-to-analysis-services.md)  
  
  
