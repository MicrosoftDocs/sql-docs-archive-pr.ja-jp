---
title: テーブルモデルでの DAX について (SSAS テーブル)Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: b2693985-1bea-4861-a100-cea4761ba809
author: minewiskan
ms.author: owend
ms.openlocfilehash: 4bf7dc2f41a1d42e8b565459c3b094479d937a91
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87644151"
---
# <a name="understanding-dax-in-tabular-models-ssas-tabular"></a><span data-ttu-id="6c36d-102">テーブル モデルでの DAX について (SSAS テーブル)</span><span class="sxs-lookup"><span data-stu-id="6c36d-102">Understanding DAX in Tabular Models (SSAS Tabular)</span></span>
  <span data-ttu-id="6c36d-103">Data Analysis Expressions (DAX) は、 [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] for Microsoft Excel のブックおよび [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] のテーブル モデル プロジェクトでカスタムの計算を作成するための数式言語です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-103">Data Analysis Expressions (DAX) is the formula language used to create custom calculations in [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] for Microsoft Excel workbooks and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] tabular model projects.</span></span> <span data-ttu-id="6c36d-104">DAX の数式は、テーブル内や列内のデータに対して高度な計算を実行するための関数、演算子、値などで構成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-104">DAX formulas include functions, operators, and values to perform advanced calculations on data in tables and columns.</span></span>  
  
 <span data-ttu-id="6c36d-105">DAX は、 [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] ブックとテーブル モデル プロジェクトのどちらでも利用できますが、このトピックでは、 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]で作成したテーブル モデル プロジェクトでの利用を想定して取り上げます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-105">While DAX applies to both [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] workbooks and tabular model projects, this topic applies more to tabular model projects authored in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span> <span data-ttu-id="6c36d-106">このトピックを読むには、テーブル モデルについて十分に理解している必要があります。 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]におけるテーブル モデル プロジェクト作成環境についても、よく理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-106">Before reading this topic, you should have a good understanding of tabular models and the tabular model project authoring environment in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="6c36d-107">このトピックのセクション:</span><span class="sxs-lookup"><span data-stu-id="6c36d-107">Sections in this topic:</span></span>  
  
-   [<span data-ttu-id="6c36d-108">テーブルモデルでの DAX</span><span class="sxs-lookup"><span data-stu-id="6c36d-108">DAX in Tabular Models</span></span>](#bkmk_DAXintm)  
  
-   [<span data-ttu-id="6c36d-109">計算列、メジャー、および行フィルターにおける DAX の数式</span><span class="sxs-lookup"><span data-stu-id="6c36d-109">DAX Formulas in Calculated Columns, Measures, and Row Filters</span></span>](#bkmk_DAX)  
  
-   [<span data-ttu-id="6c36d-110">DAX データ型</span><span class="sxs-lookup"><span data-stu-id="6c36d-110">DAX Data Types</span></span>](#bkmk_DAX_datatypes)  
  
-   [<span data-ttu-id="6c36d-111">DAX 演算子</span><span class="sxs-lookup"><span data-stu-id="6c36d-111">DAX Operators</span></span>](#bkmk_DAX_opertors)  
  
-   [<span data-ttu-id="6c36d-112">DAX の数式</span><span class="sxs-lookup"><span data-stu-id="6c36d-112">DAX Formulas</span></span>](#bkmk_DAX_Formulas)  
  
-   [<span data-ttu-id="6c36d-113">DAX 関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-113">DAX Functions</span></span>](#bkmk_DAX_functions)  
  
-   [<span data-ttu-id="6c36d-114">DAX の数式のコンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-114">Context in DAX Formulas</span></span>](#bkmk_context)  
  
-   [<span data-ttu-id="6c36d-115">数式とテーブル モデル</span><span class="sxs-lookup"><span data-stu-id="6c36d-115">Formulas and the Tabular Model</span></span>](#bkmk_RelModel)  
  
-   [<span data-ttu-id="6c36d-116">テーブルと列の操作</span><span class="sxs-lookup"><span data-stu-id="6c36d-116">Working with Tables and Columns</span></span>](#bkmk_tables)  
  
-   [<span data-ttu-id="6c36d-117">数式の結果の更新 (処理)</span><span class="sxs-lookup"><span data-stu-id="6c36d-117">Updating the Results of Formulas (Process)</span></span>](#bkmk_RefreshRecalc)  
  
-   [<span data-ttu-id="6c36d-118">数式内のエラーのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="6c36d-118">Troubleshooting Errors in Formulas</span></span>](#bkmk_troubleshoot)  
  
-   [<span data-ttu-id="6c36d-119">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="6c36d-119">Additional Resources</span></span>](#bkmk_addional_resources)  
  
##  <a name="dax-in-tabular-models"></a><a name="bkmk_DAXintm"></a><span data-ttu-id="6c36d-120">テーブルモデルでの DAX</span><span class="sxs-lookup"><span data-stu-id="6c36d-120">DAX in Tabular Models</span></span>  
 <span data-ttu-id="6c36d-121">[!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] とテーブル モデルのどちらでも、それぞれのデータセットから DAX の数式によって値が計算されるしくみに、機能上の違いはありません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-121">In both [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)] and tabular models, functionally, there is no difference in how DAX formulas calculate values from their respective data sets.</span></span> <span data-ttu-id="6c36d-122">ただし、ブックおよびモデル作成ツールにおいて DAX の数式がどこで作成されるのか、また、特定のメジャーのコンテキストがどこで評価されるのかという点は異なります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-122">However, where DAX formulas are created in the workbook and model authoring tools is different, as well as where context in certain measures is evaluated.</span></span>  
  
 <span data-ttu-id="6c36d-123">[!INCLUDE[ssGemini](../../includes/ssgemini-md.md)]では、セルフサービス ビジネス インテリジェンス分析を目的としてブックのユーザーが計算式を作成するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-123">In [!INCLUDE[ssGemini](../../includes/ssgemini-md.md)], calculation formulas are typically created by the workbook user for self-service business intelligence analysis.</span></span> <span data-ttu-id="6c36d-124">PowerPivot ウィンドウでテーブルに対する計算列が作成され、ピボットテーブルまたは計算領域でメジャーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-124">Calculated columns are created for a table in the PowerPivot window, and measures are created in PivotTables or the calculation area.</span></span> <span data-ttu-id="6c36d-125">テーブル モデル プロジェクトとは異なり、PowerPivot ブックには、データをセキュリティ保護するために DAX 式を使用できる、ロールベースのセキュリティ機能が備わっていません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-125">Unlike tabular model projects, PowerPivot workbooks do not provide role-based security, which can use DAX formulas to secure data.</span></span>  
  
 <span data-ttu-id="6c36d-126">テーブル モデル プロジェクトでは、計算式は、モデルの作成者が [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] のモデル デザイナーで作成します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-126">In tabular model projects, calculation formulas are created in the model designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] by model authors.</span></span> <span data-ttu-id="6c36d-127">メジャー グリッドのメジャー プレビュー機能を除き、DAX の数式を使用して計算された計算列の値は、モデル デザイナーのテーブルにすぐに表示されますが、メジャーはユーザーが [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] や Microsoft Excel 内のピボットテーブルなどのレポート クライアントでフィルターを指定するまで計算されません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-127">While values for calculated columns, calculated by using DAX formulas, appear immediately in the table in the model designer, with exception to the measure preview feature in the measure grid, measures are not calculated until a user specifies a filter in a reporting client such as [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] or in PivotTables in Microsoft Excel.</span></span>  
  
 <span data-ttu-id="6c36d-128">新しいテーブル モデル プロジェクトに対し、"PowerPivot からのインポート" プロジェクト テンプレートを使用して PowerPivot ブックをインポートした場合、新しいテーブル モデルには、計算列に対する DAX の数式が自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-128">If you import a PowerPivot workbook into a new tabular model project by using the Import from PowerPivot project template, DAX formulas for calculated columns will be automatically created in the new tabular model.</span></span> <span data-ttu-id="6c36d-129">そのブック内の暗黙的なメジャーと明示的なメジャーに対する DAX の数式は、新しいテーブル モデルには明示的なメジャーとして自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-129">DAX formulas for implicit and explicit measures in the workbook will be automatically created in the new tabular model as explicit measures.</span></span> <span data-ttu-id="6c36d-130">PowerPivot ブックにはロールおよびセキュリティ保護行フィルターの機能が最初から存在するわけではありません。そのため、モデル データにロールのメンバーがアクセスできるようにするには、新しいテーブル モデルに少なくとも 1 つのロールを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-130">Because role and secure row filter functionality do not already exist in PowerPivot workbooks, you will need to create at least one role in the new tabular model to provide model data access to role members.</span></span> <span data-ttu-id="6c36d-131">行フィルターにおいて DAX 式が必要となるのは、テーブル データのセキュリティを行レベルで確保する場合のみです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-131">DAX formulas in row filters are necessary only if you want to secure table data at the row-level.</span></span>  
  
##  <a name="dax-formulas-in-calculated-columns-measures-and-row-filters"></a><a name="bkmk_DAX"></a><span data-ttu-id="6c36d-132">計算列、メジャー、および行フィルターにおける DAX の数式</span><span class="sxs-lookup"><span data-stu-id="6c36d-132">DAX Formulas in Calculated Columns, Measures, and Row Filters</span></span>  
 <span data-ttu-id="6c36d-133">[!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]で作成されるテーブル モデルでは、計算列、メジャー、および行フィルターで DAX の数式が使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-133">For tabular models authored in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], DAX formulas are used in calculated columns, measures, and row filters.</span></span>  
  
### <a name="calculated-columns"></a><span data-ttu-id="6c36d-134">計算列</span><span class="sxs-lookup"><span data-stu-id="6c36d-134">Calculated Columns</span></span>  
 <span data-ttu-id="6c36d-135">計算列は、(モデル デザイナーで) 既存のテーブルに追加する列であり、その列の値は、DAX の数式を作成することによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-135">A calculated column is a column that you add to an existing table (in the model designer) and then create a DAX formula that defines the column values.</span></span> <span data-ttu-id="6c36d-136">計算列に対する式は、モデル デザイナーから数式バーを使用して作成します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-136">You create formulas for calculated columns in the model designer by using the formula bar.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6c36d-137">計算列は、DirectQuery モードを使用してリレーショナル データ ソースからデータを取得するモデルではサポートされません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-137">Calculated columns are not supported for models that retrieve data from a relational data source using DirectQuery mode.</span></span>  
  
 <span data-ttu-id="6c36d-138">計算列に格納されているのが有効な DAX 数式であれば、その式を入力するとすぐ行ごとに値が計算されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-138">When a calculated column contains a valid DAX formula, values are calculated for each row as soon as the formula is entered.</span></span> <span data-ttu-id="6c36d-139">そして、値はデータベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-139">Values are then stored in the database.</span></span> <span data-ttu-id="6c36d-140">たとえば、Date テーブルで、数式バーに「 `=[Calendar Year] & " Q" & [Calendar Quarter]` 」という数式を入力すると、テーブルの各行の値が計算されます。具体的には、(同じ Date テーブルの) Calendar Year 列の値にスペースと大文字の Q が付加され、さらに (同じ Date テーブルの) Calendar Quarter 列の値が付加されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-140">For example, in a Date table, when the formula `=[Calendar Year] & " Q" & [Calendar Quarter]` is entered into the formula bar, a value for each row in the table is calculated by taking values from the Calendar Year column (in the same Date table), adding a space and the capital letter Q, and then adding the values from the Calendar Quarter column (in the same Date table).</span></span> <span data-ttu-id="6c36d-141">計算列の各行の結果が直ちに計算されて、たとえば、" **2010 Q1**" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-141">The result for each row in the calculated column is calculated immediately and appears, for example, as **2010 Q1**.</span></span> <span data-ttu-id="6c36d-142">データが再処理された場合に限り、列の値が再計算されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-142">Column values are only recalculated if the data is re-processed.</span></span>  
  
 <span data-ttu-id="6c36d-143">詳細については、「 [計算列 &#40;SSAS テーブル&#41;](ssas-calculated-columns.md)で作成したテーブル モデル プロジェクトでの利用を想定して取り上げます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-143">For more information, see [Calculated Columns &#40;SSAS Tabular&#41;](ssas-calculated-columns.md).</span></span>  
  
### <a name="measures"></a><span data-ttu-id="6c36d-144">メジャー</span><span class="sxs-lookup"><span data-stu-id="6c36d-144">Measures</span></span>  
 <span data-ttu-id="6c36d-145">メジャーは、コンテキストに応じて結果が変化する動的な数式です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-145">Measures are dynamic formulas where the results change depending on context.</span></span> <span data-ttu-id="6c36d-146">メジャーは、 [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] レポートや Excel ピボットテーブル、ピボットグラフなど、複数の属性を使用するモデル データの組み合わせとフィルター処理をサポートするレポート形式で使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-146">Measures are used in reporting formats that support combining and filtering model data by using multiple attributes such as a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report or Excel PivotTable or PivotChart.</span></span> <span data-ttu-id="6c36d-147">テーブル モデル プロジェクトでは、モデル作成者が、 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]からモデル デザイナーで、メジャー グリッド (および数式バー) を使用してメジャーを定義します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-147">In tabular model projects, measures are defined by the model author by using the measure grid (and formula bar) in the model designer in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="6c36d-148">メジャーの数式で、COUNT や SUM など、オート SUM 機能を使用して自動的に作成された標準の集計関数を使用することも、DAX を使用して独自の数式を定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-148">A formula in a measure can use standard aggregation functions automatically created by using the Autosum feature, such as COUNT or SUM, or you can define your own formula by using DAX.</span></span> <span data-ttu-id="6c36d-149">数式バーでメジャーの数式を定義すると、現在のコンテキスト全体に対する結果のプレビューがツールヒント機能を使用して表示されます。ただし、それ以外の結果はすぐには表示されません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-149">When you define a formula for a measure in the formula bar, a Tooltip feature shows a preview of what the results would be for the total in the current context, but otherwise the results are not immediately output anywhere.</span></span> <span data-ttu-id="6c36d-150">メジャーに関するその他の詳しい情報は、 **[プロパティ]** ペインに表示されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-150">Other measure details also appear in the **Properties** pane.</span></span>  
  
 <span data-ttu-id="6c36d-151">(フィルターされた) 計算結果をすぐに確認できない理由は、コンテキストがない限りメジャーの結果が決定されないためです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-151">The reason you cannot see the (filtered) results of the calculation immediately is because the result of a measure cannot be determined without context.</span></span> <span data-ttu-id="6c36d-152">メジャーを評価するには、各セルに関連するデータを取得して、各セルの式を評価するために必要なコンテキストを提供できるレポート クライアント アプリケーションが必要です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-152">To evaluate a measure requires a reporting client application that can provide the context needed to retrieve the data relevant to each cell and then evaluate the expression for each cell.</span></span> <span data-ttu-id="6c36d-153">クライアントとしては、Excel ピボットテーブル (またはピボットグラフ)、 [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] レポート、または MDX クエリを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-153">That client might be an Excel PivotTable or PivotChart, a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report, or an MDX query.</span></span> <span data-ttu-id="6c36d-154">レポート クライアントにかかわらず、結果では各セルについて個別のクエリが実行されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-154">Regardless of the reporting client, a separate query is run for each cell in the results.</span></span> <span data-ttu-id="6c36d-155">つまり、ピボットテーブルでの行見出しと列見出しの組み合わせごとに、または [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] レポートで選択されているスライサーとフィルターごとに、メジャーの計算を行うデータから異なるサブセットが生成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-155">That is to say, each combination of row and column headers in a PivotTable, or each selection of slicers and filters in a [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] report, generates a different subset of data over which the measure is calculated.</span></span> <span data-ttu-id="6c36d-156">たとえば、数式を含んだメジャー " `Total Sales:=SUM([Sales Amount])`" において、ユーザーが、ピボットテーブルの [値] ウィンドウで Total Sales メジャーを配置し、その後、Product テーブルの Product Category 列を [フィルター] ウィンドウに配置した場合、Sales Amount の合計が製品カテゴリごとに計算されて表示されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-156">For example, in a measure with the formula, `Total Sales:=SUM([Sales Amount])`, when a user places the Total Sales measure in the Values window in a PivotTable, and then places the Product Category column from a Product table into the Filters window, the sum of Sales Amount is calculated and displayed for each product category.</span></span>  
  
 <span data-ttu-id="6c36d-157">計算された列/行フィルターとは異なり、メジャーの構文には、数式の前に付けられるメジャーの名前が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-157">Unlike calculated columns and row filters, the syntax for a measure includes the measure's name preceding the formula.</span></span> <span data-ttu-id="6c36d-158">この例では、" **Total Sales:** " という名前が数式の前に付きます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-158">In the example just provided, the name **Total Sales:** appears preceding the formula.</span></span> <span data-ttu-id="6c36d-159">メジャーの作成が終了すると、名前と定義がレポート クライアント アプリケーションのフィールド リストに表示され、パースペクティブとロールに応じて、モデルのすべてのユーザーがメジャーを利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-159">After you have created a measure, the name and its definition appear in the reporting client application Field List and depending on perspectives and roles is available to all users of the model.</span></span>  
  
 <span data-ttu-id="6c36d-160">詳細については、「 [メジャー &#40;SSAS テーブル&#41;](measures-ssas-tabular.md)で作成したテーブル モデル プロジェクトでの利用を想定して取り上げます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-160">For more information, see [Measures &#40;SSAS Tabular&#41;](measures-ssas-tabular.md).</span></span>  
  
### <a name="row-filters"></a><span data-ttu-id="6c36d-161">行フィルター</span><span class="sxs-lookup"><span data-stu-id="6c36d-161">Row Filters</span></span>  
 <span data-ttu-id="6c36d-162">行フィルターは、テーブル内のどの行が特定のロールのメンバーに表示されるのかを指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-162">Row filters define which rows in a table are visible to members of a particular role.</span></span> <span data-ttu-id="6c36d-163">行フィルターは、DAX 式を使用してモデル内の各テーブルに対して作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-163">Row filters can be created for each table in a model by using DAX formulas.</span></span> <span data-ttu-id="6c36d-164">行フィルターは、特定のロールに対し、 [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]のロール マネージャーを使用して作成されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-164">Row filters are created for a particular role by using Role Manager in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="6c36d-165">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]からロールのプロパティを使用し、配置済みのモデルに対して行フィルターを定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-165">Row filters can also be defined for a deployed model by using Role Properties in [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="6c36d-166">行フィルターでは、DAX の数式 (これはブール値の TRUE/FALSE 条件に評価される必要がある) により、その特定のロール メンバーがクエリ結果を返す行が定義されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-166">In a row filter, a DAX formula, which must evaluate to a Boolean TRUE/FALSE condition, defines which rows can be returned by the results of a query by members of that particular role.</span></span> <span data-ttu-id="6c36d-167">DAX の数式に含まれていない行は返されません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-167">Rows not included in the DAX formula cannot be returned.</span></span> <span data-ttu-id="6c36d-168">たとえば、Sales ロールのメンバーの場合、 `=Customers[Country] = "USA"`という DAX 式を持つ Customers テーブルでは、米国内の顧客データのみを表示でき、SUM などの集計は米国内の顧客だけを対象にした値を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-168">For example, for members of the Sales role, the Customers table with the following DAX formula, `=Customers[Country] = "USA"`, members of the Sales role will only be able to view data for customers in the USA, and aggregates, such as SUM are returned only for customers in the USA.</span></span>  
  
 <span data-ttu-id="6c36d-169">DAX の数式を使用して行フィルターを定義する場合、許可済みの行セットを作成していることになります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-169">When you define a row filter by using DAX formula, you are creating an allowed row set.</span></span> <span data-ttu-id="6c36d-170">これは、他の行へのアクセスを否定するのではなく、単に、許可済みの行セットの一部として、それらは返されないだけです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-170">This does not deny access to other rows; rather, they are simply not returned as part of the allowed row set.</span></span> <span data-ttu-id="6c36d-171">他のロールは、DAX の数式によって除外された行へのアクセスを許可できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-171">Other roles can allow access to the rows excluded by the DAX formula.</span></span> <span data-ttu-id="6c36d-172">ユーザーが別のロールに属するとき、そのロールの行フィルターで特定の行セットへのアクセスが許可される場合、そのユーザーはその行のデータを表示できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-172">If a user is a member of another role, and that role's row filters allow access to that particular row set, the user can view data for that row.</span></span>  
  
 <span data-ttu-id="6c36d-173">行フィルターは、指定行と関連行に適用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-173">Row filters apply to the specified rows as well as related rows.</span></span> <span data-ttu-id="6c36d-174">1 つのテーブルに複数のリレーションシップがある場合、フィルターによりセキュリティがアクティブなリレーションシップに適用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-174">When a table has multiple relationships, filters apply security for the relationship that is active.</span></span> <span data-ttu-id="6c36d-175">行フィルターには、関連テーブルに対して定義された他の行フィルターと類似する点があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-175">Row filters will be intersected with other row filters defined for related tables.</span></span>  
  
 <span data-ttu-id="6c36d-176">詳しくは、「 [ロール &#40;SSAS テーブル&#41;](roles-ssas-tabular.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-176">For more information, see [Roles &#40;SSAS Tabular&#41;](roles-ssas-tabular.md).</span></span>  
  
##  <a name="dax-data-types"></a><a name="bkmk_DAX_datatypes"></a> <span data-ttu-id="6c36d-177">DAX データ型</span><span class="sxs-lookup"><span data-stu-id="6c36d-177">DAX Data Types</span></span>  
 <span data-ttu-id="6c36d-178">多様なデータ型をサポートするさまざまなデータ ソースから、モデルにデータをインポートできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-178">You can import data into a model from many different data sources that might support different data types.</span></span> <span data-ttu-id="6c36d-179">モデルにデータをインポートする場合、そのデータはいずれかのテーブル モデル データ型に変換されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-179">When you import data into a model, the data is converted to one of the tabular model data types.</span></span> <span data-ttu-id="6c36d-180">モデル データが計算に使用される場合、そのデータは計算中および計算の出力時に DAX データ型に変換されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-180">When the model data is used in a calculation, the data is then converted to a DAX data type for the duration and output of the calculation.</span></span> <span data-ttu-id="6c36d-181">DAX の数式を作成すると、数式に使用されている語句によって、返される値のデータ型が自動的に判断されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-181">When you create a DAX formula, the terms used in the formula will automatically determine the value data type returned.</span></span>  
  
 <span data-ttu-id="6c36d-182">テーブル モデルと DAX の組み合わせでは、次のデータ型がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-182">Tabular models, and DAX, support the following data types:</span></span>  
  
|<span data-ttu-id="6c36d-183">モデルでのデータ型</span><span class="sxs-lookup"><span data-stu-id="6c36d-183">Data type in model</span></span>|<span data-ttu-id="6c36d-184">DAX のデータ型</span><span class="sxs-lookup"><span data-stu-id="6c36d-184">Data type in DAX</span></span>|<span data-ttu-id="6c36d-185">説明</span><span class="sxs-lookup"><span data-stu-id="6c36d-185">Description</span></span>|  
|------------------------|----------------------|-----------------|  
|<span data-ttu-id="6c36d-186">整数</span><span class="sxs-lookup"><span data-stu-id="6c36d-186">Whole Number</span></span>|<span data-ttu-id="6c36d-187">64 ビット (8 バイト) の整数値 <sup>1、2</sup></span><span class="sxs-lookup"><span data-stu-id="6c36d-187">A 64 bit (eight-bytes) integer value <sup>1, 2</sup></span></span>|<span data-ttu-id="6c36d-188">小数点以下を含まない数値。</span><span class="sxs-lookup"><span data-stu-id="6c36d-188">Numbers that have no decimal places.</span></span> <span data-ttu-id="6c36d-189">整数は正の数値または負の数値のどちらも有効ですが、-9,223,372,036,854,775,808 (-2^63) ～ 9,223,372,036,854,775,807 (2^63-1) の範囲の整数でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-189">Integers can be positive or negative numbers, but must be whole numbers between -9,223,372,036,854,775,808 (-2^63) and 9,223,372,036,854,775,807 (2^63-1).</span></span>|  
|<span data-ttu-id="6c36d-190">10 進数</span><span class="sxs-lookup"><span data-stu-id="6c36d-190">Decimal Number</span></span>|<span data-ttu-id="6c36d-191">64 ビット (8 バイト) の実数 <sup>1、2</sup></span><span class="sxs-lookup"><span data-stu-id="6c36d-191">A 64 bit (eight-bytes) real number <sup>1, 2</sup></span></span>|<span data-ttu-id="6c36d-192">小数点以下を含む数値。</span><span class="sxs-lookup"><span data-stu-id="6c36d-192">Real numbers are numbers that can have decimal places.</span></span> <span data-ttu-id="6c36d-193">実数では次のような幅広い値が有効です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-193">Real numbers cover a wide range of values:</span></span><br /><br /> <span data-ttu-id="6c36d-194">負の値 (-1.79E +308 ～ -2.23E -308 の範囲)</span><span class="sxs-lookup"><span data-stu-id="6c36d-194">Negative values from -1.79E +308 through -2.23E -308</span></span><br /><br /> <span data-ttu-id="6c36d-195">ゼロ</span><span class="sxs-lookup"><span data-stu-id="6c36d-195">Zero</span></span><br /><br /> <span data-ttu-id="6c36d-196">正の値 (2.23E -308 ～ 1.79E + 308 の範囲)</span><span class="sxs-lookup"><span data-stu-id="6c36d-196">Positive values from 2.23E -308 through 1.79E + 308</span></span><br /><br /> <span data-ttu-id="6c36d-197">ただし、有効桁数は小数点以下が 17 桁に制限されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-197">However, the number of significant digits is limited to 17 decimal digits.</span></span>|  
|<span data-ttu-id="6c36d-198">Boolean</span><span class="sxs-lookup"><span data-stu-id="6c36d-198">Boolean</span></span>|<span data-ttu-id="6c36d-199">Boolean</span><span class="sxs-lookup"><span data-stu-id="6c36d-199">Boolean</span></span>|<span data-ttu-id="6c36d-200">True または False の値。</span><span class="sxs-lookup"><span data-stu-id="6c36d-200">Either a True or False value.</span></span>|  
|<span data-ttu-id="6c36d-201">Text</span><span class="sxs-lookup"><span data-stu-id="6c36d-201">Text</span></span>|<span data-ttu-id="6c36d-202">String</span><span class="sxs-lookup"><span data-stu-id="6c36d-202">String</span></span>|<span data-ttu-id="6c36d-203">Unicode 文字データ文字列。</span><span class="sxs-lookup"><span data-stu-id="6c36d-203">A Unicode character data string.</span></span> <span data-ttu-id="6c36d-204">文字列、数字、またはテキスト形式で表現される日付を使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-204">Can be strings, numbers or dates represented in a text format.</span></span>|  
|<span data-ttu-id="6c36d-205">Date</span><span class="sxs-lookup"><span data-stu-id="6c36d-205">Date</span></span>|<span data-ttu-id="6c36d-206">Date/time</span><span class="sxs-lookup"><span data-stu-id="6c36d-206">Date/time</span></span>|<span data-ttu-id="6c36d-207">許容された日付時刻表現による日付および時刻。</span><span class="sxs-lookup"><span data-stu-id="6c36d-207">Dates and times in an accepted date-time representation.</span></span><br /><br /> <span data-ttu-id="6c36d-208">1900 年 3 月 1 日より後のすべての日付が有効です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-208">Valid dates are all dates after March 1, 1900.</span></span>|  
|<span data-ttu-id="6c36d-209">通貨</span><span class="sxs-lookup"><span data-stu-id="6c36d-209">Currency</span></span>|<span data-ttu-id="6c36d-210">通貨</span><span class="sxs-lookup"><span data-stu-id="6c36d-210">Currency</span></span>|<span data-ttu-id="6c36d-211">通貨データ型では、-922,337,203,685,477.5808 ～ 922,337,203,685,477.5807 の範囲の値 (小数点以下が 4 桁で有効桁数が固定長) が有効です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-211">Currency data type allows values between -922,337,203,685,477.5808 to 922,337,203,685,477.5807 with four decimal digits of fixed precision.</span></span>|  
|<span data-ttu-id="6c36d-212">該当なし</span><span class="sxs-lookup"><span data-stu-id="6c36d-212">N/A</span></span>|<span data-ttu-id="6c36d-213">新規</span><span class="sxs-lookup"><span data-stu-id="6c36d-213">Blank</span></span>|<span data-ttu-id="6c36d-214">空白は、DAX では SQL の NULL に相当するデータ型です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-214">A blank is a data type in DAX that represents and replaces SQL nulls.</span></span> <span data-ttu-id="6c36d-215">空白を作成するには BLANK 関数を使用し、空白かどうかをテストするには論理関数の ISBLANK を使用します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-215">You can create a blank by using the BLANK function, and test for blanks by using the logical function, ISBLANK.</span></span>|  
  
 <span data-ttu-id="6c36d-216">テーブル モデルには、多くの DAX 関数の入力または出力として使用される Table データ型が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-216">Tabular models also include the Table data type as the input or output to many DAX functions.</span></span> <span data-ttu-id="6c36d-217">たとえば、FILTER 関数は、入力としてテーブルを受け取り、フィルター条件を満たした行のみを含んだ別のテーブルを出力します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-217">For example, the FILTER function takes a table as input and outputs another table that contains only the rows that meet the filter conditions.</span></span> <span data-ttu-id="6c36d-218">テーブル関数と集計関数を組み合わせることにより、動的に定義されるデータセットに対して複雑な計算を実行することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-218">By combining table functions with aggregation functions, you can perform complex calculations over dynamically defined data sets.</span></span>  
  
 <span data-ttu-id="6c36d-219">通常、データ型は自動的に設定されますが、データ型とは何か、それらが特に DAX の数式においてどのように利用されているかを知ることは大切です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-219">While data types are typically automatically set, it is important to understand data types and how they apply, in-particular, to DAX formulas.</span></span> <span data-ttu-id="6c36d-220">たとえば、式のエラーや予期しない結果は、データ型に対して使用できない特定の演算子を引数に指定したことが原因で発生することが少なくありません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-220">Errors in formulas or unexpected results, for example, are often caused by using a particular operator that cannot be used with a data type specified in an argument.</span></span> <span data-ttu-id="6c36d-221">たとえば、「 `= 1 & 2`」という数式では、文字列の結果 (12) が返されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-221">For example, the formula, `= 1 & 2`, returns a string result of 12.</span></span> <span data-ttu-id="6c36d-222">これに対し、「 `= "1" + "2"`」という数式では、整数の結果 (3) が返されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-222">The formula, `= "1" + "2"`, however, returns an integer result of 3.</span></span>  
  
 <span data-ttu-id="6c36d-223">テーブル モデルのデータ型とその明示的な変換および暗黙的な変換の詳細については、「[サポートされているデータ型 &#40;SSAS テーブル&#41;](data-types-supported-ssas-tabular.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-223">For detailed information about data types in tabular models and explicit and implicit conversions of data types in DAX, see [Data Types Supported &#40;SSAS Tabular&#41;](data-types-supported-ssas-tabular.md).</span></span>  
  
##  <a name="dax-operators"></a><a name="bkmk_DAX_opertors"></a><span data-ttu-id="6c36d-224">DAX 演算子</span><span class="sxs-lookup"><span data-stu-id="6c36d-224">DAX Operators</span></span>  
 <span data-ttu-id="6c36d-225">DAX 言語では、次の 4 種類の計算演算子が数式に使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-225">The DAX language uses four different types of calculation operators in formulas:</span></span>  
  
-   <span data-ttu-id="6c36d-226">比較演算子: 値を比較して論理 TRUE/FALSE 値を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-226">Comparison operators to compare values and return a logical TRUE\FALSE value.</span></span>  
  
-   <span data-ttu-id="6c36d-227">算術演算子: 数値を返す算術計算を実行します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-227">Arithmetic operators to perform arithmetic calculations that return numeric values.</span></span>  
  
-   <span data-ttu-id="6c36d-228">テキスト連結演算子: 2 つ以上のテキスト文字列を結合します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-228">Text concatenation operators to join two or more text strings.</span></span>  
  
-   <span data-ttu-id="6c36d-229">論理演算子: 複数の式を組み合わせて 1 つの結果を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-229">Logical operators that combine two or more expressions to return a single result.</span></span>  
  
 <span data-ttu-id="6c36d-230">DAX の数式で使用される演算子の詳細については、「 [PowerPivot の Dax 演算子リファレンス](/dax/dax-operator-reference)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-230">For detailed information about operators used in DAX formulas, see [DAX Operator Reference for PowerPivot](/dax/dax-operator-reference).</span></span>  
  
##  <a name="dax-formulas"></a><a name="bkmk_DAX_Formulas"></a><span data-ttu-id="6c36d-231">DAX の数式</span><span class="sxs-lookup"><span data-stu-id="6c36d-231">DAX Formulas</span></span>  
 <span data-ttu-id="6c36d-232">計算列やメジャーに使用する計算を作成したり、行レベルのフィルターを使用してデータのセキュリティを確保するうえで、DAX の数式は欠かすことができません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-232">DAX formulas are essential for creating calculations in calculated columns and measures, and securing your data by using row level filters.</span></span> <span data-ttu-id="6c36d-233">計算列やメジャーに使用する数式を作成するには、モデル デザイナー ウィンドウの上部に配置されている数式バーを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-233">To create formulas for calculated columns and measures, you will use the formula bar along the top of the model designer window.</span></span> <span data-ttu-id="6c36d-234">行フィルターに使用する数式を作成するには、[ロール マネージャー] ダイアログ ボックスを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-234">To create formulas for row filters, you will use the Role Manager dialog box.</span></span> <span data-ttu-id="6c36d-235">このセクションの情報は、DAX の数式に関する基礎知識を初めての方にわかりやすく伝えることを目的としています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-235">Information in this section is meant to get you started with understanding the basics of DAX formulas.</span></span>  
  
###  <a name="formula-basics"></a><a name="basics"></a> <span data-ttu-id="6c36d-236">数式の基本</span><span class="sxs-lookup"><span data-stu-id="6c36d-236">Formula Basics</span></span>  
 <span data-ttu-id="6c36d-237">DAX を使用すると、計算列の一部として、およびテーブルに関連付けられているメジャー (テーブルには直接表示されない) として、テーブル モデルの作成者がカスタム計算をモデル テーブルに定義できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-237">DAX enables tabular model authors to define custom calculations in both model tables, as part of calculated columns, and as measures associated with tables, but not appearing directly in them.</span></span> <span data-ttu-id="6c36d-238">また、モデル作成者がデータのセキュリティを確保できるのも DAX の利点です。ブール値を返す計算を作成し、特定の (または関連する) テーブルに関連付けられているロールのメンバー ユーザーがそのテーブルからクエリできる行を定義することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-238">DAX also enables model authors to secure data, by creating calculations that return a Boolean value defining which rows in a particular or related table can be queried by member users of the associated role.</span></span>  
  
 <span data-ttu-id="6c36d-239">DAX の数式には、非常に単純なものもあれば、きわめて複雑なものもあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-239">DAX formulas can be very simple or quite complex.</span></span> <span data-ttu-id="6c36d-240">次の表には、計算列で使用できる基本的な単純な数式の例を示しています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-240">The following table shows some examples of simple formulas that could be used in a calculated column.</span></span>  
  
|||  
|-|-|  
|<span data-ttu-id="6c36d-241">計算式</span><span class="sxs-lookup"><span data-stu-id="6c36d-241">Formula</span></span>|<span data-ttu-id="6c36d-242">説明</span><span class="sxs-lookup"><span data-stu-id="6c36d-242">Description</span></span>|  
|`=TODAY()`|<span data-ttu-id="6c36d-243">今日の日付をすべての行の列に挿入します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-243">Inserts today's date in every row of the column.</span></span>|  
|`=3`|<span data-ttu-id="6c36d-244">値 3 を列のすべての行に挿入します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-244">Inserts the value 3 in every row of the column.</span></span>|  
|`=[Column1] + [Column2]`|<span data-ttu-id="6c36d-245">同じ行の [Column1] と [Column2] の値を加算して、同じ行の計算列に結果を格納します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-245">Adds the values in the same row of [Column1] and [Column2] and puts the results in the calculated column of the same row.</span></span>|  
  
 <span data-ttu-id="6c36d-246">作成する式が単純か複雑かに関係なく、式は次の手順で作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-246">Whether the formula you create is simple or complex, you can use the following steps when building a formula:</span></span>  
  
1.  <span data-ttu-id="6c36d-247">各数式は等号から始める必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-247">Each formula must begin with an equal sign.</span></span>  
  
2.  <span data-ttu-id="6c36d-248">関数名を入力または選択するか、式を入力することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-248">You can either type or select a function name, or type an expression.</span></span>  
  
3.  <span data-ttu-id="6c36d-249">目的の関数または名前の最初の数文字を入力すると、オートコンプリートによって使用可能な関数、テーブル、および列の一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-249">Begin to type the first few letters of the function or name you want, and AutoComplete displays a list of available functions, tables, and columns.</span></span> <span data-ttu-id="6c36d-250">Tab キーを押して、オートコンプリートの一覧の項目を数式に追加します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-250">Press TAB to add an item from the AutoComplete list to the formula.</span></span>  
  
     <span data-ttu-id="6c36d-251">また、 **[Fx]** ボタンをクリックして、使用可能な関数の一覧が表示することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-251">You can also click the **Fx** button to display a list of available functions.</span></span> <span data-ttu-id="6c36d-252">ボックスの一覧から関数を選択するには、方向キーを使用して項目を強調表示してから、 **[OK]** をクリックして数式に関数を追加します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-252">To select a function from the dropdown list, use the arrow keys to highlight the item, and click **OK** to add the function to the formula.</span></span>  
  
4.  <span data-ttu-id="6c36d-253">テーブルと列のボックスの一覧から選択するか、値を入力して、関数の引数を指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-253">Supply the arguments to the function by selecting them from a dropdown list of possible tables and columns, or by typing in values.</span></span>  
  
5.  <span data-ttu-id="6c36d-254">構文エラーをチェックします。すべてのかっこが閉じられていることと、列、テーブル、および値が正しく参照されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-254">Check for syntax errors: ensure that all parentheses are closed and columns, tables and values are referenced correctly.</span></span>  
  
6.  <span data-ttu-id="6c36d-255">Enter キーを押して数式を確定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-255">Press ENTER to accept the formula.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6c36d-256">計算列の場合は、数式を確定し、その数式が有効であれば、すぐに列の値が格納されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-256">In a calculated column, as soon as you accept the formula and the formula is validated, the column is populated with values.</span></span> <span data-ttu-id="6c36d-257">メジャーの場合は、Enter キーを押すと、メジャー グリッドのメジャー定義がテーブルと共に保存されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-257">In a measure, pressing ENTER saves the measure definition in the measure grid with the table.</span></span> <span data-ttu-id="6c36d-258">数式が無効な場合は、エラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-258">If a formula is invalid, an error will be displayed.</span></span>  
  
 <span data-ttu-id="6c36d-259">次に示したのは、Days in Current Quarter という名前のメジャーに含まれる、より複雑な式の例です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-259">In this example, we will look at a more complex formula in a measure named Days in Current Quarter:</span></span>  
  
```  
Days in Current Quarter:=COUNTROWS( DATESBETWEEN( 'Date'[Date], STARTOFQUARTER( LASTDATE('Date'[Date])), ENDOFQUARTER('Date'[Date])))  
```  
  
 <span data-ttu-id="6c36d-260">このメジャーは、未完了の期間と前の期間との比較率を作成する際に使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-260">This measure is used to create a comparison ratio between an incomplete period and the previous period.</span></span> <span data-ttu-id="6c36d-261">数式では、経過した期間の比率を考慮に入れて、それを前の期間内の同じ比率と比較する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-261">The formula must take into account the proportion of the period that has elapsed, and compare it to the same proportion in the previous period.</span></span> <span data-ttu-id="6c36d-262">この場合は、[Days Current Quarter to Date]/[Days in Current Quarter] とすることで、現行期間内の経過比率を割り出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-262">In this case, [Days Current Quarter to Date]/[Days in Current Quarter] gives the proportion elapsed in the current period.</span></span>  
  
 <span data-ttu-id="6c36d-263">この数式は次の要素で構成されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-263">This formula contains the following elements:</span></span>  
  
|<span data-ttu-id="6c36d-264">数式の要素</span><span class="sxs-lookup"><span data-stu-id="6c36d-264">Formula element</span></span>|<span data-ttu-id="6c36d-265">説明</span><span class="sxs-lookup"><span data-stu-id="6c36d-265">Description</span></span>|  
|---------------------|-----------------|  
|`Days in Current Quarter:=`|<span data-ttu-id="6c36d-266">メジャーの名前。</span><span class="sxs-lookup"><span data-stu-id="6c36d-266">The name of the measure.</span></span>|  
|`=`|<span data-ttu-id="6c36d-267">数式は等号 (=) で始まります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-267">The equals sign (=) begins the formula.</span></span>|  
|`COUNTROWS`|<span data-ttu-id="6c36d-268">[COUNTROWS 関数 &#40;DAX&#41;](/dax/countrows-function-dax) Date テーブル内の行の数をカウントします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-268">The [COUNTROWS Function &#40;DAX&#41;](/dax/countrows-function-dax) counts the number of rows in the Date table</span></span>|  
|`()`|<span data-ttu-id="6c36d-269">引数は、開きかっこと閉じかっこで指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-269">Open and closing parenthesis specifies arguments.</span></span>|  
|`DATESBETWEEN`|<span data-ttu-id="6c36d-270">DATESBETWEEN 関数は、Date テーブルの Date 列に存在する値ごとに、最終日までの日付を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-270">The DATESBETWEEN function returns the dates between the last date for each value in the Date column in the Date table.</span></span>|  
|`'Date'`|<span data-ttu-id="6c36d-271">Date テーブルを指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-271">Specifies the Date table.</span></span> <span data-ttu-id="6c36d-272">テーブルは単一引用符で囲みます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-272">Tables are in single quotes.</span></span>|  
|`[Date]`|<span data-ttu-id="6c36d-273">Date テーブルの Date 列を指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-273">Specifies the Date column in the Date table.</span></span> <span data-ttu-id="6c36d-274">列は角かっこで囲みます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-274">Columns are in brackets.</span></span>|  
|`,`||  
|`STARTOFQUARTER`|<span data-ttu-id="6c36d-275">STARTOFQUARTER 関数は、四半期の開始日を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-275">The STARTOFQUARTER function returns the date of the start of the quarter.</span></span>|  
|`LASTDATE`|<span data-ttu-id="6c36d-276">LASTDATE 関数では、四半期の終了日が返されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-276">The LASTDATE function returns the last date of the quarter.</span></span>|  
|`'Date'`|<span data-ttu-id="6c36d-277">Date テーブルを指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-277">Specifies the Date table.</span></span>|  
|`[Date]`|<span data-ttu-id="6c36d-278">Date テーブルの Date 列を指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-278">Specifies the Date column in the Date table.</span></span>|  
|`,`||  
|`ENDOFQUARTER`|<span data-ttu-id="6c36d-279">ENDOFQUARTER 関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-279">The ENDOFQUARTER function</span></span>|  
|`'Date'`|<span data-ttu-id="6c36d-280">Date テーブルを指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-280">Specifies the Date table.</span></span>|  
|`[Date]`|<span data-ttu-id="6c36d-281">Date テーブルの Date 列を指定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-281">Specifies the Date column in the Date table.</span></span>|  
  
#### <a name="using-formula-autocomplete"></a><span data-ttu-id="6c36d-282">数式のオートコンプリート機能の使用</span><span class="sxs-lookup"><span data-stu-id="6c36d-282">Using Formula AutoComplete</span></span>  
 <span data-ttu-id="6c36d-283">モデル デザイナーの数式バーと数式の行フィルター ウィンドウ ([ロール マネージャー] ダイアログ ボックス) には、どちらもオートコンプリート機能が備わっています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-283">Both the formula bar in the model designer and the formula Row Filters window in the Role Manager dialog box provide an AutoComplete feature.</span></span> <span data-ttu-id="6c36d-284">オートコンプリート機能によって、数式の各要素が選択肢として表示されるため、有効な式構文を効率的に入力することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-284">AutoComplete helps you enter a valid formula syntax by providing you with options for each element in the formula.</span></span>  
  
-   <span data-ttu-id="6c36d-285">数式のオートコンプリート機能は、関数が入れ子になっている既存の数式の途中で使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-285">You can use Formula AutoComplete in the middle of an existing formula with nested functions.</span></span> <span data-ttu-id="6c36d-286">挿入ポイントの直前のテキストが、ドロップダウン リストに値を表示するために使用されます。挿入ポイントより後ろのすべてのテキストは変更されません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-286">The text immediately before the insertion point is used to display values in the drop-down list, and all of the text after the insertion point remains unchanged.</span></span>  
  
-   <span data-ttu-id="6c36d-287">オートコンプリートには、関数の閉じかっこを追加する機能や、かっこを自動的に照合する機能はありません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-287">AutoComplete does not add the closing parenthesis of functions or automatically match parentheses.</span></span> <span data-ttu-id="6c36d-288">数式を保存または使用するには、各関数の構文に誤りがないことをユーザー自身が確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-288">You must make sure that each function is syntactically correct or you cannot save or use the formula.</span></span>  
  
#### <a name="using-multiple-functions-in-a-formula"></a><span data-ttu-id="6c36d-289">数式での複数の関数の使用</span><span class="sxs-lookup"><span data-stu-id="6c36d-289">Using Multiple Functions in a Formula</span></span>  
 <span data-ttu-id="6c36d-290">関数は入れ子にすることができます。つまり、ある関数の結果を別の関数の引数として使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-290">You can nest functions, meaning that you use the results from one function as an argument of another function.</span></span> <span data-ttu-id="6c36d-291">計算列では、最大で 64 レベルの関数を入れ子にできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-291">You can nest up to 64 levels of functions in calculated columns.</span></span> <span data-ttu-id="6c36d-292">ただし、入れ子化によって数式の作成やトラブルシューティングが困難になることがあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-292">However, nesting can make it difficult to create or troubleshoot formulas.</span></span>  
  
 <span data-ttu-id="6c36d-293">多くの関数は、入れ子になった関数としてのみ使用されるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-293">Many functions are designed to be used solely as nested functions.</span></span> <span data-ttu-id="6c36d-294">これらの関数はテーブルを返します。このテーブルは、結果として直接保存することはできませんが、入力としてテーブル関数に渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-294">These functions return a table, which cannot be directly saved as a result; it must be provided as input to a table function.</span></span> <span data-ttu-id="6c36d-295">たとえば、SUMX 関数、AVERAGEX 関数、および MINX 関数には、第 1 引数としてテーブルが必要です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-295">For example, the functions SUMX, AVERAGEX, and MINX all require a table as the first argument.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="6c36d-296">メジャーでは、関数の入れ子化にいくつかの制限があります。これらの制限は、列間の依存関係から必要になる多数の計算によるパフォーマンスへの影響を防ぐために設けられています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-296">Some limits are applied within measures on nesting of functions to ensure that performance is not affected by the many calculations required by dependencies among columns.</span></span>  
  
##  <a name="dax-functions"></a><a name="bkmk_DAX_functions"></a> <span data-ttu-id="6c36d-297">DAX 関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-297">DAX Functions</span></span>  
 <span data-ttu-id="6c36d-298">ここでは、DAX でサポートされる関数の *種類* の概要について説明します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-298">This section provides an overview of the *types* of functions supported in DAX.</span></span> <span data-ttu-id="6c36d-299">詳細については、「 [DAX 関数リファレンス](/dax/dax-function-reference)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-299">For more detailed information, see [DAX Function Reference](/dax/dax-function-reference).</span></span>  
  
 <span data-ttu-id="6c36d-300">DAX には、日時を使った計算、条件値の作成、文字列の操作、リレーションシップに基づく参照を行うことのできる各種関数に加え、テーブル全体で繰り返し実行して再帰的な計算を行う機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-300">DAX provides a variety of functions you can use perform calculations using dates and times, create conditional values, work with strings, perform lookups based on relationships, and the ability to iterate over a table to perform recursive calculations.</span></span> <span data-ttu-id="6c36d-301">これらの関数の多くは、Excel の数式と非常によく似ています。ただし、DAX の数式は、次の点が大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-301">If you are familiar with Excel formulas, many of these functions will appear very similar; however, DAX formulas are different in the following important ways:</span></span>  
  
-   <span data-ttu-id="6c36d-302">DAX 関数は、常に列全体またはテーブル全体を参照します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-302">A DAX function always references a complete column or a table.</span></span> <span data-ttu-id="6c36d-303">テーブルまたは列の特定の値のみを使用する場合は、数式にフィルターを追加できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-303">If you want to use only particular values from a table or column, you can add filters to the formula.</span></span>  
  
-   <span data-ttu-id="6c36d-304">行ごとに計算をカスタマイズする場合は、現在の行の値か関連する値を一種のパラメーターとして使用できる DAX の関数を使用します。これによって、コンテキストによって変化する計算を実行できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-304">If you need to customize calculations on a row-by-row basis, DAX provides functions that let you use the current row value or a related value as a kind of parameter, to perform calculations that vary by context.</span></span> <span data-ttu-id="6c36d-305">これらの関数のしくみを理解するには、後のトピックの「DAX の数式のコンテキスト」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-305">To understand how these functions work, see Context in DAX Formulas later in this topic.</span></span>  
  
-   <span data-ttu-id="6c36d-306">DAX には、値ではなくテーブルを返す多くの関数が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-306">DAX includes many functions that return a table, rather than a value.</span></span> <span data-ttu-id="6c36d-307">テーブルはレポート クライアントには表示されませんが、他の関数の入力として使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-307">The table is not displayed in a reporting client, but is used to provide input to other functions.</span></span> <span data-ttu-id="6c36d-308">たとえば、テーブルを取得して、含まれる個別値をカウントしたり、フィルター処理されたテーブルまたは列における動的な合計を計算したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-308">For example, you can retrieve a table and then count the distinct values in it, or calculate dynamic sums across filtered tables or columns.</span></span>  
  
-   <span data-ttu-id="6c36d-309">DAX 関数には、さまざまな *タイム インテリジェンス* 関数が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-309">DAX functions include a variety of *time intelligence* functions.</span></span> <span data-ttu-id="6c36d-310">これらの関数を使用すると、日付範囲を定義または選択して、それらの日付または範囲に基づく動的な計算を実行できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-310">These functions let you define or select date ranges, and perform dynamic calculations based on these dates or range.</span></span> <span data-ttu-id="6c36d-311">たとえば、並列期間の合計を比較できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-311">For example, you can compare sums across parallel periods.</span></span>  
  
### <a name="date-and-time-functions"></a><span data-ttu-id="6c36d-312">日付と時刻関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-312">Date and Time Functions</span></span>  
 <span data-ttu-id="6c36d-313">DAX の日付と時刻の関数は、Microsoft Excel の日付と時刻の関数に似ています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-313">The date and time functions in DAX are similar to date and time functions in Microsoft Excel.</span></span> <span data-ttu-id="6c36d-314">ただし、DAX 関数は、Microsoft SQL Server で使用される `datetime` データ型に基づいています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-314">However, DAX functions are based on the `datetime` data types used by Microsoft SQL Server.</span></span> <span data-ttu-id="6c36d-315">詳細については、「[日付と時刻の関数 &#40;DAX&#41;](/dax/date-and-time-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-315">For more information, see [Date and Time Functions &#40;DAX&#41;](/dax/date-and-time-functions-dax).</span></span>  
  
### <a name="filter-functions"></a><span data-ttu-id="6c36d-316">フィルター関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-316">Filter Functions</span></span>  
 <span data-ttu-id="6c36d-317">DAX のフィルター関数を使用すると、特定のデータ型を返したり、関連テーブルで値を参照したり、関連する値によるフィルターを適用したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-317">The filter functions in DAX return specific data types, look up values in related tales, and filter by related values.</span></span> <span data-ttu-id="6c36d-318">参照関数では、データベースと同様、テーブルおよびリレーションシップを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-318">The lookup functions work by using tables and relationships, like a database.</span></span> <span data-ttu-id="6c36d-319">フィルター関数を使用すると、データ コンテキストを操作して、動的な計算を実行できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-319">The filtering functions let you manipulate data context to create dynamic calculations.</span></span> <span data-ttu-id="6c36d-320">詳細については、「[フィルター関数 &#40;DAX&#41;](/dax/filter-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-320">For more information, see [Filter Functions &#40;DAX&#41;](/dax/filter-functions-dax).</span></span>  
  
### <a name="information-functions"></a><span data-ttu-id="6c36d-321">情報関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-321">Information Functions</span></span>  
 <span data-ttu-id="6c36d-322">情報関数は、引数として渡されたセルまたは行を参照し、値が必要な型と一致するかどうかを通知します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-322">An information function looks at the cell or row that is provided as an argument and tells you whether the value matches the expected type.</span></span> <span data-ttu-id="6c36d-323">たとえば、ISERROR 関数は、参照する値にエラーが含まれている場合に TRUE を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-323">For example, the ISERROR function returns TRUE if the value that you reference contains an error.</span></span> <span data-ttu-id="6c36d-324">詳細については、「[情報関数 &#40;DAX&#41;](/dax/information-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-324">For more information, see [Information Functions &#40;DAX&#41;](/dax/information-functions-dax).</span></span>  
  
### <a name="logical-functions"></a><span data-ttu-id="6c36d-325">論理関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-325">Logical Functions</span></span>  
 <span data-ttu-id="6c36d-326">論理関数は、式に対して操作を実行し、その式の値に関する情報を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-326">Logical functions act upon an expression to return information about the values in the expression.</span></span> <span data-ttu-id="6c36d-327">たとえば、TRUE 関数を使用すると、評価している式から TRUE 値が返されるかどうかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-327">For example, the TRUE function lets you know whether an expression that you are evaluating returns a TRUE value.</span></span> <span data-ttu-id="6c36d-328">詳細については、「 [DAX&#41;&#40;の論理関数](/dax/logical-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-328">For more information, see [Logical Functions &#40;DAX&#41;](/dax/logical-functions-dax).</span></span>  
  
### <a name="mathematical-and-trigonometric-functions"></a><span data-ttu-id="6c36d-329">数学関数と三角関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-329">Mathematical and Trigonometric Functions</span></span>  
 <span data-ttu-id="6c36d-330">DAX の数学関数は、Excel の数学関数や三角関数と非常によく似ています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-330">The mathematical functions in DAX are very similar to the Excel mathematical and trigonometric functions.</span></span> <span data-ttu-id="6c36d-331">ただし DAX 関数で使用する数値データ型には、小さな違いがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-331">Some minor differences exist in the numeric data types used by DAX functions.</span></span> <span data-ttu-id="6c36d-332">詳細については、「[三角 Functions &#40;DAX&#41;](/dax/math-and-trig-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-332">For more information, see [Math and Trig Functions &#40;DAX&#41;](/dax/math-and-trig-functions-dax).</span></span>  
  
### <a name="statistical-functions"></a><span data-ttu-id="6c36d-333">統計関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-333">Statistical Functions</span></span>  
 <span data-ttu-id="6c36d-334">DAX には、集計を行う統計関数があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-334">DAX provides statistical functions that perform aggregations.</span></span> <span data-ttu-id="6c36d-335">DAX では、集計と平均の作成や最小値と最大値の特定に加えて、集計前に列をフィルター処理したり、関連テーブルに基づき集計を作成したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-335">In addition to creating sums and averages, or finding the minimum and maximum values, in DAX you can also filter a column before aggregating or create aggregations based on related tables.</span></span> <span data-ttu-id="6c36d-336">詳細については、「 [DAX&#41;&#40;統計関数](/dax/statistical-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-336">For more information, see [Statistical Functions &#40;DAX&#41;](/dax/statistical-functions-dax).</span></span>  
  
### <a name="text-functions"></a><span data-ttu-id="6c36d-337">文字列関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-337">Text Functions</span></span>  
 <span data-ttu-id="6c36d-338">DAX の文字列関数は、Excel の文字列関数と非常によく似ています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-338">The text functions in DAX are very similar to their counterparts in Excel.</span></span> <span data-ttu-id="6c36d-339">文字列の一部を返したり、文字列内のテキストを検索したり、文字列値を連結したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-339">You can return part of a string, search for text within a string, or concatenate string values.</span></span> <span data-ttu-id="6c36d-340">さらに、DAX には日付、時刻、数値の形式を制御する関数も用意されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-340">DAX also provides functions for controlling the formats for dates, times, and numbers.</span></span> <span data-ttu-id="6c36d-341">詳細については、「[テキスト関数 &#40;DAX&#41;](/dax/text-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-341">For more information, see [Text Functions &#40;DAX&#41;](/dax/text-functions-dax).</span></span>  
  
### <a name="time-intelligence-functions"></a><span data-ttu-id="6c36d-342">タイム インテリジェンス関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-342">Time Intelligence Functions</span></span>  
 <span data-ttu-id="6c36d-343">DAX に含まれるタイム インテリジェント関数を使用すると、カレンダーおよび日付に関して組み込まれた知識を使用する計算を作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-343">The time intelligence functions provided in DAX let you create calculations that use built-in knowledge about calendars and dates.</span></span> <span data-ttu-id="6c36d-344">時刻と日付の範囲を集計や計算と組み合わせて使用することで、売上、在庫などの比較可能な期間に対して意味のある比較を作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-344">By using time and date ranges in combination with aggregations or calculations, you can build meaningful comparisons across comparable time periods for sales, inventory, and so on.</span></span> <span data-ttu-id="6c36d-345">詳細については、「[タイムインテリジェンス関数 &#40;DAX&#41;](/dax/time-intelligence-functions-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-345">For more information, see [Time Intelligence Functions &#40;DAX&#41;](/dax/time-intelligence-functions-dax).</span></span>  
  
###  <a name="table-valued-functions"></a><a name="bkmk_TableFunc"></a><span data-ttu-id="6c36d-346">テーブル値関数</span><span class="sxs-lookup"><span data-stu-id="6c36d-346">Table-Valued Functions</span></span>  
 <span data-ttu-id="6c36d-347">DAX 関数には、テーブルを出力する関数、入力としてテーブルを受け取る関数、またはその両方を行う関数が存在します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-347">There are DAX functions that output tables, take tables as input, or do both.</span></span> <span data-ttu-id="6c36d-348">テーブルに含めることができるのは 1 列であるため、テーブル値関数も入力として 1 列を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-348">Because a table can have a single column, table-valued functions also take single columns as inputs.</span></span> <span data-ttu-id="6c36d-349">DAX の数式を最大限に活用するには、このようなテーブル値関数の使い方を理解することが大切です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-349">Understanding how to use these table-valued functions is important for fully utilizing DAX formulas.</span></span> <span data-ttu-id="6c36d-350">DAX には、次の種類のテーブル値関数があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-350">DAX includes the following types of table-valued functions:</span></span>  
  
 <span data-ttu-id="6c36d-351">**フィルター関数** 現在の行に関連する列、テーブル、または値を返します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-351">**Filter functions** Return a column, table, or values related to the current row.</span></span>  
  
 <span data-ttu-id="6c36d-352">**集計関数** テーブルの複数の行にわたって式を集計します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-352">**Aggregation functions** Aggregate any expression over the rows of a table.</span></span>  
  
 <span data-ttu-id="6c36d-353">**タイム インテリジェンス関数** 日付のテーブルを返すか、集計の計算に日付のテーブルを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-353">**Time intelligence functions** Return a table of dates, or use a table of dates to calculate an aggregation.</span></span>  
  
##  <a name="context-in-dax-formulas"></a><a name="bkmk_context"></a> <span data-ttu-id="6c36d-354">DAX の数式のコンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-354">Context in DAX Formulas</span></span>  
 <span data-ttu-id="6c36d-355">DAX を使用して数式を作成する場合、*コンテキスト* の概念を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-355">*Context* is an important concept to understand when creating formulas using DAX.</span></span> <span data-ttu-id="6c36d-356">コンテキストを使用すると動的分析を行うことができます。数式の結果は、現在の行またはセルの選択や関連データを反映して変化するためです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-356">Context is what enables you to perform dynamic analysis, as the results of a formula change to reflect the current row or cell selection and also any related data.</span></span> <span data-ttu-id="6c36d-357">高性能な動的分析の作成や、数式に関する問題のトラブルシューティングを行うには、コンテキストをよく理解して効果的に使用することが重要です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-357">Understanding context and using context effectively are critical for building high-performing, dynamic analyses, and for troubleshooting problems in formulas.</span></span>  
  
 <span data-ttu-id="6c36d-358">テーブル モデルの数式は、次のような設計要素に対応して、さまざまなコンテキストで評価されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-358">Formulas in tabular models can be evaluated in a different context, depending on other design elements:</span></span>  
  
-   <span data-ttu-id="6c36d-359">ピボットテーブルやレポートに適用されるフィルター</span><span class="sxs-lookup"><span data-stu-id="6c36d-359">Filters applied in a PivotTable or report</span></span>  
  
-   <span data-ttu-id="6c36d-360">数式内で定義されているフィルター</span><span class="sxs-lookup"><span data-stu-id="6c36d-360">Filters defined within a formula</span></span>  
  
-   <span data-ttu-id="6c36d-361">数式内で特別な関数を使用して指定されたリレーションシップ</span><span class="sxs-lookup"><span data-stu-id="6c36d-361">Relationships specified by using special functions within a formula</span></span>  
  
 <span data-ttu-id="6c36d-362">コンテキストには、 *行コンテキスト*、 *クエリ コンテキスト*、 *フィルター コンテキスト*という種類があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-362">There are different types of context: *row context*, *query context*, and *filter context*.</span></span>  
  
###  <a name="row-context"></a><a name="bkmk_row_context"></a><span data-ttu-id="6c36d-363">行コンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-363">Row Context</span></span>  
 <span data-ttu-id="6c36d-364">*行コンテキスト*は、"現在の行" と考えることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-364">*Row context* can be thought of as "the current row".</span></span> <span data-ttu-id="6c36d-365">計算列に数式を作成した場合、その数式の行コンテキストは、現在の行内の全列からの値を含んでいます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-365">If you create a formula in a calculated column, the row context for that formula includes the values from all columns in the current row.</span></span> <span data-ttu-id="6c36d-366">テーブルが別のテーブルに関連付けられている場合、コンテキストには、現在の行に関連付けられている他のテーブルの値もすべて含まれます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-366">If the table is related to another table, the content also includes all the values from the other table that are related to the current row.</span></span>  
  
 <span data-ttu-id="6c36d-367">たとえば、同じテーブルの Freight と Tax の 2 つの列の値を加算する `=[Freight] + [Tax]`という計算列を作成したとします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-367">For example, suppose you create a calculated column, `=[Freight] + [Tax]`, that adds together values from two columns, Freight and Tax, from the same table.</span></span> <span data-ttu-id="6c36d-368">この数式は、指定した列の現在の行の値のみを自動的に取得します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-368">This formula automatically gets only the values from the current row in the specified columns.</span></span>  
  
 <span data-ttu-id="6c36d-369">行コンテキストは、テーブル間に定義されたリレーションシップ (DAX 数式を使用して計算列に定義されているリレーションシップも含む) を使用して、関連するテーブルのどの行が現在の行に関連付けられているかを判別します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-369">Row context also follows any relationships that have been defined between tables, including relationships defined within a calculated column by using DAX formulas, to determine which rows in related tables are associated with the current row.</span></span>  
  
 <span data-ttu-id="6c36d-370">たとえば次の数式は、RELATED 関数を使用し、注文の出荷先の地域に基づいて、関連テーブルから税の値をフェッチします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-370">For example, the following formula uses the RELATED function to fetch a tax value from a related table, based on the region that the order was shipped to.</span></span> <span data-ttu-id="6c36d-371">現在のテーブル内の地域の値を使用し、関連するテーブルで地域を探し、関連するテーブルから該当する地域の税率を取得することによって、税の値が求められます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-371">The tax value is determined by using the value for region in the current table, looking up the region in the related table, and then getting the tax rate for that region from the related table.</span></span>  
  
```  
= [Freight] + RELATED('Region'[TaxRate])  
```  
  
 <span data-ttu-id="6c36d-372">この数式は、Region テーブルから現在の地域の税率を取得し、Freight 列の値に加算します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-372">This formula gets the tax rate for the current region from the Region table and adds it to the value of the Freight column.</span></span> <span data-ttu-id="6c36d-373">DAX の数式では、テーブルどうしを関連付ける特定のリレーションシップを知る必要や指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-373">In DAX formulas, you do not need to know or specify the specific relationship that connects the tables.</span></span>  
  
#### <a name="multiple-row-context"></a><span data-ttu-id="6c36d-374">複数行のコンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-374">Multiple Row Context</span></span>  
 <span data-ttu-id="6c36d-375">DAX には、テーブルで計算を繰り返し実行する関数が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-375">DAX includes functions that iterate calculations over a table.</span></span> <span data-ttu-id="6c36d-376">これらの関数は、現在の行と、それぞれの行コンテキストを持つことができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-376">These functions can have multiple current rows, each with its own row context.</span></span>  <span data-ttu-id="6c36d-377">基本的には、これらの関数を使用すると、内側ループと外側ループに関して再帰的に実行する数式を作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-377">In essence, these functions let you create formulas that perform operations recursively over an inner and outer loop.</span></span>  
  
 <span data-ttu-id="6c36d-378">たとえば、 **Products** と **Sales** という 2 つのテーブルがブックに含まれている場合に、</span><span class="sxs-lookup"><span data-stu-id="6c36d-378">For example, suppose your model contains a **Products** table and a **Sales** table.</span></span> <span data-ttu-id="6c36d-379">複数の製品に関連する取引が多数存在する sales テーブル全体から、各製品の 1 回の取引あたりの最大注文数を検索するとします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-379">Users might want to go through the entire sales table, which is full of transactions involving multiple products, and find the largest quantity ordered for each product in any one transaction.</span></span>  
  
 <span data-ttu-id="6c36d-380">DAX を使用すると、正しい値を返す 1 つの数式を作成でき、データをテーブルに追加すると結果が自動的に更新されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-380">With DAX you can build a single formula that returns the correct value, and the results are automatically updated any time a user adds data to the tables.</span></span>  
  
```  
=MAXX(FILTER(Sales,[ProdKey]=EARLIER([ProdKey])),Sales[OrderQty])  
```  
  
 <span data-ttu-id="6c36d-381">この数式の詳細なチュートリアルについては、[前の関数](/dax/earlier-function-dax)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-381">For a detailed walkthrough of this formula, see the [EARLIER Function](/dax/earlier-function-dax).</span></span>  
  
 <span data-ttu-id="6c36d-382">つまり、EARLIER 関数は、現在の操作に先行する操作からの行コンテキストを格納します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-382">To summarize, the EARLIER function stores the row context from the operation that preceded the current operation.</span></span> <span data-ttu-id="6c36d-383">この関数は常に、メモリに 2 つのコンテキスト セットを格納します。1 つのコンテキスト セットは、数式の内側のループに対する現在行を表し、もう一方のセットは、数式の外側のループに対する現在行を表します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-383">At all times, the function stores in memory two sets of context: one set of context represents the current row for the inner loop of the formula, and another set of context represents the current row for the outer loop of the formula.</span></span> <span data-ttu-id="6c36d-384">DAX では、2 つのループの間で値が自動的に提供されるので、複雑な集計を作成することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-384">DAX automatically feeds values between the two loops so that you can create complex aggregates.</span></span>  
  
####  <a name="query-context"></a><a name="bkmk_query_context"></a><span data-ttu-id="6c36d-385">クエリコンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-385">Query Context</span></span>  
 <span data-ttu-id="6c36d-386">*クエリ コンテキスト* とは、数式に対して暗黙的に取得されるデータのサブセットを指します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-386">*Query context* refers to the subset of data that is implicitly retrieved for a formula.</span></span> <span data-ttu-id="6c36d-387">テーブル モデルに基づくレポートまたはピボットテーブルに、メジャーまたは他の値のフィールドを配置すると、エンジンが、行見出しと列見出し、スライサー、およびレポート フィルターを調べてコンテキストを決定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-387">When a user places a measure or other value field into a PivotTable or into a report based on a tabular model, the engine examines the row and column headers, Slicers, and report filters to determine the context.</span></span> <span data-ttu-id="6c36d-388">次に、必要なクエリがデータ ソースに対して実行され、データの正しいサブセットを取得し、数式で定義された計算を行い、ピボットテーブルの各セルまたはレポートに値を含めます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-388">Then, the necessary queries are run against the data source to get the correct subset of data, make the calculations defined by the formula, and then populate each cell in the PivotTable or report.</span></span> <span data-ttu-id="6c36d-389">取得されるデータのセットは、各セルのクエリ コンテキストです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-389">The set of data that is retrieved is the query context for each cell.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="6c36d-390">DirectQuery クエリ モードのモデルでは、コンテキストが評価されると、データの正しいサブセットを取得して結果を計算するセット演算が、SQL ステートメントに変換されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-390">For a model in DirectQuery mode, the context is evaluated, and then the set operations to retrieve the correct subset of data and calculate the results are translated to SQL statements.</span></span> <span data-ttu-id="6c36d-391">これらのステートメントは、直接リレーショナル データ ストアに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-391">Those statements are then directly run against the relational data store.</span></span> <span data-ttu-id="6c36d-392">したがって、データを取得して結果を計算する方法は異なりますが、コンテキストそのものは変わりません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-392">Therefore, although the method of getting the data and calculating the results is different, the context itself does not change.</span></span>  
  
 <span data-ttu-id="6c36d-393">数式を指定する場所によってコンテキストが変わるため、数式の結果も変わる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-393">Because context changes depending on where you place the formula, the results of the formula can also change.</span></span>  
  
 <span data-ttu-id="6c36d-394">たとえば、 **Sales** テーブルの **Profit** 列の値を合計する `=SUM('Sales'[Profit])`という数式を作成したとします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-394">For example, suppose you create a formula that sums the values in the **Profit** column of the **Sales** table: `=SUM('Sales'[Profit])`.</span></span>  <span data-ttu-id="6c36d-395">この数式を **Sales** テーブル内の計算列で使用した場合、数式の結果はテーブル全体について同じになります。なぜなら、この数式のクエリ コンテキストは常に **Sales** テーブルのデータセット全体であるためです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-395">If you use this formula in a calculated column within the **Sales** table, the results for the formula will be the same for the entire table, because the query context for the formula is always the entire data set of the **Sales** table.</span></span> <span data-ttu-id="6c36d-396">計算結果には、すべての地域、すべての製品、すべての年度の利益が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-396">Results will have profit for all regions, all products, all years, and so on.</span></span>  
  
 <span data-ttu-id="6c36d-397">ただし、同じ結果を何百回も表示する必要はなく、特定の年度、特定の国、特定の製品、または、そうした条件の組み合わせについて、該当する利益を計算し、総計を求めるのが普通です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-397">However, users typically don't want to see the same result hundreds of times, but instead want to get the profit for a particular year, a particular country, a particular product, or some combination of these, and then get a grand total.</span></span>  
  
 <span data-ttu-id="6c36d-398">実際、ピボットテーブルで、列ヘッダーや行ヘッダー、スライサーを追加したり削除したりすると、コンテキストが変わります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-398">In a PivotTable, context can be changed by adding or removing column and row headers and by adding or removing Slicers.</span></span> <span data-ttu-id="6c36d-399">ピボットテーブルに列または行の見出しを追加するたびに、メジャーが評価されるクエリ コンテキストが変化します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-399">Whenever users add column or row headings to the PivotTable, they change the query context in which the measure is evaluated.</span></span> <span data-ttu-id="6c36d-400">スライス操作やフィルター処理もコンテキストに影響を及ぼします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-400">Slicing and filtering operations also affect context.</span></span> <span data-ttu-id="6c36d-401">したがって、メジャーで使用される同じ数式は、セルごとに異なる *クエリ コンテキスト* で評価されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-401">Therefore, the same formula, used in a measure, is evaluated in a different *query context* for each cell.</span></span>  
  
####  <a name="filter-context"></a><a name="bkmk_filter_context"></a><span data-ttu-id="6c36d-402">フィルターコンテキスト</span><span class="sxs-lookup"><span data-stu-id="6c36d-402">Filter Context</span></span>  
 <span data-ttu-id="6c36d-403">*フィルター コンテキスト* は、各列が含むことができる値のセット、または関連するテーブルから取得される値が含むことができる値のセットです。</span><span class="sxs-lookup"><span data-stu-id="6c36d-403">*Filter context* is the set of values allowed in each column, or in the values retrieved from a related table.</span></span> <span data-ttu-id="6c36d-404">フィルターを適用できるのは、デザイナーまたはプレゼンテーション層 (レポートおよびピボットテーブル) の列です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-404">Filters can be applied to the column in the designer, or in the presentation layer (reports and PivotTables).</span></span> <span data-ttu-id="6c36d-405">また、数式内のフィルター式によって明示的に定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-405">Filters can also be defined explicitly by filter expressions within the formula.</span></span>  
  
 <span data-ttu-id="6c36d-406">フィルター コンテキストは、数式の引数を使用して列やテーブルの使用可能な値のセットにフィルター制約を指定すると追加されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-406">Filter context is added when you specify filter constraints on the set of values allowed in a column or table, by using arguments to a formula.</span></span> <span data-ttu-id="6c36d-407">行コンテキストやクエリ コンテキストなど、他のコンテキストに加えて適用されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-407">Filter context applies on top of other contexts, such as row context or query context.</span></span>  
  
 <span data-ttu-id="6c36d-408">テーブル モデルには、フィルター コンテキストを作成する多くの方法があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-408">In tabular models, there are many ways to create filter context.</span></span> <span data-ttu-id="6c36d-409">モデルを使用できるクライアント ( [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] レポートなど) のコンテキストでは、行ヘッダーや列ヘッダーにスライサーまたはレポート フィルターを追加して、即座にフィルターを作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-409">Within the context of clients that can consume the model, such as [!INCLUDE[ssCrescent](../../includes/sscrescent-md.md)] reports, users can create filters on the fly by adding slicers or report filters on the row and column headings.</span></span> <span data-ttu-id="6c36d-410">数式にフィルター式を直接指定することもできます。それにより、関連する値を指定したり、入力として使用されるテーブルにフィルターを設定したり、計算で使用される値のコンテキストを動的に取得したりします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-410">You can also specify filter expressions directly within the formula, to specify related values, to filter tables that are used as inputs, or to dynamically get context for the values that are used in calculations.</span></span> <span data-ttu-id="6c36d-411">また、フィルターを完全にクリアしたり、特定の列のフィルターを選択的にクリアしたりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-411">You can also completely clear or selectively clear the filters on particular columns.</span></span> <span data-ttu-id="6c36d-412">これは、総計を計算する数式を作成するときに非常に便利です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-412">This is very useful when creating formulas that calculate grand totals.</span></span>  
  
 <span data-ttu-id="6c36d-413">数式内にフィルターを作成する方法の詳細については、「 [FILTER 関数](/dax/filter-function-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-413">For more information about how to create filters within formulas, see the [FILTER Function](/dax/filter-function-dax).</span></span>  
  
 <span data-ttu-id="6c36d-414">フィルターをクリアして総計を作成する方法の例については、「 [ALL 関数](/dax/all-function-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-414">For an example of how filters can be cleared to create grand totals, see the [ALL Function](/dax/all-function-dax).</span></span>  
  
 <span data-ttu-id="6c36d-415">数式内のフィルターを選択的にクリアして適用する方法の例については、「 [Allexcept 関数](/dax/allexcept-function-dax)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-415">For examples of how to selectively clear and apply filters within formulas, see the [ALLEXCEPT Function](/dax/allexcept-function-dax).</span></span>  
  
####  <a name="determining-context-in-formulas"></a><a name="bkmk_determine_context"></a> <span data-ttu-id="6c36d-416">数式のコンテキストの決定</span><span class="sxs-lookup"><span data-stu-id="6c36d-416">Determining Context in Formulas</span></span>  
 <span data-ttu-id="6c36d-417">DAX 数式を作成すると、構文が有効かどうかが最初にテストされます。次に、数式に含まれる列やテーブルの名前が現在のコンテキストで見つかるかどうかがテストされます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-417">When you create a DAX formula, the formula is first tested for valid syntax, and then tested to make sure the names of the columns and tables included in the formula can be found in the current context.</span></span> <span data-ttu-id="6c36d-418">数式に指定された列またはテーブルが見つからない場合は、エラーが返されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-418">If any column or table specified by the formula cannot be found, an error is returned.</span></span>  
  
 <span data-ttu-id="6c36d-419">検証中のコンテキスト (および再計算操作) は、前のセクションで説明したように、モデル内の使用可能なテーブル、テーブル間のリレーションシップ、および適用されたフィルターを使用して決定されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-419">Context during validation (and recalculation operations) is determined as described in the preceding sections, by using the available tables in the model, any relationships between the tables, and any filters that have been applied.</span></span>  
  
 <span data-ttu-id="6c36d-420">たとえば、新しいテーブルにデータをインポートしたばかりで、そのテーブルが他のテーブルには関連していない場合 (フィルターもまだ適用していない場合)、 *現在のコンテキスト* はテーブルの列セット全体になります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-420">For example, if you have just imported some data into a new table and it is not related to any other tables (and you have not applied any filters), the *current context* is the entire set of columns in the table.</span></span> <span data-ttu-id="6c36d-421">テーブルがリレーションシップによって別のテーブルに関連付けられている場合、現在のコンテキストには、関連付けられているテーブルも含まれます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-421">If the table is linked by relationships to other tables, the current context includes the related tables.</span></span> <span data-ttu-id="6c36d-422">このテーブルの列をレポートに追加し、そのレポートにスライサーとレポート フィルターが含まれる場合、数式のコンテキストは、レポートの各セルのデータのサブセットになります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-422">If you add a column from the table to a report that has Slicers and maybe some report filters, the context for the formula is the subset of data in each cell of the report.</span></span>  
  
 <span data-ttu-id="6c36d-423">コンテキストは、数式のトラブルシューティングも困難にする可能性がある強力な概念です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-423">Context is a powerful concept that can also make it difficult to troubleshoot formulas.</span></span> <span data-ttu-id="6c36d-424">コンテキストの動作を理解するには、単純な数式とリレーションシップから始めることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6c36d-424">We recommend that you begin with simple formulas and relationships to see how context works.</span></span> <span data-ttu-id="6c36d-425">次のセクションでは、数式でさまざまなタイプのコンテキストを使用して動的に結果を返す方法の例も示します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-425">The following section provides some examples of how formulas use different types of context to dynamically return results.</span></span>  
  
##### <a name="examples-of-context-in-formulas"></a><span data-ttu-id="6c36d-426">数式のコンテキストの例</span><span class="sxs-lookup"><span data-stu-id="6c36d-426">Examples of Context in Formulas</span></span>  
  
1.  <span data-ttu-id="6c36d-427">[関連する関数](/dax/related-function-dax)関数は、現在の行のコンテキストを拡張して、関連する列に値を含めます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-427">The [RELATED Function](/dax/related-function-dax) function expands the context of the current row to include values in a related column.</span></span> <span data-ttu-id="6c36d-428">これにより、参照を実行できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-428">This lets you perform lookups.</span></span> <span data-ttu-id="6c36d-429">このトピックには、フィルター処理と行コンテキストの相互作用の例が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-429">The example in this topic illustrates the interaction of filtering and row context.</span></span>  
  
2.  <span data-ttu-id="6c36d-430">[FILTER 関数](/dax/filter-function-dax)関数を使用すると、現在のコンテキストに含める行を指定できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-430">The [FILTER Function](/dax/filter-function-dax) function lets you specify the rows to include in the current context.</span></span> <span data-ttu-id="6c36d-431">このトピックの例では、集計を行う別の関数にフィルターを埋め込む方法も示されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-431">The examples in this topic also illustrate how to embed filters within other functions that perform aggregates.</span></span>  
  
3.  <span data-ttu-id="6c36d-432">[ALL 関数](/dax/all-function-dax)関数は、数式内でコンテキストを設定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-432">The [ALL Function](/dax/all-function-dax) function sets context within a formula.</span></span> <span data-ttu-id="6c36d-433">この関数を使用すると、クエリ コンテキストの結果として適用されたフィルターをオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-433">You can use it to override filters that are applied as result of query context.</span></span>  
  
4.  <span data-ttu-id="6c36d-434">[Allexcept 関数](/dax/allexcept-function-dax)関数を使用すると、指定したフィルター以外のすべてのフィルターを削除できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-434">The [ALLEXCEPT Function](/dax/allexcept-function-dax) function lets you remove all filters except one that you specify.</span></span> <span data-ttu-id="6c36d-435">どちらのトピックにも、数式の作成と複雑なコンテキストの理解に役立つ例が含まれています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-435">Both topics include examples that walk you through building formulas and understanding complex contexts.</span></span>  
  
5.  <span data-ttu-id="6c36d-436">[前の関数](/dax/earlier-function-dax)関数と[最初の関数](/dax/earliest-function-dax)関数を使用すると、内側のループの値を参照しながら、計算を実行してテーブルをループ処理できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-436">The [EARLIER Function](/dax/earlier-function-dax) and [EARLIEST Function](/dax/earliest-function-dax) functions let you loop through tables by performing calculations, while referencing a value from an inner loop.</span></span> <span data-ttu-id="6c36d-437">再帰の概念や内側と外側のループについてよく知っている場合は、このトピックを読むと EARLIER および EARLIEST 関数の威力がわかります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-437">If you are familiar with the concept of recursion and with inner and outer loops, you will appreciate the power that the EARLIER and EARLIEST functions provide.</span></span> <span data-ttu-id="6c36d-438">これらの概念についてよく知らなくても、例の手順に注意して従うことで、計算で内側と外側のコンテキストがどのように使用されるのかを理解できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-438">If you are new to these concepts, you should follow the steps in the example carefully to see how the inner and outer contexts are used in calculations.</span></span>  
  
##  <a name="formulas-and-the-tabular-model"></a><a name="bkmk_RelModel"></a><span data-ttu-id="6c36d-439">数式とテーブルモデル</span><span class="sxs-lookup"><span data-stu-id="6c36d-439">Formulas and the Tabular Model</span></span>  
 <span data-ttu-id="6c36d-440">[!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]のモデル デザイナーは、複数のテーブルのデータを使用して作業を行う場所であり、テーブル モデルでテーブルの関連付けを行う場所です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-440">The model designer, in [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], is an area where you can work with multiple tables of data and connect the tables in a tabular model.</span></span> <span data-ttu-id="6c36d-441">このモデルでは、共通の値 (キー) を含む列のリレーションシップによってテーブルが結合されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-441">Within this model, tables are joined by relationships on columns with common values (keys).</span></span> <span data-ttu-id="6c36d-442">テーブル モデルでは、他のテーブルの列に値をリンクして、より有益な計算を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-442">The tabular model lets you link values to columns in other tables and create more interesting calculations.</span></span> <span data-ttu-id="6c36d-443">リレーショナル データベースと同様に、関連するテーブルの多くのレベルを結び付け、任意のテーブルの列を結果で使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-443">Just as in a relational database, you can connect many levels of related tables and use columns from any of the tables in the results.</span></span>  
  
 <span data-ttu-id="6c36d-444">たとえば、売上テーブル、製品テーブル、および製品カテゴリ テーブルをリンクすると、ユーザーは、ピボットテーブルやレポートで、列のさまざまな組み合わせを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-444">For example, you can link a sales table, a products table, and a product categories table, and users can use various combinations of the columns in PivotTables and reports.</span></span> <span data-ttu-id="6c36d-445">関連するフィールドは、接続されたテーブルをフィルター処理したり、サブセットに対する計算を作成したりするために使用できます</span><span class="sxs-lookup"><span data-stu-id="6c36d-445">Related fields can be used to filter connected tables, or to create calculations over subsets.</span></span> <span data-ttu-id="6c36d-446">(リレーショナル データベースや、テーブルと結合の操作に詳しくない場合は、「[リレーションシップ &#40;SSAS テーブル&#41;](relationships-ssas-tabular.md)」を参照してください)。</span><span class="sxs-lookup"><span data-stu-id="6c36d-446">(If you are not familiar with relational database and working with tables and joins, see [Relationships &#40;SSAS Tabular&#41;](relationships-ssas-tabular.md).)</span></span>  
  
 <span data-ttu-id="6c36d-447">テーブル モデルでは、複数のテーブル間での複数のリレーションシップがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-447">Tabular models support multiple relationships among tables.</span></span> <span data-ttu-id="6c36d-448">混乱や結果の間違いを避けるために、アクティブなリレーションシップとして一度に指定できるリレーションシップは 1 つだけですが、必要に応じてアクティブなリレーションシップを変更し、データのさまざまな組み合わせを計算で使用することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-448">To avoid confusion or wrong results, only one relationship at a time is designated as the active relationship, but you can change the active relationship as necessary to traverse different connections in the data in calculations.</span></span> <span data-ttu-id="6c36d-449">[DAX&#41;&#40;USERELATIONSHIP 関数](/dax/userelationship-function-dax)を使用すると、特定の計算で使用する1つ以上のリレーションシップを指定できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-449">The [USERELATIONSHIP Function &#40;DAX&#41;](/dax/userelationship-function-dax) can be used to specify one or more relationships to be used in a specific calculation.</span></span>  
  
 <span data-ttu-id="6c36d-450">テーブル モデルの数式は、以下の規則に従って設計する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-450">In a tabular model, you should observe these formula design rules:</span></span>  
  
-   <span data-ttu-id="6c36d-451">複数のテーブルがリレーションシップによって関連付けられている場合、キーとして使用される 2 つの列の値が一致することを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-451">When tables are connected by a relationship, you must ensure that the two columns used as keys have values that match.</span></span> <span data-ttu-id="6c36d-452">ただし、参照整合性は強制されないため、キー列に一致しない値があってもリレーションシップを作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-452">Referential integrity is not enforced, however; therefore it is possible to have non-matching values in a key column and still create a relationship.</span></span> <span data-ttu-id="6c36d-453">その場合は、空白または一致しない値のために、数式の結果が影響を受けることがあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-453">If this happens, you should be aware that blank values or non-matching values might affect the results of formulas.</span></span>  
  
-   <span data-ttu-id="6c36d-454">リレーションシップを使用してモデル内のテーブルをリンクする場合は、数式を評価するスコープ (または *コンテキスト*とも呼ばれる) が拡大されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-454">When you link tables in your model by using relationships, you enlarge the scope, or *context*, in which your formulas are evaluated.</span></span> <span data-ttu-id="6c36d-455">新しいテーブルや新しいリレーションシップを追加したため、またはアクティブなリレーションシップを変更したためにコンテキストが変化すると、予測していなかった結果の変更が生じることがあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-455">Changes in context resulting from the addition of new tables, new relationships, or from changes in the active relationship can cause your results to change in ways that you might not anticipate.</span></span> <span data-ttu-id="6c36d-456">詳細については、このトピックの「 [DAX の数式のコンテキスト](#bkmk_context) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-456">For more information, see [Context in DAX Formulas](#bkmk_context) earlier in this topic.</span></span>  
  
##  <a name="working-with-tables-and-columns"></a><a name="bkmk_tables"></a><span data-ttu-id="6c36d-457">テーブルと列の操作</span><span class="sxs-lookup"><span data-stu-id="6c36d-457">Working with Tables and Columns</span></span>  
 <span data-ttu-id="6c36d-458">テーブル モデルにおけるテーブルは、外観が Excel テーブルと似ていますが、データや数式を処理する方法は異なります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-458">Tables in tabular models look like Excel tables, but are different in the way they work with data and with formulas:</span></span>  
  
-   <span data-ttu-id="6c36d-459">数式では、テーブルおよび列のみを使用できます。個々のセル、範囲参照、配列などは使用できません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-459">Formulas work only with tables and columns, not with individual cells, range references, or arrays.</span></span>  
  
-   <span data-ttu-id="6c36d-460">数式では、リレーションシップを使用して関連するテーブルから値を取得できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-460">Formulas can use relationships to get values from related tables.</span></span> <span data-ttu-id="6c36d-461">取得した値は、常に現在の行の値に関連しています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-461">The values that are retrieved are always related to the current row value.</span></span>  
  
-   <span data-ttu-id="6c36d-462">Excel ワークシートとは異なり、不規則データを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-462">You cannot have irregular or "ragged" data like you can in an Excel worksheet.</span></span> <span data-ttu-id="6c36d-463">テーブル内の各行には同じ数の列が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-463">Each row in a table must contain the same number of columns.</span></span> <span data-ttu-id="6c36d-464">ただし、一部の列には空の値を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-464">However, you can have empty values in some columns.</span></span> <span data-ttu-id="6c36d-465">Excel データ テーブルと、テーブル モデルのデータ テーブルを置き換えることはできません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-465">Excel data tables and tabular model data tables are not interchangeable.</span></span>  
  
-   <span data-ttu-id="6c36d-466">各列のデータ型は設定されているので、それぞれの列の値は、その型と同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-466">Because a data type is set for each column, each value in that column must be of the same type.</span></span>  
  
### <a name="referring-to-tables-and-columns-in-formulas"></a><span data-ttu-id="6c36d-467">数式でのテーブルと列の参照</span><span class="sxs-lookup"><span data-stu-id="6c36d-467">Referring to Tables and Columns in Formulas</span></span>  
 <span data-ttu-id="6c36d-468">テーブルと列はその名前を使用して参照できます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-468">You can refer to any table and column by using its name.</span></span> <span data-ttu-id="6c36d-469">たとえば、次の数式は *完全修飾* 名を使用して 2 つのテーブルの列を参照する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-469">For example, the following formula illustrates how to refer to columns from two tables by using the *fully qualified* name:</span></span>  
  
```  
=SUM('New Sales'[Amount]) + SUM('Past Sales'[Amount])  
```  
  
 <span data-ttu-id="6c36d-470">モデル デザイナーで数式を評価すると、最初に全般的な構文がチェックされます。その後、指定した列およびテーブルの名前がチェックされ、現在のコンテキストに適合しているかどうか照合されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-470">When a formula is evaluated, the model designer first checks for general syntax, and then checks the names of columns and tables that you provide against possible columns and tables in the current context.</span></span> <span data-ttu-id="6c36d-471">名前があいまいな場合や、列またはテーブルが見つからない場合は、数式がエラーになります (エラーが発生したセルでは、データ値の代わりに #ERROR という文字列が表示されます)。</span><span class="sxs-lookup"><span data-stu-id="6c36d-471">If the name is ambiguous or if the column or table cannot be found, you will get an error on your formula (an #ERROR string instead of a data value in cells where the error occurs).</span></span> <span data-ttu-id="6c36d-472">テーブル、列、およびその他のオブジェクトの名前付けに関する要件の詳細については、「 [PowerPivot の DAX 構文の仕様](/dax/dax-syntax-reference)」の「名前付けに関する要件」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-472">For more information about naming requirements for tables, columns, and other objects, see "Naming Requirements" in [DAX Syntax Specification for PowerPivot](/dax/dax-syntax-reference).</span></span>  
  
### <a name="table-relationships"></a><span data-ttu-id="6c36d-473">テーブルのリレーションシップ</span><span class="sxs-lookup"><span data-stu-id="6c36d-473">Table Relationships</span></span>  
 <span data-ttu-id="6c36d-474">テーブル間のリレーションシップを作成すると、別のテーブルのデータを参照して関連する値を使用し、複雑な計算を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-474">By creating relationships between tables, you gain the ability to look up data in another table and use related values to perform complex calculations.</span></span> <span data-ttu-id="6c36d-475">たとえば、計算列を使用して、現在の再販業者に関連する出荷レコードをすべて検索してから、それぞれの輸送費を合計することができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-475">For example, you can use a calculated column to look up all the shipping records related to the current reseller, and then sum the shipping costs for each.</span></span> <span data-ttu-id="6c36d-476">ただし、多くの場合、リレーションシップは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-476">In many cases, however, a relationship might not be necessary.</span></span> <span data-ttu-id="6c36d-477">数式内で LOOKUPVALUE 関数を使用して、 *search_column* および *search_value* パラメーターで指定された条件を満たす行の *result_columnName* の値を返すことができます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-477">You can use the LOOKUPVALUE function in a formula to return the value in *result_columnName* for the row that meets criteria specified in the *search_column* and *search_value* parameters.</span></span>  
  
 <span data-ttu-id="6c36d-478">DAX 関数の多くでは、参照先の列を見つけて意味のある結果を返すために、テーブル間のリレーションシップが必要になります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-478">Many DAX functions require that a relationship exist between the tables, or among multiple tables, in order to locate the columns that you have referenced and return results that make sense.</span></span> <span data-ttu-id="6c36d-479">リレーションシップを特定しようとする関数もありますが、最適な結果を得るには、可能な限りリレーションシップを作成するようにしてください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-479">Other functions will attempt to identify the relationship; however, for best results you should always create a relationship where possible.</span></span> <span data-ttu-id="6c36d-480">詳細については、このトピックの「 [数式とテーブル モデル](#bkmk_RelModel) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-480">For more information, see [Formulas and the Tabular Model](#bkmk_RelModel) earlier in this topic.</span></span>  
  
##  <a name="updating-the-results-of-formulas-process"></a><a name="bkmk_RefreshRecalc"></a> <span data-ttu-id="6c36d-481">数式の結果の更新 (処理)</span><span class="sxs-lookup"><span data-stu-id="6c36d-481">Updating the Results of Formulas (Process)</span></span>  
 <span data-ttu-id="6c36d-482">*データ処理* と *再計算* は、別個の操作ですが互いに関連しています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-482">*Data process* and *recalculation* are two separate but related operations.</span></span> <span data-ttu-id="6c36d-483">複雑な数式、大量のデータ、または外部データ ソースから取得されるデータを含むモデルをデザインする場合には、これらの概念を十分理解している必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-483">You should thoroughly understand these concepts when designing a model that contains complex formulas, large amounts of data, or data that is obtained from external data sources.</span></span>  
  
 <span data-ttu-id="6c36d-484">*データ処理* は、外部データ ソースの新しいデータでモデル内のデータを更新する処理です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-484">*Processing data* is the process of updating the data in a model with new data from an external data source.</span></span>  
  
 <span data-ttu-id="6c36d-485">*再計算* は、数式自体に対する変更と基になるデータの変更を反映するために、数式の結果を更新する処理です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-485">*Recalculation* is the process of updating the results of formulas to reflect any changes to the formulas themselves and to reflect changes in the underlying data.</span></span> <span data-ttu-id="6c36d-486">再計算は、以下のようにパフォーマンスに影響を及ぼす場合があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-486">Recalculation can affect performance in the following ways:</span></span>  
  
-   <span data-ttu-id="6c36d-487">集計列の値が計算され、モデルに格納されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-487">The values in a calculated column are computed and stored in the model.</span></span> <span data-ttu-id="6c36d-488">計算列の値を更新するには、プロセス全体、データの処理、または再計算の処理の3つの処理コマンドのいずれかを使用して、モデルを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-488">To update the values in the calculated column, you must process the model using one of three processing commands - Process Full, Process Data, or Process Recalc.</span></span> <span data-ttu-id="6c36d-489">数式が変更された場合、列全体に対して、常に数式の結果を再計算する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-489">The result of the formula must always be recalculated for the entire column, whenever you change the formula.</span></span>  
  
-   <span data-ttu-id="6c36d-490">メジャーによって計算される値は、ユーザーがメジャーをピボットテーブルに追加したときやレポートを開いたときに動的に評価されます。ユーザーがコンテキストを変更すると、メジャーによって返される値は変化します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-490">The values calculated by measures are dynamically evaluated whenever a user adds the measure to a pivot table or open a report; as the user modifies the context, values returned by the measure change.</span></span> <span data-ttu-id="6c36d-491">メジャーの結果には、常に最新のメモリ内キャッシュが反映されます。</span><span class="sxs-lookup"><span data-stu-id="6c36d-491">The results of the measure always reflect the latest in the in-memory cache.</span></span>  
  
 <span data-ttu-id="6c36d-492">再計算の結果、異なる値が返され、ロール メンバーによる行のクエリの可否が変化しない限り、処理も再計算も行フィルターの数式には影響しません。</span><span class="sxs-lookup"><span data-stu-id="6c36d-492">Processing and recalculation have no effect on row filter formulas unless the result of a recalculation returns a different value, thus making the row queryable or not queryable by role members.</span></span>  
  
 <span data-ttu-id="6c36d-493">詳細については、「 [データの処理 (SSAS テーブル)](../process-data-ssas-tabular.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-493">For more information, see [Process Data &#40;SSAS Tabular&#41;](../process-data-ssas-tabular.md).</span></span>  
  
##  <a name="troubleshooting-errors-in-formulas"></a><a name="bkmk_troubleshoot"></a> <span data-ttu-id="6c36d-494">数式内のエラーのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="6c36d-494">Troubleshooting Errors in Formulas</span></span>  
 <span data-ttu-id="6c36d-495">数式を定義するときにエラーが発生した場合は、その数式に *構文エラー*、 *セマンティック エラー*、または *計算エラー*が含まれている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-495">If you get an error when defining a formula, the formula might contain either a *syntactic error*, *semantic error*, or *calculation error*.</span></span>  
  
 <span data-ttu-id="6c36d-496">構文エラーの解決は非常に簡単です。</span><span class="sxs-lookup"><span data-stu-id="6c36d-496">Syntactic errors are the easiest to resolve.</span></span> <span data-ttu-id="6c36d-497">かっこやコンマが不足している場合がよくあります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-497">They typically involve a missing parenthesis or comma.</span></span> <span data-ttu-id="6c36d-498">個々の関数の構文については、「 [DAX 関数リファレンス](/dax/dax-function-reference)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c36d-498">For help with the syntax of individual functions, see [DAX Function Reference](/dax/dax-function-reference).</span></span>  
  
 <span data-ttu-id="6c36d-499">構文は正しいが、参照される値または列が数式のコンテキストで意味をなさないときには、別のエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-499">The other type of error occurs when the syntax is correct, but the value or the column referenced does not make sense in the context of the formula.</span></span> <span data-ttu-id="6c36d-500">このようなセマンティック エラーや計算エラーは次のような問題が原因で生じている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c36d-500">Such semantic and calculation errors might be caused by any of the following problems:</span></span>  
  
-   <span data-ttu-id="6c36d-501">数式が、存在しない列、テーブル、または関数を参照している。</span><span class="sxs-lookup"><span data-stu-id="6c36d-501">The formula refers to a non-existing column, table, or function.</span></span>  
  
-   <span data-ttu-id="6c36d-502">数式は正しいように見えるが、データ エンジンがデータをフェッチしたときに型の不一致が検出され、エラーが発生する。</span><span class="sxs-lookup"><span data-stu-id="6c36d-502">The formula appears to be correct, but when the data engine fetches the data it finds a type mismatch, and raises an error.</span></span>  
  
-   <span data-ttu-id="6c36d-503">数式が関数に渡したパラメーターの数または型が正しくない。</span><span class="sxs-lookup"><span data-stu-id="6c36d-503">The formula passes an incorrect number or type of parameters to a function.</span></span>  
  
-   <span data-ttu-id="6c36d-504">数式が参照している別の列にエラーがあるため、その値が無効になる。</span><span class="sxs-lookup"><span data-stu-id="6c36d-504">The formula refers to a different column that has an error, and therefore its values are invalid.</span></span>  
  
-   <span data-ttu-id="6c36d-505">数式が参照している列が処理されなかった。メタデータは含まれるが、計算するための実際のデータが含まれない。</span><span class="sxs-lookup"><span data-stu-id="6c36d-505">The formula refers to a column that has not been processed, meaning it has metadata but no actual data to use for calculations.</span></span>  
  
 <span data-ttu-id="6c36d-506">最初の 4 つのケースでは、DAX は無効な数式を含んでいる列全体にフラグを設定します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-506">In the first four cases, DAX flags the entire column that contains the invalid formula.</span></span> <span data-ttu-id="6c36d-507">最後のケースでは、DAX は列をグレーで表示し、その列が未処理状態であることを示します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-507">In the last case, DAX grays out the column to indicate that the column is in an unprocessed state.</span></span>  
  
##  <a name="additional-resources"></a><a name="bkmk_addional_resources"></a> <span data-ttu-id="6c36d-508">その他のリソース</span><span class="sxs-lookup"><span data-stu-id="6c36d-508">Additional Resources</span></span>  
 <span data-ttu-id="6c36d-509">「[テーブル モデリング &#40;Adventure Works チュートリアル&#41;](../tabular-modeling-adventure-works-tutorial.md)」では、計算列、メジャー、および行フィルターに多数の計算を含んだテーブル モデルの作成手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="6c36d-509">The [Tabular Modeling &#40;Adventure Works Tutorial&#41;](../tabular-modeling-adventure-works-tutorial.md) provides step-by-step instructions on how to create a tabular model that includes many calculations in calculated columns, measures, and row filters.</span></span> <span data-ttu-id="6c36d-510">ほとんどの数式について、それぞれの目的が説明されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-510">For most formulas, a description about what the formula is meant to do is provided.</span></span>  
  
 <span data-ttu-id="6c36d-511">[Analysis Services と Powerpivot チームのブログ](https://go.microsoft.com/fwlink/?LinkID=220949&clcid=0x409)では、と powerpivot に関する情報、ヒント、ニュース、およびお知らせが提供されて [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)] います。</span><span class="sxs-lookup"><span data-stu-id="6c36d-511">The [Analysis Services and PowerPivot Team Blog](https://go.microsoft.com/fwlink/?LinkID=220949&clcid=0x409) provides information, tips, news and announcements about [!INCLUDE[ssASCurrent](../../includes/ssascurrent-md.md)] and PowerPivot.</span></span>  
  
 <span data-ttu-id="6c36d-512">「 [DAX リソース センター](https://go.microsoft.com/fwlink/?LinkID=220966&clcid=0x409) 」には、マイクロソフト内外の DAX 情報が掲載されています。中には、ビジネス インテリジェンスの第一線で活躍する専門家による DAX に関する豊富なソリューションも紹介されています。</span><span class="sxs-lookup"><span data-stu-id="6c36d-512">The [DAX Resource Center](https://go.microsoft.com/fwlink/?LinkID=220966&clcid=0x409) provides both internal and external information on DAX, including numerous DAX solutions submitted by leading Business Intelligence professionals.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6c36d-513">参照</span><span class="sxs-lookup"><span data-stu-id="6c36d-513">See Also</span></span>  
 <span data-ttu-id="6c36d-514">[データ分析式 &#40;DAX&#41; リファレンス](/dax/data-analysis-expressions-dax-reference) </span><span class="sxs-lookup"><span data-stu-id="6c36d-514">[Data Analysis Expressions &#40;DAX&#41; Reference](/dax/data-analysis-expressions-dax-reference) </span></span>  
 <span data-ttu-id="6c36d-515">[SSAS テーブル&#41;&#40;メジャー](measures-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="6c36d-515">[Measures &#40;SSAS Tabular&#41;](measures-ssas-tabular.md) </span></span>  
 <span data-ttu-id="6c36d-516">[SSAS 表形式の計算列 &#40;&#41;](ssas-calculated-columns.md) </span><span class="sxs-lookup"><span data-stu-id="6c36d-516">[Calculated Columns &#40;SSAS Tabular&#41;](ssas-calculated-columns.md) </span></span>  
 <span data-ttu-id="6c36d-517">[SSAS 表形式のロール &#40;&#41;](roles-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="6c36d-517">[Roles &#40;SSAS Tabular&#41;](roles-ssas-tabular.md) </span></span>  
 <span data-ttu-id="6c36d-518">[SSAS 表形式&#41;&#40;Kpi](kpis-ssas-tabular.md) </span><span class="sxs-lookup"><span data-stu-id="6c36d-518">[KPIs &#40;SSAS Tabular&#41;](kpis-ssas-tabular.md) </span></span>  
 [<span data-ttu-id="6c36d-519">サポートされているデータ ソース &#40;SSAS テーブル&#41;</span><span class="sxs-lookup"><span data-stu-id="6c36d-519">Data Sources Supported &#40;SSAS Tabular&#41;</span></span>](data-sources-supported-ssas-tabular.md)  
  
  
