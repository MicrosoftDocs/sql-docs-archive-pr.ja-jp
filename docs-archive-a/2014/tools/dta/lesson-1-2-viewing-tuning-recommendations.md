---
title: チューニングに関する推奨事項の表示 |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- Database Engine [SQL Server], tutorials
ms.assetid: e4e690c9-434f-4b01-b4de-0b905323ddd6
author: stevestein
ms.author: sstein
ms.openlocfilehash: 6d938767d874edd8f14bdaa91c0cf52023478f53
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87719221"
---
# <a name="viewing-tuning-recommendations"></a><span data-ttu-id="bf36d-102">チューニング推奨設定の表示</span><span class="sxs-lookup"><span data-stu-id="bf36d-102">Viewing Tuning Recommendations</span></span>
  <span data-ttu-id="bf36d-103"> ここでは、「[ワークロードのチューニング](lesson-1-1-tuning-a-workload.md)」で作成したチューニング セッションを使用します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-103">This task uses the tuning session that you created in [Tuning a Workload](lesson-1-1-tuning-a-workload.md).</span></span> <span data-ttu-id="bf36d-104">Myscript.sql スクリプトを使用してデータベースをチューニングすると、 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] [!INCLUDE[tsql](../../includes/tsql-md.md)] チューニングアドバイザーの [ [!INCLUDE[ssDE](../../includes/ssde-md.md)] **推奨**設定] タブに結果が表示されます。次のタスクでは**Recommendations** 、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] チューニングアドバイザーのグラフィカルユーザーインターフェイス (GUI) の [推奨設定] タブについて説明し、チューニングセッションの結果について説明している情報を紹介します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-104">After you have tuned the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database by using the MyScript.sql [!INCLUDE[tsql](../../includes/tsql-md.md)] script, [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor displays its results on the **Recommendations** tab. The following task introduces the **Recommendations** tab of the [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor graphical user interface (GUI) and guides you to explore the information it provides about the tuning session results.</span></span>  
  
### <a name="view-tuning-recommendations"></a><span data-ttu-id="bf36d-105">チューニング推奨設定の表示</span><span class="sxs-lookup"><span data-stu-id="bf36d-105">View tuning recommendations</span></span>  
  
1.  <span data-ttu-id="bf36d-106">[!INCLUDE[ssDE](../../includes/ssde-md.md)] チューニング アドバイザーを起動します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-106">Start [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor.</span></span> <span data-ttu-id="bf36d-107">「 [データベース エンジン チューニング アドバイザーの起動](../../relational-databases/performance/database-engine-tuning-advisor.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="bf36d-107">See [Launching Database Engine Tuning Advisor](../../relational-databases/performance/database-engine-tuning-advisor.md).</span></span> <span data-ttu-id="bf36d-108">「 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ワークロードのチューニング [」の実習で使用した](lesson-1-1-tuning-a-workload.md)インスタンスに接続していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-108">Make sure that you connect to the same [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance that you used in the practice [Tuning a Workload](lesson-1-1-tuning-a-workload.md).</span></span>  
  
2.  <span data-ttu-id="bf36d-109">**[セッション モニター]** ペインの **[MySession]** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-109">Double-click **MySession** in the **Session Monitor** pane.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)]<span data-ttu-id="bf36d-110">チューニングアドバイザーによって、前のチューニングセッションからセッション情報が読み込まれ、[**推奨**設定] タブが表示されます。チューニングアドバイザーでは、チューニング [!INCLUDE[ssDE](../../includes/ssde-md.md)] オプションの既定値をすべて受け入れ、[**チューニングオプション**] タブでパーティション分割が選択されて**い**ないため、**パーティションの推奨事項**はありません。</span><span class="sxs-lookup"><span data-stu-id="bf36d-110">Tuning Advisor loads the session information from your previous tuning session and displays the **Recommendations** tab. Note that [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor made no **Partition Recommendations** because you accepted all the tuning option defaults and **No partitioning** was selected on the **Tuning Options** tab.</span></span>  
  
3.  <span data-ttu-id="bf36d-111">**[推奨設定]** タブで、 **[推奨インデックス]** のすべての列を表示するには、このページの下部にあるスクロール バーを使用します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-111">On the **Recommendations** tab, use the scroll bar at the bottom of the tabbed page to view all of the **Index Recommendations** columns.</span></span> <span data-ttu-id="bf36d-112">各行は、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] チューニング アドバイザーによって削除または作成が推奨されているデータベース オブジェクト (インデックスまたはインデックス ビュー) です。</span><span class="sxs-lookup"><span data-stu-id="bf36d-112">Each row represents a database object (indexes or indexed views) that [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor recommends be dropped or created.</span></span> <span data-ttu-id="bf36d-113">右端の列までスクロールし、 **[定義]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-113">Scroll to the right-most column and click a **Definition**.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)]<span data-ttu-id="bf36d-114">**[SQL スクリプトのプレビュー]** ウィンドウが表示されます。このウィンドウには、その行のデータベース オブジェクトを作成または削除する [!INCLUDE[tsql](../../includes/tsql-md.md)] スクリプトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-114">Tuning Advisor displays a **SQL Script Preview** window where you can view the [!INCLUDE[tsql](../../includes/tsql-md.md)] script that creates or drops the database object on that row.</span></span> <span data-ttu-id="bf36d-115">**[閉じる]** をクリックし、プレビュー ウィンドウを閉じます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-115">Click **Close** to close the preview window.</span></span>  
  
     <span data-ttu-id="bf36d-116">リンクを含む **[定義]** を見つけにくい場合は、タブ付きページの下部にある **[既存のオブジェクトを表示する]** チェック ボックスをオフにすると、表示される行数が少なくなり、</span><span class="sxs-lookup"><span data-stu-id="bf36d-116">If you are having difficulty locating a **Definition** that contains a link, click to clear the **Show existing objects** check box at the bottom of the tabbed page, which will decrease the number of rows displayed.</span></span> <span data-ttu-id="bf36d-117">推奨設定が生成されたオブジェクトのみが [!INCLUDE[ssDE](../../includes/ssde-md.md)] チューニング アドバイザーに表示されます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-117">When you clear this checkbox, [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor shows you only the objects for which it has generated a recommendation.</span></span> <span data-ttu-id="bf36d-118">**[既存のオブジェクトを表示する]** チェック ボックスをオンにすると、現在 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] データベースに存在するすべてのデータベース オブジェクトが表示されます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-118">Select the **Show existing objects** check box to view all the database objects that currently exist in the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] database.</span></span> <span data-ttu-id="bf36d-119">タブ ページ右側のスクロール バーを使用し、すべてのオブジェクトを表示します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-119">Use the scroll bar at the right side of the tabbed page to view all of the objects.</span></span>  
  
4.  <span data-ttu-id="bf36d-120">**[推奨インデックス]** ペインのグリッドを右クリックします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-120">Right-click the grid in the **Index Recommendations** pane.</span></span> <span data-ttu-id="bf36d-121">このとき表示されるメニューでは、推奨設定を選択または選択解除できます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-121">This right-click menu enables you to select and deselect recommendations.</span></span> <span data-ttu-id="bf36d-122">また、グリッド テキストのフォントも変更できます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-122">It also enables you to change the font for the grid text.</span></span>  
  
5.  <span data-ttu-id="bf36d-123">**[アクション]** メニューの **[推奨設定の保存]** をクリックし、すべての推奨設定を 1 つの [!INCLUDE[tsql](../../includes/tsql-md.md)] スクリプトに保存します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-123">On the **Actions** menu, click **Save Recommendations** to save all of the recommendations into one [!INCLUDE[tsql](../../includes/tsql-md.md)] script.</span></span> <span data-ttu-id="bf36d-124">スクリプトに `MySessionRecommendations.sql` という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-124">Name the script `MySessionRecommendations.sql`.</span></span>  
  
     <span data-ttu-id="bf36d-125">[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] のクエリ エディターで MySessionRecommendations.sql を開き、スクリプトを表示します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-125">Open the MySessionRecommendations.sql script in the Query Editor of [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] to view it.</span></span> <span data-ttu-id="bf36d-126">クエリ エディターでこのスクリプトを実行すれば、 [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] サンプル データベースに推奨設定を適用することができますが、ここでは実行しません。</span><span class="sxs-lookup"><span data-stu-id="bf36d-126">You could apply the recommendations to the [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] sample database by executing the script in the Query Editor, but do not do this.</span></span> <span data-ttu-id="bf36d-127">クエリ エディターのスクリプトを実行せずに閉じます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-127">Close the script in Query Editor without running it.</span></span>  
  
     <span data-ttu-id="bf36d-128">また、 **チューニング アドバイザーの** [アクション] **メニューで** [推奨設定の適用] [!INCLUDE[ssDE](../../includes/ssde-md.md)] をクリックし、推奨設定を適用することもできます。しかし、この演習ではこれらの推奨設定は適用しません。</span><span class="sxs-lookup"><span data-stu-id="bf36d-128">As an alternative, you could also apply the recommendations by clicking **Apply Recommendations** on the **Actions** menu of [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor, but do not apply these recommendations now in this practice.</span></span>  
  
6.  <span data-ttu-id="bf36d-129">**[推奨設定]** タブに複数の推奨が存在する場合は、 **[推奨インデックス]** グリッドにデータベース オブジェクトが一覧表示されます。この中のいくつかの行をオフにします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-129">If more than one recommendation exists on the **Recommendations** tab, clear some of the rows that list database objects in the **Index Recommendations** grid.</span></span>  
  
7.  <span data-ttu-id="bf36d-130">**[アクション]** メニューの **[推奨設定の評価]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-130">On the **Actions** menu, click **Evaluate Recommendations**.</span></span> [!INCLUDE[ssDE](../../includes/ssde-md.md)] <span data-ttu-id="bf36d-131">新しいチューニング セッションが作成されます。ここで、MySession の元の推奨設定の一部を評価することができます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-131">Tuning Advisor creates a new tuning session where you can evaluate a subset of the original recommendations from MySession.</span></span>  
  
8.  <span data-ttu-id="bf36d-132">`EvaluateMySession`新しい**セッション名**として「」と入力し、ツールバーの [**分析の開始**] ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-132">Type `EvaluateMySession` for your new **Session name**, and click the **Start Analysis** button on the toolbar.</span></span> <span data-ttu-id="bf36d-133">この新しいセッションに対して手順 2. ～ 3. を繰り返し、推奨設定を表示します。</span><span class="sxs-lookup"><span data-stu-id="bf36d-133">You can repeat Steps 2 and 3 for this new tuning session to view its recommendations.</span></span>  
  
## <a name="summary"></a><span data-ttu-id="bf36d-134">まとめ</span><span class="sxs-lookup"><span data-stu-id="bf36d-134">Summary</span></span>  
 <span data-ttu-id="bf36d-135">MySession チューニング セッションの内容を **[推奨設定]** タブに表示し、新しい EvaluateMySession チューニング セッションでその推奨設定の一部を評価しました。</span><span class="sxs-lookup"><span data-stu-id="bf36d-135">You have viewed the contents of the **Recommendations** tab for the MySession tuning session and evaluated a subset of its recommendations in the new EvaluateMySession tuning session.</span></span>  
  
 <span data-ttu-id="bf36d-136">チューニング セッションを実行した後で、チューニング オプションを変更する必要があるとわかった場合は、チューニング推奨設定の一部を評価することができます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-136">Evaluating a subset of tuning recommendations may be necessary if you find you must change tuning options after you run a session.</span></span> <span data-ttu-id="bf36d-137">たとえば、最初は、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] チューニング アドバイザーでインデックス付きビューを考慮するようにチューニング オプションを指定したものの、推奨設定を生成した後で、やはりインデックス付きビューを使用しないことにしたとします。</span><span class="sxs-lookup"><span data-stu-id="bf36d-137">For example, if you ask [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor to consider indexed views when you specify tuning options for a session, but after the recommendation is generated you decide against using indexed views.</span></span> <span data-ttu-id="bf36d-138">次に、[**アクション**] メニューの [推奨設定の**評価**] オプションを使用して、 [!INCLUDE[ssDE](../../includes/ssde-md.md)] インデックス付きビューを考慮せずに、チューニングアドバイザーでセッションを再評価することができます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-138">You can then use the **Evaluate Recommendations** option on the **Actions** menu to have [!INCLUDE[ssDE](../../includes/ssde-md.md)] Tuning Advisor re-evaluate the session without considering indexed views.</span></span> <span data-ttu-id="bf36d-139">**[推奨設定の評価]** を実行すると、以前に生成した推奨設定が現在の物理構造に仮想的に適用され、その状態から次のチューニング セッションを実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="bf36d-139">When you use the **Evaluate Recommendations** option the previously generated recommendations are hypothetically applied to the current physical design to arrive at the physical design for the second tuning session.</span></span>  
  
 <span data-ttu-id="bf36d-140">チューニング結果の詳細な情報は、このレッスンの次の作業で説明する **[レポート]** タブに表示されます。</span><span class="sxs-lookup"><span data-stu-id="bf36d-140">More tuning result information can be viewed in the **Reports** tab, which is described in the next task of this lesson.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="bf36d-141">このレッスンの次の作業</span><span class="sxs-lookup"><span data-stu-id="bf36d-141">Next Task in Lesson</span></span>  
 [<span data-ttu-id="bf36d-142">チューニング レポートの表示</span><span class="sxs-lookup"><span data-stu-id="bf36d-142">Viewing Tuning Reports</span></span>](lesson-1-3-viewing-tuning-reports.md)  
  
  
