---
title: 分散再生 Security |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
ms.assetid: 7e2e586d-947d-4fe2-86c5-f06200ebf139
author: stevestein
ms.author: sstein
ms.openlocfilehash: 7b05c6bbe3998faa46d56684b77b8d2a4dec4466
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87640285"
---
# <a name="distributed-replay-security"></a><span data-ttu-id="f64e8-102">Distributed Replay のセキュリティ</span><span class="sxs-lookup"><span data-stu-id="f64e8-102">Distributed Replay Security</span></span>
  <span data-ttu-id="f64e8-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 分散再生機能をインストールして使用する前に、このトピックの重要なセキュリティ情報を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-103">Before you install and use the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay feature, you should review the important security information in this topic.</span></span> <span data-ttu-id="f64e8-104">このトピックでは、Distributed Replay を使用する前に必要なインストール後のセキュリティ構成手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-104">This topic describes the post-installation security configuration steps that are required before you can use Distributed Replay.</span></span> <span data-ttu-id="f64e8-105">また、データ保護に関する重要な考慮事項や、重要な削除手順についても説明します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-105">This topic also describes important considerations with regard to data protection and important removal steps.</span></span>  
  
## <a name="user-and-service-accounts"></a><span data-ttu-id="f64e8-106">ユーザーおよびサービスのアカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-106">User and Service Accounts</span></span>  
 <span data-ttu-id="f64e8-107">次の表に、Distributed Replay に使用するアカウントを示します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-107">The following table describes the accounts that are used for Distributed Replay.</span></span> <span data-ttu-id="f64e8-108">Distributed Replay をインストールした後、コントローラーおよびクライアントのサービス アカウントを実行するセキュリティ プリンシパルを割り当てる必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-108">After the Distributed Replay installation, you must assign the security principals that the controller and client service accounts will run as.</span></span> <span data-ttu-id="f64e8-109">したがって、Distributed Replay 機能をインストールする前に、対応するドメイン ユーザー アカウントを構成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-109">Therefore, we recommend that you configure the corresponding domain user accounts before you install the Distributed Replay features.</span></span>  
  
|<span data-ttu-id="f64e8-110">ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-110">User Account</span></span>|<span data-ttu-id="f64e8-111">必要条件</span><span class="sxs-lookup"><span data-stu-id="f64e8-111">Requirements</span></span>|  
|------------------|------------------|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f64e8-112">Distributed Replay Controller のサービス アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-112">Distributed Replay controller service account</span></span>|<span data-ttu-id="f64e8-113">ドメイン ユーザー アカウントまたはローカル ユーザー アカウントを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-113">Can be a domain user account or local user account.</span></span> <span data-ttu-id="f64e8-114">ローカル ユーザー アカウントを使用する場合、管理ツール、コントローラー、およびクライアントのすべてが同じコンピューター上で実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-114">If you use a local user account, the administration tool, controller, and client must all be running on the same computer.</span></span><br /><br /> <span data-ttu-id="f64e8-115">**\*\* セキュリティに関する注意 \*\*** このアカウントには、Windows のローカルの Administrators グループのメンバー以外を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-115">**\*\* Security Note \*\*** We recommend that the account is not a member of the local Administrators group in Windows.</span></span>|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f64e8-116">Distributed Replay Client のサービス アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-116">Distributed Replay client service account</span></span>|<span data-ttu-id="f64e8-117">ドメイン ユーザー アカウントまたはローカル ユーザー アカウントを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-117">Can be a domain user account or local user account.</span></span> <span data-ttu-id="f64e8-118">ローカル ユーザー アカウントを使用する場合、コントローラー、クライアント、および対象の SQL Server のすべてが同じコンピューター上で実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-118">If you use a local user account, the controller, client, and target SQL Server must all be running on the same computer.</span></span><br /><br /> <span data-ttu-id="f64e8-119">**\*\* セキュリティに関する注意 \*\*** このアカウントには、Windows のローカルの Administrators グループのメンバー以外を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-119">**\*\* Security Note \*\*** We recommend that the account is not a member of the local Administrators group in Windows.</span></span>|  
|<span data-ttu-id="f64e8-120">Distributed Replay 管理ツールの実行に使用する対話ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-120">Interactive user account that is used to run the Distributed Replay administration tool</span></span>|<span data-ttu-id="f64e8-121">ローカル ユーザーまたはドメイン ユーザー アカウントを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-121">Can be either a local user or a domain user account.</span></span> <span data-ttu-id="f64e8-122">ローカル ユーザー アカウントを使用するには、管理ツールとコントローラーが同じコンピューター上で実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-122">To use a local user account, the administration tool and controller must be running on the same computer.</span></span>|  
  
 <span data-ttu-id="f64e8-123">**重要**:分散再生コントローラーを構成するとき、分散再生クライアント サービスの実行に使用する 1 つ以上のユーザー アカウントを指定できます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-123">**Important**: When you configure Distributed Replay controller, you can specify one or more user accounts that will be used to run the Distributed Replay client services.</span></span> <span data-ttu-id="f64e8-124">サポートされているアカウントの一覧を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-124">The following is the list of supported accounts:</span></span>  
  
-   <span data-ttu-id="f64e8-125">ドメイン ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-125">Domain user account</span></span>  
  
-   <span data-ttu-id="f64e8-126">ユーザーによって作成されたローカル ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-126">User created local user account</span></span>  
  
-   <span data-ttu-id="f64e8-127">管理者</span><span class="sxs-lookup"><span data-stu-id="f64e8-127">Administrator</span></span>  
  
-   <span data-ttu-id="f64e8-128">仮想アカウントおよび管理されたサービス アカウント (MSA)</span><span class="sxs-lookup"><span data-stu-id="f64e8-128">Virtual account and MSA (Managed Service Account)</span></span>  
  
-   <span data-ttu-id="f64e8-129">ネットワーク サービス、ローカル サービス、およびシステム</span><span class="sxs-lookup"><span data-stu-id="f64e8-129">Network Services, Local Services, and System</span></span>  
  
 <span data-ttu-id="f64e8-130">グループ アカウント (ローカルまたはドメイン) およびその他の組み込みのアカウント (Everyone など) は使用できません。</span><span class="sxs-lookup"><span data-stu-id="f64e8-130">Group accounts (local or domain) and other built-in accounts (like Everyone) are not accepted.</span></span>  
  
 <span data-ttu-id="f64e8-131">Distributed Replay のインストール後にサービス アカウントまたはそのパスワードを設定するには、Windows サービス ツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-131">To set the service accounts or their passwords after you install Distributed Replay, you can use the Windows Services tool.</span></span> <span data-ttu-id="f64e8-132">Distributed Replay Controller または Client サービスに関連付けられているサービス アカウントを変更するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-132">To change the service accounts associated with the Distributed Replay controller or client services, follow these steps:</span></span>  
  
1.  <span data-ttu-id="f64e8-133">オペレーティング システムに応じて、次のいずれかを実行します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-133">Do either of the following, depending on the operating system:</span></span>  
  
    -   <span data-ttu-id="f64e8-134">[**スタート**] ボタンをクリックし、 `services.msc` **検索**ボックスに「」と入力して、enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-134">Click **Start**, type `services.msc` in the **Search** box, and then press ENTER.</span></span>  
  
    -   <span data-ttu-id="f64e8-135">[**スタート**] ボタンをクリックし、[**実行**] をクリックして「」と入力し、 `services.msc` enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-135">Click **Start**, click **Run**, type `services.msc`, and then press ENTER.</span></span>  
  
2.  <span data-ttu-id="f64e8-136">**[サービス]** ダイアログ ボックスで、構成するサービスを右クリックし、 **[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-136">In the **Services** dialog box, right-click the service that you want to configure, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="f64e8-137">**[ログオン]** タブで、 **[このアカウント]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-137">On the **Log On** tab, click **This account**.</span></span>  
  
4.  <span data-ttu-id="f64e8-138">使用するユーザー アカウントを構成します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-138">Configure the user account that you want to use.</span></span>  
  
## <a name="file-and-folder-permissions"></a><span data-ttu-id="f64e8-139">ファイルおよびフォルダーの権限</span><span class="sxs-lookup"><span data-stu-id="f64e8-139">File and Folder Permissions</span></span>  
 <span data-ttu-id="f64e8-140">サービス アカウントを指定したら、それらのサービス アカウントに必要なファイルおよびフォルダーの権限を付与する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-140">After the service accounts have been specified, you must grant the necessary file and folder permissions to those service accounts.</span></span> <span data-ttu-id="f64e8-141">次の表に従ってファイルおよびフォルダーの権限を構成します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-141">Configure file and folder permissions according to the following table:</span></span>  
  
|<span data-ttu-id="f64e8-142">Account</span><span class="sxs-lookup"><span data-stu-id="f64e8-142">Account</span></span>|<span data-ttu-id="f64e8-143">フォルダー権限</span><span class="sxs-lookup"><span data-stu-id="f64e8-143">Folder Permissions</span></span>|  
|-------------|------------------------|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f64e8-144">Distributed Replay Controller のサービス アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-144">Distributed Replay controller service account</span></span>|<span data-ttu-id="f64e8-145">`<Controller_Installation_Path>\DReplayController` (読み取り、書き込み、削除)</span><span class="sxs-lookup"><span data-stu-id="f64e8-145">`<Controller_Installation_Path>\DReplayController` (Read, Write, Delete)</span></span><br /><br /> <span data-ttu-id="f64e8-146">`DReplayServer.xml` ファイル (読み取り、書き込み)</span><span class="sxs-lookup"><span data-stu-id="f64e8-146">`DReplayServer.xml` file (Read, Write)</span></span>|  
|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f64e8-147">Distributed Replay Client のサービス アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-147">Distributed Replay client service account</span></span>|<span data-ttu-id="f64e8-148">`<Client_Installation_Path>\DReplayClient` (読み取り、書き込み、削除)</span><span class="sxs-lookup"><span data-stu-id="f64e8-148">`<Client_Installation_Path>\DReplayClient` (Read, Write, Delete)</span></span><br /><br /> <span data-ttu-id="f64e8-149">`DReplayClient.xml` ファイル (読み取り、書き込み)</span><span class="sxs-lookup"><span data-stu-id="f64e8-149">`DReplayClient.xml` file (Read, Write)</span></span><br /><br /> <span data-ttu-id="f64e8-150">クライアント構成ファイルで `WorkingDirectory` 要素および `ResultDirectory` 要素により指定された作業ディレクトリおよび結果ディレクトリ。</span><span class="sxs-lookup"><span data-stu-id="f64e8-150">The working and result directories, as specified in the client configuration file by the `WorkingDirectory` and `ResultDirectory` elements, respectively.</span></span> <span data-ttu-id="f64e8-151">(読み取り、書き込み)</span><span class="sxs-lookup"><span data-stu-id="f64e8-151">(Read, Write)</span></span>|  
  
## <a name="dcom-permissions"></a><span data-ttu-id="f64e8-152">DCOM 権限</span><span class="sxs-lookup"><span data-stu-id="f64e8-152">DCOM Permissions</span></span>  
 <span data-ttu-id="f64e8-153">DCOM は、コントローラーと管理ツールの間、およびコントローラーとすべてのクライアントの間のリモート プロシージャ コール (RPC) 通信に使用されます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-153">DCOM is used for remote procedure call (RPC) communication between the controller and the administration tool, and between the controller and all clients.</span></span> <span data-ttu-id="f64e8-154">Distributed Replay 機能をインストールした後、コント ローラーでコンピューター全体およびアプリケーション固有の DCOM 権限を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-154">You must configure computer-wide and application-specific DCOM permissions on the controller after the Distributed Replay features have been installed.</span></span>  
  
 <span data-ttu-id="f64e8-155">コントローラーの DCOM 権限を構成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-155">To configure the controller DCOM permissions, follow these steps:</span></span>  
  
1.  <span data-ttu-id="f64e8-156">**コンポーネント サービス スナップイン dcomcnfg.exe を開く**:これは、DCOM 権限を構成するために使用するツールです。</span><span class="sxs-lookup"><span data-stu-id="f64e8-156">**Open dcomcnfg.exe, the Component Services snap-in**: This is the tool that is used to configure DCOM permissions.</span></span>  
  
    1.  <span data-ttu-id="f64e8-157">コントローラーのコンピューターで、 **[スタート]** ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-157">On the controller computer, click **Start**.</span></span>  
  
    2.  <span data-ttu-id="f64e8-158">`dcomcnfg.exe`**検索**ボックスに「」と入力します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-158">Type `dcomcnfg.exe` in the **Search** box.</span></span>  
  
    3.  <span data-ttu-id="f64e8-159">Enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-159">Press ENTER.</span></span>  
  
2.  <span data-ttu-id="f64e8-160">**コンピューター全体の DCOM 権限を構成する**:次の表に示す各アカウントに対し、対応するコンピューター全体の DCOM 権限を付与します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-160">**Configure computer-wide DCOM permissions**: Grant the corresponding computer-wide DCOM permissions for each account listed in the following table.</span></span> <span data-ttu-id="f64e8-161">コンピューター全体の権限を設定する方法の詳細については、「[チェックリスト:DCOM アプリケーションを管理する](https://go.microsoft.com/fwlink/?LinkId=185842)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f64e8-161">For more information about how to set computer-wide permissions, see [Checklist: Manage DCOM Applications](https://go.microsoft.com/fwlink/?LinkId=185842).</span></span>  
  
3.  <span data-ttu-id="f64e8-162">**アプリケーション固有の DCOM 権限を構成する**:次の表に示す各アカウントに対し、対応するアプリケーション固有の DCOM 権限を付与します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-162">**Configure application-specific DCOM permissions**: Grant the corresponding application-specific DCOM permissions for each account listed in the following table.</span></span> <span data-ttu-id="f64e8-163">コントローラー サービスの DCOM アプリケーション名は **DReplayController**です。</span><span class="sxs-lookup"><span data-stu-id="f64e8-163">The DCOM application name for the controller service is **DReplayController**.</span></span> <span data-ttu-id="f64e8-164">アプリケーション固有の権限を設定する方法の詳細については、「[チェックリスト:DCOM アプリケーションを管理する](https://go.microsoft.com/fwlink/?LinkId=185842)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f64e8-164">For more information about how to set application-specific permissions, see [Checklist: Manage DCOM Applications](https://go.microsoft.com/fwlink/?LinkId=185842).</span></span>  
  
 <span data-ttu-id="f64e8-165">次の表に、管理ツールの対話ユーザー アカウントとクライアント サービス アカウントに必要な DCOM 権限を示します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-165">The following table describes which DCOM permissions are required for the administration tool interactive user account and the client service accounts:</span></span>  
  
|<span data-ttu-id="f64e8-166">機能</span><span class="sxs-lookup"><span data-stu-id="f64e8-166">Feature</span></span>|<span data-ttu-id="f64e8-167">Account</span><span class="sxs-lookup"><span data-stu-id="f64e8-167">Account</span></span>|<span data-ttu-id="f64e8-168">コントローラーで必要な DCOM 権限</span><span class="sxs-lookup"><span data-stu-id="f64e8-168">Required DCOM Permissions on Controller</span></span>|  
|-------------|-------------|---------------------------------------------|  
|<span data-ttu-id="f64e8-169">Distributed Replay 管理ツール</span><span class="sxs-lookup"><span data-stu-id="f64e8-169">Distributed Replay administration tool</span></span>|<span data-ttu-id="f64e8-170">対話ユーザー アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-170">The interactive user account</span></span>|<span data-ttu-id="f64e8-171">ローカル アクセス</span><span class="sxs-lookup"><span data-stu-id="f64e8-171">Local Access</span></span><br /><br /> <span data-ttu-id="f64e8-172">リモート アクセス</span><span class="sxs-lookup"><span data-stu-id="f64e8-172">Remote Access</span></span><br /><br /> <span data-ttu-id="f64e8-173">ローカルからの起動</span><span class="sxs-lookup"><span data-stu-id="f64e8-173">Local Launch</span></span><br /><br /> <span data-ttu-id="f64e8-174">リモートからの起動</span><span class="sxs-lookup"><span data-stu-id="f64e8-174">Remote Launch</span></span><br /><br /> <span data-ttu-id="f64e8-175">ローカルからのアクティブ化</span><span class="sxs-lookup"><span data-stu-id="f64e8-175">Local Activation</span></span><br /><br /> <span data-ttu-id="f64e8-176">リモートからのアクティブ化</span><span class="sxs-lookup"><span data-stu-id="f64e8-176">Remote Activation</span></span>|  
|<span data-ttu-id="f64e8-177">[分散再生クライアント]</span><span class="sxs-lookup"><span data-stu-id="f64e8-177">Distributed Replay client</span></span>|[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="f64e8-178">Distributed Replay Client のサービス アカウント</span><span class="sxs-lookup"><span data-stu-id="f64e8-178">Distributed Replay client service account</span></span>|<span data-ttu-id="f64e8-179">ローカル アクセス</span><span class="sxs-lookup"><span data-stu-id="f64e8-179">Local Access</span></span><br /><br /> <span data-ttu-id="f64e8-180">リモート アクセス</span><span class="sxs-lookup"><span data-stu-id="f64e8-180">Remote Access</span></span><br /><br /> <span data-ttu-id="f64e8-181">ローカルからの起動</span><span class="sxs-lookup"><span data-stu-id="f64e8-181">Local Launch</span></span><br /><br /> <span data-ttu-id="f64e8-182">リモートからの起動</span><span class="sxs-lookup"><span data-stu-id="f64e8-182">Remote Launch</span></span><br /><br /> <span data-ttu-id="f64e8-183">ローカルからのアクティブ化</span><span class="sxs-lookup"><span data-stu-id="f64e8-183">Local Activation</span></span><br /><br /> <span data-ttu-id="f64e8-184">リモートからのアクティブ化</span><span class="sxs-lookup"><span data-stu-id="f64e8-184">Remote Activation</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="f64e8-185">悪意のあるクエリまたはサービス拒否攻撃を防ぐために、クライアント サービス アカウントには信頼できるユーザー アカウントのみを使用してください。</span><span class="sxs-lookup"><span data-stu-id="f64e8-185">To help protect against malicious queries or denial of service attacks, make sure that you only use a trusted user account for the client service account.</span></span> <span data-ttu-id="f64e8-186">このアカウントは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]の対象のインスタンスに対して接続とワークロードの再生を実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-186">This account will be able to connect and replay workloads against the target instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="sql-server-permissions"></a><span data-ttu-id="f64e8-187">SQL Server 権限</span><span class="sxs-lookup"><span data-stu-id="f64e8-187">SQL Server Permissions</span></span>  
 <span data-ttu-id="f64e8-188">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay Client のサービス アカウントは、ワークロードの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]対象インスタンスに接続するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-188">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay client service accounts are used to connect to the workload's target instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="f64e8-189">これらの接続では、Windows 認証モードのみがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-189">Only Windows Authentication mode is supported for these connections.</span></span>  
  
 <span data-ttu-id="f64e8-190">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay Client サービスを一連のコンピューターにインストールした後、それらのサービス アカウントに使用されるセキュリティ プリンシパルに、トレース ワークロードの再生対象である [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス上の sysadmin サーバー ロールを付与する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-190">After you install the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Distributed Replay client service on a set of computers, the security principal used for those service accounts must be granted the sysadmin server role on the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that you intend to replay the trace workload against.</span></span> <span data-ttu-id="f64e8-191">この手順は、Distributed Replay のセットアップで自動的に実行されません。</span><span class="sxs-lookup"><span data-stu-id="f64e8-191">This step is not performed automatically during Distributed Replay Setup.</span></span>  
  
## <a name="data-protection"></a><span data-ttu-id="f64e8-192">データ保護</span><span class="sxs-lookup"><span data-stu-id="f64e8-192">Data Protection</span></span>  
 <span data-ttu-id="f64e8-193">Distributed Replay 環境では、次のユーザー アカウントに、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のターゲット サーバー インスタンス、入力トレース データ、および結果トレース ファイルへのフル アクセスが付与されます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-193">In the Distributed Replay environment, the following user accounts are granted full access to the target server instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], the input trace data and result trace files:</span></span>  
  
-   <span data-ttu-id="f64e8-194">管理ツールの実行に使用される対話ユーザー アカウント。</span><span class="sxs-lookup"><span data-stu-id="f64e8-194">The interactive user account that is used to run the administration tool.</span></span>  
  
-   <span data-ttu-id="f64e8-195">コントローラーのサービス アカウント。</span><span class="sxs-lookup"><span data-stu-id="f64e8-195">The controller service account.</span></span>  
  
-   <span data-ttu-id="f64e8-196">クライアントのサービス アカウント。</span><span class="sxs-lookup"><span data-stu-id="f64e8-196">The client service account.</span></span>  
  
-   <span data-ttu-id="f64e8-197">コントローラー上のローカルの Administrators グループのメンバー。</span><span class="sxs-lookup"><span data-stu-id="f64e8-197">Members of the local Administrators group on the controller.</span></span>  
  
-   <span data-ttu-id="f64e8-198">クライアント上のローカルの Administrators グループのメンバー。</span><span class="sxs-lookup"><span data-stu-id="f64e8-198">Members of the local Administrators group on the clients.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="f64e8-199">これらのアカウントは、Distributed Replay によって使用されるトレース ファイル、中間ファイル、ディスパッチ ファイル、または [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データ ファイルに含まれるすべての個人情報 (PII) または機密情報へのフル アクセス権を保持します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-199">These accounts have full access to any personally identifiable information (PII) or sensitive information that is contained in the trace, intermediate, dispatch, or [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data files that were used by Distributed Replay.</span></span>  
  
 <span data-ttu-id="f64e8-200">次のセキュリティ対策をとることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-200">We recommend that you take the following security precautions:</span></span>  
  
-   <span data-ttu-id="f64e8-201">NTFS ファイル システム (NTFS) を使用する場所に、入力トレース データ、出力トレース結果、およびデータベース ファイルを格納し、適切なアクセス制御リスト (ACL) を適用します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-201">Store the input trace data, output trace results, and database files in a location that uses the NTFS file system (NTFS), and apply the appropriate access control lists (ACLs).</span></span> <span data-ttu-id="f64e8-202">必要に応じて、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] コンピューターに格納されるデータを暗号化します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-202">If it is needed, encrypt the data that is stored on the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] computer.</span></span> <span data-ttu-id="f64e8-203">ACL はトレース ファイルに適用されず、データのマスキングや難読化もないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f64e8-203">Be aware that ACLs are not applied to the trace files and there is no data masking or obfuscation.</span></span> <span data-ttu-id="f64e8-204">これらのファイルは使用後すぐに削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f64e8-204">You should delete these files quickly after use.</span></span>  
  
-   <span data-ttu-id="f64e8-205">Distributed Replay によって生成されたすべての中間ファイルおよびディスパッチ ファイルに、適切な ACL と保有ポリシーを適用します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-205">Apply the appropriate ACLs and retention policy to all intermediate and dispatch files that are generated by Distributed Replay.</span></span>  
  
-   <span data-ttu-id="f64e8-206">Secure Sockets Layer (SSL) を使用して、ネットワーク トランスポートを保護します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-206">Use Secure Sockets Layer (SSL) to help secure the network transport.</span></span>  
  
## <a name="important-removal-steps"></a><span data-ttu-id="f64e8-207">重要な削除手順</span><span class="sxs-lookup"><span data-stu-id="f64e8-207">Important Removal Steps</span></span>  
 <span data-ttu-id="f64e8-208">Distributed Replay はテスト環境のみで使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f64e8-208">We recommend that you only use Distributed Replay in a test environment.</span></span> <span data-ttu-id="f64e8-209">テストが完了したら、それらのコンピューターを別のタスク用に準備する前に、次の作業を必ず行います。</span><span class="sxs-lookup"><span data-stu-id="f64e8-209">After you have completed testing, and before you provision those computers for a different task, make sure that you do the following:</span></span>  
  
-   <span data-ttu-id="f64e8-210">Distributed Replay 機能をアンインストールし、関連する構成ファイルをコントローラーおよびすべてのクライアントから削除します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-210">Uninstall the Distributed Replay features and remove the related configuration files from the controller and all clients.</span></span>  
  
-   <span data-ttu-id="f64e8-211">テストに使用したトレース ファイル、中間ファイル、ディスパッチ ファイル、および [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベース ファイルをすべて削除します。</span><span class="sxs-lookup"><span data-stu-id="f64e8-211">Delete any trace, intermediate, dispatch, and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database files that were used for testing.</span></span> <span data-ttu-id="f64e8-212">中間ファイルとディスパッチ ファイルは、コントローラーとクライアントの作業ディレクトリにそれぞれ格納されます。</span><span class="sxs-lookup"><span data-stu-id="f64e8-212">The intermediate and dispatch files are stored in the working directory on the controller and client, respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f64e8-213">参照</span><span class="sxs-lookup"><span data-stu-id="f64e8-213">See Also</span></span>  
 <span data-ttu-id="f64e8-214">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span><span class="sxs-lookup"><span data-stu-id="f64e8-214">[SQL Server Distributed Replay](sql-server-distributed-replay.md) </span></span>  
 [<span data-ttu-id="f64e8-215">分散再生のインストール</span><span class="sxs-lookup"><span data-stu-id="f64e8-215">Install Distributed Replay</span></span>](install-distributed-replay-overview.md)  
  
  
