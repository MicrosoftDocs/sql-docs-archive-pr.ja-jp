---
title: SQL Server 分散再生 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: tools-other
ms.topic: conceptual
helpviewer_keywords:
- Distributed Replay
- SQL Server Distributed Replay
ms.assetid: 58ef7016-b105-42c2-90a0-364f411849a4
author: stevestein
ms.author: sstein
ms.openlocfilehash: b832cb8a8d8a38815b13b82a7af8eefc2fb81427
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87711369"
---
# <a name="sql-server-distributed-replay"></a><span data-ttu-id="67e46-102">SQL Server Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="67e46-102">SQL Server Distributed Replay</span></span>
  <span data-ttu-id="67e46-103">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分散再生機能を使用すると、将来の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のアップグレードによる影響を評価できます。</span><span class="sxs-lookup"><span data-stu-id="67e46-103">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature helps you assess the impact of future [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] upgrades.</span></span> <span data-ttu-id="67e46-104">また、ハードウェアとオペレーティング システムのアップグレード、および [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のチューニングの影響を評価する場合にも使用できます。</span><span class="sxs-lookup"><span data-stu-id="67e46-104">You can also use it to help assess the impact of hardware and operating system upgrades, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] tuning.</span></span>

## <a name="benefits-of-distributed-replay"></a><span data-ttu-id="67e46-105">Distributed Replay の利点</span><span class="sxs-lookup"><span data-stu-id="67e46-105">Benefits of Distributed Replay</span></span>
 <span data-ttu-id="67e46-106">[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]と同様に、Distributed Replay を使用して、アップグレードされたテスト環境に対してキャプチャしたトレースを再生できます。</span><span class="sxs-lookup"><span data-stu-id="67e46-106">Similar to [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], you can use Distributed Replay to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="67e46-107">[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]と異なるのは、Distributed Replay は 1 台のコンピューターからのワークロードの再生に限定されないことです。</span><span class="sxs-lookup"><span data-stu-id="67e46-107">Unlike [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)], Distributed Replay is not limited to replaying the workload from a single computer.</span></span>

 <span data-ttu-id="67e46-108">Distributed Replay では、[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] よりもスケーラブルなソリューションが提供されます。</span><span class="sxs-lookup"><span data-stu-id="67e46-108">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="67e46-109">Distributed Replay を使用すると、複数のコンピューターからのワークロードを再生し、ミッションクリティカルなワークロードをより正確にシミュレートできます。</span><span class="sxs-lookup"><span data-stu-id="67e46-109">With Distributed Replay, you can replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="67e46-110">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分散再生機能では、複数のコンピューターを使用してトレース データを再生し、ミッション クリティカルなワークロードをシミュレートできます。</span><span class="sxs-lookup"><span data-stu-id="67e46-110">The [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay feature can use multiple computers to replay trace data and simulate a mission-critical workload.</span></span> <span data-ttu-id="67e46-111">Distributed Replay は、アプリケーション互換性テスト、パフォーマンス テスト、またはキャパシティ プランニングに使用できます。</span><span class="sxs-lookup"><span data-stu-id="67e46-111">Use Distributed Replay for application compatibility testing, performance testing, or capacity planning.</span></span>

## <a name="when-to-use-distributed-replay"></a><span data-ttu-id="67e46-112">Distributed Replay を使用する状況</span><span class="sxs-lookup"><span data-stu-id="67e46-112">When to Use Distributed Replay</span></span>
 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] <span data-ttu-id="67e46-113">と Distributed Replay は、提供する機能が一部重複しています。</span><span class="sxs-lookup"><span data-stu-id="67e46-113">and Distributed Replay provide some overlap in functionality.</span></span>

 <span data-ttu-id="67e46-114">[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] を使用して、アップグレードされたテスト環境に対してキャプチャしたトレースを再生できます。</span><span class="sxs-lookup"><span data-stu-id="67e46-114">You may use [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] to replay a captured trace against an upgraded test environment.</span></span> <span data-ttu-id="67e46-115">また、再生結果を分析して、潜在的な機能とパフォーマンスの非互換性を調べることができます。</span><span class="sxs-lookup"><span data-stu-id="67e46-115">You can also analyze the replay results to look for potential functional and performance incompatibilities.</span></span> <span data-ttu-id="67e46-116">ただし、 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] で再生できるのは、1 台のコンピューターからのワークロードのみです。</span><span class="sxs-lookup"><span data-stu-id="67e46-116">However, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can only replay a workload from a single computer.</span></span> <span data-ttu-id="67e46-117">アクティブなコンカレント接続が多数あるか、またはスループットが高い集中型の OLTP アプリケーションを再生すると、 [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] ではリソースのボトルネックが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="67e46-117">When replaying an intensive OLTP application that has many active concurrent connections or high throughput, [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] can become a resource bottleneck.</span></span>

 <span data-ttu-id="67e46-118">Distributed Replay では、[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)] よりもスケーラブルなソリューションが提供されます。</span><span class="sxs-lookup"><span data-stu-id="67e46-118">Distributed Replay offers a more scalable solution than [!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)].</span></span> <span data-ttu-id="67e46-119">Distributed Replay を使用すると、複数のコンピューターからのワークロードを再生し、ミッションクリティカルなワークロードをより正確にシミュレートできます。</span><span class="sxs-lookup"><span data-stu-id="67e46-119">Use Distributed Replay to replay a workload from multiple computers and better simulate a mission-critical workload.</span></span>

 <span data-ttu-id="67e46-120">次の表では、各ツールを使用する状況について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-120">The following table describes when to use each tool.</span></span>

|<span data-ttu-id="67e46-121">ツール</span><span class="sxs-lookup"><span data-stu-id="67e46-121">Tool</span></span>|<span data-ttu-id="67e46-122">使用する状況</span><span class="sxs-lookup"><span data-stu-id="67e46-122">Use When...</span></span>|
|----------|---------------|
|[!INCLUDE[ssSqlProfiler](../../../includes/sssqlprofiler-md.md)]|<span data-ttu-id="67e46-123">1 台のコンピューター上で、従来の再生のメカニズムを使用する場合。</span><span class="sxs-lookup"><span data-stu-id="67e46-123">You want to use the conventional replay mechanism on a single computer.</span></span> <span data-ttu-id="67e46-124">特に、 **[ステップ]** 、 **[カーソルまで実行]** 、 **[ブレークポイントの設定/解除]** など、1 行ずつのデバッグ機能が必要な場合。</span><span class="sxs-lookup"><span data-stu-id="67e46-124">In particular, you need line-by-line debugging capabilities, such as the **Step**, **Run to Cursor**, and **Toggle Breakpoint** commands.</span></span><br /><br /> <span data-ttu-id="67e46-125">[!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] トレースを再生する場合。</span><span class="sxs-lookup"><span data-stu-id="67e46-125">You want to replay an [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] trace.</span></span>|
|<span data-ttu-id="67e46-126">Distributed Replay</span><span class="sxs-lookup"><span data-stu-id="67e46-126">Distributed Replay</span></span>|<span data-ttu-id="67e46-127">アプリケーションの互換性を評価する場合。</span><span class="sxs-lookup"><span data-stu-id="67e46-127">You want to evaluate application compatibility.</span></span> <span data-ttu-id="67e46-128">たとえば、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] とオペレーティング システムのアップグレード シナリオ、ハードウェアのアップグレード、インデックス チューニングをテストする場合などがあります。</span><span class="sxs-lookup"><span data-stu-id="67e46-128">For example, you want to test [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and operating system upgrade scenarios, hardware upgrades, or index tuning.</span></span><br /><br /> <span data-ttu-id="67e46-129">キャプチャしたトレースのコンカレンシーが非常に高いため、1 つの再生クライアントで十分にシミュレートできない場合。</span><span class="sxs-lookup"><span data-stu-id="67e46-129">The concurrency in the captured trace is so high that a single replay client cannot sufficiently simulate it.</span></span>|

## <a name="distributed-replay-concepts"></a><span data-ttu-id="67e46-130">Distributed Replay の概念</span><span class="sxs-lookup"><span data-stu-id="67e46-130">Distributed Replay Concepts</span></span>
 <span data-ttu-id="67e46-131">Distributed Replay 環境は次のコンポーネントで構成されます。</span><span class="sxs-lookup"><span data-stu-id="67e46-131">The following components make up the Distributed Replay environment:</span></span>

-   <span data-ttu-id="67e46-132">**分散再生管理ツール**: `DReplay.exe` 分散再生コントローラーとの通信に使用されるコンソールアプリケーション。</span><span class="sxs-lookup"><span data-stu-id="67e46-132">**Distributed Replay administration tool**: A console application, `DReplay.exe`, used to communicate with the distributed replay controller.</span></span> <span data-ttu-id="67e46-133">Distributed Replay を制御するには管理ツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="67e46-133">Use the administration tool to control the distributed replay.</span></span>

-   <span data-ttu-id="67e46-134">**分散再生コントローラー**: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分散再生コントローラーという名前の Windows サービスを実行するコンピューター。</span><span class="sxs-lookup"><span data-stu-id="67e46-134">**Distributed Replay controller**: A computer running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay controller.</span></span> <span data-ttu-id="67e46-135">分散再生コントローラーは、分散再生クライアントのアクションを統制します。</span><span class="sxs-lookup"><span data-stu-id="67e46-135">The Distributed Replay controller orchestrates the actions of the distributed replay clients.</span></span> <span data-ttu-id="67e46-136">各分散再生環境には、コントローラーのインスタンスを 1 つだけ置くことができます。</span><span class="sxs-lookup"><span data-stu-id="67e46-136">There can only be one controller instance in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="67e46-137">**分散再生クライアント**: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 分散再生クライアントという名前の Windows サービスを実行する 1 つまたは複数の (物理または仮想) コンピューター。</span><span class="sxs-lookup"><span data-stu-id="67e46-137">**Distributed Replay clients**: One or more computers (physical or virtual) running the Windows service named [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay client.</span></span> <span data-ttu-id="67e46-138">分散再生クライアントは連携して、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]のインスタンスに対するワークロードをシミュレートします。</span><span class="sxs-lookup"><span data-stu-id="67e46-138">The Distributed Replay clients work together to simulate workloads against an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="67e46-139">各分散再生環境には、1 つまたは複数のクライアントを置くことができます。</span><span class="sxs-lookup"><span data-stu-id="67e46-139">There can be one or more clients in each Distributed Replay environment.</span></span>

-   <span data-ttu-id="67e46-140">**対象サーバー**:トレース データを再生する際に分散再生クライアントが使用できる [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンス。</span><span class="sxs-lookup"><span data-stu-id="67e46-140">**Target server**: An instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that the Distributed Replay clients can use to replay trace data.</span></span> <span data-ttu-id="67e46-141">ターゲット サーバーはテスト環境に配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="67e46-141">We recommend that the target server be located in a test environment.</span></span>

 <span data-ttu-id="67e46-142">Distributed Replay の管理ツール、コントローラー、およびクライアントは、異なるコンピューターにインストールすることも、同じコンピューターにインストールすることもできます。</span><span class="sxs-lookup"><span data-stu-id="67e46-142">The Distributed Replay administration tool, controller, and client can be installed on different computers or the same computer.</span></span> <span data-ttu-id="67e46-143">同じコンピューターで実行できる Distributed Replay Controller サービスまたは Distributed Replay Client サービスのインスタンスは 1 つだけです。</span><span class="sxs-lookup"><span data-stu-id="67e46-143">There can be only one instance of the Distributed Replay controller or client service that is running on the same computer.</span></span>

 <span data-ttu-id="67e46-144">次の図は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay の物理アーキテクチャを示したものです。</span><span class="sxs-lookup"><span data-stu-id="67e46-144">The following figure shows the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Distributed Replay physical architecture:</span></span>

 <span data-ttu-id="67e46-145">![分散再生アーキテクチャ](../../database-engine/media/distributedreplayarch.gif "分散再生アーキテクチャ")</span><span class="sxs-lookup"><span data-stu-id="67e46-145">![Distributed Replay Architecture](../../database-engine/media/distributedreplayarch.gif "Distributed Replay Architecture")</span></span>

## <a name="distributed-replay-tasks"></a><span data-ttu-id="67e46-146">Distributed Replay のタスク</span><span class="sxs-lookup"><span data-stu-id="67e46-146">Distributed Replay Tasks</span></span>

|<span data-ttu-id="67e46-147">タスクの説明</span><span class="sxs-lookup"><span data-stu-id="67e46-147">Task Description</span></span>|<span data-ttu-id="67e46-148">トピック</span><span class="sxs-lookup"><span data-stu-id="67e46-148">Topic</span></span>|
|----------------------|-----------|
|<span data-ttu-id="67e46-149">Distributed Replay を構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-149">Describes how to configure Distributed Replay.</span></span>|[<span data-ttu-id="67e46-150">分散再生の構成</span><span class="sxs-lookup"><span data-stu-id="67e46-150">Configure Distributed Replay</span></span>](configure-distributed-replay.md)|
|<span data-ttu-id="67e46-151">入力トレース データを準備する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-151">Describes how to prepare the input trace data.</span></span>|[<span data-ttu-id="67e46-152">入力トレース データの準備</span><span class="sxs-lookup"><span data-stu-id="67e46-152">Prepare the Input Trace Data</span></span>](prepare-the-input-trace-data.md)|
|<span data-ttu-id="67e46-153">トレース データを再生する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-153">Describes how to replay trace data.</span></span>|[<span data-ttu-id="67e46-154">トレース データの再生</span><span class="sxs-lookup"><span data-stu-id="67e46-154">Replay Trace Data</span></span>](replay-trace-data.md)|
|<span data-ttu-id="67e46-155">Distributed Replay トレース データの結果を確認する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-155">Describes how to review the Distributed Replay trace data results.</span></span>|[<span data-ttu-id="67e46-156">再生結果の確認</span><span class="sxs-lookup"><span data-stu-id="67e46-156">Review the Replay Results</span></span>](review-the-replay-results.md)|
|<span data-ttu-id="67e46-157">管理ツールを使用して、コントローラー上の操作を開始、監視、取り消す方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="67e46-157">Describes how to use the administration tool to initiate, monitor, and cancel operations on the controller.</span></span>|[<span data-ttu-id="67e46-158">管理ツール コマンド ライン オプション &#40;Distributed Replay Utility&#41;</span><span class="sxs-lookup"><span data-stu-id="67e46-158">Administration Tool Command-line Options &#40;Distributed Replay Utility&#41;</span></span>](administration-tool-command-line-options-distributed-replay-utility.md)|

## <a name="see-also"></a><span data-ttu-id="67e46-159">参照</span><span class="sxs-lookup"><span data-stu-id="67e46-159">See Also</span></span>
 <span data-ttu-id="67e46-160">[SQL Server 分散再生を使用して](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2)[分散再生フォーラムを SQL Server](https://social.technet.microsoft.com/Forums/sl/sqldru/)して、分散再生[を使用して SQL Server をロードテストし、をロードテストします。第1部](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span><span class="sxs-lookup"><span data-stu-id="67e46-160">[SQL Server Distributed Replay Forum](https://social.technet.microsoft.com/Forums/sl/sqldru/) [Using Distributed Replay to Load Test Your SQL Server - Part 2](https://docs.microsoft.com/archive/blogs/msdn/mspfe/using-distributed-replay-to-load-test-your-sql-serverpart-2) [Using Distributed Replay to Load Test Your SQL Server - Part 1](https://docs.microsoft.com/archive/blogs/batuhanyildiz/using-distributed-replay-to-load-test-your-sql-serverpart-1)</span></span>


