---
title: タイムシリーズモデルの要件について (中級者向けデータマイニングチュートリアル) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 1ce2b3e3-108a-4f7e-985f-a20b816d0da7
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: cf92effaabb38a93a294bdf194025a524ad601f3
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87631385"
---
# <a name="understanding-the-requirements-for-a-time-series-model-intermediate-data-mining-tutorial"></a><span data-ttu-id="4463d-102">時系列モデルの要件について (中級者向けデータ マイニング チュートリアル)</span><span class="sxs-lookup"><span data-stu-id="4463d-102">Understanding the Requirements for a Time Series Model (Intermediate Data Mining Tutorial)</span></span>
  <span data-ttu-id="4463d-103">予測モデルで使用するデータを準備する際に、時系列内のステップの識別に使用できる列がデータに含まれていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4463d-103">When you are preparing data for use in a forecasting model, you must ensure that your data contains a column that can be used to identify the steps in the time series.</span></span> <span data-ttu-id="4463d-104">その列が `Key Time` 列として指定されて</span><span class="sxs-lookup"><span data-stu-id="4463d-104">That column will be designated as the `Key Time` column.</span></span> <span data-ttu-id="4463d-105">キーになるため、この列には一意の数値が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="4463d-105">Because it is a key, the column must contain unique numeric values.</span></span>  
  
 <span data-ttu-id="4463d-106">`Key Time` 列の右の単位の選択は、分析を行う上で重要な要素になります。</span><span class="sxs-lookup"><span data-stu-id="4463d-106">Choosing the right unit for the `Key Time` column is an important part of analysis.</span></span> <span data-ttu-id="4463d-107">たとえば、売上データを 1 分ごとに更新するとします。</span><span class="sxs-lookup"><span data-stu-id="4463d-107">For example, suppose your sales data is refreshed on a minute by minute basis.</span></span> <span data-ttu-id="4463d-108">このとき、必ずしも時系列の単位として分を使用する必要はなく、売上データを日、週、または月ごとにロール アップする方が重要です。</span><span class="sxs-lookup"><span data-stu-id="4463d-108">You would not necessarily use minutes as the unit for the time series; you might find it more meaningful to roll up sales data by the day, week, or even month.</span></span> <span data-ttu-id="4463d-109">どの時間単位を使用すればよいかわからない場合は、各集計のための新しいデータ ソース ビューを作成し、関連モデルを構築することで、集計の各レベルで異なる傾向があるかどうかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="4463d-109">If you are unsure which unit of time to use, you can create a new data source view for each aggregation, and build related models, to see if different trends emerge at each level of aggregation.</span></span>  
  
 <span data-ttu-id="4463d-110">このチュートリアルでは、売上データについてはトランザクション売上データベースで毎日収集しますが、データ マイニングのデータについては、事前にビューを使用して月単位で集計します。</span><span class="sxs-lookup"><span data-stu-id="4463d-110">For this tutorial, sales data is collected on a daily basis in the transactional sales database, but for data mining, the data has been pre-aggregated by the month, using a view.</span></span>  
  
 <span data-ttu-id="4463d-111">分析を行うときは、データのギャップをできるだけ少なくすることも重要です。</span><span class="sxs-lookup"><span data-stu-id="4463d-111">Additionally, it is desirable for analysis that the data have as few gaps as possible.</span></span> <span data-ttu-id="4463d-112">複数の系列のデータを分析する場合は、すべての系列の開始日と終了日をできるだけ同じにするようにしてください。</span><span class="sxs-lookup"><span data-stu-id="4463d-112">If you plan to analyze multiple series of data, all series should preferably start and end on the same date.</span></span> <span data-ttu-id="4463d-113">データにギャップがある場合でも、系列の開始時点と終了時点以外のものであれば、MISSING_VALUE_SUBSTITUTION パラメーターを使用して系列を埋めることができます。</span><span class="sxs-lookup"><span data-stu-id="4463d-113">If the data has gaps, but the gaps are not at the beginning or end of a series, you can use the MISSING_VALUE_SUBSTITUTION parameter to fill in the series.</span></span> <span data-ttu-id="4463d-114">また、[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] には、不足データを平均や定数などの値で置き換えるためのオプションもいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="4463d-114">[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] also provides several options for replacing missing data with values, such as using means or constants.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="4463d-115">以前のバージョンのデータ ソース ビュー デザイナーに付属していたピボットグラフおよびピボットテーブルのツールは廃止されました。</span><span class="sxs-lookup"><span data-stu-id="4463d-115">The PivotChart and PivotTable tools that were included in earlier versions of the data source view designer are no longer provided.</span></span> <span data-ttu-id="4463d-116">時系列データのギャップを事前に特定するときは、[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] に付属の Data Profiler などのツールを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4463d-116">We recommend that you identify gaps in time series data beforehand, by using tools such as the Data Profiler included in [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)].</span></span>  
  
### <a name="to-identify-the-time-key-for-the-forecasting-model"></a><span data-ttu-id="4463d-117">予測モデルの時間キーを特定するには</span><span class="sxs-lookup"><span data-stu-id="4463d-117">To identify the time key for the forecasting model</span></span>  
  
1.  <span data-ttu-id="4463d-118">[ **Salesbyregion. dsv [Design]**] ペインで、vTimeSeries テーブルを右クリックし、[データの**探索**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-118">In the pane, **SalesByRegion.dsv [Design]**, right-click the table vTimeSeries, and then select **Explore Data**.</span></span>  
  
     <span data-ttu-id="4463d-119">新しいタブが開き、" **VTimeSeries テーブルの探索**" というタイトルが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4463d-119">A new tab opens, titled **Explore vTimeSeries Table**.</span></span>  
  
2.  <span data-ttu-id="4463d-120">[**テーブル**] タブで、timeindex 列および Reporting Date 列に使用されているデータを確認します。</span><span class="sxs-lookup"><span data-stu-id="4463d-120">On the **Table** tab, review the data that is used in the TimeIndex and Reporting Date columns.</span></span>  
  
     <span data-ttu-id="4463d-121">どちらの列も一意の値を持つシーケンスであり、時系列キーとして使用できますが、列によってデータ型が異なります。</span><span class="sxs-lookup"><span data-stu-id="4463d-121">Both are sequences with unique values and can both be used as the time series key; however, the data types of the columns are different.</span></span> <span data-ttu-id="4463d-122">Microsoft Time Series アルゴリズムでは、`datetime` データ型は必要なく、値が一意であり、順序付けられていることのみが必要とされます。</span><span class="sxs-lookup"><span data-stu-id="4463d-122">The Microsoft Time Series algorithm does not require a `datetime` data type, only that the values be distinct and ordered.</span></span> <span data-ttu-id="4463d-123">したがって、どちらの列も予測モデルの時間キーとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="4463d-123">Therefore, either column can be used as the time key for the forecasting model.</span></span>  
  
3.  <span data-ttu-id="4463d-124">データソースビューデザイン画面で、[レポートの日付] 列を選択し、[**プロパティ**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-124">In the data source view design surface, select the column, Reporting Date and select **Properties**.</span></span> <span data-ttu-id="4463d-125">次に、TimeIndex 列をクリックし、[**プロパティ**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-125">Next, click the column TimeIndex and select **Properties**.</span></span>  
  
     <span data-ttu-id="4463d-126">フィールド TimeIndex のデータ型は system.string であるのに対し、フィールドのレポート日付のデータ型は system.string です。</span><span class="sxs-lookup"><span data-stu-id="4463d-126">The field TimeIndex has the data type System.Int32, whereas the field Reporting Date has the data type System.DateTime.</span></span> <span data-ttu-id="4463d-127">多くのデータ ウェアハウスでは、インデックス作成のパフォーマンスを高めるために、日付/時刻の値が整数に変換され、その整数列がキーとして使用されます。</span><span class="sxs-lookup"><span data-stu-id="4463d-127">Many data warehouses convert date/time values to integers and use the integer column as the key, to improve indexing performance.</span></span> <span data-ttu-id="4463d-128">ただし、この列を使用した場合、Microsoft Time Series アルゴリズムでは、201014、201014 などの将来の値を使用して予測が行われます。</span><span class="sxs-lookup"><span data-stu-id="4463d-128">However, if you use this column, the Microsoft Time Series algorithm will make predictions using future values such as 201014, 201014, and so forth.</span></span> <span data-ttu-id="4463d-129">カレンダーの日付を使用して売上データの予測を表す必要があるので、レポートの日付列を一意の系列 id として使用します。</span><span class="sxs-lookup"><span data-stu-id="4463d-129">Because you want to represent your sales data forecast by using calendar dates, you will use the Reporting Date column as the unique series identifier.</span></span>  
  
### <a name="to-set-the-key-in-the-data-source-view"></a><span data-ttu-id="4463d-130">データ ソース ビューのキーを設定するには</span><span class="sxs-lookup"><span data-stu-id="4463d-130">To set the key in the data source view</span></span>  
  
1.  <span data-ttu-id="4463d-131">[ **Salesbyregion. dsv**] ペインで、vTimeSeries テーブルを選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-131">In the pane **SalesByRegion.dsv**, select the vTimeSeries table.</span></span>  
  
2.  <span data-ttu-id="4463d-132">[Reporting Date] 列を右クリックし、[**論理主キーの設定**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-132">Right-click the column, Reporting Date, and select **Set Logical Primary Key**.</span></span>  
  
## <a name="handling-missing-data-optional"></a><span data-ttu-id="4463d-133">不足データの処理 (オプション)</span><span class="sxs-lookup"><span data-stu-id="4463d-133">Handling Missing Data (Optional)</span></span>  
 <span data-ttu-id="4463d-134">系列に不足データがあると、モデルを処理しようとする際にエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4463d-134">If any series has missing data, you might get an error when you try to process the model.</span></span> <span data-ttu-id="4463d-135">不足データには、複数の方法で対処することができます。</span><span class="sxs-lookup"><span data-stu-id="4463d-135">You have several ways to work around missing data:</span></span>  
  
-   <span data-ttu-id="4463d-136">Analysis Services で、平均を計算するか、前の値を使用して、不足した値を埋めることができます。</span><span class="sxs-lookup"><span data-stu-id="4463d-136">You can have Analysis Services fill in missing values, either by calculating a mean, or by using a previous value.</span></span> <span data-ttu-id="4463d-137">この操作を行うには、マイニング モデルに MISSING_VALUE_SUBSTITUTION パラメーターを設定します。</span><span class="sxs-lookup"><span data-stu-id="4463d-137">You do this by setting the MISSING_VALUE_SUBSTITUTION parameter on the mining model.</span></span> <span data-ttu-id="4463d-138">このパラメーターの詳細については、「 [Microsoft タイムシリーズアルゴリズムテクニカルリファレンス](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4463d-138">For more information about this parameter, see [Microsoft Time Series Algorithm Technical Reference](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md).</span></span> <span data-ttu-id="4463d-139">既存のマイニングモデルのパラメーターを変更する方法の詳細については、「[アルゴリズムパラメーターの表示または変更](../../2014/analysis-services/data-mining/view-or-change-algorithm-parameters.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4463d-139">For information about how to change parameters on an existing mining model, see [View or Change Algorithm Parameters](../../2014/analysis-services/data-mining/view-or-change-algorithm-parameters.md).</span></span>  
  
-   <span data-ttu-id="4463d-140">データ ソースを変更するか、基になるビューをフィルター処理することで、不規則な系列を除外するか、値を置き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="4463d-140">You can alter the data source or filter the underlying view to eliminate ragged series or to replace values.</span></span> <span data-ttu-id="4463d-141">この操作はリレーショナル データ ソースで行うことができます。または、カスタムの名前付きクエリまたは名前付き計算を作成することでデータ ソース ビューを変更できます。</span><span class="sxs-lookup"><span data-stu-id="4463d-141">You can do this in the relational data source, or you can modify the data source view by creating custom named queries or named calculations.</span></span> <span data-ttu-id="4463d-142">詳細については、 [「多次元モデルのデータ ソース ビュー」](https://docs.microsoft.com/analysis-services/multidimensional-models/data-source-views-in-multidimensional-models)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4463d-142">For more information, see [Data Source Views in Multidimensional Models](https://docs.microsoft.com/analysis-services/multidimensional-models/data-source-views-in-multidimensional-models).</span></span> <span data-ttu-id="4463d-143">このレッスンの後半の作業で、名前付きクエリとカスタム計算の両方を作成する例を示します。</span><span class="sxs-lookup"><span data-stu-id="4463d-143">A later task in this lesson provides an example of how to build both a named query and a custom calculation.</span></span>  
  
 <span data-ttu-id="4463d-144">このシナリオでは、ある系列の開始時点でデータの一部が不足しています。具体的には、T1000 製品ラインの 2007 年 7 月までのデータがありません。</span><span class="sxs-lookup"><span data-stu-id="4463d-144">For this scenario, some data is missing at the beginning of one series: that is, there is no data for the T1000 product line until July 2007.</span></span> <span data-ttu-id="4463d-145">その点を除けば、すべての系列は同じ日に終了し、不足値はありません。</span><span class="sxs-lookup"><span data-stu-id="4463d-145">Otherwise, all series end on the same date, and there are no missing values.</span></span>  
  
 <span data-ttu-id="4463d-146">Microsoft タイムシリーズアルゴリズムの要件は、1つのモデルに含まれるすべての系列が同じ**終了**点を持つ必要があることです。</span><span class="sxs-lookup"><span data-stu-id="4463d-146">The requirement of the Microsoft Time Series algorithm is that any series that you include in a single model should have the same **ending** point.</span></span> <span data-ttu-id="4463d-147">T1000 モデルの自転車は 2007 年に売り出されたため、この系列のデータは他のモデルの自転車よりも開始時点が後になりますが、系列の終了日が同じことにより、データは使用できます。</span><span class="sxs-lookup"><span data-stu-id="4463d-147">Because the T1000 bicycle model was introduced in 2007, the data for this series starts later than for other bicycle models, but the series ends on the same date; therefore the data is usable.</span></span>  
  
#### <a name="to-close-the-data-source-view-designer"></a><span data-ttu-id="4463d-148">データ ソース ビュー デザイナーを閉じるには</span><span class="sxs-lookup"><span data-stu-id="4463d-148">To close the data source view designer</span></span>  
  
-   <span data-ttu-id="4463d-149">タブを右クリックし、 **VTimeSeries テーブルを探索**して、[**閉じる**] を選択します。</span><span class="sxs-lookup"><span data-stu-id="4463d-149">Right-click the tab, **Explore vTimeSeries Table**, and select **Close**.</span></span>  
  
## <a name="next-task-in-lesson"></a><span data-ttu-id="4463d-150">このレッスンの次の作業</span><span class="sxs-lookup"><span data-stu-id="4463d-150">Next Task in Lesson</span></span>  
 [<span data-ttu-id="4463d-151">中間データマイニングチュートリアル &#40;予測構造とモデルの作成&#41;</span><span class="sxs-lookup"><span data-stu-id="4463d-151">Creating a Forecasting Structure and Model &#40;Intermediate Data Mining Tutorial&#41;</span></span>](../../2014/tutorials/creating-a-forecasting-structure-and-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a><span data-ttu-id="4463d-152">参照</span><span class="sxs-lookup"><span data-stu-id="4463d-152">See Also</span></span>  
 [<span data-ttu-id="4463d-153">Microsoft Time Series アルゴリズム</span><span class="sxs-lookup"><span data-stu-id="4463d-153">Microsoft Time Series Algorithm</span></span>](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm.md)  
  
  
