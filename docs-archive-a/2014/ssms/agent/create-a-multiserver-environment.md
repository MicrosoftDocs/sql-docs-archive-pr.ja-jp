---
title: マルチサーバー環境の作成 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: ssms
ms.topic: conceptual
helpviewer_keywords:
- SQL Server Agent, multiserver environments
- master servers [SQL Server], about master servers
- target servers [SQL Server], about target servers
- multiserver environments [SQL Server]
ms.assetid: edc2b60d-15da-40a1-8ba3-f1d473366ee6
author: stevestein
ms.author: sstein
ms.openlocfilehash: a6920920aa603c615cdc5f84a34a93204842052d
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87737483"
---
# <a name="create-a-multiserver-environment"></a><span data-ttu-id="e0f97-102">マルチサーバー環境の作成</span><span class="sxs-lookup"><span data-stu-id="e0f97-102">Create a Multiserver Environment</span></span>
  <span data-ttu-id="e0f97-103">マルチサーバー管理では、マスター サーバー (MSX) 1 台と、ターゲット サーバー (TSX) 1 台以上を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-103">Multiserver administration requires that you set up a master server (MSX) and one or more target servers (TSX).</span></span> <span data-ttu-id="e0f97-104">すべてのターゲット サーバーで処理されるジョブは、まずマスター サーバーで定義されてからターゲット サーバーにダウンロードされます。</span><span class="sxs-lookup"><span data-stu-id="e0f97-104">Jobs that will be processed on all the target servers are first defined on the master server and then downloaded to the target servers.</span></span>  
  
 <span data-ttu-id="e0f97-105">既定では、マスター サーバーとターゲット サーバーの間の接続では、完全な SSL (Secure Sockets Layer) 暗号化と証明書の検証が有効になります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-105">By default, full Secure Sockets Layer (SSL) encryption and certificate validation are enabled for connections between master servers and target servers.</span></span> <span data-ttu-id="e0f97-106">詳しくは、「[ターゲット サーバーでの暗号化オプションの設定](set-encryption-options-on-target-servers.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e0f97-106">For more information, see [Set Encryption Options on Target Servers](set-encryption-options-on-target-servers.md).</span></span>  
  
 <span data-ttu-id="e0f97-107">ターゲット サーバーが多数ある場合、他の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 機能から多くのパフォーマンス要求を受け取る実稼働サーバー上には、マスター サーバーを定義しないでください。ターゲット サーバーのトラフィックによって実稼働サーバーのパフォーマンスが低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-107">If you have a large number of target servers, avoid defining your master server on a production server that has significant performance requirements from other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] functionality, because target server traffic can slow performance on your production server.</span></span> <span data-ttu-id="e0f97-108">また、専用のマスター サーバーにイベントを転送すると、1 つのサーバーに管理を集中することができます。</span><span class="sxs-lookup"><span data-stu-id="e0f97-108">If you also forward events to a dedicated master server, you can centralize administration on one server.</span></span> <span data-ttu-id="e0f97-109">詳しくは、「 [イベントの管理](manage-events.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e0f97-109">For more information, see [Manage Events](manage-events.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e0f97-110">マルチサーバー ジョブの処理を使用するには、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスのアカウントがマスター サーバーの **msdb** データベースの **TargetServersRole** ロールのメンバーでなければなりません。</span><span class="sxs-lookup"><span data-stu-id="e0f97-110">To use multiserver job processing, the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account must be a member of the **msdb** database role **TargetServersRole** on the master server.</span></span> <span data-ttu-id="e0f97-111">マスター サーバー ウィザードを使用すると、登録処理の一環としてこのロールがサービス アカウントに自動的に追加されます。</span><span class="sxs-lookup"><span data-stu-id="e0f97-111">The Master Server Wizard automatically adds the service account to this role as part of the enlistment process</span></span>  
  
## <a name="considerations-for-multiserver-environments"></a><span data-ttu-id="e0f97-112">マルチサーバー環境に関する注意点</span><span class="sxs-lookup"><span data-stu-id="e0f97-112">Considerations for Multiserver Environments</span></span>  
 <span data-ttu-id="e0f97-113">サポートされている MSX/TSX 構成については、以下の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e0f97-113">See the table below for supported MSX/TSX configurations.</span></span>  
  
||<span data-ttu-id="e0f97-114">**TSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-114">**TSX = 7.0**</span></span>|<span data-ttu-id="e0f97-115">**TSX = 8.0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="e0f97-115">**TSX = 8.0 < SP3**</span></span>|<span data-ttu-id="e0f97-116">**TSX = 8.0 SP3 以降**</span><span class="sxs-lookup"><span data-stu-id="e0f97-116">**TSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="e0f97-117">**TSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-117">**TSX = 9.0**</span></span>|<span data-ttu-id="e0f97-118">**TSX = 10.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-118">**TSX= 10.0**</span></span>|<span data-ttu-id="e0f97-119">**TSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="e0f97-119">**TSX = 10.5**</span></span>|<span data-ttu-id="e0f97-120">**TSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-120">**TSX = 11.0**</span></span>|  
|-|--------------------|---------------------------|----------------------------------|--------------------|--------------------|---------------------|---------------------|  
|<span data-ttu-id="e0f97-121">**MSX = 7.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-121">**MSX = 7.0**</span></span>|<span data-ttu-id="e0f97-122">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-122">Yes</span></span>|<span data-ttu-id="e0f97-123">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-123">Yes</span></span>|<span data-ttu-id="e0f97-124">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-124">No</span></span>|<span data-ttu-id="e0f97-125">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-125">No</span></span>|<span data-ttu-id="e0f97-126">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-126">No</span></span>|<span data-ttu-id="e0f97-127">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-127">No</span></span>|<span data-ttu-id="e0f97-128">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-128">No</span></span>|  
|<span data-ttu-id="e0f97-129">**MSX = 8.0 < SP3**</span><span class="sxs-lookup"><span data-stu-id="e0f97-129">**MSX = 8.0 < SP3**</span></span>|<span data-ttu-id="e0f97-130">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-130">Yes</span></span>|<span data-ttu-id="e0f97-131">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-131">Yes</span></span>|<span data-ttu-id="e0f97-132">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-132">No</span></span>|<span data-ttu-id="e0f97-133">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-133">No</span></span>|<span data-ttu-id="e0f97-134">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-134">No</span></span>|<span data-ttu-id="e0f97-135">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-135">No</span></span>|<span data-ttu-id="e0f97-136">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-136">No</span></span>|  
|<span data-ttu-id="e0f97-137">**MSX = 8.0 SP3 以降**</span><span class="sxs-lookup"><span data-stu-id="e0f97-137">**MSX = 8.0 SP3 or higher**</span></span>|<span data-ttu-id="e0f97-138">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-138">No</span></span>|<span data-ttu-id="e0f97-139">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-139">No</span></span>|<span data-ttu-id="e0f97-140">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-140">Yes</span></span>|<span data-ttu-id="e0f97-141">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-141">Yes</span></span>|<span data-ttu-id="e0f97-142">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-142">Yes</span></span>|<span data-ttu-id="e0f97-143">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-143">Yes</span></span>|<span data-ttu-id="e0f97-144">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-144">Yes</span></span>|  
|<span data-ttu-id="e0f97-145">**MSX = 9.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-145">**MSX = 9.0**</span></span>|<span data-ttu-id="e0f97-146">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-146">No</span></span>|<span data-ttu-id="e0f97-147">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-147">No</span></span>|<span data-ttu-id="e0f97-148">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-148">No</span></span>|<span data-ttu-id="e0f97-149">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-149">Yes</span></span>|<span data-ttu-id="e0f97-150">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-150">Yes</span></span>|<span data-ttu-id="e0f97-151">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-151">Yes</span></span>|<span data-ttu-id="e0f97-152">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-152">Yes</span></span>|  
|<span data-ttu-id="e0f97-153">**MSX = 10.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-153">**MSX = 10.0**</span></span>|<span data-ttu-id="e0f97-154">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-154">No</span></span>|<span data-ttu-id="e0f97-155">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-155">No</span></span>|<span data-ttu-id="e0f97-156">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-156">No</span></span>|<span data-ttu-id="e0f97-157">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-157">No</span></span>|<span data-ttu-id="e0f97-158">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-158">Yes</span></span>|<span data-ttu-id="e0f97-159">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-159">Yes</span></span>|<span data-ttu-id="e0f97-160">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-160">Yes</span></span>|  
|<span data-ttu-id="e0f97-161">**MSX = 10.5**</span><span class="sxs-lookup"><span data-stu-id="e0f97-161">**MSX = 10.5**</span></span>|<span data-ttu-id="e0f97-162">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-162">No</span></span>|<span data-ttu-id="e0f97-163">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-163">No</span></span>|<span data-ttu-id="e0f97-164">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-164">No</span></span>|<span data-ttu-id="e0f97-165">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-165">No</span></span>|<span data-ttu-id="e0f97-166">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-166">No</span></span>|<span data-ttu-id="e0f97-167">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-167">Yes</span></span>|<span data-ttu-id="e0f97-168">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-168">Yes</span></span>|  
|<span data-ttu-id="e0f97-169">**MSX = 11.0**</span><span class="sxs-lookup"><span data-stu-id="e0f97-169">**MSX = 11.0**</span></span>|<span data-ttu-id="e0f97-170">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-170">No</span></span>|<span data-ttu-id="e0f97-171">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-171">No</span></span>|<span data-ttu-id="e0f97-172">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-172">No</span></span>|<span data-ttu-id="e0f97-173">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-173">No</span></span>|<span data-ttu-id="e0f97-174">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-174">No</span></span>|<span data-ttu-id="e0f97-175">いいえ</span><span class="sxs-lookup"><span data-stu-id="e0f97-175">No</span></span>|<span data-ttu-id="e0f97-176">はい</span><span class="sxs-lookup"><span data-stu-id="e0f97-176">Yes</span></span>|  
  
 <span data-ttu-id="e0f97-177">マルチサーバー環境を作成するときは、次の点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="e0f97-177">Consider the following issues when creating a multiserver environment:</span></span>  
  
-   <span data-ttu-id="e0f97-178">各ターゲット サーバーは、1 つのマスター サーバーのみに対してレポートを行います。</span><span class="sxs-lookup"><span data-stu-id="e0f97-178">Each target server reports to only one master server.</span></span> <span data-ttu-id="e0f97-179">ターゲット サーバーを別のマスター サーバーに参加させるには、現在のマスター サーバーからそのターゲット サーバーの参加を解除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-179">You must defect a target server from one master server before you can enlist it into a different one.</span></span>  
  
-   <span data-ttu-id="e0f97-180">ターゲット サーバーの名前を変更する場合は、名前を変更する前に参加を解除し、変更を行ってから再登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-180">When changing the name of a target server, you must defect it before changing the name and re-enlist it after the change.</span></span>  
  
-   <span data-ttu-id="e0f97-181">マルチサーバー構成を取り消す場合は、マスター サーバーからすべてのターゲット サーバーの参加を解除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e0f97-181">If you want to dismantle a multiserver configuration, you must defect all the target servers from the master server.</span></span>  
  
-   <span data-ttu-id="e0f97-182">SQL Server Integration Services は、マスター サーバーのバージョンと同じバージョンまたはそれ以降のバージョンのターゲット サーバーのみサポートします。</span><span class="sxs-lookup"><span data-stu-id="e0f97-182">SQL Server Integration Services only supports target servers that are the same version or higher than the master server version.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="e0f97-183">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="e0f97-183">Related Tasks</span></span>  
 <span data-ttu-id="e0f97-184">次のトピックでは、マルチサーバー環境を作成するための一般的な作業について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-184">The following topics document common tasks for creating a multiserver environment.</span></span>  
  
|<span data-ttu-id="e0f97-185">説明</span><span class="sxs-lookup"><span data-stu-id="e0f97-185">Description</span></span>|<span data-ttu-id="e0f97-186">トピック</span><span class="sxs-lookup"><span data-stu-id="e0f97-186">Topic</span></span>|  
|-----------------|-----------|  
|<span data-ttu-id="e0f97-187">マスター サーバーを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-187">Describes how to create a master server.</span></span>|[<span data-ttu-id="e0f97-188">マスター サーバーの作成</span><span class="sxs-lookup"><span data-stu-id="e0f97-188">Make a Master Server</span></span>](make-a-master-server.md)|  
|<span data-ttu-id="e0f97-189">ターゲット サーバーを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-189">Describes how to create a target server.</span></span>|[<span data-ttu-id="e0f97-190">ターゲット サーバーの作成</span><span class="sxs-lookup"><span data-stu-id="e0f97-190">Make a Target Server</span></span>](make-a-target-server.md)|  
|<span data-ttu-id="e0f97-191">マスター サーバーにターゲット サーバーを参加させる方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-191">Describes how to enlist a target server into a master server.</span></span>|[<span data-ttu-id="e0f97-192">マスター サーバーへのターゲット サーバーの参加</span><span class="sxs-lookup"><span data-stu-id="e0f97-192">Enlist a Target Server to a Master Server</span></span>](enlist-a-target-server-to-a-master-server.md)|  
|<span data-ttu-id="e0f97-193">マスター サーバーからターゲット サーバーの参加を解除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-193">Describes how to defect a target server from a master server.</span></span>|[<span data-ttu-id="e0f97-194">マスター サーバーからのターゲット サーバーの参加の解除</span><span class="sxs-lookup"><span data-stu-id="e0f97-194">Defect a Target Server from a Master Server</span></span>](defect-a-target-server-from-a-master-server.md)|  
|<span data-ttu-id="e0f97-195">マスター サーバーから複数のターゲット サーバーの参加を解除する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-195">Describes how to defect multiple target servers from a master server.</span></span>|[<span data-ttu-id="e0f97-196">マスター サーバーからの複数のターゲット サーバーの参加の解除</span><span class="sxs-lookup"><span data-stu-id="e0f97-196">Defect Multiple Target Servers from a Master Server</span></span>](defect-multiple-target-servers-from-a-master-server.md)|  
|<span data-ttu-id="e0f97-197">ターゲット サーバーの状態を確認する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e0f97-197">Describes how to check the status of a target server.</span></span>|[<span data-ttu-id="e0f97-198">sp_help_targetserver &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="e0f97-198">sp_help_targetserver &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetserver-transact-sql)<br /><br /> [<span data-ttu-id="e0f97-199">sp_help_targetservergroup &#40;Transact-sql&#41;</span><span class="sxs-lookup"><span data-stu-id="e0f97-199">sp_help_targetservergroup &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-help-targetservergroup-transact-sql)|  
  
## <a name="see-also"></a><span data-ttu-id="e0f97-200">参照</span><span class="sxs-lookup"><span data-stu-id="e0f97-200">See Also</span></span>  
 [<span data-ttu-id="e0f97-201">プロキシを使用するマルチサーバー ジョブのトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="e0f97-201">Troubleshoot Multiserver Jobs That Use Proxies</span></span>](troubleshoot-multiserver-jobs-that-use-proxies.md)  
  
  
