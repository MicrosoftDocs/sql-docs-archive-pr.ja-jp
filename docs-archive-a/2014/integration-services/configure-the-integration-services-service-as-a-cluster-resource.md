---
title: Integration Services サービスをクラスターリソースとして構成する |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
ms.assetid: 367835aa-9855-4791-a989-b3d08402ad4c
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f55b07f5587720130646b9637b91afbb8f179998
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738635"
---
# <a name="configure-the-integration-services-service-as-a-cluster-resource"></a><span data-ttu-id="00ac0-102">クラスター リソースとして Integration Services サービスを構成する</span><span class="sxs-lookup"><span data-stu-id="00ac0-102">Configure the Integration Services Service as a Cluster Resource</span></span>
  <span data-ttu-id="00ac0-103">このセクションでは、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをクラスター リソースとして構成する利点が欠点を上回ると判断したユーザー向けに、必要な構成手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-103">For those customers who conclude that the advantages of configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource outweigh the disadvantages, this section contains the necessary configuration instructions.</span></span> <span data-ttu-id="00ac0-104">ただし、 [!INCLUDE[msCoName](../includes/msconame-md.md)] では、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをクラスター リソースとして構成することをお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-104">However, [!INCLUDE[msCoName](../includes/msconame-md.md)] does not recommend that the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service be configured as a cluster resource.</span></span>  
  
 <span data-ttu-id="00ac0-105">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをクラスター リソースとして構成するには、次のタスクを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-105">To configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you need to complete the following tasks.</span></span>  
  
-   <span data-ttu-id="00ac0-106">クラスターに [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をインストールします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-106">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster.</span></span>  
  
     <span data-ttu-id="00ac0-107">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をクラスターにインストールするには、クラスター内の各ノードに [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-107">To install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on a cluster, you must install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node in the cluster.</span></span>  
  
-   <span data-ttu-id="00ac0-108">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をクラスター リソースとして構成します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-108">Configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource.</span></span>  
  
     <span data-ttu-id="00ac0-109">Integration Services がクラスターの各ノードにインストールされている状態で、Integration Services をクラスター リソースとして構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-109">With Integration Services installed on each node in the cluster, you need to configure Integration Services as a cluster resource.</span></span> <span data-ttu-id="00ac0-110">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをクラスター リソースとして構成する場合、サービスを [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)]と同じリソース グループに追加することも、異なるグループに追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-110">When you configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service as a cluster resource, you can add the service to the same resource group as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)], or to a different group.</span></span> <span data-ttu-id="00ac0-111">次の表に、リソース グループの選択に関連する利点と欠点を示します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-111">The following table describes the possible advantages and disadvantages in selecting a resource group.</span></span>  
  
    |<span data-ttu-id="00ac0-112">Integration Services と SQL Server が同じリソース グループに属する場合</span><span class="sxs-lookup"><span data-stu-id="00ac0-112">When Integration Services and SQL Server are in the same resource group</span></span>|<span data-ttu-id="00ac0-113">Integration Services と SQL Server が異なるリソース グループに属する場合</span><span class="sxs-lookup"><span data-stu-id="00ac0-113">When Integration Services and SQL Server are in different resource groups</span></span>|  
    |-----------------------------------------------------------------------------|-------------------------------------------------------------------------------|  
    |<span data-ttu-id="00ac0-114">[!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] と [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] サービスが同じ仮想サーバー上で実行されるので、クライアント コンピューターは、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] を使用して、msdb データベースに格納されているパッケージを管理できます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-114">Client computers can use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database because both the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] and [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service are running on the same virtual server.</span></span> <span data-ttu-id="00ac0-115">この構成では、ダブルホップ シナリオの委任の問題を回避できます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-115">This configuration avoids the delegation issues of the double-hop scenario.</span></span>|<span data-ttu-id="00ac0-116">クライアント コンピューターは、 [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] を使用して、msdb データベースに格納されているパッケージを管理することができません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-116">Client computers cannot use [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] to manage packages stored in the msdb database.</span></span> <span data-ttu-id="00ac0-117">クライアント コンピューターは、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスが実行されている仮想サーバーに接続できます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-117">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="00ac0-118">ただし、当該コンピューターは、 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] が実行されている仮想サーバーにユーザーの資格情報を委任することはできません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-118">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="00ac0-119">これは、ダブルホップ シナリオと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-119">This is known as a double-hop scenario.</span></span>|  
    |<span data-ttu-id="00ac0-120">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスは、CPU およびその他のコンピューター リソースの利用に関して他の [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] サービスと競合します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-120">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service competes with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources.</span></span>|<span data-ttu-id="00ac0-121">異なるリソース グループは異なるノードに構成されているので、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスは、CPU およびその他のコンピューター リソースの利用に関して他の [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] サービスと競合しません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-121">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service does not compete with other [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] services for CPU and other computer resources because the different resource groups are configured on different nodes.</span></span>|  
    |<span data-ttu-id="00ac0-122">両方のサービスが同じコンピューター上で実行されているので、msdb データベースへのパッケージの読み込みと保存をより高速に行うことができ、生成されるネットワーク トラフィックも少なくて済みます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-122">The loading and saving of packages to the msdb database is faster and generates less network traffic because both services are running on the same computer.</span></span>|<span data-ttu-id="00ac0-123">msdb データベースへのパッケージの読み込みと保存に時間がかかる可能性があり、生成されるネットワーク トラフィックが多くなります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-123">The loading and saving of packages to the msdb database might be slower and generate more network traffic.</span></span>|  
    |<span data-ttu-id="00ac0-124">両方のサービスは同時にオンラインまたはオフラインになります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-124">Both services are online or offline at the same time.</span></span>|<span data-ttu-id="00ac0-125">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスがオンラインのときに [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] がオフラインの場合があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-125">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service might be online while the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] is offline.</span></span> <span data-ttu-id="00ac0-126">その場合、 [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] の msdb データベースに格納されているパッケージを利用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-126">Thus, the packages stored in the msdb database of the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)] are unavailable.</span></span>|  
    |<span data-ttu-id="00ac0-127">必要に応じて [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをすばやく別のノードに移動できません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-127">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot be moved quickly to another node if it is required.</span></span>|<span data-ttu-id="00ac0-128">必要に応じて [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをすばやく別のノードに移動できます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-128">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service can be moved more quickly to another node if it is required.</span></span>|  
  
     <span data-ttu-id="00ac0-129">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]をどちらのリソース グループに追加するかを決定した後、当該グループのクラスターとして [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-129">After you have decided to which resource group you will add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)], you have to configure [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource in that group.</span></span>  
  
-   <span data-ttu-id="00ac0-130">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスおよびパッケージ ストアを構成します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-130">Configure the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and package store.</span></span>  
  
     <span data-ttu-id="00ac0-131">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をクラスター リソースとして構成した後は、クラスター内の各ノード上で [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスの構成ファイルの場所および内容を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-131">Having configured [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] as a cluster resource, you must modify the location and the content of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on each node in the cluster.</span></span> <span data-ttu-id="00ac0-132">これは、フェールオーバーが発生した場合にすべてのノードで構成ファイルとパッケージ ストアを使用可能にするための変更です。</span><span class="sxs-lookup"><span data-stu-id="00ac0-132">These modifications make both the configuration file and the package store available to all nodes if there is a failover.</span></span> <span data-ttu-id="00ac0-133">構成ファイルの場所および内容を変更した後、サービスをオンラインにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-133">After you modify the location and content of the configuration file, you have to bring the service online.</span></span>  
  
-   <span data-ttu-id="00ac0-134">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスをクラスター リソースとしてオンラインにします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-134">Bring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service online as a cluster resource.</span></span>  
  
 <span data-ttu-id="00ac0-135">クラスターまたは任意のサーバー上で [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスを構成した後は、クライアント コンピューターからサービスに接続できるように DCOM 権限を構成しなければならない場合があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-135">After configuring the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service on a cluster, or on any server, you might have to configure DCOM permissions before you can connect to the service from a client computer.</span></span> <span data-ttu-id="00ac0-136">詳細については、「[リモートの Integration Services サーバーに接続する (SSIS サービス)](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="00ac0-136">For more information, see [Connect to a Remote Integration Services Server &#40;SSIS Service&#41;](../../2014/integration-services/connect-to-a-remote-integration-services-server-ssis-service.md).</span></span>  
  
 <span data-ttu-id="00ac0-137">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスは、資格情報を委任できません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-137">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service cannot delegate credentials.</span></span> <span data-ttu-id="00ac0-138">したがって、次の条件に一致するときは、 [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] を使用して msdb データベースに格納されているパッケージを管理することはできません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-138">Therefore, you cannot use [!INCLUDE[ssManStudio](../includes/ssmanstudio-md.md)] to manage packages stored in the msdb database when the following conditions are true:</span></span>  
  
-   <span data-ttu-id="00ac0-139">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスと [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] が別個のサーバーまたは仮想サーバー上で実行されている。</span><span class="sxs-lookup"><span data-stu-id="00ac0-139">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service and [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] are running on separate servers or virtual servers.</span></span>  
  
-   <span data-ttu-id="00ac0-140">[!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] を実行しているクライアントが 3 台目のコンピューターである。</span><span class="sxs-lookup"><span data-stu-id="00ac0-140">The client that is running [!INCLUDE[ssManStudioFull](../includes/ssmanstudiofull-md.md)] is a third computer.</span></span>  
  
 <span data-ttu-id="00ac0-141">クライアント コンピューターは、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスが実行されている仮想サーバーに接続できます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-141">The client can connect to the virtual server on which the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is running.</span></span> <span data-ttu-id="00ac0-142">ただし、当該コンピューターは、 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] が実行されている仮想サーバーにユーザーの資格情報を委任することはできません。</span><span class="sxs-lookup"><span data-stu-id="00ac0-142">However, that computer cannot delegate the user's credentials to the virtual server on which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] is running.</span></span> <span data-ttu-id="00ac0-143">これは、ダブルホップ シナリオと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-143">This is known as a double-hop scenario.</span></span>  
  
### <a name="to-install-integration-services-on-a-cluster"></a><span data-ttu-id="00ac0-144">クラスターに Integration Services をインストールするには</span><span class="sxs-lookup"><span data-stu-id="00ac0-144">To Install Integration Services on a Cluster</span></span>  
  
1.  <span data-ttu-id="00ac0-145">1 つ以上のノードのクラスターをインストールして構成します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-145">Install and configure a cluster with one or more nodes.</span></span>  
  
2.  <span data-ttu-id="00ac0-146">(省略可能) [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)]などのクラスター化サービスをインストールします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-146">(Optional) Install clustered services, such as the [!INCLUDE[ssDEnoversion](../includes/ssdenoversion-md.md)].</span></span>  
  
3.  <span data-ttu-id="00ac0-147">クラスターの各ノードに [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] をインストールします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-147">Install [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] on each node of the cluster.</span></span>  
  
### <a name="to-configure-integration-services-as-a-cluster-resource"></a><span data-ttu-id="00ac0-148">Integration Services をクラスター リソースとして構成するには</span><span class="sxs-lookup"><span data-stu-id="00ac0-148">To Configure Integration Services as a Cluster Resource</span></span>  
  
1.  <span data-ttu-id="00ac0-149">**クラスター アドミニストレーター**を開きます。</span><span class="sxs-lookup"><span data-stu-id="00ac0-149">Open the **Cluster Administrator**.</span></span>  
  
2.  <span data-ttu-id="00ac0-150">コンソール ツリーで、[グループ] フォルダーを選択します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-150">In the console tree, select the Groups folder.</span></span>  
  
3.  <span data-ttu-id="00ac0-151">結果ペインで、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]を追加するグループを選択します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-151">In the results pane, select the group to which you plan to add [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]:</span></span>  
  
    -   <span data-ttu-id="00ac0-152">[!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]と同じリソース グループに Integration Services をクラスター リソースとして追加するには、 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] が属しているグループを選択します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-152">To add Integrations Services as a cluster resource to the same resource group as [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
    -   <span data-ttu-id="00ac0-153">[!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)]とは異なるグループに Integration Services をクラスター リソースとして追加するには、 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] が属している以外のグループを選択します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-153">To add Integrations Services as a cluster resource to a different group than [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)], select a group other than the group to which [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] belongs.</span></span>  
  
4.  <span data-ttu-id="00ac0-154">**[ファイル]** メニューの **[新規作成]** をポイントし、 **[リソース]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-154">On the **File** menu, point to **New**, and then click **Resource**.</span></span>  
  
5.  <span data-ttu-id="00ac0-155">リソース ウィザードの **[新しいリソース]** ページで、名前を入力し、 **[サービスの種類]** として **[汎用サービス]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-155">On the **New Resource** page of the Resource Wizard, type a name and select **"Generic Service"** as the **Service Type**.</span></span> <span data-ttu-id="00ac0-156">**[グループ]** の値は変更せずに、</span><span class="sxs-lookup"><span data-stu-id="00ac0-156">Do not change the value of **Group**.</span></span> <span data-ttu-id="00ac0-157">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-157">Click **Next**.</span></span>  
  
6.  <span data-ttu-id="00ac0-158">**[実行可能な所有者]** ページで、リソースの実行可能な所有者として、クラスターのノードを追加または削除し、</span><span class="sxs-lookup"><span data-stu-id="00ac0-158">On the **Possible Owners** page, add or remove the nodes of the cluster as the possible owners of the resource.</span></span> <span data-ttu-id="00ac0-159">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-159">Click **Next**.</span></span>  
  
7.  <span data-ttu-id="00ac0-160">依存関係を追加するには、 **[依存関係]** ページで **[利用できるリソース]** からリソースを選択し、 **[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-160">To add dependencies, on the **Dependencies** page, select a resource under **Available resources**, and then click **Add**.</span></span> <span data-ttu-id="00ac0-161">フェールオーバーが発生した場合は、 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] がオンラインになる前に、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] と [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] パッケージが保存されている共有ディスクの両方がオンラインになる必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-161">In case of a failover, both [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] and the shared disk that stores [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] packages should come back online before [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] is brought online.</span></span> <span data-ttu-id="00ac0-162">依存関係を選択したら、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-162">After you have selected the dependencies, click **Next**.</span></span>  
  
     <span data-ttu-id="00ac0-163">詳細については、「 [Add Dependencies to a SQL Server Resource](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="00ac0-163">For more information, see [Add Dependencies to a SQL Server Resource](../sql-server/failover-clusters/windows/add-dependencies-to-a-sql-server-resource.md).</span></span>  
  
8.  <span data-ttu-id="00ac0-164">**[汎用サービス パラメーター]** ページで、サービスの名前に「 **MsDtsServer** 」と入力し、</span><span class="sxs-lookup"><span data-stu-id="00ac0-164">On the **Generic Service Parameters** page, enter **MsDtsServer** as the name of the service.</span></span> <span data-ttu-id="00ac0-165">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-165">Click **Next**.</span></span>  
  
9. <span data-ttu-id="00ac0-166">**[レジストリ レプリケーション]** ページで、 **[追加]** をクリックし、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスの構成ファイルの場所を示すレジストリ キーを追加します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-166">On the **Registry Replication** page, click **Add** to add the registry key that identifies the location of the configuration file for the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span> <span data-ttu-id="00ac0-167">このファイルは、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスと同じリソース グループに属している共有ディスクに配置されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-167">This file must be located on a shared disk that is in the same resource group as the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
10. <span data-ttu-id="00ac0-168">**[レジストリ キー]** ダイアログ ボックスで、「 **SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile**」と入力します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-168">In the **Registry Key** dialog box, type **SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile**.</span></span> <span data-ttu-id="00ac0-169">**[OK]** をクリックし、 **[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-169">Click **OK**, and then click **Finish**.</span></span>  
  
     <span data-ttu-id="00ac0-170">これで、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスがクラスター リソースとして追加されました。</span><span class="sxs-lookup"><span data-stu-id="00ac0-170">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service has now been added as a cluster resource.</span></span>  
  
### <a name="to-configure-the-integration-services-service-and-package-store"></a><span data-ttu-id="00ac0-171">Integration Services サービスおよびパッケージ ストアを構成するには</span><span class="sxs-lookup"><span data-stu-id="00ac0-171">To Configure the Integration Services Service and Package Store</span></span>  
  
1.  <span data-ttu-id="00ac0-172">構成ファイル %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml を探し、</span><span class="sxs-lookup"><span data-stu-id="00ac0-172">Locate the configuration file at %ProgramFiles%\Microsoft SQL Server\100\DTS\Binn\MsDtsSrvr.ini.xml.</span></span> <span data-ttu-id="00ac0-173">[!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスを追加したグループの共有ディスクにコピーします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-173">Copy it to the shared disk for the group to which you added the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service.</span></span>  
  
2.  <span data-ttu-id="00ac0-174">共有ディスク上で、パッケージ ストアとして使用するために **Packages** という名前のフォルダーを新規作成します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-174">On the shared disk, create a new folder named **Packages** to serve as the package store.</span></span> <span data-ttu-id="00ac0-175">このフォルダーに対するフォルダー一覧表示権限と書き込み権限を、適切なユーザーおよびグループに許可します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-175">Grant List Folders and Write permissions on the new folder to appropriate users and groups.</span></span>  
  
3.  <span data-ttu-id="00ac0-176">共有ディスク上で、テキスト エディターまたは XML エディターを使用して構成ファイルを開き、</span><span class="sxs-lookup"><span data-stu-id="00ac0-176">On the shared disk, open the configuration file in a text or XML editor.</span></span> <span data-ttu-id="00ac0-177">`ServerName` 要素の値を、同じリソース グループ内の仮想 [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] の名前に変更します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-177">Change the value of the `ServerName` element to the name of the virtual [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] that is in the same resource group.</span></span>  
  
4.  <span data-ttu-id="00ac0-178">要素の値を、 `StorePath` 前の手順で共有ディスク上に作成された**Packages**フォルダーの完全修飾パスに変更します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-178">Change the value of the `StorePath` element to the fully-qualified path of the **Packages** folder created on the shared disk in a previous step.</span></span>  
  
5.  <span data-ttu-id="00ac0-179">レジストリ内の **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** の値を共有ディスク上のサービス構成ファイルの完全修飾パスとファイル名に更新します。</span><span class="sxs-lookup"><span data-stu-id="00ac0-179">Update the value of **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\100\SSIS\ServiceConfigFile** in the Registry to the fully-qualified path and file name of the service configuration file on the shared disk.</span></span>  
  
### <a name="to-bring-the-integration-services-service-online"></a><span data-ttu-id="00ac0-180">Integration Services サービスをオンラインにするには</span><span class="sxs-lookup"><span data-stu-id="00ac0-180">To bring the Integration Services service online</span></span>  
  
-   <span data-ttu-id="00ac0-181">これには、 **クラスター アドミニストレーター**で、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスを選択して右クリックし、ポップアップ メニューの **[オンラインにする]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="00ac0-181">In the **Cluster Administrator**, select the [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service, right-click, and select **Bring Online** from the popup menu.</span></span> <span data-ttu-id="00ac0-182">これで、 [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] サービスがクラスター リソースとしてオンラインになります。</span><span class="sxs-lookup"><span data-stu-id="00ac0-182">The [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] service is now online as a cluster resource.</span></span>  
  
  
