---
title: Azure SQL DW アップロード タスク | Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
f1_keywords:
- SQL12.DTS.DESIGNER.AFPDWUPTASK.F1
- SQL11.DTS.DESIGNER.AFPDWUPTASK.F1
ms.assetid: 112cf764-f85a-4c1a-b732-d299d717c0d4
author: yualan
ms.author: chugu
ms.openlocfilehash: d90cc36b5e8beb35313b76ecef2ed95f065dcb89
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87633278"
---
# <a name="azure-sql-dw-upload-task"></a><span data-ttu-id="c3d39-102">Azure SQL DW アップロード タスク</span><span class="sxs-lookup"><span data-stu-id="c3d39-102">Azure SQL DW Upload Task</span></span>
<span data-ttu-id="c3d39-103">**Azure SQL DW アップロード タスク** を利用すると、SSIS パッケージで、Azure SQL Data Warehouse (DW) のテーブルにローカル データをアップロードできます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-103">The **Azure SQL DW Upload Task** enables an SSIS package to upload local data to a table in Azure SQL Data Warehouse (DW).</span></span> <span data-ttu-id="c3d39-104">現在サポートされているソース データ ファイル形式は、UTF8 エンコーディングの区切り記号付きテキストです。</span><span class="sxs-lookup"><span data-stu-id="c3d39-104">The currently supported source data file format is delimited text in UTF8 encoding.</span></span> <span data-ttu-id="c3d39-105">アップロードプロセスは、効率的な PolyBase アプローチに従います。</span><span class="sxs-lookup"><span data-stu-id="c3d39-105">The uploading process follows the efficient PolyBase approach.</span></span> <span data-ttu-id="c3d39-106">具体的には、データは最初に Azure Blob Storage にアップロードされ、それから Azure SQL DW にアップロードされます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-106">Specifically, data will first be uploaded to Azure Blob Storage, and then to Azure SQL DW.</span></span> <span data-ttu-id="c3d39-107">そのため、このタスクを利用するには Azure Blob Storage アカウントが必要になります。</span><span class="sxs-lookup"><span data-stu-id="c3d39-107">Therefore, an Azure Blob Storage account is needed to use this task.</span></span>

<span data-ttu-id="c3d39-108">**Azure SQL DW アップロード タスク**を追加するには、SSIS ツールボックスからデザイナー キャンバスにドラッグ アンド ドロップし、ダブルクリックまたは右クリックして **[編集]** をクリックし、タスク エディター ダイアログ ボックスを表示します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-108">To add an **Azure SQL DW Upload Task**, drag-drop it from SSIS Toolbox to the designer canvas, and double-click or right-click and click **Edit** to see the task editor dialog box.</span></span>

<span data-ttu-id="c3d39-109">**[全般]** ページで、次のプロパティを構成します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-109">On the **General** page, configure the following properties.</span></span>

<span data-ttu-id="c3d39-110">フィールド</span><span class="sxs-lookup"><span data-stu-id="c3d39-110">Field</span></span>|<span data-ttu-id="c3d39-111">説明</span><span class="sxs-lookup"><span data-stu-id="c3d39-111">Description</span></span>
-----|-----------
<span data-ttu-id="c3d39-112">LocalDirectory</span><span class="sxs-lookup"><span data-stu-id="c3d39-112">LocalDirectory</span></span>|<span data-ttu-id="c3d39-113">アップロードするデータ ファイルを含むローカル ディレクトリを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-113">Specifies the local directory that contains the data files to be uploaded.</span></span>
<span data-ttu-id="c3d39-114">Recursively</span><span class="sxs-lookup"><span data-stu-id="c3d39-114">Recursively</span></span>|<span data-ttu-id="c3d39-115">サブディレクトリを再帰的に検索するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-115">Specifies whether to recursively search sub-directories.</span></span>
<span data-ttu-id="c3d39-116">FileName</span><span class="sxs-lookup"><span data-stu-id="c3d39-116">FileName</span></span>|<span data-ttu-id="c3d39-117">特定の名前のパターンを持つファイルを選択する名前フィルターを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-117">Specifies a name filter to select files with certain name pattern.</span></span> <span data-ttu-id="c3d39-118">例:</span><span class="sxs-lookup"><span data-stu-id="c3d39-118">E.g.</span></span> <span data-ttu-id="c3d39-119">MySheet\*.xsl\* の場合、MySheet001.xsl や MySheetABC.xslx などのファイルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-119">MySheet\*.xsl\* will include files such as MySheet001.xsl and MySheetABC.xslx.</span></span>
<span data-ttu-id="c3d39-120">[RowDelimiter]</span><span class="sxs-lookup"><span data-stu-id="c3d39-120">RowDelimiter</span></span>|<span data-ttu-id="c3d39-121">各行の終わりに印を付ける文字を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-121">Specifies the character(s) that marks the end of each row.</span></span>
<span data-ttu-id="c3d39-122">[列区切り記号]</span><span class="sxs-lookup"><span data-stu-id="c3d39-122">ColumnDelimiter</span></span>|<span data-ttu-id="c3d39-123">各列の終わりに印を付ける 1 つ以上の文字を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-123">Specifies one or more characters that mark the end of each column.</span></span> <span data-ttu-id="c3d39-124">例:</span><span class="sxs-lookup"><span data-stu-id="c3d39-124">E.g.</span></span> <span data-ttu-id="c3d39-125">&#124; (パイプ)、\t (タブ)、' (単一引用符)、" (二重引用符)、および 0x5c (バック スラッシュ)。</span><span class="sxs-lookup"><span data-stu-id="c3d39-125">&#124; (pipe), \t (tab), ' (single quote), " (double quote), and 0x5c (backslash).</span></span>
<span data-ttu-id="c3d39-126">IsFirstRowHeader</span><span class="sxs-lookup"><span data-stu-id="c3d39-126">IsFirstRowHeader</span></span>|<span data-ttu-id="c3d39-127">各データ ファイルの最初の行に実際のデータの代わりに列名を含めるかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-127">Specifies whether the first row in each data file contains column names instead of actual data.</span></span>
<span data-ttu-id="c3d39-128">AzureStorageConnection</span><span class="sxs-lookup"><span data-stu-id="c3d39-128">AzureStorageConnection</span></span>|<span data-ttu-id="c3d39-129">Azure Storage 接続マネージャーを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-129">Specifies an Azure Storage connection manager.</span></span>
<span data-ttu-id="c3d39-130">BlobContainer</span><span class="sxs-lookup"><span data-stu-id="c3d39-130">BlobContainer</span></span>|<span data-ttu-id="c3d39-131">ローカル データをアップロードし、PolyBase 経由で Azure DW にリレーする BLOB コンテナーの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-131">Specifies the name of blob container to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span> <span data-ttu-id="c3d39-132">コンテナーが存在しない場合、新規作成されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-132">A new container will be created if it does not exist.</span></span>
<span data-ttu-id="c3d39-133">BlobDirectory</span><span class="sxs-lookup"><span data-stu-id="c3d39-133">BlobDirectory</span></span>|<span data-ttu-id="c3d39-134">ローカル データをアップロードし、PolyBase 経由で Azure DW にリレーする BLOB ディレクトリ (仮想階層構造) を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-134">Specifies the blob directory (virtual hierarchical structure) to which local data will be uploaded and relayed to Azure DW via PolyBase.</span></span>
<span data-ttu-id="c3d39-135">RetainFiles</span><span class="sxs-lookup"><span data-stu-id="c3d39-135">RetainFiles</span></span>|<span data-ttu-id="c3d39-136">Azure Storage にアップロードしたファイルを保持するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-136">Specifies whether to retain the files uploaded to Azure Storage.</span></span>
<span data-ttu-id="c3d39-137">CompressionType</span><span class="sxs-lookup"><span data-stu-id="c3d39-137">CompressionType</span></span>|<span data-ttu-id="c3d39-138">Azure Storage にファイルをアップロードするときに使用する圧縮形式を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-138">Specifies the compression format to use upon uploading files to Azure Storage.</span></span> <span data-ttu-id="c3d39-139">ローカル ソースは影響を受けません。</span><span class="sxs-lookup"><span data-stu-id="c3d39-139">Local source is not affected.</span></span>
<span data-ttu-id="c3d39-140">CompressionLevel</span><span class="sxs-lookup"><span data-stu-id="c3d39-140">CompressionLevel</span></span>|<span data-ttu-id="c3d39-141">圧縮形式に使用する圧縮レベルを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-141">Specifies the compression level to use for the compression format.</span></span>
<span data-ttu-id="c3d39-142">AzureDwConnection</span><span class="sxs-lookup"><span data-stu-id="c3d39-142">AzureDwConnection</span></span>|<span data-ttu-id="c3d39-143">Azure SQL DW の ADO.NET 接続マネージャーを指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-143">Specifies an ADO.NET connection manager for Azure SQL DW.</span></span>
<span data-ttu-id="c3d39-144">TableName</span><span class="sxs-lookup"><span data-stu-id="c3d39-144">TableName</span></span>|<span data-ttu-id="c3d39-145">アップロード先のテーブルの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-145">Specifies name of the destination table.</span></span> <span data-ttu-id="c3d39-146">既存のテーブル名を選択するか、 **[\<New Table ...>]** を選択して新規作成します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-146">Either choose an existing table name, or create a new one by choosing **\<New Table ...>**.</span></span>
<span data-ttu-id="c3d39-147">TableDistribution</span><span class="sxs-lookup"><span data-stu-id="c3d39-147">TableDistribution</span></span>|<span data-ttu-id="c3d39-148">新しいテーブルの配布方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-148">Specifies the distribution method for new table.</span></span> <span data-ttu-id="c3d39-149">**TableName**に新しいテーブル名が指定されている場合に適用されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-149">Applies if a new table name is specified for **TableName**.</span></span>
<span data-ttu-id="c3d39-150">HashColumnName</span><span class="sxs-lookup"><span data-stu-id="c3d39-150">HashColumnName</span></span>|<span data-ttu-id="c3d39-151">ハッシュ テーブル配分に使用される列を指定します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-151">Specifies the column used for hash table distribution.</span></span> <span data-ttu-id="c3d39-152">**TableDistribution** に **HASH**が指定されている場合に適用されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-152">Applies if **HASH** is specified for **TableDistribution**.</span></span>

<span data-ttu-id="c3d39-153">新しいテーブルと既存のテーブルにいずれにアップロードするかに基づき、異なる **[マッピング]** ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-153">You will see a different **Mappings** page depending on whether you are uploading to a new table or to an existing one.</span></span> <span data-ttu-id="c3d39-154">前者の場合、マッピングするアップロード元の列とそれに対応する、作成予定のアップロード先のテーブルの名前を構成します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-154">In the former case, configure which source columns are to be mapped and their corresponding names in the to-be-created destination table.</span></span> <span data-ttu-id="c3d39-155">後者の場合、アップロード元の列とアップロード先の列の間のマッピング関係を構成します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-155">In the latter case, configure the mapping relationships between source and destination columns.</span></span>

<span data-ttu-id="c3d39-156">**[列]** ページで、マッピング元ごとのデータ型プロパティを構成します。</span><span class="sxs-lookup"><span data-stu-id="c3d39-156">On the **Columns** page, configure the data type properties for each source column.</span></span>

<span data-ttu-id="c3d39-157">**[T-SQL]** ページには、Azure Blob Storage から Azure SQL DW にデータを読み込むための T-SQL が表示されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-157">The **T-SQL** page shows the T-SQL used to load data from Azure Blob Storage to Azure SQL DW.</span></span> <span data-ttu-id="c3d39-158">T-SQL は別のページの構成から自動生成され、タスク実行の一部として実行されます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-158">The T-SQL is automatically generated from configurations on the other pages, and will be executed as part of the task execution.</span></span> <span data-ttu-id="c3d39-159">生成された T-SQL を特定のニーズに合わせて手動で編集することもできます。 **[編集]** ボタンをクリックしてください。</span><span class="sxs-lookup"><span data-stu-id="c3d39-159">You may choose to manually edit the generated T-SQL to meet your particular needs by clicking the **Edit** button.</span></span> <span data-ttu-id="c3d39-160">**[リセット]** ボタンをクリックすれば、自動的に生成されたものに後で戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="c3d39-160">You can revert to the automatically generated one later on by clicking the **Reset** button.</span></span>
