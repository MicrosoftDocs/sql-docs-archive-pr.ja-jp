---
title: Integration Services (SSIS) のログ | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: integration-services
ms.topic: conceptual
helpviewer_keywords:
- containers [Integration Services], logs
- Windows Event log provider [Integration Services]
- XML File log provider [Integration Services]
- SQL Server Profiler, log provider
- SQL Server Integration Services packages, logs
- SSIS packages, logs
- tasks [Integration Services], logs
- logs [Integration Services], log providers
- Integration Services packages, logs
- log providers [Integration Services]
- packages [Integration Services], logs
- Text File log provider
- SQL Server log provider
ms.assetid: 65e17889-371f-4951-9a7e-9932b2d0dcde
author: chugugrace
ms.author: chugu
ms.openlocfilehash: f79a8bf7889948a17671f9373bec30e8fdf78ba2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87632546"
---
# <a name="integration-services-ssis-logging"></a><span data-ttu-id="83465-102">Integration Services (SSIS) のログ記録</span><span class="sxs-lookup"><span data-stu-id="83465-102">Integration Services (SSIS) Logging</span></span>
  [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="83465-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] には、パッケージ、コンテナー、およびタスクにログ記録を実装するために使用できる、ログ プロバイダーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="83465-103">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes log providers that you can use to implement logging in packages, containers, and tasks.</span></span> <span data-ttu-id="83465-104">ログ記録を行うと、パッケージに関する実行時の情報をキャプチャできるので、パッケージを実行するたびに監査やトラブルシューティングに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="83465-104">With logging, you can capture run-time information about a package, helping you audit and troubleshoot a package every time it is run.</span></span> <span data-ttu-id="83465-105">たとえば、パッケージを実行した演算子の名前と、パッケージの開始および完了時刻をログにキャプチャできます。</span><span class="sxs-lookup"><span data-stu-id="83465-105">For example, a log can capture the name of the operator who ran the package and the time the package began and finished.</span></span>  
  
 <span data-ttu-id="83465-106">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] サーバーでのパッケージ実行中に発生するログ記録のスコープを構成できます。</span><span class="sxs-lookup"><span data-stu-id="83465-106">You can configure the scope of logging that occurs during a package execution on the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] server.</span></span> <span data-ttu-id="83465-107">詳細については、「 [SSIS サーバーでのパッケージ実行のログ記録を有効にする](../enable-logging-for-package-execution-on-the-ssis-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-107">For more information, see [Enable Logging for Package Execution on the SSIS Server](../enable-logging-for-package-execution-on-the-ssis-server.md).</span></span>  
  
 <span data-ttu-id="83465-108">**dtexec** コマンド プロンプト ユーティリティを使用してパッケージを実行する際にも、ログ記録を使用できます。</span><span class="sxs-lookup"><span data-stu-id="83465-108">You can also include logging when you run a package using the **dtexec** command prompt utility.</span></span> <span data-ttu-id="83465-109">ログ記録をサポートするコマンド プロンプトの引数の詳細については、「 [dtexec Utility](../packages/dtexec-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-109">For more information about the command prompt arguments that support logging, see [dtexec Utility](../packages/dtexec-utility.md).</span></span>  
  
## <a name="configure-logging-in-sql-server-data-tools"></a><span data-ttu-id="83465-110">SQL Server Data Tools でのログ記録の構成</span><span class="sxs-lookup"><span data-stu-id="83465-110">Configure Logging in SQL Server Data Tools</span></span>  
 <span data-ttu-id="83465-111">ログはパッケージに関連付けられ、パッケージ レベルで設定します。</span><span class="sxs-lookup"><span data-stu-id="83465-111">Logs are associated with packages and are configured at the package level.</span></span> <span data-ttu-id="83465-112">パッケージ内の各タスクやコンテナーによって、パッケージのログに情報を書き込むこともできます。</span><span class="sxs-lookup"><span data-stu-id="83465-112">Each task or container in a package can log information to any package log.</span></span> <span data-ttu-id="83465-113">パッケージのログ機能が有効にされていない場合でも、そのパッケージに含まれるタスクやコンテナーのログ機能を有効にできます。</span><span class="sxs-lookup"><span data-stu-id="83465-113">The tasks and containers in a package can be enabled for logging even if the package itself is not.</span></span> <span data-ttu-id="83465-114">たとえば、親パッケージのログ機能を有効にしなくても、SQL 実行タスクのログ機能を有効にできます。</span><span class="sxs-lookup"><span data-stu-id="83465-114">For example, you can enable logging on an Execute SQL task without enabling logging on the parent package.</span></span> <span data-ttu-id="83465-115">パッケージ、コンテナー、およびタスクは、複数のログに対して書き込みが可能です。</span><span class="sxs-lookup"><span data-stu-id="83465-115">A package, container, or task can write to multiple logs.</span></span> <span data-ttu-id="83465-116">パッケージにのみログ機能を有効にできます。または、そのパッケージに含まれる任意の個別のタスクまたはコンテナーを選択して、ログ機能を有効にできます。</span><span class="sxs-lookup"><span data-stu-id="83465-116">You can enable logging on the package only, or you can choose to enable logging on any individual task or container that the package includes.</span></span>  
  
 <span data-ttu-id="83465-117">パッケージにログを追加するには、ログ プロバイダーとログの場所を選択します。</span><span class="sxs-lookup"><span data-stu-id="83465-117">When you add the log to a package, you choose the log provider and the location of the log.</span></span> <span data-ttu-id="83465-118">ログ プロバイダーは、ログ データの形式を指定します。たとえば、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースやテキスト ファイルなどを指定できます。</span><span class="sxs-lookup"><span data-stu-id="83465-118">The log provider specifies the format for the log data: for example, a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database or text file.</span></span>  
  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="83465-119">には、次のログ プロバイダーが含まれています。</span><span class="sxs-lookup"><span data-stu-id="83465-119">includes the following log providers:</span></span>  
  
-   <span data-ttu-id="83465-120">テキスト ファイルのログ プロバイダー。ログ エントリを、コンマ区切り (CSV) 形式で、ASCII テキスト ファイルに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-120">The Text File log provider, which writes log entries to ASCII text files in a comma-separated value (CSV) format.</span></span> <span data-ttu-id="83465-121">このプロバイダーで使用されるファイル名の既定の拡張子は、.log です。</span><span class="sxs-lookup"><span data-stu-id="83465-121">The default file name extension for this provider is .log.</span></span>  
  
-   <span data-ttu-id="83465-122">[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] のログ プロバイダー。 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler を使用して表示できるトレースを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-122">The [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider, which writes traces that you can view using [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Profiler.</span></span> <span data-ttu-id="83465-123">このプロバイダーで使用されるファイル名の既定の拡張子は、.trc です。</span><span class="sxs-lookup"><span data-stu-id="83465-123">The default file name extension for this provider is .trc.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="83465-124">64 ビット モードで実行されているパッケージでは、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] のログ プロバイダーを使用できません。</span><span class="sxs-lookup"><span data-stu-id="83465-124">You cannot use the [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] log provider in a package that is running in 64-bit mode.</span></span>  
  
-   <span data-ttu-id="83465-125">ログ [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] プロバイダー。ログエントリを `sysssislog` データベースのテーブルに書き込み [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="83465-125">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider, which writes log entries to the `sysssislog` table in a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span>  
  
-   <span data-ttu-id="83465-126">Windows イベント ログのログ プロバイダー。エントリを、ローカル コンピューター上にある Windows イベント ログのアプリケーション ログに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-126">The Windows Event log provider, which writes entries to the Application log in the Windows Event log on the local computer.</span></span>  
  
-   <span data-ttu-id="83465-127">XML ファイルのログ プロバイダー。ログ ファイルを XML ファイルに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-127">The XML File log provider, which writes log files to an XML file.</span></span> <span data-ttu-id="83465-128">このプロバイダーで使用されるファイル名の既定の拡張子は、.xml です。</span><span class="sxs-lookup"><span data-stu-id="83465-128">The default file name extension for this provider is .xml.</span></span>  
  
 <span data-ttu-id="83465-129">ログ プロバイダーをパッケージに追加したり、ログ記録をプログラムによって構成する場合、 [!INCLUDE[ssIS](../../includes/ssis-md.md)] デザイナーの **[SSIS ログの構成]** ダイアログ ボックスに表示される名前を使用せず、ProgID または ClassID のどちらかを使用してログ プロバイダーを識別できます。</span><span class="sxs-lookup"><span data-stu-id="83465-129">If you add a log provider to a package or configure logging programmatically, you can use either a ProgID or ClassID to identify the log provider, instead of using the names that [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer displays in the **Configure SSIS Logs** dialog box.</span></span>  
  
 <span data-ttu-id="83465-130">次の表に、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] に含まれるログ プロバイダーの ProgID と ClassID、およびログ プロバイダーが書き込むログの場所の一覧を示します。</span><span class="sxs-lookup"><span data-stu-id="83465-130">The following table lists the ProgID and ClassID for the log providers that [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] includes, and the location of the logs to which log providers write.</span></span>  
  
|<span data-ttu-id="83465-131">ログ プロバイダー</span><span class="sxs-lookup"><span data-stu-id="83465-131">Log provider</span></span>|<span data-ttu-id="83465-132">ProgID</span><span class="sxs-lookup"><span data-stu-id="83465-132">ProgID</span></span>|<span data-ttu-id="83465-133">ClassID</span><span class="sxs-lookup"><span data-stu-id="83465-133">ClassID</span></span>|<span data-ttu-id="83465-134">Location</span><span class="sxs-lookup"><span data-stu-id="83465-134">Location</span></span>|  
|------------------|------------|-------------|--------------|  
|<span data-ttu-id="83465-135">テキスト ファイル</span><span class="sxs-lookup"><span data-stu-id="83465-135">Text file</span></span>|<span data-ttu-id="83465-136">DTS.LogProviderTextFile</span><span class="sxs-lookup"><span data-stu-id="83465-136">DTS.LogProviderTextFile</span></span>|<span data-ttu-id="83465-137">{0A039101-ACC1-4E06-943F-279948323883}</span><span class="sxs-lookup"><span data-stu-id="83465-137">{0A039101-ACC1-4E06-943F-279948323883}</span></span>|<span data-ttu-id="83465-138">ログ プロバイダーが使用するファイル接続マネージャーでテキスト ファイルのパスを指定します。</span><span class="sxs-lookup"><span data-stu-id="83465-138">The File connection manager that the log provider uses specifies the path of the text file.</span></span>|  
|<span data-ttu-id="83465-139">SQL Server プロファイラー</span><span class="sxs-lookup"><span data-stu-id="83465-139">SQL Server Profiler</span></span>|<span data-ttu-id="83465-140">DTS.LogProviderSQLProfiler</span><span class="sxs-lookup"><span data-stu-id="83465-140">DTS.LogProviderSQLProfiler</span></span>|<span data-ttu-id="83465-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span><span class="sxs-lookup"><span data-stu-id="83465-141">{E93F6300-AE0C-4916-A7BF-A8D0CE12C77A}</span></span>|<span data-ttu-id="83465-142">ログ プロバイダーが使用するファイル接続マネージャーで [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]が使用するファイルのパスを指定します。</span><span class="sxs-lookup"><span data-stu-id="83465-142">The File connection manager that the log provider uses specifies the path of the file used by [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)].</span></span>|  
|<span data-ttu-id="83465-143">SQL Server</span><span class="sxs-lookup"><span data-stu-id="83465-143">SQL Server</span></span>|<span data-ttu-id="83465-144">DTS.LogProviderSQLServer</span><span class="sxs-lookup"><span data-stu-id="83465-144">DTS.LogProviderSQLServer</span></span>|<span data-ttu-id="83465-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span><span class="sxs-lookup"><span data-stu-id="83465-145">{94150B25-6AEB-4C0D-996D-D37D1C4FDEDA}</span></span>|<span data-ttu-id="83465-146">ログ プロバイダーが使用する OLE DB 接続マネージャーで、ログ エントリ用の sysssislog テーブルを格納する [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースを指定します。</span><span class="sxs-lookup"><span data-stu-id="83465-146">The OLE DB connection manager that the log provider uses specifies the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database that contains the sysssislog table with the log entries.</span></span>|  
|<span data-ttu-id="83465-147">Windows イベント ログ</span><span class="sxs-lookup"><span data-stu-id="83465-147">Windows Event Log</span></span>|<span data-ttu-id="83465-148">DTS.LogProviderEventLog</span><span class="sxs-lookup"><span data-stu-id="83465-148">DTS.LogProviderEventLog</span></span>|<span data-ttu-id="83465-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span><span class="sxs-lookup"><span data-stu-id="83465-149">{071CC8EB-C343-4CFF-8D58-564B92FCA3CF}</span></span>|<span data-ttu-id="83465-150">Windows イベント ビューアーのアプリケーション ログには、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] のログ情報が表示されます。</span><span class="sxs-lookup"><span data-stu-id="83465-150">The Application log in Windows Event Viewer contains the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log information.</span></span>|  
|<span data-ttu-id="83465-151">XML ファイル</span><span class="sxs-lookup"><span data-stu-id="83465-151">XML File</span></span>|<span data-ttu-id="83465-152">DTS.LogProviderXMLFile</span><span class="sxs-lookup"><span data-stu-id="83465-152">DTS.LogProviderXMLFile</span></span>|<span data-ttu-id="83465-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span><span class="sxs-lookup"><span data-stu-id="83465-153">{440945A4-2A22-4F19-B577-EAF5FDDC5F7A}</span></span>|<span data-ttu-id="83465-154">ログ プロバイダーが使用するファイル接続マネージャーで XML ファイルのパスを指定します。</span><span class="sxs-lookup"><span data-stu-id="83465-154">The File connection manager that the log provider uses specifies the path of the XML file.</span></span>|  
  
 <span data-ttu-id="83465-155">また、カスタム ログ プロバイダーを作成することもできます。</span><span class="sxs-lookup"><span data-stu-id="83465-155">You can also create custom log providers.</span></span> <span data-ttu-id="83465-156">詳細については、「 [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-156">For more information, see [Creating a Custom Log Provider](../extending-packages-custom-objects/log-provider/creating-a-custom-log-provider.md).</span></span>  
  
 <span data-ttu-id="83465-157">パッケージ内のログ プロバイダーは、パッケージのログ プロバイダー コレクションのメンバーです。</span><span class="sxs-lookup"><span data-stu-id="83465-157">The log providers in a package are members of the log providers collection of the package.</span></span> <span data-ttu-id="83465-158">[!INCLUDE[ssIS](../../includes/ssis-md.md)] デザイナーを使用してパッケージを作成し、ログ記録を実装する際、 **デザイナーの** [パッケージ エクスプローラー] **タブ上の** [ログ プロバイダー] [!INCLUDE[ssIS](../../includes/ssis-md.md)] フォルダーに、コレクション メンバーの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="83465-158">When you create a package and implement logging by using [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you can see a list of the collection members in the **Log Provider** folders on the **Package Explorer** tab of [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
 <span data-ttu-id="83465-159">ログ プロバイダーを構成するには、ログ プロバイダーの名前と説明を入力し、ログ プロバイダーが使用する接続マネージャーを指定します。</span><span class="sxs-lookup"><span data-stu-id="83465-159">You configure a log provider by providing a name and description for the log provider and specifying the connection manager that the log provider uses.</span></span> <span data-ttu-id="83465-160">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のログ プロバイダーでは、OLE DB 接続マネージャーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="83465-160">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] log provider uses an OLE DB connection manager.</span></span> <span data-ttu-id="83465-161">テキスト ファイル、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]、および XML ファイルのログ プロバイダーでは、ファイル接続マネージャーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="83465-161">The Text File, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], and XML File log providers all use File connection managers.</span></span> <span data-ttu-id="83465-162">Windows イベント ログのログ プロバイダーでは、Windows イベント ログに直接書き込まれるので、接続マネージャーが使用されません。</span><span class="sxs-lookup"><span data-stu-id="83465-162">The Windows Event log provider does not use a connection manager, because it writes directly to the Windows Event log.</span></span> <span data-ttu-id="83465-163">詳細については、「 [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) 」および「 [File Connection Manager](../connection-manager/file-connection-manager.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-163">For more information, see [OLE DB Connection Manager](../connection-manager/ole-db-connection-manager.md) and [File Connection Manager](../connection-manager/file-connection-manager.md).</span></span>  
  
### <a name="logging-customization"></a><span data-ttu-id="83465-164">ログ記録のカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="83465-164">Logging Customization</span></span>  
 <span data-ttu-id="83465-165">イベント メッセージまたはカスタム メッセージのログ機能をカスタマイズするために、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] には、ログ エントリに通常書き込まれる情報のスキーマが用意されています。</span><span class="sxs-lookup"><span data-stu-id="83465-165">To customize the logging of an event or custom message, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] provides a schema of commonly logged information to include in log entries.</span></span> <span data-ttu-id="83465-166">[!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] のログ スキーマは、ログ記録できる情報を定義します。</span><span class="sxs-lookup"><span data-stu-id="83465-166">The [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] log schema defines the information that you can log.</span></span> <span data-ttu-id="83465-167">ログ エントリごとにログ スキーマから要素を選択します。</span><span class="sxs-lookup"><span data-stu-id="83465-167">You can select elements from the log schema for each log entry.</span></span>  
  
 <span data-ttu-id="83465-168">パッケージおよびパッケージ内のコンテナーやタスクが、同じ情報をログ記録する必要はありません。また、同一パッケージやコンテナーのタスクが別々の情報をログ記録することができます。</span><span class="sxs-lookup"><span data-stu-id="83465-168">A package and its containers and tasks do not have to log the same information, and tasks within the same package or container can log different information.</span></span> <span data-ttu-id="83465-169">たとえば、パッケージではパッケージが開始されたときにオペレーターに関する情報をログに書き込み、あるタスクではタスク失敗の原因を書き込み、別のタスクではエラー発生時に情報を書き込むという処理が可能です。</span><span class="sxs-lookup"><span data-stu-id="83465-169">For example, a package can log operator information when the package starts, one task can log the source of the task's failure, and another task can log information when errors occur.</span></span> <span data-ttu-id="83465-170">パッケージおよびパッケージ内のコンテナーやタスクが複数のログを使用する場合、同じ情報がすべてのログに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="83465-170">If a package and its containers and tasks use multiple logs, the same information is written to all the logs.</span></span>  
  
 <span data-ttu-id="83465-171">ログ記録するイベントと各イベントに対して書き込む情報を指定して、必要に応じたログ記録のレベルを選択できます。</span><span class="sxs-lookup"><span data-stu-id="83465-171">You can select a level of logging that suits your needs by specifying the events to log and the information to log for each event.</span></span> <span data-ttu-id="83465-172">これにより、他のイベントに比べて有益な情報が得られるイベントがわかります。</span><span class="sxs-lookup"><span data-stu-id="83465-172">You may find that some events provide more useful information than others.</span></span> <span data-ttu-id="83465-173">たとえば、 **PreExecute** イベントについてはコンピューター名とオペレーター名のみをログ記録し、 **Error** イベントについては利用可能なすべての情報を記録するとよいでしょう。</span><span class="sxs-lookup"><span data-stu-id="83465-173">For example, you might want to log only the computer and operator names for the **PreExecute** event but all available information for the **Error** event.</span></span>  
  
 <span data-ttu-id="83465-174">ログ ファイルがディスク領域を大量に消費したり、過剰にログが記録されたりするとパフォーマンスが低下します。これを防止するため、特定のイベントとログ記録する情報項目を選択して、ログ記録を制限することができます。</span><span class="sxs-lookup"><span data-stu-id="83465-174">To prevent log files from using large amounts of disk space, or to avoid excessive logging, which could degrade performance, you can limit logging by selecting specific events and information items to log.</span></span> <span data-ttu-id="83465-175">たとえば、エラーが発生した日付とコンピューター名のみを記録するようにログを設定できます。</span><span class="sxs-lookup"><span data-stu-id="83465-175">For example, you can configure a log to capture only the date and the computer name for each error.</span></span>  
  
 <span data-ttu-id="83465-176">[!INCLUDE[ssIS](../../includes/ssis-md.md)] デザイナーの **[SSIS ログの構成]** ダイアログ ボックスを使用して、ログ オプションを定義できます。</span><span class="sxs-lookup"><span data-stu-id="83465-176">In [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer, you define the logging options by using the **Configure SSIS Logs** dialog box.</span></span>  
  
#### <a name="log-schema"></a><span data-ttu-id="83465-177">ログ スキーマ</span><span class="sxs-lookup"><span data-stu-id="83465-177">Log Schema</span></span>  
 <span data-ttu-id="83465-178">次の表に、ログ スキーマの要素を示します。</span><span class="sxs-lookup"><span data-stu-id="83465-178">The following table describes the elements in the log schema.</span></span>  
  
|<span data-ttu-id="83465-179">要素</span><span class="sxs-lookup"><span data-stu-id="83465-179">Element</span></span>|<span data-ttu-id="83465-180">説明</span><span class="sxs-lookup"><span data-stu-id="83465-180">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="83465-181">Computer</span><span class="sxs-lookup"><span data-stu-id="83465-181">Computer</span></span>|<span data-ttu-id="83465-182">ログ イベントが発生したコンピューターの名前。</span><span class="sxs-lookup"><span data-stu-id="83465-182">The name of the computer on which the log event occurred.</span></span>|  
|<span data-ttu-id="83465-183">演算子</span><span class="sxs-lookup"><span data-stu-id="83465-183">Operator</span></span>|<span data-ttu-id="83465-184">パッケージを起動したユーザーの ID。</span><span class="sxs-lookup"><span data-stu-id="83465-184">The identity of the user who launched the package.</span></span>|  
|<span data-ttu-id="83465-185">SourceName</span><span class="sxs-lookup"><span data-stu-id="83465-185">SourceName</span></span>|<span data-ttu-id="83465-186">ログ イベントが発生したコンテナーまたはタスクの名前。</span><span class="sxs-lookup"><span data-stu-id="83465-186">The name of the container or task in which the log event occurred.</span></span>|  
|<span data-ttu-id="83465-187">[SourceID]</span><span class="sxs-lookup"><span data-stu-id="83465-187">SourceID</span></span>|<span data-ttu-id="83465-188">ログ イベントが発生したパッケージ、For ループ コンテナー、Foreach ループ コンテナー、シーケンス コンテナー、またはタスクの一意識別子。</span><span class="sxs-lookup"><span data-stu-id="83465-188">The unique identifier of the package; the For Loop, Foreach Loop, or Sequence container; or the task in which the log event occurred.</span></span>|  
|<span data-ttu-id="83465-189">[ExecutionID]</span><span class="sxs-lookup"><span data-stu-id="83465-189">ExecutionID</span></span>|<span data-ttu-id="83465-190">パッケージ実行インスタンスの GUID。</span><span class="sxs-lookup"><span data-stu-id="83465-190">The GUID of the package execution instance.</span></span><br /><br /> <span data-ttu-id="83465-191">注: 単一のパッケージを実行すると、ExecutionID 要素の値が異なるログ エントリが作成される場合があります。</span><span class="sxs-lookup"><span data-stu-id="83465-191">Note: Running a single package might create log entries with different values for the ExecutionID element.</span></span> <span data-ttu-id="83465-192">たとえば、 [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]で 1 つのパッケージを実行すると、検証フェーズでは [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)]に対応する ExecutionID 要素を持つログ エントリが作成されます。</span><span class="sxs-lookup"><span data-stu-id="83465-192">For example, when you run a package in [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)], the validation phase might create log entries with an ExecutionID element that corresponds to [!INCLUDE[ssBIDevStudio](../../includes/ssbidevstudio-md.md)].</span></span> <span data-ttu-id="83465-193">一方、実行フェーズでは、dtshost.exe に対応する ExecutionID 要素を持つログ エントリが作成されます。</span><span class="sxs-lookup"><span data-stu-id="83465-193">However, the execution phase might create log entries with an ExecutionID element that corresponds to dtshost.exe.</span></span> <span data-ttu-id="83465-194">また、パッケージ実行タスクを含むパッケージを実行すると、これらの各タスクで子パッケージが実行されます。</span><span class="sxs-lookup"><span data-stu-id="83465-194">For another example, when you run a package that contains Execute Package tasks, each of these tasks runs a child package.</span></span> <span data-ttu-id="83465-195">これらの子パッケージでは、親パッケージが作成するログ エントリとは異なる ExecutionID 要素を持つログ エントリが作成される場合があります。</span><span class="sxs-lookup"><span data-stu-id="83465-195">These child packages might create log entries that have a different ExecutionID element than the log entries that the parent package creates.</span></span>|  
|<span data-ttu-id="83465-196">[MessageText]</span><span class="sxs-lookup"><span data-stu-id="83465-196">MessageText</span></span>|<span data-ttu-id="83465-197">ログ エントリに関連付けられているメッセージ。</span><span class="sxs-lookup"><span data-stu-id="83465-197">A message associated with the log entry.</span></span>|  
|<span data-ttu-id="83465-198">[DataBytes]</span><span class="sxs-lookup"><span data-stu-id="83465-198">DataBytes</span></span>|<span data-ttu-id="83465-199">ログ エントリ固有のバイト配列。</span><span class="sxs-lookup"><span data-stu-id="83465-199">A byte array specific to the log entry.</span></span> <span data-ttu-id="83465-200">このフィールドの意味は、ログ エントリによって異なります。</span><span class="sxs-lookup"><span data-stu-id="83465-200">The meaning of this field varies by log entry.</span></span>|  
  
 <span data-ttu-id="83465-201">次の表は、 **[SSIS ログの構成]** ダイアログ ボックスの **[詳細]** タブでは利用できないログ スキーマ内の 3 つの追加要素について説明しています。</span><span class="sxs-lookup"><span data-stu-id="83465-201">The following table describes three additional elements in the log schema that are not available on the **Details** tab of the **Configure SSIS Logs** dialog box.</span></span>  
  
|<span data-ttu-id="83465-202">要素</span><span class="sxs-lookup"><span data-stu-id="83465-202">Element</span></span>|<span data-ttu-id="83465-203">説明</span><span class="sxs-lookup"><span data-stu-id="83465-203">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="83465-204">StartTime</span><span class="sxs-lookup"><span data-stu-id="83465-204">StartTime</span></span>|<span data-ttu-id="83465-205">コンテナーまたはタスクの実行が開始した時間。</span><span class="sxs-lookup"><span data-stu-id="83465-205">The time at which the container or task starts to run.</span></span>|  
|<span data-ttu-id="83465-206">EndTime</span><span class="sxs-lookup"><span data-stu-id="83465-206">EndTime</span></span>|<span data-ttu-id="83465-207">コンテナーまたはタスクの実行が停止した時間。</span><span class="sxs-lookup"><span data-stu-id="83465-207">The time at which the container or task stops running.</span></span>|  
|<span data-ttu-id="83465-208">DataCode</span><span class="sxs-lookup"><span data-stu-id="83465-208">DataCode</span></span>|<span data-ttu-id="83465-209">コンテナーまたはタスクの実行結果を示す <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> 列挙体の値を通常含んだ整数値 (省略可能)。</span><span class="sxs-lookup"><span data-stu-id="83465-209">An optional integer value that typically contains a value from the <xref:Microsoft.SqlServer.Dts.Runtime.DTSExecResult> enumeration that indicates the result of running the container or task:</span></span><br /><br /> <span data-ttu-id="83465-210">0 - 成功</span><span class="sxs-lookup"><span data-stu-id="83465-210">0 - Success</span></span><br /><br /> <span data-ttu-id="83465-211">1 - 失敗</span><span class="sxs-lookup"><span data-stu-id="83465-211">1 - Failure</span></span><br /><br /> <span data-ttu-id="83465-212">2 - 完了</span><span class="sxs-lookup"><span data-stu-id="83465-212">2 - Completed</span></span><br /><br /> <span data-ttu-id="83465-213">3 - キャンセル</span><span class="sxs-lookup"><span data-stu-id="83465-213">3 - Canceled</span></span>|  
  
##### <a name="log-entries"></a><span data-ttu-id="83465-214">ログ エントリ</span><span class="sxs-lookup"><span data-stu-id="83465-214">Log Entries</span></span>  
 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="83465-215">では、あらかじめ定義されたイベントのログ エントリをサポートし、多くの [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] オブジェクトにカスタム ログ エントリを提供します。</span><span class="sxs-lookup"><span data-stu-id="83465-215">supports log entries on predefined events and provides custom log entries for many [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] objects.</span></span> <span data-ttu-id="83465-216">**デザイナーの** [SSIS ログの構成] [!INCLUDE[ssIS](../../includes/ssis-md.md)] ダイアログ ボックスに、これらのイベントとカスタム ログ エントリが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="83465-216">The **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer lists these events and custom log entries.</span></span>  
  
 <span data-ttu-id="83465-217">次の表に、実行時イベント発生時にログ エントリを書き込むために有効にできる、あらかじめ定義されたイベントを示します。</span><span class="sxs-lookup"><span data-stu-id="83465-217">The following table describes the predefined events that can be enabled to write log entries when run-time events occur.</span></span> <span data-ttu-id="83465-218">これらのログ エントリは、実行可能ファイル、パッケージ、そのパッケージに含まれるタスクおよびコンテナーに適用されます。</span><span class="sxs-lookup"><span data-stu-id="83465-218">These log entries apply to executables, the package, and the tasks and containers that the package includes.</span></span> <span data-ttu-id="83465-219">ログ エントリ名は、ログ エントリが書き込まれる原因となった、発生実行時イベントの名前と同じです。</span><span class="sxs-lookup"><span data-stu-id="83465-219">The name of the log entry is the same as the name of the run-time event that was raised and caused the log entry to be written.</span></span>  
  
|<span data-ttu-id="83465-220">events</span><span class="sxs-lookup"><span data-stu-id="83465-220">Events</span></span>|<span data-ttu-id="83465-221">説明</span><span class="sxs-lookup"><span data-stu-id="83465-221">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="83465-222">**OnError**</span><span class="sxs-lookup"><span data-stu-id="83465-222">**OnError**</span></span>|<span data-ttu-id="83465-223">エラー発生時にログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-223">Writes a log entry when an error occurs.</span></span>|  
|<span data-ttu-id="83465-224">**OnExecStatusChanged**</span><span class="sxs-lookup"><span data-stu-id="83465-224">**OnExecStatusChanged**</span></span>|<span data-ttu-id="83465-225">デバッグ中に (コンテナー以外の) タスクが中断または再開されたときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-225">Writes a log entry when a task (not a container) is suspended or resumed during debugging.</span></span>|  
|<span data-ttu-id="83465-226">**OnInformation**</span><span class="sxs-lookup"><span data-stu-id="83465-226">**OnInformation**</span></span>|<span data-ttu-id="83465-227">実行可能ファイルの検証および実行中に、情報を報告するログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-227">Writes a log entry during the validation and execution of an executable to report information.</span></span>|  
|<span data-ttu-id="83465-228">**OnPostExecute**</span><span class="sxs-lookup"><span data-stu-id="83465-228">**OnPostExecute**</span></span>|<span data-ttu-id="83465-229">実行可能ファイルの実行が終了した直後にログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-229">Writes a log entry immediately after the executable has finished running.</span></span>|  
|<span data-ttu-id="83465-230">**OnPostValidate**</span><span class="sxs-lookup"><span data-stu-id="83465-230">**OnPostValidate**</span></span>|<span data-ttu-id="83465-231">実行可能ファイルの検証が終了したときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-231">Writes a log entry when the validation of the executable finishes.</span></span>|  
|<span data-ttu-id="83465-232">**OnPreExecute**</span><span class="sxs-lookup"><span data-stu-id="83465-232">**OnPreExecute**</span></span>|<span data-ttu-id="83465-233">実行可能ファイルの実行直前にログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-233">Writes a log entry immediately before the executable runs.</span></span>|  
|<span data-ttu-id="83465-234">**OnPreValidate**</span><span class="sxs-lookup"><span data-stu-id="83465-234">**OnPreValidate**</span></span>|<span data-ttu-id="83465-235">実行可能ファイルの検証が開始される前にログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-235">Writes a log entry when the validation of the executable starts.</span></span>|  
|<span data-ttu-id="83465-236">**OnProgress**</span><span class="sxs-lookup"><span data-stu-id="83465-236">**OnProgress**</span></span>|<span data-ttu-id="83465-237">実行可能ファイルの処理で測定可能な進捗があったときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-237">Writes a log entry when measurable progress is made by the executable.</span></span>|  
|<span data-ttu-id="83465-238">**OnQueryCancel**</span><span class="sxs-lookup"><span data-stu-id="83465-238">**OnQueryCancel**</span></span>|<span data-ttu-id="83465-239">タスク処理中に、実行のキャンセルが可能な時点に達したときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-239">Writes a log entry at any juncture in the task processing where it is feasible to cancel execution.</span></span>|  
|<span data-ttu-id="83465-240">**OnTaskFailed**</span><span class="sxs-lookup"><span data-stu-id="83465-240">**OnTaskFailed**</span></span>|<span data-ttu-id="83465-241">タスクが失敗したときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-241">Writes a log entry when a task fails.</span></span>|  
|<span data-ttu-id="83465-242">**OnVariableValueChanged**</span><span class="sxs-lookup"><span data-stu-id="83465-242">**OnVariableValueChanged**</span></span>|<span data-ttu-id="83465-243">変数の値が変更されたときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-243">Writes a log entry when the value of a variable changes.</span></span>|  
|<span data-ttu-id="83465-244">**OnWarning**</span><span class="sxs-lookup"><span data-stu-id="83465-244">**OnWarning**</span></span>|<span data-ttu-id="83465-245">警告が発生したときにログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-245">Writes a log entry when a warning occurs.</span></span>|  
|<span data-ttu-id="83465-246">**PipelineComponentTime**</span><span class="sxs-lookup"><span data-stu-id="83465-246">**PipelineComponentTime**</span></span>|<span data-ttu-id="83465-247">各データ フロー コンポーネントに対する検証および実行の各フェーズのログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-247">For each data flow component, writes a log entry for each phase of validation and execution.</span></span> <span data-ttu-id="83465-248">ログ エントリは、各フェーズの処理時間を示します。</span><span class="sxs-lookup"><span data-stu-id="83465-248">The log entry specifies the processing time for each phase.</span></span>|  
|<span data-ttu-id="83465-249">**Diagnostic**</span><span class="sxs-lookup"><span data-stu-id="83465-249">**Diagnostic**</span></span>|<span data-ttu-id="83465-250">診断情報を提供するログ エントリを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="83465-250">Writes a log entry that provides diagnostic information.</span></span><br /><br /> <span data-ttu-id="83465-251">たとえば、外部データ プロバイダーを呼び出す前と後にメッセージをログに書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="83465-251">For example, you can log a message before and after every call to an external data provider.</span></span> <span data-ttu-id="83465-252">詳細については、「 [パッケージ実行のトラブルシューティング ツール](../troubleshooting/troubleshooting-tools-for-package-execution.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-252">For more information, see [Troubleshooting Tools for Package Execution](../troubleshooting/troubleshooting-tools-for-package-execution.md).</span></span>|  
  
 <span data-ttu-id="83465-253">パッケージおよび多くのタスクには、ログ機能を有効にできるカスタム ログ エントリがあります。</span><span class="sxs-lookup"><span data-stu-id="83465-253">The package and many tasks have custom log entries that can be enabled for logging.</span></span> <span data-ttu-id="83465-254">たとえば、メール送信タスクには **SendMailTaskBegin** カスタム ログ エントリがあります。これを使用すると、電子メール メッセージの送信前に、メール送信タスクの実行開始時の情報をログに書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="83465-254">For example, the Send Mail task provides the **SendMailTaskBegin** custom log entry, which logs information when the Send Mail task starts to run, but before the task sends an e-mail message.</span></span> <span data-ttu-id="83465-255">詳細については、「 [Custom Messages for Logging](../custom-messages-for-logging.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-255">For more information, see [Custom Messages for Logging](../custom-messages-for-logging.md).</span></span>  
  
### <a name="differentiating-package-copies"></a><span data-ttu-id="83465-256">パッケージのコピーの区別</span><span class="sxs-lookup"><span data-stu-id="83465-256">Differentiating Package Copies</span></span>  
 <span data-ttu-id="83465-257">ログ データには、ログ エントリが属しているパッケージの名前と GUID が含まれます。</span><span class="sxs-lookup"><span data-stu-id="83465-257">Log data includes the name and the GUID of the package to which the log entries belong.</span></span> <span data-ttu-id="83465-258">既存のパッケージをコピーして新しいパッケージを作成する場合、既存のパッケージの名前と GUID もコピーされます。</span><span class="sxs-lookup"><span data-stu-id="83465-258">If you create a new package by copying an existing package, the name and the GUID of the existing package are also copied.</span></span> <span data-ttu-id="83465-259">したがって、同じ GUID と名前が付いたパッケージが 2 つになり、ログ データ内のパッケージの区別が困難になります。</span><span class="sxs-lookup"><span data-stu-id="83465-259">As a result, you may have two packages that have the same GUID and name, making it difficult to differentiate between the packages in the log data.</span></span>  
  
 <span data-ttu-id="83465-260">このようなあいまいさを回避するには、新しいパッケージの名前と GUID を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83465-260">To eliminate this ambiguity, you should update the name and the GUID of the new packages.</span></span> <span data-ttu-id="83465-261">[!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] のプロパティ ウィンドウで、`ID` プロパティの GUID を再生成し、`Name` の値を更新できます。</span><span class="sxs-lookup"><span data-stu-id="83465-261">In [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)], you can regenerate the GUID in the `ID` property and update the value of the `Name` property in the Properties window.</span></span> <span data-ttu-id="83465-262">プログラムから、または **dtutil** コマンド プロンプトを使用して、GUID と名前を変更することもできます。</span><span class="sxs-lookup"><span data-stu-id="83465-262">You can also change the GUID and the name programmatically, or by using the **dtutil** command prompt.</span></span> <span data-ttu-id="83465-263">詳細については、「 [パッケージのプロパティを設定する](../set-package-properties.md) 」と「 [dtutil ユーティリティ](../dtutil-utility.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-263">For more information, see [Set Package Properties](../set-package-properties.md) and [dtutil Utility](../dtutil-utility.md).</span></span>  
  
### <a name="parent-logging-options"></a><span data-ttu-id="83465-264">親のログ オプション</span><span class="sxs-lookup"><span data-stu-id="83465-264">Parent Logging Options</span></span>  
 <span data-ttu-id="83465-265">一般的に、タスク、For ループ コンテナー、Foreach ループ コンテナー、シーケンス コンテナーのログ オプションは、それらが含まれているパッケージや親コンテナーのログ オプションと同じです。</span><span class="sxs-lookup"><span data-stu-id="83465-265">Frequently, the logging options of tasks and For Loop, Foreach Loop, and Sequence containers match those of the package or a parent container.</span></span> <span data-ttu-id="83465-266">この場合、親コンテナーからログ オプションを継承するように設定できます。</span><span class="sxs-lookup"><span data-stu-id="83465-266">In that case, you can configure them to inherit their logging options from their parent container.</span></span> <span data-ttu-id="83465-267">たとえば、SQL 実行タスクが含まれている For ループ コンテナーがある場合、SQL 実行タスクでは For ループ コンテナーに設定されたログ オプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="83465-267">For example, in a For Loop container that includes an Execute SQL task, the Execute SQL task can use the logging options that are set on the For Loop container.</span></span> <span data-ttu-id="83465-268">親のログ オプションを使用するには、コンテナーの LoggingMode プロパティを **UseParentSetting**に設定します。</span><span class="sxs-lookup"><span data-stu-id="83465-268">To use the parent logging options, you set the LoggingMode property of the container to **UseParentSetting**.</span></span> <span data-ttu-id="83465-269">このプロパティは、 **の** [プロパティ] [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] ウィンドウ、または **デザイナーの** [SSIS ログの構成] [!INCLUDE[ssIS](../../includes/ssis-md.md)] ダイアログ ボックスで設定できます。</span><span class="sxs-lookup"><span data-stu-id="83465-269">You can set this property in the **Properties** window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)] or through the **Configure SSIS Logs** dialog box in [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer.</span></span>  
  
### <a name="logging-templates"></a><span data-ttu-id="83465-270">ログのテンプレート</span><span class="sxs-lookup"><span data-stu-id="83465-270">Logging Templates</span></span>  
 <span data-ttu-id="83465-271">**[SSIS ログの構成]** ダイアログ ボックスでは、頻繁に使用するログ構成をテンプレートとして作成および保存して、複数のパッケージでそのテンプレート使用できます。</span><span class="sxs-lookup"><span data-stu-id="83465-271">In the **Configure SSIS Logs** dialog box, you can also create and save frequently used logging configurations as templates, and then use the templates in multiple packages.</span></span> <span data-ttu-id="83465-272">これにより、複数のパッケージで一貫したログ記録の方法を簡単に使用でき、テンプレートを更新して適用することによって簡単にパッケージのログ設定を修正できます。</span><span class="sxs-lookup"><span data-stu-id="83465-272">This makes it easy to apply a consistent logging strategy across multiple packages and to modify log settings on packages by updating and then applying the templates.</span></span> <span data-ttu-id="83465-273">テンプレートは XML ファイルとして格納されます。</span><span class="sxs-lookup"><span data-stu-id="83465-273">The templates are stored in XML files.</span></span>  
  
 <span data-ttu-id="83465-274">**[SSIS ログの構成] ダイアログ ボックスを使用してログ機能を設定するには**</span><span class="sxs-lookup"><span data-stu-id="83465-274">**To configure logging using the Configure SSIS Logs dialog box**</span></span>  
  
1.  <span data-ttu-id="83465-275">パッケージおよびタスクのログ記録を有効にします。</span><span class="sxs-lookup"><span data-stu-id="83465-275">Enable the package and its tasks for logging.</span></span> <span data-ttu-id="83465-276">ログは、パッケージ レベル、コンテナー レベル、またはタスク レベルで記録できます。</span><span class="sxs-lookup"><span data-stu-id="83465-276">Logging can occur at the package, the container, and the task level.</span></span> <span data-ttu-id="83465-277">パッケージ、コンテナー、タスクに対して、それぞれ異なるログを指定できます。</span><span class="sxs-lookup"><span data-stu-id="83465-277">You can specify different logs for packages, containers, and tasks.</span></span>  
  
2.  <span data-ttu-id="83465-278">ログ プロバイダーを選択して、パッケージのログを追加します。</span><span class="sxs-lookup"><span data-stu-id="83465-278">Select a log provider and add a log for the package.</span></span> <span data-ttu-id="83465-279">ログはパッケージ レベルでのみ作成可能で、タスクやコンテナーではパッケージで作成されたログのいずれかを使用します。</span><span class="sxs-lookup"><span data-stu-id="83465-279">Logs can be created only at the package level, and a task or container must use one of the logs created for the package.</span></span> <span data-ttu-id="83465-280">各ログは、テキスト ファイル、 [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)]、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]、Windows のイベント ログ、または XML ファイルのいずれかのログ プロバイダーに関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="83465-280">Each log is associated with one of the following log providers: Text file, [!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)], [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Windows Event Log, or XML file.</span></span> <span data-ttu-id="83465-281">詳細については、「 [SQL Server Data Tools でパッケージのログ記録を有効にする](../enable-package-logging-in-sql-server-data-tools.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-281">For more information, see [Enable Package Logging in SQL Server Data Tools](../enable-package-logging-in-sql-server-data-tools.md).</span></span>  
  
3.  <span data-ttu-id="83465-282">ログに取り込むイベントと、各イベントのログ スキーマ情報を選択します。</span><span class="sxs-lookup"><span data-stu-id="83465-282">Select the events and the log schema information about each event you want to capture in the log.</span></span> <span data-ttu-id="83465-283">詳細については、「 [保存されている構成ファイルを使用してログ記録を構成する](../configure-logging-by-using-a-saved-configuration-file.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-283">For more information, see [Configure Logging by Using a Saved Configuration File](../configure-logging-by-using-a-saved-configuration-file.md).</span></span>  
  
### <a name="configuration-of-log-provider"></a><span data-ttu-id="83465-284">ログ プロバイダーの構成</span><span class="sxs-lookup"><span data-stu-id="83465-284">Configuration of Log Provider</span></span>  
 <span data-ttu-id="83465-285">プロパティを設定するには [!INCLUDE[ssIS](../../includes/ssis-md.md)] デザイナーから行うか、またはプログラムによって設定します。</span><span class="sxs-lookup"><span data-stu-id="83465-285">You can set properties through [!INCLUDE[ssIS](../../includes/ssis-md.md)] Designer or programmatically.</span></span>  
  
 <span data-ttu-id="83465-286">ログ プロバイダーは、パッケージにログ記録を実装する手順の中で作成して構成します。</span><span class="sxs-lookup"><span data-stu-id="83465-286">A log provider is created and configured as a step in implementing logging in a package.</span></span> <span data-ttu-id="83465-287">詳細については、「 [Integration Services Logging](integration-services-ssis-logging.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-287">For more information, see [Integration Services Logging](integration-services-ssis-logging.md).</span></span>  
  
 <span data-ttu-id="83465-288">ログ プロバイダーを作成した後にプロパティを表示および変更するには、 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]のプロパティ ウィンドウを使用します。</span><span class="sxs-lookup"><span data-stu-id="83465-288">After you create a log provider, you can view and modify its properties in the Properties window of [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)].</span></span>  
  
 <span data-ttu-id="83465-289">プログラムによってこれらのプロパティを設定する方法の詳細については、 <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> クラスのドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-289">For information about programmatically setting these properties, see the documentation for the <xref:Microsoft.SqlServer.Dts.Runtime.LogProvider> class.</span></span>  
  
### <a name="logging-for-data-flow-tasks"></a><span data-ttu-id="83465-290">データ フロー タスクのログ機能の構成</span><span class="sxs-lookup"><span data-stu-id="83465-290">Logging for Data Flow Tasks</span></span>  
 <span data-ttu-id="83465-291">データ フロー タスクには、パフォーマンスの監視と調整に使用できるカスタム ログ エントリが数多くあります。</span><span class="sxs-lookup"><span data-stu-id="83465-291">The Data Flow task provides many custom log entries that can be used to monitor and adjust performance.</span></span> <span data-ttu-id="83465-292">たとえば、メモリ リークを起こす可能性のあるコンポーネントを監視したり、特定のコンポーネントの実行所要時間を追跡できます。</span><span class="sxs-lookup"><span data-stu-id="83465-292">For example, you can monitor components that might cause memory leaks, or keep track of how long it takes to run a particular component.</span></span> <span data-ttu-id="83465-293">カスタム ログ エントリの一覧とサンプルのログ出力については、「 [Data Flow Task](../control-flow/data-flow-task.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-293">For a list of these custom log entries and sample logging output, see [Data Flow Task](../control-flow/data-flow-task.md).</span></span>  
  
#### <a name="use-the-pipelinecomponenttime-event"></a><span data-ttu-id="83465-294">PipelineComponentTime イベントの使用</span><span class="sxs-lookup"><span data-stu-id="83465-294">Use the PipelineComponentTime Event</span></span>  
 <span data-ttu-id="83465-295">カスタム ログ エントリの中で最も役に立つのは、PipelineComponentTime イベントです。</span><span class="sxs-lookup"><span data-stu-id="83465-295">Perhaps the most useful custom log entry is the PipelineComponentTime event.</span></span> <span data-ttu-id="83465-296">このログ エントリは、データ フローの各コンポーネントが主要な 5 つの処理手順それぞれで要するミリ秒数を報告します。</span><span class="sxs-lookup"><span data-stu-id="83465-296">This log entry reports the number of milliseconds that each component in the data flow spends on each of the five major processing steps.</span></span> <span data-ttu-id="83465-297">次の表で、これらの処理手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="83465-297">The following table describes these processing steps.</span></span> [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] <span data-ttu-id="83465-298">の開発者は、これらの手順を <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="83465-298">developers will recognize these steps as the principal methods of a <xref:Microsoft.SqlServer.Dts.Pipeline.PipelineComponent>.</span></span>  
  
|<span data-ttu-id="83465-299">手順</span><span class="sxs-lookup"><span data-stu-id="83465-299">Step</span></span>|<span data-ttu-id="83465-300">説明</span><span class="sxs-lookup"><span data-stu-id="83465-300">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="83465-301">検証</span><span class="sxs-lookup"><span data-stu-id="83465-301">Validate</span></span>|<span data-ttu-id="83465-302">コンポーネントは、有効なプロパティ値と構成設定を確認します。</span><span class="sxs-lookup"><span data-stu-id="83465-302">The component checks for valid property values and configuration settings.</span></span>|  
|<span data-ttu-id="83465-303">PreExecute</span><span class="sxs-lookup"><span data-stu-id="83465-303">PreExecute</span></span>|<span data-ttu-id="83465-304">コンポーネントは、データ行の処理を開始する前に 1 回限りの処理を実行します。</span><span class="sxs-lookup"><span data-stu-id="83465-304">The component performs one-time processing before it starts to process rows of data.</span></span>|  
|<span data-ttu-id="83465-305">PostExecute</span><span class="sxs-lookup"><span data-stu-id="83465-305">PostExecute</span></span>|<span data-ttu-id="83465-306">コンポーネントは、すべてのデータ行を処理した後に 1 回限りの処理を実行します。</span><span class="sxs-lookup"><span data-stu-id="83465-306">The component performs one-time processing after it has processed all rows of data.</span></span>|  
|<span data-ttu-id="83465-307">ProcessInput</span><span class="sxs-lookup"><span data-stu-id="83465-307">ProcessInput</span></span>|<span data-ttu-id="83465-308">変換コンポーネントまたは変換先コンポーネントは、上流変換元または変換から渡されたデータの受信行を処理します。</span><span class="sxs-lookup"><span data-stu-id="83465-308">The transformation or destination component processes the incoming rows of data that an upstream source or transformation has passed to it.</span></span>|  
|<span data-ttu-id="83465-309">PrimeOutput</span><span class="sxs-lookup"><span data-stu-id="83465-309">PrimeOutput</span></span>|<span data-ttu-id="83465-310">変換元コンポーネントまたは変換コンポーネントは、下流変換コンポーネントまたは変換先コンポーネントに渡されるデータのバッファーを入力します。</span><span class="sxs-lookup"><span data-stu-id="83465-310">The source or transformation component fills the buffers of data to be passed to a downstream transformation or destination component.</span></span>|  
  
 <span data-ttu-id="83465-311">PipelineComponentTime イベントを有効にすると、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] では、各コンポーネントが実行した処理手順ごとに 1 つのメッセージをログに記録します。</span><span class="sxs-lookup"><span data-stu-id="83465-311">When you enable the PipelineComponentTime event, [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] logs one message for each processing step performed by each component.</span></span> <span data-ttu-id="83465-312">以下のログ エントリに、 [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns パッケージ サンプルでログに記録されるメッセージのサブセットを示します。</span><span class="sxs-lookup"><span data-stu-id="83465-312">The following log entries show a subset of the messages that the [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] CalculatedColumns package sample logs:</span></span>  
  
 `The component "Calculate LineItemTotalCost" (3522) spent 356 milliseconds in ProcessInput.`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 79 milliseconds in ProcessInput.`  
  
 `The component "Calculate Average Cost" (3662) spent 16 milliseconds in ProcessInput.`  
  
 `The component "Sort by ProductID" (3717) spent 125 milliseconds in ProcessInput.`  
  
 `The component "Load Data" (3773) spent 0 milliseconds in ProcessInput.`  
  
 `The component "Extract Data" (3869) spent 688 milliseconds in PrimeOutput filling buffers on output "OLE DB Source Output" (3879).`  
  
 `The component "Sum Quantity and LineItemTotalCost" (3619) spent 141 milliseconds in PrimeOutput filling buffers on output "Aggregate Output 1" (3621).`  
  
 `The component "Sort by ProductID" (3717) spent 16 milliseconds in PrimeOutput filling buffers on output "Sort Output" (3719).`  
  
 <span data-ttu-id="83465-313">これらのログ エントリは、データ フロー タスクが、次の手順にほとんどの時間を要することを示しています。ここでは、手順を降順に示します。</span><span class="sxs-lookup"><span data-stu-id="83465-313">These log entries show that the data flow task spent the most time on the following steps, shown here in descending order:</span></span>  
  
-   <span data-ttu-id="83465-314">"Extract Data" という名前の OLE DB ソースは、データの読み込みに 688 ミリ秒費やしました。</span><span class="sxs-lookup"><span data-stu-id="83465-314">The OLE DB source that is named "Extract Data" spent 688 ms.</span></span> <span data-ttu-id="83465-315">データの読み込み</span><span class="sxs-lookup"><span data-stu-id="83465-315">loading data.</span></span>  
  
-   <span data-ttu-id="83465-316">"Calculate LineItemTotalCost" という名前の派生列変換は、</span><span class="sxs-lookup"><span data-stu-id="83465-316">The Derived Column transformation that is named "Calculate LineItemTotalCost" spent 356 ms.</span></span> <span data-ttu-id="83465-317">受信行での計算の実行に 356 ミリ秒費やしました。</span><span class="sxs-lookup"><span data-stu-id="83465-317">performing calculations on incoming rows.</span></span>  
  
-   <span data-ttu-id="83465-318">"Sum Quantity and LineItemTotalCost" という名前の集計変換は、計算の実行と次の変換へのデータの受け渡しに合計 220 ミリ秒 (PrimeOutput に 141 ミリ秒、ProcessInput に 79 秒) 費やしました。</span><span class="sxs-lookup"><span data-stu-id="83465-318">The Aggregate transformation that is named "Sum Quantity and LineItemTotalCost" spent a combined 220 ms-141 in PrimeOutput and 79 in ProcessInput-performing calculations and passing the data to the next transformation.</span></span>  
  
## <a name="related-tasks"></a><span data-ttu-id="83465-319">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="83465-319">Related Tasks</span></span>  
 <span data-ttu-id="83465-320">次の一覧では、ログ記録機能に関連するタスクの実行方法を示すトピックへのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="83465-320">The following list contains links to topics that show how to perform tasks related to the logging feature.</span></span>  
  
-   <span data-ttu-id="83465-321">[[SSIS ログの構成] ダイアログボックス](../configure-ssis-logs-dialog-box.md)</span><span class="sxs-lookup"><span data-stu-id="83465-321">[Configure SSIS Logs Dialog Box](../configure-ssis-logs-dialog-box.md)</span></span>  
  
-   [<span data-ttu-id="83465-322">SQL Server Data Tools でパッケージのログ記録を有効にする</span><span class="sxs-lookup"><span data-stu-id="83465-322">Enable Package Logging in SQL Server Data Tools</span></span>](../enable-package-logging-in-sql-server-data-tools.md)  
  
-   [<span data-ttu-id="83465-323">SSIS サーバーでのパッケージ実行のログ記録を有効にする</span><span class="sxs-lookup"><span data-stu-id="83465-323">Enable Logging for Package Execution on the SSIS Server</span></span>](../enable-logging-for-package-execution-on-the-ssis-server.md)  
  
-   <span data-ttu-id="83465-324">[[ログ イベント] ウィンドウでログ エントリを表示する](../view-log-entries-in-the-log-events-window.md)</span><span class="sxs-lookup"><span data-stu-id="83465-324">[View Log Entries in the Log Events Window](../view-log-entries-in-the-log-events-window.md)</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="83465-325">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="83465-325">Related Content</span></span>  
 [<span data-ttu-id="83465-326">完全かつ詳細なログ記録用の DTLoggedExec ツール (CodePlex プロジェクト)</span><span class="sxs-lookup"><span data-stu-id="83465-326">DTLoggedExec Tool for Full and Detail Logging (CodePlex Project)</span></span>](https://go.microsoft.com/fwlink/?LinkId=150579)  
  
## <a name="see-also"></a><span data-ttu-id="83465-327">参照</span><span class="sxs-lookup"><span data-stu-id="83465-327">See Also</span></span>  
 <span data-ttu-id="83465-328">[[ログ イベント] ウィンドウでログ エントリを表示する](../view-log-entries-in-the-log-events-window.md)</span><span class="sxs-lookup"><span data-stu-id="83465-328">[View Log Entries in the Log Events Window](../view-log-entries-in-the-log-events-window.md)</span></span>  
  
  
