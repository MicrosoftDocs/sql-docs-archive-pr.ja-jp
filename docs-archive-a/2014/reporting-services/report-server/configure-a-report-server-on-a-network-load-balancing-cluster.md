---
title: ネットワーク負荷分散クラスターにおけるレポート サーバーの構成 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: reporting-services-native
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], network load balancing
ms.assetid: 6bfa5698-de65-43c3-b940-044f41c162d3
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 5de36ab620db63294d2a5ec98fad6c45af201d26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87642567"
---
# <a name="configure-a-report-server-on-a-network-load-balancing-cluster"></a><span data-ttu-id="7a9f2-102">ネットワーク負荷分散クラスターにおけるレポート サーバーの構成</span><span class="sxs-lookup"><span data-stu-id="7a9f2-102">Configure a Report Server on a Network Load Balancing Cluster</span></span>
  <span data-ttu-id="7a9f2-103">レポート サーバーのスケールアウトをネットワーク負荷分散 (NLB) クラスターで実行するように構成する場合は、次の操作を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-103">If you are configuring a report server scale-out to run on a Network Load Balancing (NLB) cluster, you must do the following:</span></span>  
  
-   <span data-ttu-id="7a9f2-104">仮想サーバーの IP アドレスにマップされる仮想サーバー名を使用して NLB クラスターにアクセスできることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-104">Ensure that the NLB cluster is accessible through a virtual server name that maps to the virtual server IP address.</span></span> <span data-ttu-id="7a9f2-105">仮想サーバー名は、NLB クラスターに対して単一のエントリ ポイントを構成できるようにするために必要です。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-105">A virtual server name is necessary so that you can configure a single point of entry to the NLB cluster.</span></span> <span data-ttu-id="7a9f2-106">各レポート サーバー インスタンスの URL を構成するときに、仮想サーバー名をホストとして指定します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-106">When you configure a URL for each report server instance, you will specify the virtual server name as the host.</span></span>  
  
-   <span data-ttu-id="7a9f2-107">対話型レポートを表示できるようにビュー ステート検証を構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-107">Configure view state validation to support interactive report viewing.</span></span> <span data-ttu-id="7a9f2-108">対話型レポートは、通常、ユーザーの操作に応じて新しいデータやさまざまなデータをビジュアル化するために単一のユーザー セッション中に何回も表示されます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-108">Interactive reports are typically rendered numerous times during a single user session to visualize new or different data in response to user actions.</span></span> <span data-ttu-id="7a9f2-109">ビュー ステート検証を構成すると、どのレポート サーバーで実際の要求を処理するかに関係なく、ユーザー セッション中の継続性が維持されます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-109">By configuring view state validation, continuity is preserved within the user session regardless of which report server services the actual request.</span></span>  
  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="7a9f2-110">には、スケールアウト配置の負荷分散機能や共有 URL を使用した単一のアクセス ポイントの定義機能は用意されていません。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-110">does not provide functionality for load balancing a scale-out deployment or for defining a single point of access through a shared URL.</span></span> <span data-ttu-id="7a9f2-111">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] スケールアウト配置をサポートする別のソフトウェアまたはハードウェア NLB クラスター ソリューションを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-111">You must implement a separate software or hardware NLB cluster solution to support a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] scale-out deployment.</span></span>  
  
 <span data-ttu-id="7a9f2-112">既に NLB クラスターの一部であるノードに [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] をインストールするか、まずスケールアウト配置を構成してからクラスター ソフトウェアをインストールすることができます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-112">You can install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] on nodes that are already part of an NLB cluster, or you can configure a scale-out deployment first and then install cluster software.</span></span>  
  
## <a name="steps-for-report-server-deployment-on-an-nlb-cluster"></a><span data-ttu-id="7a9f2-113">NLB クラスターでのレポート サーバー配置の手順</span><span class="sxs-lookup"><span data-stu-id="7a9f2-113">Steps for Report Server Deployment on an NLB Cluster</span></span>  
 <span data-ttu-id="7a9f2-114">配置をインストールして構成するには、次のガイドラインに従ってください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-114">Use the following guidelines to install and configure your deployment:</span></span>  
  
|<span data-ttu-id="7a9f2-115">手順</span><span class="sxs-lookup"><span data-stu-id="7a9f2-115">Step</span></span>|<span data-ttu-id="7a9f2-116">説明</span><span class="sxs-lookup"><span data-stu-id="7a9f2-116">Description</span></span>|<span data-ttu-id="7a9f2-117">詳細情報</span><span class="sxs-lookup"><span data-stu-id="7a9f2-117">More information</span></span>|  
|----------|-----------------|----------------------|  
|<span data-ttu-id="7a9f2-118">1</span><span class="sxs-lookup"><span data-stu-id="7a9f2-118">1</span></span>|<span data-ttu-id="7a9f2-119">NLB クラスター内のサーバー ノードに Reporting Services をインストールする前に、スケールアウト配置の要件を確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-119">Before you install Reporting Services on server nodes in an NLB cluster, check the requirements for scale-out deployment.</span></span>|<span data-ttu-id="7a9f2-120">[SSRS Configuration Manager &#40;ネイティブモードのレポートサーバーのスケールアウト配置の構成&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]オンラインブック</span><span class="sxs-lookup"><span data-stu-id="7a9f2-120">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online</span></span>|  
|<span data-ttu-id="7a9f2-121">2</span><span class="sxs-lookup"><span data-stu-id="7a9f2-121">2</span></span>|<span data-ttu-id="7a9f2-122">NLB クラスターを構成し、正常に動作することを確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-122">Configure the NLB cluster and verify it is working correctly.</span></span><br /><br /> <span data-ttu-id="7a9f2-123">必ずホスト ヘッダー名を NLB クラスターの仮想サーバー IP にマップしてください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-123">Be sure to map a host header name to the virtual server IP of the NLB cluster.</span></span> <span data-ttu-id="7a9f2-124">ホスト ヘッダー名は、レポート サーバーの URL で使用されます。IP アドレスに比べて容易に記憶でき、入力も簡単です。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-124">The host header name is used in the report server URL, and is easier to remember and type than an IP address.</span></span>|<span data-ttu-id="7a9f2-125">詳細については、実行する Windows オペレーティング システムのバージョンの Windows Server の製品マニュアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-125">For more information, see the Windows Server product documentation for the version of the Windows operating system that you run.</span></span>|  
|<span data-ttu-id="7a9f2-126">3</span><span class="sxs-lookup"><span data-stu-id="7a9f2-126">3</span></span>|<span data-ttu-id="7a9f2-127">Windows レジストリに格納されている **BackConnectionHostNames** のリストに、ホスト ヘッダーの完全修飾ドメイン名 (FQDN) および NetBIOS 名を追加します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-127">Add the NetBIOS and Fully Qualified Domain Name (FQDN) for the host header to the list of **BackConnectionHostNames** stored in the Windows Registry.</span></span> <span data-ttu-id="7a9f2-128">[KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861) の「**方法 2: ホスト名を指定する**」の手順を、次のように調整して使用します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-128">Use the steps in **Method 2: Specify host names** in [KB 896861](https://support.microsoft.com/kb/896861) (https://support.microsoft.com/kb/896861), with the following adjustment.</span></span> <span data-ttu-id="7a9f2-129">サポート技術情報の資料の「レジストリ エディターを終了し、IISAdmin サービスを再開します」という**手順 7** の</span><span class="sxs-lookup"><span data-stu-id="7a9f2-129">**Step 7** of the KB article says "Quit Registry Editor, and then restart the IISAdmin service."</span></span> <span data-ttu-id="7a9f2-130">代わりに、変更が有効になるようにコンピューターを再起動します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-130">Instead, reboot the computer to ensure the changes take effect.</span></span><br /><br /> <span data-ttu-id="7a9f2-131">たとえば、ホストヘッダー名 \<MyServer> が Windows コンピューター名 "contoso" の仮想名である場合、FQDN 形式を "contoso.domain.com" として参照できます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-131">For example, if the host header name \<MyServer> is a virtual name for the Windows computer name of "contoso", you can probably reference the FQDN form as "contoso.domain.com".</span></span> <span data-ttu-id="7a9f2-132">ホスト ヘッダー名 (MyServer) と FQDN 名 (contoso.domain.com) の両方を **BackConnectionHostNames**の一覧に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-132">You will need to add both the hostheader name (MyServer ) and FQDN name (contoso.domain.com) to the list in **BackConnectionHostNames**.</span></span>|<span data-ttu-id="7a9f2-133">この手順は、サーバー環境のローカル コンピューターで NTLM 認証が行われていて、ループ バック接続が作成されている場合に必要になります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-133">This step is required if your server environment involves NTLM authentication on the local computer, creating a loop back connection.</span></span><br /><br /> <span data-ttu-id="7a9f2-134">この場合、レポート マネージャーとレポート サーバー間の要求が 401 (権限がありません) で失敗します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-134">If this is the case, you will experience the requests between Report Manager and Report Server to fail with 401 (Unauthorized).</span></span>|  
|<span data-ttu-id="7a9f2-135">4</span><span class="sxs-lookup"><span data-stu-id="7a9f2-135">4</span></span>|<span data-ttu-id="7a9f2-136">既に NLB クラスターの一部であるノードにファイルのみのモードで [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] をインストールし、スケールアウト配置のレポート サーバー インスタンスを構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-136">Install [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] in files-only mode on nodes that are already part of a NLB cluster, and configure the report server instances for scale-out deployment.</span></span><br /><br /> <span data-ttu-id="7a9f2-137">ここで構成したスケールアウトでは、仮想サーバー IP に送信される要求に応答できない場合があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-137">The scale-out that you configure might not respond to requests that are directed to the virtual server IP.</span></span> <span data-ttu-id="7a9f2-138">仮想サーバー IP を使用するようにスケールアウトを構成する手順は、この後でビュー ステート検証を構成してから行います。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-138">Configuring the scale-out to use the virtual server IP occurs at a later step, after you configure view state validation.</span></span>|[<span data-ttu-id="7a9f2-139">ネイティブ モード レポート サーバーのスケールアウト配置の構成 (SSRS 構成マネージャー)</span><span class="sxs-lookup"><span data-stu-id="7a9f2-139">Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;</span></span>](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md)|  
|<span data-ttu-id="7a9f2-140">5</span><span class="sxs-lookup"><span data-stu-id="7a9f2-140">5</span></span>|<span data-ttu-id="7a9f2-141">ビュー ステート検証を構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-141">Configure view state validation.</span></span><br /><br /> <span data-ttu-id="7a9f2-142">最適な結果を得るには、この手順は、スケールアウト配置を構成した後、仮想サーバー IP を使用するようにレポート サーバー インスタンスを構成する前に行います。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-142">For best results, perform this step after you configure the scale-out deployment, and before you configure the report server instances to use the virtual server IP.</span></span> <span data-ttu-id="7a9f2-143">ビュー ステート検証を先に構成することによって、ユーザーによる対話型レポートへのアクセス時に、ステート検証の失敗に関する例外を回避できます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-143">By configuring view state validation first, you can avoid exceptions about failed state validation when users attempt to access interactive reports.</span></span>|<span data-ttu-id="7a9f2-144">このトピックの「[ビュー ステート検証を構成する方法](#ViewState) 」</span><span class="sxs-lookup"><span data-stu-id="7a9f2-144">[How to Configure View State Validation](#ViewState) in this topic.</span></span>|  
|<span data-ttu-id="7a9f2-145">6</span><span class="sxs-lookup"><span data-stu-id="7a9f2-145">6</span></span>|<span data-ttu-id="7a9f2-146">NLB クラスターの仮想サーバー IP を使用するように `Hostname` と `UrlRoot` を構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-146">Configure `Hostname` and `UrlRoot` to use the virtual server IP of the NLB cluster.</span></span>|<span data-ttu-id="7a9f2-147">このトピックの「[Hostname と UrlRoot を構成する方法](#SpecifyingVirtualServerName) 」</span><span class="sxs-lookup"><span data-stu-id="7a9f2-147">[How to Configure Hostname and UrlRoot](#SpecifyingVirtualServerName) in this topic.</span></span>|  
|<span data-ttu-id="7a9f2-148">7</span><span class="sxs-lookup"><span data-stu-id="7a9f2-148">7</span></span>|<span data-ttu-id="7a9f2-149">指定したホスト名でサーバーにアクセスできることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-149">Verify the servers are accessible through the host name you specified.</span></span>|<span data-ttu-id="7a9f2-150">このトピックの「[レポート サーバーへのアクセスの確認](#Verify) 」</span><span class="sxs-lookup"><span data-stu-id="7a9f2-150">[Verify Report Server Access](#Verify) in this topic.</span></span>|  
  
##  <a name="how-to-configure-view-state-validation"></a><a name="ViewState"></a> <span data-ttu-id="7a9f2-151">ビュー ステート検証を構成する方法</span><span class="sxs-lookup"><span data-stu-id="7a9f2-151">How to Configure View State Validation</span></span>  
 <span data-ttu-id="7a9f2-152">NLB クラスターでスケールアウト配置を運用するには、ユーザーが対話型の HTML レポートを表示できるように、ビュー ステート検証を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-152">To run a scale-out deployment on an NLB cluster, you must configure view state validation so that users can view interactive HTML reports.</span></span> <span data-ttu-id="7a9f2-153">この構成をレポート サーバーとレポート マネージャーについて行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-153">You must do this for the report server and for Report Manager.</span></span>  
  
 <span data-ttu-id="7a9f2-154">ビュー ステート検証は、ASP.NET によって制御されます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-154">View state validation is controlled by the ASP.NET.</span></span> <span data-ttu-id="7a9f2-155">既定では、ビュー ステート検証は有効であり、Web サービスの ID を使用して検証を行います。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-155">By default, view state validation is enabled and uses the identity of the Web service to perform the validation.</span></span> <span data-ttu-id="7a9f2-156">ただし、NLB クラスターのシナリオでは、異なるコンピューターで実行される複数のサービス インスタンスと Web サービス ID が存在します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-156">However, in an NLB cluster scenario, there are multiple service instances and web service identities that run on different computers.</span></span> <span data-ttu-id="7a9f2-157">サービス ID はノードにより異なるので、単一のプロセス ID に依存して検証を行うことはできません。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-157">Because the service identity varies for each node, you cannot rely on a single process identity to perform the validation.</span></span>  
  
 <span data-ttu-id="7a9f2-158">この問題を回避するために、ビュー ステート検証をサポートする任意の検証キーを生成してから、同じキーを使用するように各レポート サーバー ノードを手動で構成することができます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-158">To work around this issue, you can generate an arbitrary validation key to support view state validation, and then manually configure each report server node to use the same key.</span></span> <span data-ttu-id="7a9f2-159">ランダムに生成される任意の 16 進数のシーケンスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-159">You can use any randomly generated hexadecimal sequence.</span></span> <span data-ttu-id="7a9f2-160">検証アルゴリズム (SHA1 など) によって、16 進数のシーケンスの必要な長さが決まります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-160">The validation algorithm (such as SHA1) determines how long the hexadecimal sequence must be.</span></span>  
  
1.  <span data-ttu-id="7a9f2-161">[!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)]により提供される自動生成機能を使用して、検証キーと暗号化解除キーを生成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-161">Generate a validation key and decryption key by using the autogenerate functionality provided by the [!INCLUDE[dnprdnshort](../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="7a9f2-162">最終的には、 `machineKey` スケールアウト配置の各レポートマネージャーインスタンスの Web.config ファイルに貼り付けることができる1つの <> エントリが必要です。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-162">In the end, you must have a single <`machineKey`> entry that you can paste into the Web.config file for each Report Manager instance in the scale-out deployment.</span></span>  
  
     <span data-ttu-id="7a9f2-163">次の例は、取得する必要がある値を示しています。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-163">The following example provides an illustration of the value you must obtain.</span></span> <span data-ttu-id="7a9f2-164">例を構成ファイルにコピーしないでください。このキーの値は有効ではありません。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-164">Do not copy the example into your configuration files; the key values are not valid.</span></span>  
  
    ```  
    <machineKey validationKey="123455555" decryptionKey="678999999" validation="SHA1" decryption="AES"/>  
    ```  
  
2.  <span data-ttu-id="7a9f2-165">レポートマネージャーの Web.config ファイルを開き、[<`system.web`>] セクションで、生成した <> 要素を貼り付け `machineKey` ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-165">Open the Web.config file for Report Manager, and in the <`system.web`> section paste the <`machineKey`> element that you generated.</span></span> <span data-ttu-id="7a9f2-166">既定では、レポート マネージャーの Web.config ファイルは、\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config にあります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-166">By default, the Report Manager Web.config file is located in \Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config.</span></span>  
  
3.  <span data-ttu-id="7a9f2-167">ファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-167">Save the file.</span></span>  
  
4.  <span data-ttu-id="7a9f2-168">スケールアウト配置内の各レポート サーバーに対し、前の手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-168">Repeat the previous step for each report server in the scale-out deployment.</span></span>  
  
5.  <span data-ttu-id="7a9f2-169">\ Reporting Services\Report Manager フォルダー内のすべての Web.Config ファイルに `machineKey` 、<> セクションに同一の <> 要素が含まれていることを確認し `system.web` ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-169">Verify that all Web.Config files in the \Reporting Services\Report Manager folders contain identical <`machineKey`> elements in the <`system.web`> section.</span></span>  
  
##  <a name="how-to-configure-hostname-and-urlroot"></a><a name="SpecifyingVirtualServerName"></a> <span data-ttu-id="7a9f2-170">Hostname と UrlRoot を構成する方法</span><span class="sxs-lookup"><span data-stu-id="7a9f2-170">How to Configure Hostname and UrlRoot</span></span>  
 <span data-ttu-id="7a9f2-171">NLB クラスターでレポート サーバー スケールアウト配置を構成するには、サーバー クラスターへの単一のアクセス ポイントとして 1 つの仮想サーバー名を定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-171">To configure a report server scale-out deployment on an NLB cluster, you must define a single virtual server name that provides a single point of access to the server cluster.</span></span> <span data-ttu-id="7a9f2-172">次に、この仮想サーバー名を使用環境のドメイン ネーム サーバー (DNS) に登録します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-172">Then register this virtual server name with the Domain Name Server (DNS) in your environment.</span></span>  
  
 <span data-ttu-id="7a9f2-173">仮想サーバー名を定義したら、レポート サーバーの URL にその仮想サーバー名を含めるよう、RSReportServer.config ファイル内の `Hostname` プロパティと `UrlRoot` プロパティを構成できます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-173">After you define the virtual server name, you can configure the `Hostname` and `UrlRoot` properties in the RSReportServer.config file to include the virtual server name in the report server URL.</span></span>  
  
 <span data-ttu-id="7a9f2-174">レポート環境でワイルドカードの URL 予約を使用している場合は、`Hostname` プロパティを構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-174">Configure the `Hostname` property when you are using wildcard URL reservations in your reporting environment.</span></span> <span data-ttu-id="7a9f2-175">`Hostname` プロパティを NLB サーバーの仮想サーバー名になるように指定すると、レポート環境のネットワーク トラフィックが NLB サーバーに送信されます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-175">When you specify the `Hostname` property to be the virtual server name of the NLB server, network traffic for the reporting environment is directed to the NLB server.</span></span> <span data-ttu-id="7a9f2-176">NLB はレポート サーバー ノード間に要求を分散します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-176">The NLB then distributes requests among the report server nodes.</span></span>  
  
 <span data-ttu-id="7a9f2-177">さらに、Excel や PDF などの形式で静的レポートにエクスポートされたレポート、または電子メール サブスクリプションなどのサブスクリプションで生成されるレポートでレポート リンクが動作するよう、`UrlRoot` プロパティを構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-177">Additionally, configure the `UrlRoot` property so that report links work in reports that have been exported to static reports, such as in an Excel or PDF format, or in reports that are generated by subscriptions, such as e-mail subscriptions.</span></span>  
  
 <span data-ttu-id="7a9f2-178">を [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 3.0 または2007と統合した場合、 [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] またはカスタム Web アプリケーションでレポートをホストしている場合は、プロパティのみを構成しなければならないことがあり `UrlRoot` ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-178">If you integrate [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] with [!INCLUDE[winSPServ](../../includes/winspserv-md.md)] 3.0 or [!INCLUDE[offSPServ](../../includes/offspserv-md.md)] 2007, or you host your reports in a custom Web application, you might need to configure only the `UrlRoot` property.</span></span> <span data-ttu-id="7a9f2-179">この場合、`UrlRoot` プロパティを SharePoint サイトまたは Web アプリケーションの URL になるように構成します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-179">In this case, configure the `UrlRoot` property to be the URL of the SharePoint site or Web application.</span></span> <span data-ttu-id="7a9f2-180">これにより、レポート環境のネットワーク トラフィックが、レポート サーバーまたは NLB クラスターではなく、レポートを処理するアプリケーションに送信されます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-180">This will direct network traffic for the reporting environment to the application that handles the reports rather than to the report server or NLB cluster.</span></span>  
  
 <span data-ttu-id="7a9f2-181">`ReportServerUrl` は変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-181">Do not modify `ReportServerUrl`.</span></span> <span data-ttu-id="7a9f2-182">この URL を変更すると、内部要求を処理するたびに仮想サーバーとの余分なやり取りが発生します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-182">If you modify this URL, you will introduce an extra roundtrip through the virtual server each time an internal request is handled.</span></span> <span data-ttu-id="7a9f2-183">詳細については、「[構成ファイル内の URL (SSRS 構成マネージャー)](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-183">For more information, see [URLs in Configuration Files  &#40;SSRS Configuration Manager&#41;](../install-windows/urls-in-configuration-files-ssrs-configuration-manager.md).</span></span> <span data-ttu-id="7a9f2-184">構成ファイルの編集方法の詳細については、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] オンライン ブックの「[Reporting Services の構成ファイル (RSreportserver.config) の変更」](modify-a-reporting-services-configuration-file-rsreportserver-config.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-184">For more information about editing the configuration file, see [Modify a Reporting Services Configuration File &#40;RSreportserver.config&#41;](modify-a-reporting-services-configuration-file-rsreportserver-config.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
1.  <span data-ttu-id="7a9f2-185">テキスト エディターで RSReportServer.config を開きます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-185">Open RSReportServer.config in a text editor.</span></span>  
  
2.  <span data-ttu-id="7a9f2-186">**\<Service>** セクションを見つけて、構成ファイルに次の情報を追加し `Hostname` ます。値は NLB サーバーの仮想サーバー名に置き換えてください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-186">Find the **\<Service>** section, and add the following information to the configuration file, replacing the `Hostname` value with the virtual server name for your NLB server:</span></span>  
  
    ```  
    <Hostname>virtual_server</Hostname>  
    ```  
  
3.  <span data-ttu-id="7a9f2-187">`UrlRoot` を探します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-187">Find `UrlRoot`.</span></span> <span data-ttu-id="7a9f2-188">構成ファイルでは要素が指定されていませんが、使用される既定値は、http://または https://の形式の URL です。ここで、 \<*computername*> / \<*reportserver*> \<*reportserver*> はレポートサーバー Web サービスの仮想ディレクトリ名です。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-188">The element is unspecified in the configuration file, but the default value used is a URL in this format: http:// or https://\<*computername*>/\<*reportserver*>, where \<*reportserver*> is the virtual directory name of the Report Server Web service.</span></span>  
  
4.  <span data-ttu-id="7a9f2-189">`UrlRoot`Http://または https://の形式で、クラスターの仮想名を含むの値を入力し \<*virtual_server*> / \<*reportserver*> ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-189">Type a value for `UrlRoot` that includes the virtual name of the cluster in this format: http:// or https://\<*virtual_server*>/\<*reportserver*>.</span></span>  
  
5.  <span data-ttu-id="7a9f2-190">ファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-190">Save the file.</span></span>  
  
6.  <span data-ttu-id="7a9f2-191">スケールアウト配置内の各レポート サーバーの RSReportServer.config ファイルごとに、これらの手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-191">Repeat these steps in each RSReportServer.config file for each report server in the scale-out deployment.</span></span>  
  
##  <a name="verify-report-server-access"></a><a name="Verify"></a><span data-ttu-id="7a9f2-192">レポートサーバーへのアクセスの確認</span><span class="sxs-lookup"><span data-stu-id="7a9f2-192">Verify Report Server Access</span></span>  
 <span data-ttu-id="7a9f2-193">仮想サーバー名 (やなど) を使用して、スケールアウト配置にアクセスできることを確認し https://MyVirtualServerName/reportserver https://MyVirtualServerName/reports) ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-193">Verify that you can access the scale-out deployment through the virtual server name (for example, https://MyVirtualServerName/reportserver and https://MyVirtualServerName/reports).</span></span>  
  
 <span data-ttu-id="7a9f2-194">レポート サーバーのログ ファイルを参照するか、または RS の実行ログを確認して、どのノードが実際にレポートを処理しているのかを確認できます (実行ログ テーブルには、 **InstanceName** という列があり、特定の要求がどのインスタンスによって処理されたのかを示しています)。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-194">You can check which node actually processes reports by looking at the report server log files or by checking the RS execution log (the execution log table contains a column called **InstanceName** that shows which instance processed a particular request).</span></span> <span data-ttu-id="7a9f2-195">詳細については、 [オンライン ブックの「](../report-server/reporting-services-log-files-and-sources.md) Reporting Services のログ ファイルとソース [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-195">For more information, see [Reporting Services Log Files and Sources](../report-server/reporting-services-log-files-and-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="7a9f2-196">レポート サーバーに接続できない場合は、NLB を調べて、要求がレポート サーバーに送信されていることを確認し、レポート サーバーの HTTP ログを表示して、サーバーが要求を受信していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-196">If you cannot connect to the report server, check the NLB to ensure that requests are sent to the report server and view the report server HTTP log to ensure that the server is receiving the requests.</span></span>  
  
#### <a name="troubleshooting-failed-requests"></a><span data-ttu-id="7a9f2-197">失敗した要求のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="7a9f2-197">Troubleshooting Failed Requests</span></span>  
 <span data-ttu-id="7a9f2-198">要求がレポート サーバー インスタンスに到達しない場合は、RSReportServer.config ファイルを調べて、仮想サーバー名がレポート サーバーの URL のホスト名として指定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-198">If requests do not reach the report server instances, check the RSReportServer.config file to verify that the virtual server name is specified as the host name for the report server URLs:</span></span>  
  
1.  <span data-ttu-id="7a9f2-199">テキスト エディターで RSReportServer.config ファイルを開きます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-199">Open the RSReportServer.config file in a text editor.</span></span>  
  
2.  <span data-ttu-id="7a9f2-200"><`Hostname`>、<`ReportServerUrl`>、<> `UrlRoot` を検索し、各設定のホスト名を確認します。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-200">Find <`Hostname`>, <`ReportServerUrl`>, and <`UrlRoot`>, and check the host name for each settings.</span></span> <span data-ttu-id="7a9f2-201">値が意図したホスト名でない場合は、正しいホスト名に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-201">If the value is not the host name you expect, replace it with the correct host name.</span></span>  
  
 <span data-ttu-id="7a9f2-202">これらの変更を行った後に Reporting Services 構成ツールを起動すると、ツールによって <> 設定が既定値に変更される可能性があり `ReportServerUrl` ます。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-202">If you start the Reporting Services Configuration tool after making these changes, the tool might change the <`ReportServerUrl`> settings to the default value.</span></span> <span data-ttu-id="7a9f2-203">使用する設定を含むバージョンに置き換える必要がある場合に備えて、常にバックアップ コピーを作成しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="7a9f2-203">Always keep a backup copy of the configuration files in case you need to replace them with the version that contains the settings you want to use.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a9f2-204">参照</span><span class="sxs-lookup"><span data-stu-id="7a9f2-204">See Also</span></span>  
 <span data-ttu-id="7a9f2-205">[Reporting Services 構成マネージャー &#40;ネイティブ モード&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span><span class="sxs-lookup"><span data-stu-id="7a9f2-205">[Reporting Services Configuration Manager &#40;Native Mode&#41;](../../sql-server/install/reporting-services-configuration-manager-native-mode.md) </span></span>  
 <span data-ttu-id="7a9f2-206">[SSRS Configuration Manager の URL &#40;構成&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span><span class="sxs-lookup"><span data-stu-id="7a9f2-206">[Configure a URL  &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-url-ssrs-configuration-manager.md) </span></span>  
 <span data-ttu-id="7a9f2-207">[SSRS Configuration Manager &#40;ネイティブモードのレポートサーバーのスケールアウト配置の構成&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="7a9f2-207">[Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](../install-windows/configure-a-native-mode-report-server-scale-out-deployment.md) </span></span>  
 [<span data-ttu-id="7a9f2-208">Reporting Services ネイティブ モードのレポート サーバーの管理</span><span class="sxs-lookup"><span data-stu-id="7a9f2-208">Manage a Reporting Services Native Mode Report Server</span></span>](manage-a-reporting-services-native-mode-report-server.md)  
  
  
