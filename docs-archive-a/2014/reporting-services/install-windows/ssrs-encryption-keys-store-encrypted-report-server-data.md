---
title: 暗号化されたレポート サーバー データの格納 (SSRS 構成マネージャー) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], encryption
- credentials [Reporting Services]
- cryptography [Reporting Services]
- confidential reports [Reporting Services]
- encryption [Reporting Services]
- databases [Reporting Services], encryption
ms.assetid: ac0f4d4d-fc4b-4c62-a693-b86e712e75f2
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 0cbc414918a15d19f0f211a572878dc7f93ca277
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87742929"
---
# <a name="store-encrypted-report-server-data-ssrs-configuration-manager"></a><span data-ttu-id="1fbc3-102">暗号化されたレポート サーバー データの格納 (SSRS 構成マネージャー)</span><span class="sxs-lookup"><span data-stu-id="1fbc3-102">Store Encrypted Report Server Data (SSRS Configuration Manager)</span></span>
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="1fbc3-103">では、暗号化された値がレポート サーバー データベースおよび構成ファイルに保存されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-103">stores encrypted values in the report server database and in configuration files.</span></span> <span data-ttu-id="1fbc3-104">暗号化された値の大部分は資格情報です。これらの資格情報は、レポートにデータを提供する外部データ ソースへのアクセスに使用されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-104">Most encrypted values are credentials that are used for accessing external data sources that provide data to reports.</span></span> <span data-ttu-id="1fbc3-105">このトピックでは、暗号化される値、 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]で使用される暗号化機能、および理解が必要な他の種類の保存された機密データについて説明します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-105">This topic describes which values are encrypted, the encryption functionality used in [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], and other kinds of stored confidential data that you should know about.</span></span>  
  
## <a name="encrypted-values"></a><span data-ttu-id="1fbc3-106">暗号化された値</span><span class="sxs-lookup"><span data-stu-id="1fbc3-106">Encrypted Values</span></span>  
 <span data-ttu-id="1fbc3-107">次の一覧に、 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] 環境に格納される値を示します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-107">The following list describes the values that are stored in a [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] installation.</span></span>  
  
-   <span data-ttu-id="1fbc3-108">内部サーバー データを格納するレポート サーバー データベースに接続するために、レポート サーバーで使用される接続情報および資格情報。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-108">Connection information and credentials used by a report server to connect to a report server database that stores internal server data.</span></span>  
  
     <span data-ttu-id="1fbc3-109">これらの値は、セットアップ中またはレポート サーバー構成中に指定および暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-109">These values are specified and encrypted during setup or report server configuration.</span></span> <span data-ttu-id="1fbc3-110">Reporting Services 構成ツールまたは **rsconfig** ユーティリティを使用すると、いつでも接続情報を更新できます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-110">You can update the connection information at any time using the Reporting Services Configuration tool or the **rsconfig** utility.</span></span> <span data-ttu-id="1fbc3-111">構成設定の暗号化には、ローカル コンピューターのマシン レベル キーが使用されます。このキーは、すべてのユーザーが使用できます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-111">Encryption of configuration settings is performed by using the machine-level key of the local computer that is available to all users.</span></span> <span data-ttu-id="1fbc3-112">暗号化されたレポート サーバーの接続情報は rsreportserver.config ファイルに保存されます (他の構成ファイルには、暗号化された設定が保存されません)。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-112">Encrypted report server connection information is stored in the rsreportserver.config file (no other configuration file contains encrypted settings).</span></span> <span data-ttu-id="1fbc3-113">詳細については、「 [レポート サーバー データベース接続の構成 &#40;SSRS構成マネージャー&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md)」で確認します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-113">For more information, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="1fbc3-114">レポートにデータを提供する外部データ ソースに接続するためにレポート サーバーで使用される保存された資格情報。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-114">Stored credentials that are used by a report server to connect to external data sources that provide data to a report.</span></span>  
  
     <span data-ttu-id="1fbc3-115">これらの値は、レポートのデータ ソース情報を構成する際に定義され、暗号化された値としてレポート サーバー データベースに保存されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-115">These values are defined when you configure data source information for a report, and then stored as encrypted values in a report server database.</span></span> <span data-ttu-id="1fbc3-116">レポート サーバーは対称キーを使用して、このデータの暗号化および暗号化解除を行います。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-116">The report server uses a symmetric key to encrypt and decrypt this data.</span></span> <span data-ttu-id="1fbc3-117">保存された資格情報の詳細については、 [オンライン ブックの「](../../integration-services/connection-manager/data-sources.md) レポート データ ソースに関する資格情報と接続情報を指定する [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-117">For more information about stored credentials, see [Specify Credential and Connection Information for Report Data Sources](../../integration-services/connection-manager/data-sources.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
-   <span data-ttu-id="1fbc3-118">レポートで使用される外部画像ファイルまたは外部データを取得するために、レポート サーバーが他のコンピューターに接続するときに使用する自動実行用ユーザー アカウント。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-118">An unattended user account used by the report server to connect to other computers to retrieve external images files or external data that is used in a report.</span></span>  
  
     <span data-ttu-id="1fbc3-119">このアカウントは、リモート コンピューターへの接続が必要で、接続には他の資格情報が利用できない場合に使用されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-119">This account is used when a connection to a remote computer is required and no other credentials are available to make the connection.</span></span> <span data-ttu-id="1fbc3-120">このアカウントは、主にデータ ソースへのアクセスに資格情報を使用しないレポートの自動実行をサポートするために使用されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-120">This account is primarily used to support unattended report processing for reports that do not use credentials to access a data source.</span></span> <span data-ttu-id="1fbc3-121">データのアクセスに資格情報を必要としない、または使用しないデータ ソースを基にしたレポートを作成する場合、このアカウントを構成してレポート サーバーで使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-121">If you create reports based on data sources that do not require or use credentials when accessing data, you must configure this account for the report server to use.</span></span>  
  
     <span data-ttu-id="1fbc3-122">このアカウントは特定の状況で必要であり、Reporting Services 構成ツールまたは **rsconfig**でのみ作成できます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-122">This account is required under certain circumstances and can only be created through the Reporting Services Configuration tool or **rsconfig**.</span></span> <span data-ttu-id="1fbc3-123">この値も rsreportserver.config ファイルに保存されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-123">This value is also stored in the rsreportserver.config file.</span></span> <span data-ttu-id="1fbc3-124">このアカウントは手動で作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-124">You must create this account manually.</span></span> <span data-ttu-id="1fbc3-125">このアカウントとその使用方法の詳細については、「[自動実行アカウントの構成 &#40;SSRS 構成マネージャー&#41;](configure-the-unattended-execution-account-ssrs-configuration-manager.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-125">For more information about this account and how it is used, see [Configure the Unattended Execution Account &#40;SSRS Configuration Manager&#41;](configure-the-unattended-execution-account-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="1fbc3-126">暗号化に使用する対称キー。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-126">The symmetric key used for encryption.</span></span>  
  
     <span data-ttu-id="1fbc3-127">この値はセットアップ中またはサーバー構成中に作成され、暗号化された値としてレポート サーバー データベースに保存されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-127">This value is created during setup or server configuration, and then stored as an encrypted value in the report server database.</span></span> <span data-ttu-id="1fbc3-128">レポート サーバーの Windows サービスはこのキーを使用して、レポート サーバー データベースに保存されているデータの暗号化および暗号化解除を行います。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-128">The Report Server Windows service uses this key to encrypt and decrypt data that is stored in the report server database.</span></span>  
  
## <a name="encryption-functionality-in-reporting-services"></a><span data-ttu-id="1fbc3-129">Reporting Services での暗号化機能</span><span class="sxs-lookup"><span data-stu-id="1fbc3-129">Encryption Functionality in Reporting Services</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="1fbc3-130">は、Windows オペレーティング システムの一部になっている暗号化関数を使用します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-130">uses cryptographic functions that are part of the Windows operating system.</span></span> <span data-ttu-id="1fbc3-131">対称暗号化と非対称暗号化の両方が使用されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-131">Both symmetric and asymmetric encryption are used.</span></span>  
  
 <span data-ttu-id="1fbc3-132">レポート サーバー データベース内のデータは、対称キーを使用して暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-132">Data in the report server database is encrypted using a symmetric key.</span></span> <span data-ttu-id="1fbc3-133">レポート サーバー データベースごとに 1 つの対称キーがあります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-133">There is a single symmetric key for each report server database.</span></span> <span data-ttu-id="1fbc3-134">この対称キー自体が、Windows によって生成される非対称キー ペアの公開キーを使用して暗号化されています。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-134">This symmetric key is itself encrypted using the public key of an asymmetric key pair generated by Windows.</span></span> <span data-ttu-id="1fbc3-135">秘密キーはレポート サーバー Windows サービス アカウントが持っています。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-135">The private key is held by the Report Server Windows service account.</span></span>  
  
 <span data-ttu-id="1fbc3-136">レポート サーバーのスケールアウト配置では、複数のレポート サーバー インスタンスが同じレポート サーバー データベースを共有しています。この配置では、1 つの対称キーをすべてのレポート サーバー ノードが使用します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-136">In a report server scale-out deployment where multiple report server instances share the same report server database, a single symmetric key is used by all report server nodes.</span></span> <span data-ttu-id="1fbc3-137">各ノードは共有する対称キーのコピーを持つ必要があります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-137">Each node must have a copy of the shared symmetric key.</span></span> <span data-ttu-id="1fbc3-138">対称キーのコピーは、スケールアウト配置が構成されると自動的にノードごとに作成されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-138">A copy of the symmetric key is created for each node automatically when the scale-out deployment is configured.</span></span> <span data-ttu-id="1fbc3-139">各ノードは、Windows サービス アカウント固有のキー ペアの公開キーを使用して、対称キーのコピーを暗号化します。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-139">Each node encrypts its copy of the symmetric key using the public key of a key pair specific to its Windows service account.</span></span> <span data-ttu-id="1fbc3-140">単一インスタンスおよびスケールアウト配置用に作成される対称キーの詳細については、「[レポート サーバーの初期化 &#40;SSRS 構成マネージャー&#41;](ssrs-encryption-keys-initialize-a-report-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-140">To learn more about how the symmetric key is created for both single instance and scale-out deployments, see [Initialize a Report Server &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-initialize-a-report-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="1fbc3-141">レポート サーバー Windows サービス アカウントを変更した場合、非対称キーは無効になり、サーバーの操作が中断される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-141">When you change the Report Server Windows service account, the asymmetric keys can become invalid, which will disrupt server operations.</span></span> <span data-ttu-id="1fbc3-142">この問題を回避するには、常に Reporting Services 構成ツールを使用して、サービス アカウントの設定を変更してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-142">To avoid this problem, always use the Reporting Services Configuration tool to modify service account settings.</span></span> <span data-ttu-id="1fbc3-143">構成ツールを使用する場合、キーは自動的に更新されます。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-143">When you use the configuration tool, the keys are updated for you automatically.</span></span> <span data-ttu-id="1fbc3-144">詳細については、 [レポート サーバー サービス アカウントの構成 &#40;SSRS 構成マネージャー&#41;](configure-the-report-server-service-account-ssrs-configuration-manager.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-144">For more information, see [Configure the Report Server Service Account &#40;SSRS Configuration Manager&#41;](configure-the-report-server-service-account-ssrs-configuration-manager.md).</span></span>  
  
## <a name="other-sources-of-confidential-data"></a><span data-ttu-id="1fbc3-145">機密データの各種のソース</span><span class="sxs-lookup"><span data-stu-id="1fbc3-145">Other Sources of Confidential Data</span></span>  
 <span data-ttu-id="1fbc3-146">レポート サーバーには暗号化されていない各種のデータが保存されますが、その中には保護が必要な重要な情報が含まれていることがあります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-146">A report server stores other data that is not encrypted, yet may contain sensitive information that you want to protect.</span></span> <span data-ttu-id="1fbc3-147">特に、レポート履歴スナップショットおよびレポート実行スナップショットには、クエリ結果が含まれています。このクエリ結果には、権限を持つユーザー向けのデータが含まれることがあります。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-147">Specifically, report history snapshots and report execution snapshots contain query results that may include data that is intended for authorized users.</span></span> <span data-ttu-id="1fbc3-148">機密データを含むレポートのスナップショット機能を使用している場合、レポート サーバー データベースでテーブルを開くことができるユーザーは、テーブルの内容を調べることで、保存されたレポートの一部を参照できる可能性があるという点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-148">If you are using snapshot functionality for reports that contain confidential data, be aware that users who can open tables in a report server database may be able to view portions of a stored report by inspecting the contents of the table.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="1fbc3-149">では、ユーザーのセキュリティ ID に基づくパラメーターを使用するレポートのキャッシュおよびレポート履歴がサポートされません。</span><span class="sxs-lookup"><span data-stu-id="1fbc3-149">does not support caching or report history for reports that use parameters based on the security identify of the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1fbc3-150">参照</span><span class="sxs-lookup"><span data-stu-id="1fbc3-150">See Also</span></span>  
 [<span data-ttu-id="1fbc3-151">暗号化キーの構成と管理 &#40;SSRS 構成マネージャー&#41;</span><span class="sxs-lookup"><span data-stu-id="1fbc3-151">Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-manage-encryption-keys.md)  
  
  
