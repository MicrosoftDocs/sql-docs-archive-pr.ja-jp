---
title: レポート サーバーの初期化 (SSRS 構成マネージャー) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: database-engine
ms.topic: conceptual
helpviewer_keywords:
- report servers [Reporting Services], initializing
- initialization process [Reporting Services]
- checking report server initializations
- scale-out deployments [Reporting Services]
- initializing report servers [Reporting Services]
- verifying report server initializations
ms.assetid: 861d4ec4-1085-412c-9a82-68869a77bd55
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.openlocfilehash: 66fa70c29d718e040b6423afcfdff28721753690
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87742937"
---
# <a name="initialize-a-report-server-ssrs-configuration-manager"></a><span data-ttu-id="ad7af-102">レポート サーバーの初期化 (SSRS 構成マネージャー)</span><span class="sxs-lookup"><span data-stu-id="ad7af-102">Initialize a Report Server (SSRS Configuration Manager)</span></span>
  <span data-ttu-id="ad7af-103">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)]では、初期化されたサーバーとは、レポート サーバー データベース内のデータの暗号化および暗号化解除を実行できるサーバーのことです。</span><span class="sxs-lookup"><span data-stu-id="ad7af-103">In [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)], an initialized server is one that can encrypt and decrypt data in a report server database.</span></span> <span data-ttu-id="ad7af-104">レポート サーバーを操作するには、初期化が必要です。</span><span class="sxs-lookup"><span data-stu-id="ad7af-104">Initialization is a requirement for report server operation.</span></span> <span data-ttu-id="ad7af-105">初期化は、レポート サーバー サービスを最初に開始するときに行われます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-105">Initialization occurs when the Report Server service is started for the first time.</span></span> <span data-ttu-id="ad7af-106">また、既存の配置にレポート サーバーを追加するときや、復旧処理の一環としてキーを手動で再作成するときにも、初期化が行われます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-106">It also occurs when you join the report server to the existing deployment, or when you manually recreate the keys as part of the recovery process.</span></span> <span data-ttu-id="ad7af-107">暗号化キーを使用する方法と理由の詳細については、「[暗号化キーの構成と管理 (構成マネージャー)](ssrs-encryption-keys-manage-encryption-keys.md)」および「[暗号化されたレポート サーバー データの格納 (SSRS 構成マネージャー)](ssrs-encryption-keys-store-encrypted-report-server-data.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad7af-107">For more information about how and why encryption keys are used, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md) and [Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-store-encrypted-report-server-data.md).</span></span>  
  
 <span data-ttu-id="ad7af-108">暗号化キーは、レポート サーバー サービスのプロファイル情報に一部基づいています。</span><span class="sxs-lookup"><span data-stu-id="ad7af-108">Encryption keys are based partly on the profile information of the Report Server service.</span></span> <span data-ttu-id="ad7af-109">レポート サーバー サービスの実行に使用されるユーザー ID を変更する場合は、それに応じてキーを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-109">If you change the user identity used to run the Report Server service, you must update the keys accordingly.</span></span> <span data-ttu-id="ad7af-110">Reporting Services 構成ツールを使用して ID を変更すると、この手順が自動的に実行されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-110">If you are using the Reporting Services Configuration tool to change the identity, this step is handled for you automatically.</span></span>  
  
 <span data-ttu-id="ad7af-111">何らかの理由で初期化が失敗すると、ユーザーおよびサービスからの要求に応じて、レポート サーバーから `RSReportServerNotActivated` エラーが返されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-111">If initialization fails for some reason, the report server returns an `RSReportServerNotActivated` error in response to user and service requests.</span></span> <span data-ttu-id="ad7af-112">この場合、システムまたはサーバーの構成のトラブルシューティングが必要になります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-112">In this case, you may need to troubleshoot the system or server configuration.</span></span> <span data-ttu-id="ad7af-113">詳細については、TechNet Wiki (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) の「[SSRS: Troubleshoot Issues and Errors with Reporting Services](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx)」(SSRS: Reporting Services での問題とエラーのトラブルシューティング) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad7af-113">For more information, see [SSRS: Troubleshoot Issues and Errors with Reporting Services](https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) (https://social.technet.microsoft.com/wiki/contents/articles/1633.aspx) in Technet Wiki.</span></span>  
  
## <a name="overview-of-the-initialization-process"></a><span data-ttu-id="ad7af-114">初期化処理の概要</span><span class="sxs-lookup"><span data-stu-id="ad7af-114">Overview of the Initialization Process</span></span>  
 <span data-ttu-id="ad7af-115">初期化処理では、暗号化に使用する対称キーが作成され、格納されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-115">The initialization process creates and stores a symmetric key used for encryption.</span></span> <span data-ttu-id="ad7af-116">対称キーは、 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Cryptographic Services で作成された後、レポート サーバー サービスで暗号化と暗号化解除に使用されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-116">The symmetric key is created by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows Cryptographic Services and subsequently used by the Report Server service to encrypt and decrypt data.</span></span> <span data-ttu-id="ad7af-117">対称キー自体も、非対称キーを使って暗号化されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-117">The symmetric key is itself encrypted with an asymmetric key.</span></span>  
  
 <span data-ttu-id="ad7af-118">次に、初期化処理の手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-118">The following steps describe the initialization process:</span></span>  
  
1.  <span data-ttu-id="ad7af-119">初回起動時に、レポート サーバー サービスが RSReportServer.config ファイルを読み取り、インストール識別子とデータベース接続情報を取得します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-119">At initial start up, the Report Server service reads the RSReportServer.config file to get the installation identifier and database connection information.</span></span>  
  
2.  <span data-ttu-id="ad7af-120">レポート サーバー サービスが暗号化サービスに公開キーを要求します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-120">The Report Server service requests a public key from Cryptographic Services.</span></span> <span data-ttu-id="ad7af-121">Windows は秘密キーと公開キーを作成し、レポート サーバー サービスに公開キーを送信します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-121">Windows creates a private and public key and sends the public key to the Report Server service.</span></span>  
  
3.  <span data-ttu-id="ad7af-122">レポート サーバー サービスがレポート サーバー データベースに接続し、インストール識別子と公開キーの値を格納します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-122">The Report Server service connects to the report server database and stores the installation identifier and public key values.</span></span>  
  
4.  <span data-ttu-id="ad7af-123">レポート サーバー サービスが暗号化サービスを再度呼び出し、今回は対称キーを要求します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-123">The Report Server service calls into Cryptographic Services again, this time to request a symmetric key.</span></span> <span data-ttu-id="ad7af-124">Windows が対称キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-124">Windows creates the symmetric key.</span></span>  
  
5.  <span data-ttu-id="ad7af-125">レポート サーバー サービスがレポート サーバー データベースに再接続し、手順 3 で格納された公開キーとインストール識別子の値に対称キーを追加します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-125">The Report Server service connects to the report server database again, and adds the symmetric key to the public key and installation identifier values that were stored in step 3.</span></span> <span data-ttu-id="ad7af-126">対称キーを格納する前に、レポート サーバー サービスはその公開キーを使用して対称キーを暗号化します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-126">Before storing it, the Report Server service uses its public key to encrypt the symmetric key.</span></span> <span data-ttu-id="ad7af-127">対称キーが格納されると、レポート サーバーは初期化されたと見なされて、使用可能になります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-127">Once the symmetric key is stored, the report server is considered initialized and available to use.</span></span>  
  
## <a name="initializing-a-report-server-for-scale-out-deployment"></a><span data-ttu-id="ad7af-128">スケールアウト配置用のレポート サーバーの初期化</span><span class="sxs-lookup"><span data-stu-id="ad7af-128">Initializing a Report Server for Scale-out Deployment</span></span>  
 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] <span data-ttu-id="ad7af-129">1 つのレポート サーバー データベースを複数のレポート サーバー インスタンスで共有するスケールアウト配置モデルがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="ad7af-129">supports a scale-out deployment model that shares a single report server database among multiple report server instances.</span></span> <span data-ttu-id="ad7af-130">スケールアウト配置に参加するには、レポート サーバーは、対称キーのコピーを作成して共有データベースに格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-130">To join a scale-out deployment, a report server must create and store its copy of the symmetric key in the shared database.</span></span> <span data-ttu-id="ad7af-131">そのデータベースを使用する複数のサーバーで使用される対称キーは 1 つですが、各レポート サーバーはその対称キーのコピーを持っています。</span><span class="sxs-lookup"><span data-stu-id="ad7af-131">Although a single symmetric key is used by servers that use the database, each report server has its copy of the key.</span></span> <span data-ttu-id="ad7af-132">各コピーは、その所有者の公開キーを使用して一意に暗号化されるため、それぞれ異なります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-132">Each copy varies in that it is uniquely encrypted using the public key its owner.</span></span>  
  
 <span data-ttu-id="ad7af-133">スケールアウト配置のためにレポート サーバーを初期化する際の最初の数手順は、1 つのサーバーと 1 つのデータベースの初期化で行う最初の 3 つの手順と同じです。</span><span class="sxs-lookup"><span data-stu-id="ad7af-133">The first set of steps for initializing a report server for scale-out deployment are identical to the first three steps that describe initialization for a single server and database combination.</span></span>  
  
 <span data-ttu-id="ad7af-134">スケールアウト配置用の初期化で異なる点は、レポート サーバーが対称キーを取得する方法です。</span><span class="sxs-lookup"><span data-stu-id="ad7af-134">The initialization process for a scale out deployment differs in how the report server gets the symmetric key.</span></span> <span data-ttu-id="ad7af-135">最初のサーバーが初期化されるときに、そのサーバーが Windows から対称キーを取得します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-135">When the first server is initialized, it gets the symmetric key from Windows.</span></span> <span data-ttu-id="ad7af-136">スケールアウト配置の構成時に 2 番目のサーバーが初期化される際、このサーバーは既に初期化されているレポート サーバー サービスから対称キーを取得します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-136">When the second server is initialized during configuration for scale-out deployment, it gets the symmetric key from the Report Server service that is already initialized.</span></span> <span data-ttu-id="ad7af-137">最初のレポート サーバー インスタンスは、2 番目のインスタンスの公開キーを使用して、2 番目のレポート サーバー インスタンス用に対称キーの暗号化されたコピーを作成します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-137">The first report server instance uses the public key of the second instance to create an encrypted copy of the symmetric key for the second report server instance.</span></span> <span data-ttu-id="ad7af-138">この処理では、対称キーはプレーンテキストとして公開されることはありません。</span><span class="sxs-lookup"><span data-stu-id="ad7af-138">The symmetric key is never exposed as plain text at any point in this process.</span></span>  
  
## <a name="how-to-initialize-a-report-server"></a><span data-ttu-id="ad7af-139">レポート サーバーを初期化する方法</span><span class="sxs-lookup"><span data-stu-id="ad7af-139">How to Initialize a Report Server</span></span>  
  
-   <span data-ttu-id="ad7af-140">レポート サーバーを初期化するには、Reporting Services 構成ツールを使用します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-140">To initialize a report server, use the Reporting Services Configuration tool.</span></span> <span data-ttu-id="ad7af-141">初期化は、レポート サーバー データベースを作成および構成するときに自動的に行われます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-141">Initialization occurs automatically when you create and configure the report server database.</span></span> <span data-ttu-id="ad7af-142">詳細については、「 [レポート サーバー データベース接続の構成 &#40;SSRS構成マネージャー&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md)」で確認します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-142">For more information, see [Configure a Report Server Database Connection  &#40;SSRS Configuration Manager&#41;](../../sql-server/install/configure-a-report-server-database-connection-ssrs-configuration-manager.md).</span></span>  
  
-   <span data-ttu-id="ad7af-143">レポート サーバーをスケールアウト配置用に初期化するには、Reporting Services 構成ツールの [初期化] ページまたは **RSKeymgmt** ユーティリティを使用します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-143">To initialize a report server for scale-out deployment, you can use the Initialization page in the Reporting Services Configuration tool or the **RSKeymgmt** utility.</span></span> <span data-ttu-id="ad7af-144">実行手順については、「[ネイティブ モード レポート サーバーのスケールアウト配置の構成 (SSRS 構成マネージャー)](configure-a-native-mode-report-server-scale-out-deployment.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad7af-144">To follow step-by-step instructions, see [Configure a Native Mode Report Server Scale-Out Deployment &#40;SSRS Configuration Manager&#41;](configure-a-native-mode-report-server-scale-out-deployment.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ad7af-145">**RSKeymgmt** は、既にスケールアウト配置に含まれているレポート サーバー インスタンスをホストするコンピューター上のコマンド ラインから実行するコンソール アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="ad7af-145">**RSKeymgmt** is a console application that you run from a command line on a computer that hosts a report server instance that is already part of a scale-out deployment.</span></span> <span data-ttu-id="ad7af-146">ユーティリティを実行するとき、初期化するリモートのレポート サーバー インスタンスを選択するための引数を指定します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-146">When you run the utility, you specify arguments to select a remote report server instance that you want to initialize.</span></span>  
  
 <span data-ttu-id="ad7af-147">レポート サーバーは、インストール識別子と公開キーが一致する場合のみ初期化されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-147">A report server will be initialized only if there is a match between the installation identifier and the public key.</span></span> <span data-ttu-id="ad7af-148">正しく一致すると、暗号化の解除を許可する対称キーが作成されます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-148">If the match succeeds, a symmetric key is created that permits reversible encryption.</span></span> <span data-ttu-id="ad7af-149">一致しないと、レポート サーバーが無効になります。このとき、バックアップ キーの適用、またはバックアップ キーが利用できない場合や有効でない場合に暗号化データの削除が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="ad7af-149">If the match fails, the report server is disabled, in which case you may be required to apply a backup key or delete the encrypted data if a backup key is unavailable or not valid.</span></span> <span data-ttu-id="ad7af-150">レポート サーバーによる暗号化キーの使用の詳細については、「[暗号化キーの構成と管理 (SSRS 構成マネージャー)](ssrs-encryption-keys-manage-encryption-keys.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad7af-150">For more information about encryption keys used by a report server, see [Configure and Manage Encryption Keys &#40;SSRS Configuration Manager&#41;](ssrs-encryption-keys-manage-encryption-keys.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ad7af-151">[!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] の Windows Management Instrumentation (WMI) プロバイダーを使用して、レポート サーバーをプログラムで初期化することもできます。</span><span class="sxs-lookup"><span data-stu-id="ad7af-151">You can also use the [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] Windows Management Instrumentation (WMI) provider to initialize a report server programmatically.</span></span> <span data-ttu-id="ad7af-152">詳細については、 [オンライン ブックの「](../tools/access-the-reporting-services-wmi-provider.md) Reporting Service WMI プロバイダーへのアクセス [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ad7af-152">For more information, see [Access the Reporting Services WMI Provider](../tools/access-the-reporting-services-wmi-provider.md) in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
## <a name="how-to-confirm-a-report-server-initialization"></a><span data-ttu-id="ad7af-153">レポート サーバーの初期化の確認方法</span><span class="sxs-lookup"><span data-stu-id="ad7af-153">How to Confirm a Report Server Initialization</span></span>  
 <span data-ttu-id="ad7af-154">レポートサーバーの初期化を確認するには、コマンドウィンドウで「 **http:// \<servername> /reportserver** 」と入力して、レポートサーバー Web サービスに ping を実行します。</span><span class="sxs-lookup"><span data-stu-id="ad7af-154">To confirm report server initialization, ping the Report Server Web service by typing **http://\<servername>/reportserver** in the command window.</span></span> <span data-ttu-id="ad7af-155">`RSReportServerNotActivated` エラーが発生した場合は、初期化が失敗しています。</span><span class="sxs-lookup"><span data-stu-id="ad7af-155">If the `RSReportServerNotActivated` error occurs, the initialization failed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ad7af-156">参照</span><span class="sxs-lookup"><span data-stu-id="ad7af-156">See Also</span></span>  
 [<span data-ttu-id="ad7af-157">暗号化されたレポート サーバー データの格納 &#40;SSRS 構成マネージャー&#41;</span><span class="sxs-lookup"><span data-stu-id="ad7af-157">Store Encrypted Report Server Data &#40;SSRS Configuration Manager&#41;</span></span>](ssrs-encryption-keys-store-encrypted-report-server-data.md)  
  
  
