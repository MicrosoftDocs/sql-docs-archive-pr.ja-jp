---
title: SQL Server アクセス用のマルチホーム コンピューターの構成 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- ports [SQL Server], multi-homed computer
- multi-homed computer [SQL Server] configuring ports
- firewall systems [Database Engine], multi-homed computer
ms.assetid: ba369e5b-7d1f-4544-b7f1-9b098a1e75bc
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: b20fa552e57441ef211049f0e51b4f8d65e6f2e1
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87642527"
---
# <a name="configure-a-multi-homed-computer-for-sql-server-access"></a><span data-ttu-id="e5d50-102">SQL Server アクセス用のマルチホーム コンピューターの構成</span><span class="sxs-lookup"><span data-stu-id="e5d50-102">Configure a Multi-Homed Computer for SQL Server Access</span></span>
  <span data-ttu-id="e5d50-103">サーバーが複数のネットワークまたはネットワーク サブネットへの接続を提供する必要がある場合、一般的なシナリオではマルチホーム コンピューターを使用します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-103">When a server must provide a connection to two or more networks or network subnets, a typical scenario uses a multi-homed computer.</span></span> <span data-ttu-id="e5d50-104">通常、このコンピューターは、境界ネットワーク (DMZ、非武装地帯、またはスクリーン サブネットとも呼ばれます) にあります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-104">Frequently this computer is located in a perimeter network (also known as DMZ, demilitarized zone, or screened subnet).</span></span> <span data-ttu-id="e5d50-105">このトピックでは、マルチホーム環境内の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスへのネットワーク接続用に [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] とセキュリティが強化された Windows ファイアウォールを構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-105">This topic describes how to configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and Windows Firewall with Advanced Security to provide for network connections to an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in a multi-homed environment.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e5d50-106">マルチホーム コンピューターには複数のネットワーク アダプターがあるか、または 1 つのネットワーク アダプターに複数の IP アドレスを使用するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="e5d50-106">A multi-homed computer has multiple network adapters or has been configured to use multiple IP addresses for a single network adapter.</span></span> <span data-ttu-id="e5d50-107">デュアルホーム コンピューターには 2 つのネットワーク アダプターがあるか、または 1 つのネットワーク アダプターに 2 つの IP アドレスを使用するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="e5d50-107">A dual-homed computer has two network adapters or has been configured to use two IP addresses for a single network adapter.</span></span>  
  
 <span data-ttu-id="e5d50-108">このトピックを続行する前に、「 [SQL Server のアクセスを許可するための Windows ファイアウォールの構成](../../../2014/sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md)」のトピックの説明をよく理解してください。</span><span class="sxs-lookup"><span data-stu-id="e5d50-108">Before you continue in this topic, you should be familiar with the information provided in the topic [Configure the Windows Firewall to Allow SQL Server Access](../../../2014/sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md).</span></span> <span data-ttu-id="e5d50-109">このトピックには、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] コンポーネントがファイアウォールと連携して動作する方法に関する基本的な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="e5d50-109">This topic contains basic information about how [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components work with the firewall.</span></span>  
  
 <span data-ttu-id="e5d50-110">**この例の前提条件は、次のとおりです。**</span><span class="sxs-lookup"><span data-stu-id="e5d50-110">**Assumptions for this example:**</span></span>  
  
-   <span data-ttu-id="e5d50-111">コンピューターに 2 つのネットワーク アダプターがインストールされています。</span><span class="sxs-lookup"><span data-stu-id="e5d50-111">There are two network adapters installed in the computer.</span></span> <span data-ttu-id="e5d50-112">1 つ以上のネットワーク アダプターをワイヤレスにすることができます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-112">One or more of the network adapters can be wireless.</span></span> <span data-ttu-id="e5d50-113">2 つのネットワーク アダプターをシミュレートするには、1 つ目のネットワーク アダプターの IP アドレスを使用してから、2 つ目のネットワーク アダプターとしてループバック IP アドレス (127.0.0.1) を使用します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-113">You can simulate having two network adapters by using the IP address of one network adapter, and using the loopback IP address (127.0.0.1) as the second network adapter.</span></span>  
  
-   <span data-ttu-id="e5d50-114">簡単にするため、この例では IPv4 アドレスを使用します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-114">For simplicity, this example uses IPv4 addresses.</span></span> <span data-ttu-id="e5d50-115">IPv6 アドレスを使用しても、同じ手順を実行できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-115">The same procedures can be performed by using IPv6 addresses.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e5d50-116">IPv4 アドレスは、オクテットと呼ばれる一連の 4 つの数字です。</span><span class="sxs-lookup"><span data-stu-id="e5d50-116">IPv4 addresses are a series of four numbers known as octets.</span></span> <span data-ttu-id="e5d50-117">各数字は、ピリオドで区切られた 255 より小さい数字です (127.0.0.1 など)。</span><span class="sxs-lookup"><span data-stu-id="e5d50-117">Each number is less than 255, separated by periods, such as 127.0.0.1.</span></span> <span data-ttu-id="e5d50-118">IPv6 アドレスは、コロンで区切られた一連の 8 つの 16 進数です (fe80:4898:23:3:49a6:f5c1:2452:b994 など)。</span><span class="sxs-lookup"><span data-stu-id="e5d50-118">IPv6 addresses are a series of eight hexadecimal numbers separated by colons, such as fe80:4898:23:3:49a6:f5c1:2452:b994.</span></span>  
  
-   <span data-ttu-id="e5d50-119">ファイアウォール ルールでは、特定のポート (ポート 1433 など) を経由したアクセスを許可できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-119">Firewall rules could allow access through a specific port, such as port 1433.</span></span> <span data-ttu-id="e5d50-120">または、 [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] プログラム (sqlservr.exe) へのアクセスを許可できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-120">Or firewall rules could allow access to the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] program (sqlservr.exe).</span></span> <span data-ttu-id="e5d50-121">どちらのメソッドもあまりよくありません。</span><span class="sxs-lookup"><span data-stu-id="e5d50-121">Neither method is better than the other.</span></span> <span data-ttu-id="e5d50-122">境界ネットワーク内のサーバーはイントラネット上のサーバーよりも攻撃に対して脆弱なので、このトピックでは、より正確に制御し、開くポートを個別に選択する場合を前提とします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-122">Because a server in a perimeter network is more vulnerable to attack than servers on an intranet, this topic assumes that you want to have more precise control, and individually select the ports that you open.</span></span> <span data-ttu-id="e5d50-123">そのため、このトピックでは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] が固定ポートでリッスンするように構成することを前提とします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-123">For that reason, this topic assumes that you will configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to listen on a fixed port.</span></span> <span data-ttu-id="e5d50-124">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で使用するポートの詳細については、「 [SQL Server のアクセスを許可するための Windows ファイアウォールの構成](../../../2014/sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md)」をご参照ください。</span><span class="sxs-lookup"><span data-stu-id="e5d50-124">For more information about the ports that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses, see [Configure the Windows Firewall to Allow SQL Server Access](../../../2014/sql-server/install/configure-the-windows-firewall-to-allow-sql-server-access.md).</span></span>  
  
-   <span data-ttu-id="e5d50-125">次の例では、TCP ポート 1433 を使用して [!INCLUDE[ssDE](../../includes/ssde-md.md)] へのアクセスを構成します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-125">This example configures access to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] by using TCP port 1433.</span></span> <span data-ttu-id="e5d50-126">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] コンポーネントが異なる他のポートは、同じ一般的な手順を使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-126">The other ports that are the different [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components use can be configured by using the same general steps.</span></span>  
  
 <span data-ttu-id="e5d50-127">**この例の一般的な手順は、次のとおりです。**</span><span class="sxs-lookup"><span data-stu-id="e5d50-127">**The general steps in this example are as follows:**</span></span>  
  
-   <span data-ttu-id="e5d50-128">コンピューターの IP アドレスを特定します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-128">Determine the IP addresses on the computer.</span></span>  
  
-   <span data-ttu-id="e5d50-129">特定の TCP ポートでリッスンするように [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] を構成します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-129">Configure [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to listen on a specific TCP port.</span></span>  
  
-   <span data-ttu-id="e5d50-130">セキュリティが強化された Windows ファイアウォールを構成します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-130">Configure Windows Firewall with Advanced Security.</span></span>  
  
## <a name="optional-procedures"></a><span data-ttu-id="e5d50-131">省略可能な手順</span><span class="sxs-lookup"><span data-stu-id="e5d50-131">Optional Procedures</span></span>  
 <span data-ttu-id="e5d50-132">コンピューターで使用可能で、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]で使用されている IP アドレスが既にわかっている場合、これらの手順をスキップできます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-132">If you already know the IP addresses available to your computer and that are used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you can skip these procedures.</span></span>  
  
#### <a name="to-determine-the-ip-addresses-available-on-the-computer"></a><span data-ttu-id="e5d50-133">コンピューターで使用可能な IP アドレスを特定するには</span><span class="sxs-lookup"><span data-stu-id="e5d50-133">To determine the IP addresses available on the computer</span></span>  
  
1.  <span data-ttu-id="e5d50-134">がインストールされているコンピューターで [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 、[**スタート**] をクリックし、[**実行**] をクリックして、「」と入力し `cmd` [!INCLUDE[clickOK](../../includes/clickok-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-134">On the computer on which [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is installed, click **Start**, click **Run**, type `cmd` and then [!INCLUDE[clickOK](../../includes/clickok-md.md)].</span></span>  
  
2.  <span data-ttu-id="e5d50-135">コマンド プロンプト ウィンドウで、「`ipconfig,`」と入力し、Enter キーを押してこのコンピューターで使用可能な IP アドレスを一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-135">In the Command Prompt window, type `ipconfig,` and then press ENTER to list the IP addresses available on this computer.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e5d50-136">**ipconfig** コマンドを使用すると、切断されている接続を含む使用可能な多くの接続が一覧表示される場合があります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-136">The **ipconfig** command sometimes lists many possible connections, including connections that are disconnected.</span></span> <span data-ttu-id="e5d50-137">**ipconfig** コマンドは、IPv4 アドレスと IPv6 アドレスの両方を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-137">The **ipconfig** command can list both IPv4 and IPv6 addresses.</span></span>  
  
3.  <span data-ttu-id="e5d50-138">使用中の IPv4 アドレスおよび IPv6 アドレスに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e5d50-138">Note the IPv4 addresses and IPv6 addresses that are being used.</span></span> <span data-ttu-id="e5d50-139">一時アドレス、サブネット マスク、既定のゲートウェイなど一覧内の他の情報は、TCP/IP ネットワークを構成する際の重要な情報です。</span><span class="sxs-lookup"><span data-stu-id="e5d50-139">The other information in the list, such as temporary addresses, subnet masks, and default gateways is important information for configuring a TCP/IP network.</span></span> <span data-ttu-id="e5d50-140">ただし、この情報はこの例では使用されません。</span><span class="sxs-lookup"><span data-stu-id="e5d50-140">But this information is not used in this example.</span></span>  
  
#### <a name="to-determine-the-ip-addresses-and-ports-used-by-ssnoversion"></a><span data-ttu-id="e5d50-141">使用される IP アドレスおよびポートを特定するには [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="e5d50-141">To determine the IP addresses and ports used by [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>  
  
1.  <span data-ttu-id="e5d50-142">**[スタート]** ボタンをクリックし、 **[すべてのプログラム]** 、[ [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)]]、 **[構成ツール]** の順にポイントして、 **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 構成マネージャー**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-142">Click **Start**, point to **All Programs**, point to [!INCLUDE[ssCurrentUI](../../includes/sscurrentui-md.md)], point to **Configuration Tools**, and then click **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager**.</span></span>  
  
2.  <span data-ttu-id="e5d50-143">\*\* [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager**のコンソールウィンドウで、[ネットワークの** [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 構成**]、[ \*\* \<instance name> のプロトコル**] の順に展開し、[ **tcp/ip**] をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-143">In **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Configuration Manager**, in the console pane, expand **[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Network Configuration**, expand **Protocols for \<instance name>**, and then double-click **TCP/IP**.</span></span>  
  
3.  <span data-ttu-id="e5d50-144">**[TCP/IP のプロパティ]** ダイアログ ボックスの **[IP アドレス]** タブに、 **IP1**、 **IP2**という形式で **IPAll**まで IP アドレスが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-144">In the **TCP/IP Properties** dialog box, on the **IP Addresses** tab, several IP addresses appear in the format **IP1**, **IP2**, up to **IPAll**.</span></span> <span data-ttu-id="e5d50-145">このうちいずれかが、ループバック アダプターの IP アドレス 127.0.0.1 です。</span><span class="sxs-lookup"><span data-stu-id="e5d50-145">One of these is for the IP address of the loopback adapter, 127.0.0.1.</span></span> <span data-ttu-id="e5d50-146">追加の IP アドレスがコンピューターで構成される各 IP アドレスとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-146">Additional IP addresses appear for each IP Address configured on the computer.</span></span>  
  
4.  <span data-ttu-id="e5d50-147">IP アドレスについて、 **[TCP 動的ポート]** ダイアログ ボックスに **0**が表示されている場合、これは [!INCLUDE[ssDE](../../includes/ssde-md.md)] が動的ポートでリッスンしていることを示しています。</span><span class="sxs-lookup"><span data-stu-id="e5d50-147">For any IP address if the **TCP Dynamic Ports** dialog box contains **0**, this indicates that the [!INCLUDE[ssDE](../../includes/ssde-md.md)] is listening on dynamic ports.</span></span> <span data-ttu-id="e5d50-148">この例では、再起動時に変わる可能性のある動的ポートではなく、固定ポートを使用します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-148">This example uses fixed ports instead of dynamic ports which could change upon restart.</span></span> <span data-ttu-id="e5d50-149">したがって、 **[TCP 動的ポート]** ダイアログ ボックスに **0**が表示されている場合は、0 を削除します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-149">Therefore if the **TCP Dynamic Ports** dialog box contains **0**, delete the 0.</span></span>  
  
5.  <span data-ttu-id="e5d50-150">構成する各 IP アドレスについて TCP ポートが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-150">Note the TCP port that is listed for each IP address that you want to configure.</span></span> <span data-ttu-id="e5d50-151">この例では、両方の IP アドレスが既定のポート 1433 でリッスンしているとします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-151">For this example, assume that both IP addresses are listening on the default port, 1433.</span></span>  
  
6.  <span data-ttu-id="e5d50-152">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で使用可能なポートの一部を使用しない場合、 **[プロトコル]** タブで、 **[すべて受信待ち]** 値を **[いいえ]** に変更し、 **[IP アドレス]** タブで、使用しない IP アドレスの **[アクティブ]** 値を **[いいえ]** に変更します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-152">If you do not want [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use some of the available ports, on the **Protocol** tab, change the **Listen All** value to **No**; and on the **IP Addresses** tab, change the **Active** value to **No** for the IP addresses that you do not want to use.</span></span>  
  
## <a name="configuring-windows-firewall-with-advanced-security"></a><span data-ttu-id="e5d50-153">セキュリティが強化された Windows ファイアウォールの構成</span><span class="sxs-lookup"><span data-stu-id="e5d50-153">Configuring Windows Firewall with Advanced Security</span></span>  
 <span data-ttu-id="e5d50-154">コンピューターで使用される IP アドレスと [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で使用されるポートを確認した後、ファイアウォール ルールを作成して、特定の IP アドレス用にそれらのルールを構成できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-154">After you know the IP addresses that the computer uses and the ports that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] uses, you can create firewall rules, and then configure those rules for specific IP addresses.</span></span>  
  
#### <a name="to-create-a-firewall-rule"></a><span data-ttu-id="e5d50-155">ファイアウォール ルールを作成するには</span><span class="sxs-lookup"><span data-stu-id="e5d50-155">To create a firewall rule</span></span>  
  
1.  <span data-ttu-id="e5d50-156">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がインストールされているコンピューターで、管理者としてログオンします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-156">On the computer on which [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is installed, log on as an administrator..</span></span>  
  
2.  <span data-ttu-id="e5d50-157">[**スタート**]、[**実行**] の順にクリックし、「 `wf.msc` 」と入力して [ **OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-157">Click **Start**, click **Run**, type `wf.msc`, and click **OK**.</span></span>  
  
3.  <span data-ttu-id="e5d50-158">**[ユーザー アカウント制御]** ダイアログ ボックスの **[続行]** をクリックし、管理者資格情報を使用して、セキュリティが強化された Windows ファイアウォールのスナップインを開きます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-158">In the **User Account Control** dialog box, click **Continue** to use the Administrator credentials to open the Windows Firewall with Advanced Security snap-in.</span></span>  
  
4.  <span data-ttu-id="e5d50-159">**[概要]** ページで、Windows ファイアウォールが有効であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-159">On the **Overview** page, confirm that the Windows Firewall is enabled.</span></span>  
  
5.  <span data-ttu-id="e5d50-160">左側のペインで、 **[受信の規則]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-160">In the left pane, click **Inbound Rules**.</span></span>  
  
6.  <span data-ttu-id="e5d50-161">**[受信の規則]** を右クリックし、 **[新しい規則]** をクリックして、 **新規の受信の規則ウィザード**を開きます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-161">Right-click **Inbound Rules**, and then click **New Rule** to open the **New Inbound Rule Wizard**.</span></span>  
  
7.  <span data-ttu-id="e5d50-162">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] プログラムのルールを作成できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-162">You could create a rule for the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] program.</span></span> <span data-ttu-id="e5d50-163">ただし、この例では固定ポートを使用しているので、 **[ポート]** を選択して **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-163">However, because this example uses a fixed port, select **Port**, and then click **Next**.</span></span>  
  
8.  <span data-ttu-id="e5d50-164">**[プロトコルおよびポート]** ページで、 **[TCP]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-164">On the **Protocols and Ports** page, select **TCP**.</span></span>  
  
9. <span data-ttu-id="e5d50-165">**[指定したローカル ポート]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-165">Select **Specified local ports**.</span></span> <span data-ttu-id="e5d50-166">コンマで区切ったポート番号を入力して、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-166">Type the port numbers separated by commas, and then click **Next**.</span></span> <span data-ttu-id="e5d50-167">この例では、既定のポートを構成するので、「`1433`」と入力します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-167">In this example, you will configure the default port; therefore, enter `1433`.</span></span>  
  
10. <span data-ttu-id="e5d50-168">**[アクション]** ページで、オプションを確認します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-168">On the **Action** page, review the options.</span></span> <span data-ttu-id="e5d50-169">この例では、セキュリティで保護された接続を指定するためにファイアウォールを使用しません。</span><span class="sxs-lookup"><span data-stu-id="e5d50-169">In this example, you are not using the firewall to force secure connections.</span></span> <span data-ttu-id="e5d50-170">したがって、 **[接続を許可する]** 、 **[次へ]** を順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-170">Therefore, click **Allow the connection**, and then click **Next**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e5d50-171">環境で、セキュリティで保護された接続が必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-171">Your environment might require secure connections.</span></span> <span data-ttu-id="e5d50-172">セキュリティで保護された接続のオプションのいずれかを選択すると、証明書および **[強制的に暗号化]** オプションの構成が必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-172">If you select one of the secure connections options, you might have to configure a certificate and the **Force Encryption** option.</span></span> <span data-ttu-id="e5d50-173">セキュリティで保護された接続の詳細については、「[データベース エンジンへの暗号化接続の有効化 &#40;SQL Server 構成マネージャー&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)」および「[データベース エンジンへの暗号化接続の有効化 &#40;SQL Server 構成マネージャー&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="e5d50-173">For more information about secure connections, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md) and [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
11. <span data-ttu-id="e5d50-174">**[プロファイル]** ページで、ルールに対して 1 つ以上のプロファイルを選択します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-174">On the **Profile** page, select one or more profiles for the rule.</span></span> <span data-ttu-id="e5d50-175">ファイアウォール プロファイルの詳細を確認するには、ファイアウォール プログラムの **[プロファイルの詳細を表示します]** リンクをクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-175">If you are unfamiliar with firewall profiles, click the **Learn more about profiles** link in the firewall program.</span></span>  
  
    -   <span data-ttu-id="e5d50-176">コンピューターがサーバーであり、ドメインに接続されているときのみ使用可能な場合は、 **[ドメイン]** を選択して、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-176">If the computer is a server and is available only when it is connected to a domain, select **Domain**, and then click **Next**.</span></span>  
  
    -   <span data-ttu-id="e5d50-177">コンピューターがモバイル コンピューターである場合 (たとえば、ラップトップ)、別のネットワークに接続するとき複数のプロファイルを使用する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-177">If the computer is a mobile computer (for example a laptop), it is likely to use multiple profiles when it connects to different networks.</span></span> <span data-ttu-id="e5d50-178">モバイル コンピューターの場合、別のプロファイル用に別のアクセス機能を構成できます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-178">For a mobile computer, you can configure different access capabilities for different profiles.</span></span> <span data-ttu-id="e5d50-179">たとえば、コンピューターがドメイン プロファイルを使用する場合はアクセスを許可し、パブリック プロファイルを使用する場合はアクセスを許可しないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-179">For example, you might allow access when the computer uses the Domain profile but not allow access when it uses the Public profile.</span></span>  
  
12. <span data-ttu-id="e5d50-180">**[名前]** ページで、ルールの名前および説明を指定して、 **[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-180">On the **Name** page, provide a name and description for the rule, and then click **Finish**.</span></span>  
  
13. <span data-ttu-id="e5d50-181">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] で使用する IP アドレスごとに別のルールを作成するには、この手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-181">Repeat this procedure to create another rule for each IP address that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will use.</span></span>  
  
 <span data-ttu-id="e5d50-182">1 つ以上のルールを作成した後、ルールを使用するコンピューターで各 IP アドレスを構成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-182">After you have created one or more rules, perform the following steps to configure each IP address on the computer to use a rule.</span></span>  
  
#### <a name="to-configure-the-firewall-rule-for-a-specific-ip-addresses"></a><span data-ttu-id="e5d50-183">特定の IP アドレス用にファイアウォール ルールを構成するには</span><span class="sxs-lookup"><span data-stu-id="e5d50-183">To configure the firewall rule for a specific IP addresses</span></span>  
  
1.  <span data-ttu-id="e5d50-184">**[セキュリティが強化された Windows ファイアウォール]** の **[受信の規則]** ページで、作成したルールを右クリックして、 **[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-184">On the **Inbound Rules** page of the **Windows Firewall with Advanced Security**, right-click the rule that you just created, and then click **Properties**.</span></span>  
  
2.  <span data-ttu-id="e5d50-185">**[規則のプロパティ]** ダイアログ ボックスで、 **[スコープ]** タブをクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-185">In the **Rule Properties** dialog box, select the **Scope** tab.</span></span>  
  
3.  <span data-ttu-id="e5d50-186">**[ローカル IP アドレス]** 領域で **[これらの IP アドレス]** を選択して、 **[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-186">In the **Local IP address** area, select **These IP addresses**, and then click **Add**.</span></span>  
  
4.  <span data-ttu-id="e5d50-187">**[IP アドレス]** ダイアログ ボックスで **[この IP アドレスまたはサブネット]** を選択して、構成する IP アドレスのいずれかを入力します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-187">In the **IP Address** dialog box, select **This IP address or subnet**, and then type one of the IP addresses that you want to configure.</span></span>  
  
5.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
6.  <span data-ttu-id="e5d50-188">**[リモート IP アドレス]** 領域で **[これらの IP アドレス]** を選択して、 **[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e5d50-188">In the **Remote IP address** area, select **These IP addresses**, and then click **Add**.</span></span>  
  
7.  <span data-ttu-id="e5d50-189">**[IP アドレス]** ダイアログ ボックスを使用して、コンピューター上の選択した IP アドレス用に接続を構成します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-189">Use the **IP Address** dialog box to configure connectivity for the selected IP address on the computer.</span></span> <span data-ttu-id="e5d50-190">指定した IP アドレス、IP アドレスの範囲、サブネット全体、または特定のコンピューターからの接続を有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-190">You can enable connections from specified IP addresses, ranges of IP addresses, whole subnets, or from certain computers.</span></span> <span data-ttu-id="e5d50-191">このオプションを正しく構成するには、ネットワークをよく理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="e5d50-191">To configure this option correctly, you must have a good understanding of the network.</span></span> <span data-ttu-id="e5d50-192">ネットワークの詳細については、ネットワーク管理者にお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="e5d50-192">For information about the network, see the network administrator.</span></span>  
  
8.  <span data-ttu-id="e5d50-193">**[IP アドレス]** ダイアログ ボックスを閉じるには、 **[OK]** をクリックします。次に **[OK]** をクリックして **[規則のプロパティ]** ダイアログ ボックスを閉じます。</span><span class="sxs-lookup"><span data-stu-id="e5d50-193">To close the **IP Address** dialog box, click **OK**; and then click **OK** to close the **Rule Properties** dialog box.</span></span>  
  
9. <span data-ttu-id="e5d50-194">マルチホーム コンピューターで他の IP アドレスを構成するには、別の IP アドレスと別のルールを使用して、この手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="e5d50-194">To configure the other IP addresses on a multi-homed computer, repeat this procedure by using another IP address and another rule.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e5d50-195">参照</span><span class="sxs-lookup"><span data-stu-id="e5d50-195">See Also</span></span>  
 <span data-ttu-id="e5d50-196">[SQL Server Browser サービス &#40;データベース エンジンと SSAS&#41;](../../database-engine/configure-windows/sql-server-browser-service-database-engine-and-ssas.md) </span><span class="sxs-lookup"><span data-stu-id="e5d50-196">[SQL Server Browser Service &#40;Database Engine and SSAS&#41;](../../database-engine/configure-windows/sql-server-browser-service-database-engine-and-ssas.md) </span></span>  
 [<span data-ttu-id="e5d50-197">プロキシ サーバーを介して SQL Server に接続する方法 &#40;SQL Server 構成マネージャー&#41;</span><span class="sxs-lookup"><span data-stu-id="e5d50-197">Connect to SQL Server Through a Proxy Server &#40;SQL Server Configuration Manager&#41;</span></span>](../../relational-databases/sql-server-configuration-manager.md)  
  
  
