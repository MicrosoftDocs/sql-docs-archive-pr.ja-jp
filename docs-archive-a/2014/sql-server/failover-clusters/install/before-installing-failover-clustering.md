---
title: フェールオーバー クラスタリングをインストールする前に | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
helpviewer_keywords:
- clusters [SQL Server], preinstallation checklist
- installing failover clusters
- failover clustering [SQL Server], preinstallation checklist
ms.assetid: a655225d-8c54-4b30-95fd-31f588167899
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 0ec04b567b7970b25aebeffaefc7bafaf1d56691
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87640560"
---
# <a name="before-installing-failover-clustering"></a><span data-ttu-id="52363-102">フェールオーバー クラスタリングをインストールする前に</span><span class="sxs-lookup"><span data-stu-id="52363-102">Before Installing Failover Clustering</span></span>
  <span data-ttu-id="52363-103">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターをインストールする前に、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を実行するハードウェアとオペレーティング システムを選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-103">Before you install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, you must select the hardware and the operating system on which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will run.</span></span> <span data-ttu-id="52363-104">また、Windows Server フェールオーバー クラスタリング (WSFC) を構成し、ネットワーク、セキュリティ、およびフェールオーバー クラスターで実行するその他のソフトウェアに関する考慮事項を見直す必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-104">You must also configure Windows Server Failover Clustering (WSFC), and review network, security, and considerations for other software that will run on your failover cluster.</span></span>  
  
 <span data-ttu-id="52363-105">Windows クラスターにローカル ディスク ドライブがあり、共有ドライブと同じドライブ文字が 1 つ以上のクラスター ノードでも使用されている場合、そのドライブに [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールできません。</span><span class="sxs-lookup"><span data-stu-id="52363-105">If a Windows cluster has a local disk drive and the same drive letter is also used on one or more cluster nodes as a shared drive, you cannot install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on that drive.</span></span>  
  
 <span data-ttu-id="52363-106">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスタリングの概念、機能、およびタスクについて詳しく学習するには、次のトピックも確認してください。</span><span class="sxs-lookup"><span data-stu-id="52363-106">You may also want to review the following topics to learn more about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, features and tasks.</span></span>  
  
|<span data-ttu-id="52363-107">トピックの説明</span><span class="sxs-lookup"><span data-stu-id="52363-107">Topic Description</span></span>|<span data-ttu-id="52363-108">トピック</span><span class="sxs-lookup"><span data-stu-id="52363-108">Topic</span></span>|  
|-----------------------|-----------|  
|<span data-ttu-id="52363-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスタリングの概念について説明し、関連するコンテンツとタスクへのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="52363-109">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering concepts, and provides links to associated content and tasks.</span></span>|[<span data-ttu-id="52363-110">AlwaysOn フェールオーバー クラスター インスタンス (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="52363-110">AlwaysOn Failover Cluster Instances (SQL Server)</span></span>](../windows/always-on-failover-cluster-instances-sql-server.md)|  
|<span data-ttu-id="52363-111">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー ポリシーの概念について説明し、組織の要件に合うようにフェールオーバー ポリシーを構成するためのリンクを示します。</span><span class="sxs-lookup"><span data-stu-id="52363-111">Describes [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover policy concepts, and provides links to configuring the failover policy to suit your organizational requirements.</span></span>|[<span data-ttu-id="52363-112">Failover Policy for Failover Cluster Instances</span><span class="sxs-lookup"><span data-stu-id="52363-112">Failover Policy for Failover Cluster Instances</span></span>](../windows/failover-policy-for-failover-cluster-instances.md)|  
|<span data-ttu-id="52363-113">既存の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターの維持方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="52363-113">Describes how to maintain and your existing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>|[<span data-ttu-id="52363-114">フェールオーバー クラスター インスタンスの管理とメンテナンス</span><span class="sxs-lookup"><span data-stu-id="52363-114">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)|  
|<span data-ttu-id="52363-115">Windows Server フェールオーバー クラスター (WSFC) に [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] をインストールする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="52363-115">Explains how to install [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)] on a Windows Server Failover Cluster (WSFC).</span></span>|[<span data-ttu-id="52363-116">SQL Server Analysis Services をクラスター化する方法</span><span class="sxs-lookup"><span data-stu-id="52363-116">How to Cluster SQL Server Analysis Services</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=396548)|  
  
  
  
##  <a name="best-practices"></a><a name="BestPractices"></a> <span data-ttu-id="52363-117">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="52363-117">Best Practices</span></span>  
  
-   <span data-ttu-id="52363-118">[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][リリース ノート](https://go.microsoft.com/fwlink/?LinkId=296445)を確認する</span><span class="sxs-lookup"><span data-stu-id="52363-118">Review [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445)</span></span>  
  
-   <span data-ttu-id="52363-119">前提条件となるソフトウェアをインストールします。</span><span class="sxs-lookup"><span data-stu-id="52363-119">Install prerequisite software.</span></span> <span data-ttu-id="52363-120">セットアップで [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]のインストールまたはアップグレードを行う前に、以下に示す前提条件となるソフトウェアをインストールすると、インストール時間を短縮できます。</span><span class="sxs-lookup"><span data-stu-id="52363-120">Before running Setup to install or upgrade to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], install the following prerequisites to reduce installation time.</span></span> <span data-ttu-id="52363-121">各フェールオーバー クラスター ノードでの前提条件となるソフトウェアのインストール、およびその後のノードの再起動は、セットアップを実行する前に 1 回だけ行います。</span><span class="sxs-lookup"><span data-stu-id="52363-121">You can install prerequisite software on each failover cluster node and then restart nodes once before running Setup.</span></span>  
  
    -   <span data-ttu-id="52363-122">Windows PowerShell は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップでインストールされなくなりました。</span><span class="sxs-lookup"><span data-stu-id="52363-122">Windows PowerShell is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span> <span data-ttu-id="52363-123">[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] [!INCLUDE[ssDE](../../../includes/ssde-md.md)] コンポーネントおよびをインストールするには、Windows PowerShell 2.0 が必要です [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] 。</span><span class="sxs-lookup"><span data-stu-id="52363-123">Windows PowerShell 2.0 is a prerequisite for installing [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][!INCLUDE[ssDE](../../../includes/ssde-md.md)] components and [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span> <span data-ttu-id="52363-124">Windows PowerShell 2.0 がコンピューターで表示されない場合は、「[Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214)」の手順に従って有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="52363-124">If Windows PowerShell 2.0 is not present on your computer, you can enable it by following the instructions on the [Windows Management Framework](https://go.microsoft.com/fwlink/?LinkId=186214) page.</span></span>  
  
    -   <span data-ttu-id="52363-125">.NET Framework 3.5 SP1 は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップでインストールされなくなりましたが、古い Windows オペレーティング システムに [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールする際に必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="52363-125">.NET Framework 3.5 SP1 is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but may be required while installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on older Windows operating systems.</span></span> <span data-ttu-id="52363-126">詳細については、「 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] [リリースノート](https://go.microsoft.com/fwlink/?LinkId=296445)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-126">For more information, see [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445).</span></span>  
  
    -   <span data-ttu-id="52363-127">\*\* [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 更新プログラムパッケージ:\*\* セットアップ中に .NET Framework 4 のインストールによってコンピューターが再起動されないようにするには、 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] [!INCLUDE[msCoName](../../../includes/msconame-md.md)] コンピューターに更新プログラムをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-127">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Update package:** To avoid computer restart due to .NET Framework 4 installation during setup, [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] setup requires a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] update to be installed on the computer.</span></span>  <span data-ttu-id="52363-128">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] を Windows 7 SP1 または [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] SP2 にインストールする場合、この更新プログラムは含まれています。</span><span class="sxs-lookup"><span data-stu-id="52363-128">If you are installing [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on Windows 7 SP1 or [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] SP2 this update is included.</span></span> <span data-ttu-id="52363-129">それより前の Windows オペレーティング システムにインストールする場合は、 [Windows Vista および Windows Server 2008 の .NET Framework 4.0 用 Microsoft Update](https://go.microsoft.com/fwlink/?LinkId=198093)からダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="52363-129">If you are installing on an older Windows operating system, download it from [Microsoft Update for .NET Framework 4.0 on Windows Vista and Windows Server 2008](https://go.microsoft.com/fwlink/?LinkId=198093).</span></span>  
  
    -   <span data-ttu-id="52363-130">.NET Framework 4: セットアップでは、クラスター化されたオペレーティング システムに対して .NET Framework 4 がインストールされます。</span><span class="sxs-lookup"><span data-stu-id="52363-130">.NET Framework 4: Setup installs .NET Framework 4 on a clustered operating system.</span></span> <span data-ttu-id="52363-131">インストール時間を短縮するには、セットアップを実行する前に .NET Framework 4 をインストールすることを検討してください。</span><span class="sxs-lookup"><span data-stu-id="52363-131">To reduce installation time, you may consider installing .NET Framework 4 before you run Setup.</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-132">セットアップ サポート ファイル。</span><span class="sxs-lookup"><span data-stu-id="52363-132">Setup support files.</span></span> <span data-ttu-id="52363-133">これらのファイルは、 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] インストール メディアにある SqlSupport.msi を実行してインストールできます。</span><span class="sxs-lookup"><span data-stu-id="52363-133">You can install these files by running SqlSupport.msi located on your [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] installation media.</span></span>  
  
-   <span data-ttu-id="52363-134">ウイルス対策プログラムが WSFC クラスターにインストールされていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-134">Verify that antivirus software is not installed on your WSFC cluster.</span></span> <span data-ttu-id="52363-135">詳細については、 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] サポート技術情報で [ウイルス対策ソフトウェアによるクラスター サービスの問題](https://go.microsoft.com/fwlink/?LinkId=116986)に関する資料を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-135">For more information, see the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base article, [Antivirus software may cause problems with cluster services](https://go.microsoft.com/fwlink/?LinkId=116986).</span></span>  
  
-   <span data-ttu-id="52363-136">フェールオーバー クラスター インストールのクラスター グループに名前を付けるときは、次の文字を使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="52363-136">When naming a cluster group for your failover cluster installation, you must not use any of the following characters in the cluster group name:</span></span>  
  
    -   <span data-ttu-id="52363-137">小なり演算子 (\<)</span><span class="sxs-lookup"><span data-stu-id="52363-137">Less than operator (\<)</span></span>  
  
    -   <span data-ttu-id="52363-138">大なり演算子 (>)</span><span class="sxs-lookup"><span data-stu-id="52363-138">Greater than operator (>)</span></span>  
  
    -   <span data-ttu-id="52363-139">二重引用符 (")</span><span class="sxs-lookup"><span data-stu-id="52363-139">Double quote (")</span></span>  
  
    -   <span data-ttu-id="52363-140">単一引用符 (')</span><span class="sxs-lookup"><span data-stu-id="52363-140">Single quote (')</span></span>  
  
    -   <span data-ttu-id="52363-141">アンパサンド (&)</span><span class="sxs-lookup"><span data-stu-id="52363-141">Ampersand (&)</span></span>  
  
     <span data-ttu-id="52363-142">既存のクラスター グループ名に、サポートされていない文字が含まれていないことも確認してください。</span><span class="sxs-lookup"><span data-stu-id="52363-142">Also verify that existing cluster group names do not contain unsupported characters.</span></span>  
  
-   <span data-ttu-id="52363-143">すべてのクラスター ノードが一意になるように構成します。構成要素は、COM+、ディスク ドライブ文字、管理者グループのユーザーなどです。</span><span class="sxs-lookup"><span data-stu-id="52363-143">Ensure that all cluster nodes are configured identically, including COM+, disk drive letters, and users in the administrators group.</span></span>  
  
-   <span data-ttu-id="52363-144">すべてのノードでシステム ログを消去し、そのシステム ログを再確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-144">Verify that you have cleared the system logs in all nodes and viewed the system logs again.</span></span> <span data-ttu-id="52363-145">続行する前に、そのログにエラー メッセージが記録されていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-145">Ensure that the logs are free of any error messages before continuing.</span></span>  
  
-   <span data-ttu-id="52363-146">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターをインストールまたは更新する前に、インストール中に [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] コンポーネントを使用する可能性のあるすべてのアプリケーションとサービスを無効にします。ただしディスク リソースはオンラインのままにします。</span><span class="sxs-lookup"><span data-stu-id="52363-146">Before you install or update a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster, disable all applications and services that might use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] components during installation, but leave the disk resources online.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-147">セットアップにより、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] クラスター グループと、フェールオーバー クラスターに含まれるディスクとの間に自動的に依存関係が設定されます。</span><span class="sxs-lookup"><span data-stu-id="52363-147">Setup automatically sets dependencies between the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cluster group and the disks that will be in the failover cluster.</span></span> <span data-ttu-id="52363-148">セットアップ前に、ディスクの依存関係を設定しないでください。</span><span class="sxs-lookup"><span data-stu-id="52363-148">Do not set dependencies for disks before Setup.</span></span>  
  
    -   <span data-ttu-id="52363-149">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターのインストール時に、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ネットワーク リソース名に対応するコンピューター オブジェクト (Active Directory コンピューター アカウント) が作成されます。</span><span class="sxs-lookup"><span data-stu-id="52363-149">During [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster installation, computer object (Active Directory computer accounts) for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Network Resource Name is created.</span></span> <span data-ttu-id="52363-150">[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] クラスターの場合、クラスター名アカウント (クラスター自体のコンピューター アカウント) には、コンピューター オブジェクトを作成する権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="52363-150">In a [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] cluster, the cluster name account (computer account of the cluster itself) needs to have permissions to create computer objects.</span></span> <span data-ttu-id="52363-151">詳細については、 [Active Directory でのアカウントの構成](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx)に関する記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-151">For more information, see [Configuring Accounts in Active Directory](https://technet.microsoft.com/library/cc731002\(WS.10\).aspx).</span></span>  
  
    -   <span data-ttu-id="52363-152">ストレージ オプションとして SMB ファイル共有を使用する場合は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップ アカウントにファイル サーバーに対する SeSecurityPrivilege が必要です。</span><span class="sxs-lookup"><span data-stu-id="52363-152">If you are using SMB File share as a storage option, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="52363-153">そのためには、ファイル サーバーで [ローカル セキュリティ ポリシー] コンソールを使用して [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [監査とセキュリティ ログの管理] **権限に** セットアップ アカウントを追加します。</span><span class="sxs-lookup"><span data-stu-id="52363-153">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
  
 
  
##  <a name="verify-your-hardware-solution"></a><a name="Hardware"></a> <span data-ttu-id="52363-154">ハードウェア ソリューションの確認</span><span class="sxs-lookup"><span data-stu-id="52363-154">Verify Your Hardware Solution</span></span>  
  
-   <span data-ttu-id="52363-155">クラスター ソリューションに地理的に分散したクラスター ノードが含まれている場合は、ネットワークの待機時間や共有ディスクのサポートなどの項目も確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-155">If the cluster solution includes geographically dispersed cluster nodes, additional items like network latency and shared disk support must be verified.</span></span>  
  
    -   <span data-ttu-id="52363-156">[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] と [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]の詳細については、 [フェールオーバー クラスター用ハードウェアの検証](https://go.microsoft.com/fwlink/?LinkId=196817) に関するページおよび「 [Windows Server 2008 フェールオーバー クラスターに関するマイクロソフト サポート ポリシー](https://go.microsoft.com/fwlink/?LinkId=196818)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-156">For more information about [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], see [Validating Hardware for a failover cluster](https://go.microsoft.com/fwlink/?LinkId=196817) and [Support Policy for Windows Failover Clusters](https://go.microsoft.com/fwlink/?LinkId=196818).</span></span>  
  
-   <span data-ttu-id="52363-157">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールするディスクが圧縮または暗号化されていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-157">Verify that the disk where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is not compressed or encrypted.</span></span> <span data-ttu-id="52363-158">圧縮されたドライブまたは暗号化されたドライブに [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールしようとすると、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップが失敗します。</span><span class="sxs-lookup"><span data-stu-id="52363-158">If you attempt to install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a compressed drive or an encrypted drive, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup fails.</span></span>  
  
-   <span data-ttu-id="52363-159">SAN 構成は、 [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] および [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] の Advanced Server Edition および Datacenter Server Edition でもサポートされます。</span><span class="sxs-lookup"><span data-stu-id="52363-159">SAN configurations are also supported on [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] Advanced Server and Datacenter Server editions.</span></span> <span data-ttu-id="52363-160">Windows Catalog and Hardware Compatibility List の "Cluster/Multi-cluster Device" カテゴリには、SAN 対応のストレージ デバイス セットが一覧表示されます。このデバイス セットはテスト済みであり、複数の WSFC クラスターが接続されている SAN ストレージ装置としてサポートされています。</span><span class="sxs-lookup"><span data-stu-id="52363-160">The Windows Catalog and Hardware Compatibility List category "Cluster/Multi-cluster Device" lists the set of SAN-capable storage devices that have been tested and are supported as SAN storage units with multiple WSFC clusters attached.</span></span> <span data-ttu-id="52363-161">認定済みのコンポーネントを検索した後で、クラスター検証を実行してください。</span><span class="sxs-lookup"><span data-stu-id="52363-161">Run cluster validation after finding the certified components.</span></span>  
  
-   <span data-ttu-id="52363-162">データ ファイルをインストールするための SMB ファイル共有もサポートされています。</span><span class="sxs-lookup"><span data-stu-id="52363-162">SMB File Share is also supported for installing data files.</span></span> <span data-ttu-id="52363-163">詳細については、「 [データ ファイルのストレージの種類](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-163">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes).</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="52363-164">SMB ファイル共有ストレージとして Windows ファイル サーバーを使用する場合は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップ アカウントにファイル サーバーに対する SeSecurityPrivilege が必要です。</span><span class="sxs-lookup"><span data-stu-id="52363-164">If you are using Windows File Server as a SMB File Share storage, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup account must have SeSecurityPrivilege on the file server.</span></span> <span data-ttu-id="52363-165">そのためには、ファイル サーバーで [ローカル セキュリティ ポリシー] コンソールを使用して [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [監査とセキュリティ ログの管理] **権限に** セットアップ アカウントを追加します。</span><span class="sxs-lookup"><span data-stu-id="52363-165">To do this, using the Local Security Policy console on the file server, add the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup account to **Manage auditing and security log** rights.</span></span>  
    >   
    >  <span data-ttu-id="52363-166">Windows ファイル サーバー以外の SMB ファイル共有ストレージを使用する場合は、ファイル サーバー側での設定についてストレージ ベンダーに問い合わせてください。</span><span class="sxs-lookup"><span data-stu-id="52363-166">If you are using SMB file share storage other than Windows File server, please consult the storage vendor for an equivalent setting on the file server side.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-167">ではマウント ポイントがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="52363-167">supports mount points.</span></span>  
  
     <span data-ttu-id="52363-168">マウントされたボリューム、つまりマウント ポイントを使用すると、1 つのドライブ文字を使用して多数のディスクまたはボリュームを参照できます。</span><span class="sxs-lookup"><span data-stu-id="52363-168">A mounted volume, or mount point, allows you to use a single drive letter to refer to many disks or volumes.</span></span> <span data-ttu-id="52363-169">通常のディスクやボリュームを参照するドライブ文字 D: を使用している場合、ドライブ文字 D: の下のディレクトリとして、新しいディスクまたはボリュームを接続するか "マウント" できます。この場合、新しいディスクまたはボリューム自体にドライブ文字は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="52363-169">If you have a drive letter D: that refers to a regular disk or volume, you can connect or "mount" additional disks or volumes as directories under drive letter D: without the additional disks or volumes requiring drive letters of their own.</span></span>  
  
     <span data-ttu-id="52363-170">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスタリングに関するマウント ポイントの他の考慮事項は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="52363-170">Additional mount point considerations for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering:</span></span>  
  
    -   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-171">のセットアップでは、マウントされたドライブの基本ドライブがドライブ文字と関連付けられている必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-171">Setup requires that the base drive of a mounted drive has an associated drive letter.</span></span> <span data-ttu-id="52363-172">フェールオーバー クラスターのインストールでは、この基本ドライブをクラスター化されるドライブにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-172">For failover cluster installations, this base drive must be a clustered drive.</span></span> <span data-ttu-id="52363-173">このリリースでは、ボリューム GUID はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="52363-173">Volume GUIDs are not supported in this release.</span></span>  
  
    -   <span data-ttu-id="52363-174">ドライブ文字を持つ基本ドライブは、フェールオーバー クラスター インスタンス間で共有できません。</span><span class="sxs-lookup"><span data-stu-id="52363-174">The base drive, the one with the drive letter, cannot be shared among failover cluster instances.</span></span> <span data-ttu-id="52363-175">フェールオーバー クラスターには、通常、このような制約がありますが、スタンドアロンのサーバーや複数インスタンスのサーバーにはこのような制約はありません。</span><span class="sxs-lookup"><span data-stu-id="52363-175">This is a normal restriction for failover clusters, but is not a restriction on stand-alone, multi-instance servers.</span></span>  
  
    -   <span data-ttu-id="52363-176">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のクラスター化インストールは、使用可能なドライブ文字数以下に制限されます。</span><span class="sxs-lookup"><span data-stu-id="52363-176">The clustered installations of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are limited to the number of available drive letters.</span></span> <span data-ttu-id="52363-177">オペレーティング システムのドライブ文字は 1 文字だけで指定し、他のすべてのドライブ文字を通常のクラスター ドライブか、マウント ポイントをホストするクラスター ドライブとして使用できると想定しているので、フェールオーバー クラスターごとの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の最大インスタンス数は 25 になります。</span><span class="sxs-lookup"><span data-stu-id="52363-177">Assuming that you use only one drive letter for the operating system, and all other drive letters are available as normal cluster drives or cluster drives hosting mount points, you are limited to a maximum of 25 instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] per failover cluster.</span></span>  
  
        > [!TIP]  
        >  <span data-ttu-id="52363-178">SMB ファイル共有オプションを使用すると、インスタンス数の上限を 25 より高くできます。</span><span class="sxs-lookup"><span data-stu-id="52363-178">The 25 instance limit can be overcome by using SMB file share option.</span></span> <span data-ttu-id="52363-179">SMB ファイル共有をストレージ オプションとして使用する場合は、最大 50 の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンスをインストールできます。</span><span class="sxs-lookup"><span data-stu-id="52363-179">If you use SMB file share as the storage option, you can install up to 50 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instances.</span></span>  
  
    -   <span data-ttu-id="52363-180">増設ドライブのマウント後のフォーマットはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="52363-180">Formatting a drive after mounting additional drives is not supported.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-181">フェールオーバー クラスターのインストールでは、tempdb ファイルをインストールする場合のみローカル ディスクがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="52363-181">failover cluster installation supports Local Disk only for installing the tempdb files.</span></span> <span data-ttu-id="52363-182">tempdb のデータ ファイルおよびログ ファイルに指定されたパスが、すべてのクラスター ノードで有効であることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="52363-182">Ensure that the path specified for the tempdb data and log files is valid on all the cluster nodes.</span></span> <span data-ttu-id="52363-183">フェールオーバー中に、tempdb のディレクトリがフェールオーバーのターゲット ノード上で利用できない場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースはオンラインへの移行に失敗します。</span><span class="sxs-lookup"><span data-stu-id="52363-183">During failover, if the tempdb directories are not available on the failover target node, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource will fail to come online.</span></span> <span data-ttu-id="52363-184">詳細については、「 [データ ファイルのストレージの種類](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) 」および「 [データベース エンジンの構成 - データ ディレクトリ](../../install/database-engine-configuration-data-directories.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-184">For more information, see [Storage Types for Data Files](../../install/hardware-and-software-requirements-for-installing-sql-server.md#StorageTypes) and [Database Engine Configuration - Data Directories](../../install/database-engine-configuration-data-directories.md).</span></span>  
  
-   <span data-ttu-id="52363-185">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターを iSCSI テクノロジのコンポーネント上に配置する場合は、慎重に行ってください。</span><span class="sxs-lookup"><span data-stu-id="52363-185">If you deploy a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster on iSCSI technology components, we recommend that you use appropriate caution.</span></span> <span data-ttu-id="52363-186">詳細については、「 [iSCSI テクノロジ コンポーネント上の SQL Server のサポート](https://go.microsoft.com/fwlink/?LinkId=116960)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-186">For more information, see [Support for SQL Server on iSCSI technology components](https://go.microsoft.com/fwlink/?LinkId=116960).</span></span>  
  
-   <span data-ttu-id="52363-187">詳細については、 [Microsoft クラスタリング用の SQL Server サポート ポリシー](https://go.microsoft.com/fwlink/?LinkId=116958)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-187">For more information, see [SQL Server support policy for Microsoft Clustering](https://go.microsoft.com/fwlink/?LinkId=116958).</span></span>  
  
-   <span data-ttu-id="52363-188">適切なクォーラム ドライブ構成の詳細については、 [クォーラムの構成](https://go.microsoft.com/fwlink/?LinkId=196816)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-188">For more information about proper quorum drive configuration, see [Quorum Drive Configuration Information](https://go.microsoft.com/fwlink/?LinkId=196816).</span></span>  
  
-   <span data-ttu-id="52363-189">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の元のインストール ファイルおよびクラスターが、異なる複数のドメインに分散している場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターをインストールするには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターに対して使用できる現在のドメインにインストール ファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="52363-189">To install a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster when the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] source installation files and the cluster exist on different domains, copy the installation files to the current domain available to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>  
  
  
  
##  <a name="review-security-considerations"></a><a name="Security"></a> <span data-ttu-id="52363-190">セキュリティに関する注意点の確認</span><span class="sxs-lookup"><span data-stu-id="52363-190">Review Security Considerations</span></span>  
  
-   <span data-ttu-id="52363-191">暗号化を使用するには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター内のすべてのノードに、WSFC クラスターの完全修飾 DNS 名を使用してサーバー証明書をインストールします。</span><span class="sxs-lookup"><span data-stu-id="52363-191">To use encryption, install the server certificate with the fully qualified DNS name of the WSFC cluster on all nodes in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span> <span data-ttu-id="52363-192">たとえば、"Test1.DomainName.com" と "Test2.DomainName.com" という名前のノード、および "Virtsql" という名前の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンスが存在する 2 ノード クラスターでは、"Virtsql.DomainName.com" の証明書を入手し、test1 ノードと test2 ノードにその証明書をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-192">For example, if you have a two-node cluster, with nodes named "Test1.DomainName.com" and "Test2.DomainName.com" and a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance named "Virtsql", you must get a certificate for "Virtsql.DomainName.com" and install the certificate on the test1 and test2 nodes.</span></span> <span data-ttu-id="52363-193">その後、 **構成マネージャーの** [プロトコル暗号化を設定する] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] チェック ボックスをオンにして、フェールオーバー クラスターでの暗号化を構成できるようになります。</span><span class="sxs-lookup"><span data-stu-id="52363-193">Then you can select the **Force protocol encryption** check box on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to configure your failover cluster for encryption.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="52363-194">**[プロトコル暗号化を設定する]** チェック ボックスは、フェールオーバー クラスター インスタンスに参加しているすべてのノードに証明書をインストールした後でオンにしてください。</span><span class="sxs-lookup"><span data-stu-id="52363-194">Do not select the **Force protocol encryption** check box until you have certificates installed on all participating nodes in your failover cluster instance.</span></span>  
  
-   <span data-ttu-id="52363-195">以前のバージョンとサイド バイ サイドでインストールされている [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービスは、グローバル ドメイン グループのみで検出されたアカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-195">For [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installations in side-by-side configurations with previous versions, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must use accounts found only in the global domains group.</span></span> <span data-ttu-id="52363-196">さらに、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービスによって使用されるアカウントは、ローカルの Administrators グループに表示されないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-196">Additionally, accounts used by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] services must not appear in the local Administrators group.</span></span> <span data-ttu-id="52363-197">このガイドラインに沿っていない場合、予期しないセキュリティ動作を招くことになります。</span><span class="sxs-lookup"><span data-stu-id="52363-197">Failure to comply with this guideline will result in unexpected security behavior.</span></span>  
  
-   <span data-ttu-id="52363-198">フェールオーバー クラスターを作成するには、サービスとしてログオンする権限、およびフェールオーバー クラスター インスタンスのすべてのノード上にあるオペレーティング システムの一部として機能する権限を持つ、ローカルな管理者である必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-198">To create a failover cluster, you must be a local administrator with permissions to log on as a service, and to act as part of the operating system on all nodes of the failover cluster instance.</span></span>  
  
-   <span data-ttu-id="52363-199">[!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)]では、 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] サービスで使用するためのサービス SID が自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="52363-199">On [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)], service SIDs are generated automatically for use with [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] services.</span></span> <span data-ttu-id="52363-200">[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] の以前のバージョンからアップグレードされた [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]フェールオーバー クラスター インスタンスでは、既存のドメイン グループおよび ACL 構成が保持されます。</span><span class="sxs-lookup"><span data-stu-id="52363-200">For [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] failover cluster instances upgraded from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], existing domain groups and ACL configurations will be preserved.</span></span>  
  
-   <span data-ttu-id="52363-201">ドメイン グループは、コンピューターのアカウントと同じドメイン内にある必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-201">Domain groups must be within the same domain as the machine accounts.</span></span> <span data-ttu-id="52363-202">たとえば、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインストール先のコンピューターが、MYDOMAIN の子である SQLSVR ドメイン内にある場合は、SQLSVR ドメイン内のグループを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-202">For example, if the machine where [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] will be installed is in the SQLSVR domain which is a child of MYDOMAIN, you must specify a group in the SQLSVR domain.</span></span> <span data-ttu-id="52363-203">SQLSVR ドメインには、MYDOMAIN に属するユーザー アカウントが含まれることもあります。</span><span class="sxs-lookup"><span data-stu-id="52363-203">The SQLSVR domain may contain user accounts from MYDOMAIN.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-204">フェールオーバー クラスタリングは、クラスター ノードがドメイン コントローラーの場合はインストールできません。</span><span class="sxs-lookup"><span data-stu-id="52363-204">failover clustering cannot be installed where cluster nodes are domain controllers.</span></span>  
  
-   <span data-ttu-id="52363-205">「 [SQL Server インストールにおけるセキュリティの考慮事項](../../install/security-considerations-for-a-sql-server-installation.md)の内容について検討してください。</span><span class="sxs-lookup"><span data-stu-id="52363-205">Review content in [Security Considerations for a SQL Server Installation](../../install/security-considerations-for-a-sql-server-installation.md).</span></span>  
  
-   <span data-ttu-id="52363-206">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]で Kerberos 認証を有効にするには、 [サポート技術情報の「](https://support.microsoft.com/kb/319723) SQL Server で Kerberos 認証を使用する方法 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-206">To enable Kerberos authentication with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [How to use Kerberos authentication in SQL Server](https://support.microsoft.com/kb/319723) in the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Knowledge Base.</span></span>  
  
  
  
##  <a name="review-network-port-and-firewall-considerations"></a><a name="Network"></a> <span data-ttu-id="52363-207">ネットワーク、ポート、およびファイアウォールに関する注意点の確認</span><span class="sxs-lookup"><span data-stu-id="52363-207">Review Network, Port, and Firewall Considerations</span></span>  
  
-   <span data-ttu-id="52363-208">すべてのプライベート ネットワーク カードの NetBIOS が無効になっていることを確認してから、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップを開始します。</span><span class="sxs-lookup"><span data-stu-id="52363-208">Verify that you have disabled NetBIOS for all private network cards before beginning [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
-   <span data-ttu-id="52363-209">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のネットワーク名と IP アドレスは、ファイル共有などの、フェールオーバー クラスタリング以外の目的に使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="52363-209">The network name and IP address of your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] should not be used for any other purpose, such as file sharing.</span></span> <span data-ttu-id="52363-210">ファイル共有リソースを作成する場合、異なる一意なネットワーク名と IP アドレスをそのリソースに使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-210">If you want to create a file share resource, use a different, unique network name and IP address for the resource.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="52363-211">データ ドライブでファイル共有を使用すると [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の動作とパフォーマンスに影響することがあるので、ファイル共有の使用はお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="52363-211">We recommend that you do not use file shares on data drives, because they can affect [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] behavior and performance.</span></span>  
  
-   <span data-ttu-id="52363-212">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] でクラスター内の名前付きパイプと TCP/IP Sockets over TCP/IP の両方がサポートされている場合でも、クラスター化された構成では TCP/IP ソケットを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="52363-212">Even though [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] supports both Named Pipes and TCP/IP Sockets over TCP/IP within a cluster, we recommend that you use TCP/IP Sockets in a clustered configuration.</span></span>  
  
-   <span data-ttu-id="52363-213">ISA Server は Windows クラスタリングでサポートされていないので、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターでもサポートされないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="52363-213">Note that ISA server is not supported on Windows Clustering and consequently is also not supported on [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters.</span></span>  
  
-   <span data-ttu-id="52363-214">リモート レジストリ サービスを起動して実行している必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-214">The Remote Registry service must be up and running.</span></span>  
  
-   <span data-ttu-id="52363-215">リモート管理が有効になっている必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-215">Remote Administration must be enabled.</span></span>  
  
-   <span data-ttu-id="52363-216">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ポートでは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 構成マネージャーを使用して、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ネットワークの構成で、ブロックを解除するインスタンスの TCP/IP プロトコルを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-216">For the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] port, use [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager to check the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] network configuration for the TCP/IP protocol for the instance you want to unblock.</span></span> <span data-ttu-id="52363-217">インストール後に TCP を使用して [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] に接続する場合は、IPALL に対して TCP ポートを有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-217">You must enable the TCP port for IPALL if you want to connect to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] using TCP after installation.</span></span> <span data-ttu-id="52363-218">既定では、SQL Browser は UDP ポート 1434 でリッスンします。</span><span class="sxs-lookup"><span data-stu-id="52363-218">By default, SQL Browser listens on UDP port 1434.</span></span>  
  
-   <span data-ttu-id="52363-219">フェールオーバー クラスター セットアップ操作には、ネットワーク バインド順序をチェックするルールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="52363-219">Failover cluster Setup operations include a rule that checks network binding order.</span></span> <span data-ttu-id="52363-220">バインド順序が正しいように見えても、実際には実体のない無効化された NIC 構成がシステムに存在している場合があります。</span><span class="sxs-lookup"><span data-stu-id="52363-220">Although binding orders might seem correct, you might have disabled or "ghosted" NIC configurations on the system.</span></span> <span data-ttu-id="52363-221">実体のない NIC 構成が存在すると、バインド順序に影響が生じ、バインド順序ルールから警告が発行されることがあります。</span><span class="sxs-lookup"><span data-stu-id="52363-221">"Ghosted" NIC configurations can affect the binding order and cause the binding order rule to issue a warning.</span></span> <span data-ttu-id="52363-222">この状況を回避するには、次の手順で無効なネットワーク アダプターを特定し、削除します。</span><span class="sxs-lookup"><span data-stu-id="52363-222">To avoid this situation, use the following steps to identify and remove disabled network adapters:</span></span>  
  
    1.  <span data-ttu-id="52363-223">コマンド プロンプトで、「set devmgr_Show_Nonpersistent_Devices=1」と入力します。</span><span class="sxs-lookup"><span data-stu-id="52363-223">At a command prompt, type: set devmgr_Show_Nonpersistent_Devices=1.</span></span>  
  
    2.  <span data-ttu-id="52363-224">「start Devmgmt.msc」と入力し、実行します。</span><span class="sxs-lookup"><span data-stu-id="52363-224">Type and run: start Devmgmt.msc.</span></span>  
  
    3.  <span data-ttu-id="52363-225">ネットワーク アダプターの一覧を展開します。</span><span class="sxs-lookup"><span data-stu-id="52363-225">Expand the list of network adapters.</span></span> <span data-ttu-id="52363-226">この一覧には、物理的なアダプターのみが表示されているはずです。</span><span class="sxs-lookup"><span data-stu-id="52363-226">Only the physical adapters should be in the list.</span></span> <span data-ttu-id="52363-227">無効なネットワーク アダプターがある場合は、セットアップでネットワーク バインド順序ルールに関するエラーが報告されます。</span><span class="sxs-lookup"><span data-stu-id="52363-227">If you have a disabled network adapter, Setup will report a failure for the network binding order rule.</span></span> <span data-ttu-id="52363-228">コントロール パネルの [ネットワーク接続] でも、そのアダプターが無効であることが示されます。</span><span class="sxs-lookup"><span data-stu-id="52363-228">Control Panel/Network Connections will also show that adapter was disabled.</span></span> <span data-ttu-id="52363-229">コントロール パネルの [ネットワーク接続] に表示される一覧が、devmgmt.msc を実行して示される有効な物理的アダプターの一覧と同じであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-229">Confirm that Network Settings in Control Panel shows the same list of enabled physical adapters that devmgmt.msc shows.</span></span>  
  
    4.  <span data-ttu-id="52363-230">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップを実行する前に、無効なネットワーク アダプターを削除します。</span><span class="sxs-lookup"><span data-stu-id="52363-230">Remove disabled network adapters before you run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
    5.  <span data-ttu-id="52363-231">セットアップが完了したら、コントロール パネルの [ネットワーク接続] に戻り、現在使用されていないネットワーク アダプターを無効にします。</span><span class="sxs-lookup"><span data-stu-id="52363-231">After Setup finishes, return to Network Connections in Control Panel and disable any network adapters that are not currently in use.</span></span>  
  
  
  
##  <a name="verify-your-operating-system"></a><a name="OS_Support"></a><span data-ttu-id="52363-232">オペレーティングシステムを確認する</span><span class="sxs-lookup"><span data-stu-id="52363-232">Verify Your Operating System</span></span>  
 <span data-ttu-id="52363-233">オペレーティング システムが適切にインストールされており、フェールオーバー クラスタリングをサポートするように設定されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-233">Make sure that your operating system is installed properly and is designed to support failover clustering.</span></span> <span data-ttu-id="52363-234">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の各エディションおよびそれらをサポートするオペレーティング システムの一覧を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="52363-234">The following table is a list of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] editions and the operating systems that support them.</span></span>  
  
|[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-235">エディション</span><span class="sxs-lookup"><span data-stu-id="52363-235">edition</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="52363-236">Enterprise</span><span class="sxs-lookup"><span data-stu-id="52363-236">Enterprise</span></span>|[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] <span data-ttu-id="52363-237">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="52363-237">Datacenter Server</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="52363-238">Enterprise</span><span class="sxs-lookup"><span data-stu-id="52363-238">Enterprise</span></span>|[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="52363-239">Datacenter Server</span><span class="sxs-lookup"><span data-stu-id="52363-239">Datacenter Server</span></span>|  
|---------------------------------------|------------------------------------------------|-------------------------------------------------------|----------------------------------------------|-----------------------------------------------------|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]<span data-ttu-id="52363-240">Enterprise (64 ビット) x64<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="52363-240">Enterprise (64-bit) x64<sup>1</sup></span></span>|<span data-ttu-id="52363-241">はい</span><span class="sxs-lookup"><span data-stu-id="52363-241">Yes</span></span>|<span data-ttu-id="52363-242">はい</span><span class="sxs-lookup"><span data-stu-id="52363-242">Yes</span></span>|<span data-ttu-id="52363-243">はい<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="52363-243">Yes<sup>2</sup></span></span>|<span data-ttu-id="52363-244">はい<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="52363-244">Yes<sup>2</sup></span></span>|  
|[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] <span data-ttu-id="52363-245">Enterprise (32 ビット)</span><span class="sxs-lookup"><span data-stu-id="52363-245">Enterprise (32-bit)</span></span>|<span data-ttu-id="52363-246">はい</span><span class="sxs-lookup"><span data-stu-id="52363-246">Yes</span></span>|<span data-ttu-id="52363-247">はい</span><span class="sxs-lookup"><span data-stu-id="52363-247">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="52363-248">Developer (64 ビット)</span><span class="sxs-lookup"><span data-stu-id="52363-248">-bit) Developer (64</span></span>|<span data-ttu-id="52363-249">はい</span><span class="sxs-lookup"><span data-stu-id="52363-249">Yes</span></span>|<span data-ttu-id="52363-250">はい</span><span class="sxs-lookup"><span data-stu-id="52363-250">Yes</span></span>|<span data-ttu-id="52363-251">はい <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="52363-251">Yes <sup>2</sup></span></span>|<span data-ttu-id="52363-252">はい <sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="52363-252">Yes <sup>2</sup></span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="52363-253">Developer (32 ビット)</span><span class="sxs-lookup"><span data-stu-id="52363-253">Developer (32-bit)</span></span>|<span data-ttu-id="52363-254">はい</span><span class="sxs-lookup"><span data-stu-id="52363-254">Yes</span></span>|<span data-ttu-id="52363-255">はい</span><span class="sxs-lookup"><span data-stu-id="52363-255">Yes</span></span>|||  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="52363-256">Standard (64 ビット)</span><span class="sxs-lookup"><span data-stu-id="52363-256">Standard (64-bit)</span></span>|<span data-ttu-id="52363-257">はい</span><span class="sxs-lookup"><span data-stu-id="52363-257">Yes</span></span>|<span data-ttu-id="52363-258">はい</span><span class="sxs-lookup"><span data-stu-id="52363-258">Yes</span></span>|<span data-ttu-id="52363-259">はい</span><span class="sxs-lookup"><span data-stu-id="52363-259">Yes</span></span>|<span data-ttu-id="52363-260">はい</span><span class="sxs-lookup"><span data-stu-id="52363-260">Yes</span></span>|  
|[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="52363-261">Standard (32 ビット)</span><span class="sxs-lookup"><span data-stu-id="52363-261">Standard (32-bit)</span></span>|<span data-ttu-id="52363-262">はい</span><span class="sxs-lookup"><span data-stu-id="52363-262">Yes</span></span>|<span data-ttu-id="52363-263">はい</span><span class="sxs-lookup"><span data-stu-id="52363-263">Yes</span></span>|||  
  
 <span data-ttu-id="52363-264"><sup>1 つ</sup>の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] クラスターは WOW モードではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="52363-264"><sup>1</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] clusters are not supported in WOW mode.</span></span> <span data-ttu-id="52363-265">これには、WOW で最初にインストールされた [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターの以前のバージョンからのアップグレードが含まれます。</span><span class="sxs-lookup"><span data-stu-id="52363-265">That includes upgrades from previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clusters that were originally installed in WOW.</span></span> <span data-ttu-id="52363-266">この場合に使用できる唯一のアップグレード オプションは、新しいバージョンをサイド バイ サイドでインストールしてから移行することです。</span><span class="sxs-lookup"><span data-stu-id="52363-266">For those the only upgrade option is to install the new version side by side and migrate.</span></span>  
  
 <span data-ttu-id="52363-267"><sup>2</sup> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネットフェールオーバークラスタリングでサポートされます。</span><span class="sxs-lookup"><span data-stu-id="52363-267"><sup>2</sup> Supported for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover clustering.</span></span>  
  
  
  
##  <a name="additional-considerations-for-multi-subnet-configurations"></a><a name="MultiSubnet"></a> <span data-ttu-id="52363-268">マルチサブネットの構成に関するその他の注意点</span><span class="sxs-lookup"><span data-stu-id="52363-268">Additional Considerations for Multi-Subnet Configurations</span></span>  
 <span data-ttu-id="52363-269">以下のセクションでは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターをインストールする場合に留意する要件について説明します。</span><span class="sxs-lookup"><span data-stu-id="52363-269">The sections below describe the requirements to keep in mind when installing a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster.</span></span> <span data-ttu-id="52363-270">マルチサブネットを構成する場合は、複数のサブネットにわたってクラスター化されるため、この操作では、複数の IP アドレスが使用され、IP アドレス リソースの依存関係への変更が行われます。</span><span class="sxs-lookup"><span data-stu-id="52363-270">A multi-subnet configuration involves clustering across multiple subnets, therefore involves using multiple IP addresses and changes to IP address resource dependencies.</span></span>  
  
### <a name="ssnoversion-edition-and-operating-system-considerations"></a>[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-271">のエディションとオペレーティング システムに関する注意点</span><span class="sxs-lookup"><span data-stu-id="52363-271">Edition and Operating System Considerations</span></span>  
  
-   <span data-ttu-id="52363-272">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターをサポートする [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のエディションについては、「[SQL Server 2014 の各エディションがサポートされる機能](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-272">For information about the editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that support a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, see [Features Supported by the Editions of SQL Server 2014](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
-   <span data-ttu-id="52363-273">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターを作成するには、まず、複数のサブネット上に [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] マルチサイト フェールオーバー クラスターを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-273">To create a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster, you must first create the [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover cluster on multiple subnets.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-274">フェールオーバー クラスターでは、Windows Server フェールオーバー クラスターを利用して、フェールオーバー発生時に IP 依存関係の条件が有効であるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="52363-274">failover cluster depends on the Windows Server failover cluster to make sure that the IP dependency conditions are valid if there is a failover.</span></span>  
  
-   [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] <span data-ttu-id="52363-275">では、すべてのクラスター サーバーが同じ Active Directory ドメインに属している必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-275">requires that all the cluster servers must be in the same Active Directory domain.</span></span> <span data-ttu-id="52363-276">したがって、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターでは、クラスター ノードが異なるサブネットにある場合でも、それらはすべて同じ Active Directory ドメインに属している必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-276">Therefore, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster requires that all the cluster nodes be in the same Active Directory domain even if they are in different subnets.</span></span>  
  
#### <a name="ip-address-and-ip-address-resource-dependencies"></a><span data-ttu-id="52363-277">IP アドレスと IP アドレス リソースの依存関係</span><span class="sxs-lookup"><span data-stu-id="52363-277">IP Address and IP Address Resource Dependencies</span></span>  
  
1.  <span data-ttu-id="52363-278">IP アドレス リソースの依存関係は、マルチサブネット構成では OR に設定されています。</span><span class="sxs-lookup"><span data-stu-id="52363-278">The IP Address resource dependency is set to OR in a multi-subnet configuration.</span></span> <span data-ttu-id="52363-279">詳細については、「[新しい SQL Server フェールオーバークラスターの作成 &#40;セットアップ](create-a-new-sql-server-failover-cluster-setup.md)」を参照してください&#41;</span><span class="sxs-lookup"><span data-stu-id="52363-279">For more information, see [Create a New SQL Server Failover Cluster &#40;Setup&#41;](create-a-new-sql-server-failover-cluster-setup.md)</span></span>  
  
2.  <span data-ttu-id="52363-280">AND-OR の混合 IP アドレスの依存関係はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="52363-280">Mixed AND-OR IP address dependencies are not supported.</span></span> <span data-ttu-id="52363-281">たとえば、 \<IP1> および \<IP2> またははサポートされ \<IP3> ていません。</span><span class="sxs-lookup"><span data-stu-id="52363-281">For example, \<IP1> AND \<IP2> OR \<IP3> is not supported.</span></span>  
  
3.  <span data-ttu-id="52363-282">1 つのサブネットに複数の IP アドレスを使用することはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="52363-282">More than one IP address per subnet is not supported.</span></span>  
  
     <span data-ttu-id="52363-283">同じサブネットに対して構成された複数の IP アドレスを使用する場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 起動中にクライアント接続障害が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="52363-283">If you decide to use more than one IP address configured for the same subnet, you may experience client connection failures during [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] startup.</span></span>  
  
#### <a name="related-content"></a><span data-ttu-id="52363-284">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="52363-284">Related Content</span></span>  
 <span data-ttu-id="52363-285">[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] のマルチサイト フェールオーバーの詳細については、 [Windows Server 2008 R2 フェールオーバー クラスタリングに関するサイト](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) および「 [Design for a Clustered Service or Application in a Multi-Site Failover Cluster (マルチサイト フェールオーバー クラスターでのクラスター化サービスまたはアプリケーションの設計)](https://go.microsoft.com/fwlink/?LinkId=177873)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-285">For more information about [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] multi-site failover, see [Windows Server 2008 R2 Failover Clustering Site](https://technet.microsoft.com/library/ff182338\(v=WS.10\).aspx) and [Design for a Clustered Service or Application in a Multi-Site Failover Cluster](https://go.microsoft.com/fwlink/?LinkId=177873).</span></span>  
  
##  <a name="configure-windows-server-failover-cluster"></a><a name="WSFC"></a><span data-ttu-id="52363-286">Windows Server フェールオーバークラスターの構成</span><span class="sxs-lookup"><span data-stu-id="52363-286">Configure Windows Server Failover Cluster</span></span>  
  
-   [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="52363-287">Cluster Service (WSFC) は、サーバー クラスターの少なくとも 1 つのノード上で構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-287">Cluster Service (WSFC) must be configured on at least one node of your server cluster.</span></span> <span data-ttu-id="52363-288">また、WSFC と共に [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence、または [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard を実行する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="52363-288">You must also run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Enterprise, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Business Intelligence, or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard in conjunction with WSFC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-289">Enterprise では、16 ノードまでのフェールオーバー クラスターがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="52363-289">Enterprise support failover clusters with up to 16 nodes.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-290">Business Intelligence および [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard では、2 ノードのフェールオーバー クラスターがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="52363-290">Business Intelligence and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Standard supports two-node failover clusters.</span></span>  
  
-   <span data-ttu-id="52363-291">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービスのリソース DLL は、WSFC クラスター マネージャーで [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースの可用性をチェックするために使用する 2 つの関数をエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="52363-291">The resource DLL for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service exports two functions used by WSFC Cluster Manager to check for availability of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span> <span data-ttu-id="52363-292">詳細については、「 [フェールオーバー クラスター インスタンスのフェールオーバー ポリシー](../windows/failover-policy-for-failover-cluster-instances.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="52363-292">For more information, see [Failover Policy for Failover Cluster Instances](../windows/failover-policy-for-failover-cluster-instances.md).</span></span>  
  
-   <span data-ttu-id="52363-293">WSFC では、IsAlive チェックを使用して、フェールオーバー クラスター インスタンスが実行されていることを確認できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-293">WSFC must be able to verify that the failover clustered instance is running by using the IsAlive check.</span></span> <span data-ttu-id="52363-294">そのため、信頼関係接続を使用して、サーバーに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-294">This requires connecting to the server by using a trusted connection.</span></span> <span data-ttu-id="52363-295">既定では、クラスター サービスを実行するアカウントはクラスター内のノードの管理者として構成されていないため、BUILTIN\Administrators グループには [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]にログインする権限がありません。</span><span class="sxs-lookup"><span data-stu-id="52363-295">By default, the account that runs the cluster service is not configured as an administrator on nodes in the cluster, and the BUILTIN\Administrators group does not have permission to log into [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="52363-296">これらの設定が変更されるのは、クラスター ノードで権限を変更する場合だけです。</span><span class="sxs-lookup"><span data-stu-id="52363-296">These settings change only if you change permissions on the cluster nodes.</span></span>  
  
-   <span data-ttu-id="52363-297">ドメイン ネーム サービス (DNS) または Windows インターネット ネーム サービス (WINS) を構成します。</span><span class="sxs-lookup"><span data-stu-id="52363-297">Configure Domain Name Service (DNS) or Windows Internet Name Service (WINS).</span></span> <span data-ttu-id="52363-298">DNS サーバーまたは WINS サーバーは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターがインストールされる環境で実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-298">A DNS server or WINS server must be running in the environment where your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster will be installed.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-299">セットアップでは、ドメイン ネーム サービスで [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] IP インターフェイスの仮想参照を動的に登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-299">Setup requires dynamic domain name service registration of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] IP interface virtual reference.</span></span> <span data-ttu-id="52363-300">DNS サーバーの構成では、クラスター ノードでオンラインの IP アドレス マップをネットワーク名に動的に登録できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-300">DNS server configuration should allow cluster nodes to dynamically register an online IP address map to Network Name.</span></span> <span data-ttu-id="52363-301">動的登録を完了できないと、セットアップが失敗し、インストールがロールバックされます。</span><span class="sxs-lookup"><span data-stu-id="52363-301">If the dynamic registration cannot be completed, Setup fails and the installation is rolled back.</span></span> <span data-ttu-id="52363-302">詳細については、 [こちらのサポート技術情報の記事](https://support.microsoft.com/kb/947048)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="52363-302">For more information, see [this knowledgebase article](https://support.microsoft.com/kb/947048)</span></span>  
  
  
  
##  <a name="install-msconame-distributed-transaction-coordinator"></a><a name="MSDTC"></a><span data-ttu-id="52363-303">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散トランザクション コーディネーターのインストール</span><span class="sxs-lookup"><span data-stu-id="52363-303">Install [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="52363-304">フェールオーバー クラスターに [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールする前に、 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散トランザクション コーディネーター (MSDTC) クラスター リソースを作成する必要があるかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="52363-304">Before installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on a failover cluster, determine whether the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator (MSDTC) cluster resource must be created.</span></span> <span data-ttu-id="52363-305">[!INCLUDE[ssDE](../../../includes/ssde-md.md)]だけをインストールする場合、MSDTC クラスター リソースは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="52363-305">If you are installing only the [!INCLUDE[ssDE](../../../includes/ssde-md.md)], the MSDTC cluster resource is not required.</span></span> <span data-ttu-id="52363-306">[!INCLUDE[ssDE](../../../includes/ssde-md.md)] と SSIS やワークステーション コンポーネントをインストールする場合、または分散トランザクションを使用する場合は、MSDTC のインストールが必要です。</span><span class="sxs-lookup"><span data-stu-id="52363-306">If you are installing the [!INCLUDE[ssDE](../../../includes/ssde-md.md)] and SSIS, Workstation Components, or if you will use distributed transactions, you must install MSDTC.</span></span> <span data-ttu-id="52363-307">[!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]のみのインスタンスには MSDTC は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="52363-307">Note that MSDTC is not required for [!INCLUDE[ssASnoversion](../../../includes/ssasnoversion-md.md)]-only instances.</span></span>  
  
 <span data-ttu-id="52363-308">[!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] と [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)]では、MSDTC の複数のインスタンスを 1 つのフェールオーバー クラスターにインストールできます。</span><span class="sxs-lookup"><span data-stu-id="52363-308">On [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] and [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)], you can install multiple instances of MSDTC on a single failover cluster.</span></span> <span data-ttu-id="52363-309">インストールされている MSDTC の最初のインスタンスが、MSDTC のクラスターの既定のインスタンスになります。</span><span class="sxs-lookup"><span data-stu-id="52363-309">The first instance of MSDTC that is installed will be the cluster default instance of MSDTC.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="52363-310">では、この MSDTC インスタンスが自動的に使用され、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] ローカル クラスター リソース グループにインストールされている MSDTC インスタンスが利用されます。</span><span class="sxs-lookup"><span data-stu-id="52363-310">will take advantage of an instance of MSDTC installed to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] local cluster resource group by automatically using the instance of MSDTC.</span></span> <span data-ttu-id="52363-311">ただし、個々のアプリケーションはクラスターのすべての MSDTC インスタンスにマップすることができます。</span><span class="sxs-lookup"><span data-stu-id="52363-311">However, individual applications can be mapped to any instance of MSDTC on the cluster.</span></span>  
  
 <span data-ttu-id="52363-312">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]によって選択される MSDTC のインスタンスは、次のいずれかのルールを満たすものです。</span><span class="sxs-lookup"><span data-stu-id="52363-312">The following rules are applied for an instance of MSDTC to be chosen by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]:</span></span>  
  
-   <span data-ttu-id="52363-313">ローカル グループにインストールされた MSDTC を使用する。</span><span class="sxs-lookup"><span data-stu-id="52363-313">Use MSDTC installed to the local group, else</span></span>  
  
-   <span data-ttu-id="52363-314">MSDTC のマップされたインスタンスを使用する。</span><span class="sxs-lookup"><span data-stu-id="52363-314">Use the mapped instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="52363-315">クラスターの既定の MSDTC インスタンスを使用する。</span><span class="sxs-lookup"><span data-stu-id="52363-315">Use the cluster's default instance of MSDTC, else</span></span>  
  
-   <span data-ttu-id="52363-316">ローカル コンピューターのインストール済み MSDTC インスタンスを使用する。</span><span class="sxs-lookup"><span data-stu-id="52363-316">Use the local machine's installed instance of MSDTC</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="52363-317">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のローカル クラスター グループにインストールされている MSDTC インスタンスが失敗すると、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] では、既定のクラスター インスタンスまたはローカル コンピューターの MSDTC インスタンスが自動的には使用されません。</span><span class="sxs-lookup"><span data-stu-id="52363-317">If the MSDTC instance that is installed to the local cluster group of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] fails, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] does not automatically attempt to use the default cluster instance or the local machine instance of MSDTC.</span></span> <span data-ttu-id="52363-318">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループから失敗した MSDTC インスタンスを完全に削除して、別の MSDTC インスタンスを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-318">You would need to completely remove the failed instance of MSDTC from the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group to use another instance of MSDTC.</span></span> <span data-ttu-id="52363-319">同様に、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のマッピングを作成し、マップされる MSDTC インスタンスが失敗した場合は、分散トランザクションも失敗します。</span><span class="sxs-lookup"><span data-stu-id="52363-319">Likewise, if you create a mapping for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and the mapped instance of MSDTC fails, your distributed transactions will also fail.</span></span> <span data-ttu-id="52363-320">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] で別の MSDTC インスタンスを使用するには、MSDTC インスタンスを [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のローカルのクラスター グループに追加するか、マッピングを削除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-320">If you want [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to use a different instance of MSDTC, you must either add an instance of MSDTC to the local cluster group of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or delete the mapping.</span></span>  
  
### <a name="configure-msconame-distributed-transaction-coordinator"></a><span data-ttu-id="52363-321">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散トランザクション コーディネーターの構成</span><span class="sxs-lookup"><span data-stu-id="52363-321">Configure [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator</span></span>  
 <span data-ttu-id="52363-322">オペレーティング システムをインストールしてクラスターを構成した後で、クラスター アドミニストレーターを使用して、クラスター内で機能するように MSDTC を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="52363-322">After you install the operating system and configure your cluster, you must configure MSDTC to work in a cluster by using the Cluster Administrator.</span></span> <span data-ttu-id="52363-323">MSDTC のクラスター化に失敗しても [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップは中断しませんが、MSDTC が適切に構成されていない場合は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のアプリケーション機能に影響が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="52363-323">Failure to cluster MSDTC will not block [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] application functionality may be affected if MSDTC is not properly configured.</span></span>  
  
  
  
## <a name="see-also"></a><span data-ttu-id="52363-324">参照</span><span class="sxs-lookup"><span data-stu-id="52363-324">See Also</span></span>  
 <span data-ttu-id="52363-325">[SQL Server 2014 をインストールするためのハードウェアおよびソフトウェアの要件](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="52363-325">[Hardware and Software Requirements for Installing SQL Server 2014](../../install/hardware-and-software-requirements-for-installing-sql-server.md) </span></span>  
 <span data-ttu-id="52363-326">[システム構成チェッカーのパラメーターの確認](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span><span class="sxs-lookup"><span data-stu-id="52363-326">[Check Parameters for the System Configuration Checker](../../../database-engine/install-windows/check-parameters-for-the-system-configuration-checker.md) </span></span>  
 [<span data-ttu-id="52363-327">フェールオーバー クラスター インスタンスの管理とメンテナンス</span><span class="sxs-lookup"><span data-stu-id="52363-327">Failover Cluster Instance Administration and Maintenance</span></span>](../windows/failover-cluster-instance-administration-and-maintenance.md)  
  
  
