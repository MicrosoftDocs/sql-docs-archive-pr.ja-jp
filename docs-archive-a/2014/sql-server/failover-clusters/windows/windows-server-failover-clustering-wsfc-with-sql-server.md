---
title: Windows Server フェールオーバー クラスタリング (WSFC) と SQL Server | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], WSFC clusters
- Windows Server Failover Clustering (WSFC), with SQL Server
- WSFC, with SQL Server
- quorum [SQL Server]
- failover clustering [SQL Server], AlwaysOn Availability Groups
ms.assetid: 79d2ea5a-edd8-4b3b-9502-96202057b01a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e1fec03d7eb7a63353fd8eaea8c1e7051a306049
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87640515"
---
# <a name="windows-server-failover-clustering-wsfc-with-sql-server"></a><span data-ttu-id="d8ba2-102">Windows Server フェールオーバー クラスタリング (WSFC) と SQL Server</span><span class="sxs-lookup"><span data-stu-id="d8ba2-102">Windows Server Failover Clustering (WSFC) with SQL Server</span></span>
  <span data-ttu-id="d8ba2-103">*Windows Server フェールオーバー クラスタリング* (WSFC) クラスターは、アプリケーションとサービスの可用性を高めるために連携する独立したサーバーのグループです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-103">A *Windows Server Failover Clustering* (WSFC) cluster is a group of independent servers that work together to increase the availability of applications and services.</span></span> [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="d8ba2-104">は、WSFC サービスと機能を活用して [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] と [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンスをサポートします。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-104">takes advantage of WSFC services and capabilities to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instances.</span></span>

 

##  <a name="terms-and-definitions"></a><a name="TermsAndDefs"></a> <span data-ttu-id="d8ba2-105">用語と定義</span><span class="sxs-lookup"><span data-stu-id="d8ba2-105">Terms and Definitions</span></span>
 <span data-ttu-id="d8ba2-106">WSFC クラスター Windows Server フェールオーバークラスタリング (WSFC) クラスターは、アプリケーションとサービスの可用性を高めるために連携する独立したサーバーのグループです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-106">WSFC cluster A Windows Server Failover Clustering (WSFC) cluster is a group of independent servers that work together to increase the availability of applications and services.</span></span>

 <span data-ttu-id="d8ba2-107">フェールオーバークラスターインスタンス IP アドレスリソース、ネットワーク名リソース、および1つ以上のアプリケーションまたはサービスを実行するために必要な追加リソースを管理する Windows サービスのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-107">Failover cluster instance An instance of a Windows service that manages an IP address resource, a network name resource, and additional resources that are required to run one or more applications or services.</span></span> <span data-ttu-id="d8ba2-108">クライアントは、コンピューター名を使用して物理サーバーのサービスにアクセスする場合と同様に、ネットワーク名を使用してグループ内のリソースにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-108">Clients can use the network name to access the resources in the group, similar to using a computer name to access the services on a physical server.</span></span> <span data-ttu-id="d8ba2-109">ただし、フェールオーバー クラスター インスタンスはグループであるため、基になる名前またはアドレスに影響を与えることなく他のノードにフェールオーバーできます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-109">However, because a failover cluster instance is a group, it can be failed over to another node without affecting the underlying name or address.</span></span>

 <span data-ttu-id="d8ba2-110">ノードサーバークラスターのアクティブまたは非アクティブなメンバーである Microsoft Windows Server システム。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-110">Node A Microsoft Windows Server system that is an active or inactive member of a server cluster.</span></span>

 <span data-ttu-id="d8ba2-111">クラスターリソース。ノードによって所有、オンラインにしてオフラインにし、ノード間で移動し、クラスターオブジェクトとして管理できる、物理的または論理的なエンティティです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-111">Cluster resource A physical or logical entity that can be owned by a node, brought online and taken offline, moved between nodes, and managed as a cluster object.</span></span> <span data-ttu-id="d8ba2-112">特定の時点でクラスター リソースを所有できるのは 1 つのノードのみです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-112">A cluster resource can be owned by only a single node at any point in time.</span></span>

 <span data-ttu-id="d8ba2-113">リソースグループ単一のクラスターオブジェクトとして管理されるクラスターリソースのコレクション。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-113">Resource group A collection of cluster resources managed as a single cluster object.</span></span> <span data-ttu-id="d8ba2-114">通常、リソース グループには、特定のアプリケーションまたはサービスを実行するために必要なすべてのクラスター リソースが含まれます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-114">Typically a resource group contains all of the cluster resources that are required to run a specific application or service.</span></span> <span data-ttu-id="d8ba2-115">フェールオーバーとフェールバックは常にリソース グループ上で行われます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-115">Failover and failback always act on resource groups.</span></span>

 <span data-ttu-id="d8ba2-116">リソース依存関係別のリソースが依存するリソース。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-116">Resource dependency A resource on which another resource depends.</span></span> <span data-ttu-id="d8ba2-117">リソース A がリソース B に依存している場合、B は A の依存関係です。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-117">If resource A depends on resource B, then B is a dependency of A.</span></span>

 <span data-ttu-id="d8ba2-118">ネットワーク名リソースクラスターリソースとして管理される論理サーバー名。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-118">Network name resource A logical server name that is managed as a cluster resource.</span></span> <span data-ttu-id="d8ba2-119">ネットワーク名リソースは、IP アドレス リソースと共に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-119">A network name resource must be used with an IP address resource.</span></span>

 <span data-ttu-id="d8ba2-120">優先所有者リソースグループの実行が優先されるノード。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-120">Preferred owner A node on which a resource group prefers to run.</span></span> <span data-ttu-id="d8ba2-121">各リソース グループには、優先順に並べられた優先所有者のリストが関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-121">Each resource group is associated with a list of preferred owners sorted in order of preference.</span></span> <span data-ttu-id="d8ba2-122">自動フェールオーバー中に、リソース グループは、優先所有者リスト内の次の優先ノードに移動します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-122">During automatic failover, the resource group is moved to the next preferred node in the preferred owner list.</span></span>

 <span data-ttu-id="d8ba2-123">実行可能な所有者は、リソースを実行できるセカンダリノードです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-123">Possible owner A secondary node on which a resource can run.</span></span> <span data-ttu-id="d8ba2-124">各リソース グループには、実行可能な所有者のリストが関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-124">Each resource group is associated with a list of possible owners.</span></span> <span data-ttu-id="d8ba2-125">リソース グループは、実行可能な所有者としてリストされているノードにのみフェールオーバーできます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-125">Resource groups can fail over only to nodes that are listed as possible owners.</span></span>

 <span data-ttu-id="d8ba2-126">クォーラムモードクラスターが維持できるノード障害の数を決定する、フェールオーバークラスターのクォーラム構成。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-126">Quorum mode The quorum configuration in a failover cluster that determines the number of node failures that the cluster can sustain.</span></span>

 <span data-ttu-id="d8ba2-127">クォーラムに必要な少数の要素のみが通信している場合でも、クラスターを開始するためのプロセスを強制します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-127">Forced quorum The process to start the cluster even though only a minority of the elements that are required for quorum are in communication.</span></span>

 <span data-ttu-id="d8ba2-128">詳細については、「 [フェールオーバー クラスター用語集](/previous-versions/windows/desktop/MsCS/server-cluster-glossary)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-128">For more information, see: [Failover Cluster Glossary](/previous-versions/windows/desktop/MsCS/server-cluster-glossary)</span></span>

##  <a name="overview-of-windows-server-failover-clustering"></a><a name="Overview"></a> <span data-ttu-id="d8ba2-129">Windows Server フェールオーバー クラスタリングの概要</span><span class="sxs-lookup"><span data-stu-id="d8ba2-129">Overview of Windows Server Failover Clustering</span></span>
 <span data-ttu-id="d8ba2-130">Windows Server フェールオーバー クラスタリングは、Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] や Microsoft Exchange などのホストされるサーバー アプリケーションの高可用性とディザスター リカバリー シナリオをサポートするインフラストラクチャ機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-130">Windows Server Failover Clustering provides infrastructure features that support the high-availability and disaster recovery scenarios of hosted server applications such as Microsoft [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and Microsoft Exchange.</span></span> <span data-ttu-id="d8ba2-131">クラスター ノードまたはサービスに障害が発生すると、そのノードでホストされていたサービスは自動的に、または手動で、他の可用性ノードに転送されます。このプロセスを *フェールオーバー*と呼びます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-131">If a cluster node or service fails, the services that were hosted on that node can be automatically or manually transferred to another available node in a process known as *failover*.</span></span>

 <span data-ttu-id="d8ba2-132">WSFC クラスター内のノードは連携して、次のような機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-132">The nodes in the WSFC cluster work together to collectively provide these types of capabilities:</span></span>

-   <span data-ttu-id="d8ba2-133">**分散メタデータと通知。**</span><span class="sxs-lookup"><span data-stu-id="d8ba2-133">**Distributed metadata and notifications.**</span></span> <span data-ttu-id="d8ba2-134">WSFC サービスとホストされるアプリケーション メタデータは、クラスター内の各ノードで維持されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-134">WSFC service and hosted application metadata is maintained on each node in the cluster.</span></span> <span data-ttu-id="d8ba2-135">このメタデータには、ホストされるアプリケーションの設定に加え、WSFC 構成と状態が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-135">This metadata includes WSFC configuration and status in addition to hosted application settings.</span></span> <span data-ttu-id="d8ba2-136">ノードのメタデータまたは状態の変更は、クラスター内の他のノードに自動的に反映されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-136">Changes to a node's metadata or status are automatically propagated to the other nodes in the cluster.</span></span>

-   <span data-ttu-id="d8ba2-137">**リソース管理。**</span><span class="sxs-lookup"><span data-stu-id="d8ba2-137">**Resource management.**</span></span> <span data-ttu-id="d8ba2-138">クラスター内の各ノードは、直接アタッチされたストレージ、ネットワーク インターフェイス、共有ディスク ストレージへのアクセスなどの物理的リソースを提供する場合があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-138">Individual nodes in the cluster may provide physical resources such as direct-attached storage, network interfaces, and access to shared disk storage.</span></span> <span data-ttu-id="d8ba2-139">ホストされるアプリケーション自体もクラスター リソースとして登録されます。また、他のリソース上でスタートアップと正常性依存関係を構成する場合があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-139">Hosted applications register themselves as a cluster resource, and may configure startup and health dependencies upon other resources.</span></span>

-   <span data-ttu-id="d8ba2-140">**正常性の監視。**</span><span class="sxs-lookup"><span data-stu-id="d8ba2-140">**Health monitoring.**</span></span> <span data-ttu-id="d8ba2-141">ノード間およびプライマリ ノードの正常性状態の検出は、ハートビート ネットワーク通信およびリソース監視の組み合わせによって行われます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-141">Inter-node and primary node health detection is accomplished through a combination of heartbeat-style network communications and resource monitoring.</span></span> <span data-ttu-id="d8ba2-142">クラスターの全体的な正常性状態は、クラスター内のノードのクォーラムの投票によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-142">The overall health of the cluster is determined by the votes of a quorum of nodes in the cluster.</span></span>

-   <span data-ttu-id="d8ba2-143">**フェールオーバーの調整。**</span><span class="sxs-lookup"><span data-stu-id="d8ba2-143">**Failover coordination.**</span></span> <span data-ttu-id="d8ba2-144">各リソースはプライマリ ノードでホストされるように構成され、それぞれ自動的に、または手動で 1 つ以上のセカンダリ ノードに転送されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-144">Each resource is configured to be hosted on a primary node, and each can be automatically or manually transferred to one or more secondary nodes.</span></span> <span data-ttu-id="d8ba2-145">正常性ベースのフェールオーバー ポリシーによって、ノード間でのリソース所有権の自動転送が制御されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-145">A health-based failover policy controls automatic transfer of resource ownership between nodes.</span></span> <span data-ttu-id="d8ba2-146">フェールオーバーが発生すると、適切に対応できるように、ノードおよびホストされているアプリケーションに通知されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-146">Nodes and hosted applications are notified when failover occurs so that they may react appropriately.</span></span>

 <span data-ttu-id="d8ba2-147">詳細については、「 [Windows Server 2008 R2 のフェールオーバー クラスター](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-147">For more information, see: [Failover Clusters in Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span></span>

##  <a name="sql-server-alwayson-technologies-and-wsfc"></a><a name="AlwaysOnWsfcTech"></a><span data-ttu-id="d8ba2-148">SQL Server AlwaysOn テクノロジと WSFC</span><span class="sxs-lookup"><span data-stu-id="d8ba2-148">SQL Server AlwaysOn Technologies and WSFC</span></span>
 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]<span data-ttu-id="d8ba2-149">*AlwaysOn*は、WSFC を利用する新しい高可用性およびディザスターリカバリーソリューションです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-149">*AlwaysOn* is a new high availability and disaster recovery solution that takes advantage of WSFC.</span></span> <span data-ttu-id="d8ba2-150">AlwaysOn は、アプリケーションの可用性を高め、ハードウェア投資の回収率を上げ、高可用性配置と管理を簡素化する、統合された柔軟なソリューションを提供します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-150">AlwaysOn provides an integrated, flexible solution that increases application availability, provides better returns on hardware investments, and simplifies high availability deployment and management.</span></span>

 <span data-ttu-id="d8ba2-151">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] と AlwaysOn フェールオーバー クラスター インスタンスのどちらも WSFC をプラットフォーム テクノロジとして使用して、コンポーネントとしてを WSFC クラスター リソースとして登録します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-151">Both [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] and AlwaysOn Failover Cluster Instances use WSFC as a platform technology, registering components as WSFC cluster resources.</span></span>  <span data-ttu-id="d8ba2-152">関連するリソースは *リソース グループ*としてまとめられ、他の WSFC クラスター リソースに依存するように設定できます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-152">Related resources are combined into a *resource group*, which can be made dependent upon other WSFC cluster resources.</span></span> <span data-ttu-id="d8ba2-153">これによって、WSFC クラスター サービスは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスを再起動する必要がある場合はこれを検出して通知したり、WSFC クラスター内の他のサーバー ノードに自動的にフェールオーバーしたりします。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-153">The WSFC cluster service can then sense and signal the need to restart the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance or automatically fail it over to a different server node in the WSFC cluster.</span></span>

> [!IMPORTANT]
>  <span data-ttu-id="d8ba2-154">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn テクノロジの利点を完全に活かすには、WSFC 関連のいくつかの前提条件を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-154">To take full advantage of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn technologies, you should apply several WSFC-related prerequisites.</span></span>
> 
>  <span data-ttu-id="d8ba2-155">詳細については、「 [AlwaysOn 可用性グループ &#40;SQL Server の前提条件、制限事項、および推奨事項](../../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md)」を参照してください&#41;</span><span class="sxs-lookup"><span data-stu-id="d8ba2-155">For more information, see: [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/prereqs-restrictions-recommendations-always-on-availability.md)</span></span>

### <a name="instance-level-high-availability-with-alwayson-failover-cluster-instances"></a><span data-ttu-id="d8ba2-156">AlwaysOn フェールオーバー クラスター インスタンスとインスタンス レベルの高可用性</span><span class="sxs-lookup"><span data-stu-id="d8ba2-156">Instance-level High Availability with AlwaysOn Failover Cluster Instances</span></span>
 <span data-ttu-id="d8ba2-157">AlwaysOn *フェールオーバー クラスター インスタンス* (FCI) は、WSFC クラスター内のノードにまたがってインストールされた [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-157">An AlwaysOn *Failover Cluster Instance* (FCI) is a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance that is installed across nodes in a WSFC cluster.</span></span> <span data-ttu-id="d8ba2-158">この種類のインスタンスには、共有ディスク ストレージ (ファイバー チャネルまたは iSCSI SAN 経由) および仮想ネットワーク名に対してリソース依存関係があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-158">This type of instance has resource dependencies on shared disk storage (via Fibre Channel or iSCSI SAN) and on a virtual network name.</span></span> <span data-ttu-id="d8ba2-159">仮想ネットワーク名には、それぞれが異なるサブネットに存在する 1 つ以上の仮想 IP アドレスに対してリソース依存関係があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-159">The virtual network name has a resource dependency on one or more virtual IP addresses, each in a different subnet.</span></span> <span data-ttu-id="d8ba2-160">SQL Server サービスおよび SQL Server エージェント サービスはリソースとして登録され、どちらも仮想ネットワーク名リソースに依存します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-160">The SQL Server service and the SQL Server Agent service are registered as resources, and both are made dependent upon the virtual network name resource.</span></span>

 <span data-ttu-id="d8ba2-161">フェールオーバーが発生した場合、WSFC サービスはインスタンスのリソース所有権を指定されたフェールオーバー ノードに転送します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-161">In the event of a failover, the WSFC service transfers ownership of instance's resources to a designated failover node.</span></span> <span data-ttu-id="d8ba2-162">その後、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスは、フェールオーバー ノードで再起動され、データベースが通常どおり復元されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-162">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance is then re-started on the failover node, and databases are recovered as usual.</span></span> <span data-ttu-id="d8ba2-163">特定の時点で、FCI と基になるリソースをホストできるのは、クラスター内の 1 つのノードのみです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-163">At any given moment, only a single node in the cluster can host the FCI and underlying resources.</span></span>

> [!NOTE]
>  <span data-ttu-id="d8ba2-164">AlwaysOn フェールオーバー クラスター インスタンスには、ストレージ エリア ネットワーク (SAN)、SMB ファイル共有などの対称的な共有ディスク ストレージが必要です。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-164">An AlwaysOn Failover Cluster Instance requires symmetrical shared disk storage such as a storage area network (SAN) or SMB file share.</span></span>  <span data-ttu-id="d8ba2-165">共有ディスク ストレージ ボリュームは、WSFC クラスター内のすべてのフェールオーバー ノードで使用できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-165">The shared disk storage volumes must be available to all potential failover nodes in the WSFC cluster.</span></span>

 <span data-ttu-id="d8ba2-166">詳細については、「 [AlwaysOn フェールオーバークラスターインスタンス](always-on-failover-cluster-instances-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-166">For more information, see: [AlwaysOn Failover Cluster Instances](always-on-failover-cluster-instances-sql-server.md)</span></span>

### <a name="database-level-high-availability-with-sshadr"></a><span data-ttu-id="d8ba2-167">データベース レベルの高可用性 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="d8ba2-167">Database-level High Availability with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span></span>
 <span data-ttu-id="d8ba2-168">*可用性グループ* は、共にフェールオーバーするユーザー データベースのセットです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-168">An *availability group* is a set of user databases that fail over together.</span></span> <span data-ttu-id="d8ba2-169">可用性グループは、1 つのプライマリ *可用性レプリカ* と、共有ストレージを必要としないデータ保護のために SQL Server ログに基づくデータ移動を介して維持される 1 ～ 4 個のセカンダリ レプリカから構成されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-169">An availability group consists of a primary *availability replica* and one to four secondary replicas that are maintained through SQL Server log-based data movement for data protection without the need for shared storage.</span></span> <span data-ttu-id="d8ba2-170">各レプリカは、WSFC クラスターの別々のノードにある [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスによってホストされます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-170">Each replica is hosted by an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on a different node of the WSFC cluster.</span></span> <span data-ttu-id="d8ba2-171">可用性グループとこれに対応する仮想ネットワーク名は、WSFC クラスターのリソースとして登録されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-171">The availability group and a corresponding virtual network name are registered as resources in the WSFC cluster.</span></span>

 <span data-ttu-id="d8ba2-172">プライマリ レプリカのノード上の *可用性グループ リスナー* は、受信クライアント要求に応答し、仮想ネットワーク名に接続します。そして、接続文字列の属性に基づいて各要求を適切な [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスにリダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-172">An *availability group listener* on the primary replica's node responds to incoming client requests to connect to the virtual network name, and based on attributes in the connection string, it redirects each request to the appropriate [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>

 <span data-ttu-id="d8ba2-173">フェールオーバーが発生した場合は、共有物理リソースの所有権を他のノードに転送する代わりに、WSFC を利用して他の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンス上でセカンダリ レプリカを再構成し、可用性グループのプライマリ レプリカにします。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-173">In the event of a failover, instead of transferring ownership of shared physical resources to another node, WSFC is leveraged to reconfigure a secondary replica on another [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to become the availability group's primary replica.</span></span> <span data-ttu-id="d8ba2-174">その後、可用性グループの仮想ネットワーク名リソースが、そのインスタンスに転送されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-174">The availability group's virtual network name resource is then transferred to that instance.</span></span>

 <span data-ttu-id="d8ba2-175">特定の時点で、可用性グループ データベースのプライマリ レプリカをホストできるのは、1 つの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスのみです。また、関連付けられたすべてのセカンダリ レプリカは別々のインスタンスに存在する必要があり、各インスタンスは別々の物理ノードに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-175">At any given moment, only a single [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance may host the primary replica of an availability group's databases, all associated secondary replicas must each reside on a separate instance, and each instance must reside on separate physical nodes.</span></span>

> [!NOTE]
>  [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]<span data-ttu-id="d8ba2-176">ではフェールオーバー クラスター インスタンスを配置する必要はありません。また、対称共有ストレージ (SAN または SMB) を使用する必要もありません。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-176">do not require deployment of a Failover Cluster Instance or use of symmetric shared storage (SAN or SMB).</span></span>
> 
>  <span data-ttu-id="d8ba2-177">フェールオーバー クラスター インスタンス (FCI) を可用性グループと共に使用することによって、可用性レプリカの可用性を高めることができます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-177">A Failover Cluster Instance (FCI) may be used together with an availability group to enhance the availability of an availability replica.</span></span> <span data-ttu-id="d8ba2-178">ただし、WSFC クラスター内での競合状態の発生を回避するため、FCI 上でホストされる可用性レプリカとの間の可用性グループの自動フェールオーバーはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-178">However, to prevent potential race conditions in the WSFC cluster, automatic failover of the availability group is not supported to or from an availability replica that is hosted on a FCI.</span></span>

 <span data-ttu-id="d8ba2-179">詳細については、「[AlwaysOn 可用性グループの概要 &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-179">For more information, see: [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md)</span></span>

##  <a name="wsfc-health-monitoring-and-failover"></a><a name="AlwaysOnWsfcHealth"></a><span data-ttu-id="d8ba2-180">WSFC の正常性の監視とフェールオーバー</span><span class="sxs-lookup"><span data-stu-id="d8ba2-180">WSFC Health Monitoring and Failover</span></span>
 <span data-ttu-id="d8ba2-181">AlwaysOn ソリューションの高可用性は、物理的および論理的 WSFC クラスター リソースのプロアクティブな正常性状態の監視と、冗長ハードウェアでの自動フェールオーバーおよび再構成によって実現します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-181">High availability for an AlwaysOn solution is accomplished though proactive health monitoring of physical and logical WSFC cluster resources, together with automatic failover onto and re-configuration of redundant hardware.</span></span>  <span data-ttu-id="d8ba2-182">また、システム管理者は、可用性グループまたはノード間での *インスタンスの* 手動フェールオーバー [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を開始できます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-182">A system administrator can also initiate a *manual failover* of an availability group or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance from one node to another.</span></span>

### <a name="failover-policies-for-nodes-failover-cluster-instances-and-availability-groups"></a><span data-ttu-id="d8ba2-183">ノード、フェールオーバー クラスター インスタンス、可用性グループのフェールオーバー ポリシー</span><span class="sxs-lookup"><span data-stu-id="d8ba2-183">Failover Policies for Nodes, Failover Cluster Instances, and Availability Groups</span></span>
 <span data-ttu-id="d8ba2-184">*フェールオーバー ポリシー* は、WSFC クラスター ノード、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンス (FCI)、および可用性グループのレベルで構成されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-184">A *failover policy* is configured at the WSFC cluster node, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instance (FCI), and the availability group levels.</span></span>  <span data-ttu-id="d8ba2-185">これらのポリシーは、クラスター リソースの異常な状態の重大度、期間、頻度とノードの応答時間に基づいたもので、サービスの再起動のトリガー、ノード間でのクラスター リソースの *自動フェールオーバー* のトリガー、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンス間での可用性グループ プライマリ レプリカの移動のトリガーを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-185">These policies, based on the severity, duration, and frequency of unhealthy cluster resource status and node responsiveness, can trigger a service restart or an *automatic failover* of cluster resources from one node to another, or can trigger the move of an availability group primary replica from one [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to another.</span></span>

 <span data-ttu-id="d8ba2-186">可用性グループ レプリカのフェールオーバーは、基になる [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスに影響しません。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-186">Failover of an availability group replica does not affect the underlying [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span>  <span data-ttu-id="d8ba2-187">FCI のフェールオーバーでは、ホストされている可用性グループ レプリカとインスタンスが移動します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-187">Failover of a FCI moves the hosted availability group replicas with the instance.</span></span>

 <span data-ttu-id="d8ba2-188">詳細については、「[フェールオーバークラスターインスタンスのフェールオーバーポリシー](failover-policy-for-failover-cluster-instances.md) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-188">For more information, see: [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md)</span></span>

### <a name="wsfc-resource-health-detection"></a><span data-ttu-id="d8ba2-189">WSFC リソースの正常性の検出</span><span class="sxs-lookup"><span data-stu-id="d8ba2-189">WSFC Resource Health Detection</span></span>
 <span data-ttu-id="d8ba2-190">WSFC クラスター ノード内の各リソースの状態と正常性は、定期的または要求時に報告されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-190">Each resource in a WSFC cluster node can report its status and health, periodically or on-demand.</span></span> <span data-ttu-id="d8ba2-191">リソースの障害を示す状況としては、電源障害、ディスクまたはメモリのエラー、ネットワーク通信エラー、応答しないサービスなどがあります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-191">A variety of circumstances may indicate resource failure; e.g. power failure, disk or memory errors, network communication errors, or non-responsive services.</span></span>

 <span data-ttu-id="d8ba2-192">ネットワーク、ストレージ、サービスなどの WSFC クラスター リソースは、互いに依存するように構成できます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-192">WSFC cluster resources such as networks, storage, or services can be made dependent upon one another.</span></span> <span data-ttu-id="d8ba2-193">リソースの累積正常性は、リソース依存関係の正常性で正常性を連続的にロール アップすることで決定されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-193">The cumulative health of a resource is determined by successively rolling up its health with the health of each of its resource dependencies.</span></span>

### <a name="wsfc-inter-node-health-detection-and-quorum-voting"></a><span data-ttu-id="d8ba2-194">WSFC ノード間の正常性の検出とクォーラム投票</span><span class="sxs-lookup"><span data-stu-id="d8ba2-194">WSFC Inter-node Health Detection and Quorum Voting</span></span>
 <span data-ttu-id="d8ba2-195">WSFC クラスター内の各ノードは、定期的なハートビート通信に参加し、ノードの正常性状態を他のノードと共有します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-195">Each node in a WSFC cluster participates in periodic heartbeat communication to share the node's health status with the other nodes.</span></span> <span data-ttu-id="d8ba2-196">応答しないノードは、エラー状態であると見なされます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-196">Unresponsive nodes are considered to be in a failed state.</span></span>

 <span data-ttu-id="d8ba2-197">*クォーラム* ノード セットは、WSFC クラスター内の大多数の投票ノードおよび監視サーバーです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-197">A *quorum* node set is a majority of the voting nodes and witnesses in the WSFC cluster.</span></span> <span data-ttu-id="d8ba2-198">WSFC クラスターの全体的な正常性と状態は、定期的な *クォーラムの投票*によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-198">The overall health and status of a WSFC cluster is determined by a periodic *quorum vote*.</span></span> <span data-ttu-id="d8ba2-199">クォーラムの存在は、クラスターが正常であり、ノード レベルのフォールト トレランスを提供できることを表します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-199">The presence of a quorum means that the cluster is healthy and able to provide node-level fault tolerance.</span></span>

 <span data-ttu-id="d8ba2-200">*クォーラム モード* は、WSFC クラスター レベルで構成され、クォーラム投票の方法、および自動フェールオーバーを実行するタイミングまたはクラスターをオフラインにするタイミングを指定します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-200">A *quorum mode* is configured at the WSFC cluster level that dictates the methodology used for quorum voting and when to perform an automatic failover or take the cluster offline.</span></span>

> [!TIP]
>  <span data-ttu-id="d8ba2-201">WSFC クラスターのクォーラム投票の数は、常に奇数にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-201">It is best practice to always have an odd number of quorum votes in a WSFC cluster.</span></span>  <span data-ttu-id="d8ba2-202">クォーラム投票のために、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をクラスター内のすべてのノードにインストールする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-202">For the purposes of quorum voting, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] does not have to be installed on all nodes in the cluster.</span></span> <span data-ttu-id="d8ba2-203">追加サーバーはクォーラム メンバーとして機能できます。また、リモート ファイル共有を決定機構として使用するように WSFC クォーラム モデルを構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-203">An additional server can act as a quorum member, or the WSFC quorum model can be configured to use a remote file share as a tie-breaker.</span></span>
> 
>  <span data-ttu-id="d8ba2-204">詳細については、「 [WSFC クォーラムモードと投票の構成 &#40;SQL Server](wsfc-quorum-modes-and-voting-configuration-sql-server.md) 」を参照してください&#41;</span><span class="sxs-lookup"><span data-stu-id="d8ba2-204">For more information, see: [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span></span>

### <a name="disaster-recovery-through-forced-quorum"></a><span data-ttu-id="d8ba2-205">強制されたクォーラムによる災害復旧</span><span class="sxs-lookup"><span data-stu-id="d8ba2-205">Disaster Recovery Through Forced Quorum</span></span>
 <span data-ttu-id="d8ba2-206">実際の運用状況と WSFC クラスター構成に応じて、自動フェールオーバーと手動フェールオーバーの両方を使用できます。これによって、堅牢でフォールト トレランスな [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn ソリューションを維持できます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-206">Depending upon operational practices and WSFC cluster configuration, you can incur both automatic and manual failovers, and still maintain a robust, fault-tolerant [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn solution.</span></span> <span data-ttu-id="d8ba2-207">ただし、WSFC クラスター内の投票ノードのクォーラムが相互に通信できない場合、または WSFC クラスターがこれ以外の理由で正常性の検証に失敗する場合は、WSFC クラスターがオフラインになる場合があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-207">However, if a quorum of the eligible voting nodes in the WSFC cluster cannot communicate with one another, or if the WSFC cluster otherwise fails health validation, then the WSFC cluster may go offline.</span></span>

 <span data-ttu-id="d8ba2-208">災害や、永続的なハードウェア障害または通信障害が原因で WSFC クラスターがオフラインになった場合は、手動で管理操作を実行して、 *クォーラムを強制* し、稼働しているクラスター ノードを非フォールト トレラント構成でオンラインに戻す必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-208">If the WSFC cluster goes offline because of an unplanned disaster, or due to a persistent hardware or communications failure, then manual administrative intervention is required to *force a quorum* and bring the surviving cluster nodes back online in a non-fault-tolerant configuration.</span></span>

 <span data-ttu-id="d8ba2-209">その後、WSFC クラスターを再構成し、影響を受けたデータベース レプリカを復元し、新しいクォーラムを再構築するという一連の手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-209">Afterwards, a series of steps must also be taken to reconfigure the WSFC cluster, recover the affected database replicas, and to re-establish a new quorum.</span></span>

 <span data-ttu-id="d8ba2-210">詳細については、「 [WSFC ディザスターリカバリーによる強制クォーラム &#40;SQL Server](wsfc-disaster-recovery-through-forced-quorum-sql-server.md) 」を参照してください&#41;</span><span class="sxs-lookup"><span data-stu-id="d8ba2-210">For more information, see: [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)</span></span>

##  <a name="relationship-of-sql-server-alwayson-components-to-wsfc"></a><a name="AlwaysOnWsfcRelationship"></a> <span data-ttu-id="d8ba2-211">SQL Server AlwaysOn コンポーネントと WSFC との関係</span><span class="sxs-lookup"><span data-stu-id="d8ba2-211">Relationship of SQL Server AlwaysOn Components to WSFC</span></span>
 <span data-ttu-id="d8ba2-212">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn と WSFC の機能およびコンポーネント間には、いくつかのリレーションシップの層が存在します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-212">Several layers of relationships exist between [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] AlwaysOn and WSFC features and components.</span></span>

 <span data-ttu-id="d8ba2-213">AlwaysOn 可用性グループは、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスでホストされています。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-213">AlwaysOn availability groups are hosted on [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances.</span></span>
<span data-ttu-id="d8ba2-214">クライアントは、可用性グループ リスナーの論理ネットワーク名を指定してプライマリまたはセカンダリ データベースに接続することを要求します。この要求は、基になる [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスまたは [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンス (FCI) の適切なインスタンス ネットワーク名にリダイレクトされます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-214">A client request that specifies a logical availability group listener network name to connect to a primary or secondary database is redirected to the appropriate instance network name of the underlying [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instance (FCI).</span></span>

 <span data-ttu-id="d8ba2-215">SQL サーバー インスタンスは、1 つのノード上でアクティブにホストされています。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-215">SQL Server instances are actively hosted on a single node.</span></span>
<span data-ttu-id="d8ba2-216">スタンドアロンの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスが存在する場合は、静的なインスタンス ネットワーク名で、常に 1 つのノードにあります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-216">If present, a stand-alone [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Instance always resides on a single Node with a static instance network name.</span></span>  <span data-ttu-id="d8ba2-217">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI が存在する場合は、1 つの仮想インスタンス ネットワーク名で、2 つ以上のフェールオーバー ノードの中の 1 つのノードでアクティブになります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-217">If present, a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI is active on one of two or more possible failover nodes with a single virtual Instance Network Name.</span></span>

 <span data-ttu-id="d8ba2-218">ノードは、WSFC クラスターのメンバーです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-218">Nodes are members of a WSFC cluster.</span></span>
<span data-ttu-id="d8ba2-219">すべてのノードの WSFC 構成メタデータと状態は、各ノードに保存されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-219">WSFC configuration metadata and status for all nodes is stored on each node.</span></span> <span data-ttu-id="d8ba2-220">各サーバーは、ユーザーまたはシステム データベースに対して非対称ストレージまたは共有ストレージ (SAN) ボリュームを提供できます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-220">Each server may provide asymmetric storage or shared storage (SAN) volumes for user or system databases.</span></span> <span data-ttu-id="d8ba2-221">各サーバーには、1 つまたは複数のサブネット上に少なくとも 1 つの物理ネットワーク インターフェイスがあります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-221">Each server has at least one physical network interface on one or more IP subnets.</span></span>

 <span data-ttu-id="d8ba2-222">WSFC サービスは、サーバー グループの正常性を監視し、構成を管理します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-222">The WSFC service monitors health and manages configuration for a group of servers.</span></span>
<span data-ttu-id="d8ba2-223">Windows Server フェールオーバー クラスター (WSFC) サービスは、WSFC 構成メタデータへの変更とその状態を、クラスター内のすべてのノードに反映します。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-223">The Windows Server Failover Cluster (WSFC) service propagates changes to WSFC Configuration metadata and status to all nodes in the cluster.</span></span> <span data-ttu-id="d8ba2-224">一部のメタデータと状態が、WSFC クォーラム監視リモート ファイル共有に保存されることもあります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-224">Partial metadata and status may be stored on a WSFC quorum-witness remote file share.</span></span> <span data-ttu-id="d8ba2-225">2 つ以上のアクティブなノードまたは監視サーバーによって、WSFC クラスターの正常性について投票するクォーラムが構成されます。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-225">Two or more active nodes or witnesses constitute a quorum to vote on the health of the WSFC cluster.</span></span>

 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="d8ba2-226">レジストリ キーは WSFC クラスターのサブキーです。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-226">registry keys are subkeys of the WSFC cluster.</span></span>
<span data-ttu-id="d8ba2-227">WSFC クラスターを削除してから再作成した場合は、 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] を有効にしていた、元の WSFC クラスター上の各サーバー インスタンスについて、 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 機能を無効にしてから再度有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-227">If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that was enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on the original WSFC cluster.</span></span> <span data-ttu-id="d8ba2-228">詳細については、「[AlwaysOn 可用性グループの有効化と無効化 &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/enable-and-disable-always-on-availability-groups-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d8ba2-228">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>

 <span data-ttu-id="d8ba2-229">![SQL Server AlwaysOn コンポーネント コンテキストの図](../../../database-engine/media/alwaysoncomponentcontextdiagram.gif "SQL Server AlwaysOn コンポーネント コンテキストの図")</span><span class="sxs-lookup"><span data-stu-id="d8ba2-229">![SQL Server AlwaysOn Component Context Diagram](../../../database-engine/media/alwaysoncomponentcontextdiagram.gif "SQL Server AlwaysOn Component Context Diagram")</span></span>

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="d8ba2-230">関連タスク</span><span class="sxs-lookup"><span data-stu-id="d8ba2-230">Related Tasks</span></span>

-   [<span data-ttu-id="d8ba2-231">クラスター クォーラムの NodeWeight 設定を表示</span><span class="sxs-lookup"><span data-stu-id="d8ba2-231">View Cluster Quorum NodeWeight Settings</span></span>](view-cluster-quorum-nodeweight-settings.md)

-   [<span data-ttu-id="d8ba2-232">クラスター クォーラムの NodeWeight の設定の構成</span><span class="sxs-lookup"><span data-stu-id="d8ba2-232">Configure Cluster Quorum NodeWeight Settings</span></span>](configure-cluster-quorum-nodeweight-settings.md)

-   [<span data-ttu-id="d8ba2-233">クォーラムを使用せずに WSFC クラスターを強制的に起動する</span><span class="sxs-lookup"><span data-stu-id="d8ba2-233">Force a WSFC Cluster to Start Without a Quorum</span></span>](force-a-wsfc-cluster-to-start-without-a-quorum.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="d8ba2-234">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="d8ba2-234">Related Content</span></span>

-   <span data-ttu-id="d8ba2-235">[Windows Server テクノロジ: フェールオーバー クラスター](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="d8ba2-235">[Windows Server Technologies:  Failover Clusters](https://technet.microsoft.com/library/cc732488\(v=WS.10\).aspx)</span></span>

-   <span data-ttu-id="d8ba2-236">[Windows Server 2008 R2 のフェールオーバー クラスター](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="d8ba2-236">[Failover Clusters in Windows Server 2008 R2](https://technet.microsoft.com/library/ff182338\(WS.10\).aspx)</span></span>

-   <span data-ttu-id="d8ba2-237">[フェールオーバー クラスターのイベントおよびログを表示する](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="d8ba2-237">[View Events and Logs for a Failover Cluster](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span></span>

-   [<span data-ttu-id="d8ba2-238">Get-ClusterLog フェールオーバー クラスター コマンドレット</span><span class="sxs-lookup"><span data-stu-id="d8ba2-238">Get-ClusterLog Failover Cluster Cmdlet</span></span>](https://technet.microsoft.com/library/ee461045.aspx)

## <a name="see-also"></a><span data-ttu-id="d8ba2-239">参照</span><span class="sxs-lookup"><span data-stu-id="d8ba2-239">See Also</span></span>
 <span data-ttu-id="d8ba2-240">[AlwaysOn フェールオーバークラスターインスタンス (SQL Server)](always-on-failover-cluster-instances-sql-server.md) [AlwaysOn 可用性グループ SQL Server &#40;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) [WSFC クォーラムモードと投票の構成](wsfc-quorum-modes-and-voting-configuration-sql-server.md)&#41;の概要 &#40;[フェールオーバークラスターインスタンスのフェールオーバーポリシー](failover-policy-for-failover-cluster-instances.md) SQL Server[強制クォーラムによるディザスターリカバリー](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)&#41;&#40;</span><span class="sxs-lookup"><span data-stu-id="d8ba2-240">[AlwaysOn Failover Cluster Instances (SQL Server)](always-on-failover-cluster-instances-sql-server.md) [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server.md) [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md) [Failover Policy for Failover Cluster Instances](failover-policy-for-failover-cluster-instances.md) [WSFC Disaster Recovery through Forced Quorum &#40;SQL Server&#41;](wsfc-disaster-recovery-through-forced-quorum-sql-server.md)</span></span>


