---
title: SQL Server フェールオーバー クラスター インスタンスのアップグレード (セットアップ) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- upgrading clusters
- clusters [SQL Server], upgrading
- failover clustering [SQL Server], creating clusters
- clusters [SQL Server], creating
- failover clustering [SQL Server], upgrading
ms.assetid: ea8b7d66-e5a1-402f-9928-8f7310e84f5c
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: a45628055ee12f5d771c863dec7a3368cdae5940
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740749"
---
# <a name="upgrade-a-sql-server-failover-cluster-instance-setup"></a><span data-ttu-id="b6c1f-102">SQL Server フェールオーバー クラスター インスタンスのアップグレード (セットアップ)</span><span class="sxs-lookup"><span data-stu-id="b6c1f-102">Upgrade a SQL Server Failover Cluster Instance (Setup)</span></span>
  <span data-ttu-id="b6c1f-103">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターを [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] フェールオーバー クラスターにアップグレードするには、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インストール ウィザードまたはコマンド プロンプトを使用します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-103">You can upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster by using the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Installation Wizard or a command prompt.</span></span>  
  
 <span data-ttu-id="b6c1f-104">フェールオーバー クラスターのアップグレードにおけるダウンタイムは、フェールオーバー時間およびアップグレード スクリプトの実行に必要な時間のみです。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-104">During the failover cluster upgrade, downtime is limited to failover time and the time that is required for upgrade scripts to run.</span></span> <span data-ttu-id="b6c1f-105">フェールオーバー クラスターのローリング アップグレード プロセスに従えば、ダウンタイムを最小に抑えられます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-105">If you follow the failover cluster rolling upgrade process, your downtime is minimal.</span></span> <span data-ttu-id="b6c1f-106">必須コンポーネントがフェールオーバー クラスター ノードにすべて揃っていない場合、必須コンポーネントのインストールに追加のダウンタイムが必要になります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-106">Depending on whether you have all the prerequisites on the failover cluster nodes, you might incur additional downtime while you install these prerequisites.</span></span> <span data-ttu-id="b6c1f-107">アップグレード中のダウンタイムを最小限に抑える方法の詳細については、このページの「[フェールオーバークラスターをアップグレードする前のベストプラクティス](#BestPractices)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-107">For more information about how to minimize the downtime during upgrade, see the [Best Practices Before Upgrading Failover Cluster](#BestPractices) section on this page.</span></span>  
  
 <span data-ttu-id="b6c1f-108">アップグレード方法の詳細については、「[サポートされているバージョンとエディションのアップグレード](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md)」および「 [SQL Server 2014 へのアップグレード](../../../database-engine/install-windows/upgrade-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-108">For more information about how to upgrade, see [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md) and [Upgrade to SQL Server 2014](../../../database-engine/install-windows/upgrade-sql-server.md).</span></span>  
  
 <span data-ttu-id="b6c1f-109">コマンドプロンプト使用のサンプル構文の詳細については、「 [Install SQL Server 2014 from The Command prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-109">For more information about sample syntax for command prompt usage, see [Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="b6c1f-110">前提条件</span><span class="sxs-lookup"><span data-stu-id="b6c1f-110">Prerequisites</span></span>  
 <span data-ttu-id="b6c1f-111">作業を開始する前に、次の重要な情報を確認してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-111">Before you begin, review the following important information:</span></span>  
  
-   [<span data-ttu-id="b6c1f-112">フェールオーバー クラスタリングをインストールする前に</span><span class="sxs-lookup"><span data-stu-id="b6c1f-112">Before Installing Failover Clustering</span></span>](../install/before-installing-failover-clustering.md)  
  
-   <span data-ttu-id="b6c1f-113">[アップグレードアドバイザーを使用してアップグレードを準備](../../install/use-upgrade-advisor-to-prepare-for-upgrades.md)します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-113">[Use Upgrade Advisor to Prepare for Upgrades](../../install/use-upgrade-advisor-to-prepare-for-upgrades.md).</span></span>  
  
-   [<span data-ttu-id="b6c1f-114">データベース エンジンのアップグレード</span><span class="sxs-lookup"><span data-stu-id="b6c1f-114">Upgrade Database Engine</span></span>](../../../database-engine/install-windows/upgrade-database-engine.md)  
  
-   <span data-ttu-id="b6c1f-115">セットアップでは、クラスター化されたオペレーティング システムに対して .NET Framework 4.0 がインストールされます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-115">Setup installs .NET Framework 4.0 on a clustered operating system.</span></span> <span data-ttu-id="b6c1f-116">ダウンタイムをできるだけ最小限に抑えるために、セットアップの実行前に .NET Framework 4.0 をインストールすることを検討してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-116">To minimize any possible downtime, consider installing .NET Framework 4.0 before you run Setup.</span></span>  
  
-   <span data-ttu-id="b6c1f-117">Visual Studio コンポーネントを適切にインストールできる状態にするために、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] は更新プログラムのインストールを要求します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-117">To make sure that the Visual Studio component can be installed correctly, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] requires you to install an update.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b6c1f-118">セットアップは、更新プログラムが存在するかどうかを確認した後、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインストールを続行する前に更新プログラムをダウンロードしてインストールするよう要求します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-118">Setup checks for the presence of this update and then requires you to download and install the update before you can continue with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation.</span></span> <span data-ttu-id="b6c1f-119">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップの中断を回避するには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップを実行する前に、以下の説明に従って更新プログラムをダウンロードおよびインストールします (または Windows Update に用意されている .NET 3.5 SP1 のすべての更新プログラムをインストールします)。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-119">To avoid the interruption during [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, you can download and install the update before running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup as described below (or install all the updates for .NET 3.5 SP1 available on Windows Update):</span></span>  
  
     <span data-ttu-id="b6c1f-120">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]Windows Server 2008 SP2 オペレーティングシステムがインストールされているコンピューターにをインストールする場合、必要な更新プログラムを[ここ](https://go.microsoft.com/fwlink/?LinkId=198093)から入手できます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-120">If you install [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on a computer with the Windows Server 2008 SP2 operating system, you can get the required update from [here](https://go.microsoft.com/fwlink/?LinkId=198093)</span></span>  
  
     <span data-ttu-id="b6c1f-121">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] SP1 または [!INCLUDE[win7](../../../includes/win7-md.md)] SP1 オペレーティング システム搭載のコンピューターに [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] をインストールする場合は、この更新プログラムが含まれています。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-121">If you install [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] on a computer with the [!INCLUDE[win7](../../../includes/win7-md.md)] SP1 or [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] SP1 operating system, this update in included.</span></span>  
  
-   <span data-ttu-id="b6c1f-122">.NET Framework 3.5 SP1 は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップでインストールされなくなりましたが、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] に [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)] をインストールする際に必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-122">.NET Framework 3.5 SP1 is no longer installed by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but may be required while installing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on [!INCLUDE[firstref_longhorn](../../../includes/firstref-longhorn-md.md)].</span></span> <span data-ttu-id="b6c1f-123">詳細については、「 [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] [リリースノート](https://go.microsoft.com/fwlink/?LinkId=296445)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-123">For more information, see [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)][Release Notes](https://go.microsoft.com/fwlink/?LinkId=296445).</span></span>  
  
-   <span data-ttu-id="b6c1f-124">ローカルでのインストールの場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップを管理者として実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-124">For local installations, you must run [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup as an administrator.</span></span> <span data-ttu-id="b6c1f-125">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をリモート共有からインストールする場合は、そのリモート共有に対する読み取り権限を持つドメイン アカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-125">If you install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] from a remote share, you must use a domain account that has read permissions on the remote share.</span></span>  
  
-   <span data-ttu-id="b6c1f-126">のインスタンスをフェールオーバークラスターにアップグレードするには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] アップグレードするインスタンスがフェールオーバークラスターである必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-126">To upgrade an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, the instance being upgraded must be a failover cluster.</span></span>  
  
     <span data-ttu-id="b6c1f-127">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のスタンドアロンのインスタンスを [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] フェールオーバー クラスターに移動するには、新しく [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] フェールオーバー クラスターをインストールし、その後、データベース コピー ウィザードを使用してスタンドアロンのインスタンスからユーザー データベースを移行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-127">To move a stand-alone instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, install a new [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] failover cluster, and then migrate user databases from the stand-alone instance by using the Copy Database Wizard.</span></span> <span data-ttu-id="b6c1f-128">詳細については、「 [Use the Copy Database Wizard](../../../relational-databases/databases/use-the-copy-database-wizard.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-128">For more information, see [Use the Copy Database Wizard](../../../relational-databases/databases/use-the-copy-database-wizard.md).</span></span>  
  
## <a name="rolling-upgrades"></a><span data-ttu-id="b6c1f-129">ローリングアップグレード</span><span class="sxs-lookup"><span data-stu-id="b6c1f-129">Rolling Upgrades</span></span>  
 <span data-ttu-id="b6c1f-130">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターを [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] にアップグレードするには、フェールオーバー クラスター ノードをパッシブ ノードから 1 つずつアップグレードする操作でセットアップを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-130">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], you must run setup with upgrade action on each failover cluster node, one at a time, starting with the passive nodes.</span></span> <span data-ttu-id="b6c1f-131">各ノードをアップグレードする場合、ノードはフェールオーバー クラスターの実行可能な所有者から除外されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-131">As you upgrade each node, it is left out of the possible owners of the failover cluster.</span></span> <span data-ttu-id="b6c1f-132">予期しないフェールオーバーが発生した場合、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のセットアップによりクラスター リソース グループの所有権がアップグレード済みのノードに移動するまで、アップグレード済みのノードはフェールオーバーに関与しません。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-132">If there is an unexpected failover, the upgraded nodes do not participate in the failover until cluster resource group ownership is moved to an upgraded node by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup.</span></span>  
  
 <span data-ttu-id="b6c1f-133">既定では、アップグレードされたノードにフェールオーバーするタイミングは、セットアップによって自動的に決定されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-133">By default, Setup automatically determines when to fail over to an upgraded node.</span></span> <span data-ttu-id="b6c1f-134">決定の際に基準になるのは、フェールオーバー クラスター インスタンス内のノード総数、およびアップグレード済みのノード数です。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-134">This depends on the total number of nodes in the failover cluster instance and the number of nodes that have already been upgraded.</span></span> <span data-ttu-id="b6c1f-135">ノードの半数以上が既にアップグレードされている場合、次のノードでアップグレードを実行すると、セットアップによってアップグレード済みのノードにフェールオーバーが発生します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-135">When half of the nodes or more have already been upgraded, Setup causes a failover to an upgraded node when you perform upgrade on the next node.</span></span> <span data-ttu-id="b6c1f-136">アップグレード済みのノードにフェールオーバーする際、クラスター グループはアップグレード済みのノードに移動します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-136">Upon failover to an upgraded node, the cluster group is moved to an upgraded node.</span></span> <span data-ttu-id="b6c1f-137">すべてのアップグレード済みノードは実行可能な所有者の一覧に格納され、まだアップグレードされていないすべてのノードは実行可能な所有者の一覧から削除されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-137">All the upgraded nodes are put in the possible owners list and all the nodes that are not yet upgraded are removed from the possible owners list.</span></span> <span data-ttu-id="b6c1f-138">残りの各ノードをアップグレードする場合、ノードはフェールオーバー クラスターの実行可能な所有者に追加されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-138">As you upgrade each remaining node, it is added to the possible owners of the failover cluster.</span></span>  
  
 <span data-ttu-id="b6c1f-139">ダウンタイムでのこのプロセス結果は、1 回のフェールオーバー時間、および全フェールオーバー クラスター アップグレード時のデータベース アップグレード スクリプトの実行時間に限定されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-139">This process results in downtime limited to one failover time and database upgrade script execution time during the whole failover cluster upgrade.</span></span>  
  
 <span data-ttu-id="b6c1f-140">アップグレード プロセス中にクラスター ノードのフェールオーバーの動作を制御するには、コマンド プロンプトでアップグレード操作を実行して、/FAILOVERCLUSTERROLLOWNERSHIP パラメーターを使用します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-140">To control the failover behavior of cluster nodes during the upgrade process, run the upgrade operation at the command prompt and use the /FAILOVERCLUSTERROLLOWNERSHIP parameter.</span></span> <span data-ttu-id="b6c1f-141">詳細については、「[コマンド プロンプトからの SQL Server 2014 のインストール](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-141">For more information, see [Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
 <span data-ttu-id="b6c1f-142">**メモ**単一ノードのフェールオーバークラスターがある場合、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップは [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースグループをオフラインにします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-142">**Note** If there is a single-node failover cluster, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup takes the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource group offline.</span></span>  
  
## <a name="considerations-when-upgrading-from-ssversion2005"></a><span data-ttu-id="b6c1f-143">からアップグレードする際の考慮事項[!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b6c1f-143">Considerations when Upgrading from [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)]</span></span>  
 <span data-ttu-id="b6c1f-144">クラスターのセキュリティ ポリシーにドメイン グループを指定している場合は、[!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)] でサービス SID を指定できません。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-144">If you specified domain groups for the cluster security policy, you cannot specify service SID on [!INCLUDE[nextref_longhorn](../../../includes/nextref-longhorn-md.md)].</span></span> <span data-ttu-id="b6c1f-145">サービス SID を使用するには、サイド バイ サイド アップグレードを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-145">If you want to use the service SID, you need to perform a side by side upgrade.</span></span>  
  
 <span data-ttu-id="b6c1f-146">[アップグレード] を選択すると、にインストールされている [!INCLUDE[ssDE](../../../includes/ssde-md.md)] かどうかにかかわらず、フルテキスト検索がセットアップに含まれ [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-146">When you select [!INCLUDE[ssDE](../../../includes/ssde-md.md)] for upgrade, full-text search is included in the setup regardless of whether it was installed in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].</span></span>  
  
 <span data-ttu-id="b6c1f-147">[!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] でフルテキスト検索を有効にしていた場合、セットアップでは、使用できるオプションに関係なくフルテキスト検索カタログが再構築されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-147">If full-text search was enabled in [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], Setup rebuilds the full-text search catalog regardless of the options available to you.</span></span>  
  
## <a name="upgrading-to-a-sssql14-multi-subnet-failover-cluster"></a><span data-ttu-id="b6c1f-148">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] マルチサブネット フェールオーバー クラスターへのアップグレード</span><span class="sxs-lookup"><span data-stu-id="b6c1f-148">Upgrading to a [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] Multi-Subnet Failover Cluster</span></span>  
 <span data-ttu-id="b6c1f-149">想定されるアップグレード シナリオは 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-149">There are two possible scenarios for upgrades:</span></span>  
  
1.  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b6c1f-150">フェールオーバー クラスターが、現在、単一のサブネット上で現在構成されている場合: 最初に、セットアップを開始してアップグレード プロセスに従って、既存のクラスターを [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] にアップグレードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-150">failover cluster is currently configured on a single subnet: You must first upgrade the existing cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] by launching Setup and following the upgrade process.</span></span> <span data-ttu-id="b6c1f-151">既存のフェールオーバー クラスターのアップグレードの完了後に、AddNode 機能を使用して別のサブネット上のノードを追加します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-151">After completing the upgrade of the existing failover cluster, add a node that is on a different subnet using the AddNode functionality.</span></span> <span data-ttu-id="b6c1f-152">[クラスター ネットワークの構成] ページで、IP アドレス リソースの依存関係が OR に変更されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-152">Confirm the IP address resource dependency change to OR in the cluster network configuration page.</span></span> <span data-ttu-id="b6c1f-153">これで、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターが作成されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-153">You now have a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover cluster.</span></span>  
  
2.  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b6c1f-154">フェールオーバー クラスターが、現在、拡張 V-LAN テクノロジを使用して複数のサブネット上で構成されている場合: 最初に、既存のクラスターを [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] にアップグレードする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-154">failover cluster is currently configured on multiple subnets using the stretch V-LAN technology: You must first upgrade the existing cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span> <span data-ttu-id="b6c1f-155">拡張 V-LAN テクノロジでは単一のサブネットが構成されるため、ネットワーク構成を複数のサブネットに変更し、Windows フェールオーバー クラスター管理ツールを使用して IP アドレス リソースの依存関係を OR に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-155">Because stretch V-LAN technology configures a single subnet, the network configuration must to be changed to multiple subnets, and change the IP address resource dependency using the Windows Failover Cluster administration tool and change the IP dependency to OR.</span></span>  
  
###  <a name="best-practices-before-upgrading-a-ssnoversion-failover-cluster"></a><a name="BestPractices"></a><span data-ttu-id="b6c1f-156">フェールオーバークラスターをアップグレードする前のベストプラクティス [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b6c1f-156">Best Practices Before Upgrading a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster</span></span>  
 <span data-ttu-id="b6c1f-157">再起動による予期しないダウンタイムを回避するには、クラスター ノードでアップグレードを実行する前に、.NET Framework 4.0 の no-reboot パッケージをすべてのフェールオーバー クラスター ノードにあらかじめインストールしておきます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-157">To eliminate unexpected downtime caused by a restart, preinstall the no-reboot package for .NET Framework 4.0 on all the failover cluster nodes before you run the upgrade on the cluster nodes.</span></span> <span data-ttu-id="b6c1f-158">前提条件をプレインストールするには、次の手順を実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-158">We recommend the following steps to preinstall the prerequisites:</span></span>  
  
-   <span data-ttu-id="b6c1f-159">.NET Framework 4.0 の no-reboot パッケージをインストールし、共有コンポーネントのみのアップブレードをパッシブ ノードから開始します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-159">Install the no-reboot package for .NET Framework 4.0, and upgrade only the shared components starting with the passive nodes.</span></span> <span data-ttu-id="b6c1f-160">これにより、[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 4.0、Windows インストーラー 4.5、および [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サポート ファイルがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-160">This installs [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] 4.0, Windows Installer 4.5, and [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] support files.</span></span>  
  
-   <span data-ttu-id="b6c1f-161">必要に応じて、1 回以上再起動します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-161">Restart one or more times, as required.</span></span>  
  
-   <span data-ttu-id="b6c1f-162">アップグレード済みのノードにフェールオーバーします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-162">Fail over to an upgraded node.</span></span>  
  
-   <span data-ttu-id="b6c1f-163">最後に残ったノードで共有コンポーネントをアップグレードします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-163">Upgrade the shared components on the last remaining node.</span></span>  
  
 <span data-ttu-id="b6c1f-164">すべての共有コンポーネントがアップグレードされ、必須コンポーネントがインストールされた後、フェールオーバー クラスター アップグレード プロセスを起動します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-164">After all the shared components are upgraded and prerequisites are installed, start the failover cluster upgrade process.</span></span> <span data-ttu-id="b6c1f-165">各フェールオーバークラスターノードでアップグレードを実行する必要があります。最初にパッシブノードから開始し、クラスターリソースグループを所有するノードに対して方法を作成します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-165">You have to run upgrade on each failover cluster node, starting with the passive nodes first and making your way toward the node that owns the cluster resource group.</span></span>  
  
-   <span data-ttu-id="b6c1f-166">既存のフェールオーバー クラスターに機能を追加することはできません。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-166">You cannot add features to an existing failover cluster.</span></span>  
  
-   <span data-ttu-id="b6c1f-167">フェールオーバー クラスターのエディションの変更は、特定のシナリオに制限されています。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-167">Changing the edition of the failover cluster is limited to certain scenarios.</span></span> <span data-ttu-id="b6c1f-168">詳細については、「 [サポートされているバージョンとエディションのアップグレード](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-168">For more information, see [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span></span>  
  
##  <a name="to-upgrade-a-ssnoversion-failover-cluster"></a><a name="UpgradeSteps"></a><span data-ttu-id="b6c1f-169">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="b6c1f-169">To Upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster</span></span>  
  
#### <a name="to-upgrade-a-ssnoversion-failover-cluster"></a><span data-ttu-id="b6c1f-170">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="b6c1f-170">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster</span></span>  
  
1.  <span data-ttu-id="b6c1f-171">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インストール メディアを挿入し、ルート フォルダーの Setup.exe をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-171">Insert the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation media, and from the root folder, double-click Setup.exe.</span></span> <span data-ttu-id="b6c1f-172">ネットワーク共有からインストールするには、ネットワーク共有上のルート フォルダーに移動し、Setup.exe をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-172">To install from a network share, move to the root folder on the share, and then double-click Setup.exe.</span></span> <span data-ttu-id="b6c1f-173">必須コンポーネントがインストールされていない場合は、インストールするように求められます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-173">You may be asked to install the prerequisites, if they are not previously installed.</span></span>  
  
2.  > [!IMPORTANT]  
    >  <span data-ttu-id="b6c1f-174">手順 3. と 4. の詳細については、「[フェールオーバークラスターをアップグレードする前のベストプラクティス](#BestPractices)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-174">For more information about steps 3 and 4, see the [Best Practices Before Upgrading Failover Cluster](#BestPractices) section.</span></span>  
  
3.  <span data-ttu-id="b6c1f-175">必須コンポーネントがインストールされると、インストール ウィザードによって [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インストール センターが起動します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-175">After prerequisites are installed, the Installation Wizard starts the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Installation Center.</span></span> <span data-ttu-id="b6c1f-176">の既存のインスタンスをアップグレードするには、[、、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] \*\* [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)] [!INCLUDE[ssKilimanjaro](../../../includes/sskilimanjaro-md.md)] 、または [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] からのアップグレード\*\*] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-176">To upgrade an existing instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], click **Upgrade from [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)], [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], [!INCLUDE[ssKilimanjaro](../../../includes/sskilimanjaro-md.md)], or [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].**</span></span>  
  
4.  <span data-ttu-id="b6c1f-177">セットアップ サポート ファイルが必要な場合は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップによってインストールされます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-177">If Setup support files are required, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup installs them.</span></span> <span data-ttu-id="b6c1f-178">コンピューターの再起動を求めるメッセージが表示されたら、再起動してから続行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-178">If you are instructed to restart your computer, restart before you continue.</span></span>  
  
5.  <span data-ttu-id="b6c1f-179">システム構成チェッカーにより、コンピューターで検出処理が実行されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-179">The System Configuration Checker runs a discovery operation on your computer.</span></span> <span data-ttu-id="b6c1f-180">続行するには、 [!INCLUDE[clickOK](../../../includes/clickok-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b6c1f-180">To continue, [!INCLUDE[clickOK](../../../includes/clickok-md.md)].</span></span>  
  
6.  <span data-ttu-id="b6c1f-181">[プロダクト キー] ページで、以前の製品バージョンのエディションに一致する新しいバージョンのエディション用の PID キーを入力します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-181">On the Product Key page, enter the PID key for the new version edition that matches the edition of the old product version.</span></span> <span data-ttu-id="b6c1f-182">たとえば、エンタープライズ フェールオーバー クラスターをアップグレードするには、 [!INCLUDE[ssEnterprise](../../../includes/ssenterprise-md.md)]用の PID キーを入力する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-182">For example, to upgrade an Enterprise failover cluster, you must supply a PID key for [!INCLUDE[ssEnterprise](../../../includes/ssenterprise-md.md)].</span></span> <span data-ttu-id="b6c1f-183">**[次へ]** をクリックして次に進みます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-183">Click **Next** to continue.</span></span> <span data-ttu-id="b6c1f-184">フェールオーバー クラスターのアップグレードに使用する PID キーは、同じ [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンス内のすべてのフェールオーバー クラスター ノードで一貫している必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-184">Be aware that the PID key that you use for a failover cluster upgrade must be consistent across all failover cluster nodes in the same [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="b6c1f-185">詳細については、「 [SQL Server 2014 のエディションとコンポーネント](../../editions-and-components-of-sql-server-2016.md)」および「[サポートされるバージョンとエディションのアップグレード](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-185">For more information, see [Editions and Components of SQL Server 2014](../../editions-and-components-of-sql-server-2016.md) and [Supported Version and Edition Upgrades](../../../database-engine/install-windows/supported-version-and-edition-upgrades.md).</span></span>  
  
7.  <span data-ttu-id="b6c1f-186">[ライセンス条項] ページで使用許諾契約書を読み、使用許諾条件に同意する場合は対応するチェック ボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-186">On the License Terms page, read the license agreement, and then select the check box to accept the license terms and conditions.</span></span> <span data-ttu-id="b6c1f-187">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]の機能向上に役立てるため、機能の使用状況オプションを有効にしてレポートを [!INCLUDE[msCoName](../../../includes/msconame-md.md)]に送信することもできます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-187">To help improve [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], you can also enable the feature usage option and send reports to [!INCLUDE[msCoName](../../../includes/msconame-md.md)].</span></span> <span data-ttu-id="b6c1f-188">**[次へ] をクリック**して続行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-188">**Click Next to continue**.</span></span> <span data-ttu-id="b6c1f-189">セットアップを終了するには、 **[キャンセル]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-189">To end Setup, click **Cancel**.</span></span>  
  
8.  <span data-ttu-id="b6c1f-190">[インスタンスの選択] ページで、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] にアップグレードする [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]インスタンスを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-190">On the Select Instance page, specify the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance to upgrade to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span> <span data-ttu-id="b6c1f-191">**[次へ] をクリック**して続行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-191">**Click Next to continue**.</span></span>  
  
9. <span data-ttu-id="b6c1f-192">[機能の選択] ページでは、アップグレードする機能があらかじめ選択されています。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-192">On the Feature Selection page, the features to upgrade are preselected.</span></span> <span data-ttu-id="b6c1f-193">機能名を選択すると、右側のペインに各コンポーネント グループの説明が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-193">A description for each component group appears in the right pane after you select the feature name.</span></span> <span data-ttu-id="b6c1f-194">アップグレードする機能は変更できず、アップグレード操作中に機能を追加することもできないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-194">Be aware that you cannot change the features to be upgraded, and you cannot add features during the upgrade operation.</span></span> <span data-ttu-id="b6c1f-195">アップグレード操作の完了後に、アップグレード済みのインスタンスに機能を追加する方法に [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] ついては、「 [SQL Server 2014 のインスタンスへの機能の追加」 &#40;「セットアップ&#41;](../../../database-engine/install-windows/add-features-to-an-instance-of-sql-server-setup.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-195">To add features to an upgraded instance of [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] after the upgrade operation is complete, see [Add Features to an Instance of SQL Server 2014 &#40;Setup&#41;](../../../database-engine/install-windows/add-features-to-an-instance-of-sql-server-setup.md).</span></span>  
  
     <span data-ttu-id="b6c1f-196">選択した機能の必須コンポーネントが、右側のペインに表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-196">The prerequisites for the selected features are displayed on the right-hand pane.</span></span> <span data-ttu-id="b6c1f-197">SQL Server セットアップでは、この手順の後半で説明するインストール手順の間に、まだインストールされていない必須コンポーネントをインストールします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-197">SQL Server Setup will install the prerequisite that are not already installed during the installation step described later in this procedure.</span></span>  
  
10. <span data-ttu-id="b6c1f-198">フィールドが [インスタンスの構成] ページで以前のインスタンスから自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-198">On the Instance Configuration page, fields are automatically populated from the old instance.</span></span> <span data-ttu-id="b6c1f-199">新しい InstanceID 値を指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-199">You can choose to specify the new InstanceID value.</span></span>  
  
     <span data-ttu-id="b6c1f-200">**[インスタンス ID]** : 既定では、インスタンス名がインスタンス ID として使用されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-200">**Instance ID** - By default, the instance name is used as the Instance ID.</span></span> <span data-ttu-id="b6c1f-201">これは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]のインスタンスのインストール ディレクトリとレジストリ キーを識別するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-201">This is used to identify installation directories and registry keys for your instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b6c1f-202">これは、既定のインスタンスの場合も名前付きインスタンスの場合も同様です。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-202">This is the case for default instances and named instances.</span></span> <span data-ttu-id="b6c1f-203">既定のインスタンスの場合、インスタンス名とインスタンス ID は、MSSQLSERVER になります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-203">For a default instance, the instance name and instance ID would be MSSQLSERVER.</span></span> <span data-ttu-id="b6c1f-204">既定以外のインスタンス ID を使用するには、 **[インスタンス ID]** チェック ボックスをオンにして、値を指定します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-204">To use a nondefault instance ID, select the **Instance ID** check box and provide a value.</span></span> <span data-ttu-id="b6c1f-205">既定値をオーバーライドする場合、すべてのフェールオーバー クラスター ノードでアップグレードされたものと同じインスタンス ID を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-205">If you override the default value, you must specify the same Instance ID for the instance being upgraded on all the failover cluster nodes.</span></span> <span data-ttu-id="b6c1f-206">アップグレード済みインスタンスのインスタンス ID は、すべてのノードに一致している必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-206">The Instance ID for the upgraded instance must match across the nodes.</span></span>  
  
     <span data-ttu-id="b6c1f-207">**[検出されたインスタンスと機能**]: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップを実行しているコンピューター上にあるのインスタンスがグリッドに表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-207">**Detected instances and features** - The grid shows instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that are on the computer where Setup is running.</span></span> <span data-ttu-id="b6c1f-208">**[次へ] をクリック**して続行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-208">**Click Next to continue**.</span></span>  
  
11. <span data-ttu-id="b6c1f-209">[必要なディスク領域] ページでは、指定した機能に必要なディスク領域が計算され、セットアップを実行中のコンピューター上の空き領域と比較されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-209">The Disk Space Requirements page calculates the required disk space for the features that you specify, and compares requirements to the available disk space on the computer where Setup is running.</span></span>  
  
12. <span data-ttu-id="b6c1f-210">[フルテキスト検索アップグレード] ページで、アップグレードするデータベースのアップグレード オプションを指定します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-210">On the Full-Text Search Upgrade page, specify the upgrade options for the databases being upgraded.</span></span> <span data-ttu-id="b6c1f-211">詳細については、「 [フルテキスト検索アップグレード オプション](../../install/full-text-search-upgrade-options.md)」。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-211">For more information, see [Full-Text Search Upgrade Options](../../install/full-text-search-upgrade-options.md).</span></span>  
  
13. <span data-ttu-id="b6c1f-212">**[エラー レポート]** ページで、 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] に送信する、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]の機能向上に役立つ情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-212">On the **Error Reporting** page, specify the information that you want to send to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] that will help improve [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="b6c1f-213">既定では、エラー レポートのオプションは有効になっています。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-213">By default, options for error reporting is enabled.</span></span>  
  
14. <span data-ttu-id="b6c1f-214">アップグレード処理が開始される前に、システム構成チェッカーによって別のルール セットが実行され、コンピューターの構成と指定した [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 機能が検証されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-214">The System Configuration Checker runs one more set of rules to validate your computer configuration with the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] features that you have specified, before the upgrade operation begins.</span></span>  
  
15. <span data-ttu-id="b6c1f-215">フェールオーバー クラスター インスタンス内のノードの一覧、および各ノードの [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] コンポーネントのインスタンスのバージョン情報が [クラスター アップグレード レポート] ページに表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-215">The Cluster Upgrade Report page displays the list of nodes in the failover cluster instance and the instance version information for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] components on each node.</span></span> <span data-ttu-id="b6c1f-216">また、データベース スクリプト状態およびレプリケーション スクリプト状態が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-216">It displays the database script status and replication script status.</span></span> <span data-ttu-id="b6c1f-217">さらに、 **[次へ]** をクリックしたときの動作についての情報メッセージも表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-217">In addition, it also displays informational messages on what will occur when you click **Next**.</span></span> <span data-ttu-id="b6c1f-218">既にアップグレードされているフェールオーバークラスターノードの数とノードの合計数に応じて、[**次へ**] をクリックしたときに発生するフェールオーバーの動作が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-218">Depending on the number of failover cluster nodes that have already been upgraded and total number of nodes, Setup displays the failover behavior that happens when you click **Next**.</span></span> <span data-ttu-id="b6c1f-219">必須コンポーネントをまだインストールしていない場合に生じ得る不要なダウンタイムについての警告も表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-219">It also warns about potential unnecessary downtime if you have not installed the prerequisites already.</span></span>  
  
16. <span data-ttu-id="b6c1f-220">[アップグレードの準備完了] ページには、セットアップで指定したインストール オプションのツリー ビューが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-220">The Ready to Upgrade page displays a tree view of installation options that were specified during Setup.</span></span> <span data-ttu-id="b6c1f-221">続行するには、 **[アップグレード]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-221">To continue, click **Upgrade**.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="b6c1f-222">セットアップは、選択した機能の必須コンポーネントを最初にインストールし、その後で機能をインストールします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-222">Setup will first install the required prerequisites for the selected features followed by the feature installation.</span></span>  
  
17. <span data-ttu-id="b6c1f-223">アップグレード中は、セットアップの進行に合わせてアップグレードの進行状況を監視できるように、[進行状況] ページに状態が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-223">During upgrade, the Progress page provides status so that you can monitor the upgrade progress on the current node as Setup continues.</span></span>  
  
18. <span data-ttu-id="b6c1f-224">現在のノードでアップグレードが終了すると、すべてのフェールオーバー クラスター ノード、各フェールオーバー クラスター ノードの機能、およびそのバージョン情報に関するアップグレード状態の情報が [クラスター アップグレード レポート] ページに表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-224">After the upgrade of the current node, the Cluster Upgrade Report page displays an upgrade status information for all the failover cluster nodes, features on each failover cluster node, and their version information.</span></span> <span data-ttu-id="b6c1f-225">表示されたバージョン情報を確認し、残りのノードでのアップグレードを続行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-225">Confirm the version information that is displayed and continue with the upgrade of the remaining nodes.</span></span> <span data-ttu-id="b6c1f-226">アップグレードしたノードでフェールオーバーが発生した場合は、状態ページを確認する作業も必要になります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-226">If the failover to upgraded nodes occurred, this is also apparent on the status page.</span></span> <span data-ttu-id="b6c1f-227">Windows クラスター アドミニストレーターのツールを使用して確認することもできます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-227">You can also check in the Windows Cluster administrator tool to confirm.</span></span>  
  
19. <span data-ttu-id="b6c1f-228">アップグレードが終了すると、[完了] ページにインストールの概要ログ ファイルへのリンクと、その他の重要な注意事項が表示されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-228">After upgrade, the Complete page provides a link to the summary log file for the installation and other important notes.</span></span> <span data-ttu-id="b6c1f-229">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインストール プロセスを完了するには、 **[閉じる]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-229">To complete the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation process, click **Close**.</span></span>  
  
20. <span data-ttu-id="b6c1f-230">コンピューターの再起動を求めるメッセージが表示されたら、再起動してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-230">If you are instructed to restart the computer, do so now.</span></span> <span data-ttu-id="b6c1f-231">セットアップが完了した時点で、インストール ウィザードによるメッセージを確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-231">It is important to read the message from the Installation Wizard when you have finished with Setup.</span></span> <span data-ttu-id="b6c1f-232">セットアップ ログ ファイルの詳細については、「 [SQL Server セットアップ ログ ファイルの表示と読み取り](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-232">For more information about Setup log files, see [View and Read SQL Server Setup Log Files](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md).</span></span>  
  
21. <span data-ttu-id="b6c1f-233">アップグレード プロセスを完了するには、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスターの他のすべてのノードで、手順 1. ～ 21. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-233">To complete the upgrade process, repeat steps 1 to 21 on all the other nodes on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster.</span></span>  
  
## <a name="to-upgrade-a-ssnoversion-multi-subnet-failover-cluster"></a><span data-ttu-id="b6c1f-234">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="b6c1f-234">To upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Multi-Subnet Failover Cluster</span></span>  
  
#### <a name="to-upgrade-to-a-ssnoversion-multi-subnet-failover-cluster-existing-ssnoversion-cluster-is-a-non-multi-subnet-cluster"></a><span data-ttu-id="b6c1f-235">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] マルチサブネット フェールオーバー クラスターにアップグレードするには (既存の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] クラスターがマルチサブネット クラスターでない場合)</span><span class="sxs-lookup"><span data-stu-id="b6c1f-235">To upgrade to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] multi-subnet failover Cluster (Existing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] cluster is a non multi-subnet cluster).</span></span>  
  
1.  <span data-ttu-id="b6c1f-236">上の「 [SQL Server フェールオーバークラスターをアップグレードするに](#UpgradeSteps)は」の手順 1. ~ 24. に従って、クラスターをにアップグレードし [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-236">Follow the steps 1 through 24 described in the [To upgrade a SQL Server failover cluster](#UpgradeSteps) section above to upgrade your cluster to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)].</span></span>  
  
2.  <span data-ttu-id="b6c1f-237">AddNode セットアップ操作を使用して別のサブネット上のノードを追加し、 **[クラスター ネットワークの構成]** ページで IP アドレス リソースの依存関係が OR になっていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-237">Add a node on a different subnet using the AddNode Setup action and confirm the IP address resource dependency to OR on the **Cluster Network Configuration** page.</span></span> <span data-ttu-id="b6c1f-238">詳細については、「 [SQL Server フェールオーバークラスターでのノードの追加または削除」 &#40;セットアップ&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-238">For more information, see [Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;](../install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md).</span></span>  
  
#### <a name="to-upgrade-a-multi-subnet-cluster-currently-using-stretch-v-lan"></a><span data-ttu-id="b6c1f-239">拡張 V-LAN を現在使用しているマルチサブネット クラスターをアップグレードするには</span><span class="sxs-lookup"><span data-stu-id="b6c1f-239">To upgrade a multi-subnet cluster currently using Stretch V-Lan.</span></span>  
  
1.  <span data-ttu-id="b6c1f-240">上の「 [SQL Server フェールオーバークラスターをアップグレードするに](#UpgradeSteps)は」の手順 1. ~ 24. に従って、クラスターをにアップグレードし [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-240">Follow the steps 1 through 24 described in the [To upgrade a SQL Server failover cluster](#UpgradeSteps) section above to upgrade your cluster to [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>  
  
2.  <span data-ttu-id="b6c1f-241">ネットワーク設定を変更し、リモート ノードを別のサブネットに移動します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-241">Change the network settings to move the remote node to a different subnet.</span></span>  
  
3.  <span data-ttu-id="b6c1f-242">Windows フェールオーバー クラスター管理ツールを使用して、IP アドレス リソースの依存関係が OR に設定された新しいサブネットの新しい IP アドレスを追加します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-242">Using the Windows Failover Cluster management tool, add a new IP address for the new subnet set the IP address resource dependency to OR.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="b6c1f-243">次の手順</span><span class="sxs-lookup"><span data-stu-id="b6c1f-243">Next Steps</span></span>  
 <span data-ttu-id="b6c1f-244">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]へのアップグレード後は、次の作業を実行します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-244">After you upgrade to [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], complete the following tasks:</span></span>  
  
-   <span data-ttu-id="b6c1f-245">サーバーを登録します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-245">Register your servers</span></span>  
  
     <span data-ttu-id="b6c1f-246">アップグレードすると、以前の [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスのレジストリ設定が削除されます。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-246">Upgrade removes registry settings for the previous [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="b6c1f-247">アップグレード後、サーバーを再登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-247">After you upgrade, you must reregister your servers.</span></span>  
  
-   <span data-ttu-id="b6c1f-248">統計を更新します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-248">Update statistics</span></span>  
  
     <span data-ttu-id="b6c1f-249">クエリ パフォーマンスを最適化するため、アップグレードに続いてすべてのデータベース上で統計を更新することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-249">To help optimize query performance, we recommend that you update statistics on all databases following upgrade.</span></span> <span data-ttu-id="b6c1f-250">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] データベースのユーザー定義テーブル内の統計を更新するには、**sp_updatestats** ストアド プロシージャを使用します。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-250">Use the **sp_updatestats** stored procedure to update statistics in user-defined tables in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] databases.</span></span>  
  
-   <span data-ttu-id="b6c1f-251">新しいインストールを構成する [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="b6c1f-251">Configure your new [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation</span></span>  
  
     <span data-ttu-id="b6c1f-252">システムのセキュリティを向上させるため、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] では、主要なサービスと機能を個別にインストールし、有効化できるようになっています。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-252">To reduce the attackable surface area of a system, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] selectively installs and enables key services and features.</span></span> <span data-ttu-id="b6c1f-253">外部からのアクセスの設定の詳細については、このリリースの Readme ファイルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="b6c1f-253">For more information about surface area configuration, see the readme file for this release.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b6c1f-254">参照</span><span class="sxs-lookup"><span data-stu-id="b6c1f-254">See Also</span></span>  
 <span data-ttu-id="b6c1f-255">[コマンドプロンプトから SQL Server 2014 をインストールする](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md) </span><span class="sxs-lookup"><span data-stu-id="b6c1f-255">[Install SQL Server 2014 from the Command Prompt](../../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md) </span></span>  
 [<span data-ttu-id="b6c1f-256">SQL Server セットアップ ログ ファイルの表示と読み取り</span><span class="sxs-lookup"><span data-stu-id="b6c1f-256">View and Read SQL Server Setup Log Files</span></span>](../../../database-engine/install-windows/view-and-read-sql-server-setup-log-files.md)  
  
  
