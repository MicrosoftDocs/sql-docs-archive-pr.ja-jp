---
title: SQL Server リソースへの依存関係の追加 | Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- resource dependencies [SQL Server]
- failover clustering [SQL Server], dependencies
- clusters [SQL Server], dependencies
- dependencies [SQL Server], clustering
ms.assetid: 25dbb751-139b-4c8e-ac62-3ec23110611f
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8610d3dc847d0d2b8dd6f570aa543d766adf68c0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87640539"
---
# <a name="add-dependencies-to-a-sql-server-resource"></a><span data-ttu-id="afc39-102">SQL Server リソースへの依存関係の追加</span><span class="sxs-lookup"><span data-stu-id="afc39-102">Add Dependencies to a SQL Server Resource</span></span>
  <span data-ttu-id="afc39-103">このトピックでは、フェールオーバー クラスター マネージャー スナップインを使用して、AlwaysOn フェールオーバー クラスター インスタンス (FCI) リソースに依存関係を追加する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="afc39-103">This topic describes how to add dependencies to an AlwaysOn Failover Cluster Instance (FCI) resource by using the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="afc39-104">フェールオーバー クラスター マネージャー スナップインは、Windows Server フェールオーバー クラスタリング (WSFC) サービスのクラスター管理アプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="afc39-104">The Failover Cluster Manager snap-in is the cluster management application for the Windows Server Failover Clustering (WSFC) service.</span></span>  
  
-   <span data-ttu-id="afc39-105">**作業を開始する準備:** [制限事項と制約事項](#Restrictions)、[前提条件](#Prerequisites)</span><span class="sxs-lookup"><span data-stu-id="afc39-105">**Before you begin:**  [Limitations and Restrictions](#Restrictions), [Prerequisites](#Prerequisites)</span></span>  
  
-   <span data-ttu-id="afc39-106">**SQL Server リソースに依存関係を追加するには、次のものを使用します:** [Windows フェールオーバー クラスター マネージャー](#WinClusManager)</span><span class="sxs-lookup"><span data-stu-id="afc39-106">**To add a dependency to a SQL Server resource, using:** [Windows Failover Cluster Manager](#WinClusManager)</span></span>  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="afc39-107">はじめに</span><span class="sxs-lookup"><span data-stu-id="afc39-107">Before You Begin</span></span>  
  
###  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="afc39-108">制限事項と制約事項</span><span class="sxs-lookup"><span data-stu-id="afc39-108">Limitations and Restrictions</span></span>  
 <span data-ttu-id="afc39-109">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループに他のリソースを追加する場合、そのリソースには必ず独自の固有の SQL ネットワーク名リソースと独自の SQL IP アドレス リソースが必要であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="afc39-109">It is important to note that if you add any other resources to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group, those resources must always have their own unique SQL network name resources and their own SQL IP address resources.</span></span>  
  
 <span data-ttu-id="afc39-110">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]以外の既存の SQL ネットワーク名リソースおよび SQL IP アドレス リソースを使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="afc39-110">Do not use the existing SQL network name resources and SQL IP address resources for anything other than [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="afc39-111">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースが他のリソースと共有されると、次の問題が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-111">If [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resources are shared with other resources, the following problems may occur:</span></span>  
  
-   <span data-ttu-id="afc39-112">予期しない障害が発生する。</span><span class="sxs-lookup"><span data-stu-id="afc39-112">Outages that are not expected may occur.</span></span>  
  
-   <span data-ttu-id="afc39-113">サービス パックを正常にインストールできない。</span><span class="sxs-lookup"><span data-stu-id="afc39-113">Service pack installations may not be successful.</span></span>  
  
-   <span data-ttu-id="afc39-114">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップ プログラムが正常に実行されない。</span><span class="sxs-lookup"><span data-stu-id="afc39-114">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup program may not be successful.</span></span> <span data-ttu-id="afc39-115">この問題が発生した場合は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の追加インスタンスをインストールしたり、定期的なメンテナンスを実行したりできません。</span><span class="sxs-lookup"><span data-stu-id="afc39-115">If this problem occurs, you cannot install additional instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or perform routine maintenance.</span></span>  
  
 <span data-ttu-id="afc39-116">さらに次の問題も考慮してください。</span><span class="sxs-lookup"><span data-stu-id="afc39-116">Consider these additional issues:</span></span>  
  
-   <span data-ttu-id="afc39-117">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] レプリケーションを使用した FTP: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] レプリケーションで FTP を使用する [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスでは、FTP サービスを使用するように設定された [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインストールと同じ物理ディスクのいずれかを、ご利用の FTP サービスで使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-117">FTP with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication: For instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that use FTP with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] replication, your FTP service must use one of the same physical disks as the installation of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is set up to use the FTP service.</span></span>  
  
-   [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="afc39-118">リソースの依存関係: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループにリソースを追加し、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を使用できるようにするために [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースに依存している場合は、[!INCLUDE[msCoName](../../../includes/msconame-md.md)] エージェント リソースに依存関係を追加することを [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] はお勧めしています。</span><span class="sxs-lookup"><span data-stu-id="afc39-118">resource dependencies: If you add a resource to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group and you have a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource to make sure that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is available, [!INCLUDE[msCoName](../../../includes/msconame-md.md)] recommends that you add a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource.</span></span> <span data-ttu-id="afc39-119">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースに依存関係を追加しないでください。</span><span class="sxs-lookup"><span data-stu-id="afc39-119">Do not add a dependency on the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource.</span></span> <span data-ttu-id="afc39-120">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を実行しているコンピューターで高い可用性を維持するには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェント リソースに障害が発生した場合に [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループが影響を受けないように [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エージェント リソースを構成します。</span><span class="sxs-lookup"><span data-stu-id="afc39-120">To make sure that the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] remains highly available, configure the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource so that it does not affect the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group if the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Agent resource fails.</span></span>  
  
-   <span data-ttu-id="afc39-121">ファイル共有とプリンター リソース: ファイル共有リソースやプリンター クラスター リソースをインストールするときは、[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] を実行しているコンピューターと同じ物理ディスク リソースに配置しないでください。</span><span class="sxs-lookup"><span data-stu-id="afc39-121">File shares and printer resources: When you install File Share resources or Printer cluster resources, they should not be put on the same physical disk resources as the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="afc39-122">同じ物理ディスク リソースにインストールすると、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]を実行しているコンピューターのパフォーマンスが低下したり、サービスが失われたりする場合があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-122">If they are put on the same physical disk resources, you may experience performance degradation and loss of service to the computer that is running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="afc39-123">MS DTC の考慮事項: オペレーティング システムをインストールし FCI を構成してから、フェールオーバー クラスター マネージャー スナップインを使用して、クラスター内で機能するように [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 分散トランザクション コーディネーター (MS DTC) を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-123">MS DTC considerations: After you install the operating system and configure your FCI, you must configure [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Distributed Transaction Coordinator (MS DTC) to work in a cluster by using the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="afc39-124">MS DTC のクラスター化に失敗しても [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] セットアップは中断しませんが、MS DTC が適切に構成されていない場合は [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のアプリケーション機能に影響が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-124">Failure to cluster MS DTC will not block [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Setup, but [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] application functionality may be affected if MS DTC is not properly configured.</span></span>  
  
     <span data-ttu-id="afc39-125">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループに MS DTC をインストールし、MS DTC に依存する他のリソースがある場合は、このグループがオフラインまたはフェールオーバー中であると、MS DTC を使用できません。</span><span class="sxs-lookup"><span data-stu-id="afc39-125">If you install MS DTC in your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group and you have other resources that are dependent on MS DTC, MS DTC will not be available if this group is offline or during a failover.</span></span> [!INCLUDE[msCoName](../../../includes/msconame-md.md)] <span data-ttu-id="afc39-126">では、可能であれば、独自の物理ディスク リソースがある独自のグループに MS DTC を配置することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="afc39-126">recommends that you put MS DTC in its own group with its own physical disk resource, if it is possible.</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="afc39-127">前提条件</span><span class="sxs-lookup"><span data-stu-id="afc39-127">Prerequisites</span></span>  
 <span data-ttu-id="afc39-128">複数のディスク ドライブで構成される WSFC リソース グループに [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] をインストールし、いずれかのドライブにデータを保存するように選択すると、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースはそのドライブにのみ依存するように設定されます。</span><span class="sxs-lookup"><span data-stu-id="afc39-128">If you install [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] into a WSFC resource group with multiple disk drives and choose to place your data on one of the drives, the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource will be set to be dependent only on that drive.</span></span> <span data-ttu-id="afc39-129">別のディスクにデータやログを保存するには、まず、そのディスクに対する依存関係を [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="afc39-129">To put data or logs on another disk, you must first add a dependency to the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource for the additional disk.</span></span>  
  
##  <a name="using-the-failover-cluster-manager-snap-in"></a><a name="WinClusManager"></a> <span data-ttu-id="afc39-130">フェールオーバー クラスター マネージャー スナップインの使用</span><span class="sxs-lookup"><span data-stu-id="afc39-130">Using the Failover Cluster Manager Snap-in</span></span>  
 <span data-ttu-id="afc39-131">**SQL Server リソースに依存関係を追加するには**</span><span class="sxs-lookup"><span data-stu-id="afc39-131">**To add a dependency to a SQL Server resource**</span></span>  
  
-   <span data-ttu-id="afc39-132">フェールオーバー クラスター マネージャー スナップインを開きます。</span><span class="sxs-lookup"><span data-stu-id="afc39-132">Open the Failover Cluster Manager snap-in.</span></span>  
  
-   <span data-ttu-id="afc39-133">依存させる適切な [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースが含まれているグループを検索します。</span><span class="sxs-lookup"><span data-stu-id="afc39-133">Locate the group that contains the applicable [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource that you would like to make dependent.</span></span>  
  
-   <span data-ttu-id="afc39-134">ディスクのリソースがこのグループに既にある場合は、手順 4. に進みます。</span><span class="sxs-lookup"><span data-stu-id="afc39-134">If the resource for the disk is already in this group, go to step 4.</span></span> <span data-ttu-id="afc39-135">それ以外の場合は、ディスクが含まれるグループを見つけます。</span><span class="sxs-lookup"><span data-stu-id="afc39-135">Otherwise, locate the group that contains the disk.</span></span> <span data-ttu-id="afc39-136">そのグループと、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] が含まれているグループが同じノードに所有されていない場合は、ディスクのリソースが含まれているグループを、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] グループを所有するノードに移動します。</span><span class="sxs-lookup"><span data-stu-id="afc39-136">If that group and the group that contains [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] are not owned by the same node, move the group containing the resource for the disk to the node that owns the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] group.</span></span>  
  
-   <span data-ttu-id="afc39-137">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] リソースを選択し、 **[プロパティ]** ダイアログ ボックスを開きます。 **[依存関係]** タブを使用して、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 依存関係のセットにディスクを追加します。</span><span class="sxs-lookup"><span data-stu-id="afc39-137">Select the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] resource, open the **Properties** dialog box, and use the **Dependencies** tab to add the disk to the set of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] dependencies.</span></span>  
  
  
