---
title: SQL Server をストレージ オプションとして SMB ファイル共有にインストールする | Microsoft Docs
ms.custom: ''
ms.date: 03/09/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: install
ms.topic: conceptual
ms.assetid: 8b7810b2-637e-46a3-9fe1-d055898ba639
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 3d59c2861e2419d76d3dc8e3fc3aaab91bf1e99b
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87713438"
---
# <a name="install-sql-server-with-smb-fileshare-as-a-storage-option"></a><span data-ttu-id="51536-102">SQL Server をストレージ オプションとして SMB ファイル共有にインストールする</span><span class="sxs-lookup"><span data-stu-id="51536-102">Install SQL Server with SMB Fileshare as a Storage Option</span></span>
  <span data-ttu-id="51536-103">[!INCLUDE[ssSQL11](../../includes/sssql11-md.md)] 以降では、システム データベース (Master、Model、MSDB、および TempDB) と[!INCLUDE[ssDE](../../includes/ssde-md.md)] ユーザー データベースをストレージ オプションとしてサーバー メッセージ ブロック (SMB) ファイル サーバーにインストールできます。</span><span class="sxs-lookup"><span data-stu-id="51536-103">Starting [!INCLUDE[ssSQL11](../../includes/sssql11-md.md)], system databases (Master, Model, MSDB, and TempDB), and [!INCLUDE[ssDE](../../includes/ssde-md.md)] user databases can be installed with Server Message Block (SMB) file server as a storage option.</span></span> <span data-ttu-id="51536-104">これは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] スタンドアロン インストールと [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] フェールオーバー クラスター インストール (FCI) の両方に当てはまります。</span><span class="sxs-lookup"><span data-stu-id="51536-104">This applies to both [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] stand-alone and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster installations (FCI).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="51536-105">Filestream は現在、SMB ファイル共有ではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="51536-105">Filestream is currently not supported on an SMB file share.</span></span>  
  
## <a name="installation-considerations"></a><span data-ttu-id="51536-106">インストールに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="51536-106">Installation Considerations</span></span>  
  
### <a name="smb-file-share-formats"></a><span data-ttu-id="51536-107">SMB ファイル共有の形式:</span><span class="sxs-lookup"><span data-stu-id="51536-107">SMB File share Formats:</span></span>  
 <span data-ttu-id="51536-108">SMB ファイル共有を指定する際にスタンドアロンおよび FCI データベースでサポートされる汎用名前付け規則 (SMB) パスの形式を次に示します。</span><span class="sxs-lookup"><span data-stu-id="51536-108">While specifying the SMB file share, the following are supported Universal Naming Convention (UNC) Path formats for standalone and FCI databases:</span></span>  
  
-   <span data-ttu-id="51536-109">\\\ServerName\ShareName</span><span class="sxs-lookup"><span data-stu-id="51536-109">\\\ServerName\ShareName</span></span>\  
  
-   <span data-ttu-id="51536-110">\\\ServerName\ShareName</span><span class="sxs-lookup"><span data-stu-id="51536-110">\\\ServerName\ShareName</span></span>  
  
 <span data-ttu-id="51536-111">汎用名前付け規則の詳細については、「 [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) (」を参照してください https://go.microsoft.com/fwlink/?LinkId=245534) 。</span><span class="sxs-lookup"><span data-stu-id="51536-111">For more information about Universal Naming Convention, see [UNC](https://go.microsoft.com/fwlink/?LinkId=245534) (https://go.microsoft.com/fwlink/?LinkId=245534).</span></span>  
  
 <span data-ttu-id="51536-112">ループバック UNC パス (サーバー名が localhost、127.0.0.1、またはローカル コンピューター名である UNC パス) はサポートされません。</span><span class="sxs-lookup"><span data-stu-id="51536-112">The loopback UNC path (a UNC path whose server name is localhost, 127.0.0.1, or the local machine name) is not supported.</span></span> <span data-ttu-id="51536-113">特別なケースとして、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] と同じノードでホストされたファイル サーバー クラスターを使用している [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] もサポートされません。</span><span class="sxs-lookup"><span data-stu-id="51536-113">As a special case, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] using File Server Cluster which is hosted on the same node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running is also not supported.</span></span> <span data-ttu-id="51536-114">この状況を避けるため、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] とファイル サーバー クラスターは、別個の Windows クラスターに作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="51536-114">To prevent this situation, it is recommended that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] and File Server Cluster to be created on separated Windows Clusters.</span></span>  
  
 <span data-ttu-id="51536-115">次の UNC パス形式はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="51536-115">The below UNC path formats are not supported:</span></span>  
  
-   <span data-ttu-id="51536-116">ループバック パス ( \\\localhost\\..\ または \\\127.0.0.1\\...\ など)</span><span class="sxs-lookup"><span data-stu-id="51536-116">Loopback path, e.g., \\\localhost\\..\ or \\\127.0.0.1\\...\</span></span>  
  
-   <span data-ttu-id="51536-117">管理用共用 ( \\\servername\x$ など)</span><span class="sxs-lookup"><span data-stu-id="51536-117">Administrative shares, e.g., \\\servername\x$</span></span>  
  
-   <span data-ttu-id="51536-118">その他の形式の UNC パス ( \\\\?\x:\ など)</span><span class="sxs-lookup"><span data-stu-id="51536-118">Other UNC path formats like \\\\?\x:\</span></span>  
  
-   <span data-ttu-id="51536-119">割り当て済みのネットワーク ドライブ</span><span class="sxs-lookup"><span data-stu-id="51536-119">Mapped network drives.</span></span>  
  
### <a name="supported-data-definition-language-ddl-statements"></a><span data-ttu-id="51536-120">サポートされるデータ定義言語 (DDL) ステートメント</span><span class="sxs-lookup"><span data-stu-id="51536-120">Supported Data Definition Language (DDL) statements</span></span>  
 <span data-ttu-id="51536-121">SMB ファイル共有をサポートする [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL ステートメントおよびデータベース エンジン ストアド プロシージャを次に示します。</span><span class="sxs-lookup"><span data-stu-id="51536-121">The following [!INCLUDE[tsql](../../includes/tsql-md.md)] DDL statements and database engine stored procedures support SMB file shares:</span></span>  
  
1.  [<span data-ttu-id="51536-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-122">CREATE DATABASE &#40;SQL Server Transact-SQL&#41;</span></span>](/sql/t-sql/statements/create-database-sql-server-transact-sql)  
  
2.  [<span data-ttu-id="51536-123">ALTER DATABASE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-123">ALTER DATABASE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-database-transact-sql)  
  
3.  [<span data-ttu-id="51536-124">RESTORE &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-124">RESTORE &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/restore-statements-transact-sql)  
  
4.  [<span data-ttu-id="51536-125">BACKUP &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-125">BACKUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/backup-transact-sql)  
  
5.  [<span data-ttu-id="51536-126">sp_attach_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-126">sp_attach_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-db-transact-sql)  
  
6.  [<span data-ttu-id="51536-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="51536-127">sp_attach_single_file_db &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-attach-single-file-db-transact-sql)  
  
### <a name="installation-options"></a><span data-ttu-id="51536-128">インストール オプション</span><span class="sxs-lookup"><span data-stu-id="51536-128">Installation options</span></span>  
  
-   <span data-ttu-id="51536-129">セットアップ UI の [データベース エンジンの構成] ページの [データ ディレクトリ] タブで、[データ ルート ディレクトリ] パラメーターを "\\\fileserver1\share1\"" に設定します。</span><span class="sxs-lookup"><span data-stu-id="51536-129">In setup UI "Database Engine Configuration" page, "Data Directories" tab, set the parameter "Data root directory as "\\\fileserver1\share1\".</span></span>  
  
-   <span data-ttu-id="51536-130">コマンド プロンプトでインストールする場合、"/INSTALLSQLDATADIR" に "\\\fileserver1\share1\"" を指定します。</span><span class="sxs-lookup"><span data-stu-id="51536-130">In command prompt installation, specify the "/INSTALLSQLDATADIR" as "\\\fileserver1\share1\".</span></span>  
  
     <span data-ttu-id="51536-131">次に、SMB ファイル共有オプションを使ってスタンドアロン サーバーに [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] をインストールするためのサンプル構文を示します。</span><span class="sxs-lookup"><span data-stu-id="51536-131">Here is the sample syntax to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] on a Standalone server using SMB file share option:</span></span>  
  
    ```  
    Setup.exe /q /ACTION=Install /FEATURES=SQL /INSTANCENAME=MSSQLSERVER /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="<StrongPassword>" /SQLSYSADMINACCOUNTS="<DomainName\UserName>" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="<StrongPassword>" /INSTALLSQLDATADIR="\\FileServer\Share1\" /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="51536-132">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] および [!INCLUDE[ssDE](../../includes/ssde-md.md)] が配置された単一ノードの [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)]フェールオーバー クラスター インスタンスを既定のインスタンスとしてインストールするには、次のコマンドを使用します。</span><span class="sxs-lookup"><span data-stu-id="51536-132">To install a single-node [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover cluster instance with the [!INCLUDE[ssDE](../../includes/ssde-md.md)] and [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], default instance:</span></span>  
  
    ```  
    setup.exe /q /ACTION=InstallFailoverCluster /InstanceName=MSSQLSERVER /INDICATEPROGRESS /ASSYSADMINACCOUNTS="<DomainName\UserName>" /ASDATADIR=<Drive>:\OLAP\Data /ASLOGDIR=<Drive>:\OLAP\Log /ASBACKUPDIR=<Drive>:\OLAP\Backup /ASCONFIGDIR=<Drive>:\OLAP\Config /ASTEMPDIR=<Drive>:\OLAP\Temp /FAILOVERCLUSTERDISKS="<Cluster Disk Resource Name - for example, 'Disk S:'" /FAILOVERCLUSTERNETWORKNAME="<Insert Network Name>" /FAILOVERCLUSTERIPADDRESSES="IPv4;xx.xxx.xx.xx;Cluster Network;xxx.xxx.xxx.x" /FAILOVERCLUSTERGROUP="MSSQLSERVER" /Features=AS,SQL /ASSVCACCOUNT="<DomainName\UserName>" /ASSVCPASSWORD="xxxxxxxxxxx" /AGTSVCACCOUNT="<DomainName\UserName>" /AGTSVCPASSWORD="xxxxxxxxxxx" /INSTALLSQLDATADIR="\\FileServer\Share1\" /SQLCOLLATION="SQL_Latin1_General_CP1_CS_AS" /SQLSVCACCOUNT="<DomainName\UserName>" /SQLSVCPASSWORD="xxxxxxxxxxx" /SQLSYSADMINACCOUNTS="<DomainName\UserName> /IACCEPTSQLSERVERLICENSETERMS  
    ```  
  
     <span data-ttu-id="51536-133">のさまざまなコマンドラインパラメーターオプションの使用方法の詳細については [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] 、「 [Install SQL Server 2014 From The command Prompt](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-133">For more information about the usage of various command line parameter options in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], see [Install SQL Server 2014 from the Command Prompt](../../database-engine/install-windows/install-sql-server-from-the-command-prompt.md).</span></span>  
  
## <a name="operating-system-considerations-smb-protocol-vs-ssnoversion"></a><span data-ttu-id="51536-134">オペレーティング システムに関する注意事項 (SMB プロトコルと [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span><span class="sxs-lookup"><span data-stu-id="51536-134">Operating System Considerations (SMB Protocol vs. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)])</span></span>  
 <span data-ttu-id="51536-135">Windows オペレーティング システムのバージョンによって SMB プロトコルのバージョンも異なりますが、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]は、どのバージョンの SMB プロトコルにも対応します。</span><span class="sxs-lookup"><span data-stu-id="51536-135">Different Windows operating systems has different SMB protocol versions, and the SMB protocol version is transparent to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="51536-136">SMB プロトコルの各バージョンによって、 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]に対するメリットも異なります。</span><span class="sxs-lookup"><span data-stu-id="51536-136">You can find the benefits of different SMB protocol versions with respect to [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)].</span></span>  
  
|<span data-ttu-id="51536-137">オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="51536-137">Operating System</span></span>|<span data-ttu-id="51536-138">SMB2 プロトコルのバージョン</span><span class="sxs-lookup"><span data-stu-id="51536-138">SMB2 protocol version</span></span>|<span data-ttu-id="51536-139">に対するメリット [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span><span class="sxs-lookup"><span data-stu-id="51536-139">Benefits to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]</span></span>|  
|----------------------|---------------------------|-------------------------------------------|  
|[!INCLUDE[firstref_longhorn](../../includes/firstref-longhorn-md.md)] <span data-ttu-id="51536-140">SP 2</span><span class="sxs-lookup"><span data-stu-id="51536-140">SP 2</span></span>|<span data-ttu-id="51536-141">2.0</span><span class="sxs-lookup"><span data-stu-id="51536-141">2.0</span></span>|<span data-ttu-id="51536-142">従来のバージョンの SMB よりもパフォーマンスに優れています。</span><span class="sxs-lookup"><span data-stu-id="51536-142">Improved performance over previous SMB versions.</span></span><br /><br /> <span data-ttu-id="51536-143">持続性が高いため、一時的なネットワーク障害もスムーズに復旧できます。</span><span class="sxs-lookup"><span data-stu-id="51536-143">Durability, which helps recover from temporary network glitches.</span></span>|  
|[!INCLUDE[winserver2008r2](../../includes/winserver2008r2-md.md)] <span data-ttu-id="51536-144">SP 1 (Server Core を含む)</span><span class="sxs-lookup"><span data-stu-id="51536-144">SP 1, including Server Core</span></span>|<span data-ttu-id="51536-145">2.1</span><span class="sxs-lookup"><span data-stu-id="51536-145">2.1</span></span>|<span data-ttu-id="51536-146">大きい MTU をサポートするため、SQL のバックアップや復元など、大規模なデータ転送が高速化されます。</span><span class="sxs-lookup"><span data-stu-id="51536-146">Support for large MTU, which benefits large data transfers, such as SQL backup and restore.</span></span> <span data-ttu-id="51536-147">この機能を使用するには、ユーザーが機能を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="51536-147">This capability must be enabled by user.</span></span> <span data-ttu-id="51536-148">この機能を有効にする方法の詳細については、「[What's New in SMB](https://go.microsoft.com/fwlink/?LinkID=237319)」(SMB の新機能) (https://go.microsoft.com/fwlink/?LinkID=237319) ) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-148">For more details on how to enable this capability, see [What's New in SMB](https://go.microsoft.com/fwlink/?LinkID=237319) (https://go.microsoft.com/fwlink/?LinkID=237319).</span></span><br /><br /> <span data-ttu-id="51536-149">大幅なパフォーマンス向上。特に、SQL OLTP スタイルのワークロードに対して効果的です。</span><span class="sxs-lookup"><span data-stu-id="51536-149">Significant performance improvements, specifically for SQL OLTP style workloads.</span></span> <span data-ttu-id="51536-150">パフォーマンスを向上するには、修正プログラムを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="51536-150">These performance improvements require applying a hotfix.</span></span> <span data-ttu-id="51536-151">この修正プログラムの詳細については、[こちら](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-151">For more information on the hotfix, see [this](https://go.microsoft.com/fwlink/?LinkId=237320) (https://go.microsoft.com/fwlink/?LinkId=237320).</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)]<span data-ttu-id="51536-152">(Server Core を含む)</span><span class="sxs-lookup"><span data-stu-id="51536-152">, including Server Core</span></span>|<span data-ttu-id="51536-153">3.0</span><span class="sxs-lookup"><span data-stu-id="51536-153">3.0</span></span>|<span data-ttu-id="51536-154">ファイル サーバー クラスター構成の SQL DBA またはファイル サーバー管理者に必要な、ファイル共有の透過的フェールオーバー (管理者の操作が不要でダウンタイムが発生しないフェールオーバー) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="51536-154">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="51536-155">複数のネットワーク インターフェイスを同時使用する IO をサポートします。また、ネットワーク インターフェイスの障害に対する耐性も優れています。</span><span class="sxs-lookup"><span data-stu-id="51536-155">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure.</span></span><br /><br /> <span data-ttu-id="51536-156">RDMA 機能を備えたネットワーク インターフェイスをサポートします。</span><span class="sxs-lookup"><span data-stu-id="51536-156">Support for network interfaces with RDMA capabilities.</span></span><br /><br /> <span data-ttu-id="51536-157">これらの機能およびサーバー メッセージ ブロックの詳細については、「[Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174)」(サーバー メッセージ ブロックの概要) (https://go.microsoft.com/fwlink/?LinkId=253174) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-157">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="51536-158">継続的可用性機能を備えたスケールアウト ファイル サーバー (SoFS) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="51536-158">Support for Scale Out File Server (SoFS) with continuous availability.</span></span>|  
|[!INCLUDE[win8srv](../../includes/win8srv-md.md)] <span data-ttu-id="51536-159">R2 (Server Core を含む)</span><span class="sxs-lookup"><span data-stu-id="51536-159">R2, including Server Core</span></span>|<span data-ttu-id="51536-160">3.2</span><span class="sxs-lookup"><span data-stu-id="51536-160">3.2</span></span>|<span data-ttu-id="51536-161">ファイル サーバー クラスター構成の SQL DBA またはファイル サーバー管理者に必要な、ファイル共有の透過的フェールオーバー (管理者の操作が不要でダウンタイムが発生しないフェールオーバー) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="51536-161">Support for transparent failover of file shares providing zero downtime with no administrator intervention required for SQL DBA or file server administrator in file server cluster configurations.</span></span><br /><br /> <span data-ttu-id="51536-162">複数のネットワーク インターフェイスを同時使用する IO をサポートします。また、ネットワーク インターフェイスの障害に対する耐性も優れています (SMB マルチチャネルを使用した場合)。</span><span class="sxs-lookup"><span data-stu-id="51536-162">Support for IO using multiple network interfaces simultaneously, as well as tolerance to network interface failure, using SMB Multichannel.</span></span><br /><br /> <span data-ttu-id="51536-163">RDMA 機能を備えたネットワーク インターフェイスをサポートします (SMB ダイレクトを使用した場合)。</span><span class="sxs-lookup"><span data-stu-id="51536-163">Support for network interfaces with RDMA capabilities using SMB Direct.</span></span><br /><br /> <span data-ttu-id="51536-164">これらの機能およびサーバー メッセージ ブロックの詳細については、「[Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174)」(サーバー メッセージ ブロックの概要) (https://go.microsoft.com/fwlink/?LinkId=253174) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-164">For more information on these features and Server Message Block, see [Server Message Block overview](https://go.microsoft.com/fwlink/?LinkId=253174) (https://go.microsoft.com/fwlink/?LinkId=253174).</span></span><br /><br /> <span data-ttu-id="51536-165">継続的可用性機能を備えたスケールアウト ファイル サーバー (SoFS) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="51536-165">Support for Scale Out File Server (SoFS) with continuous availability.</span></span><br /><br /> <span data-ttu-id="51536-166">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP に共通する小規模なランダム読み取り/書き込み I/O 向けに最適化されます。</span><span class="sxs-lookup"><span data-stu-id="51536-166">Optimized for small random read/write I/O common to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP.</span></span><br /><br /> <span data-ttu-id="51536-167">最大転送単位 (MTU) が既定で有効になっています。これにより、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データ ウェアハウス、データベースのバックアップと復元など、大規模なシーケンシャル転送のパフォーマンスが大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="51536-167">Maximum Transmission Unit (MTU) is turned on by default, which significantly enhances performance in large sequential transfers like [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] data warehouse and database backup or restore.</span></span>|  
  
## <a name="security-considerations"></a><span data-ttu-id="51536-168">セキュリティの考慮事項</span><span class="sxs-lookup"><span data-stu-id="51536-168">Security Considerations</span></span>  
  
-   <span data-ttu-id="51536-169">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] サービス アカウントと [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウントには、SMB 共有フォルダーに対するフル コントロールの共有権限と NTFS 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="51536-169">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account and [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] agent service account should have FULL CONTROL share permissions and NTFS permissions on the SMB share folders.</span></span> <span data-ttu-id="51536-170">SMB ファイル サーバーを使用する場合、ドメイン アカウントまたはシステム アカウントを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] サービス アカウントにすることができます。</span><span class="sxs-lookup"><span data-stu-id="51536-170">The [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account can be a domain account or a system account if an SMB file server is used.</span></span> <span data-ttu-id="51536-171">共有および NTFS アクセス許可の詳細については、「[ファイル サーバーの共有アクセス許可と NTFS アクセス許可](https://go.microsoft.com/fwlink/?LinkId=245535)」 (https://go.microsoft.com/fwlink/?LinkId=245535) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-171">For more information about share and NTFS permissions, see [Share and NTFS Permissions on a File Server](https://go.microsoft.com/fwlink/?LinkId=245535) (https://go.microsoft.com/fwlink/?LinkId=245535).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="51536-172">SMB 共有フォルダーに対するフル コントロールの共有権限と NTFS 権限は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] サービス アカウント、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービス アカウント、および管理サーバー ロールを持つ Windows ユーザーに制限する必要があります。</span><span class="sxs-lookup"><span data-stu-id="51536-172">The FULL CONTROL share permissions and NTFS permissions on the SMB share folders should be restricted to: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Agent service account and windows users with admin server roles.</span></span>  
  
     <span data-ttu-id="51536-173">ドメイン アカウントを [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] サービス アカウントとして使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="51536-173">It is recommended to use domain account as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] service account.</span></span> <span data-ttu-id="51536-174">システムアカウントをサービスアカウントとして使用する場合は、コンピューターアカウントのアクセス許可を _<domain_name>_ **\\** _<computer_name>_ の形式で付与します **$** 。</span><span class="sxs-lookup"><span data-stu-id="51536-174">If system account is used as a service account, grant the permissions for the machine account in the format: _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
    > [!NOTE]  
    >  -   <span data-ttu-id="51536-175">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] セットアップで、ストレージ オプションとして SMB ファイル共有を指定した場合は、ドメイン アカウントをサービス アカウントとして指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="51536-175">During [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup, it is required to specify domain account as a service account if SMB file share is specified as a storage option.</span></span> <span data-ttu-id="51536-176">SMB ファイル共有を使用する場合、システム アカウントは [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインストール後にのみサービス アカウントとして指定することができます。</span><span class="sxs-lookup"><span data-stu-id="51536-176">With SMB file share, System account can only be specified as a service account post [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] installation.</span></span>  
    > -   <span data-ttu-id="51536-177">仮想アカウントでは、リモートの場所へアクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="51536-177">Virtual accounts cannot be authenticated to a remote location.</span></span> <span data-ttu-id="51536-178">どの仮想アカウントも、コンピューター アカウントの権限を使用します。</span><span class="sxs-lookup"><span data-stu-id="51536-178">All virtual accounts use the permission of machine account.</span></span> <span data-ttu-id="51536-179">_<domain_name>_ **\\** _<computer_name>_ **$** の形式でコンピューター アカウントを準備してください。</span><span class="sxs-lookup"><span data-stu-id="51536-179">Provision the machine account in the format _<domain_name>_**\\**_<computer_name>_**$**.</span></span>  
  
-   <span data-ttu-id="51536-180">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインストールに使用するアカウントには、クラスター セットアップの際にデータ ディレクトリとして使用される、SMB ファイル共有フォルダーおよび他のすべてのデータ フォルダー (ユーザー データベース ディレクトリ、ユーザー データベース ログ ディレクトリ、TempDB ディレクトリ、TempDB ログ ディレクトリ、バックアップ ディレクトリ) に対して、フル コントロール権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="51536-180">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should have FULL CONTROL permissions on the SMB file share folder used as the data directory, or any other data folders (User database directory, user database log directory, TempDB directory, TempDB log directory, backup directory) during Cluster Setup.</span></span>  
  
-   <span data-ttu-id="51536-181">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインストールに使用するアカウントには、SMB ファイル サーバーに対する SeSecurityPrivilege 特権を付与する必要があります。</span><span class="sxs-lookup"><span data-stu-id="51536-181">The account used to install [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] should be granted SeSecurityPrivilege privileges on the SMB file server.</span></span> <span data-ttu-id="51536-182">この特権を付与するには、ファイル サーバーで [ローカル セキュリティ ポリシー] コンソールを使用して、監査とセキュリティ ログの管理ポリシーに [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] セットアップ アカウントを追加します。</span><span class="sxs-lookup"><span data-stu-id="51536-182">To grant this privilege, use the Local Security Policy console on the file server to add the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] setup account to the Manage auditing and security log policy.</span></span> <span data-ttu-id="51536-183">この設定は、[ローカル セキュリティ ポリシー] コンソールの [ローカル ポリシー] にある [ユーザー権利の割り当て] セクションで行うことができます。</span><span class="sxs-lookup"><span data-stu-id="51536-183">This setting is available in the User Rights Assignments section under Local Policies in the Local Security Policy console.</span></span>  
  
## <a name="known-issues"></a><span data-ttu-id="51536-184">既知の問題</span><span class="sxs-lookup"><span data-stu-id="51536-184">Known Issues</span></span>  
  
-   <span data-ttu-id="51536-185">ネットワークにアタッチされたストレージ上に存在する [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] データベースをデタッチした後で、その [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースを再アタッチしようとすると、データベース権限の問題が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="51536-185">After you detach a [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] database that resides on network-attached storage, you might run into database permission issue while trying to reattach the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database.</span></span> <span data-ttu-id="51536-186">この問題は、[こちらのサポート技術情報の記事](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321) で定義されています。</span><span class="sxs-lookup"><span data-stu-id="51536-186">The issue is defined in [this KB article](https://go.microsoft.com/fwlink/?LinkId=237321) (https://go.microsoft.com/fwlink/?LinkId=237321).</span></span> <span data-ttu-id="51536-187">この問題を回避するには、このサポート技術情報の「 **詳細** 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-187">To work around this issue, see the **More Information** section in the KB article.</span></span>  
  
-   <span data-ttu-id="51536-188">NetApp デバイスなど、いくつかのサード パーティは、すべての SQL Server API 呼び出しをサポートしているわけではありません。</span><span class="sxs-lookup"><span data-stu-id="51536-188">Some third parties, like NetApp device do not support all SQL Server API calls.</span></span> <span data-ttu-id="51536-189">次のようなことが考えられるでしょう。</span><span class="sxs-lookup"><span data-stu-id="51536-189">With these you might get:</span></span>   
    <span data-ttu-id="51536-190">2015-06-04 13:14: 19.97 spid9s Error: 17053、重大度:16、状態: 1。</span><span class="sxs-lookup"><span data-stu-id="51536-190">2015-06-04 13:14:19.97 spid9s      Error: 17053, Severity: 16, State: 1.</span></span>  
    <span data-ttu-id="51536-191">2015-06-04 13:14: 19.97 spid9s DoDevIoCtlOut () GetOverlappedResult (): オペレーティングシステムエラー 1 (正しくない関数) が発生しました。</span><span class="sxs-lookup"><span data-stu-id="51536-191">2015-06-04 13:14:19.97 spid9s      DoDevIoCtlOut() GetOverlappedResult() : Operating system error 1(Incorrect function.) encountered.</span></span>  
  
     <span data-ttu-id="51536-192">Ntfs では、エラーは問題ありません。</span><span class="sxs-lookup"><span data-stu-id="51536-192">For NTFS, the error is harmless.</span></span>  <span data-ttu-id="51536-193">しかし ReFS の場合、パフォーマンスが大幅に低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="51536-193">but for ReFS, it can lead to significant performance degradation.</span></span>  
  
-   <span data-ttu-id="51536-194">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のクラスター化されたインスタンスのストレージ オプションとして SMB ファイル共有が使用されている場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource DLL にはこのファイル共有に対する読み取り/書き込み権限がないため、既定では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] フェールオーバー クラスター診断ログをファイル共有に書き込むことができません。</span><span class="sxs-lookup"><span data-stu-id="51536-194">If SMB file share is used as a storage option for a clustered instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], by default the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Failover Cluster Diagnostics Log cannot be written to the file share because [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Resource DLL lacks the read/write permission on the file share.</span></span> <span data-ttu-id="51536-195">この問題を解決するには、次のいずれかの方法を試してください。</span><span class="sxs-lookup"><span data-stu-id="51536-195">To resolve this issue, try one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="51536-196">ファイル共有に対する読み取り/書き込み権限をクラスター内のすべてのコンピューター オブジェクトに付与する。</span><span class="sxs-lookup"><span data-stu-id="51536-196">Grant read/write permissions on the file share to all computer objects in the cluster.</span></span>  
  
    2.  <span data-ttu-id="51536-197">診断ログの場所をローカル ファイル パスに設定する。</span><span class="sxs-lookup"><span data-stu-id="51536-197">Set the location of the diagnostic logs to a local file path.</span></span> <span data-ttu-id="51536-198">次の例を参照してください。</span><span class="sxs-lookup"><span data-stu-id="51536-198">See the following example:</span></span>  
  
        ```sql  
        ALTER SERVER CONFIGURATION  
        SET DIAGNOSTICS LOG PATH = 'C:\logs';  
        ```  
  
## <a name="see-also"></a><span data-ttu-id="51536-199">参照</span><span class="sxs-lookup"><span data-stu-id="51536-199">See Also</span></span>  
 <span data-ttu-id="51536-200">[SQL Server のインストール計画](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span><span class="sxs-lookup"><span data-stu-id="51536-200">[Planning a SQL Server Installation](../../../2014/sql-server/install/planning-a-sql-server-installation.md) </span></span>  
 <span data-ttu-id="51536-201">[インストール方法に関するトピック](../../../2014/sql-server/install/installation-how-to-topics.md) </span><span class="sxs-lookup"><span data-stu-id="51536-201">[Installation How-to Topics](../../../2014/sql-server/install/installation-how-to-topics.md) </span></span>  
 [<span data-ttu-id="51536-202">Windows サービス アカウントと権限の構成</span><span class="sxs-lookup"><span data-stu-id="51536-202">Configure Windows Service Accounts and Permissions</span></span>](../configure-windows/configure-windows-service-accounts-and-permissions.md)  
  
  
