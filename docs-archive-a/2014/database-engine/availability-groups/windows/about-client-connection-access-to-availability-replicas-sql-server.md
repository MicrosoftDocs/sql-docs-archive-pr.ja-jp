---
title: 可用性レプリカに対するクライアント接続アクセスについて (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- Availability Groups [SQL Server], configuring
- Availability Groups [SQL Server], client connectivity
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 29027e46-43e4-4b45-b650-c4cdeacdf552
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 79e61f29957d90a429d8a0c66782ca7cf2e7bd4c
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87716853"
---
# <a name="about-client-connection-access-to-availability-replicas-sql-server"></a><span data-ttu-id="f84d1-102">可用性レプリカに対するクライアント接続アクセスについて (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="f84d1-102">About Client Connection Access to Availability Replicas (SQL Server)</span></span>
  <span data-ttu-id="f84d1-103">AlwaysOn 可用性グループでは、1 つまたは複数の可用性レプリカを構成して、セカンダリ ロールで実行しているとき (つまり、セカンダリ レプリカとして実行しているとき) に読み取り専用接続を許可することができます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-103">In an AlwaysOn availability group, you can configure one or more availability replicas to allow read-only connections when running under the secondary role (that is, when running as a secondary replica).</span></span> <span data-ttu-id="f84d1-104">各可用性レプリカをプライマリ ロールで実行しているとき (つまり、プライマリ レプリカとして実行しているとき) に、読み取り専用接続を許可または除外するように構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-104">You can also configure each availability replica to allow or exclude read-only connections when running under the primary role (that is, when running as the primary replica).</span></span>  
  
 <span data-ttu-id="f84d1-105">特定の可用性グループのプライマリ データベースまたはセカンダリ データベースに対するクライアント アクセスを容易にするために、可用性グループ リスナーを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-105">To facilitate client access to primary or secondary databases of a given availability group, you should define an availability group listener.</span></span> <span data-ttu-id="f84d1-106">既定では、可用性グループ リスナーは、着信接続をプライマリ レプリカにダイレクトします。</span><span class="sxs-lookup"><span data-stu-id="f84d1-106">By default, the availability group listener directs incoming connections to the primary replica.</span></span> <span data-ttu-id="f84d1-107">ただし、可用性グループは、読み取り専用ルーティングをサポートするように構成できます。これにより、可用性グループ リスナーが、読み取りを目的としたアプリケーションの接続要求を読み取り可能なセカンダリ レプリカにリダイレクトできます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-107">However, you can configure an availability group to support read-only routing, which enables its availability group listener to redirect the connection requests of read-intent applications to a readable secondary replica.</span></span> <span data-ttu-id="f84d1-108">詳細については、このトピックの後の「 [可用性グループの読み取り専用ルーティングの構成 &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md)など) を含め、セカンダリ レプリカをホストするサーバー インスタンス上の読み書き可能なデータベースには書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-108">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
 <span data-ttu-id="f84d1-109">フェールオーバー中に、セカンダリ レプリカはプライマリ ロールに移行し、元のプライマリ レプリカはセカンダリ レプリカに移行します。</span><span class="sxs-lookup"><span data-stu-id="f84d1-109">During a failover, a secondary replica transitions to the primary role and the former primary replica transitions to the secondary role.</span></span> <span data-ttu-id="f84d1-110">フェールオーバー プロセス中に、プライマリ レプリカとセカンダリ レプリカの両方に対するクライアント接続がすべて終了されます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-110">During the failover process, all client connections to both the primary replica and secondary replicas are terminated.</span></span> <span data-ttu-id="f84d1-111">フェールオーバー後にクライアントが可用性グループ リスナーに再接続すると、リスナーは、クライアントを新しいプライマリ レプリカに再接続します。ただし、読み取りを目的とした接続要求は除きます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-111">After the failover, when a client reconnects to the availability group listener, the listener reconnects the client to the new primary replica, except for a read-intent connect request.</span></span> <span data-ttu-id="f84d1-112">クライアントとサーバーのインスタンスと、少なくとも 1 つの読み取り可能なセカンダリ レプリカで、新しいプライマリ レプリカをホストする読み取り専用ルーティングが構成された場合、読み取りを目的とした接続要求は、クライアントが必要とするタイプの接続アクセスをサポートするセカンダリ レプリカに再ルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-112">If read-only routing is configured on the client and on the server instances that hosts the new primary replica and on at least one readable secondary replica, read-intent connection requests are re-routed to a secondary replica that supports the type of connection access that the client requires.</span></span> <span data-ttu-id="f84d1-113">フェールオーバー後にクライアントが快適にサービスを利用できるように、すべての可用性レプリカのセカンダリ ロールとプライマリ ロールに対して接続アクセスを構成することが重要です。</span><span class="sxs-lookup"><span data-stu-id="f84d1-113">To ensure a graceful client experience after a failover, it is important to configure connection access for both the secondary and primary roles of every availability replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="f84d1-114">クライアント接続要求を処理する可用性グループ リスナーの詳細については、「 [可用性グループ リスナー、クライアント接続、およびアプリケーションのフェールオーバー &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)」をご参照ください。</span><span class="sxs-lookup"><span data-stu-id="f84d1-114">For information about the availability group listener, which handles client connection requests, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
 <span data-ttu-id="f84d1-115">**このトピックの内容**</span><span class="sxs-lookup"><span data-stu-id="f84d1-115">**In This Topic:**</span></span>  
  
-   [<span data-ttu-id="f84d1-116">セカンダリロールでサポートされる接続アクセスの種類</span><span class="sxs-lookup"><span data-stu-id="f84d1-116">Types of Connection Access Supported by the Secondary Role</span></span>](#ConnectAccessForSecondary)  
  
-   [<span data-ttu-id="f84d1-117">プライマリロールでサポートされる接続アクセスの種類</span><span class="sxs-lookup"><span data-stu-id="f84d1-117">Types of Connection Access Supported by the Primary Role</span></span>](#ConnectAccessForPrimary)  
  
-   [<span data-ttu-id="f84d1-118">接続アクセス構成がクライアント接続に与える影響</span><span class="sxs-lookup"><span data-stu-id="f84d1-118">How the Connection Access Configuration Affects Client Connectivity</span></span>](#HowConnectionAccessAffectsConnectivity)  
  
-   [<span data-ttu-id="f84d1-119">関連タスク</span><span class="sxs-lookup"><span data-stu-id="f84d1-119">Related Tasks</span></span>](#RelatedTasks)  
  
-   [<span data-ttu-id="f84d1-120">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="f84d1-120">Related Content</span></span>](#RelatedContent)  
  
##  <a name="types-of-connection-access-supported-by-the-secondary-role"></a><a name="ConnectAccessForSecondary"></a> <span data-ttu-id="f84d1-121">セカンダリ ロールでサポートされる接続アクセスの種類</span><span class="sxs-lookup"><span data-stu-id="f84d1-121">Types of Connection Access Supported by the Secondary Role</span></span>  
 <span data-ttu-id="f84d1-122">セカンダリ ロールは、次に示すように 3 種類のクライアント接続をサポートします。</span><span class="sxs-lookup"><span data-stu-id="f84d1-122">The secondary role supports three alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="f84d1-123">接続不可</span><span class="sxs-lookup"><span data-stu-id="f84d1-123">No connections</span></span>  
 <span data-ttu-id="f84d1-124">ユーザーの接続は許可されません。</span><span class="sxs-lookup"><span data-stu-id="f84d1-124">No user connections are allowed.</span></span> <span data-ttu-id="f84d1-125">セカンダリ データベースは読み取りアクセスでは利用できません。</span><span class="sxs-lookup"><span data-stu-id="f84d1-125">Secondary databases are not available for read access.</span></span> <span data-ttu-id="f84d1-126">これは、セカンダリ ロールの既定の動作です。</span><span class="sxs-lookup"><span data-stu-id="f84d1-126">This is the default behavior in the secondary role.</span></span>  
  
 <span data-ttu-id="f84d1-127">読み取りを目的とした接続のみ</span><span class="sxs-lookup"><span data-stu-id="f84d1-127">Only read-intent connections</span></span>  
 <span data-ttu-id="f84d1-128">セカンダリデータベースは、接続プロパティがに設定されている接続に対してのみ使用でき `Application Intent` `ReadOnly` ます (*読み取りを目的*とした接続)。</span><span class="sxs-lookup"><span data-stu-id="f84d1-128">The secondary database(s) are available only for connection for which the `Application Intent` connection property is set to `ReadOnly` (*read-intent connections*).</span></span>  
  
 <span data-ttu-id="f84d1-129">この接続プロパティの詳細については、「 [SQL Server Native Client の HADR サポート](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f84d1-129">For information about this connection property, see [SQL Server Native Client Support for High Availability, Disaster Recovery](../../../relational-databases/native-client/features/sql-server-native-client-support-for-high-availability-disaster-recovery.md).</span></span>  
  
 <span data-ttu-id="f84d1-130">読み取り専用接続を許可</span><span class="sxs-lookup"><span data-stu-id="f84d1-130">Allow any read-only connection</span></span>  
 <span data-ttu-id="f84d1-131">セカンダリ データベースは、すべて読み取りアクセス接続に利用できます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-131">The secondary database(s) are all available for read access connections.</span></span> <span data-ttu-id="f84d1-132">このオプションでは、下位バージョンのクライアントを接続できます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-132">This option allows lower versioned clients to connect.</span></span>  
  
 <span data-ttu-id="f84d1-133">詳細については、「 [可用性レプリカでの読み取り専用アクセスの構成 &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md)が存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-133">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="types-of-connection-access-supported-by-the-primary-role"></a><a name="ConnectAccessForPrimary"></a> <span data-ttu-id="f84d1-134">プライマリ ロールでサポートされる接続アクセスの種類</span><span class="sxs-lookup"><span data-stu-id="f84d1-134">Types of Connection Access Supported by the Primary Role</span></span>  
 <span data-ttu-id="f84d1-135">プライマリ ロールは、次に示すように 2 種類のクライアント接続をサポートします。</span><span class="sxs-lookup"><span data-stu-id="f84d1-135">The primary role supports two alternatives for client connections, as follows:</span></span>  
  
 <span data-ttu-id="f84d1-136">すべての接続を許可する</span><span class="sxs-lookup"><span data-stu-id="f84d1-136">All connections are allowed</span></span>  
 <span data-ttu-id="f84d1-137">プライマリ データベースに対する読み取り/書き込み接続と読み取り専用接続の両方が許可されます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-137">Both read-write and read-only connections are allowed to primary databases.</span></span> <span data-ttu-id="f84d1-138">これは、プライマリ ロールの既定の動作です。</span><span class="sxs-lookup"><span data-stu-id="f84d1-138">This is the default behavior for the primary role.</span></span>  
  
 <span data-ttu-id="f84d1-139">読み取り/書き込接続のみを許可する</span><span class="sxs-lookup"><span data-stu-id="f84d1-139">Allow only read-write connections</span></span>  
 <span data-ttu-id="f84d1-140">`Application Intent`接続プロパティが**ReadWrite**に設定されているか、またはが設定されていない場合、接続は許可されます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-140">When the `Application Intent` connection property is set to **ReadWrite** or is not set, the connection is allowed.</span></span> <span data-ttu-id="f84d1-141">`Application Intent`接続文字列キーワードがに設定されている接続は許可されて `ReadOnly` いません。</span><span class="sxs-lookup"><span data-stu-id="f84d1-141">Connections for which the `Application Intent` connection string keyword is set to `ReadOnly` are not allowed.</span></span> <span data-ttu-id="f84d1-142">読み取り/書き込み接続のみを許可することにより、読み取りを目的としたワークロードが誤ってプライマリ レプリカに接続されるのを防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-142">Allowing only read-write connections can help prevent your customers from connecting a read-intent work load to the primary replica by mistake.</span></span>  
  
 <span data-ttu-id="f84d1-143">この接続プロパティの詳細については、「 [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f84d1-143">For information about this connection property, see [Using Connection String Keywords with SQL Server Native Client](../../../relational-databases/native-client/applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="f84d1-144">詳細については、「 [可用性レプリカでの読み取り専用アクセスの構成 &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md)が存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-144">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
##  <a name="how-the-connection-access-configuration-affects-client-connectivity"></a><a name="HowConnectionAccessAffectsConnectivity"></a> <span data-ttu-id="f84d1-145">接続アクセス構成がクライアント接続に与える影響</span><span class="sxs-lookup"><span data-stu-id="f84d1-145">How the Connection Access Configuration Affects Client Connectivity</span></span>  
 <span data-ttu-id="f84d1-146">レプリカの接続アクセス設定によって、接続試行が失敗するか成功するかが決まります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-146">The connection access settings of a replica determine whether a connection attempt fails or succeeds.</span></span> <span data-ttu-id="f84d1-147">次の表に、特定の接続試行が成功するか失敗するかを接続アクセス設定別に示します。</span><span class="sxs-lookup"><span data-stu-id="f84d1-147">The following table summarizes whether a given connection attempt succeeds or fails for each the connection-access setting.</span></span>  
  
|<span data-ttu-id="f84d1-148">レプリカのロール</span><span class="sxs-lookup"><span data-stu-id="f84d1-148">Replica Role</span></span>|<span data-ttu-id="f84d1-149">レプリカでサポートされる接続アクセス</span><span class="sxs-lookup"><span data-stu-id="f84d1-149">Connection Access Supported on Replica</span></span>|<span data-ttu-id="f84d1-150">接続の目的</span><span class="sxs-lookup"><span data-stu-id="f84d1-150">Connection Intent</span></span>|<span data-ttu-id="f84d1-151">接続の試行の結果</span><span class="sxs-lookup"><span data-stu-id="f84d1-151">Connection-Attempt Result</span></span>|  
|------------------|--------------------------------------------|-----------------------|--------------------------------|  
|<span data-ttu-id="f84d1-152">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-152">Secondary</span></span>|<span data-ttu-id="f84d1-153">All</span><span class="sxs-lookup"><span data-stu-id="f84d1-153">All</span></span>|<span data-ttu-id="f84d1-154">読み取り目的、読み取り/書き込み、または接続目的の指定なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-154">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="f84d1-155">Success</span><span class="sxs-lookup"><span data-stu-id="f84d1-155">Success</span></span>|  
|<span data-ttu-id="f84d1-156">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-156">Secondary</span></span>|<span data-ttu-id="f84d1-157">なし (これは、セカンダリの既定の動作です)。</span><span class="sxs-lookup"><span data-stu-id="f84d1-157">None (This is the default secondary behavior.)</span></span>|<span data-ttu-id="f84d1-158">読み取り目的、読み取り/書き込み、または接続目的の指定なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-158">Read-intent, read-write, or no connection intent specified</span></span>|<span data-ttu-id="f84d1-159">障害</span><span class="sxs-lookup"><span data-stu-id="f84d1-159">Failure</span></span>|  
|<span data-ttu-id="f84d1-160">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-160">Secondary</span></span>|<span data-ttu-id="f84d1-161">[読み取り目的のみ]</span><span class="sxs-lookup"><span data-stu-id="f84d1-161">Read-intent only</span></span>|<span data-ttu-id="f84d1-162">読み取り目的</span><span class="sxs-lookup"><span data-stu-id="f84d1-162">Read-intent</span></span>|<span data-ttu-id="f84d1-163">Success</span><span class="sxs-lookup"><span data-stu-id="f84d1-163">Success</span></span>|  
|<span data-ttu-id="f84d1-164">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-164">Secondary</span></span>|<span data-ttu-id="f84d1-165">[読み取り目的のみ]</span><span class="sxs-lookup"><span data-stu-id="f84d1-165">Read-intent only</span></span>|<span data-ttu-id="f84d1-166">読み取り/書き込み、または接続目的の指定なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-166">Read-write or no connection intent specified</span></span>|<span data-ttu-id="f84d1-167">障害</span><span class="sxs-lookup"><span data-stu-id="f84d1-167">Failure</span></span>|  
|<span data-ttu-id="f84d1-168">1 次式</span><span class="sxs-lookup"><span data-stu-id="f84d1-168">Primary</span></span>|<span data-ttu-id="f84d1-169">すべて (これはプライマリの既定の動作です)</span><span class="sxs-lookup"><span data-stu-id="f84d1-169">All (This is the default primary behavior.)</span></span>|<span data-ttu-id="f84d1-170">読み取りのみ、読み取り/書き込み、または接続目的の指定なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-170">Read-only, read-write, or no connection intent specified</span></span>|<span data-ttu-id="f84d1-171">Success</span><span class="sxs-lookup"><span data-stu-id="f84d1-171">Success</span></span>|  
|<span data-ttu-id="f84d1-172">1 次式</span><span class="sxs-lookup"><span data-stu-id="f84d1-172">Primary</span></span>|<span data-ttu-id="f84d1-173">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-173">Read-write</span></span>|<span data-ttu-id="f84d1-174">[読み取り目的のみ]</span><span class="sxs-lookup"><span data-stu-id="f84d1-174">Read-intent only</span></span>|<span data-ttu-id="f84d1-175">障害</span><span class="sxs-lookup"><span data-stu-id="f84d1-175">Failure</span></span>|  
|<span data-ttu-id="f84d1-176">1 次式</span><span class="sxs-lookup"><span data-stu-id="f84d1-176">Primary</span></span>|<span data-ttu-id="f84d1-177">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-177">Read-write</span></span>|<span data-ttu-id="f84d1-178">読み取り/書き込み、または接続目的の指定なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-178">Read-write or no connection intent specified</span></span>|<span data-ttu-id="f84d1-179">Success</span><span class="sxs-lookup"><span data-stu-id="f84d1-179">Success</span></span>|  
  
 <span data-ttu-id="f84d1-180">クライアント接続要求を処理する可用性グループ リスナーの詳細については、「 [可用性グループ リスナー、クライアント接続、およびアプリケーションのフェールオーバー &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)」をご参照ください。</span><span class="sxs-lookup"><span data-stu-id="f84d1-180">For information about configuring an availability group to accept client connections to its replicas, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
### <a name="example-connection-access-configuration"></a><span data-ttu-id="f84d1-181">接続のアクセス構成の例</span><span class="sxs-lookup"><span data-stu-id="f84d1-181">Example Connection-Access Configuration</span></span>  
 <span data-ttu-id="f84d1-182">可用性レプリカの接続アクセスの構成内容がそれぞれ異なっている場合、可用性グループがフェールオーバーした後でクライアント接続のサポートが変わる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-182">Depending on how different availability replicas are configured for connection access, support for client connections might change after an availability group fails over.</span></span> <span data-ttu-id="f84d1-183">たとえば、リモートの非同期コミット セカンダリ レプリカでレポートが実行された可用性グループについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="f84d1-183">For example, consider an availability group for which reporting is performed on remote asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="f84d1-184">この可用性グループのデータベースのすべての読み取り専用アプリケーションで、`Application Intent` 接続プロパティが `ReadOnly` に設定されているため、すべての読み取り専用接続が読み取りを目的とした接続です。</span><span class="sxs-lookup"><span data-stu-id="f84d1-184">All of the read-only applications for the databases in this availability group set their `Application Intent` connection property to `ReadOnly`, so that all read-only connections are read-intent connections.</span></span>  
  
 <span data-ttu-id="f84d1-185">この例の可用性グループには、メインのコンピューティング センターにある 2 つの同期コミット レプリカと、サテライト サイトにある 2 つの非同期コミット レプリカが含まれています。</span><span class="sxs-lookup"><span data-stu-id="f84d1-185">This example availability group possesses two synchronous-commit replicas at the main computing center and two asynchronous-commit replicas at a satellite site.</span></span> <span data-ttu-id="f84d1-186">プライマリ ロールに対しては、すべてのレプリカに読み取り/書き込みアクセスが構成され、どのような状況でもプライマリ レプリカへの読み取りを目的とした接続ができないようになっています。</span><span class="sxs-lookup"><span data-stu-id="f84d1-186">For the primary role, all the replicas are configured for read-write access, which prevents read-intent connections to the primary replica in all situations.</span></span> <span data-ttu-id="f84d1-187">同期コミットのセカンダリ ロールでは、既定の接続アクセス構成 ("なし") が使用されるため、セカンダリ ロールではすべてのクライアント接続が禁止されます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-187">The synchronous commit secondary role uses the default connection-access configuration ("none"), which prevents all client connections under the secondary role.</span></span>  <span data-ttu-id="f84d1-188">一方、非同期コミット レプリカは、セカンダリ ロールでの読み取り目的の接続を許可するように構成されています。</span><span class="sxs-lookup"><span data-stu-id="f84d1-188">In contrast, the asynchronous commit replicas are configured to permit read-intent connections under the secondary role.</span></span> <span data-ttu-id="f84d1-189">次の表に、この例の構成をまとめます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-189">The following table summarize this example configuration:</span></span>  
  
|<span data-ttu-id="f84d1-190">[レプリカ]</span><span class="sxs-lookup"><span data-stu-id="f84d1-190">Replica</span></span>|<span data-ttu-id="f84d1-191">コミット モード</span><span class="sxs-lookup"><span data-stu-id="f84d1-191">Commit Mode</span></span>|<span data-ttu-id="f84d1-192">[初期ロール]</span><span class="sxs-lookup"><span data-stu-id="f84d1-192">Initial Role</span></span>|<span data-ttu-id="f84d1-193">セカンダリ ロールの接続アクセス</span><span class="sxs-lookup"><span data-stu-id="f84d1-193">Connection Access for Secondary Role</span></span>|<span data-ttu-id="f84d1-194">プライマリ ロールの接続アクセス</span><span class="sxs-lookup"><span data-stu-id="f84d1-194">Connection Access for Primary Role</span></span>|  
|-------------|-----------------|------------------|------------------------------------------|----------------------------------------|  
|<span data-ttu-id="f84d1-195">Replica1</span><span class="sxs-lookup"><span data-stu-id="f84d1-195">Replica1</span></span>|<span data-ttu-id="f84d1-196">同期</span><span class="sxs-lookup"><span data-stu-id="f84d1-196">Synchronous</span></span>|<span data-ttu-id="f84d1-197">1 次式</span><span class="sxs-lookup"><span data-stu-id="f84d1-197">Primary</span></span>|<span data-ttu-id="f84d1-198">なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-198">None</span></span>|<span data-ttu-id="f84d1-199">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-199">Read-write</span></span>|  
|<span data-ttu-id="f84d1-200">Replica2</span><span class="sxs-lookup"><span data-stu-id="f84d1-200">Replica2</span></span>|<span data-ttu-id="f84d1-201">Synchronous</span><span class="sxs-lookup"><span data-stu-id="f84d1-201">Synchronous</span></span>|<span data-ttu-id="f84d1-202">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-202">Secondary</span></span>|<span data-ttu-id="f84d1-203">なし</span><span class="sxs-lookup"><span data-stu-id="f84d1-203">None</span></span>|<span data-ttu-id="f84d1-204">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-204">Read-write</span></span>|  
|<span data-ttu-id="f84d1-205">Replica3</span><span class="sxs-lookup"><span data-stu-id="f84d1-205">Replica3</span></span>|<span data-ttu-id="f84d1-206">非同期</span><span class="sxs-lookup"><span data-stu-id="f84d1-206">Asynchronous</span></span>|<span data-ttu-id="f84d1-207">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-207">Secondary</span></span>|<span data-ttu-id="f84d1-208">読み取り目的のみ</span><span class="sxs-lookup"><span data-stu-id="f84d1-208">Read-intentonly</span></span>|<span data-ttu-id="f84d1-209">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-209">Read-write</span></span>|  
|<span data-ttu-id="f84d1-210">Replica4</span><span class="sxs-lookup"><span data-stu-id="f84d1-210">Replica4</span></span>|<span data-ttu-id="f84d1-211">非同期</span><span class="sxs-lookup"><span data-stu-id="f84d1-211">Asynchronous</span></span>|<span data-ttu-id="f84d1-212">セカンダリ</span><span class="sxs-lookup"><span data-stu-id="f84d1-212">Secondary</span></span>|<span data-ttu-id="f84d1-213">[読み取り目的のみ]</span><span class="sxs-lookup"><span data-stu-id="f84d1-213">Read-intent only</span></span>|<span data-ttu-id="f84d1-214">読み取り/書き込み</span><span class="sxs-lookup"><span data-stu-id="f84d1-214">Read-write</span></span>|  
  
 <span data-ttu-id="f84d1-215">一般的に、この例のシナリオでは、フェールオーバーは同期コミット レプリカ間でのみ実行され、フェールオーバーの直後に、読み取り目的のアプリケーションが非同期コミット セカンダリ レプリカの 1 つに再接続できます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-215">Typically, in this example scenario, failovers occur only between the synchronous-commit replicas, and  immediately after the failover, read-intent applications are able to reconnect to one of the asynchronous-commit secondary replicas.</span></span> <span data-ttu-id="f84d1-216">ただし、メインのコンピューティング センターで障害が発生した場合は両方の同期コミット レプリカが失われます。</span><span class="sxs-lookup"><span data-stu-id="f84d1-216">However, when a disaster occurs at the main computing center both synchronous-commit replicas are lost.</span></span> <span data-ttu-id="f84d1-217">サテライト サイトのデータベース管理者が、非同期コミット セカンダリ レプリカへの強制フェールオーバーを手動で実行して対処します。</span><span class="sxs-lookup"><span data-stu-id="f84d1-217">The database administrator at the satellite site responds by performing a forced manual failover to an asynchronous-commit secondary replica.</span></span> <span data-ttu-id="f84d1-218">残りのセカンダリ レプリカのセカンダリ データベースは強制フェールオーバーによって中断されるため、読み取り専用のワークロードで使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="f84d1-218">The secondary databases on the remaining secondary replica are suspended by the forced failover, making them unavailable for read-only workloads.</span></span> <span data-ttu-id="f84d1-219">読み取り/書き込み接続が構成されている新しいプライマリ レプリカでは、読み取り目的のワークロードと読み取り/書き込みワークロードが競合しません。</span><span class="sxs-lookup"><span data-stu-id="f84d1-219">The new primary replica, which is configured for read-write connections, prevents the read-intent workload from competing with the read-write workload.</span></span> <span data-ttu-id="f84d1-220">つまり、データベース管理者が残りの非同期コミット セカンダリ レプリカのセカンダリ データベースを再開するまでは、読み取り目的のクライアントはどの可用性レプリカにも接続できません。</span><span class="sxs-lookup"><span data-stu-id="f84d1-220">This means that until the database administrator resumes the secondary databases on the remaining asynchronous-commit secondary replica, read-intent clients cannot connect to any availability replica.</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="f84d1-221">関連タスク</span><span class="sxs-lookup"><span data-stu-id="f84d1-221">Related Tasks</span></span>  
  
-   [<span data-ttu-id="f84d1-222">可用性レプリカでの読み取り専用アクセスの構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f84d1-222">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="f84d1-223">可用性グループの読み取り専用ルーティングの構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f84d1-223">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="f84d1-224">可用性グループの監視 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="f84d1-224">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="f84d1-225">可用性レプリカのプロパティの表示 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="f84d1-225">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   <span data-ttu-id="f84d1-226">[[新しい可用性グループ] ダイアログ ボックスの使用 &#40;SQL Server Management Studio&#41;](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)</span><span class="sxs-lookup"><span data-stu-id="f84d1-226">[Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)</span></span>  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="f84d1-227">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="f84d1-227">Related Content</span></span>  
  
-   [<span data-ttu-id="f84d1-228">高可用性と災害復旧のための Microsoft SQL Server AlwaysOn ソリューション ガイド</span><span class="sxs-lookup"><span data-stu-id="f84d1-228">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="f84d1-229">SQL Server AlwaysOn チームのブログ: AlwaysOn チームの公式 SQL Server のブログ</span><span class="sxs-lookup"><span data-stu-id="f84d1-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="f84d1-230">参照</span><span class="sxs-lookup"><span data-stu-id="f84d1-230">See Also</span></span>  
 <span data-ttu-id="f84d1-231">[AlwaysOn 可用性グループ &#40;SQL Server の概要&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="f84d1-231">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="f84d1-232">[可用性グループ リスナー、クライアント接続、およびアプリケーションのフェールオーバー &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="f84d1-232">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="f84d1-233">統計</span><span class="sxs-lookup"><span data-stu-id="f84d1-233">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
