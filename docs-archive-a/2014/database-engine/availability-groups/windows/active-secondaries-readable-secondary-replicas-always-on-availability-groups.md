---
title: 'アクティブなセカンダリ: 読み取り可能なセカンダリレプリカ (Always On 可用性グループ) |Microsoft Docs'
ms.custom: ''
ms.date: 10/27/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- connection access to availability replicas
- Availability Groups [SQL Server], availability replicas
- Availability Groups [SQL Server], readable secondary replicas
- active secondary replicas [SQL Server], read-only access to
- readable secondary replicas
- Availability Groups [SQL Server], active secondary replicas
ms.assetid: 78f3f81a-066a-4fff-b023-7725ff874fdf
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8b85704b8110eb84ea6f4c33dfa79694112c2328
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87645864"
---
# <a name="active-secondaries-readable-secondary-replicas-always-on-availability-groups"></a><span data-ttu-id="5b19d-102">アクティブなセカンダリ: 読み取り可能なセカンダリ レプリカ (Always On 可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="5b19d-102">Active Secondaries: Readable Secondary Replicas (Always On Availability Groups)</span></span>
  <span data-ttu-id="5b19d-103">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] のアクティブなセカンダリ機能では、1 つ以上のセカンダリ レプリカ (*読み取り可能なセカンダリ レプリカ*) への読み取り専用アクセスをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-103">The [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] active secondary capabilities include support for read-only access to one or more secondary replicas (*readable secondary replicas*).</span></span> <span data-ttu-id="5b19d-104">読み取り可能なセカンダリ レプリカは、すべてのセカンダリ データベースへの読み取り専用アクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-104">A readable secondary replica allows read-only access to all its secondary databases.</span></span> <span data-ttu-id="5b19d-105">ただし、読み取り可能なセカンダリ データベースは読み取り専用に設定されません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-105">However, readable secondary databases are not set to read-only.</span></span> <span data-ttu-id="5b19d-106">これらは動的です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-106">They are dynamic.</span></span> <span data-ttu-id="5b19d-107">セカンダリ データベースは、対応するプライマリ データベースに対する変更がそのセカンダリ データベースに適用されると変更されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-107">A given secondary database changes as changes on the corresponding primary database are applied to the secondary database.</span></span> <span data-ttu-id="5b19d-108">一般的なセカンダリ レプリカでは、持続性のあるメモリ最適化テーブルを含めて、セカンダリ データベースのデータはほぼリアルタイムです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-108">For a typical secondary replica, the data, including durable memory optimized tables, in the secondary databases is in near real time.</span></span> <span data-ttu-id="5b19d-109">また、フルテキスト インデックスはセカンダリ データベースと同期されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-109">Furthermore, full-text indexes are synchronized with the secondary databases.</span></span> <span data-ttu-id="5b19d-110">多くの場合、プライマリ データベースと対応するセカンダリ データベース間のデータ待機時間は数秒です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-110">In many circumstances, data latency between a primary database and the corresponding secondary database is only a few seconds.</span></span>  
  
 <span data-ttu-id="5b19d-111">プライマリ データベースに適用されるセキュリティ設定は、セカンダリ データベースに保存されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-111">Security settings that occur in the primary databases are persisted to the secondary databases.</span></span> <span data-ttu-id="5b19d-112">これには、ユーザー、データベース ロール、およびアプリケーション ロールと、それぞれの権限が含まれます。また、透過的なデータ暗号化 (TDE) も含まれます (プライマリ データベースで有効な場合)。</span><span class="sxs-lookup"><span data-stu-id="5b19d-112">This includes users, database roles, and applications roles together with their respective permissions and transparent data encryption (TDE), if enabled on the primary database.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5b19d-113">セカンダリ データベースにデータを書き込むことはできませんが、ユーザー データベースやシステム データベース ( **tempdb**など) を含め、セカンダリ レプリカをホストするサーバー インスタンス上の読み書き可能なデータベースには書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-113">Though you cannot write data to secondary databases, you can write to read-write databases on the server instance that hosts the secondary replica, including user databases and system databases such as **tempdb**.</span></span>  
  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="5b19d-114">また、読み取り可能なセカンダリ レプリカへの読み取りを目的とした接続要求の再ルーティング (*読み取り専用ルーティング*) もサポートしています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-114">also supports the re-routing of read-intent connection requests to a readable secondary replica (*read-only routing*).</span></span> <span data-ttu-id="5b19d-115">読み取り専用ルーティングについては、「 [リスナーを使用した読み取り専用セカンダリ レプリカ (読み取り専用ルーティング) への接続](../../listeners-client-connectivity-application-failover.md#ConnectToSecondary)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-115">For information about read-only routing, see [Using a Listener to Connect to a Read-Only Secondary Replica (Read-Only Routing)](../../listeners-client-connectivity-application-failover.md#ConnectToSecondary).</span></span>  
  
 
  
##  <a name="benefits"></a><a name="bkmk_Benefits"></a> <span data-ttu-id="5b19d-116">利点</span><span class="sxs-lookup"><span data-stu-id="5b19d-116">Benefits</span></span>  
 <span data-ttu-id="5b19d-117">読み取り可能なセカンダリ レプリカに読み取り専用接続を割り当てることには、次の利点があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-117">Directing read-only connections to readable secondary replicas provides the following benefits:</span></span>  
  
-   <span data-ttu-id="5b19d-118">プライマリ レプリカを読み取り専用ワークロードから解放することができ、リソースをミッション クリティカルなワークロード用に保護できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-118">Offloads your secondary read-only workloads from your primary replica, which conserves its resources for your mission critical workloads.</span></span> <span data-ttu-id="5b19d-119">ミッション クリティカルな読み取りワークロードまたは待機時間が許容できないワークロードは、プライマリ上で実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-119">If you have mission critical read-workload or the workload that cannot tolerate latency, you should run it on the primary.</span></span>  
  
-   <span data-ttu-id="5b19d-120">読み取り可能なセカンダリ レプリカをホストするシステムに対する投資収益率を向上させます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-120">Improves your return on investment for the systems that host readable secondary replicas.</span></span>  
  
 <span data-ttu-id="5b19d-121">また、読み取り可能なセカンダリは、次のように読み取り専用操作に対する堅牢なサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-121">In addition, readable secondaries provide robust support for read-only operations, as follows:</span></span>  
  
-   <span data-ttu-id="5b19d-122">読み取り可能なセカンダリ データベースの自動一時統計により、ディスク ベース テーブルに対する読み取り専用クエリが最適化されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-122">Automatic temporary statistics on readable secondary database optimize read-only queries on disk-based tables.</span></span> <span data-ttu-id="5b19d-123">メモリ最適化テーブルの場合、不足している統計は自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-123">For memory-optimized tables, the missing statistics are created automatically.</span></span> <span data-ttu-id="5b19d-124">ただし、古い統計の自動更新はありません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-124">However, there is no auto-update of stale statistics.</span></span> <span data-ttu-id="5b19d-125">手動でプライマリ レプリカの統計を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-125">You will need to manually update the statistics on the primary replica.</span></span> <span data-ttu-id="5b19d-126">詳細については、このトピックの後の「 [読み取り専用アクセス データベースの統計](#Read-OnlyStats)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-126">For more information, see [Statistics for Read-Only Access Databases](#Read-OnlyStats), later in this topic.</span></span>  
  
-   <span data-ttu-id="5b19d-127">ディスク ベース テーブルに対する読み取り専用ワークロードは、行のバージョン管理を使用してセカンダリ データベースでのブロック競合を除去します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-127">Read-only workloads for disk-based tables use row versioning to remove blocking contention on the secondary databases.</span></span> <span data-ttu-id="5b19d-128">他のトランザクション分離レベルが明示的に設定されていても、セカンダリ データベースに対して実行されるすべてのクエリは、スナップショット分離トランザクション レベルに自動的にマップされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-128">All queries that run against the secondary databases are automatically mapped to snapshot isolation transaction level, even when other transaction isolation levels are explicitly set.</span></span> <span data-ttu-id="5b19d-129">また、すべてのロック ヒントが無視されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-129">Also, all locking hints are ignored.</span></span> <span data-ttu-id="5b19d-130">これにより、リーダー/ライターの競合が解消されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-130">This eliminates reader/writer contention.</span></span>  
  
-   <span data-ttu-id="5b19d-131">持続性のあるメモリ最適化テーブルに対する読み取り専用ワークロードは、同じトランザクション分離レベル制限で、ネイティブ ストアド プロシージャか SQL 相互運用性を使用して、プライマリ データベースでのアクセスとまったく同じ方法でデータにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="5b19d-131">Read-only workloads for memory-optimized durable tables access the data in exactly the same way it is accessed on the primary database, using native stored procedures or SQL Interoperability with the same transaction isolation level limitations.</span></span> <span data-ttu-id="5b19d-132">プライマリ レプリカで実行されるレポート ワークロードまたは読み取り専用クエリは、セカンダリ レプリカでも変更せずに実行できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-132">Reporting workload or read-only queries running on the primary replica can be run on the secondary replica without requiring any changes.</span></span> <span data-ttu-id="5b19d-133">同様に、セカンダリ レプリカで実行されるレポート ワークロードまたは読み取り専用クエリは、プライマリ レプリカでも変更せずに実行できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-133">Similarly, a reporting workload or read-only queries running on a secondary replica can be run on the primary replica without requiring any changes.</span></span>  <span data-ttu-id="5b19d-134">他のトランザクション分離レベルが明示的に設定されていても、セカンダリ データベースに対して実行されるすべてのクエリは、ディスク ベース テーブルと同様に、スナップショット分離トランザクション レベルに自動的にマップされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-134">Similar to disk-based tables, all queries that run against the secondary databases are automatically mapped to snapshot isolation transaction level, even when other transaction isolation levels are explicitly set.</span></span>  
  
-   <span data-ttu-id="5b19d-135">セカンダリ レプリカ上では、ディスク ベースおよびメモリ最適化テーブル型の両方について、テーブル変数に対する DML 操作が許可されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-135">DML operations are allowed on table variables both for disk-based and memory-optimized table types on the secondary replica.</span></span>  
  
##  <a name="prerequisites-for-the-availability-group"></a><a name="bkmk_Prerequisites"></a> <span data-ttu-id="5b19d-136">可用性グループの前提条件</span><span class="sxs-lookup"><span data-stu-id="5b19d-136">Prerequisites for the Availability Group</span></span>  
  
-   <span data-ttu-id="5b19d-137">**読み取り可能なセカンダリ レプリカ (必須)**</span><span class="sxs-lookup"><span data-stu-id="5b19d-137">**Readable secondary replicas (required)**</span></span>  
  
     <span data-ttu-id="5b19d-138">データベース管理者は、セカンダリ ロールで実行しているときに、すべての接続 (読み取り専用アクセスのみ) または読み取りを目的とした接続のみを許可するように 1 つ以上のレプリカを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-138">The database administrator needs to configure one or more replicas so that, when running under the secondary role, they allow either all connections (just for read-only access) or only read-intent connections.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="5b19d-139">必要に応じて、プライマリ ロールで実行しているときに、読み取り専用接続を除外するように可用性レプリカを構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-139">Optionally, the database administrator can configure any of the availability replicas to exclude read-only connections when running under the primary role.</span></span>  
  
     <span data-ttu-id="5b19d-140">詳細については、「[可用性レプリカに対するクライアント接続アクセスについて &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-140">For more information, see [About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md).</span></span>  
  
-   <span data-ttu-id="5b19d-141">**可用性グループ リスナー**</span><span class="sxs-lookup"><span data-stu-id="5b19d-141">**Availability group listener**</span></span>  
  
     <span data-ttu-id="5b19d-142">読み取り専用ルーティングをサポートするには、可用性グループに [可用性グループ リスナー](../../listeners-client-connectivity-application-failover.md)が存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-142">To support read-only routing, an availability group must possess an [availability group listener](../../listeners-client-connectivity-application-failover.md).</span></span> <span data-ttu-id="5b19d-143">読み取り専用クライアントは、このリスナーに接続要求を送信する必要があります。クライアントの接続文字列では、アプリケーションの目的として "読み取り専用" を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-143">The read-only client must direct its connection requests to this listener, and the client's connection string must specify the application intent as "read-only."</span></span> <span data-ttu-id="5b19d-144">つまり、 *読み取りを目的とした接続要求*であることが必要です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-144">That is, they must be *read-intent connection requests*.</span></span>  
  
-   <span data-ttu-id="5b19d-145">**読み取り専用ルーティング**</span><span class="sxs-lookup"><span data-stu-id="5b19d-145">**Read only routing**</span></span>  
  
     <span data-ttu-id="5b19d-146">*読み取り専用ルーティング* は、可用性グループ リスナーに送信される読み取りを目的とした受信接続要求を、使用できる読み取り可能なセカンダリ レプリカにルーティングする SQL Server の機能です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-146">*Read-only routing* refers to the ability of SQL Server to route incoming read-intent connection requests, that are directed to an availability group listener, to an available readable secondary replica.</span></span> <span data-ttu-id="5b19d-147">読み取り専用ルーティングの前提条件は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-147">The prerequisites for read-only routing are as follows:</span></span>  
  
    -   <span data-ttu-id="5b19d-148">読み取り専用ルーティングをサポートするには、読み取り可能なセカンダリ レプリカに読み取り専用ルーティングの URL が必要です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-148">To support read-only routing, a readable secondary replica requires a read-only routing URL.</span></span> <span data-ttu-id="5b19d-149">この URL は、ローカル レプリカがセカンダリ ロールで実行されている場合にのみ有効です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-149">This URL takes effect only when the local replica is running under the secondary role.</span></span> <span data-ttu-id="5b19d-150">読み取り専用ルーティングの URL は、必要に応じてレプリカごとに指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-150">The read-only routing URL must be specified on a replica-by-replica basis, as needed.</span></span> <span data-ttu-id="5b19d-151">各読み取り専用ルーティングの URL は、読み取りを目的とした接続要求を特定の読み取り可能なセカンダリ レプリカにルーティングする際に使用されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-151">Each read-only routing URL is used for routing read-intent connection requests to a specific readable secondary replica.</span></span> <span data-ttu-id="5b19d-152">通常は、読み取り可能なすべてのセカンダリ レプリカに読み取り専用ルーティングの URL が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-152">Typically, every readable secondary replica is assigned a read-only routing URL.</span></span>  
  
    -   <span data-ttu-id="5b19d-153">可用性レプリカがプライマリ レプリカである場合に読み取り専用ルーティングをサポートするには、その可用性レプリカに読み取り専用ルーティング リストが必要です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-153">Each availability replica that is to support read-only routing when it is the primary replica requires a read-only routing list.</span></span> <span data-ttu-id="5b19d-154">読み取り専用ルーティング リストは、ローカル レプリカがプライマリ ロールで実行されている場合にのみ有効です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-154">A given read-only routing list takes effect only when the local replica is running under the primary role.</span></span> <span data-ttu-id="5b19d-155">このリストは、必要に応じてレプリカごとに指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-155">This list must be specified on a replica-by-replica basis, as needed.</span></span> <span data-ttu-id="5b19d-156">通常、各読み取り専用ルーティング リストには、すべての読み取り専用ルーティングの URL が含まれており、リストの末尾にローカル レプリカの URL が示されています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-156">Typically, each read-only routing list would contain every read-only routing URL, with the URL of the local replica at the end of the list.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="5b19d-157">読み取りを目的とした接続要求は、現在のプライマリ レプリカの読み取り専用ルーティング リスト内の最初に使用できる読み取り可能なセカンダリにルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-157">Read-intent connection requests are routed to the first available readable secondary on the read-only routing list of the current primary replica.</span></span> <span data-ttu-id="5b19d-158">負荷分散はありません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-158">There is no load balancing.</span></span>  
  
     <span data-ttu-id="5b19d-159">詳細については、このトピックの後の「 [可用性グループの読み取り専用ルーティングの構成 &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md)など) を含め、セカンダリ レプリカをホストするサーバー インスタンス上の読み書き可能なデータベースには書き込むことができます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-159">For more information, see [Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;](configure-read-only-routing-for-an-availability-group-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5b19d-160">可用性グループ リスナーと読み取り専用ルーティングの詳細については、「 [可用性グループ リスナー、クライアント接続、およびアプリケーションのフェールオーバー &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md)が存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-160">For information about availability group listeners and more information about read-only routing, see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md).</span></span>  
  
##  <a name="limitations-and-restrictions"></a><a name="bkmk_LimitationsRestrictions"></a> <span data-ttu-id="5b19d-161">制限事項と制約事項</span><span class="sxs-lookup"><span data-stu-id="5b19d-161">Limitations and Restrictions</span></span>  
 <span data-ttu-id="5b19d-162">次に示すように、一部の操作は完全にはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-162">Some operations are not fully supported, as follows:</span></span>  
  
-   <span data-ttu-id="5b19d-163">読み取り可能なレプリカは、読み取り用に有効になるとすぐに、セカンダリ データベースへの接続の受け入れを開始できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-163">As soon as a readable replica is enabled for read, it can start accepting connections to its secondary databases.</span></span> <span data-ttu-id="5b19d-164">ただし、プライマリ データベースにアクティブなトランザクションが存在する場合、行のバージョンは、対応するセカンダリ データベースで完全に使用可能にはなりません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-164">However, if any active transactions exist on a primary database, the row versions will not be fully available on the corresponding secondary database.</span></span> <span data-ttu-id="5b19d-165">セカンダリ レプリカの構成時にプライマリ レプリカ上に存在していたアクティブなトランザクションは、コミットまたはロールバックする必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-165">Any active transactions that existed on the primary replica when the secondary replica was configured must commit or roll back.</span></span> <span data-ttu-id="5b19d-166">このプロセスが完了するまでは、セカンダリ データベースでのトランザクションの分離レベルのマッピングは完了せず、クエリは一時的にブロックされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-166">Until this process completes, the transaction isolation level mapping on the secondary database is incomplete and queries are temporarily blocked.</span></span>  
  
    > [!WARNING]  
    >  <span data-ttu-id="5b19d-167">長いトランザクションを実行すると、ディスク ベース テーブルおよびメモリ最適化テーブルの両方について、バージョン管理される行の保持数に影響が及びます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-167">Running long transactions impacts the number of versioned rows kept, both for disk-based and memory-optimized tables.</span></span>  
  
-   <span data-ttu-id="5b19d-168">メモリ最適化テーブルを含むセカンダリ データベースでは、メモリ最適化テーブルに対して行バージョンが常に生成されますが、セカンダリ レプリカが読み取り用として有効になった際にプライマリ レプリカに存在していたすべてのアクティブなトランザクションが完了するまで、クエリがブロックされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-168">On a secondary database with memory-optimized tables, even though row versions are always generated for memory-optimzied tables, queries are blocked until all active transactions that existed in the primary replica when the secondary replica was enabled for read complete.</span></span> <span data-ttu-id="5b19d-169">これにより、ディスク ベース テーブルとメモリ最適化テーブルの両方が同時にレポート ワークロードおよび読み取り専用クエリに使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-169">This ensures that both disk-based and memory-optimized tables are available to the reporting workload and read-only queries at the same time.</span></span>  
  
-   <span data-ttu-id="5b19d-170">変更の追跡および変更データ キャプチャは、読み取り可能なセカンダリ レプリカに所属するセカンダリ データベースではサポートされません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-170">Change tracking and change data capture are not supported on secondary databases that belong to a readable secondary replica:</span></span>  
  
    -   <span data-ttu-id="5b19d-171">変更の追跡は、セカンダリ データベースでは明示的に無効になります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-171">Change tracking is explicitly disabled on secondary databases.</span></span>  
  
    -   <span data-ttu-id="5b19d-172">変更データ キャプチャは、セカンダリ データベースで有効にすることができますが、これはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-172">Change data capture can be enabled on a secondary database, but this is not supported.</span></span>  
  
-   <span data-ttu-id="5b19d-173">読み取り操作はスナップショット分離トランザクション レベルにマップされるため、プライマリ レプリカでのゴースト レコードのクリーンアップが 1 つ以上のセカンダリ レプリカのトランザクションによってブロックされることがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-173">Because read operations are mapped to snapshot isolation transaction level, the cleanup of ghost records on the primary replica can be blocked by transactions on one or more secondary replicas.</span></span> <span data-ttu-id="5b19d-174">ゴースト レコードのクリーンアップ タスクでは、プライマリ レプリカのディスク ベース テーブルに含まれるゴースト レコードが、セカンダリ レプリカで不要になったときに自動的にクリーンアップされます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-174">The ghost record cleanup task will automatically clean up the ghost records for disk-based tables on the primary replica when they are no longer needed by any secondary replica.</span></span>  <span data-ttu-id="5b19d-175">これは、プライマリ レプリカでトランザクションを実行する場合の処理と似ています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-175">This is similar to what is done when you run transaction(s) on the primary replica.</span></span> <span data-ttu-id="5b19d-176">セカンダリ データベースでの極端なケースでは、ゴーストのクリーンアップをブロックしているセカンダリ上の実行時間の長い読み取りクエリを終了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-176">In the extreme case on the secondary database, you will need to kill a long running read-query that is blocking the ghost cleanup.</span></span> <span data-ttu-id="5b19d-177">セカンダリ レプリカの接続が切断された場合、またはセカンダリ データベースでデータの移動が中断された場合、ゴーストのクリーンアップがブロックされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-177">Note, the ghost clean can be blocked if the secondary replica gets disconnected or when data movement is suspended on the secondary database.</span></span> <span data-ttu-id="5b19d-178">この状態ではログの切り捨ても実行できなくなるので、この状態が続く場合は、セカンダリ データベースを可用性グループから削除することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="5b19d-178">This state also prevents log truncation, so if this state persists, we recommend that you remove this secondary database from the availability group.</span></span> <span data-ttu-id="5b19d-179">メモリ最適化テーブルでは、行バージョンがメモリに保持され、プライマリ レプリカの行バージョンに依存しないため、ゴースト レコードのクリーンアップに関する問題は発生しません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-179">There is no ghost record cleanup issue with memory-optimized tables because the row versions are kept in memory and are independent of the row versions on the primary replica.</span></span>  
  
-   <span data-ttu-id="5b19d-180">セカンダリ レプリカで引き続き必要なゴースト レコードがファイルに含まれている場合、プライマリ レプリカでのディスク ベース テーブルが含まれているファイルに対する DBCC SHRINKFILE 操作は失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-180">The DBCC SHRINKFILE operation on files containing disk-based tables might fail on the primary replica if the file contains ghost records that are still needed on a secondary replica.</span></span>  
  
-   <span data-ttu-id="5b19d-181">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)]以降では、ユーザー操作または障害のためにプライマリ レプリカがオフラインになっても、読み取り可能なセカンダリ レプリカをオンラインのままにすることができます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-181">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], readable secondary replicas can remain online even when the primary replica is offline due to user action or a failure.</span></span> <span data-ttu-id="5b19d-182">ただし、この場合、可用性グループ リスナーもオフラインになるため、読み取り専用ルーティング機能しません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-182">However, read-only routing does not work in this situation because the availability group listener is offline as well.</span></span> <span data-ttu-id="5b19d-183">読み取り専用ワークロードにアクセスするには、クライアントは読み取り専用セカンダリ レプリカに直接接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-183">Clients must connect directly to the read-only secondary replicas for read-only workloads.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5b19d-184">読み取り可能なセカンダリ レプリカをホストしているサーバー インスタンスで、 [sys.dm_db_index_physical_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql) 動的管理ビューに対してクエリを実行すると、再実行のブロックという問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-184">If you query the [sys.dm_db_index_physical_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-physical-stats-transact-sql) dynamic management view on a server instance that is hosting a readable secondary replica, you might encounter a REDO blocking issue.</span></span> <span data-ttu-id="5b19d-185">これは、この動的管理ビューが、指定したユーザー テーブルまたはビューで IS ロックを獲得することが原因です。IS ロックは、そのユーザー テーブルまたはビューの X ロックに関して REDO スレッドの要求をブロックする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-185">This is because this dynamic management view acquires an IS lock on the specified user table or view that can block requests by a REDO thread for an X lock on that user table or view.</span></span>  
  
##  <a name="performance-considerations"></a><a name="bkmk_Performance"></a> <span data-ttu-id="5b19d-186">パフォーマンスに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="5b19d-186">Performance Considerations</span></span>  
 <span data-ttu-id="5b19d-187">このセクションでは、読み取り可能なセカンダリ データベースのパフォーマンスに関するいくつかの考慮事項について説明します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-187">This section discusses several performance considerations for readable secondary databases</span></span>  
  
 
  
###  <a name="data-latency"></a><a name="DataLatency"></a> <span data-ttu-id="5b19d-188">データ待機時間</span><span class="sxs-lookup"><span data-stu-id="5b19d-188">Data Latency</span></span>  
 <span data-ttu-id="5b19d-189">セカンダリ レプリカへの読み取り専用アクセスの実装が役立つのは、読み取り専用ワークロードである程度のデータ待機時間を許容できる場合です。</span><span class="sxs-lookup"><span data-stu-id="5b19d-189">Implementing read-only access to secondary replicas is useful if your read-only workloads can tolerate some data latency.</span></span> <span data-ttu-id="5b19d-190">データ待機時間が許容できない場合は、読み取り専用ワークロードをプライマリ レプリカに対して実行することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-190">In situations where data latency is unacceptable, consider running read-only workloads against the primary replica.</span></span>  
  
 <span data-ttu-id="5b19d-191">プライマリ レプリカは、プライマリ データベースでの変更のログ レコードをセカンダリ レプリカに送信します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-191">The primary replica sends log records of changes on primary database to the secondary replicas.</span></span> <span data-ttu-id="5b19d-192">それぞれのセカンダリ データベースで、専用の再実行スレッドがログ レコードに適用されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-192">On each secondary database, a dedicated redo thread applies the log records.</span></span> <span data-ttu-id="5b19d-193">読み取りアクセス セカンダリ データベースでは、その変更を含むログ レコードがセカンダリ データベースに適用され、トランザクションがプライマリ データベース上でコミットされない限り、特定のデータの変更はクエリ結果に反映されません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-193">On a read-access secondary database, a given data change does not appear in query results until the log record that contains the change has been applied to the secondary database and the transaction has been committed on primary database.</span></span>  
  
 <span data-ttu-id="5b19d-194">つまり、プライマリ レプリカとセカンダリ レプリカの間には待機時間 (通常は数秒程度) が発生します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-194">This means that there is some latency, usually only a matter of seconds, between the primary and secondary replicas.</span></span> <span data-ttu-id="5b19d-195">ただし、ネットワークの問題のためにスループットが低下するなどの特殊なケースでは、待機時間が長くなることがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-195">In unusual cases, however, for example if network issues reduce throughput, latency can become significant.</span></span> <span data-ttu-id="5b19d-196">I/O ボトルネックが生じた場合やデータの移動が中断された場合は、待機時間が増加します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-196">Latency increases when I/O bottlenecks occur and when data movement is suspended.</span></span> <span data-ttu-id="5b19d-197">データ移動の中断を監視するには、 [AlwaysOn ダッシュボード](use-the-always-on-dashboard-sql-server-management-studio.md) または [sys.dm_hadr_database_replica_states](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-database-replica-states-transact-sql) 動的管理ビューを使用できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-197">To monitor suspended data movement, you can use the [AlwaysOn Dashboard](use-the-always-on-dashboard-sql-server-management-studio.md) or the [sys.dm_hadr_database_replica_states](/sql/relational-databases/system-dynamic-management-views/sys-dm-hadr-database-replica-states-transact-sql) dynamic management view.</span></span>  
  
####  <a name="data-latency-on-databases-with-memory-optimized-tables"></a><a name="bkmk_LatencyWithInMemOLTP"></a> <span data-ttu-id="5b19d-198">メモリ最適化テーブルが含まれるデータベースでのデータ待機時間</span><span class="sxs-lookup"><span data-stu-id="5b19d-198">Data Latency on databases with memory-optimized tables</span></span>  
 <span data-ttu-id="5b19d-199">読み取りワークロードのためにセカンダリ レプリカのメモリ最適化テーブルにアクセスする場合は、 *信頼できるタイムスタンプ* を使用して、 *信頼できるタイムスタンプ*より前にコミットされたトランザクションから行を返します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-199">When accessing memory-optimized tables on secondary replica for read workload, a *safe-timestamp* is used to return rows from transactions that have committed earlier than *safe-timestamp*.</span></span> <span data-ttu-id="5b19d-200">信頼できるタイムスタンプは、プライマリ レプリカ上で行のガベージ コレクションを実行するためにガベージ コレクション スレッドによって使用される最も古いタイムスタンプ ヒントです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-200">The safe-timestamp is the oldest timestamp hint used by the garbage collection thread to garbage collect the rows on the primary replica.</span></span> <span data-ttu-id="5b19d-201">このタイムスタンプは、前回の更新以降、メモリ最適化テーブル上の DML トランザクションの数が内部しきい値を超えたときに更新されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-201">This timestamp is updated when the number of DML transactions on memory-optimized tables exceed an internal threshold since the last update.</span></span> <span data-ttu-id="5b19d-202">最も古いトランザクションのタイムスタンプがプライマリ レプリカで更新されるたびに、持続性のあるメモリ最適化テーブル上の次の DML トランザクションにより、このタイムスタンプが特殊なログ レコードの一部としてセカンダリ レプリカに送信されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-202">Whenever the oldest transaction timestamp is updated on the primary replica, the next DML transaction on a durable memory-optimized table will send this timestamp to be sent to secondary replica as part of a special log record.</span></span> <span data-ttu-id="5b19d-203">セカンダリ レプリカの再実行スレッドにより、このログ レコードの処理の一環として信頼できるタイムスタンプが更新されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-203">REDO thread on the secondary replica, updates the safe-timestamp as part of processing this log record.</span></span>  
  
#### <a name="the-impact-of-safe-timestamp-on-latency"></a><span data-ttu-id="5b19d-204">信頼できるタイムスタンプの待機時間への影響</span><span class="sxs-lookup"><span data-stu-id="5b19d-204">The impact of safe-timestamp on Latency</span></span>  
  
-   <span data-ttu-id="5b19d-205">トランザクション スループットが高い OLTP ワークロードの場合、待機時間はディスク ベース テーブルと同様になります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-205">For OLTP workloads with high transaction throughput, the latency should be comparable to disk-based tables.</span></span> <span data-ttu-id="5b19d-206">これは一般的なケースであることが予想されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-206">We expect this to be the common case.</span></span>  
  
-   <span data-ttu-id="5b19d-207">実行時間の長いトランザクションでは、信頼できるタイムスタンプを遅延させます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-207">A long running transaction can cause the safe-timestamp to be delayed arbitrarily.</span></span>  <span data-ttu-id="5b19d-208">スナップショット分離のタイムスタンプは最も古いトランザクションのコミットによって決定されるため、これはディスク ベースのテーブルにアクセスするときと変わりません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-208">This is no different when accessing disk-based tables as the timestamp of snapshot isolation is determined by the commit of oldest transaction.</span></span>  
  
-   <span data-ttu-id="5b19d-209">信頼できるタイムスタンプの前回の更新以降のプライマリ レプリカに対するトランザクションによる変更は、信頼できるタイムスタンプが次に転送および更新されるまでセカンダリ レプリカに表示されません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-209">Changes made by transactions on the primary replica since the last safe-timestamp update are not visible on the secondary replica till the next transmission and update of the safe-timestamp.</span></span> <span data-ttu-id="5b19d-210">信頼できるタイムスタンプの更新用の内部しきい値を超える前にプライマリ レプリカのトランザクション アクティビティが停止した場合、信頼できるタイムスタンプに対する前回の更新以降に行われた変更はセカンダリ レプリカに表示されません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-210">If transactional activity on the primary replica stops before the internal threshold for safe-timestamp update is crossed, the changes made since the last update to safe-timestamp will not be visible on the secondary replica.</span></span> <span data-ttu-id="5b19d-211">この問題を軽減するには、プライマリ レプリカ上の持続性のあるダミーのメモリ最適化テーブルに対していくつかの DML トランザクションを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-211">To alleviate this issue, you may need to run a few DML transactions on a dummy durable memory-optimized table on the primary replica.</span></span> <span data-ttu-id="5b19d-212">また、お勧めしませんが、手動チェックポイントを実行して、信頼できるタイムスタンプの配布を強制することもできます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-212">Alternatively, though not recommended, you can force shipping of safe-timestamp by running a manual checkpoint.</span></span>  
  
#### <a name="monitoring-and-troubleshooting-data-latency-in-memory-optimized-tables"></a><span data-ttu-id="5b19d-213">メモリ最適化テーブルのデータ待機時間の監視およびトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="5b19d-213">Monitoring and Troubleshooting data latency in memory-optimized tables</span></span>  
 <span data-ttu-id="5b19d-214">信頼できるタイムスタンプを調べるには、プライマリ レプリカに対して次のクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-214">You can find out the safe-timestamp by running the following query on the primary replica</span></span>  
  
```  
  
SELECT MAX(base_generation)   
   AS max_base_generation  
   FROM sys.dm_db_xtp_gc_cycle_stats  
GO  
  
```  
  
 <span data-ttu-id="5b19d-215">また、セカンダリ レプリカで使用される信頼できるタイムスタンプを識別するには、アクティブな読み取りワークロードと同時に次のクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-215">You can also identify the safe-timestamp used on the secondary replica by running the following query concurrently with the active read-workload.</span></span>  
  
```  
  
SELECT begin_tsn   
   FROM sys.dm_db_xtp_transactions  
GO  
  
```  
  
###  <a name="read-only-workload-impact"></a><a name="ReadOnlyWorkloadImpact"></a> <span data-ttu-id="5b19d-216">読み取り専用ワークロードの影響</span><span class="sxs-lookup"><span data-stu-id="5b19d-216">Read-Only Workload Impact</span></span>  
 <span data-ttu-id="5b19d-217">セカンダリ レプリカを読み取り専用アクセス用に構成した場合、セカンダリ データベースに対する読み取り専用ワークロードによって (ディスク ベース テーブルに対する読み取り専用ワークロードで大量の I/O が発生する場合には特に)、再実行スレッドの CPU や (ディスク ベース テーブルに対する) I/O などのシステム リソースが消費されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-217">When you configure a secondary replica for read-only access, your read-only workloads on the secondary databases consume system resources, such as CPU and I/O (for disk-based tables) from redo threads, especially if the read-only workloads on disk-based tables are highly I/O-intensive.</span></span> <span data-ttu-id="5b19d-218">すべての行がメモリ内にあるため、メモリ最適化テーブルにアクセスしても IO の影響はありません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-218">There is no IO impact when accessing memory-optimized tables because all the rows reside in memory.</span></span>  
  
 <span data-ttu-id="5b19d-219">また、セカンダリ レプリカの読み取り専用ワークロードによって、ログ レコードを介して適用されるデータ定義言語 (DDL) による変更がブロックされることもあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-219">Also, read-only workloads on the secondary replicas can block data definition language (DDL) changes that are applied through log records.</span></span>  
  
-   <span data-ttu-id="5b19d-220">行のバージョン管理のために、読み取り操作は共有ロックを保持しませんが、スキーマ安定度 (Sch-S) ロックを保持します。これにより、DDL の変更を適用する再実行操作がブロックされることがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-220">Even though the read operations do not take shared locks because of row versioning, these operations take schema stability (Sch-S) locks, which can block redo operations that are applying DDL changes.</span></span> <span data-ttu-id="5b19d-221">DDL 操作にはテーブルおよびビューの ALTER/DROP が含まれますが、ストアド プロシージャの DROP や ALTER は含まれません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-221">DDL operations include ALTER/DROP tables and Views but not DROP or ALTER of stored procedures.</span></span> <span data-ttu-id="5b19d-222">たとえば、プライマリのディスク ベースまたはメモリ最適化テーブルを削除する場合などです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-222">So for example, if you drop a table disk-based or memory-optimized, on primary.</span></span> <span data-ttu-id="5b19d-223">再実行スレッドは、テーブルを削除するためにログ レコードを処理する場合、テーブルに対する SCH_M ロックを取得する必要があります。また、テーブルにアクセスする実行中のクエリによってブロックされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-223">When REDO thread processes the log record to drop the table, it must acquire a SCH_M lock on the table and can get blocked by a running query accessing table.</span></span>  <span data-ttu-id="5b19d-224">この動作は、プライマリ レプリカでも同じです。ただし、テーブルの削除は再実行スレッドではなくユーザー セッションの一部として実行されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-224">This is the same behavior on primary replica except that the drop of the table is done as part of a user session and not REDO thread.</span></span>  
  
-   <span data-ttu-id="5b19d-225">メモリ最適化テーブルに対しては、他にもブロック要素があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-225">There is additional blocking Memory-Optimized Tables.</span></span> <span data-ttu-id="5b19d-226">セカンダリ レプリカで同時実行されているネイティブ ストアド プロシージャがある場合に、ネイティブ ストアド プロシージャを削除すると、再実行スレッドのブロックが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-226">A drop of native stored procedure can cause REDO thread to block if there is a concurrent execution of the native stored procedure on the secondary replica.</span></span> <span data-ttu-id="5b19d-227">この動作は、プライマリ レプリカでも同じです。ただし、ストアド プロシージャの削除は再実行スレッドではなくユーザー セッションの一部として実行されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-227">This is the same behavior on the primary replica except that the drop of the stored procedure is done as part of a user session and not REDO thread.</span></span>  
  
 <span data-ttu-id="5b19d-228">クエリの作成に関するベスト プラクティスを調べて、セカンダリ データベースでベスト プラクティスを実施してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-228">Be aware of best practices around building queries, and exercise those best practices in the secondary databases.</span></span> <span data-ttu-id="5b19d-229">たとえば、データ集計などの実行時間の長いクエリは使用率が低い時間帯にスケジュールするようにします。</span><span class="sxs-lookup"><span data-stu-id="5b19d-229">For example, schedule long-running queries such as aggregations of data during times of low activity.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="5b19d-230">セカンダリ レプリカに対するクエリによって再実行スレッドがブロックされると、 **sqlserver.lock_redo_blocked** XEvent が発生します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-230">If a redo thread is blocked by queries on a secondary replica, the **sqlserver.lock_redo_blocked** XEvent is raised.</span></span>  
  
###  <a name="indexing"></a><a name="bkmk_Indexing"></a> <span data-ttu-id="5b19d-231">インデックス作成</span><span class="sxs-lookup"><span data-stu-id="5b19d-231">Indexing</span></span>  
 <span data-ttu-id="5b19d-232">読み取り可能なセカンダリ レプリカでの読み取り専用ワークロードを最適化するには、セカンダリ データベースのテーブルにインデックスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-232">To optimize read-only workloads on the readable secondary replicas, you may want to create indexes on the tables in the secondary databases.</span></span> <span data-ttu-id="5b19d-233">セカンダリ データベースではスキーマやデータの変更を行えないため、プライマリ データベースでインデックスを作成し、再実行プロセスによってセカンダリ データベースに変更を転送できるようにします。</span><span class="sxs-lookup"><span data-stu-id="5b19d-233">Because you cannot make schema or data changes on the secondary databases, create indexes in the primary databases and allow the changes to transfer to the secondary database through the redo process.</span></span>  
  
 <span data-ttu-id="5b19d-234">セカンダリ レプリカでのインデックス使用状況を監視するには、 **sys.dm_db_index_usage_stats**動的管理ビューの **user_seeks**列、 **user_scans** 列、および [user_lookups](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-usage-stats-transact-sql) 列を照会します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-234">To monitor index usage activity on a secondary replica, query the **user_seeks**, **user_scans**, and **user_lookups** columns of the [sys.dm_db_index_usage_stats](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-index-usage-stats-transact-sql) dynamic management view.</span></span>  
  
###  <a name="statistics-for-read-only-access-databases"></a><a name="Read-OnlyStats"></a> <span data-ttu-id="5b19d-235">読み取り専用アクセス データベースの統計</span><span class="sxs-lookup"><span data-stu-id="5b19d-235">Statistics for Read-Only Access Databases</span></span>  
 <span data-ttu-id="5b19d-236">テーブルとインデックス付きビューの列の統計情報を使用して、クエリ プランを最適化します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-236">Statistics on columns of tables and indexed views are used to optimize query plans.</span></span> <span data-ttu-id="5b19d-237">可用性グループの場合、プライマリ データベースで作成および管理される統計は、トランザクション ログ レコードの適用の一部としてセカンダリ データベースに自動的に保存されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-237">For availability groups, statistics that are created and maintained on the primary databases are automatically persisted on the secondary databases as part of applying the transaction log records.</span></span> <span data-ttu-id="5b19d-238">ただし、セカンダリ データベースの読み取り専用ワークロードについて、プライマリ データベースで作成される統計とは別の統計が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-238">However, the read-only workload on the secondary databases may need different statistics than those that are created on the primary databases.</span></span> <span data-ttu-id="5b19d-239">しかし、セカンダリ データベースは読み取り専用アクセスに制限されているため、セカンダリ データベースで統計を作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-239">However, because secondary databases are restricted to read-only access, statistics cannot be created on the secondary databases.</span></span>  
  
 <span data-ttu-id="5b19d-240">この問題に対処するために、セカンダリ レプリカでは、セカンダリ データベースの一時的な統計を、 **tempdb**に作成して管理します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-240">To address this problem, the secondary replica creates and maintains temporary statistics for secondary databases in **tempdb**.</span></span> <span data-ttu-id="5b19d-241">一時的な統計と、(プライマリ データベースで作成されてセカンダリ データベースに保存される) 永続的な統計とを区別するために、サフィックス _readonly_database_statistic が一時的な統計の名前に付加されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-241">The suffix _readonly_database_statistic is appended to the name of temporary statistics to differentiate them from the permanent statistics that are persisted from the primary database.</span></span>  
  
 <span data-ttu-id="5b19d-242">一時的な統計を作成して更新できるのは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のみです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-242">Only [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can create and update temporary statistics.</span></span> <span data-ttu-id="5b19d-243">ただし、永続的な統計の場合と同じツールを使用すると、一時的な統計を削除したり、そのプロパティを監視したりできます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-243">However, you can delete temporary statistics and monitor their properties using the same tools that you use for permanent statistics:</span></span>  
  
-   <span data-ttu-id="5b19d-244">[DROP STATISTICS](/sql/t-sql/statements/drop-statistics-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] ステートメントを使用して一時的な統計を削除します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-244">Delete temporary statistics using the [DROP STATISTICS](/sql/t-sql/statements/drop-statistics-transact-sql)[!INCLUDE[tsql](../../../includes/tsql-md.md)] statement.</span></span>  
  
-   <span data-ttu-id="5b19d-245">**sys.stats** カタログ ビューと **sys.stats_columns** カタログ ビューを使用して統計を監視します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-245">Monitor statistics using the **sys.stats** and **sys.stats_columns** catalog views.</span></span> <span data-ttu-id="5b19d-246">**sys_stats** には、どの統計が一時的または永続的なものかを示すための **is_temporary**列が含まれています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-246">**sys_stats** includes a column, **is_temporary**, to indicate which statistics are permanent and which are temporary.</span></span>  
  
 <span data-ttu-id="5b19d-247">プライマリ レプリカまたはセカンダリ レプリカ上のメモリ最適化テーブルでは、自動統計更新がサポートされません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-247">There is no support for auto-statistics update for memory-optimized tables on the primary or secondary replica.</span></span> <span data-ttu-id="5b19d-248">セカンダリ レプリカに対するクエリ パフォーマンスとプランを監視し、必要であれば、プライマリ レプリカの統計を手動で更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-248">You must monitor query performance and plans on the secondary replica and manually update the statistics on the primary replica when needed.</span></span> <span data-ttu-id="5b19d-249">ただし、不足している統計は、プライマリ レプリカとセカンダリ レプリカについて自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-249">However, the missing statistics are automatically created both on primary and secondary replica.</span></span>  
  
 <span data-ttu-id="5b19d-250">SQL Server の統計の詳細については、「 [統計](../../../relational-databases/statistics/statistics.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-250">For more information about SQL Server statistics, see [Statistics](../../../relational-databases/statistics/statistics.md).</span></span>  
  

  
####  <a name="stale-permanent-statistics-on-secondary-databases"></a><a name="StalePermStats"></a> <span data-ttu-id="5b19d-251">セカンダリ データベースの古い永続的な統計</span><span class="sxs-lookup"><span data-stu-id="5b19d-251">Stale Permanent Statistics on Secondary Databases</span></span>  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="5b19d-252">によって検出されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-252">detects when permanent statistics on a secondary database are stale.</span></span> <span data-ttu-id="5b19d-253">しかし、プライマリ データベースで変更する以外は、永続的な統計に変更を加えることはできません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-253">But changes cannot be made to the permanent statistics except through changes on the primary database.</span></span> <span data-ttu-id="5b19d-254">クエリの最適化のために、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] はセカンダリ データベースのディスク ベース テーブルに一時的な統計を作成し、古い永続的な統計の代わりにこの統計を使用します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-254">For query optimization, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] creates temporary statistics for disk-based tables on the secondary database and uses these statistics instead of the stale permanent statistics.</span></span>  
  
 <span data-ttu-id="5b19d-255">永続的な統計がプライマリ データベースで更新されると、統計は自動的にセカンダリ データベースに永続化されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-255">When the permanent statistics are updated on the primary database, they are automatically persisted to the secondary database.</span></span> <span data-ttu-id="5b19d-256">次に、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] は、一時的な統計よりも新しい、更新された永続的な統計を使用します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-256">Then [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] uses the updated permanent statistics, which are more current than the temporary statistics.</span></span>  
  
 <span data-ttu-id="5b19d-257">可用性グループのフェールオーバーが発生すると、すべてのセカンダリ レプリカで一時的な統計が削除されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-257">If the availability group fails over, temporary statistics are deleted on all of the secondary replicas.</span></span>  
  
####  <a name="limitations-and-restrictions"></a><a name="StatsLimitationsRestrictions"></a> <span data-ttu-id="5b19d-258">制限事項と制約事項</span><span class="sxs-lookup"><span data-stu-id="5b19d-258">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="5b19d-259">一時的な統計は **tempdb**に格納されるので、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービスを再起動すると、一時的な統計はすべてなくなります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-259">Because temporary statistics are stored in **tempdb**, a restart of the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service causes all temporary statistics to disappear.</span></span>  
  
-   <span data-ttu-id="5b19d-260">サフィックス _readonly_database_statistic は、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]によって生成される統計用に予約されています。</span><span class="sxs-lookup"><span data-stu-id="5b19d-260">The suffix _readonly_database_statistic is reserved for statistics generated by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="5b19d-261">このサフィックスは、プライマリ データベースで統計を作成するときには使用できません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-261">You cannot use this suffix when creating statistics on a primary database.</span></span> <span data-ttu-id="5b19d-262">詳細については、[統計](../../../relational-databases/statistics/statistics.md)に関する記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-262">For more information, see [Statistics](../../../relational-databases/statistics/statistics.md).</span></span>  
  
##  <a name="accessing-memory-optimized-tables-on-a-secondary-replica"></a><a name="bkmk_AccessInMemTables"></a> <span data-ttu-id="5b19d-263">セカンダリ レプリカ上でのメモリ最適化テーブルへのアクセス</span><span class="sxs-lookup"><span data-stu-id="5b19d-263">Accessing memory-optimized tables on a Secondary Replica</span></span>  
 <span data-ttu-id="5b19d-264">セカンダリ レプリカでの読み取りワークロードの分離レベルは、プライマリ レプリカで許可されているもののみです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-264">The read workload isolation levels on secondary replica are only those allowed on the primary replica.</span></span> <span data-ttu-id="5b19d-265">セカンダリ レプリカでは、分離レベルのマッピングが行われません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-265">There is no mapping of isolations levels done on the secondary replica.</span></span> <span data-ttu-id="5b19d-266">このことにより、プライマリ レプリカで実行できるレポート ワークロードを、セカンダリ レプリカでも変更せずに実行できます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-266">This ensure that any reporting workload that can be run on primary replica is able to run on the secondary replica without requiring any changes.</span></span> <span data-ttu-id="5b19d-267">このため、プライマリ レプリカのレポート ワークロードのセカンダリ レプリカへの移行や、セカンダリ レプリカを使用できない場合にその逆を実行することが、容易に行うことができます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-267">This makes it easy for you to migrate a reporting workload from the primary replica to a secondary or vice versa when the secondary replica is not available.</span></span>  
  
 <span data-ttu-id="5b19d-268">次のクエリは、プライマリ レプリカで実行できないように、セカンダリ レプリカでも実行できません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-268">The following queries fail to run on the secondary replica similarly to the way they fail on the primary replica.</span></span>  
  
-   <span data-ttu-id="5b19d-269">メモリ最適化テーブルでのみ実行されるクエリの場合、サポートされている分離レベルは SNAPSHOT、REPEATABLE READ、および SERIALIZABLE のみです。</span><span class="sxs-lookup"><span data-stu-id="5b19d-269">For queries running only on memory-optimized tables, the only supported isolation levels are snapshot, repeatable read, and serializable.</span></span> <span data-ttu-id="5b19d-270">データベース レベルで MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT オプションを有効にしていなければ、READ UNCOMMITTED または READ COMMITTED 分離レベルのクエリではエラーが返されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-270">Any queries with read-uncommitted or read committed isolation level returns an error unless you have enabled the option MEMORY_OPTIMIZED_ELEVATE_TO_SNAPSHOT at the database level.</span></span>  
  
    ```sql  
    SET TRANSACTION ISOLATION LEVEL READ_COMMITTED  
    -- This is not allowed  
    BEGIN TRAN  
    SELECT * FROM t_hk  
    COMMIT  
  
    ```  
  
     <span data-ttu-id="5b19d-271">エラー メッセージ:</span><span class="sxs-lookup"><span data-stu-id="5b19d-271">Error message:</span></span>  
  
    ```  
    Msg 41368, Level 16, State 0, Line 2  
    Accessing memory optimized tables using the CREAD_COMMITTED isolation level is supported only for autocommit transactions. It is not supported for explicit or implicit transactions. Provide a supported isolation level for the memory optimized table using a table hing, such as WITH (SNAPSHOT).  
    ```  
  
-   <span data-ttu-id="5b19d-272">メモリ最適化テーブルでロック ヒントはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-272">No locking hints are supported on memory-optimized tables.</span></span> <span data-ttu-id="5b19d-273">たとえば、次のクエリはすべて、エラーが発生し失敗します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-273">For example, all of the following queries fail with an error.</span></span> <span data-ttu-id="5b19d-274">NOLOCK ヒントのみ使用でき、メモリ最適化テーブルとの使用では NOOP になります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-274">Only NOLOCK hint is allowed and it is NOOP when used with memory-optimized tables.</span></span>  
  
    ```sql  
    SELECT * FROM t_hk WITH (PAGLOCK)  
    SELECT * FROM t_hk WITH (READPAST)  
    SELECT * FROM t_hk WITH (ROWLOCK)  
    SELECT * FROM t_hk WITH (READPAST)  
    SELECT * FROM t_hk WITH (TABLOCK)  
    SELECT * FROM t_hk WITH (XLOCK)  
    SELECT * FROM t_hk WITH (UPDLOCK)  
    ```  
  
-   <span data-ttu-id="5b19d-275">複数コンテナーにまたがるトランザクションでは、メモリ最適化テーブルにアクセスするセッション分離レベル "snapshot" を持つトランザクションはサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-275">For cross-container transactions, transactions with session isolation level "snapshot" that access memory-optimized tables is not supported.</span></span> <span data-ttu-id="5b19d-276">たとえば、</span><span class="sxs-lookup"><span data-stu-id="5b19d-276">For example,</span></span>  
  
    ```sql  
    SET TRANSACTION ISOLATION LEVEL SNAPSHOT  
    -- This is not allowed  
    BEGIN TRAN  
       SELECT * FROM t_hk  
    COMMIT  
    ```  
  
     <span data-ttu-id="5b19d-277">エラー メッセージ:</span><span class="sxs-lookup"><span data-stu-id="5b19d-277">Error message:</span></span>  
  
    ```  
    Msg 41332, Level 16, State 0, Line 5  
    Memory optimized tables and natively compiled stored procedures cannot be accessed or created when the session TRANSACTION ISOLATION LEVEL is set to SNAPSHOT.  
    ```  
  
##  <a name="capacity-planning-considerations"></a><a name="bkmk_CapacityPlanning"></a> <span data-ttu-id="5b19d-278">キャパシティ プランニングの注意点</span><span class="sxs-lookup"><span data-stu-id="5b19d-278">Capacity Planning Considerations</span></span>  
  
-   <span data-ttu-id="5b19d-279">ディスク ベース テーブルの場合、読み取り可能なセカンダリ レプリカでは、2 つの理由から **tempdb** に領域が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-279">In the case of disk-based tables, readable secondary replicas can require space in **tempdb** for two reasons:</span></span>  
  
    -   <span data-ttu-id="5b19d-280">スナップショット分離レベルは行バージョンを **tempdb**にコピーします。</span><span class="sxs-lookup"><span data-stu-id="5b19d-280">Snapshot isolation level copies row versions into **tempdb**.</span></span>  
  
    -   <span data-ttu-id="5b19d-281">セカンダリ データベースの一時的な統計が **tempdb**に作成されて管理されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-281">Temporary statistics for secondary databases are created and maintained in **tempdb**.</span></span> <span data-ttu-id="5b19d-282">一時的な統計により、 **tempdb**のサイズが多少増加することがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-282">The temporary statistics can cause a slight increase in the size of **tempdb**.</span></span> <span data-ttu-id="5b19d-283">詳細については、このセクションの後の「 [読み取り専用アクセス データベースの統計](#Read-OnlyStats)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="5b19d-283">For more information, see [Statistics for Read-Only Access Databases](#Read-OnlyStats), later in this section.</span></span>  
  
-   <span data-ttu-id="5b19d-284">1 つまたは複数のセカンダリ レプリカに対して読み取りアクセスを構成した場合、ディスク ベース テーブルについてセカンダリ データベースに行バージョンのポインターを格納するために、プライマリ データベースでデータ行の削除、変更、または挿入ごとに 14 バイトのオーバーヘッドが生成されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-284">When you configure read-access for one or more secondary replicas, the primary databases add 14 bytes of overhead on deleted, modified, or inserted data rows to store pointers to row versions on the secondary databases for disk-based tables.</span></span> <span data-ttu-id="5b19d-285">この 14 バイトのオーバーヘッドはセカンダリ データベースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-285">This 14-byte overhead is carried over to the secondary databases.</span></span> <span data-ttu-id="5b19d-286">14 バイトのオーバーヘッドがデータ行に追加されるため、ページ分割が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-286">As the 14-byte overhead is added to data rows, page splits might occur.</span></span>  
  
     <span data-ttu-id="5b19d-287">行バージョンのデータはプライマリ データベースでは生成されません。</span><span class="sxs-lookup"><span data-stu-id="5b19d-287">The row version data is not generated by the primary databases.</span></span> <span data-ttu-id="5b19d-288">代わりに、セカンダリ データベースで行バージョンが生成されます。</span><span class="sxs-lookup"><span data-stu-id="5b19d-288">Instead, the secondary databases generate the row versions.</span></span> <span data-ttu-id="5b19d-289">ただし、行のバージョン管理により、プライマリ データベースとセカンダリ データベースの両方でデータ ストレージが増加します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-289">However, row versioning increases data storage in both the primary and secondary databases.</span></span>  
  
     <span data-ttu-id="5b19d-290">行バージョン データの追加の有無は、プライマリ データベースのスナップショット分離または READ COMMITTED スナップショット分離 (RCSI) レベル設定によって決まります。</span><span class="sxs-lookup"><span data-stu-id="5b19d-290">The addition of the row version data depends on the snapshot isolation or read-committed snapshot isolation (RCSI) level setting on the primary database.</span></span> <span data-ttu-id="5b19d-291">次の表では、ディスク ベース テーブルについて、読み取り可能なセカンダリ データベースでのバージョン管理の動作を設定別に説明します。</span><span class="sxs-lookup"><span data-stu-id="5b19d-291">The table below describes the behavior of versioning on a readable secondary database under different settings for disk based tables.</span></span>  
  
    |<span data-ttu-id="5b19d-292">セカンダリ レプリカは読み取り可能かどうか</span><span class="sxs-lookup"><span data-stu-id="5b19d-292">Readable secondary replica?</span></span>|<span data-ttu-id="5b19d-293">スナップショット分離または RCSI レベルは有効かどうか</span><span class="sxs-lookup"><span data-stu-id="5b19d-293">Snapshot isolation or RCSI level enabled?</span></span>|<span data-ttu-id="5b19d-294">プライマリ データベース</span><span class="sxs-lookup"><span data-stu-id="5b19d-294">Primary Database</span></span>|<span data-ttu-id="5b19d-295">セカンダリ データベース</span><span class="sxs-lookup"><span data-stu-id="5b19d-295">Secondary Database</span></span>|  
    |---------------------------------|-----------------------------------------------|----------------------|------------------------|  
    |<span data-ttu-id="5b19d-296">いいえ</span><span class="sxs-lookup"><span data-stu-id="5b19d-296">No</span></span>|<span data-ttu-id="5b19d-297">いいえ</span><span class="sxs-lookup"><span data-stu-id="5b19d-297">No</span></span>|<span data-ttu-id="5b19d-298">行のバージョンまたは 14 バイトのオーバーヘッドなし</span><span class="sxs-lookup"><span data-stu-id="5b19d-298">No row versions or 14-byte overhead</span></span>|<span data-ttu-id="5b19d-299">行のバージョンまたは 14 バイトのオーバーヘッドなし</span><span class="sxs-lookup"><span data-stu-id="5b19d-299">No row versions or 14-byte overhead</span></span>|  
    |<span data-ttu-id="5b19d-300">いいえ</span><span class="sxs-lookup"><span data-stu-id="5b19d-300">No</span></span>|<span data-ttu-id="5b19d-301">はい</span><span class="sxs-lookup"><span data-stu-id="5b19d-301">Yes</span></span>|<span data-ttu-id="5b19d-302">行のバージョンおよび 14 バイトのオーバーヘッド</span><span class="sxs-lookup"><span data-stu-id="5b19d-302">Row versions and 14-byte overhead</span></span>|<span data-ttu-id="5b19d-303">行のバージョンはないが、14 バイトのオーバーヘッドあり</span><span class="sxs-lookup"><span data-stu-id="5b19d-303">No row versions, but 14-byte overhead</span></span>|  
    |<span data-ttu-id="5b19d-304">はい</span><span class="sxs-lookup"><span data-stu-id="5b19d-304">Yes</span></span>|<span data-ttu-id="5b19d-305">いいえ</span><span class="sxs-lookup"><span data-stu-id="5b19d-305">No</span></span>|<span data-ttu-id="5b19d-306">行のバージョンはないが、14 バイトのオーバーヘッドあり</span><span class="sxs-lookup"><span data-stu-id="5b19d-306">No row versions, but 14-byte overhead</span></span>|<span data-ttu-id="5b19d-307">行のバージョンおよび 14 バイトのオーバーヘッド</span><span class="sxs-lookup"><span data-stu-id="5b19d-307">Row versions and 14-byte overhead</span></span>|  
    |<span data-ttu-id="5b19d-308">はい</span><span class="sxs-lookup"><span data-stu-id="5b19d-308">Yes</span></span>|<span data-ttu-id="5b19d-309">はい</span><span class="sxs-lookup"><span data-stu-id="5b19d-309">Yes</span></span>|<span data-ttu-id="5b19d-310">行のバージョンおよび 14 バイトのオーバーヘッド</span><span class="sxs-lookup"><span data-stu-id="5b19d-310">Row versions and 14-byte overhead</span></span>|<span data-ttu-id="5b19d-311">行のバージョンおよび 14 バイトのオーバーヘッド</span><span class="sxs-lookup"><span data-stu-id="5b19d-311">Row versions and 14-byte overhead</span></span>|  
  
##  <a name="related-tasks"></a><a name="bkmk_RelatedTasks"></a> <span data-ttu-id="5b19d-312">関連タスク</span><span class="sxs-lookup"><span data-stu-id="5b19d-312">Related Tasks</span></span>  
  
-   [<span data-ttu-id="5b19d-313">可用性レプリカでの読み取り専用アクセスの構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5b19d-313">Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;</span></span>](configure-read-only-access-on-an-availability-replica-sql-server.md)  
  
-   [<span data-ttu-id="5b19d-314">可用性グループの読み取り専用ルーティングの構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5b19d-314">Configure Read-Only Routing for an Availability Group &#40;SQL Server&#41;</span></span>](configure-read-only-routing-for-an-availability-group-sql-server.md)  
  
-   [<span data-ttu-id="5b19d-315">可用性グループ リスナーの作成または構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5b19d-315">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](create-or-configure-an-availability-group-listener-sql-server.md)  
  
-   [<span data-ttu-id="5b19d-316">可用性グループの監視 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="5b19d-316">Monitor Availability Groups &#40;Transact-SQL&#41;</span></span>](monitor-availability-groups-transact-sql.md)  
  
-   [<span data-ttu-id="5b19d-317">可用性レプリカのプロパティの表示 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="5b19d-317">View Availability Replica Properties &#40;SQL Server&#41;</span></span>](view-availability-replica-properties-sql-server.md)  
  
-   <span data-ttu-id="5b19d-318">[[新しい可用性グループ] ダイアログ ボックスの使用 &#40;SQL Server Management Studio&#41;](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)</span><span class="sxs-lookup"><span data-stu-id="5b19d-318">[Use the New Availability Group Dialog Box &#40;SQL Server Management Studio&#41;](use-the-new-availability-group-dialog-box-sql-server-management-studio.md)</span></span>  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="5b19d-319">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="5b19d-319">Related Content</span></span>  
  
-   [<span data-ttu-id="5b19d-320">SQL Server AlwaysOn チームのブログ: AlwaysOn チームの公式 SQL Server のブログ</span><span class="sxs-lookup"><span data-stu-id="5b19d-320">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
## <a name="see-also"></a><span data-ttu-id="5b19d-321">参照</span><span class="sxs-lookup"><span data-stu-id="5b19d-321">See Also</span></span>  
 <span data-ttu-id="5b19d-322">[AlwaysOn 可用性グループ &#40;SQL Server の概要&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="5b19d-322">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="5b19d-323">[可用性レプリカに対するクライアント接続アクセスについて &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="5b19d-323">[About Client Connection Access to Availability Replicas &#40;SQL Server&#41;](about-client-connection-access-to-availability-replicas-sql-server.md) </span></span>  
 <span data-ttu-id="5b19d-324">[可用性グループ リスナー、クライアント接続、およびアプリケーションのフェールオーバー &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span><span class="sxs-lookup"><span data-stu-id="5b19d-324">[Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../listeners-client-connectivity-application-failover.md) </span></span>  
 [<span data-ttu-id="5b19d-325">統計</span><span class="sxs-lookup"><span data-stu-id="5b19d-325">Statistics</span></span>](../../../relational-databases/statistics/statistics.md)  
  
  
