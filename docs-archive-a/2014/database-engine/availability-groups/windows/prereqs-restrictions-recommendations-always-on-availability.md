---
title: AlwaysOn 可用性グループの前提条件、制限事項、および推奨事項 (SQL Server) |Microsoft Docs
ms.custom: ''
ms.date: 06/14/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- Availability Groups [SQL Server], server instance
- Availability Groups [SQL Server], deploying
- Availability Groups [SQL Server], WSFC clusters
- Availability Groups [SQL Server], about
- Availability Groups [SQL Server], prerequisites and restrictions
- Availability Groups [SQL Server], Failover Cluster Instances
- Availability Groups [SQL Server], databases
- Availability Groups [SQL Server]
ms.assetid: edbab896-42bb-4d17-8d75-e92ca11f7abb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 078f38058c612037a8013f7955349e94d6db610e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740501"
---
# <a name="prerequisites-restrictions-and-recommendations-for-alwayson-availability-groups-sql-server"></a><span data-ttu-id="7368c-102">AlwaysOn 可用性グループの前提条件、制限事項、および推奨事項 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7368c-102">Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups (SQL Server)</span></span>
  <span data-ttu-id="7368c-103">このトピックでは、 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]の展開に関して、各種コンポーネント (ホスト コンピューター、Windows Server フェールオーバー クラスタリング (WSFC) クラスター、サーバー インスタンス、可用性グループ) の前提条件、制限、推奨事項などの考慮事項について説明します。</span><span class="sxs-lookup"><span data-stu-id="7368c-103">This topic describes considerations for deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], including prerequisites, restrictions, and recommendations for host computers, Windows Server Failover Clustering (WSFC) clusters, server instances, and availability groups.</span></span> <span data-ttu-id="7368c-104">各コンポーネントのセキュリティに関する考慮事項のほか、要求される権限 (該当する場合) にも触れています。</span><span class="sxs-lookup"><span data-stu-id="7368c-104">For each of these components security considerations and required permissions, if any, are indicated.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7368c-105">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]を配置する前に、このトピックのすべてのセクションを読むことを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-105">Before you deploy [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], we strongly recommend that you read every section of this topic.</span></span>  
  
 
  
##  <a name="net-hotfixes-that-support-alwayson-availability-groups"></a><a name="DotNetHotfixes"></a><span data-ttu-id="7368c-106">AlwaysOn 可用性グループをサポートする .NET 修正プログラム</span><span class="sxs-lookup"><span data-stu-id="7368c-106">.NET Hotfixes that Support AlwaysOn Availability Groups</span></span>  
 <span data-ttu-id="7368c-107">[!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]で使用するコンポーネントと機能によっては [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 、次の表で示されている追加の .net 修正プログラムのインストールが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-107">Depending on the [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] components and features you will use with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], you may need to install additional .NET hotfixes identified in the following table.</span></span> <span data-ttu-id="7368c-108">これらの修正プログラムは任意の順序でインストールできます。</span><span class="sxs-lookup"><span data-stu-id="7368c-108">The hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="7368c-109">依存機能</span><span class="sxs-lookup"><span data-stu-id="7368c-109">Dependent Feature</span></span>|<span data-ttu-id="7368c-110">修正プログラム</span><span class="sxs-lookup"><span data-stu-id="7368c-110">Hotfix</span></span>|<span data-ttu-id="7368c-111">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-111">Link</span></span>|  
|------|-----------------------|------------|----------|  
|<span data-ttu-id="7368c-112">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-112">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|[!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)]|<span data-ttu-id="7368c-113">.NET 3.5 SP1 の修正プログラムでは、SQL クライアントに読み取り目的、readonly、および multisubnetfailover の AlwaysOn 機能のサポートが追加されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-113">Hotfix for .NET 3.5 SP1 adds support to SQL Client for AlwaysOn features of Read-intent, readonly, and multisubnetfailover.</span></span> <span data-ttu-id="7368c-114">修正プログラムは、各 [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] レポート サーバーにインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-114">The hotfix needs to be installed on each [!INCLUDE[ssRSnoversion](../../../includes/ssrsnoversion-md.md)] report server.</span></span>|<span data-ttu-id="7368c-115">KB 2654347: [AlwaysOn 機能のサポートを追加する .net 3.5 SP1 の修正プログラム](https://go.microsoft.com/fwlink/?LinkId=242896)</span><span class="sxs-lookup"><span data-stu-id="7368c-115">KB 2654347: [Hotfix for .NET 3.5 SP1 to add support for AlwaysOn features](https://go.microsoft.com/fwlink/?LinkId=242896)</span></span>|  
  
##  <a name="windows-system-requirements-and-recommendations"></a><a name="SystemReqsForAOAG"></a><span data-ttu-id="7368c-116">Windows のシステム要件と推奨事項</span><span class="sxs-lookup"><span data-stu-id="7368c-116">Windows System Requirements and Recommendations</span></span>  
  
  
###  <a name="checklist-requirements-windows-system"></a><a name="SystemRequirements"></a> <span data-ttu-id="7368c-117">チェック リスト:要件 (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-117">Checklist: Requirements (Windows System)</span></span>  
 <span data-ttu-id="7368c-118">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] の機能を利用するには、1 つまたは複数の可用性グループに参加するすべてのコンピューターが、次の基本要件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-118">To support the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature, ensure that every computer that is to participate in one or more availability groups meets the following fundamental requirements:</span></span>  
  
||<span data-ttu-id="7368c-119">要件</span><span class="sxs-lookup"><span data-stu-id="7368c-119">Requirement</span></span>|<span data-ttu-id="7368c-120">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-120">Link</span></span>|  
|------|-----------------|----------|  
|<span data-ttu-id="7368c-121">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-121">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-122">システムがドメイン コントローラーではないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-122">Ensure that the system is not a domain controller.</span></span>|<span data-ttu-id="7368c-123">可用性グループは、ドメイン コントローラーではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="7368c-123">Availability groups are not supported on domain controllers.</span></span>|  
|<span data-ttu-id="7368c-124">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-124">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-125">すべてのコンピューターで x86 (WOW64 は不可) または x64 Windows Server 2008 以降のバージョンが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-125">Ensure that each computer is running either x86 (non-WOW64) or x64 Windows Server 2008 or later versions.</span></span>|<span data-ttu-id="7368c-126">WOW64 (Windows 64 ビット上の Windows 32 ビット) では、[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]がサポートされません。</span><span class="sxs-lookup"><span data-stu-id="7368c-126">WOW64 (Windows 32-bit on Windows 64-bit) does not support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>|  
|<span data-ttu-id="7368c-127">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-127">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-128">すべてのコンピューターが、Windows Server フェールオーバー クラスタリング (WSFC) クラスター内のノードであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-128">Ensure that each computer is a node in a Windows Server Failover Clustering (WSFC) cluster.</span></span>|[<span data-ttu-id="7368c-129">Windows Server フェールオーバー クラスタリング &#40;WSFC&#41; と SQL Server</span><span class="sxs-lookup"><span data-stu-id="7368c-129">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)|  
|<span data-ttu-id="7368c-130">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-130">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-131">必要な可用性グループの構成に耐える十分なノードが WSFC クラスターに存在することを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-131">Ensure that the WSFC cluster contains sufficient nodes to support your availability group configurations.</span></span>|<span data-ttu-id="7368c-132">WSFC ノードは、1 つの可用性グループにつき 1 つだけ可用性レプリカをホストすることができます。</span><span class="sxs-lookup"><span data-stu-id="7368c-132">A WSFC node can host only one availability replica for a given availability group.</span></span> <span data-ttu-id="7368c-133">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] インスタンスは、特定の WSFC ノード上で複数の可用性グループの可用性レプリカをホストできます。</span><span class="sxs-lookup"><span data-stu-id="7368c-133">On a given WSFC node, one or more instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] can host availability replicas for many availability groups.</span></span><br /><br /> <span data-ttu-id="7368c-134">予定している可用性グループの可用性レプリカをサポートするために必要な WSFC ノードの数については、データベース管理者にお問い合わせください。</span><span class="sxs-lookup"><span data-stu-id="7368c-134">Ask your database administrators how many WSFC nodes are required for to support the availability replicas of the planned availability groups.</span></span><br /><br /> <span data-ttu-id="7368c-135">[AlwaysOn 可用性グループ &#40;SQL Server&#41;の概要](overview-of-always-on-availability-groups-sql-server.md)。</span><span class="sxs-lookup"><span data-stu-id="7368c-135">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>|  
|<span data-ttu-id="7368c-136">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-136">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-137">すべての適用可能な Windows 修正プログラムが WSFC クラスター内のすべてのノードにインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-137">Ensure that all applicable Window hotfixes have been installed on every node in the WSFC cluster.</span></span>|<span data-ttu-id="7368c-138">重要いくつかの修正プログラムが必要か、またはをデプロイする WSFC クラスターのノードに推奨されます。 \*\* \* \* \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="7368c-138">**\*\* Important \*\*** A number of hotfixes are required or recommended for the nodes of a WSFC cluster on which [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is being deployed.</span></span> <span data-ttu-id="7368c-139">詳細については、後の「[AlwaysOn 可用性グループをサポートする Windows 修正プログラム (Windows システム)](#WinHotfixes)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-139">For more information, see [Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)](#WinHotfixes), later in this section.</span></span>|  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7368c-140">可用性グループへの接続に必要な構成が環境に対して正しく実施されていることも確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-140">Also ensure that your environment is correctly configured for connecting to an availability group.</span></span> <span data-ttu-id="7368c-141">詳細については、「 [AlwaysOn クライアント接続 (SQL Server)](always-on-client-connectivity-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-141">For more information, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
####  <a name="windows-hotfixes-that-support-alwayson-availability-groups-windows-system"></a><a name="WinHotfixes"></a><span data-ttu-id="7368c-142">AlwaysOn 可用性グループをサポートする windows 修正プログラム (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-142">Windows Hotfixes that Support AlwaysOn Availability Groups (Windows System)</span></span>  
 <span data-ttu-id="7368c-143">クラスター トポロジに応じて、[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] をサポートするために Windows Server 2008 Service Pack 2 (SP2) または Windows Server 2008 R2 のいくつかの追加の修正プログラムを適用できます。</span><span class="sxs-lookup"><span data-stu-id="7368c-143">Depending on your cluster topology, several additional Windows Server 2008 Service Pack 2 (SP2) or Windows Server 2008 R2 hotfixes might be applicable for supporting [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="7368c-144">次の表で、これらの修正プログラムを示します。</span><span class="sxs-lookup"><span data-stu-id="7368c-144">The following table identifies these hotfixes.</span></span> <span data-ttu-id="7368c-145">これらの修正プログラムは任意の順序でインストールできます。</span><span class="sxs-lookup"><span data-stu-id="7368c-145">They hotfixes can be installed in any order.</span></span>  
  
||<span data-ttu-id="7368c-146">Windows 2008 SP2 への適用</span><span class="sxs-lookup"><span data-stu-id="7368c-146">Applies to Windows 2008 SP2</span></span>|<span data-ttu-id="7368c-147">Windows 2008 R2 SP1 への適用</span><span class="sxs-lookup"><span data-stu-id="7368c-147">Applies to Windows 2008 R2 SP1</span></span>|<span data-ttu-id="7368c-148">Windows 2012 に含まれている</span><span class="sxs-lookup"><span data-stu-id="7368c-148">Included in Windows 2012</span></span>|<span data-ttu-id="7368c-149">サポート対象...</span><span class="sxs-lookup"><span data-stu-id="7368c-149">To Support...</span></span>|<span data-ttu-id="7368c-150">修正プログラム</span><span class="sxs-lookup"><span data-stu-id="7368c-150">Hotfix</span></span>|<span data-ttu-id="7368c-151">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-151">Link</span></span>|  
|------|---------------------------------|------------------------------------|------------------------------|-----------------|------------|----------|  
|<span data-ttu-id="7368c-152">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-152">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-153">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-153">Yes</span></span>|<span data-ttu-id="7368c-154">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-154">Yes</span></span>|<span data-ttu-id="7368c-155">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-155">Yes</span></span>|<span data-ttu-id="7368c-156">**最適な WSFC クォーラムの構成**</span><span class="sxs-lookup"><span data-stu-id="7368c-156">**Configuring optimal WSFC quorum**</span></span>|<span data-ttu-id="7368c-157">サポート技術情報の記事 2494036 に記載されている修正プログラムが、各 WSFC ノードにインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-157">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2494036 is installed.</span></span><br /><br /> <span data-ttu-id="7368c-158">この修正プログラムは、非自動フェールオーバー ターゲットでの最適なクォーラム構成をサポートします。</span><span class="sxs-lookup"><span data-stu-id="7368c-158">This hotfix supports configuring optimal quorum with non-automatic failover targets.</span></span> <span data-ttu-id="7368c-159">投票するノードを自分で選択できるようにすることで、マルチサイト クラスターの改善を図ります。</span><span class="sxs-lookup"><span data-stu-id="7368c-159">This functionality improves multi-site clusters by enabling you to select which nodes vote.</span></span>|<span data-ttu-id="7368c-160">KB 2494036:  [クォーラムの投票のないクラスター ノードを Windows Server 2008 および Windows Server 2008 R2 で構成できる修正プログラムを公開](https://support.microsoft.com/kb/2494036)</span><span class="sxs-lookup"><span data-stu-id="7368c-160">KB 2494036:  [A hotfix is available to let you configure a cluster node that does not have quorum votes in Windows Server 2008 and in Windows Server 2008 R2](https://support.microsoft.com/kb/2494036)</span></span><br /><br /> <span data-ttu-id="7368c-161">クォーラムの投票の詳細については、「[WSFC クォーラム モードと投票構成 &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-161">For information about quorum voting, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/wsfc-quorum-modes-and-voting-configuration-sql-server.md)</span></span>|  
|<span data-ttu-id="7368c-162">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-162">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-163">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-163">Yes</span></span>|<span data-ttu-id="7368c-164">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-164">Yes</span></span>|<span data-ttu-id="7368c-165">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-165">Yes</span></span>|<span data-ttu-id="7368c-166">**ネットワーク帯域幅の効率的な使用**</span><span class="sxs-lookup"><span data-stu-id="7368c-166">**More efficient use of network bandwidth**</span></span>|<span data-ttu-id="7368c-167">サポート技術情報の記事 2616514 に記載されている修正プログラムが、各 WSFC ノードにインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-167">On each WSFC node, ensure that the hotfix described in Knowledge Base article 2616514 is installed.</span></span><br /><br /> <span data-ttu-id="7368c-168">この修正プログラムがないと、クラスター サービスはクラスター ノード間で不要なレジストリ通知を送信します。</span><span class="sxs-lookup"><span data-stu-id="7368c-168">Without this hotfix, the Cluster service sends unnecessary registry notifications among cluster nodes.</span></span> <span data-ttu-id="7368c-169">この動作によりネットワークの帯域幅が制限され、 [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)]にとって深刻な問題となります。</span><span class="sxs-lookup"><span data-stu-id="7368c-169">This behavior limits network bandwidth, which is a serious issue for [!INCLUDE[ssHADRc](../../../includes/sshadrc-md.md)].</span></span>|<span data-ttu-id="7368c-170">KB 2616514:  [クラスター サービスは、Windows Server 2008 または Windows Server 2008 R2 のクラスター ノード間で不要なレジストリ キー変更通知を送信する](https://support.microsoft.com/kb/2616514)</span><span class="sxs-lookup"><span data-stu-id="7368c-170">KB 2616514:  [Cluster service sends unnecessary registry key change notifications among cluster nodes in Windows Server 2008 or in Windows Server 2008 R2](https://support.microsoft.com/kb/2616514)</span></span>|  
|<span data-ttu-id="7368c-171">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-171">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="7368c-172">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-172">Yes</span></span>|<span data-ttu-id="7368c-173">利用不可</span><span class="sxs-lookup"><span data-stu-id="7368c-173">Not applicable</span></span>|<span data-ttu-id="7368c-174">**一部の WSFC ノードから利用できないディスクに対する VPD ストレージ テスト**</span><span class="sxs-lookup"><span data-stu-id="7368c-174">**VPD storage testing on disks that are not available to all WSFC nodes**</span></span>|<span data-ttu-id="7368c-175">WSFC ノードで Windows Server 2008 R2 Service Pack 1 (SP1) が実行されている場合に、オンラインの (なおかつ WSFC クラスター内の一部のノードから利用できない) ディスクに対して誤って Validate SCSI Device Vital Product Data (VPD) ストレージ テストを実行し、その結果不合格になった場合は、サポート技術情報の記事 2531907 に掲載されている修正プログラムをインストールします。</span><span class="sxs-lookup"><span data-stu-id="7368c-175">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1) and the Validate SCSI Device Vital Product Data (VPD) storage test fails after incorrectly running on disks that are online and not available to all nodes in the WSFC cluster, install the hotfix described in Knowledge Base article 2531907.</span></span><br /><br /> <span data-ttu-id="7368c-176">この修正プログラムは、ディスクがオンラインである場合に、誤った警告やエラーが検証レポートに出力されるのを防ぎます。</span><span class="sxs-lookup"><span data-stu-id="7368c-176">This hotfix eliminates incorrect warnings or errors in the validation report when disks are online.</span></span>|<span data-ttu-id="7368c-177">KB 2531907: [Windows Server 2008 R2 SP1 のインストール後、Validate SCSI Device Vital Product Data (VPD) テストで不合格になる](https://support.microsoft.com/kb/2531907)</span><span class="sxs-lookup"><span data-stu-id="7368c-177">KB 2531907:  [Validate SCSI Device Vital Product Data (VPD) test fails after you install Windows Server 2008 R2 SP1](https://support.microsoft.com/kb/2531907)</span></span>|  
|<span data-ttu-id="7368c-178">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-178">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>||<span data-ttu-id="7368c-179">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-179">Yes</span></span>|<span data-ttu-id="7368c-180">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-180">Yes</span></span>|<span data-ttu-id="7368c-181">**ローカル レプリカへのフェールオーバーの高速化**</span><span class="sxs-lookup"><span data-stu-id="7368c-181">**Faster failover to local replicas**</span></span>|<span data-ttu-id="7368c-182">WSFC ノードで Windows Server 2008 R2 Service Pack 1 (SP1) を実行している場合は、サポート技術情報の記事 2687741 に記載されている修正プログラムがインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="7368c-182">If a WSFC node is running Windows Server 2008 R2 Service Pack 1 (SP1), ensure that the hotfix described in Knowledge Base article 2687741 is installed.</span></span><br /><br /> <span data-ttu-id="7368c-183">この修正プログラムにより、ローカル レプリカへの [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] フェールオーバーのパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="7368c-183">This hotfix improves the performance of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] failover to local replicas.</span></span>|<span data-ttu-id="7368c-184">KB 2687741:  [Windows server 2008 R2 で使用できる、SQL Server 2012 の "AlwaysOn 可用性グループ" 機能のパフォーマンスを向上させる修正プログラム](https://support.microsoft.com/KB/2687741)</span><span class="sxs-lookup"><span data-stu-id="7368c-184">KB 2687741:  [A hotfix that improves the performance of the "AlwaysOn Availability Group" feature in SQL Server 2012 is available for Windows Server 2008 R2](https://support.microsoft.com/KB/2687741)</span></span>|  
|<span data-ttu-id="7368c-185">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-185">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-186">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-186">Yes</span></span>|<span data-ttu-id="7368c-187">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-187">Yes</span></span>|<span data-ttu-id="7368c-188">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-188">Yes</span></span>|<span data-ttu-id="7368c-189">**非対称ストレージ-フェールオーバークラスターインスタンス (FCIs)**</span><span class="sxs-lookup"><span data-stu-id="7368c-189">**Asymmetric storage-for Failover Cluster Instances (FCIs)**</span></span>|<span data-ttu-id="7368c-190">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] に対してフェールオーバー クラスター インスタンス (FCI) が有効になっている場合は、Windows Server 2008 修正プログラム 976097 をインストールします。</span><span class="sxs-lookup"><span data-stu-id="7368c-190">If any Failover Cluster Instance (FCI) will be enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], install the Windows Server 2008 hotfix 976097.</span></span><br /><br /> <span data-ttu-id="7368c-191">この修正プログラムにより、フェールオーバークラスター管理 Microsoft 管理コンソール (MMC) スナップインが有効になり、一部の WSFC ノードでのみ使用できる非対称の記憶域共有ディスクがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="7368c-191">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="7368c-192">KB 976097: [非対称ストレージのサポートをフェールオーバー クラスターの管理 MMC スナップインに追加するための修正プログラム (Windows Server 2008 または Windows Server 2008 R2 を実行するフェールオーバー クラスター用)](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="7368c-192">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span><br /><br /> [<span data-ttu-id="7368c-193">AlwaysOn アーキテクチャ ガイド: フェールオーバー クラスター インスタンスと可用性グループの使用による高可用性および災害復旧ソリューションの構築</span><span class="sxs-lookup"><span data-stu-id="7368c-193">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)|  
|<span data-ttu-id="7368c-194">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-194">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-195">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-195">Yes</span></span>|<span data-ttu-id="7368c-196">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-196">Yes</span></span>|<span data-ttu-id="7368c-197">利用不可</span><span class="sxs-lookup"><span data-stu-id="7368c-197">Not applicable</span></span>|<span data-ttu-id="7368c-198">**インターネットプロトコルセキュリティ (IPsec)**</span><span class="sxs-lookup"><span data-stu-id="7368c-198">**Internet Protocol Security (IPsec)**</span></span>|<span data-ttu-id="7368c-199">環境で IPsec 接続を使用する場合、クライアント コンピューターが仮想ネットワーク名 (このコンテキストでは可用性グループ リスナー) への IPsec 接続を再確立するときに、長時間 (約 2 ～ 3 分) の遅延が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-199">If your environment uses IPsec connections, you could experience a long time delay (about two or three minutes) when a client computer reestablishes the IPsec connection to a virtual network name (in this context, to connect to the availability group listener).</span></span> <span data-ttu-id="7368c-200">IPsec 接続を使用する場合は、サポート技術情報の記事 (KB 980915) に詳細が記載されている特定のシナリオについてお読みになることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-200">If you use IPsec connections, we recommend that you review the specific scenarios detailed in Knowledge Base article (KB 980915).</span></span>|<span data-ttu-id="7368c-201">KB 980915:  [Windows Server 2003、Windows Vista、Windows Server 2008、Windows 7、または Windows Server 2008 R2 を実行しているコンピューターからの IPSec 接続の再接続時に長時間の遅延が発生する](https://support.microsoft.com/kb/980915)</span><span class="sxs-lookup"><span data-stu-id="7368c-201">KB 980915:  [A long time delay occurs when you reconnect an IPSec connection from a computer that is running Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7, or Windows Server 2008 R2](https://support.microsoft.com/kb/980915)</span></span>|  
|<span data-ttu-id="7368c-202">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-202">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-203">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-203">Yes</span></span>|<span data-ttu-id="7368c-204">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-204">Yes</span></span>|<span data-ttu-id="7368c-205">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-205">Yes</span></span>|<span data-ttu-id="7368c-206">**IPv6**</span><span class="sxs-lookup"><span data-stu-id="7368c-206">**IPv6**</span></span>|<span data-ttu-id="7368c-207">IPv6 を使用する場合は、Windows Server オペレーティング システムに応じて、サポート技術情報の記事 2578103 または 2578113 に詳細が記載されている特定のシナリオについてお読みになることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-207">If you use IPv6, we recommend that you review the specific scenarios detailed in Knowledge Base article 2578103 or 2578113, depending on your Windows Server operating system.</span></span><br /><br /> <span data-ttu-id="7368c-208">Windows Server トポロジが IP version 6 (IPv6) を使用する場合、WSFC クラスター サービスが IPv6 IP アドレスのフェールオーバーに約 30 秒かかります。</span><span class="sxs-lookup"><span data-stu-id="7368c-208">If your Windows Server topology uses IP version 6 (IPv6), the WSFC Cluster service requires about 30 seconds to fail over the IPv6 IP address.</span></span> <span data-ttu-id="7368c-209">このため、クライアントは IPv6 IP アドレスに再接続するまでに、約 30 秒待機することになります。</span><span class="sxs-lookup"><span data-stu-id="7368c-209">This causes clients to wait for about 30 seconds to reconnect to the IPv6 IP address.</span></span>|<span data-ttu-id="7368c-210">KB 2578103 (Windows Server 2008): [クラスター サービスが Windows Server 2008 で IPv6 IP アドレスのフェールオーバーに約 30 秒かかる](https://support.microsoft.com/kb/2578103)</span><span class="sxs-lookup"><span data-stu-id="7368c-210">KB 2578103 (Windows Server 2008):  [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008](https://support.microsoft.com/kb/2578103)</span></span><br /><br /> <span data-ttu-id="7368c-211">KB 2578113 (Windows Server 2008 R2): \*\*Windows Server 2008 R2: \*\* [クラスター サービスが Windows Server 2008 R2 で IPv6 IP アドレスのフェールオーバーに約 30 秒かかる](https://support.microsoft.com/kb/2578113)</span><span class="sxs-lookup"><span data-stu-id="7368c-211">KB 2578113 (Windows Server 2008 R2):  **Windows Server 2008 R2:** [The Cluster service takes about 30 seconds to fail over IPv6 IP addresses in Windows Server 2008 R2](https://support.microsoft.com/kb/2578113)</span></span>|  
|<span data-ttu-id="7368c-212">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-212">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-213">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-213">Yes</span></span>|<span data-ttu-id="7368c-214">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-214">Yes</span></span>|<span data-ttu-id="7368c-215">はい</span><span class="sxs-lookup"><span data-stu-id="7368c-215">Yes</span></span>|<span data-ttu-id="7368c-216">**クラスターとアプリケーション サーバー間にルーターが存在しない**</span><span class="sxs-lookup"><span data-stu-id="7368c-216">**No Router Between cluster and application server**</span></span>|<span data-ttu-id="7368c-217">フェールオーバー クラスターとアプリケーション サーバー間にルーターがない場合に、クラスター サービスのネットワーク関連リソースのフェールオーバー操作が遅くなります。</span><span class="sxs-lookup"><span data-stu-id="7368c-217">If no router exists between the failover cluster and the application server, the Cluster service fails over network-related resources slowly.</span></span> <span data-ttu-id="7368c-218">これにより、可用性グループがフェールオーバーした後でクライアントの再接続が遅延します。</span><span class="sxs-lookup"><span data-stu-id="7368c-218">This delays client reconnections after an availability group fails over.</span></span> <span data-ttu-id="7368c-219">ルーターがない場合は、サポート技術情報の記事 2582281 に詳細が記載されている特定のシナリオについてお読みになり、環境に該当する場合は修正プログラムをインストールすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-219">In the absence of a router, we recommend that you review the specific scenarios detailed in Knowledge Base article 2582281 and install the hotfix, if applicable to your environment.</span></span>|<span data-ttu-id="7368c-220">KB 2582281:  [クラスターとアプリケーション サーバー間にルーターがない場合にフェールオーバー操作が遅い](https://support.microsoft.com/kb/2582281)</span><span class="sxs-lookup"><span data-stu-id="7368c-220">KB 2582281:  [Slow failover operation if no router exists between the cluster and an application server](https://support.microsoft.com/kb/2582281)</span></span>|  
  
###  <a name="recommendations-for-computers-that-host-availability-replicas-windows-system"></a><a name="ComputerRecommendations"></a> <span data-ttu-id="7368c-221">可用性レプリカをホストするコンピューターに関する推奨事項 (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-221">Recommendations for Computers That Host Availability Replicas (Windows System)</span></span>  
  
-   <span data-ttu-id="7368c-222">**同程度のシステム:** 可用性グループ内の可用性レプリカはすべて、ワークロードの処理能力が同程度であるシステム上で運用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-222">**Comparable systems:**  For a given availability group, all the availability replicas should run on comparable systems that can handle identical workloads.</span></span>  
  
-   <span data-ttu-id="7368c-223">**専用のネットワーク アダプター:** 最良のパフォーマンスを得るには、[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] に専用のネットワーク アダプター (ネットワーク インターフェイス カード) を使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-223">**Dedicated network adapters:**  For best performance, use a dedicated network adapter (network interface card) for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>  
  
-   <span data-ttu-id="7368c-224">**十分なディスク領域:** 可用性レプリカをホストするサーバー インスタンスのあるすべてのコンピューターには、可用性グループ内のすべてのデータベースを格納できるだけのディスク領域が存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-224">**Sufficient disk space:**  Every computer on which a server instance hosts an availability replica must possess sufficient disk space for all the databases in the availability group.</span></span> <span data-ttu-id="7368c-225">プライマリ データベースが大きくなるにつれて、対応するセカンダリ データベースも同じだけ大きくなる点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-225">Keep in mind that as primary databases grow, their corresponding secondary databases grow the same amount.</span></span>  
  
###  <a name="permissions-windows-system"></a><a name="PermissionsWindows"></a> <span data-ttu-id="7368c-226">権限 (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-226">Permissions (Windows System)</span></span>  
 <span data-ttu-id="7368c-227">WSFC クラスターを管理するユーザーは、すべてのクラスター ノードのシステム管理者であることが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-227">To administer a WSFC cluster, the user must be a system administrator on every cluster node.</span></span>  
  
 <span data-ttu-id="7368c-228">クラスターを管理するためのアカウントの詳細については、「[付録 A: フェールオーバー クラスターの要件](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-228">For more information about the account for administering the cluster, see [Appendix A: Failover Cluster Requirements](https://technet.microsoft.com/library/dd197454\(WS.10\).aspx).</span></span>  
  
###  <a name="related-tasks-windows-system"></a><a name="RelatedTasksWindows"></a> <span data-ttu-id="7368c-229">関連タスク (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-229">Related Tasks (Windows System)</span></span>  
  
|<span data-ttu-id="7368c-230">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-230">Task</span></span>|<span data-ttu-id="7368c-231">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-231">Link</span></span>|  
|----------|----------|  
|<span data-ttu-id="7368c-232">HostRecordTTL の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="7368c-232">Set the HostRecordTTL value.</span></span>|[<span data-ttu-id="7368c-233">HostRecordTTL の変更 (Windows PowerShell を使用)</span><span class="sxs-lookup"><span data-stu-id="7368c-233">Change the HostRecordTTL (Using Windows PowerShell)</span></span>](#ChangeHostRecordTTLps)|  
  
####  <a name="change-the-hostrecordttl-using-windows-powershell"></a><a name="ChangeHostRecordTTLps"></a> <span data-ttu-id="7368c-234">HostRecordTTL の変更 (Windows PowerShell を使用)</span><span class="sxs-lookup"><span data-stu-id="7368c-234">Change the HostRecordTTL (Using Windows PowerShell)</span></span>  
  
1.  <span data-ttu-id="7368c-235">**[管理者として実行]** を選択して PowerShell ウィンドウを開きます。</span><span class="sxs-lookup"><span data-stu-id="7368c-235">Open PowerShell window via **Run as Administrator**.</span></span>  
  
2.  <span data-ttu-id="7368c-236">FailoverClusters モジュールをインポートします。</span><span class="sxs-lookup"><span data-stu-id="7368c-236">Import the FailoverClusters module.</span></span>  
  
3.  <span data-ttu-id="7368c-237">`Get-ClusterResource` コマンドレットを使用してネットワーク名リソースを検索し、次に `Set-ClusterParameter` コマンドレットを使用して `HostRecordTTL` 値を設定します。次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="7368c-237">Use the `Get-ClusterResource` cmdlet to find the Network Name resource, then use `Set-ClusterParameter` cmdlet to set the `HostRecordTTL` value, as follows:</span></span>  
  
     <span data-ttu-id="7368c-238">Get-ClusterResource " *\<NetworkResourceName>* " | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span><span class="sxs-lookup"><span data-stu-id="7368c-238">Get-ClusterResource "*\<NetworkResourceName>*" | Set-ClusterParameter HostRecordTTL *\<TimeInSeconds>*</span></span>  
  
     <span data-ttu-id="7368c-239">次に示す PowerShell の例では、"`SQL Network Name (SQL35)`" というネットワーク名リソースの HostRecordTTL を 300 秒に設定します。</span><span class="sxs-lookup"><span data-stu-id="7368c-239">The following PowerShell example sets the HostRecordTTL to 300 seconds for a Network Name resource named "`SQL Network Name (SQL35)`".</span></span>  
  
    ```powershell
    Import-Module FailoverClusters  
  
    $nameResource = "SQL Network Name (SQL35)"  
    Get-ClusterResource $nameResource | Set-ClusterParameter ClusterParameter HostRecordTTL 300  
    ```  
  
    > [!TIP]  
    >  <span data-ttu-id="7368c-240">新しい PowerShell ウィンドウを開くたびに、`FailoverClusters` モジュールをインポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-240">Every time you open a new PowerShell window, you need to import the `FailoverClusters` module.</span></span>  
  
##### <a name="related-content-powershell"></a><span data-ttu-id="7368c-241">関連コンテンツ (PowerShell)</span><span class="sxs-lookup"><span data-stu-id="7368c-241">Related Content (PowerShell)</span></span>  
  
-   <span data-ttu-id="7368c-242">[クラスターと高可用性](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (フェールオーバー クラスタリングとネットワーク負荷分散のチームのブログ)</span><span class="sxs-lookup"><span data-stu-id="7368c-242">[Clustering and High-Availability](https://techcommunity.microsoft.com/t5/failover-clustering/bg-p/FailoverClustering) (Failover Clustering and Network Load Balancing Team Blog)</span></span>  
  
-   <span data-ttu-id="7368c-243">[フェールオーバー クラスターの Windows PowerShell の概要](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="7368c-243">[Getting Started with Windows PowerShell on a Failover Cluster](https://technet.microsoft.com/library/ee619762\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="7368c-244">クラスター リソースのコマンドと同等の Windows PowerShell コマンドレット</span><span class="sxs-lookup"><span data-stu-id="7368c-244">Cluster resource commands and equivalent Windows PowerShell cmdlets</span></span>](https://msdn.microsoft.com/library/ee619744.aspx#BKMK_resource)  
  
###  <a name="related-content-windows-system"></a><a name="RelatedContentWS"></a> <span data-ttu-id="7368c-245">関連コンテンツ (Windows システム)</span><span class="sxs-lookup"><span data-stu-id="7368c-245">Related Content (Windows System)</span></span>  
  
-   <span data-ttu-id="7368c-246">[マルチサイト フェールオーバー クラスターの DNS 設定を構成する](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="7368c-246">[Configure DNS settings in a Multi-Site Failover Cluster](https://technet.microsoft.com/library/dd197562\(WS.10\).aspx)</span></span>  
  
-   [<span data-ttu-id="7368c-247">ネットワーク名リソースを使用した DNS 登録</span><span class="sxs-lookup"><span data-stu-id="7368c-247">DNS Registration with Network Name Resource</span></span>](https://techcommunity.microsoft.com/t5/failover-clustering/dns-registration-with-the-network-name-resource/ba-p/371482)  
  
-   [<span data-ttu-id="7368c-248">Windows 2008 R2 フェールオーバー マルチサイト クラスタリング</span><span class="sxs-lookup"><span data-stu-id="7368c-248">Windows 2008 R2 Failover Multi-Site Clustering</span></span>](https://kiruba4u.blogspot.com/2012/03/failover-clustering-in-windows-server.html)  
  
##  <a name="sql-server-instance-prerequisites-and-restrictions"></a><a name="ServerInstance"></a> <span data-ttu-id="7368c-249">SQL Server インスタンスの前提条件と制限</span><span class="sxs-lookup"><span data-stu-id="7368c-249">SQL Server Instance Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="7368c-250">可用性グループにはそれぞれ、 *のインスタンスによってホストされる一連のフェールオーバー パートナー (* 可用性レプリカ [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]) が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-250">Each availability group requires a set of failover partners, known as *availability replicas*, which are hosted by instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="7368c-251">サーバー インスタンスには、 *スタンドアロン インスタンス* または [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]*フェールオーバー クラスター インスタンス* (FCI) を使用できます。</span><span class="sxs-lookup"><span data-stu-id="7368c-251">A given server instance can be a *stand-alone instance* or a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]*failover cluster instance* (FCI).</span></span>  
  
 
  
###  <a name="checklist-prerequisites-server-instance"></a><a name="PrerequisitesSI"></a> <span data-ttu-id="7368c-252">チェック リスト:前提条件 (サーバー インスタンス)</span><span class="sxs-lookup"><span data-stu-id="7368c-252">Checklist: Prerequisites (Server Instance)</span></span>  
  
||<span data-ttu-id="7368c-253">前提条件</span><span class="sxs-lookup"><span data-stu-id="7368c-253">Prerequisite</span></span>|<span data-ttu-id="7368c-254">リンク</span><span class="sxs-lookup"><span data-stu-id="7368c-254">Links</span></span>|  
|-|------------------|-----------|  
|<span data-ttu-id="7368c-255">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-255">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-256">ホスト コンピューターは、Windows Server フェールオーバー クラスタリング (WSFC) ノードであることが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-256">The host computer must be a Windows Server Failover Clustering (WSFC) node.</span></span> <span data-ttu-id="7368c-257">可用性グループの可用性レプリカをホストする [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスは、同じ WSFC クラスターの別のノードに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-257">The instances of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that host availability replicas for a given availability group must reside on separate nodes of a single WSFC cluster.</span></span> <span data-ttu-id="7368c-258">唯一の例外は、別の WSFC クラスターに移行するときに、可用性グループは一時的に 2 つのクラスターにまたがることができるという点です。</span><span class="sxs-lookup"><span data-stu-id="7368c-258">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>|[<span data-ttu-id="7368c-259">Windows Server フェールオーバー クラスタリング &#40;WSFC&#41; と SQL Server</span><span class="sxs-lookup"><span data-stu-id="7368c-259">Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server</span></span>](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)<br /><br /> [<span data-ttu-id="7368c-260">フェールオーバークラスタリングと AlwaysOn 可用性グループ &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-260">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)|  
|<span data-ttu-id="7368c-261">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-261">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-262">可用性グループで Kerberos を操作するには:</span><span class="sxs-lookup"><span data-stu-id="7368c-262">If you want an availability group to work with Kerberos:</span></span><br /><br /> <span data-ttu-id="7368c-263">可用性グループの可用性レプリカをホストするすべてのサーバー インスタンスで、同じ SQL Server サービス アカウントを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-263">All server instances that host an availability replica for the availability group must use the same SQL Server service account.</span></span><br /><br /> <span data-ttu-id="7368c-264">ドメイン管理者は、可用性グループ リスナーの仮想ネットワーク名 (VNN) の SQL Server サービス アカウントに、Active Directory でサーバー プリンシパル名 (SPN) を手動で登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-264">The domain administrator needs to manually register a Service Principal Name (SPN) with Active Directory on the SQL Server service account for the virtual network name (VNN) of the availability group listener.</span></span> <span data-ttu-id="7368c-265">SQL Server サービス アカウント以外のアカウントに SPN が登録されている場合は、認証が失敗します。</span><span class="sxs-lookup"><span data-stu-id="7368c-265">If the SPN is registered on an account other than the SQL Server service account, authentication will fail.</span></span><br /><br /> <span data-ttu-id="7368c-266">**\*\* 重要 \*\*** SQL Server サービス アカウントを変更した場合は、ドメイン管理者が SPN を手動で再登録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-266">**\*\* Important \*\*** If you change the SQL Server service account, the domain administrator will need to manually re-register the SPN.</span></span>|[<span data-ttu-id="7368c-267">Kerberos 接続用のサービス プリンシパル名の登録</span><span class="sxs-lookup"><span data-stu-id="7368c-267">Register a Service Principal Name for Kerberos Connections</span></span>](../../configure-windows/register-a-service-principal-name-for-kerberos-connections.md)<br /><br /> <span data-ttu-id="7368c-268">**簡単な説明:**</span><span class="sxs-lookup"><span data-stu-id="7368c-268">**Brief explanation:**</span></span><br /><br /> <span data-ttu-id="7368c-269">Kerberos と SPN は相互認証を行います。</span><span class="sxs-lookup"><span data-stu-id="7368c-269">Kerberos and SPNs enforce mutual authentication.</span></span> <span data-ttu-id="7368c-270">SPN は、SQL Server サービスを起動する Windows アカウントにマップされます。</span><span class="sxs-lookup"><span data-stu-id="7368c-270">The SPN maps to the Windows account that starts the SQL Server services.</span></span> <span data-ttu-id="7368c-271">SPN が正常に登録されていないか登録に失敗した場合、Windows セキュリティ レイヤーは、SPN に関連するアカウントを決定することができず、Kerberos 認証は使用できません。</span><span class="sxs-lookup"><span data-stu-id="7368c-271">If the SPN is not registered correctly or if it fails, the Windows security layer cannot determine the account associated with the SPN, and Kerberos authentication cannot be used.</span></span><br /><br /> <span data-ttu-id="7368c-272">注:NTLM には、この要件はありません。</span><span class="sxs-lookup"><span data-stu-id="7368c-272">Note: NTLM does not have this requirement.</span></span>|  
|<span data-ttu-id="7368c-273">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-273">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-274">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンス (FCI) を使用して可用性レプリカをホストする予定がある場合は、FCI の制限を確実に理解し、FCI の要件が満たされていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-274">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="7368c-275">[SQL Server のフェールオーバー クラスター インスタンス (FCI) を使用して可用性レプリカをホストするための前提条件と要件](#FciArLimitations) (このトピックの後半)</span><span class="sxs-lookup"><span data-stu-id="7368c-275">[Prerequisites and Requirements on Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (later in this topic)</span></span>|  
|<span data-ttu-id="7368c-276">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-276">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-277">すべてのサーバー インスタンスで Enterprise Edition の [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]が実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-277">Each server instance must be running the Enterprise Edition of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span>|[<span data-ttu-id="7368c-278">SQL Server 2014 の各エディションがサポートする機能</span><span class="sxs-lookup"><span data-stu-id="7368c-278">Features Supported by the Editions of SQL Server 2014</span></span>](../../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)|  
|<span data-ttu-id="7368c-279">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-279">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-280">特定の可用性グループの可用性レプリカをホストするすべてのサーバー インスタンス間で [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の照合順序を統一する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-280">All the server instances that host availability replicas for an availability group must use the same [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] collation.</span></span>|[<span data-ttu-id="7368c-281">サーバーの照合順序の設定または変更</span><span class="sxs-lookup"><span data-stu-id="7368c-281">Set or Change the Server Collation</span></span>](../../../relational-databases/collations/set-or-change-the-server-collation.md)|  
|<span data-ttu-id="7368c-282">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-282">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-283">可用性グループの可用性レプリカをホストするすべてのサーバー インスタンスで [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="7368c-283">Enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that will host an availability replica for any availability group.</span></span> <span data-ttu-id="7368c-284">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] のサーバー インスタンスは、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 環境がサポートする範囲内であれば、1 台のコンピューターでいくつでも有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="7368c-284">On a given computer, you can enable as many server instances for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] as your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] installation supports.</span></span>|[<span data-ttu-id="7368c-285">AlwaysOn 可用性グループの有効化と無効化 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-285">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)<br /><br /> <span data-ttu-id="7368c-286">重要 wsfc クラスターを削除して再作成する場合は、元の\*\*wsfc \* \* クラスターでが有効にされていた各サーバーインスタンスで、この機能を無効にしてから再度有効にする必要があります。 \* \* \*\* [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="7368c-286">**\*\* Important \*\*** If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each server instance that was enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on the original WSFC cluster.</span></span>|  
|<span data-ttu-id="7368c-287">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-287">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-288">すべてのサーバー インスタンスには、データベース ミラーリング エンドポイントが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-288">Each server instance requires a database mirroring endpoint.</span></span> <span data-ttu-id="7368c-289">このエンドポイントは、サーバー インスタンス上のミラーリング監視サーバーとデータベース ミラーリング パートナー、および可用性レプリカすべてによって共有されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-289">Note that this endpoint is shared by all the availability replicas and database mirroring partners and witnesses on the server instance.</span></span><br /><br /> <span data-ttu-id="7368c-290">可用性レプリカのホストとして選んだサーバー インスタンスがドメイン ユーザー アカウントで実行されていて、まだデータベース ミラーリング エンドポイントが存在しない場合、 [新しい可用性グループ ウィザード](use-the-availability-group-wizard-sql-server-management-studio.md) (または [可用性グループへのレプリカの追加ウィザード](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) でエンドポイントを作成し、サーバー インスタンス サービス アカウントに CONNECT 権限を許可することができます。</span><span class="sxs-lookup"><span data-stu-id="7368c-290">If a server instance that you select to host an availability replica is running under a domain user account and does not yet have a database mirroring endpoint, the [New Availability Group Wizard](use-the-availability-group-wizard-sql-server-management-studio.md) (or [Add Replica to Availability Group Wizard](use-the-add-replica-to-availability-group-wizard-sql-server-management-studio.md)) can create the endpoint and grant CONNECT permission to the server instance service account.</span></span> <span data-ttu-id="7368c-291">ただし、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] サービスがビルトイン アカウント (Local System、Local Service、Network Service など) で実行されている場合または非ドメイン アカウントで実行されている場合は、エンドポイント認証に証明書を使用する必要があります。ウィザードは、サーバー インスタンス上でデータベース ミラーリング エンドポイントを作成できなくなります。</span><span class="sxs-lookup"><span data-stu-id="7368c-291">However, if the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] service is running as a built-in account, such as Local System, Local Service, or Network Service, or a nondomain account, you must use certificates for endpoint authentication, and the wizard will be unable to create a database mirroring endpoint on the server instance.</span></span> <span data-ttu-id="7368c-292">この場合は、データベース ミラーリング エンドポイントを手動で作成してからウィザードを起動することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-292">In this case, we recommend that you create the database mirroring endpoints manually before you launch the wizard.</span></span><br /><br /> <span data-ttu-id="7368c-293">**\*\* セキュリティに関する注意 \*\***[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] のトランスポート セキュリティは、データベース ミラーリングと同じです。</span><span class="sxs-lookup"><span data-stu-id="7368c-293">**\*\* Security Note \*\*** Transport security for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is the same as for database mirroring.</span></span>|[<span data-ttu-id="7368c-294">データベース ミラーリング エンドポイント &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-294">The Database Mirroring Endpoint &#40;SQL Server&#41;</span></span>](../../database-mirroring/the-database-mirroring-endpoint-sql-server.md)<br /><br /> [<span data-ttu-id="7368c-295">データベースミラーリングと AlwaysOn 可用性グループ &#40;SQL Server のトランスポートセキュリティ&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-295">Transport Security for Database Mirroring and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md)|  
|<span data-ttu-id="7368c-296">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-296">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-297">FILESTREAM を使用するデータベースを可用性グループに追加する場合は、その可用性グループの可用性レプリカをホストするすべてのサーバー インスタンスで FILESTREAM が有効になっていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-297">If any databases that use FILESTREAM will be added to an availability group, ensure that FILESTREAM is enabled on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="7368c-298">FILESTREAM の有効化と構成</span><span class="sxs-lookup"><span data-stu-id="7368c-298">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="7368c-299">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-299">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-300">包含データベースを可用性グループに追加する場合は、その可用性グループの可用性レプリカをホストするすべてのサーバー インスタンスで `contained database authentication` サーバー オプションが `1` に設定されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-300">If any contained databases will be added to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="7368c-301">contained database authentication サーバー構成オプション</span><span class="sxs-lookup"><span data-stu-id="7368c-301">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="7368c-302">サーバー構成オプション &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-302">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
###  <a name="thread-usage-by-availability-groups"></a><a name="ThreadUsage"></a> <span data-ttu-id="7368c-303">可用性グループによるスレッドの使用</span><span class="sxs-lookup"><span data-stu-id="7368c-303">Thread Usage by Availability Groups</span></span>  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="7368c-304">には、ワーカー スレッドに関する次の要件があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-304">has the following requirements for worker threads:</span></span>  
  
-   <span data-ttu-id="7368c-305">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]のアイドル状態のインスタンスでは、 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] はスレッドを使用しません。</span><span class="sxs-lookup"><span data-stu-id="7368c-305">On an idle instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] uses 0 threads.</span></span>  
  
-   <span data-ttu-id="7368c-306">可用性グループが使用するスレッドの最大数は、サーバー スレッドの最大数 (`max worker threads`) から 40 を引いた数にあらかじめ設定されています。</span><span class="sxs-lookup"><span data-stu-id="7368c-306">The maximum number of threads used by availability groups is the configured setting for the maximum number of server threads ('`max worker threads`') minus 40.</span></span>  
  
-   <span data-ttu-id="7368c-307">特定のサーバー インスタンスでホストされる可用性レプリカは 1 つのスレッド プールを共有します。</span><span class="sxs-lookup"><span data-stu-id="7368c-307">The availability replicas hosted on a given server instance share a single thread pool.</span></span>  
  
     <span data-ttu-id="7368c-308">スレッドは、次のように要求に基づいて共有されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-308">Threads are shared on an on-demand basis, as follows:</span></span>  
  
    -   <span data-ttu-id="7368c-309">通常は 3 個から 10 個の共有スレッドがありますが、プライマリ レプリカのワークロードに応じてこの数が増える場合があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-309">Typically, there are 3-10 shared threads, but this number can increase depending on the primary replica workload.</span></span>  
  
    -   <span data-ttu-id="7368c-310">特定のスレッドが一定期間アイドル状態になると、そのスレッドは解放され、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の汎用スレッド プールに戻されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-310">If a given thread is idle for a while, it is released back into the general [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] thread pool.</span></span> <span data-ttu-id="7368c-311">通常、非アクティブ スレッドは、非アクティブな状態のまま最大 15 秒経過すると解放されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-311">Normally, an inactive thread is released after ~15 seconds of inactivity.</span></span> <span data-ttu-id="7368c-312">ただし、最後の利用状況によっては、アイドル状態のスレッドが保持される時間が延長される場合があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-312">However, depending on the last activity, an idle thread might be retained longer.</span></span>  
  
-   <span data-ttu-id="7368c-313">さらに、可用性グループでは非共有スレッドを次のように使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-313">In addition, availability groups use unshared threads, as follows:</span></span>  
  
    -   <span data-ttu-id="7368c-314">各プライマリ レプリカでは、プライマリ データベースごとにログ キャプチャ スレッドを 1 つ使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-314">Each primary replica uses 1 Log Capture thread for each primary database.</span></span> <span data-ttu-id="7368c-315">また、セカンダリ データベースごとにログ送信スレッドを 1 つ使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-315">In addition, it uses 1 Log Send thread for each secondary database.</span></span> <span data-ttu-id="7368c-316">ログ送信スレッドは、非アクティブな状態のまま最大 15 秒経過すると解放されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-316">Log send threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="7368c-317">各セカンダリ レプリカでは、セカンダリ データベースごとに再実行スレッドを 1 つ使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-317">Each secondary replica uses 1 redo thread for each secondary database.</span></span> <span data-ttu-id="7368c-318">再実行スレッドは、非アクティブな状態のまま最大 15 秒経過すると解放されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-318">Redo threads are released after ~15 seconds of inactivity.</span></span>  
  
    -   <span data-ttu-id="7368c-319">セカンダリ レプリカでのバックアップでは、バックアップ操作の間、プライマリ レプリカにスレッドが保持されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-319">A backup on a secondary replica holds a thread on the primary replica for the duration of the backup operation.</span></span>  
  
 <span data-ttu-id="7368c-320">詳細については、「[AlwaysON - HADRON 学習シリーズ: HADRON 対応データベースのワーカー プールの使用」](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)(CSS [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] エンジニアのブログ) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-320">For more information, see [AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx) (a CSS [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Engineers Blog).</span></span>  
  
###  <a name="permissions-server-instance"></a><a name="PermissionsSI"></a> <span data-ttu-id="7368c-321">権限 (サーバー インスタンス)</span><span class="sxs-lookup"><span data-stu-id="7368c-321">Permissions (Server Instance)</span></span>  
  
|<span data-ttu-id="7368c-322">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-322">Task</span></span>|<span data-ttu-id="7368c-323">必要なアクセス許可</span><span class="sxs-lookup"><span data-stu-id="7368c-323">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="7368c-324">データベース ミラーリング エンドポイントを作成する</span><span class="sxs-lookup"><span data-stu-id="7368c-324">Creating the database mirroring endpoint</span></span>|<span data-ttu-id="7368c-325">CREATE ENDPOINT 権限、または **sysadmin** 固定サーバー ロールのメンバーシップが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-325">Requires CREATE ENDPOINT permission, or membership in the **sysadmin** fixed server role.</span></span>  <span data-ttu-id="7368c-326">また、CONTROL ON ENDPOINT 権限も必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-326">Also requires CONTROL ON ENDPOINT permission.</span></span> <span data-ttu-id="7368c-327">詳細については、「 [GRANT (エンドポイントの権限の許可) &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-327">For more information, see [GRANT Endpoint Permissions &#40;Transact-SQL&#41;](/sql/t-sql/statements/grant-endpoint-permissions-transact-sql).</span></span>|  
|<span data-ttu-id="7368c-328">有効にする [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span><span class="sxs-lookup"><span data-stu-id="7368c-328">Enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]</span></span>|<span data-ttu-id="7368c-329">ローカル コンピューターの **Administrator** グループのメンバーシップおよび WSFC クラスターに対するフル コントロール権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-329">Requires membership in the **Administrator** group on the local computer and full control on the WSFC cluster.</span></span>|  
  
###  <a name="related-tasks-server-instance"></a><a name="RelatedTasksSI"></a> <span data-ttu-id="7368c-330">関連タスク (サーバー インスタンス)</span><span class="sxs-lookup"><span data-stu-id="7368c-330">Related Tasks (Server Instance)</span></span>  
  
|<span data-ttu-id="7368c-331">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-331">Task</span></span>|<span data-ttu-id="7368c-332">トピック</span><span class="sxs-lookup"><span data-stu-id="7368c-332">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="7368c-333">データベース ミラーリング エンドポイントが存在するかどうかを確認する</span><span class="sxs-lookup"><span data-stu-id="7368c-333">Determining whether database mirroring endpoint exists</span></span>|[<span data-ttu-id="7368c-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-334">sys.database_mirroring_endpoints &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql)|  
|<span data-ttu-id="7368c-335">データベース ミラーリング エンドポイントを作成する (まだ存在しない場合)</span><span class="sxs-lookup"><span data-stu-id="7368c-335">Creating the database mirroring endpoint (if it does not yet exist)</span></span>|[<span data-ttu-id="7368c-336">Windows 認証でのデータベース ミラーリング エンドポイントの作成 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-336">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)<br /><br /> [<span data-ttu-id="7368c-337">データベース ミラーリング エンドポイントでの証明書の使用 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-337">Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)<br /><br /> [<span data-ttu-id="7368c-338">AlwaysOn 可用性グループ &#40;SQL Server PowerShell のデータベースミラーリングエンドポイントを作成&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-338">Create a Database Mirroring Endpoint for AlwaysOn Availability Groups &#40;SQL Server PowerShell&#41;</span></span>](database-mirroring-always-on-availability-groups-powershell.md)|  
|<span data-ttu-id="7368c-339">AlwaysOn 可用性グループを有効にする</span><span class="sxs-lookup"><span data-stu-id="7368c-339">Enabling AlwaysOn Availability Groups</span></span>|[<span data-ttu-id="7368c-340">AlwaysOn 可用性グループの有効化と無効化 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-340">Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](enable-and-disable-always-on-availability-groups-sql-server.md)|  
  
###  <a name="related-content-server-instance"></a><a name="RelatedContentSI"></a> <span data-ttu-id="7368c-341">関連コンテンツ (サーバー インスタンス)</span><span class="sxs-lookup"><span data-stu-id="7368c-341">Related Content (Server Instance)</span></span>  
  
-   [<span data-ttu-id="7368c-342">AlwaysON - HADRON 学習シリーズ:HADRON 対応データベースでのワーカー プールの使用</span><span class="sxs-lookup"><span data-stu-id="7368c-342">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
##  <a name="network-connectivity-recommendations"></a><a name="NetworkConnect"></a> <span data-ttu-id="7368c-343">ネットワーク接続の推奨事項</span><span class="sxs-lookup"><span data-stu-id="7368c-343">Network Connectivity Recommendations</span></span>  
 <span data-ttu-id="7368c-344">WSFC クラスター メンバー間の通信と、可用性レプリカ間の通信には、同じネットワーク リンクを使用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-344">We strongly recommend that you use the same network links for communications between WSFC cluster members and communications between availability replicas.</span></span>  <span data-ttu-id="7368c-345">別々のネットワーク リンクを使用すると、一部のリンクにエラーが発生した場合に (断続的なエラーであっても)、予期しない動作が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-345">Using separate network links can cause unexpected behaviors if some of links fail (even intermittently).</span></span>  
  
 <span data-ttu-id="7368c-346">たとえば、自動フェールオーバーをサポートする可用性グループでは、自動フェールオーバー パートナーであるセカンダリ レプリカの状態が SYNCHRONIZED である必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-346">For example, for an availability group to support automatic failover, the secondary replica that is the automatic-failover partner must be in the SYNCHRONIZED state.</span></span> <span data-ttu-id="7368c-347">このセカンダリ レプリカへのネットワーク リンクにエラーが発生した場合 (断続的なエラーであっても)、レプリカが UNSYNCHRONIZED 状態になり、リンクが復元されるまで再同期を開始できません。</span><span class="sxs-lookup"><span data-stu-id="7368c-347">If the network link to this secondary replica fails (even intermittently), the replica enters the UNSYNCHRONIZED state and cannot begin to resynchronize until the link is restored.</span></span> <span data-ttu-id="7368c-348">セカンダリ レプリカが非同期状態にある間に WSFC クラスターが自動フェールオーバーを要求しても、自動フェールオーバーは行われません。</span><span class="sxs-lookup"><span data-stu-id="7368c-348">If the WSFC cluster requests an automatic failover while the secondary replica is unsynchronized, automatic failover will not occur.</span></span>  
  
##  <a name="client-connectivity-support"></a><a name="ClientConnSupport"></a> <span data-ttu-id="7368c-349">クライアント接続のサポート</span><span class="sxs-lookup"><span data-stu-id="7368c-349">Client Connectivity Support</span></span>  
 <span data-ttu-id="7368c-350">クライアント接続のサポートの詳細について [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] は、「 [AlwaysOn クライアント接続 (SQL Server)](always-on-client-connectivity-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-350">For information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] support for client connectivity, see [AlwaysOn Client Connectivity (SQL Server)](always-on-client-connectivity-sql-server.md).</span></span>  
  
##  <a name="prerequisites-and-restrictions-for-using-a-sql-server-failover-cluster-instance-fci-to-host-an-availability-replica"></a><a name="FciArLimitations"></a> <span data-ttu-id="7368c-351">SQL Server のフェールオーバー クラスター インスタンス (FCI) を使用して可用性レプリカをホストするための前提条件と制限</span><span class="sxs-lookup"><span data-stu-id="7368c-351">Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica</span></span>  
 
  
###  <a name="restrictions-fcis"></a><a name="RestrictionsFCI"></a> <span data-ttu-id="7368c-352">制限 (FCI)</span><span class="sxs-lookup"><span data-stu-id="7368c-352">Restrictions (FCIs)</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="7368c-353">[!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)] 以降では、AlwaysOn フェールオーバー クラスター インスタンスは、[!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] と [!INCLUDE[win8srv](../../../includes/win8srv-md.md)] の両方でクラスター化ボリューム (CSV) をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="7368c-353">Beginning in [!INCLUDE[ssSQL14](../../../includes/sssql14-md.md)], AlwaysOn Failover Cluster Instances supports Clustered Shared Volumes (CSV) in both [!INCLUDE[winserver2008r2](../../../includes/winserver2008r2-md.md)] and [!INCLUDE[win8srv](../../../includes/win8srv-md.md)].</span></span> <span data-ttu-id="7368c-354">CSV の詳細については、「 [フェールオーバー クラスターのクラスターの共有ボリュームについて](https://technet.microsoft.com/library/dd759255.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-354">For more information on CSV, see [Understanding Cluster Shared Volumes in a Failover Cluster](https://technet.microsoft.com/library/dd759255.aspx).</span></span>  
  
-   <span data-ttu-id="7368c-355">**FCI のクラスター ノードでホストできるレプリカは、特定の可用性グループに対して 1 つだけである:**  FCI に可用性レプリカを追加する場合、FCI の有効な所有者である WSFC クラスター ノードで、同じ可用性グループに対して別のレプリカをホストすることはできません。</span><span class="sxs-lookup"><span data-stu-id="7368c-355">**The cluster nodes of an FCI can host only one replica for a given availability group:**  If you add an availability replica on an FCI, the WSFC cluster nodes that are possible FCI owners cannot host another replica for the same availability group.</span></span>  
  
     <span data-ttu-id="7368c-356">さらに、その他の各レプリカは、同じ WSFC クラスター内の別の WSFC ノードに存在する SQL Server 2012 のインスタンスによってホストされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-356">Furthermore, every other replica must be hosted by an instance of SQL Server 2012 that resides on a different WSFC node in the same WSFC cluster.</span></span> <span data-ttu-id="7368c-357">唯一の例外は、別の WSFC クラスターに移行するときに、可用性グループは一時的に 2 つのクラスターにまたがることができるという点です。</span><span class="sxs-lookup"><span data-stu-id="7368c-357">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
-   <span data-ttu-id="7368c-358">**可用性グループによる自動フェールオーバーは FCI ではサポートされない:** FCI は可用性グループによる自動フェールオーバーをサポートしないため、FCI によってホストされる可用性レプリカは手動フェールオーバー用にのみ構成できます。</span><span class="sxs-lookup"><span data-stu-id="7368c-358">**FCIs do not support automatic failover by availability groups:**  FCIs do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can be configured for manual failover only.</span></span>  
  
-   <span data-ttu-id="7368c-359">**FCI ネットワーク名の変更:** 可用性レプリカがホストされている FCI のネットワーク名を変更する必要がある場合、レプリカをその可用性グループから削除してから再度、可用性グループに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-359">**Changing FCI network name:**  If you need to change the network name of an FCI that hosts an availability replica, you will need to remove the replica from its availability group and then add the replica back into the availability group.</span></span> <span data-ttu-id="7368c-360">プライマリ レプリカを削除することはできません。そのため、プライマリ レプリカがホストされている FCI の名前を変更するには、セカンダリ レプリカにフェールオーバーしてから、以前のプライマリ レプリカを削除し、再度追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-360">You cannot remove the primary replica, so if you are renaming an FCI that is hosting the primary replica, you should fail over to a secondary replica and then remove the former primary replica and add it back.</span></span> <span data-ttu-id="7368c-361">FCI の名前を変更すると、そのデータベース ミラーリング エンドポイントの URL が変わる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-361">Note that renaming an FCI might alter the URL of its database mirroring endpoint.</span></span> <span data-ttu-id="7368c-362">レプリカを追加する際は、必ず最新のエンドポイントの URL を指定してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-362">When you add the replica ensure that you specify the current endpoint URL.</span></span>  
  
###  <a name="checklist-prerequisites-fcis"></a><a name="PrerequisitesFCI"></a> <span data-ttu-id="7368c-363">チェック リスト:前提条件 (FCI)</span><span class="sxs-lookup"><span data-stu-id="7368c-363">Checklist: Prerequisites (FCIs)</span></span>  
  
||<span data-ttu-id="7368c-364">前提条件</span><span class="sxs-lookup"><span data-stu-id="7368c-364">Prerequisite</span></span>|<span data-ttu-id="7368c-365">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-365">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="7368c-366">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-366">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-367">FCI を使用して可用性レプリカをホストする場合は、サポート技術情報の記事 KB 976097 に記載されている Windows Server 2008 の修正プログラムが、システム管理者によってインストール済みであることを事前に確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-367">Before you use an FCI to host an availability replica, ensure that your system administrator has installed the Windows Server 2008 hotfix described in Knowledge Base article KB 976097.</span></span> <span data-ttu-id="7368c-368">この修正プログラムにより、フェールオーバークラスター管理 Microsoft 管理コンソール (MMC) スナップインが有効になり、一部の WSFC ノードでのみ使用できる非対称の記憶域共有ディスクがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="7368c-368">This hotfix enables the Failover Cluster Management Microsoft Management Console (MMC) snap-in to support asymmetric storage-shared disks that are available on only some of the WSFC nodes.</span></span>|<span data-ttu-id="7368c-369">KB 976097: [非対称ストレージのサポートをフェールオーバー クラスターの管理 MMC スナップインに追加するための修正プログラム (Windows Server 2008 または Windows Server 2008 R2 を実行するフェールオーバー クラスター用)](https://support.microsoft.com/kb/976097)</span><span class="sxs-lookup"><span data-stu-id="7368c-369">KB 976097:  [Hotfix to add support for asymmetric storages to the Failover Cluster Management MMC snap-in for a failover cluster that is running Windows Server 2008 or Windows Server 2008 R2](https://support.microsoft.com/kb/976097)</span></span>|  
|<span data-ttu-id="7368c-370">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-370">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-371">標準の SQL Server フェールオーバー クラスター インスタンスのインストールと同様、各 SQL Server フェールオーバー クラスター インスタンス (FCI) が必要な共有ストレージを所有していることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-371">Ensure that each SQL Server failover cluster instance (FCI) possesses the required shared storage as per standard SQL Server failover cluster instance installation.</span></span>||  
  
###  <a name="related-tasks-fcis"></a><a name="RelatedTasksFCIs"></a> <span data-ttu-id="7368c-372">関連タスク (FCI)</span><span class="sxs-lookup"><span data-stu-id="7368c-372">Related Tasks (FCIs)</span></span>  
  
|<span data-ttu-id="7368c-373">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-373">Task</span></span>|<span data-ttu-id="7368c-374">トピック</span><span class="sxs-lookup"><span data-stu-id="7368c-374">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="7368c-375">SQL Server フェールオーバー クラスターのインストール</span><span class="sxs-lookup"><span data-stu-id="7368c-375">Installing a SQL Server Failover Cluster</span></span>|[<span data-ttu-id="7368c-376">新しい SQL Server フェールオーバー クラスターの作成 &#40;セットアップ&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-376">Create a New SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/create-a-new-sql-server-failover-cluster-setup.md)|  
|<span data-ttu-id="7368c-377">既存の SQL Server フェールオーバー クラスターのインプレース アップグレード</span><span class="sxs-lookup"><span data-stu-id="7368c-377">In-place upgrade of your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="7368c-378">SQL Server フェールオーバー クラスター インスタンスのアップグレード &#40;セットアップ&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-378">Upgrade a SQL Server Failover Cluster Instance &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/windows/upgrade-a-sql-server-failover-cluster-instance-setup.md)|  
|<span data-ttu-id="7368c-379">既存の SQL Server フェールオーバー クラスターのメンテナンス</span><span class="sxs-lookup"><span data-stu-id="7368c-379">Maintaining your existing SQL Server Failover Cluster</span></span>|[<span data-ttu-id="7368c-380">SQL Server フェールオーバー クラスターでのノードの追加または削除 &#40;セットアップ&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-380">Add or Remove Nodes in a SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../../sql-server/failover-clusters/install/add-or-remove-nodes-in-a-sql-server-failover-cluster-setup.md)|  
  
###  <a name="related-content-fcis"></a><a name="RelatedContentFCIs"></a> <span data-ttu-id="7368c-381">関連コンテンツ (FCI)</span><span class="sxs-lookup"><span data-stu-id="7368c-381">Related Content (FCIs)</span></span>  
  
-   [<span data-ttu-id="7368c-382">フェールオーバークラスタリングと AlwaysOn 可用性グループ &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-382">Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](failover-clustering-and-always-on-availability-groups-sql-server.md)  
  
-   [<span data-ttu-id="7368c-383">AlwaysOn アーキテクチャ ガイド: フェールオーバー クラスター インスタンスと可用性グループの使用による高可用性および災害復旧ソリューションの構築</span><span class="sxs-lookup"><span data-stu-id="7368c-383">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://technet.microsoft.com/library/jj215886.aspx)  
  
##  <a name="availability-group-prerequisites-and-restrictions"></a><a name="PrerequisitesForAGs"></a> <span data-ttu-id="7368c-384">可用性グループの前提条件と制限</span><span class="sxs-lookup"><span data-stu-id="7368c-384">Availability Group Prerequisites and Restrictions</span></span>  

  
###  <a name="restrictions-availability-groups"></a><a name="RestrictionsAG"></a> <span data-ttu-id="7368c-385">制限 (可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="7368c-385">Restrictions (Availability Groups)</span></span>  
  
-   <span data-ttu-id="7368c-386">**可用性レプリカは、1 つの WSFC クラスターの別々のノードによってホストされている必要がある:**  各可用性グループで、個々の可用性レプリカは、同じ WSFC クラスターの別々のノード上で動作するサーバー インスタンスによってホストされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-386">**Availability replicas must be hosted by different nodes of one WSFC cluster:**  For a given availability group, availability replicas must be hosted by server instances running on different nodes of the same WSFC cluster.</span></span> <span data-ttu-id="7368c-387">唯一の例外は、別の WSFC クラスターに移行するときに、可用性グループは一時的に 2 つのクラスターにまたがることができるという点です。</span><span class="sxs-lookup"><span data-stu-id="7368c-387">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="7368c-388">同じ物理コンピューター上の各仮想マシンは独立したコンピューターとして動作するため、同じ可用性グループの可用性レプリカをそれぞれの仮想マシンがホストできます。</span><span class="sxs-lookup"><span data-stu-id="7368c-388">Virtual machines on the same physical computer can each host an availability replica for the same availability group because each virtual machine acts as a separate computer.</span></span>  
  
-   <span data-ttu-id="7368c-389">**一意の可用性グループ名:**  各可用性グループの名前は、WSFC クラスター上で一意である必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-389">**Unique availability group name:**  Each availability group name must be unique on the WSFC cluster.</span></span> <span data-ttu-id="7368c-390">可用性グループ名の最大文字数は 128 文字です。</span><span class="sxs-lookup"><span data-stu-id="7368c-390">The maximum length for an availability group name is 128 characters.</span></span>  
  
-   <span data-ttu-id="7368c-391">**可用性レプリカ:** 各可用性グループは、1 個のプライマリ レプリカと最大 8 個のセカンダリ レプリカをサポートします。</span><span class="sxs-lookup"><span data-stu-id="7368c-391">**Availability replicas:**  Each availability group supports one primary replica and up to eight secondary replicas.</span></span> <span data-ttu-id="7368c-392">すべてのレプリカを非同期コミット モードで実行することも、最大 3 つのレプリカを同期コミット モードで実行することもできます (1 つのプライマリ レプリカと 2 つの同期セカンダリ レプリカ)。</span><span class="sxs-lookup"><span data-stu-id="7368c-392">All of the replicas can run under asynchronous-commit mode, or up to three of them can run under synchronous-commit mode (one primary replica with two synchronous secondary replicas).</span></span>  
  
-   <span data-ttu-id="7368c-393">**コンピューターあたりの可用性グループおよび可用性データベースの最大数:** コンピューター (仮想マシンまたは物理コンピューター) に実際に配置できるデータベースおよび可用性グループの数はハードウェアとワークロードによって異なりますが、強制的な制限はありません。</span><span class="sxs-lookup"><span data-stu-id="7368c-393">**Maximum number of availability groups and availability databases per computer:** The actual number of databases and availability groups you can put on a computer (VM or physical) depends on the hardware and workload, but there is no enforced limit.</span></span> <span data-ttu-id="7368c-394">マイクロソフトでは、物理コンピューターあたり 10 の AG と 100 の DB を使用して広範なテストを行いました。</span><span class="sxs-lookup"><span data-stu-id="7368c-394">Microsoft has extensively tested with 10 AGs and 100 DBs per physical machine.</span></span> <span data-ttu-id="7368c-395">過剰な負荷がかかっているシステムには、ワーカー スレッドの枯渇、AlwaysOn システム ビューおよび DMV の応答の遅延、ディスパッチャー システム ダンプの一時停止などの症状があります (ただし、これだけではありません)。</span><span class="sxs-lookup"><span data-stu-id="7368c-395">Signs of overloaded systems can include, but are not limited to, worker thread exhaustion, slow response times for AlwaysOn system views and DMVs, and/or stalled dispatcher system dumps.</span></span> <span data-ttu-id="7368c-396">アプリケーション SLA 内でピーク ワークロード容量を処理できることを確認するために、実稼働環境と同様のワークロードを使用して環境を十分にテストしてください。</span><span class="sxs-lookup"><span data-stu-id="7368c-396">Please make sure to thoroughly test your environment with a production-like workload to ensure it can handle peak workload capacity within your application SLAs.</span></span> <span data-ttu-id="7368c-397">SLA を検討する際は、障害条件下の負荷や期待される応答時間を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-397">When considering SLAs be sure to consider load under failure conditions as well as expected response times.</span></span>  
  
-   <span data-ttu-id="7368c-398">**可用性グループの操作には、フェールオーバークラスターマネージャーを使用しないでください。**</span><span class="sxs-lookup"><span data-stu-id="7368c-398">**Do not use the Failover Cluster Manager to manipulate availability groups:**</span></span>  
  
     <span data-ttu-id="7368c-399">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="7368c-399">For example:</span></span>  
  
    -   <span data-ttu-id="7368c-400">可用性グループのプロパティ (たとえば、有効な所有者) を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="7368c-400">Do not change any availability group properties, such as the possible owners.</span></span>  
  
    -   <span data-ttu-id="7368c-401">フェールオーバー クラスター マネージャーを使用して可用性グループをフェールオーバーしないでください。</span><span class="sxs-lookup"><span data-stu-id="7368c-401">Do not use the Failover Cluster Manager to fail over availability groups.</span></span> <span data-ttu-id="7368c-402">[!INCLUDE[tsql](../../../includes/tsql-md.md)] または [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-402">You must use [!INCLUDE[tsql](../../../includes/tsql-md.md)] or [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
  
###  <a name="prerequisites-availability-groups"></a><a name="RequirementsAG"></a> <span data-ttu-id="7368c-403">前提条件 (可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="7368c-403">Prerequisites (Availability Groups)</span></span>  
 <span data-ttu-id="7368c-404">可用性グループの構成を作成したり再構成したりする場合は、次の要件を満たす必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-404">When creating or reconfiguring an availability group configuration, ensure that you adhere to the following requirements.</span></span>  
  
||<span data-ttu-id="7368c-405">前提条件</span><span class="sxs-lookup"><span data-stu-id="7368c-405">Prerequisite</span></span>|<span data-ttu-id="7368c-406">説明</span><span class="sxs-lookup"><span data-stu-id="7368c-406">Description</span></span>|  
|-|------------------|-----------------|  
|<span data-ttu-id="7368c-407">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-407">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-408">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] フェールオーバー クラスター インスタンス (FCI) を使用して可用性レプリカをホストする予定がある場合は、FCI の制限を確実に理解し、FCI の要件が満たされていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-408">If you plan to use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host an availability replica, ensure that you understand the FCI restrictions and that the FCI requirements are met.</span></span>|<span data-ttu-id="7368c-409">[SQL Server のフェールオーバー クラスター インスタンス (FCI) を使用して可用性レプリカをホストするための前提条件と制限](#FciArLimitations) (このトピックの前半)</span><span class="sxs-lookup"><span data-stu-id="7368c-409">[Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica](#FciArLimitations) (earlier in this topic)</span></span>|  
  
###  <a name="security-availability-groups"></a><a name="SecurityAG"></a> <span data-ttu-id="7368c-410">セキュリティ (可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="7368c-410">Security (Availability Groups)</span></span>  
  
-   <span data-ttu-id="7368c-411">セキュリティは、Windows Server フェールオーバー クラスタリング (WSFC) クラスターから継承されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-411">Security is inherited from the Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="7368c-412">WSFC には、WSFC クラスター API 全体の粒度で 2 レベルのユーザー セキュリティが用意されています。</span><span class="sxs-lookup"><span data-stu-id="7368c-412">WSFC provides two levels of user security at granularity of entire WSFC cluster APIs:</span></span>  
  
    -   <span data-ttu-id="7368c-413">読み取り専用アクセス</span><span class="sxs-lookup"><span data-stu-id="7368c-413">Read-only access</span></span>  
  
    -   <span data-ttu-id="7368c-414">フル コントロール</span><span class="sxs-lookup"><span data-stu-id="7368c-414">Full control</span></span>  
  
         [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="7368c-415">はフル コントロールを必要とします。また、 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] を有効にした [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンスには、WSFC クラスターのフル コントロール権限が (サービス SID を介して) 与えられます。</span><span class="sxs-lookup"><span data-stu-id="7368c-415">needs full control, and enabling [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] on an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] gives it full control of the WSFC cluster (through Service SID).</span></span>  
  
         <span data-ttu-id="7368c-416">サーバー インスタンスのセキュリティを WSFC フェールオーバー クラスター マネージャーで直接追加したり削除したりすることはできません。</span><span class="sxs-lookup"><span data-stu-id="7368c-416">You cannot directly add or remove security for a server instance in the WSFC Failover Cluster Manager.</span></span> <span data-ttu-id="7368c-417">WSFC セキュリティ セッションを管理するには、 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 構成マネージャーまたはそれに相当する [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]の WMI を使用します。</span><span class="sxs-lookup"><span data-stu-id="7368c-417">To manage WSFC security sessions, use the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager or the WMI equivalent from [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="7368c-418">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の各インスタンスには、レジストリやクラスターにアクセスするための権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-418">Each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] must have permissions to access the registry, cluster, and soforth.</span></span>  
  
-   <span data-ttu-id="7368c-419">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 可用性レプリカをホストするサーバー インスタンス間の接続は暗号化するようにお勧めします。</span><span class="sxs-lookup"><span data-stu-id="7368c-419">We recommend that you use encryption for connections between server instances that host [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] availability replicas.</span></span>  
  
#### <a name="permissions-availability-groups"></a><span data-ttu-id="7368c-420">権限 (可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="7368c-420">Permissions (Availability Groups)</span></span>  
  
|<span data-ttu-id="7368c-421">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-421">Task</span></span>|<span data-ttu-id="7368c-422">必要なアクセス許可</span><span class="sxs-lookup"><span data-stu-id="7368c-422">Required Permissions</span></span>|  
|----------|--------------------------|  
|<span data-ttu-id="7368c-423">可用性グループの作成</span><span class="sxs-lookup"><span data-stu-id="7368c-423">Creating an availability group</span></span>|<span data-ttu-id="7368c-424">**sysadmin** 固定サーバー ロールのメンバーシップと、CREATE AVAILABILITY GROUP サーバー権限、ALTER ANY AVAILABILITY GROUP 権限、CONTROL SERVER 権限のいずれかが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-424">Requires membership in the **sysadmin** fixed server role and either CREATE AVAILABILITY GROUP server permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span>|  
|<span data-ttu-id="7368c-425">可用性グループの変更</span><span class="sxs-lookup"><span data-stu-id="7368c-425">Altering an  availability group</span></span>|<span data-ttu-id="7368c-426">可用性グループの ALTER AVAILABILITY GROUP 権限、CONTROL AVAILABILITY GROUP 権限、ALTER ANY AVAILABILITY GROUP 権限、または CONTROL SERVER 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-426">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span><br /><br /> <span data-ttu-id="7368c-427">さらに、データベースを可用性グループに参加させるには、 **db_owner** 固定データベース ロールのメンバーシップが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-427">In addition, joining a database to an availability group requires membership in the **db_owner** fixed database role.</span></span>|  
|<span data-ttu-id="7368c-428">可用性グループの削除</span><span class="sxs-lookup"><span data-stu-id="7368c-428">Dropping/deleting an availability group</span></span>|<span data-ttu-id="7368c-429">可用性グループの ALTER AVAILABILITY GROUP 権限、CONTROL AVAILABILITY GROUP 権限、ALTER ANY AVAILABILITY GROUP 権限、または CONTROL SERVER 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-429">Requires ALTER AVAILABILITY GROUP permission on the availability group, CONTROL AVAILABILITY GROUP permission, ALTER ANY AVAILABILITY GROUP permission, or CONTROL SERVER permission.</span></span> <span data-ttu-id="7368c-430">ローカル レプリカの場所でホストされていない可用性グループを削除するには、その可用性グループ上の CONTROL SERVER 権限または CONTROL 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-430">To drop an availability group that is not hosted on the local replica location you need CONTROL SERVER permission or CONTROL permission on that Availability Group.</span></span>|  
  
###  <a name="related-tasks-availability-groups"></a><a name="RelatedTasksAGs"></a> <span data-ttu-id="7368c-431">関連タスク (可用性グループ)</span><span class="sxs-lookup"><span data-stu-id="7368c-431">Related Tasks (Availability Groups)</span></span>  
  
|<span data-ttu-id="7368c-432">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-432">Task</span></span>|<span data-ttu-id="7368c-433">トピック</span><span class="sxs-lookup"><span data-stu-id="7368c-433">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="7368c-434">可用性グループの作成</span><span class="sxs-lookup"><span data-stu-id="7368c-434">Creating an availability group</span></span>|[<span data-ttu-id="7368c-435">可用性グループ (新しい可用性グループ ウィザード)</span><span class="sxs-lookup"><span data-stu-id="7368c-435">Use the Availability Group (New Availability Group Wizard)</span></span>](use-the-availability-group-wizard-sql-server-management-studio.md)<br /><br /> [<span data-ttu-id="7368c-436">可用性グループの作成 (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="7368c-436">Create an Availability Group (Transact-SQL)</span></span>](create-an-availability-group-transact-sql.md)<br /><br /> [<span data-ttu-id="7368c-437">可用性グループの作成 (SQL Server PowerShell)</span><span class="sxs-lookup"><span data-stu-id="7368c-437">Create an Availability Group (SQL Server PowerShell)</span></span>](../../../powershell/sql-server-powershell.md)<br /><br /> [<span data-ttu-id="7368c-438">可用性レプリカを追加または変更する場合のエンドポイント URL の指定 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-438">Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;</span></span>](specify-endpoint-url-adding-or-modifying-availability-replica.md)|  
|<span data-ttu-id="7368c-439">可用性レプリカの数の変更</span><span class="sxs-lookup"><span data-stu-id="7368c-439">Modifying the number of availability replicas</span></span>|[<span data-ttu-id="7368c-440">可用性グループへのセカンダリ レプリカの追加 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-440">Add a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](add-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="7368c-441">可用性グループへのセカンダリ レプリカの参加 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-441">Join a Secondary Replica to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-replica-to-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="7368c-442">可用性グループからのセカンダリ レプリカの削除 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-442">Remove a Secondary Replica from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-replica-from-an-availability-group-sql-server.md)|  
|<span data-ttu-id="7368c-443">可用性グループ リスナーの作成</span><span class="sxs-lookup"><span data-stu-id="7368c-443">Creating an  availability group listener</span></span>|[<span data-ttu-id="7368c-444">可用性グループ リスナーの作成または構成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-444">Create or Configure an Availability Group Listener &#40;SQL Server&#41;</span></span>](create-or-configure-an-availability-group-listener-sql-server.md)|  
|<span data-ttu-id="7368c-445">可用性グループの削除</span><span class="sxs-lookup"><span data-stu-id="7368c-445">Dropping an  availability group</span></span>|[<span data-ttu-id="7368c-446">可用性グループの削除 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-446">Remove an Availability Group &#40;SQL Server&#41;</span></span>](remove-an-availability-group-sql-server.md)|  
  
##  <a name="availability-database-prerequisites-and-restrictions"></a><a name="PrerequisitesForDbs"></a> <span data-ttu-id="7368c-447">可用性データベースの前提条件と制限</span><span class="sxs-lookup"><span data-stu-id="7368c-447">Availability Database Prerequisites and Restrictions</span></span>  
 <span data-ttu-id="7368c-448">可用性グループに追加するデータベースは、次の前提条件と制限を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-448">To be eligible to be added to an availability group, a database must meet the following prerequisites and restrictions.</span></span>  
  
 
  
###  <a name="checklist-requirements-availability-databases"></a><a name="RequirementsDb"></a> <span data-ttu-id="7368c-449">チェック リスト:要件 (可用性データベース)</span><span class="sxs-lookup"><span data-stu-id="7368c-449">Checklist: Requirements (Availability Databases)</span></span>  
 <span data-ttu-id="7368c-450">可用性グループに追加するデータベースは、次の条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-450">To be eligible to be added to an availability group, a database must:</span></span>  
  
||<span data-ttu-id="7368c-451">必要条件</span><span class="sxs-lookup"><span data-stu-id="7368c-451">Requirements</span></span>|<span data-ttu-id="7368c-452">Link</span><span class="sxs-lookup"><span data-stu-id="7368c-452">Link</span></span>|  
|-|------------------|----------|  
|<span data-ttu-id="7368c-453">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-453">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-454">ユーザー データベースであること。</span><span class="sxs-lookup"><span data-stu-id="7368c-454">Be a user database.</span></span> <span data-ttu-id="7368c-455">システム データベースを可用性グループに追加することはできません。</span><span class="sxs-lookup"><span data-stu-id="7368c-455">System databases cannot belong to an availability group.</span></span>||  
|<span data-ttu-id="7368c-456">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-456">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-457">可用性グループの作成先となる [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] のインスタンス上に存在し、そのサーバー インスタンスからアクセスできること。</span><span class="sxs-lookup"><span data-stu-id="7368c-457">Reside on the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] where you create the availability group and be accessible to the server instance.</span></span>||  
|<span data-ttu-id="7368c-458">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-458">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-459">読み取り/書き込み可能なデータベースであること。</span><span class="sxs-lookup"><span data-stu-id="7368c-459">Be a read-write database.</span></span> <span data-ttu-id="7368c-460">読み取り専用データベースを可用性グループに追加することはできません。</span><span class="sxs-lookup"><span data-stu-id="7368c-460">Read-only databases cannot be added to an availability group.</span></span>|<span data-ttu-id="7368c-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span><span class="sxs-lookup"><span data-stu-id="7368c-461">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_read_only** = 0)</span></span>|  
|<span data-ttu-id="7368c-462">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-462">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-463">マルチユーザー データベースであること。</span><span class="sxs-lookup"><span data-stu-id="7368c-463">Be a multi-user database.</span></span>|<span data-ttu-id="7368c-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span><span class="sxs-lookup"><span data-stu-id="7368c-464">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**user_access** = 0)</span></span>|  
|<span data-ttu-id="7368c-465">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-465">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-466">AUTO_CLOSE が使用されていないこと。</span><span class="sxs-lookup"><span data-stu-id="7368c-466">Not use AUTO_CLOSE.</span></span>|<span data-ttu-id="7368c-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span><span class="sxs-lookup"><span data-stu-id="7368c-467">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**is_auto_close_on** = 0)</span></span>|  
|<span data-ttu-id="7368c-468">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-468">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-469">完全復旧モデル (完全復旧モードとも呼ばれます) を使用すること。</span><span class="sxs-lookup"><span data-stu-id="7368c-469">Use the full recovery model (also known as, full recovery mode).</span></span>|<span data-ttu-id="7368c-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span><span class="sxs-lookup"><span data-stu-id="7368c-470">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**recovery_model** = 1)</span></span>|  
|<span data-ttu-id="7368c-471">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-471">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-472">データベースの完全バックアップが少なくとも 1 つ存在すること。</span><span class="sxs-lookup"><span data-stu-id="7368c-472">Possess at least one full database backup.</span></span><br /><br /> <span data-ttu-id="7368c-473">注:データベースを完全復旧モードに設定した後、完全復旧ログ チェーンを開始するには完全バックアップが必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-473">Note: After setting a database to full recovery mode, a full backup is required to initiate the full-recovery log chain.</span></span>|[<span data-ttu-id="7368c-474">データベースの完全バックアップの作成 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-474">Create a Full Database Backup &#40;SQL Server&#41;</span></span>](../../../relational-databases/backup-restore/create-a-full-database-backup-sql-server.md)|  
|<span data-ttu-id="7368c-475">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-475">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-476">既存の可用性グループに属していないこと。</span><span class="sxs-lookup"><span data-stu-id="7368c-476">Not belong to any existing availability group.</span></span>|<span data-ttu-id="7368c-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span><span class="sxs-lookup"><span data-stu-id="7368c-477">[sys.databases](/sql/relational-databases/system-catalog-views/sys-databases-transact-sql) (**group_database_id** = NULL)</span></span>|  
|<span data-ttu-id="7368c-478">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-478">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-479">データベース ミラーリング用に構成されていないこと。</span><span class="sxs-lookup"><span data-stu-id="7368c-479">Not be configured for database mirroring.</span></span>|<span data-ttu-id="7368c-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) (データベースがミラー化の対象となっていない場合、"mirroring_" で始まるすべての列は NULL)</span><span class="sxs-lookup"><span data-stu-id="7368c-480">[sys.database_mirroring](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql) (If the database does not participate in mirroring, all columns prefixed with "mirroring_" are NULL.)</span></span>|  
|<span data-ttu-id="7368c-481">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-481">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-482">FILESTREAM を使用するデータベースを可用性グループに追加する前に、その可用性グループの可用性レプリカをホストしている (またはこれからホストする) すべてのサーバー インスタンスで FILESTREAM が有効になっていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-482">Before adding a database that uses FILESTREAM to an availability group, ensure that FILESTREAM is enabled on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="7368c-483">FILESTREAM の有効化と構成</span><span class="sxs-lookup"><span data-stu-id="7368c-483">Enable and Configure FILESTREAM</span></span>](../../../relational-databases/blob/enable-and-configure-filestream.md)|  
|<span data-ttu-id="7368c-484">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span><span class="sxs-lookup"><span data-stu-id="7368c-484">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="7368c-485">包含データベースを可用性グループに追加する前に、その可用性グループの可用性レプリカをホストしている (またはこれからホストする) 各サーバー インスタンスで、`contained database authentication` サーバー オプションが `1` に設定されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-485">Before adding a contained database to an availability group, ensure that the `contained database authentication` server option is set to `1` on every server instance that hosts or will host an availability replica for the availability group.</span></span>|[<span data-ttu-id="7368c-486">contained database authentication サーバー構成オプション</span><span class="sxs-lookup"><span data-stu-id="7368c-486">contained database authentication Server Configuration Option</span></span>](../../configure-windows/contained-database-authentication-server-configuration-option.md)<br /><br /> [<span data-ttu-id="7368c-487">サーバー構成オプション &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-487">Server Configuration Options &#40;SQL Server&#41;</span></span>](../../configure-windows/server-configuration-options-sql-server.md)|  
  
> [!NOTE]  
>  [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="7368c-488">は、サポートされているすべてのデータベース互換性レベルで動作します。</span><span class="sxs-lookup"><span data-stu-id="7368c-488">works with any supported database compatibility level.</span></span>  
  
###  <a name="restrictions-availability-databases"></a><a name="RestrictionsDb"></a> <span data-ttu-id="7368c-489">制限事項 (可用性データベース)</span><span class="sxs-lookup"><span data-stu-id="7368c-489">Restrictions (Availability Databases)</span></span>  
  
-   <span data-ttu-id="7368c-490">セカンダリ データベースのファイル パス (ドライブ文字を含む) が、対応するプライマリ データベースのパスと異なる場合、次の制限が適用されます。</span><span class="sxs-lookup"><span data-stu-id="7368c-490">If the file path (including the drive letter) of a secondary database differs from the path of the corresponding primary database, the following restrictions apply:</span></span>  
  
    -   <span data-ttu-id="7368c-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:** **[完全]** オプションはサポートされません ([[最初のデータの同期を選択]](select-initial-data-synchronization-page-always-on-availability-group-wizards.md) ページ)、</span><span class="sxs-lookup"><span data-stu-id="7368c-491">**[!INCLUDE[ssAoNewAgWiz](../../../includes/ssaonewagwiz-md.md)]/[!INCLUDE[ssAoAddDbWiz](../../../includes/ssaoadddbwiz-md.md)]:**  The **Full** option is not supported (on the[Select Initial Data Synchronization Page](select-initial-data-synchronization-page-always-on-availability-group-wizards.md) page),</span></span>  
  
    -   <span data-ttu-id="7368c-492">**RESTORE WITH MOVE:** セカンダリ データベースを作成するには、セカンダリ レプリカをホストする [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] の各インスタンス上で、WITH MOVE を使用してデータベース ファイルを復元する必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-492">**RESTORE WITH MOVE:**  To create the secondary databases, the database files must be RESTORED WITH MOVE on each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosts a secondary replica.</span></span>  
  
    -   <span data-ttu-id="7368c-493">**ファイルの追加操作への影響:** 後でファイルの追加操作をプライマリ レプリカで実行した場合、セカンダリ データベースでエラーが発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-493">**Impact on add-file operations:**  A later add-file operation on the primary replica might fail on the secondary databases.</span></span> <span data-ttu-id="7368c-494">この操作の失敗によってセカンダリ データベースが中断する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-494">This failure could cause the secondary databases to be suspended.</span></span> <span data-ttu-id="7368c-495">セカンダリ データベースが中断すると、セカンダリ レプリカが "NOT SYNCHRONIZING" 状態になります。</span><span class="sxs-lookup"><span data-stu-id="7368c-495">This, in turn, causes the secondary replicas to enter the NOT SYNCHRONIZING state.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="7368c-496">ファイルの追加操作が失敗した場合の対処については、「[失敗したファイルの追加操作のトラブルシューティング &#40;AlwaysOn 可用性グループ&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-496">For information about responding to a failed ad-file operation, see [Troubleshoot a Failed Add-File Operation &#40;AlwaysOn Availability Groups&#41;](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md).</span></span>  
  
-   <span data-ttu-id="7368c-497">可用性グループに現在属しているデータベースを削除することはできません。</span><span class="sxs-lookup"><span data-stu-id="7368c-497">You cannot drop a database that currently belongs to an availability group.</span></span>  
  
###  <a name="follow-up-for-tde-protected-databases"></a><a name="TDEdbs"></a> <span data-ttu-id="7368c-498">TDE で保護されたデータベースの補足情報</span><span class="sxs-lookup"><span data-stu-id="7368c-498">Follow Up for TDE Protected Databases</span></span>  
 <span data-ttu-id="7368c-499">透過的なデータ暗号化 (TDE) を使用する場合、他のキーの作成および暗号化解除を行うための証明書または非対称キーは、可用性グループの可用性レプリカをホストするすべてのサーバー インスタンスで同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="7368c-499">If you use transparent data encryption (TDE), the certificate or asymmetric key for creating and decrypting other keys must be the same on every server instance that hosts an availability replica for the availability group.</span></span> <span data-ttu-id="7368c-500">詳細については、「 [別の SQL Server への TDE で保護されたデータベースの移動](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="7368c-500">For more information, see [Move a TDE Protected Database to Another SQL Server](../../../relational-databases/security/encryption/move-a-tde-protected-database-to-another-sql-server.md).</span></span>  
  
###  <a name="permissions-availability-databases"></a><a name="PermissionsDbs"></a> <span data-ttu-id="7368c-501">権限 (可用性データベース)</span><span class="sxs-lookup"><span data-stu-id="7368c-501">Permissions (Availability Databases)</span></span>  
 <span data-ttu-id="7368c-502">データベースに対する ALTER 権限が必要です。</span><span class="sxs-lookup"><span data-stu-id="7368c-502">Requires ALTER permission on the database.</span></span>  
  
###  <a name="related-tasks-availability-databases"></a><a name="RelatedTasksADb"></a> <span data-ttu-id="7368c-503">関連タスク (可用性データベース)</span><span class="sxs-lookup"><span data-stu-id="7368c-503">Related Tasks (Availability Databases)</span></span>  
  
|<span data-ttu-id="7368c-504">タスク</span><span class="sxs-lookup"><span data-stu-id="7368c-504">Task</span></span>|<span data-ttu-id="7368c-505">トピック</span><span class="sxs-lookup"><span data-stu-id="7368c-505">Topic</span></span>|  
|----------|-----------|  
|<span data-ttu-id="7368c-506">セカンダリ データベースの準備 (手動)</span><span class="sxs-lookup"><span data-stu-id="7368c-506">Preparing a secondary database (manually)</span></span>|[<span data-ttu-id="7368c-507">可用性グループに対するセカンダリ データベースの手動準備 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-507">Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;</span></span>](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)|  
|<span data-ttu-id="7368c-508">可用性グループへのセカンダリ データベースの参加 (手動)</span><span class="sxs-lookup"><span data-stu-id="7368c-508">Joining a secondary database to availability group (manually)</span></span>|[<span data-ttu-id="7368c-509">可用性グループへのセカンダリ データベースの参加 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-509">Join a Secondary Database to an Availability Group &#40;SQL Server&#41;</span></span>](join-a-secondary-database-to-an-availability-group-sql-server.md)|  
|<span data-ttu-id="7368c-510">可用性データベースの数の変更</span><span class="sxs-lookup"><span data-stu-id="7368c-510">Modifying the number of availability databases</span></span>|[<span data-ttu-id="7368c-511">可用性グループへのデータベースの追加 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-511">Add a Database to an Availability Group &#40;SQL Server&#41;</span></span>](availability-group-add-a-database.md)<br /><br /> [<span data-ttu-id="7368c-512">可用性グループからのセカンダリ データベースの削除 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-512">Remove a Secondary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-secondary-database-from-an-availability-group-sql-server.md)<br /><br /> [<span data-ttu-id="7368c-513">可用性グループからのプライマリ データベースの削除 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="7368c-513">Remove a Primary Database from an Availability Group &#40;SQL Server&#41;</span></span>](remove-a-primary-database-from-an-availability-group-sql-server.md)|  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="7368c-514">関連コンテンツ</span><span class="sxs-lookup"><span data-stu-id="7368c-514">Related Content</span></span>  
  
-   [<span data-ttu-id="7368c-515">高可用性と災害復旧のための Microsoft SQL Server AlwaysOn ソリューション ガイド</span><span class="sxs-lookup"><span data-stu-id="7368c-515">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
-   [<span data-ttu-id="7368c-516">SQL Server AlwaysOn チームのブログ: AlwaysOn チームの公式 SQL Server のブログ</span><span class="sxs-lookup"><span data-stu-id="7368c-516">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
-   [<span data-ttu-id="7368c-517">AlwaysON - HADRON 学習シリーズ:HADRON 対応データベースでのワーカー プールの使用</span><span class="sxs-lookup"><span data-stu-id="7368c-517">AlwaysON - HADRON Learning Series: Worker Pool Usage for HADRON Enabled Databases</span></span>](https://blogs.msdn.com/b/psssql/archive/2012/05/17/alwayson-hadron-learning-series-worker-pool-usage-for-hadron-enabled-databases.aspx)  
  
## <a name="see-also"></a><span data-ttu-id="7368c-518">参照</span><span class="sxs-lookup"><span data-stu-id="7368c-518">See Also</span></span>  
 <span data-ttu-id="7368c-519">[AlwaysOn 可用性グループ &#40;SQL Server の概要&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7368c-519">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="7368c-520">[フェールオーバークラスタリングと AlwaysOn 可用性グループ &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="7368c-520">[Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;](failover-clustering-and-always-on-availability-groups-sql-server.md) </span></span>  
 [<span data-ttu-id="7368c-521">AlwaysOn クライアント接続 (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="7368c-521">AlwaysOn Client Connectivity (SQL Server)</span></span>](always-on-client-connectivity-sql-server.md)  
  
  
