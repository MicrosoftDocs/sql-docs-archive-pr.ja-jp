---
title: データベース ミラーリングの動作モード | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- database mirroring [SQL Server], operating modes
ms.assetid: f8a579c2-55d7-4278-8088-f1da1de5b2e6
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: c944b402b8b1ba9b78036d667ec728ccaf561a91
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87632681"
---
# <a name="database-mirroring-operating-modes"></a><span data-ttu-id="c293e-102">データベース ミラーリングの動作モード</span><span class="sxs-lookup"><span data-stu-id="c293e-102">Database Mirroring Operating Modes</span></span>
  <span data-ttu-id="c293e-103">このトピックでは、データベース ミラーリング セッションの同期動作モードおよび非同期動作モードについて説明します。</span><span class="sxs-lookup"><span data-stu-id="c293e-103">This topic describes the synchronous and asynchronous operating modes for database mirroring sessions.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-104">データベース ミラーリングの概要については、「 [データベース ミラーリング &#40;SQL Server&#41;](database-mirroring-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-104">For an introduction to database mirroring, see [Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
 
  
##  <a name="terms-and-definitions"></a><a name="TermsAndDefinitions"></a> <span data-ttu-id="c293e-105">用語と定義</span><span class="sxs-lookup"><span data-stu-id="c293e-105">Terms and Definitions</span></span>  
 <span data-ttu-id="c293e-106">ここでは、このトピックの中心となるいくつかの用語を紹介します。</span><span class="sxs-lookup"><span data-stu-id="c293e-106">This section introduces a few terms that are central to this topic.</span></span>  
  
 <span data-ttu-id="c293e-107">高パフォーマンス モード</span><span class="sxs-lookup"><span data-stu-id="c293e-107">High-performance mode</span></span>  
 <span data-ttu-id="c293e-108">データベース ミラーリング セッションは非同期に動作し、プリンシパル サーバーとミラー サーバーのみを使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-108">The database mirroring session operates asynchronously and uses only the principal server and mirror server.</span></span> <span data-ttu-id="c293e-109">役割の交代の形式は、強制されたサービス (データ損失の可能性あり) のみです。</span><span class="sxs-lookup"><span data-stu-id="c293e-109">The only form of role switching is forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="c293e-110">高い安全性モード (High-safety mode)</span><span class="sxs-lookup"><span data-stu-id="c293e-110">High-safety mode</span></span>  
 <span data-ttu-id="c293e-111">データベース ミラーリング セッションは同期して動作し、必要に応じてミラーリング監視サーバー、およびプリンシパル サーバーとミラー サーバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-111">The database mirroring session operates synchronously and, optionally, uses a witness, as well as the principal server and mirror server.</span></span>  
  
 <span data-ttu-id="c293e-112">トランザクションの安全性</span><span class="sxs-lookup"><span data-stu-id="c293e-112">Transaction safety</span></span>  
 <span data-ttu-id="c293e-113">データベース ミラーリング セッションが同期して動作するか、非同期で動作するかを決定する、ミラーリング固有のデータベース プロパティ。</span><span class="sxs-lookup"><span data-stu-id="c293e-113">A mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="c293e-114">安全性レベルには次の 2 種類があります: FULL と OFF。</span><span class="sxs-lookup"><span data-stu-id="c293e-114">There are two safety levels: FULL and OFF.</span></span>  
  
 <span data-ttu-id="c293e-115">ミラーリング監視サーバー</span><span class="sxs-lookup"><span data-stu-id="c293e-115">Witness</span></span>  
 <span data-ttu-id="c293e-116">高い安全性モードの場合にのみ使用します。必要に応じて配置できる SQL Server のインスタンスです。ミラーリング監視サーバーを使用することにより、ミラー サーバーが自動フェールオーバーを開始するかどうかを決定できるようになります。</span><span class="sxs-lookup"><span data-stu-id="c293e-116">For use only with high-safety mode, an optional instance of SQL Server that enables the mirror server to recognize whether to initiate an automatic failover.</span></span> <span data-ttu-id="c293e-117">2 つのフェールオーバー パートナーとは異なり、ミラーリング監視サーバーではデータベースの操作は行いません。</span><span class="sxs-lookup"><span data-stu-id="c293e-117">Unlike the two failover partners, the witness does not serve the database.</span></span> <span data-ttu-id="c293e-118">ミラーリング監視サーバーの唯一の役割は、自動フェールオーバーをサポートすることです。</span><span class="sxs-lookup"><span data-stu-id="c293e-118">Supporting automatic failover is the only role of the witness.</span></span>  
  
##  <a name="asynchronous-database-mirroring-high-performance-mode"></a><a name="VisualElement"></a><span data-ttu-id="c293e-119">非同期データベースミラーリング (高パフォーマンスモード)</span><span class="sxs-lookup"><span data-stu-id="c293e-119">Asynchronous Database Mirroring (High-Performance Mode)</span></span>  
 <span data-ttu-id="c293e-120">ここでは、非同期データベース ミラーリングのしくみ、高パフォーマンス モードの使用に適した状況、およびプリンシパル サーバーで障害が発生した場合の対処法について説明します。</span><span class="sxs-lookup"><span data-stu-id="c293e-120">This section describes how asynchronous database mirroring works, when it is appropriate to use high-performance mode, and how to respond if the principal server fails.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-121">[!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] のほとんどのエディションでは、同期データベース ミラーリングのみ (安全性レベルが FULL の場合のみ) をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="c293e-121">Most editions of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] support only synchronous database mirroring ("Safety Full Only").</span></span> <span data-ttu-id="c293e-122">データベースミラーリングを完全にサポートするエディションについては、「 [SQL Server 2014 の各エディションでサポートされる機能](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」の「高可用性 (AlwaysOn)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-122">For information about editions that fully support database mirroring, see "High Availability (AlwaysOn)" in [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>  
  
 <span data-ttu-id="c293e-123">トランザクションの安全性が OFF に設定されていると、データベース ミラーリング セッションが非同期に動作します。</span><span class="sxs-lookup"><span data-stu-id="c293e-123">When transaction safety is set to OFF, the database mirroring session operates asynchronously.</span></span> <span data-ttu-id="c293e-124">非同期動作は、高パフォーマンス モードという動作モードのみでサポートされています。</span><span class="sxs-lookup"><span data-stu-id="c293e-124">Asynchronous operation supports only one operating mode-high-performance mode.</span></span> <span data-ttu-id="c293e-125">このモードでは高可用性という点を譲歩してパフォーマンスが強化されています。</span><span class="sxs-lookup"><span data-stu-id="c293e-125">This mode enhances performance at the expense of high availability.</span></span> <span data-ttu-id="c293e-126">高パフォーマンス モードでは、プリンシパル サーバーおよびミラー サーバーのみを使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-126">High-performance mode uses just the principal server and the mirror server.</span></span> <span data-ttu-id="c293e-127">ミラー サーバーで発生した問題がプリンシパル サーバーに影響を及ぼすことはありません。</span><span class="sxs-lookup"><span data-stu-id="c293e-127">Problems on the mirror server never impact the principal server.</span></span> <span data-ttu-id="c293e-128">プリンシパル サーバーが停止した場合、ミラー データベースは DISCONNECTED になりますがウォーム スタンバイ状態で利用できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-128">On the loss of the principal server, the mirror database is marked DISCONNECTED but is available as a warm standby.</span></span>  
  
 <span data-ttu-id="c293e-129">高パフォーマンス モードでサポートされている役割の交代方法は、"強制されたサービス" のみです (データ損失の可能性があります)。この方法では、ミラー サーバーをウォーム スタンバイ サーバーとして使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-129">High-performance mode, supports only one form of role switching: forced service (with possible data loss), which uses the mirror server as a warm standby server.</span></span> <span data-ttu-id="c293e-130">強制されたサービスは、プリンシパル サーバーの障害に対して取ることのできる対応の 1 つです。</span><span class="sxs-lookup"><span data-stu-id="c293e-130">Forced service is one of the possible responses to the failure of the principal server.</span></span> <span data-ttu-id="c293e-131">データの損失が発生する可能性があるので、ミラーにサービスを強制する前に、まず別の対応策がないか検討してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-131">Because data loss is possible, you should consider other alternatives before forcing service to the mirror.</span></span> <span data-ttu-id="c293e-132">詳細については、このトピックの後半の「 [プリンシパルの障害への対応](#WhenPrincipalFails)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-132">For more information, see [Responding to Failure of the Principal](#WhenPrincipalFails), later in this topic.</span></span>  
  
 <span data-ttu-id="c293e-133">下図に、高パフォーマンス モードのセッション構成を示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-133">The following figure shows the configuration of a session using high-performance mode.</span></span>  
  
 <span data-ttu-id="c293e-134">![パートナーのみの構成によるセッション](../media/dbm-high-performance-mode.gif "パートナーのみの構成によるセッション")</span><span class="sxs-lookup"><span data-stu-id="c293e-134">![Partner-only configuration of a session](../media/dbm-high-performance-mode.gif "Partner-only configuration of a session")</span></span>  
  
 <span data-ttu-id="c293e-135">高パフォーマンス モードでは、プリンシパル サーバーはミラー サーバーにトランザクションのログを送信すると、その直後にミラー サーバーからの受信確認を待機することなくクライアントに確認を送信します。</span><span class="sxs-lookup"><span data-stu-id="c293e-135">In high-performance mode, as soon as the principal server sends the log for a transaction to the mirror server, the principal server sends a confirmation to the client, without waiting for an acknowledgement from the mirror server.</span></span> <span data-ttu-id="c293e-136">トランザクションは、ミラー サーバーでログがディスクに書き込まれるのを待機することなく、コミットされます。</span><span class="sxs-lookup"><span data-stu-id="c293e-136">Transactions commit without waiting for the mirror server to write the log to disk.</span></span> <span data-ttu-id="c293e-137">非同期動作では、トランザクションの遅延を最小限に抑えてプリンシパル サーバーを実行できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-137">Asynchronous operation permits the principal server to run with minimum transaction latency.</span></span>  
  
 <span data-ttu-id="c293e-138">ミラー サーバーはプリンシパル サーバーから送信されるログ レコードとの時間差を埋めようとします。</span><span class="sxs-lookup"><span data-stu-id="c293e-138">The mirror server attempts to keep up with the log records sent by the principal server.</span></span> <span data-ttu-id="c293e-139">ミラー データベースは、プリンシパル データベースよりやや遅れることがありますが、データベース間の時間差は通常小さくなります。</span><span class="sxs-lookup"><span data-stu-id="c293e-139">But the mirror database might lag somewhat behind the principal database, though typically the gap between the databases is small.</span></span> <span data-ttu-id="c293e-140">ただし、プリンシパル サーバーのワークロードが高い場合やミラー サーバーのシステムの負荷が限界を超えた場合は、この時間差が大きくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="c293e-140">However, the gap can become substantial if the principal server is under a heavy work load or the system of the mirror server is over loaded.</span></span>  
  
 
  
###  <a name="when-is-high-performance-mode-appropriate"></a><a name="WhenUseHighPerf"></a> <span data-ttu-id="c293e-141">高パフォーマンス モードの使用を推奨するケース</span><span class="sxs-lookup"><span data-stu-id="c293e-141">When Is High-Performance Mode Appropriate?</span></span>  
 <span data-ttu-id="c293e-142">プリンシパル サーバーから非常に離れた場所にミラー サーバーを設置していたり、軽度のエラーによるプリンシパル サーバーへの影響でも不都合が生じる災害復旧シナリオでは、高パフォーマンス モードが適切である場合があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-142">High-performance mode can be useful in a disaster-recovery scenario in which the principal and mirror servers are separated by a significant distance and where you do not want small errors to impact the principal server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-143">ログ配布はデータベース ミラーリングを補うことができ、非同期データベース ミラーリングの有効な代替手段です。</span><span class="sxs-lookup"><span data-stu-id="c293e-143">Log shipping can be a supplement to database mirroring and is a favorable alternative to asynchronous database mirroring.</span></span> <span data-ttu-id="c293e-144">ログ配布の利点については、「[高可用性ソリューション &#40;SQL Server&#41;](../../sql-server/failover-clusters/high-availability-solutions-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-144">For information about the advantages of log shipping, see [High Availability Solutions &#40;SQL Server&#41;](../../sql-server/failover-clusters/high-availability-solutions-sql-server.md).</span></span> <span data-ttu-id="c293e-145">ログ配布とデータベース ミラーリングの使用方法の詳細については、「[データベース ミラーリングとログ配布 &#40;SQL Server&#41;](database-mirroring-and-log-shipping-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-145">For information on using log shipping with database mirroring, see [Database Mirroring and Log Shipping &#40;SQL Server&#41;](database-mirroring-and-log-shipping-sql-server.md).</span></span>  
  
###  <a name="the-impact-of-a-witness-on-high-performance-mode"></a><a name="WitnessImpactOnHighPerf"></a> <span data-ttu-id="c293e-146">高パフォーマンス モードのミラーリング監視の影響</span><span class="sxs-lookup"><span data-stu-id="c293e-146">The Impact of a Witness on High-Performance Mode</span></span>  
 <span data-ttu-id="c293e-147">Transact-SQL を使用して高パフォーマンス モードを構成する場合、SAFETY プロパティを OFF に設定した際には常に、WITNESS プロパティも OFF に設定することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c293e-147">If you use Transact-SQL to configure high-performance mode, whenever the SAFETY property is set to OFF, we strongly recommend that the WITNESS property also be set to OFF.</span></span> <span data-ttu-id="c293e-148">ミラーリング監視は高パフォーマンス モードでも使用できますが、使用による利点はなく、リスクが増えるだけです。</span><span class="sxs-lookup"><span data-stu-id="c293e-148">A witness can coexist with high-performance mode, but the witness provides no benefit and introduces risk.</span></span>  
  
 <span data-ttu-id="c293e-149">いずれかのパートナーがダウンし、ミラーリング監視がセッションから切断された場合、データベースは使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="c293e-149">If the witness is disconnected from the session when either partner goes down, the database becomes unavailable.</span></span> <span data-ttu-id="c293e-150">この理由は、高パフォーマンス モードにミラーリング監視は本来必要でないにもかかわらず、ミラーリング監視が設定されている場合、セッションには 2 つ以上のサーバー インスタンスから構成されるクォーラムが必要になるからです。</span><span class="sxs-lookup"><span data-stu-id="c293e-150">This is because, even though high-performance mode does not require a witness, if one is set, the session requires a quorum consisting of two or more server instances.</span></span> <span data-ttu-id="c293e-151">セッションがクォーラムを失った場合、データベースとして機能することができません。</span><span class="sxs-lookup"><span data-stu-id="c293e-151">If the session losses quorum, it cannot serve the database.</span></span>  
  
 <span data-ttu-id="c293e-152">ミラーリング監視が高パフォーマンス モード セッションで設定された場合、クォーラムを適用すると次のようになります。</span><span class="sxs-lookup"><span data-stu-id="c293e-152">When a witness is set in a high-performance mode session, the enforcement of quorum means that:</span></span>  
  
-   <span data-ttu-id="c293e-153">ミラー サーバーが失われた場合、プリンシパル サーバーをミラーリング監視サーバーに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-153">If the mirror server is lost, the principal server must be connected to the witness.</span></span> <span data-ttu-id="c293e-154">クォーラムがない場合、プリンシパル サーバーは、ミラーリング監視サーバーまたはミラー サーバーのいずれかが再度セッションに参加するまで、データベースをオフラインにします。</span><span class="sxs-lookup"><span data-stu-id="c293e-154">Otherwise, the principal server takes its database offline until either the witness or mirror server rejoins the session.</span></span>  
  
-   <span data-ttu-id="c293e-155">プリンシパル サーバーが失われた場合、ミラー サーバーにサービスを強制するには、ミラー サーバーがミラーリング監視に接続している必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-155">If the principal server is lost, forcing service to the mirror server requires that the mirror server be connected to the witness.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-156">クォーラムの種類の詳細については、「[クォーラム: データベースの可用性にミラーリング監視サーバーが与える影響 (データベース ミラーリング)](quorum-how-a-witness-affects-database-availability-database-mirroring.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-156">For information about the types of quorums, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
###  <a name="responding-to-failure-of-the-principal"></a><a name="WhenPrincipalFails"></a> <span data-ttu-id="c293e-157">プリンシパルの障害への対応</span><span class="sxs-lookup"><span data-stu-id="c293e-157">Responding to Failure of the Principal</span></span>  
 <span data-ttu-id="c293e-158">プリンシパルに障害が発生した場合、データベースの所有者は次のいずれかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-158">When the principal fails, the database owner has several choices, as follows:</span></span>  
  
-   <span data-ttu-id="c293e-159">プリンシパルが再度使用できるようになるまで、データベースを復旧しない。</span><span class="sxs-lookup"><span data-stu-id="c293e-159">Leave the database unavailable until the principal becomes available again.</span></span>  
  
     <span data-ttu-id="c293e-160">プリンシパル データベースおよびそのトランザクション ログが破損していない場合、コミットされたすべてのトランザクションを維持できますが、可用性の点で譲歩が必要になります。</span><span class="sxs-lookup"><span data-stu-id="c293e-160">If the principal database and its transaction log are intact, this choice preserves all of the committed transactions at the expense of availability.</span></span>  
  
-   <span data-ttu-id="c293e-161">データベース ミラーリング セッションを停止し、手動でデータベースを更新してから、新しいデータベース ミラーリング セッションを開始する。</span><span class="sxs-lookup"><span data-stu-id="c293e-161">Stop the database mirroring session, manually update the database, and then begin a new database mirroring session.</span></span>  
  
     <span data-ttu-id="c293e-162">プリンシパル データベースが損失していても、プリンシパル サーバーが実行中であればプリンシパル データベースのログ末尾を早急にバックアップします。</span><span class="sxs-lookup"><span data-stu-id="c293e-162">If the principal database is lost but the principal server is still running, immediately attempt to back up the tail of the log on the principal database.</span></span> <span data-ttu-id="c293e-163">ログ末尾のバックアップに成功したら、ミラーリングを削除することが通常は最善の選択肢です。</span><span class="sxs-lookup"><span data-stu-id="c293e-163">If the tail-log backup succeeds, removing mirroring may be your best alternative.</span></span> <span data-ttu-id="c293e-164">ミラーリングを削除した後は、すべてのデータが保存されている、以前のミラー データベースにログを復元できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-164">After removing mirroring, you can restore the log onto the former mirror database, which preserves all of the data.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c293e-165">ログ末尾のバックアップに失敗してプリンシパル サーバーの復旧を待てない場合、サービスの強制を検討してください。この方法には、セッションの状態を維持できるという利点があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-165">If the tail-log backup failed and you cannot wait for the principal server to recover, consider forcing service, which has the advantage of maintaining the session state.</span></span>  
  
-   <span data-ttu-id="c293e-166">ミラー サーバーにサービスを強制する (データが損失する可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="c293e-166">Force service (with possible data loss) on the mirror server.</span></span>  
  
     <span data-ttu-id="c293e-167">強制されたサービスは、厳密にはディザスター リカバリーの方法なので、慎重に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-167">Forced service is strictly a disaster recovery method and should be used sparingly.</span></span> <span data-ttu-id="c293e-168">サービスを強制できるのは、プリンシパル サーバーがダウンし、セッションが非同期である (トランザクションの安全性が OFF に設定されている) 状態で、セッションにミラーリング監視サーバーが存在しない (WITNESS プロパティが OFF に設定されている) か、ミラーリング監視サーバーがミラー サーバーに接続している (つまり、クォーラムがある) かのいずれかの場合に限ります。</span><span class="sxs-lookup"><span data-stu-id="c293e-168">Forcing service is possible only if the principal server is down, the session is asynchronous (transaction safety is set to OFF), and either the session does not have any witness (the WITNESS property is set to OFF) or the witness is connected to the mirror server (that is, they have quorum).</span></span>  
  
     <span data-ttu-id="c293e-169">サービスを強制されたミラー サーバーは、プリンシパルの役割を引き継ぎ、サーバー内にあるデータベースのコピーをクライアントに提供します。</span><span class="sxs-lookup"><span data-stu-id="c293e-169">Forcing service causes the mirror server to assume the role of principal and serve its copy of the database for clients.</span></span> <span data-ttu-id="c293e-170">サービスが強制された時点でミラー サーバーに送信されていないプリンシパルのトランザクション ログは、すべて失われます。</span><span class="sxs-lookup"><span data-stu-id="c293e-170">When service is forced, whatever transaction logs the principal has not yet sent to the mirror server are lost.</span></span> <span data-ttu-id="c293e-171">このため、強制されたサービスを使用する方法は、データを損失する可能性を許容でき、データベースの早急な復旧が最優先される場合にのみ使用するようにしてください。</span><span class="sxs-lookup"><span data-stu-id="c293e-171">Therefore, you should limit forced service to situations where possible data loss is acceptable and immediate database availability is critical.</span></span> <span data-ttu-id="c293e-172">サービス強制のしくみ、およびそれを使用する際のベスト プラクティスの詳細については、「[データベース ミラーリング セッション中の役割の交代 &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-172">For information on how forced service works and on best practices for using it, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
##  <a name="synchronous-database-mirroring-high-safety-mode"></a><a name="Sync"></a> <span data-ttu-id="c293e-173">同期データベース ミラーリング (高い安全性モード)</span><span class="sxs-lookup"><span data-stu-id="c293e-173">Synchronous Database Mirroring (High-Safety Mode)</span></span>  
 <span data-ttu-id="c293e-174">ここでは、同期データベース ミラーリングのしくみ、高い安全性モード (自動フェールオーバーを伴うモードと伴わないモード)、および自動フェールオーバーにおけるミラーリング監視サーバーの役割について説明します。</span><span class="sxs-lookup"><span data-stu-id="c293e-174">This section describes how synchronous database mirroring works, including the alternative high-safety modes (with automatic failover and without automatic failover), and contains information about the role of the witness in automatic failover.</span></span>  
  
 <span data-ttu-id="c293e-175">トランザクションの安全性が FULL に設定されている場合、データベース ミラーリング セッションは高い安全性モードで実行され、初期同期フェーズの後に同期操作を行います。</span><span class="sxs-lookup"><span data-stu-id="c293e-175">When transaction safety is set to FULL, the database mirroring session runs in high-safety mode and operates synchronously after an initial synchronizing phase.</span></span> <span data-ttu-id="c293e-176">ここでは、同期操作を行うように構成されているデータベース ミラーリング セッションについて詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="c293e-176">This section describes the details of database mirroring sessions that are configured for synchronous operation.</span></span>  
  
 <span data-ttu-id="c293e-177">セッションの同期をとるには、ミラー サーバーがミラー データベースとプリンシパル データベースの同期をとる必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-177">To achieve synchronous operation for a session, the mirror server must synchronize the mirror database with the principal database.</span></span> <span data-ttu-id="c293e-178">セッションが開始されると、プリンシパル サーバーはアクティブなログをミラー サーバーに送信し始めます。</span><span class="sxs-lookup"><span data-stu-id="c293e-178">When the session begins, the principal server begins sending its active log to the mirror server.</span></span> <span data-ttu-id="c293e-179">ミラー サーバーは、できるだけ早く、受信したすべてのログ レコードをディスクに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="c293e-179">The mirror server writes all of the incoming log records to disk as quickly as possible.</span></span> <span data-ttu-id="c293e-180">受信したログ レコードがすべてディスクに書き込まれると、データベースが同期されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-180">As soon as all of the received log records have been written to disk, the databases are synchronized.</span></span> <span data-ttu-id="c293e-181">データベースの同期は、パートナーが互いに通信している限り保持されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-181">As long as the partners remain in communication, the databases remain synchronized.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-182">データベース ミラーリング セッションでの状態変更を監視するには、 **Database Mirroring State Change** イベント クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-182">To monitor state changes in a database mirroring session, use the **Database Mirroring State Change** event class.</span></span> <span data-ttu-id="c293e-183">詳しくは、「 [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="c293e-183">For more information, see [Database Mirroring State Change Event Class](../../relational-databases/event-classes/database-mirroring-state-change-event-class.md).</span></span>  
  
 <span data-ttu-id="c293e-184">同期が完了したら、プリンシパル データベースにコミットされるトランザクションはすべてミラー サーバーにもコミットされるので、データが確実に保護されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-184">After synchronization finishes, every transaction committed on the principal database is also committed on the mirror server, guaranteeing protection of the data.</span></span> <span data-ttu-id="c293e-185">これは、トランザクションのログがディスクに再実行用として書き込まれたことを伝えるメッセージをプリンシパル サーバーがミラー サーバーから受信するまで、プリンシパル データベースへのトランザクションのコミットを待機することで実現します。</span><span class="sxs-lookup"><span data-stu-id="c293e-185">This is achieved by waiting to commit a transaction on the principal database, until the principal server receives a message from the mirror server stating that it has hardened the transaction's log to disk.</span></span> <span data-ttu-id="c293e-186">このメッセージを待機することで、トランザクションの待機時間が長くなることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-186">Note the wait for this message increases the latency of the transaction.</span></span>  
  
 <span data-ttu-id="c293e-187">同期に必要な時間は、主にセッションの開始時にミラー データベースがプリンシパル データベースからどれだけ遅れたか (プリンシパル サーバーから最初に受信したログ レコード数によって測定)、プリンシパル データベースのワークロード、およびミラー システムの速度に依存します。</span><span class="sxs-lookup"><span data-stu-id="c293e-187">The time required for synchronization depends essentially on how far the mirror database was behind the principal database at the start of the session (measured by the number of log records initially received from the principal server), the work load on the principal database, and the speed of the mirror system.</span></span> <span data-ttu-id="c293e-188">セッションが同期された後、再実行用として書き込まれたログのうち、ミラー データベースでまだ再実行されていないものは、再実行キューに残ります。</span><span class="sxs-lookup"><span data-stu-id="c293e-188">After a session is synchronized, the hardened log that has yet to be redone on the mirror database remains in the redo queue.</span></span>  
  
 <span data-ttu-id="c293e-189">ミラー データベースの同期がとられると、データベースの両方のコピーの状態が同期済みに変わります。</span><span class="sxs-lookup"><span data-stu-id="c293e-189">As soon as the mirror database becomes synchronized, the state of both the copies of the database changes to SYNCHRONIZED.</span></span>  
  
 <span data-ttu-id="c293e-190">同期操作は次のように行われます。</span><span class="sxs-lookup"><span data-stu-id="c293e-190">Synchronous operation is maintained in the following manner:</span></span>  
  
1.  <span data-ttu-id="c293e-191">プリンシパル サーバーは、クライアントからトランザクションを受け取ると、そのトランザクションのログをトランザクション ログに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="c293e-191">On receiving a transaction from a client, the principal server writes the log for the transaction to the transaction log.</span></span>  
  
2.  <span data-ttu-id="c293e-192">プリンシパル サーバーはこのトランザクションをデータベースに書き込むと同時に、ログ レコードをミラー サーバーに送信します。</span><span class="sxs-lookup"><span data-stu-id="c293e-192">The principal server writes the transaction to the database and, concurrently, sends the log record to the mirror server.</span></span> <span data-ttu-id="c293e-193">プリンシパル サーバーは、ミラー サーバーから送信される確認を待ってから、トランザクションのコミットまたはロールバックのいずれかをクライアントに確認します。</span><span class="sxs-lookup"><span data-stu-id="c293e-193">The principal server waits for an acknowledgement from the mirror server before confirming either of the following to the client: a transaction commit or a rollback.</span></span>  
  
3.  <span data-ttu-id="c293e-194">ミラー サーバーはログをディスクに再実行用として書き込み、確認をプリンシパル サーバーに返します。</span><span class="sxs-lookup"><span data-stu-id="c293e-194">The mirror server hardens the log to disk and returns an acknowledgement to the principal server.</span></span>  
  
4.  <span data-ttu-id="c293e-195">プリンシパル サーバーは、ミラー サーバーから確認を受け取ると、確認メッセージをクライアントに送信します。</span><span class="sxs-lookup"><span data-stu-id="c293e-195">On receiving the acknowledgement from the mirror server, the principal server sends a confirmation message to the client.</span></span>  
  
 <span data-ttu-id="c293e-196">高い安全性モードでは、2 か所間のデータの同期を要求することによってデータを保護します。</span><span class="sxs-lookup"><span data-stu-id="c293e-196">High-safety mode protects your data by requiring the data to be synchronized between two places.</span></span> <span data-ttu-id="c293e-197">コミットされているトランザクションはすべて、ミラー サーバー上のディスクに書き込まれることが保証されています。</span><span class="sxs-lookup"><span data-stu-id="c293e-197">All the committed transactions are guaranteed to be written to disk on the mirror server.</span></span>  
  

  
###  <a name="high-safety-mode-without-automatic-failover"></a><a name="HighSafetyWithOutAutoFailover"></a> <span data-ttu-id="c293e-198">自動フェールオーバーを伴わない高い安全性モード</span><span class="sxs-lookup"><span data-stu-id="c293e-198">High-Safety Mode Without Automatic Failover</span></span>  
 <span data-ttu-id="c293e-199">自動フェールオーバーを伴わない高い安全性モードの構成を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-199">The following figure shows the configuration of high-safety mode without automatic failover.</span></span> <span data-ttu-id="c293e-200">この構成は、2 つのパートナーのみで構成されています。</span><span class="sxs-lookup"><span data-stu-id="c293e-200">The configuration consists of only the two partners.</span></span>  
  
 <span data-ttu-id="c293e-201">![ミラーリング監視なしで通信するパートナー](../media/dbm-high-protection-mode.gif "ミラーリング監視なしで通信するパートナー")</span><span class="sxs-lookup"><span data-stu-id="c293e-201">![Partners communicating without a witness](../media/dbm-high-protection-mode.gif "Partners communicating without a witness")</span></span>  
  
 <span data-ttu-id="c293e-202">パートナーが接続され、データベースが既に同期されている場合、手動フェールオーバーがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="c293e-202">When the partners are connected and the database is already synchronized, manual failover is supported.</span></span> <span data-ttu-id="c293e-203">ミラー サーバー インスタンスがダウンしても、プリンシパル サーバー インスタンスは影響を受けず、公開された状態で (つまり、データをミラー化せずに) 実行されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-203">If the mirror server instance goes down, the principal server instance is unaffected and runs exposed (that is without mirroring the data).</span></span> <span data-ttu-id="c293e-204">プリンシパル サーバーが利用できなくなると、ミラーリングが中断されますが、サービスをミラー サーバーに強制的に引き継ぐことができます (データを損失する可能性もあります)。</span><span class="sxs-lookup"><span data-stu-id="c293e-204">If the principal server is lost, the mirror is suspended, but service can be forced to the mirror server (with possible data loss).</span></span> <span data-ttu-id="c293e-205">詳細については、「 [データベース ミラーリング セッション中の役割の交代 &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)をダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="c293e-205">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
###  <a name="high-safety-mode-with-automatic-failover"></a><a name="HighSafetyWithAutoFailover"></a> <span data-ttu-id="c293e-206">自動フェールオーバーを伴う高い安全性モード</span><span class="sxs-lookup"><span data-stu-id="c293e-206">High-Safety Mode with Automatic Failover</span></span>  
 <span data-ttu-id="c293e-207">自動フェールオーバーは、1 台のサーバーが機能しなくなった後もデータベースが動作し続けるようにすることで、高可用性を実現します。</span><span class="sxs-lookup"><span data-stu-id="c293e-207">Automatic failover provides high availability by ensuring that the database is still served after the loss of one server.</span></span> <span data-ttu-id="c293e-208">自動フェールオーバーでは、セッションに 3 番目のサーバー インスタンスとして *ミラーリング監視サーバー*が存在する必要があります。このサーバーは、第 3 のコンピューターに常駐するのが理想的です。</span><span class="sxs-lookup"><span data-stu-id="c293e-208">Automatic failover requires that the session possess a third server instance, the *witness*, which ideally resides on a third computer.</span></span> <span data-ttu-id="c293e-209">自動フェールオーバーをサポートする高い安全性モードのセッションの構成を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-209">The following figure shows the configuration of a high-safety mode session that supports automatic failover.</span></span>  
  
 <span data-ttu-id="c293e-210">![ミラーリング監視と 2 台のパートナーによるセッション](../media/dbm-high-availability-mode.gif "ミラーリング監視と 2 台のパートナーによるセッション")</span><span class="sxs-lookup"><span data-stu-id="c293e-210">![The witness and two partners of a session](../media/dbm-high-availability-mode.gif "The witness and two partners of a session")</span></span>  
  
 <span data-ttu-id="c293e-211">2 つのパートナーとは異なり、ミラーリング監視サーバーではデータベースの操作は行いません。</span><span class="sxs-lookup"><span data-stu-id="c293e-211">Unlike the two partners, the witness does not serve the database.</span></span> <span data-ttu-id="c293e-212">ミラーリング監視サーバーは、プリンシパル サーバーが正常に動作しているかどうかを確認することにより、自動フェールオーバーをサポートするだけです。</span><span class="sxs-lookup"><span data-stu-id="c293e-212">The witness simply supports automatic failover by verifying whether the principal server is up and functioning.</span></span> <span data-ttu-id="c293e-213">ミラー サーバーが自動フェールオーバーを開始するのは、ミラー サーバーとミラーリング監視サーバーの両方がプリンシパル サーバーから切断された後、そのまま相互に接続されている場合だけです。</span><span class="sxs-lookup"><span data-stu-id="c293e-213">The mirror server initiates automatic failover only if the mirror and the witness remain connected to each other after both have been disconnected from the principal server.</span></span>  
  
 <span data-ttu-id="c293e-214">ミラーリング監視サーバーが設定されると、セッションでは *クォーラム*が必要になります。クォーラムとは、データベースを使用できるようにする、少なくとも 2 つのサーバー インスタンス間のリレーションシップのことです。</span><span class="sxs-lookup"><span data-stu-id="c293e-214">When a witness is set, the session requires *quorum*-a relationship between at least two server instances that allows the database to be made available.</span></span> <span data-ttu-id="c293e-215">詳細については、「[データベース ミラーリング監視サーバー](database-mirroring-witness.md)」と「[クォーラム: データベースの可用性にミラーリング監視サーバーが与える影響 (データベース ミラーリング)](quorum-how-a-witness-affects-database-availability-database-mirroring.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-215">For more information, see [Database Mirroring Witness](database-mirroring-witness.md) and [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
 <span data-ttu-id="c293e-216">自動フェールオーバーを行うには以下の条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-216">Automatic failover requires the following conditions:</span></span>  
  
-   <span data-ttu-id="c293e-217">データベースが既に同期されている。</span><span class="sxs-lookup"><span data-stu-id="c293e-217">The database is already synchronized.</span></span>  
  
-   <span data-ttu-id="c293e-218">3 つのサーバー インスタンスがすべて接続されているときに障害が発生し、ミラーリング監視サーバーとミラー サーバーが接続されたままになっている。</span><span class="sxs-lookup"><span data-stu-id="c293e-218">The failure occurs while all three server instances are connected, and the witness and mirror server remain connected.</span></span>  
  
 <span data-ttu-id="c293e-219">パートナーの損失による影響は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="c293e-219">The loss of a partner has the following effect:</span></span>  
  
-   <span data-ttu-id="c293e-220">プリンシパル サーバーが使用できなくなると、上記の条件で自動フェールオーバーが発生します。</span><span class="sxs-lookup"><span data-stu-id="c293e-220">If the principal server becomes unavailable under the above conditions, automatic failover occurs.</span></span> <span data-ttu-id="c293e-221">ミラー サーバーはプリンシパル ロールに切り替わり、そのデータベースをプリンシパル データベースとして提供します。</span><span class="sxs-lookup"><span data-stu-id="c293e-221">The mirror server switches to the role of principal, and it offers its database as the principal database.</span></span>  
  
-   <span data-ttu-id="c293e-222">上記の条件が満たされていない場合にプリンシパル サーバーが使用できなくなると、サービスの強制が可能になる場合があります (ただし、データ損失の可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="c293e-222">If the principal server becomes unavailable when those conditions are not met, forcing service (with possible data loss) might be possible.</span></span> <span data-ttu-id="c293e-223">詳細については、「 [データベース ミラーリング セッション中の役割の交代 &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md)をダウンロードしてください。</span><span class="sxs-lookup"><span data-stu-id="c293e-223">For more information, see [Role Switching During a Database Mirroring Session &#40;SQL Server&#41;](role-switching-during-a-database-mirroring-session-sql-server.md).</span></span>  
  
-   <span data-ttu-id="c293e-224">ミラー サーバーのみが使用できなくなっても、プリンシパル サーバーとミラーリング監視サーバーはそのままの状態を維持します。</span><span class="sxs-lookup"><span data-stu-id="c293e-224">If the only mirror server becomes unavailable, the principal and witness continue.</span></span>  
  
 <span data-ttu-id="c293e-225">セッションでそのミラーリング監視サーバーへの接続が失われた場合、クォーラムを確立するには両方のパートナーが必要です。</span><span class="sxs-lookup"><span data-stu-id="c293e-225">If the session loses its witness, quorum requires both partners.</span></span> <span data-ttu-id="c293e-226">いずれかのパートナーがクォーラムを失った場合、両方のパートナーがクォーラムを失い、クォーラムが再確立されるまでデータベースは使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="c293e-226">If either partner loses quorum, both partners lose quorum, and the database becomes unavailable until quorum is re-established.</span></span> <span data-ttu-id="c293e-227">このクォーラムの要件によって、ミラーリング監視サーバーが存在しない場合は、データベースが *公開された状態*(つまり、ミラー化されていない状態) では実行されないことが保証されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-227">This quorum requirement makes sure that in the absence of a witness the database never runs *exposed*, that is without being mirrored.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c293e-228">ミラーリング監視サーバーが長時間切断されたままであることが予想される場合は、使用できるようになるまでミラーリング監視サーバーをセッションから削除することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c293e-228">If you expect the witness to remain disconnected for a significant amount of time, we recommend that you remove the witness from the session until it becomes available.</span></span>  
  
##  <a name="transact-sql-settings-and-database-mirroring-operating-modes"></a><a name="TsqlSettingsAndOpModes"></a> <span data-ttu-id="c293e-229">Transact-SQL の設定とデータベース ミラーリングの動作モード</span><span class="sxs-lookup"><span data-stu-id="c293e-229">Transact-SQL Settings and Database Mirroring Operating Modes</span></span>  
 <span data-ttu-id="c293e-230">ここでは、ALTER DATABASE の設定、ミラー化されたデータベースの状態、およびミラーリング監視サーバー (存在する場合) という観点から、データベース ミラーリング セッションについて説明します。</span><span class="sxs-lookup"><span data-stu-id="c293e-230">This section describes a database mirroring session in terms of the ALTER DATABASE settings and states of the mirrored database and witness, if any.</span></span> <span data-ttu-id="c293e-231">このセクションは、 [!INCLUDE[tsql](../../includes/tsql-md.md)]ではなく、主に [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]を使用してデータベース ミラーリングを管理するユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="c293e-231">The section is aimed at users who manage database mirroring primarily or exclusively using [!INCLUDE[tsql](../../includes/tsql-md.md)], rather than using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="c293e-232">[!INCLUDE[tsql](../../includes/tsql-md.md)]を使用する代わりに、 **[データベースのプロパティ]** ダイアログ ボックスの **[ミラーリング]** ページを使用して、オブジェクト エクスプローラーでセッションの動作モードを制御できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-232">As an alternative to using [!INCLUDE[tsql](../../includes/tsql-md.md)], you can control the operating mode of a session in Object Explorer using the **Mirroring** page of the **Database Properties** dialog box.</span></span> <span data-ttu-id="c293e-233">詳細については、このトピックの後半の「 [Windows 認証を使用してデータベース ミラーリング セッションを確立する &#40;SQL Server Management Studio&#41;](establish-database-mirroring-session-windows-authentication.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-233">For more information, see [Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;](establish-database-mirroring-session-windows-authentication.md).</span></span>  
  

  
###  <a name="how-transaction-safety-and-witness-state-affect-the-operating-mode"></a><a name="TxnSafetyAndWitness"></a> <span data-ttu-id="c293e-234">トランザクションの安全性とミラーリング監視サーバーの状態の動作モードへの影響</span><span class="sxs-lookup"><span data-stu-id="c293e-234">How Transaction Safety and Witness State Affect the Operating Mode</span></span>  
 <span data-ttu-id="c293e-235">セッションの動作モードは、トランザクションの安全性設定とミラーリング監視サーバーの状態の組み合わせによって決まります。</span><span class="sxs-lookup"><span data-stu-id="c293e-235">The operating mode of a session is determined by the combination of its transaction safety setting and the state of the witness.</span></span> <span data-ttu-id="c293e-236">データベース所有者はいつでも、トランザクションの安全性レベルを変更でき、ミラーリング監視サーバーを追加または削除できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-236">At any time, the database owner can change the transaction safety level, and can add or remove the witness.</span></span>  
  

  
####  <a name="transaction-safety"></a><a name="TxnSafety"></a> <span data-ttu-id="c293e-237">Transaction Safety</span><span class="sxs-lookup"><span data-stu-id="c293e-237">Transaction Safety</span></span>  
 <span data-ttu-id="c293e-238">トランザクションの安全性とは、データベース ミラーリング セッションが同期して動作するか、非同期で動作するかを決定する、ミラーリング固有のデータベース プロパティです。</span><span class="sxs-lookup"><span data-stu-id="c293e-238">Transaction safety is a mirroring-specific database property that determines whether a database mirroring session operates synchronously or asynchronously.</span></span> <span data-ttu-id="c293e-239">安全性レベルには次の 2 種類があります: FULL と OFF。</span><span class="sxs-lookup"><span data-stu-id="c293e-239">There are two safety levels: FULL and OFF.</span></span>  
  
-   <span data-ttu-id="c293e-240">SAFETY FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-240">SAFETY FULL</span></span>  
  
     <span data-ttu-id="c293e-241">トランザクションの安全性を FULL に設定すると、セッションは高い安全性モードで同期して動作します。</span><span class="sxs-lookup"><span data-stu-id="c293e-241">Full transaction safety causes the session to operate synchronously in high-safety mode.</span></span> <span data-ttu-id="c293e-242">ミラーリング監視サーバーが存在する場合、セッションでは自動フェールオーバーがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="c293e-242">If a witness is present, a session supports automatic failover.</span></span>  
  
     <span data-ttu-id="c293e-243">ALTER DATABASE ステートメントを使用してセッションを確立すると、SAFETY プロパティが FULL に設定された状態でセッションが開始します。つまり、セッションは高い安全性モードで開始されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-243">When you establish a session using ALTER DATABASE statements, the session begins with the SAFETY property set to FULL; that is, the session begins in high-safety mode.</span></span> <span data-ttu-id="c293e-244">セッションの開始後、ミラーリング監視サーバーを追加できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-244">After the session begins, you can add a witness.</span></span>  
  
     <span data-ttu-id="c293e-245">詳細については、このトピック前半の「 [同期データベース ミラーリング (高い安全性モード)](#Sync)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-245">For more information, see [Synchronous Database Mirroring (High-Safety Mode)](#Sync), earlier in this topic.</span></span>  
  
-   <span data-ttu-id="c293e-246">SAFETY OFF</span><span class="sxs-lookup"><span data-stu-id="c293e-246">SAFETY OFF</span></span>  
  
     <span data-ttu-id="c293e-247">トランザクションの安全性を OFF に設定すると、セッションは非同期の高パフォーマンス モードで動作します。</span><span class="sxs-lookup"><span data-stu-id="c293e-247">Turning off transaction safety causes the session to operate asynchronously, in high-performance mode.</span></span> <span data-ttu-id="c293e-248">SAFETY プロパティを OFF に設定する場合は、WITNESS プロパティも OFF (既定値) に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-248">If the SAFETY property is set to OFF, the WITNESS property should also be set to OFF (the default).</span></span> <span data-ttu-id="c293e-249">高パフォーマンス モードのミラーリング監視サーバーによる影響については、このトピック後半の「 [ミラーリング監視サーバーの状態](#WitnessState)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-249">For information about the impact of the witness in high-performance mode, see [The State of the Witness](#WitnessState), later in this topic.</span></span> <span data-ttu-id="c293e-250">トランザクションの安全性を無効にした状態での実行の詳細については、「 [非同期データベース ミラーリング (高パフォーマンス モード)](#VisualElement)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-250">For more information about running with transaction safety turned off, see [Asynchronous Database Mirroring (High-Performance Mode)](#VisualElement), earlier in this topic.</span></span>  
  
 <span data-ttu-id="c293e-251">データベースのトランザクションの安全性設定は、各パートナーについて **sys.database_mirroring** カタログ ビューの **mirroring_safety_level** 列と **mirroring_safety_level_desc** 列に記録されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-251">The transaction safety setting of the database is recorded on each partner in the **sys.database_mirroring** catalog view in the **mirroring_safety_level** and **mirroring_safety_level_desc** columns.</span></span> <span data-ttu-id="c293e-252">詳細については、「[sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-252">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
 <span data-ttu-id="c293e-253">データベース所有者であれば、トランザクションの安全性レベルをいつでも変更できます。</span><span class="sxs-lookup"><span data-stu-id="c293e-253">The database owner can change the transaction safety level at any time.</span></span>  
  
####  <a name="the-state-of-the-witness"></a><a name="WitnessState"></a> <span data-ttu-id="c293e-254">ミラーリング監視サーバーの状態</span><span class="sxs-lookup"><span data-stu-id="c293e-254">The State of the Witness</span></span>  
 <span data-ttu-id="c293e-255">ミラーリング監視サーバーが設定されている場合、クォーラムが必要なため、ミラーリング監視サーバーの状態は常に重要です。</span><span class="sxs-lookup"><span data-stu-id="c293e-255">If a witness has been set, quorum is required, so the state of the witness is always significant.</span></span>  
  
 <span data-ttu-id="c293e-256">ミラーリング監視サーバーが存在する場合、その状態は以下の 2 つの状態のいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="c293e-256">If it exists, the witness has one of two states:</span></span>  
  
-   <span data-ttu-id="c293e-257">ミラーリング監視サーバーをパートナーに接続している場合、ミラーリング監視サーバーはそのパートナーに対して CONNECTED 状態になり、そのパートナーのクォーラムを持ちます。</span><span class="sxs-lookup"><span data-stu-id="c293e-257">When the witness is connected to a partner, the witness is in the CONNECTED state relative to that partner and has quorum with that partner.</span></span> <span data-ttu-id="c293e-258">この場合、いずれかのパートナーが使用できない場合でも、データベースは使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="c293e-258">In this case, the database can be made available, even if one of the partners is unavailable.</span></span>  
  
-   <span data-ttu-id="c293e-259">ミラーリング監視サーバーが存在してもパートナーに接続されていない場合は、ミラーリング監視サーバーはそのパートナーに対して UNKOWN 状態または DISCONNECTED 状態になります。</span><span class="sxs-lookup"><span data-stu-id="c293e-259">When the witness exists but is not connected to a partner, the witness is in the UNKOWN or DISCONNECTED state relative to that partner.</span></span> <span data-ttu-id="c293e-260">この場合、ミラーリング監視サーバーではそのパートナーのクォーラムが不足します。また、パートナーが相互に接続されていない場合、データベースは使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="c293e-260">In this case, the witness lacks quorum with that partner, and if the partners are not connected to each other, the database becomes unavailable.</span></span>  
  
 <span data-ttu-id="c293e-261">クォーラムの詳細については、「[クォーラム: データベースの可用性にミラーリング監視サーバーが与える影響 (データベース ミラーリング)](quorum-how-a-witness-affects-database-availability-database-mirroring.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-261">For information about quorum, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
 <span data-ttu-id="c293e-262">サーバー インスタンス上の各ミラーリング監視サーバーの状態は、**sys.database_mirroring** カタログ ビューの **mirroring_witness_state** 列と **mirroring_witness_state_desc** 列に記録されます。</span><span class="sxs-lookup"><span data-stu-id="c293e-262">The state of each witness on a server instance is recorded in the **sys.database_mirroring** catalog view in the **mirroring_witness_state** and **mirroring_witness_state_desc** columns.</span></span> <span data-ttu-id="c293e-263">詳細については、「[sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-263">For more information, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
 <span data-ttu-id="c293e-264">次の表に、セッションの動作モードと、トランザクションの安全性設定やミラーリング監視サーバーの状態との依存関係の概要を示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-264">The following table summarizes how the operating mode of a session depends upon its transaction safety setting and on state of the witness.</span></span>  
  
|<span data-ttu-id="c293e-265">動作モード</span><span class="sxs-lookup"><span data-stu-id="c293e-265">Operating mode</span></span>|<span data-ttu-id="c293e-266">トランザクションの安全性</span><span class="sxs-lookup"><span data-stu-id="c293e-266">Transaction safety</span></span>|<span data-ttu-id="c293e-267">ミラーリング監視サーバーの状態</span><span class="sxs-lookup"><span data-stu-id="c293e-267">Witness state</span></span>|  
|--------------------|------------------------|-------------------|  
|<span data-ttu-id="c293e-268">高パフォーマンス モード</span><span class="sxs-lookup"><span data-stu-id="c293e-268">High-performance mode</span></span>|<span data-ttu-id="c293e-269">OFF</span><span class="sxs-lookup"><span data-stu-id="c293e-269">OFF</span></span>|<span data-ttu-id="c293e-270">NULL (ミラーリング監視サーバーなし)<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="c293e-270">NULL (no witness)<sup>2</sup></span></span>|  
|<span data-ttu-id="c293e-271">自動フェールオーバーを伴わない高い安全性モード</span><span class="sxs-lookup"><span data-stu-id="c293e-271">High-safety mode without automatic failover</span></span>|<span data-ttu-id="c293e-272">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-272">FULL</span></span>|<span data-ttu-id="c293e-273">NULL (ミラーリング監視サーバーなし)</span><span class="sxs-lookup"><span data-stu-id="c293e-273">NULL (no witness)</span></span>|  
|<span data-ttu-id="c293e-274">自動フェールオーバーを伴う高い安全性モード<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="c293e-274">High-safety mode with automatic failover<sup>1</sup></span></span>|<span data-ttu-id="c293e-275">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-275">FULL</span></span>|<span data-ttu-id="c293e-276">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-276">CONNECTED</span></span>|  
  
 <span data-ttu-id="c293e-277"><sup>1</sup>ミラーリング監視サーバーが切断された場合は、ミラーリング監視サーバーインスタンスが使用可能になるまでミラーリング監視サーバーをオフに設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c293e-277"><sup>1</sup> If the witness becomes disconnected, we recommend that you set WITNESS OFF until the witness server instance becomes available.</span></span>  
  
 <span data-ttu-id="c293e-278"><sup>2</sup>ミラーリング監視が高パフォーマンスモードで存在する場合、ミラーリング監視サーバーはセッションに参加しません。</span><span class="sxs-lookup"><span data-stu-id="c293e-278"><sup>2</sup> If a witness is present in high-performance mode, the witness does not participate in the session.</span></span> <span data-ttu-id="c293e-279">ただし、データベースを使用できるようにするには、少なくとも 2 つのサーバー インスタンスが接続された状態にしておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="c293e-279">However, to make the database available, at least two of the server instances must remain connected.</span></span> <span data-ttu-id="c293e-280">そのため、高パフォーマンス モードのセッションでは、WITNESS プロパティを OFF に設定しておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="c293e-280">Therefore, we recommend keeping the WITNESS property set to OFF in high-performance mode sessions.</span></span> <span data-ttu-id="c293e-281">詳細については、「[クォーラム: データベースの可用性にミラーリング監視サーバーが与える影響 (データベース ミラーリング)](quorum-how-a-witness-affects-database-availability-database-mirroring.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-281">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
###  <a name="viewing-the-safety-setting-and-state-of-the-witness"></a><a name="ViewWitness"></a> <span data-ttu-id="c293e-282">安全性設定とミラーリング監視サーバーの状態の表示</span><span class="sxs-lookup"><span data-stu-id="c293e-282">Viewing the Safety Setting and State of the Witness</span></span>  
 <span data-ttu-id="c293e-283">安全性設定やデータベースのミラーリング監視サーバーの状態を表示するには、 **sys.database_mirroring** カタログ ビューを使用します。</span><span class="sxs-lookup"><span data-stu-id="c293e-283">To view the safety setting and the state of the witness for a database, use the **sys.database_mirroring** catalog view.</span></span> <span data-ttu-id="c293e-284">関連する列は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="c293e-284">The relevant columns are as follows:</span></span>  
  
|<span data-ttu-id="c293e-285">要素</span><span class="sxs-lookup"><span data-stu-id="c293e-285">Factor</span></span>|<span data-ttu-id="c293e-286">[列]</span><span class="sxs-lookup"><span data-stu-id="c293e-286">Columns</span></span>|<span data-ttu-id="c293e-287">説明</span><span class="sxs-lookup"><span data-stu-id="c293e-287">Description</span></span>|  
|------------|-------------|-----------------|  
|<span data-ttu-id="c293e-288">トランザクションの安全性</span><span class="sxs-lookup"><span data-stu-id="c293e-288">Transaction safety</span></span>|<span data-ttu-id="c293e-289">**mirroring_safety_level** または **mirroring_safety_level_desc**</span><span class="sxs-lookup"><span data-stu-id="c293e-289">**mirroring_safety_level** or **mirroring_safety_level_desc**</span></span>|<span data-ttu-id="c293e-290">ミラー データベース上での更新に関するトランザクションの安全性設定。次のいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="c293e-290">Transaction safety setting for updates on the mirror database, one of:</span></span><br /><br /> <span data-ttu-id="c293e-291">UNKNOWN</span><span class="sxs-lookup"><span data-stu-id="c293e-291">UNKNOWN</span></span><br /><br /> <span data-ttu-id="c293e-292">OFF</span><span class="sxs-lookup"><span data-stu-id="c293e-292">OFF</span></span><br /><br /> <span data-ttu-id="c293e-293">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-293">FULL</span></span><br /><br /> <span data-ttu-id="c293e-294">NULL= データベースがオンラインではありません。</span><span class="sxs-lookup"><span data-stu-id="c293e-294">NULL= database is not online.</span></span>|  
|<span data-ttu-id="c293e-295">ミラーリング監視サーバーの有無</span><span class="sxs-lookup"><span data-stu-id="c293e-295">Does a witness exist?</span></span>|<span data-ttu-id="c293e-296">**mirroring_witness_name**</span><span class="sxs-lookup"><span data-stu-id="c293e-296">**mirroring_witness_name**</span></span>|<span data-ttu-id="c293e-297">データベース ミラーリングのミラーリング監視サーバー名または NULL。NULL はミラーリング監視サーバーが存在しないことを示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-297">Server name of the database mirroring witness or NULL, indicating that no witness exists.</span></span>|  
|<span data-ttu-id="c293e-298">ミラーリング監視サーバーの状態</span><span class="sxs-lookup"><span data-stu-id="c293e-298">Witness state</span></span>|<span data-ttu-id="c293e-299">**mirroring_witness_state** または **mirroring_witness_state_desc**</span><span class="sxs-lookup"><span data-stu-id="c293e-299">**mirroring_witness_state** or **mirroring_witness_state_desc**</span></span>|<span data-ttu-id="c293e-300">特定のパートナー上のデータベースでのミラーリング監視サーバーの状態。</span><span class="sxs-lookup"><span data-stu-id="c293e-300">State of the witness in the database on a given partner:</span></span><br /><br /> <span data-ttu-id="c293e-301">UNKNOWN</span><span class="sxs-lookup"><span data-stu-id="c293e-301">UNKNOWN</span></span><br /><br /> <span data-ttu-id="c293e-302">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-302">CONNECTED</span></span><br /><br /> <span data-ttu-id="c293e-303">DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-303">DISCONNECTED</span></span><br /><br /> <span data-ttu-id="c293e-304">NULL = ミラーリング監視サーバーが存在しないか、データベースがオンラインではありません。</span><span class="sxs-lookup"><span data-stu-id="c293e-304">NULL = no witness exists or the database is not online.</span></span>|  
  
 <span data-ttu-id="c293e-305">たとえば、プリンシパル サーバーまたはミラー サーバーのいずれかで、次のクエリを入力します。</span><span class="sxs-lookup"><span data-stu-id="c293e-305">For example, on either the principal or mirror server, enter:</span></span>  
  
```  
SELECT mirroring_safety_level_desc, mirroring_witness_name, mirroring_witness_state_desc FROM sys.database_mirroring  
```  
  
 <span data-ttu-id="c293e-306">このカタログ ビューの詳細については、「[sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c293e-306">For more information about this catalog view, see [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
###  <a name="factors-affecting-behavior-on-loss-of-the-principal-server"></a><a name="FactorsOnLossOfPrincipal"></a> <span data-ttu-id="c293e-307">プリンシパル サーバーの消失時の動作に影響する要因</span><span class="sxs-lookup"><span data-stu-id="c293e-307">Factors Affecting Behavior on Loss of the Principal Server</span></span>  
 <span data-ttu-id="c293e-308">次の表に、トランザクションの安全性設定、データベースの状態、およびミラーリング監視サーバーの状態の組み合わせが、プリンシパル サーバーの消失時のミラーリング セッションの動作にどのように影響するかを示します。</span><span class="sxs-lookup"><span data-stu-id="c293e-308">The following table summarizes the combined effect of the transaction safety setting, the state of the database, and the state of the witness on the behavior of a mirroring session on the loss of the principal server.</span></span>  
  
|<span data-ttu-id="c293e-309">トランザクションの安全性</span><span class="sxs-lookup"><span data-stu-id="c293e-309">Transaction safety</span></span>|<span data-ttu-id="c293e-310">ミラー データベースのミラーリングの状態</span><span class="sxs-lookup"><span data-stu-id="c293e-310">Mirroring state of mirror database</span></span>|<span data-ttu-id="c293e-311">ミラーリング監視サーバーの状態</span><span class="sxs-lookup"><span data-stu-id="c293e-311">Witness state</span></span>|<span data-ttu-id="c293e-312">プリンシパルが停止しているときの動作</span><span class="sxs-lookup"><span data-stu-id="c293e-312">Behavior when principal is lost</span></span>|  
|------------------------|----------------------------------------|-------------------|-------------------------------------|  
|<span data-ttu-id="c293e-313">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-313">FULL</span></span>|<span data-ttu-id="c293e-314">SYNCHRONIZED</span><span class="sxs-lookup"><span data-stu-id="c293e-314">SYNCHRONIZED</span></span>|<span data-ttu-id="c293e-315">CONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-315">CONNECTED</span></span>|<span data-ttu-id="c293e-316">自動フェールオーバーが発生します。</span><span class="sxs-lookup"><span data-stu-id="c293e-316">Automatic failover occurs.</span></span>|  
|<span data-ttu-id="c293e-317">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-317">FULL</span></span>|<span data-ttu-id="c293e-318">SYNCHRONIZED</span><span class="sxs-lookup"><span data-stu-id="c293e-318">SYNCHRONIZED</span></span>|<span data-ttu-id="c293e-319">DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-319">DISCONNECTED</span></span>|<span data-ttu-id="c293e-320">ミラー サーバーが停止します。フェールオーバーはできません。データベースを使用できません。</span><span class="sxs-lookup"><span data-stu-id="c293e-320">Mirror server stops; failover is not possible, and the database cannot be made available.</span></span>|  
|<span data-ttu-id="c293e-321">OFF</span><span class="sxs-lookup"><span data-stu-id="c293e-321">OFF</span></span>|<span data-ttu-id="c293e-322">SUSPENDED または DISCONNECTED</span><span class="sxs-lookup"><span data-stu-id="c293e-322">SUSPENDED or DISCONNECTED</span></span>|<span data-ttu-id="c293e-323">NULL (ミラーリング監視サーバーなし)</span><span class="sxs-lookup"><span data-stu-id="c293e-323">NULL (no witness)</span></span>|<span data-ttu-id="c293e-324">サービスがミラー サーバーに強制的に引き継がれます (データが消失する可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="c293e-324">Service can be forced to the mirror server (with possible data loss).</span></span>|  
|<span data-ttu-id="c293e-325">FULL</span><span class="sxs-lookup"><span data-stu-id="c293e-325">FULL</span></span>|<span data-ttu-id="c293e-326">SYNCHRONIZING または SUSPENDED</span><span class="sxs-lookup"><span data-stu-id="c293e-326">SYNCHRONIZING or SUSPENDED</span></span>|<span data-ttu-id="c293e-327">NULL (ミラーリング監視サーバーなし)</span><span class="sxs-lookup"><span data-stu-id="c293e-327">NULL (no witness)</span></span>|<span data-ttu-id="c293e-328">サービスがミラー サーバーに強制的に引き継がれます (データが消失する可能性があります)。</span><span class="sxs-lookup"><span data-stu-id="c293e-328">Service can be forced to the mirror server (with possible data loss).</span></span>|  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="c293e-329">関連タスク</span><span class="sxs-lookup"><span data-stu-id="c293e-329">Related Tasks</span></span>  
  
-   [<span data-ttu-id="c293e-330">データベース ミラーリング監視サーバーを追加または置き換える方法 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="c293e-330">Add or Replace a Database Mirroring Witness &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/add-or-replace-a-database-mirroring-witness-sql-server-management-studio.md)  
  
-   [<span data-ttu-id="c293e-331">Windows 認証を使用してデータベース ミラーリング セッションを確立する &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="c293e-331">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
-   [<span data-ttu-id="c293e-332">Windows 認証を使用してデータベースのミラーリング監視を追加する &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c293e-332">Add a Database Mirroring Witness Using Windows Authentication &#40;Transact-SQL&#41;</span></span>](add-a-database-mirroring-witness-using-windows-authentication-transact-sql.md)  
  
-   [<span data-ttu-id="c293e-333">データベース ミラーリング セッションからのミラーリング監視サーバーの削除 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c293e-333">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
-   [<span data-ttu-id="c293e-334">データベース ミラーリング セッションでのトランザクションの安全性の変更 &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c293e-334">Change Transaction Safety in a Database Mirroring Session &#40;Transact-SQL&#41;</span></span>](change-transaction-safety-in-a-database-mirroring-session-transact-sql.md)  
  
## <a name="see-also"></a><span data-ttu-id="c293e-335">参照</span><span class="sxs-lookup"><span data-stu-id="c293e-335">See Also</span></span>  
 <span data-ttu-id="c293e-336">[データベース ミラーリングの監視 &#40;SQL Server&#41;](monitoring-database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="c293e-336">[Monitoring Database Mirroring &#40;SQL Server&#41;](monitoring-database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="c293e-337">データベース ミラーリング監視サーバー</span><span class="sxs-lookup"><span data-stu-id="c293e-337">Database Mirroring Witness</span></span>](database-mirroring-witness.md)  
