---
title: データベース ミラーリング モニター ([警告] ページ) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: e7afc4ff0e6b69c70535ef39677f3d834edbee15
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87742578"
---
# <a name="database-mirroring-monitor-warnings-page"></a><span data-ttu-id="318f1-102">データベース ミラーリング モニター ([警告] ページ)</span><span class="sxs-lookup"><span data-stu-id="318f1-102">Database Mirroring Monitor (Warnings Page)</span></span>
  <span data-ttu-id="318f1-103">データベース ミラーリングのイベントでサポートされている警告の読み取り専用の一覧と指定された警告しきい値 (存在する場合) を表示します。</span><span class="sxs-lookup"><span data-stu-id="318f1-103">Displays a read-only list of warnings supported on database mirroring events and the specified warning threshold values, if available.</span></span>  
  
 <span data-ttu-id="318f1-104">**SQL Server Management Studio を使用してデータベース ミラーリングを監視するには**</span><span class="sxs-lookup"><span data-stu-id="318f1-104">**To use SQL Server Management Studio to monitor database mirroring**</span></span>  
  
-   [<span data-ttu-id="318f1-105">データベース ミラーリング モニターの起動 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="318f1-105">Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;</span></span>](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a><span data-ttu-id="318f1-106">[列]</span><span class="sxs-lookup"><span data-stu-id="318f1-106">Columns</span></span>  
 <span data-ttu-id="318f1-107">**警告**</span><span class="sxs-lookup"><span data-stu-id="318f1-107">**Warning**</span></span>  
 <span data-ttu-id="318f1-108">しきい値を定義可能な警告には、次のものがあります。</span><span class="sxs-lookup"><span data-stu-id="318f1-108">The warnings for which you can define a threshold include:</span></span>  
  
|<span data-ttu-id="318f1-109">警告</span><span class="sxs-lookup"><span data-stu-id="318f1-109">Warning</span></span>|<span data-ttu-id="318f1-110">Threshold</span><span class="sxs-lookup"><span data-stu-id="318f1-110">Threshold</span></span>|  
|-------------|---------------|  
|<span data-ttu-id="318f1-111">**[未送信のログがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-111">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="318f1-112">未送信のログが何キロバイトになると、プリンシパル サーバー インスタンスで警告を生成するかを指定します。</span><span class="sxs-lookup"><span data-stu-id="318f1-112">Specifies how many kilobytes (KB) of unsent log will generate a warning on the principal server instance.</span></span> <span data-ttu-id="318f1-113">この警告は、キロバイト数でデータ損失の可能性を測定する場合に役立ちます。また、高パフォーマンス モードに特に関連します。</span><span class="sxs-lookup"><span data-stu-id="318f1-113">This warning helps measure the potential for data loss in terms of KB, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="318f1-114">パートナーとの通信が切断されたためにミラーリングが一時停止または中断している場合は、高安全モードにも関係します。</span><span class="sxs-lookup"><span data-stu-id="318f1-114">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="318f1-115">**[復元されていないログがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-115">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="318f1-116">復元されていないログが何キロバイトになると、ミラー サーバー インスタンスで警告を生成するかを指定します。</span><span class="sxs-lookup"><span data-stu-id="318f1-116">Specifies how many KB of unrestored log will generate a warning on the mirror server instance.</span></span> <span data-ttu-id="318f1-117">この警告は、キロバイト数でフェールオーバー時間を測定する場合に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="318f1-117">This warning is useful for measuring failover time in terms of kilobytes.</span></span> <span data-ttu-id="318f1-118">*フェールオーバー時間* の大部分は、以前のミラー サーバーの再実行キューに残っているログをロールフォワードする場合に必要となる時間です。この時間にわずかな時間を加えます。</span><span class="sxs-lookup"><span data-stu-id="318f1-118">*Failover time* consists mainly of the time that the former mirror server requires to roll forward any log remaining in its redo queue, plus a short additional time.</span></span><br /><br /> <span data-ttu-id="318f1-119">注:自動フェールオーバーの場合、システムがエラーを通知するまでの時間は、フェールオーバー時間に関係ありません。</span><span class="sxs-lookup"><span data-stu-id="318f1-119">Note: For an automatic failover, the time for the system to notice the error is independent of the failover time.</span></span><br /><br /> <span data-ttu-id="318f1-120">詳しくは、「 [役割の交代中に発生するサービスの中断時間の算出 &#40;データベース ミラーリング&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md)という処理により、一般的にプリンシパルとミラーの役割を相互交換できます。</span><span class="sxs-lookup"><span data-stu-id="318f1-120">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>|  
|<span data-ttu-id="318f1-121">**[最も古い未送信のトランザクションの経過期間がしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-121">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="318f1-122">送信キュー内にトランザクションを累積できる時間 (分単位) を指定します。この時間を経過すると、プリンシパル サーバー インスタンスで警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-122">Specifies the number of minutes worth of transactions that can accumulate in the send queue before a warning is generated on the principal server instance.</span></span> <span data-ttu-id="318f1-123">この警告は、時間でデータ損失の可能性を測定する場合に役立ちます。また、高パフォーマンス モードに特に関連します。</span><span class="sxs-lookup"><span data-stu-id="318f1-123">This warning helps measure the potential for data loss in terms of time, and is particularly relevant for high-performance mode.</span></span> <span data-ttu-id="318f1-124">パートナーとの通信が切断されたためにミラーリングが一時停止または中断している場合は、高安全モードにも関係します。</span><span class="sxs-lookup"><span data-stu-id="318f1-124">However, the warning is also relevant for high-safety mode when mirroring is paused or suspended because the partners become disconnected.</span></span>|  
|<span data-ttu-id="318f1-125">**[ミラー コミットのオーバーヘッドがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-125">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="318f1-126">プリンシパル サーバーで警告を生成する前に許容されるトランザクションごとの平均遅延時間をミリ秒単位で指定します。</span><span class="sxs-lookup"><span data-stu-id="318f1-126">Specifies the number of milliseconds of average delay per transaction tolerated before a warning is generated on the principal server.</span></span> <span data-ttu-id="318f1-127">この遅延時間は、ミラー サーバー インスタンスによってトランザクションのログ レコードが再実行キューに書き込まれるのをプリンシパル サーバー インスタンスが待機している間、発生したオーバーヘッドの量になります。</span><span class="sxs-lookup"><span data-stu-id="318f1-127">This delay is the amount of overhead incurred while the principal server instance waits for the mirror server instance to write the transaction's log record into the redo queue.</span></span> <span data-ttu-id="318f1-128">この値は高安全モードにのみ関係します。</span><span class="sxs-lookup"><span data-stu-id="318f1-128">This value is relevant only in high-safety mode.</span></span>|  
  
 <span data-ttu-id="318f1-129">**'** _<server_instance>_ **' でのしきい値**</span><span class="sxs-lookup"><span data-stu-id="318f1-129">**Threshold at '** _<server_instance>_ **'**</span></span>  
 <span data-ttu-id="318f1-130">各警告に対して、サーバー インスタンスのいずれかに現在のユーザーが指定しているしきい値 (存在する場合) を表示します。</span><span class="sxs-lookup"><span data-stu-id="318f1-130">For each of the warnings, displays the current user-specified threshold, if any, for one of the server instances.</span></span> <span data-ttu-id="318f1-131">サーバー インスタンスの完全なインスタンス名は、対応している列見出しに表示されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-131">The full instance name of the server instance is indicated in the corresponding column heading.</span></span>  
  
 <span data-ttu-id="318f1-132">詳細については、後の「解説」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="318f1-132">For more information, see "Remarks," later in this topic.</span></span>  
  
 <span data-ttu-id="318f1-133">**[しきい値の設定]**</span><span class="sxs-lookup"><span data-stu-id="318f1-133">**Set Thresholds**</span></span>  
 <span data-ttu-id="318f1-134">このボタンをクリックして、フェールオーバー パートナーごとに 1 つの警告のしきい値を設定します。</span><span class="sxs-lookup"><span data-stu-id="318f1-134">Click this button to set a threshold for one warning on each of the failover partners.</span></span>  
  
 <span data-ttu-id="318f1-135">詳細については、後の「解説」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="318f1-135">For more information, see "Remarks," later in this topic.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="318f1-136">解説</span><span class="sxs-lookup"><span data-stu-id="318f1-136">Remarks</span></span>  
 <span data-ttu-id="318f1-137">サーバー インスタンスの情報が現在表示できない場合、対応している **['<server_instance>' でのしきい値]** 列のセルには、背景が灰色のウォーターマーク テキストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-137">If information is currently unavailable for a server instance, the cells of the corresponding **Threshold at** column display a gray background and watermark text.</span></span> <span data-ttu-id="318f1-138">モニターがサーバー インスタンスに接続されていない場合、グリッドの各セルには、既定のインスタンスか名前付きインスタンスかに応じて、" _<SYSTEM_NAME>_ **に接続していません**" または " _<SYSTEM_NAME>_ **\\** _<instance_name>_ **に接続していません**" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-138">If the monitor is not connected to the server instance, in every cell the grid displays either **Not connected to** _<SYSTEM_NAME>_ or **Not connected to** _<SYSTEM_NAME>_**\\**_<instance_name>_, depending on whether the instance is the default instance or a named instance.</span></span> <span data-ttu-id="318f1-139">モニターがクエリの応答を待機している場合、グリッドの各セルに **"データを待機しています..."** と表示されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-139">If the monitor is waiting for a query to return, the grid displays **Waiting for data...** in every cell.</span></span>  
  
 <span data-ttu-id="318f1-140">情報を表示できる場合、各警告のセルには、指定されたしきい値が表示されるか、または " **有効になっていません**" と表示されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-140">When information is available, the cell for each warning displays either a specified threshold value (and unit of measurement), or **Not enabled**.</span></span>  
  
 <span data-ttu-id="318f1-141">状態テーブルが更新されたときにしきい値を超えた場合、状態の行が記録される際に Windows イベント ログにイベントがログ記録されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-141">If a threshold is exceeded at the time the status table is refreshed, an event is logged to the Windows event log when the status row is recorded.</span></span> <span data-ttu-id="318f1-142">既定では、モニターが動作していない場合、状態の行は 1 分ごとに記録されます。</span><span class="sxs-lookup"><span data-stu-id="318f1-142">By default, the status row is recorded once a minute if the monitor is not running.</span></span> <span data-ttu-id="318f1-143">SQL Server エージェントまたは Microsoft Management Operations Manager (MOM) などの他のプログラムを使用して、ログに記録された各種イベントの警告を構成できます。</span><span class="sxs-lookup"><span data-stu-id="318f1-143">You can configure an alert on each type of logged event by using the SQL Server Agent or another program, such as Microsoft Management Operations Manager (MOM).</span></span>  
  
 <span data-ttu-id="318f1-144">特定のパートナーのログに記録されるイベントは、現在のロール (プリンシパルまたはミラー) によって異なります。</span><span class="sxs-lookup"><span data-stu-id="318f1-144">On a given partner, the events logged depend on its current role, principal or mirror.</span></span> <span data-ttu-id="318f1-145">ただし、データベースがフェールオーバーすると警告が保持されるため、両方のパートナーに対して特定のイベントの警告しきい値を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="318f1-145">However, we recommend that you set a warning threshold for a given event on both partners to ensure that the warning persists if the database fails over.</span></span> <span data-ttu-id="318f1-146">適切なしきい値は、各パートナーのシステムのパフォーマンスによって異なります。</span><span class="sxs-lookup"><span data-stu-id="318f1-146">The appropriate threshold for each partner depends on the performance capabilities of that partner's system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="318f1-147">**sp_dbmmonitorchangealert** システム ストアド プロシージャを使用して、同等のイベント (未送信のログ、未回復のログ、最も古い未送信のトランザクション、およびミラー コミットのオーバーヘッド) のしきい値を構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="318f1-147">You can also use the **sp_dbmmonitorchangealert** system stored procedure to configure thresholds for the equivalent events-unsent log, unrecovered log, oldest unsent transaction, and mirror commit overhead.</span></span> <span data-ttu-id="318f1-148">詳細については、「[sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="318f1-148">For more information, see [sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql).</span></span>  
  
 <span data-ttu-id="318f1-149">次の表は、各警告に関連するイベント ID を示しています。</span><span class="sxs-lookup"><span data-stu-id="318f1-149">The following table shows the event ID associated with each warning.</span></span>  
  
|<span data-ttu-id="318f1-150">データベース ミラーリング モニターの警告</span><span class="sxs-lookup"><span data-stu-id="318f1-150">Database Mirroring Monitor warning</span></span>|<span data-ttu-id="318f1-151">イベント名</span><span class="sxs-lookup"><span data-stu-id="318f1-151">Event name</span></span>|<span data-ttu-id="318f1-152">イベント ID</span><span class="sxs-lookup"><span data-stu-id="318f1-152">Event ID</span></span>|  
|----------------------------------------|----------------|--------------|  
|<span data-ttu-id="318f1-153">**[未送信のログがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-153">**Warn if the unsent log exceeds the threshold**</span></span>|<span data-ttu-id="318f1-154">未送信のログ</span><span class="sxs-lookup"><span data-stu-id="318f1-154">Unsent log</span></span>|<span data-ttu-id="318f1-155">32042</span><span class="sxs-lookup"><span data-stu-id="318f1-155">32042</span></span>|  
|<span data-ttu-id="318f1-156">**[復元されていないログがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-156">**Warn if the unrestored log exceeds the threshold**</span></span>|<span data-ttu-id="318f1-157">未復元のログ</span><span class="sxs-lookup"><span data-stu-id="318f1-157">Unrestored log</span></span>|<span data-ttu-id="318f1-158">32043</span><span class="sxs-lookup"><span data-stu-id="318f1-158">32043</span></span>|  
|<span data-ttu-id="318f1-159">**[最も古い未送信のトランザクションの経過期間がしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-159">**Warn if the age of the oldest unsent transaction exceeds the threshold**</span></span>|<span data-ttu-id="318f1-160">最も古い未送信のトランザクション</span><span class="sxs-lookup"><span data-stu-id="318f1-160">Oldest unsent transaction</span></span>|<span data-ttu-id="318f1-161">32044</span><span class="sxs-lookup"><span data-stu-id="318f1-161">32044</span></span>|  
|<span data-ttu-id="318f1-162">**[ミラー コミットのオーバーヘッドがしきい値を超えた場合に警告する]**</span><span class="sxs-lookup"><span data-stu-id="318f1-162">**Warn if the mirror commit overhead exceeds the threshold**</span></span>|<span data-ttu-id="318f1-163">ミラー コミットのオーバーヘッド</span><span class="sxs-lookup"><span data-stu-id="318f1-163">Mirror commit overhead</span></span>|<span data-ttu-id="318f1-164">32045</span><span class="sxs-lookup"><span data-stu-id="318f1-164">32045</span></span>|  
  
## <a name="permissions"></a><span data-ttu-id="318f1-165">アクセス許可</span><span class="sxs-lookup"><span data-stu-id="318f1-165">Permissions</span></span>  
 <span data-ttu-id="318f1-166">フル アクセスの場合、 **sysadmin** 固定サーバー ロールのメンバーシップが必要です。</span><span class="sxs-lookup"><span data-stu-id="318f1-166">For full access, requires membership in the **sysadmin** fixed server role.</span></span> <span data-ttu-id="318f1-167">**sysadmin** のメンバーだけが主要なパフォーマンス基準の警告しきい値を構成および表示できます。</span><span class="sxs-lookup"><span data-stu-id="318f1-167">Only members of **sysadmin** can configure and view warning thresholds for key performance metrics.</span></span>  
  
 <span data-ttu-id="318f1-168">**dbm_monitor** ロールのメンバーシップを使用して、 **[警告]** ページに最新の状態行のみを表示できます。</span><span class="sxs-lookup"><span data-stu-id="318f1-168">Membership in the **dbm_monitor** role enables you to view only the most recent status row on the **Warnings** Page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="318f1-169">参照</span><span class="sxs-lookup"><span data-stu-id="318f1-169">See Also</span></span>  
 <span data-ttu-id="318f1-170">[データベース ミラーリング モニターの起動 &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span><span class="sxs-lookup"><span data-stu-id="318f1-170">[Start Database Mirroring Monitor &#40;SQL Server Management Studio&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md) </span></span>  
 <span data-ttu-id="318f1-171">[データベース ミラーリングの監視 &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="318f1-171">[Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 [<span data-ttu-id="318f1-172">データベース ミラーリング セキュリティ構成ウィザードの起動 &#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="318f1-172">Start the Configuring Database Mirroring Security Wizard &#40;SQL Server Management Studio&#41;</span></span>](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
