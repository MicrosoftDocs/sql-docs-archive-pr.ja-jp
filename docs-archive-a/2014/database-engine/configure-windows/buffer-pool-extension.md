---
title: バッファー プール拡張 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
ms.assetid: 909ab7d2-2b29-46f5-aea1-280a5f8fedb4
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 42a8873f4046a307e3b8ec1ce703a34bf8cb0df2
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87740446"
---
# <a name="buffer-pool-extension"></a><span data-ttu-id="2f7fe-102">バッファー プール拡張</span><span class="sxs-lookup"><span data-stu-id="2f7fe-102">Buffer Pool Extension</span></span>
  <span data-ttu-id="2f7fe-103">[!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]で導入されたバッファー プール拡張は、不揮発性ランダム アクセス メモリ (ソリッドステート ドライブ) 拡張としての [!INCLUDE[ssDE](../../includes/ssde-md.md)] バッファー プールへのシームレスな統合を実現することで、I/O スループットを大幅に向上させます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-103">Introduced in [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)], the buffer pool extension provides the seamless integration of a nonvolatile random access memory (that is, solid-state drive) extension to the [!INCLUDE[ssDE](../../includes/ssde-md.md)] buffer pool to significantly improve I/O throughput.</span></span> <span data-ttu-id="2f7fe-104">バッファー プール拡張は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の一部のエディションでは使用できません。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-104">The buffer pool extension is not available in every [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] edition.</span></span> <span data-ttu-id="2f7fe-105">詳しくは「 [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-105">For more information, see [Features Supported by the Editions of SQL Server 2014](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md).</span></span>

## <a name="benefits-of-the-buffer-pool-extension"></a><span data-ttu-id="2f7fe-106">バッファー プール拡張の利点</span><span class="sxs-lookup"><span data-stu-id="2f7fe-106">Benefits of the Buffer Pool Extension</span></span>
 <span data-ttu-id="2f7fe-107">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] データベースの主な目的はデータの格納と取得であるため、データベース エンジンの主要な特性は頻繁なディスク I/O ということになります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-107">The primary purpose of a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] database is to store and retrieve data, so intensive disk I/O is a core characteristic of the Database Engine.</span></span> <span data-ttu-id="2f7fe-108">ディスク I/O 操作は多くのリソースを消費するうえ、完了するのに比較的長い時間がかかるため、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] では I/O の効率を上げることに重点を置いています。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-108">Because disk I/O operations can consume many resources and take a relatively long time to finish, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] focuses on making I/O highly efficient.</span></span> <span data-ttu-id="2f7fe-109">バッファー プールは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のプライマリ メモリの割り当て元となります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-109">The buffer pool serves as a primary memory allocation source of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f7fe-110">バッファー管理は、この効率向上を実現するための重要なコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-110">Buffer management is a key component in achieving this efficiency.</span></span> <span data-ttu-id="2f7fe-111">バッファー管理コンポーネントは 2 つのメカニズムから構成されています。1 つはデータベース ページに対するアクセスと更新を行うバッファー マネージャーで、もう 1 つはデータベース ファイルの I/O 数を削減するためのバッファー プールです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-111">The buffer management component consists of two mechanisms: the buffer manager to access and update database pages, and the buffer pool), to reduce database file I/O.</span></span>

 <span data-ttu-id="2f7fe-112">データ ページとインデックス ページがディスクからバッファー プールに読み込まれ、変更されたページ (ダーティ ページとも呼ばれます) がディスクに書き戻されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-112">Data and index pages are read from disk into the buffer pool and modified pages (also known as dirty pages) are written back to disk.</span></span> <span data-ttu-id="2f7fe-113">サーバー チェックポイントおよびデータベース チェックポイントでメモリ不足が発生すると、バッファー キャッシュ内のホットな (アクティブな) ダーティ ページがキャッシュから削除され、機械式ディスクに書き込まれた後、再度キャッシュに読み込まれます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-113">Memory pressure on the server and database checkpoints cause hot (active) dirty pages in the buffer cache to be evicted from the cache and written to mechanical disks and then read back into the cache.</span></span> <span data-ttu-id="2f7fe-114">通常、これらの I/O 操作は、4 ～ 16 KB という小規模なデータのランダム読み取り/書き込みです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-114">These I/O operations are typically small random reads and writes on the order of 4 to 16 KB of data.</span></span> <span data-ttu-id="2f7fe-115">小規模なランダム I/O パターンの場合、頻繁なシークが発生して機械式ディスクのアームが動き続けるため、I/O 待機時間が長くなり、システムの総 I/O スループットが低下します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-115">Small random I/O patterns incur frequent seeks, competing for the mechanical disk arm, increasing I/O latency, and reducing aggregate I/O throughput of the system.</span></span>

 <span data-ttu-id="2f7fe-116">このような I/O ボトルネックを解決するための一般的な方法は、DRAM を増設するか、または高パフォーマンス SAS スピンドルを追加する方法です。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-116">The typical approach to resolving these I/O bottlenecks is to add more DRAM, or alternatively, added high-performance SAS spindles.</span></span> <span data-ttu-id="2f7fe-117">これらのオプションは効果的ですが、重大な欠点があります。DRAM は、データ ストレージ ドライブよりも高価です。スピンドル数を追加すると、ハードウェアの購入経費が増えるだけでなく、電力消費量の増加およびコンポーネントの故障の可能性の増加に伴い運用コストが増加します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-117">While these options are helpful, they have significant drawbacks: DRAM is more expensive than data storage drives and adding spindles increases capital expenditure in hardware acquisition and increases operational costs by increased power consumption and increased probability of component failure.</span></span>

 <span data-ttu-id="2f7fe-118">バッファー プール拡張機能は、不揮発性ストレージ (通常は SSD) でバッファー プール キャッシュを拡張します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-118">The buffer pool extension feature extends the buffer pool cache with nonvolatile storage (usually SSD).</span></span> <span data-ttu-id="2f7fe-119">この拡張により、より大きなデータベースのワーキング セットをバッファー プールに格納でき、その結果、RAM と SSD の間の I/O のページングが強制的に実行されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-119">Because of this extension, the buffer pool can accommodate a larger database working set, which forces the paging of I/Os between RAM and the SSDs.</span></span> <span data-ttu-id="2f7fe-120">これによって、小規模なランダム I/O の処理が実質的に機械式ディスクから SSD に移行されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-120">This effectively offloads small random I/Os from mechanical disks to SSDs.</span></span> <span data-ttu-id="2f7fe-121">SSD は待機時間が短くランダム I/O のパフォーマンスに優れているため、バッファー プール拡張によって I/O スループットが大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-121">Because of the lower latency and better random I/O performance of SSDs, the buffer pool extension significantly improves I/O throughput.</span></span>

 <span data-ttu-id="2f7fe-122">バッファー プール拡張機能の利点を次の一覧に示します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-122">The following list describes the benefits of the buffer pool extension feature.</span></span>

-   <span data-ttu-id="2f7fe-123">ランダム I/O のスループットの向上</span><span class="sxs-lookup"><span data-stu-id="2f7fe-123">Increased random I/O throughput</span></span>

-   <span data-ttu-id="2f7fe-124">I/O 待機時間の削減</span><span class="sxs-lookup"><span data-stu-id="2f7fe-124">Reduced I/O latency</span></span>

-   <span data-ttu-id="2f7fe-125">トランザクションのスループットの向上</span><span class="sxs-lookup"><span data-stu-id="2f7fe-125">Increased transaction throughput</span></span>

-   <span data-ttu-id="2f7fe-126">より大きなハイブリッド バッファー プールによる読み取りパフォーマンスの向上</span><span class="sxs-lookup"><span data-stu-id="2f7fe-126">Improved read performance with a larger hybrid buffer pool</span></span>

-   <span data-ttu-id="2f7fe-127">現在および将来の低コストのメモリ ドライブを使用できるキャッシュ アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="2f7fe-127">A caching architecture that can take advantage of present and future low-cost memory drives</span></span>

### <a name="concepts"></a><span data-ttu-id="2f7fe-128">概念</span><span class="sxs-lookup"><span data-stu-id="2f7fe-128">Concepts</span></span>
 <span data-ttu-id="2f7fe-129">バッファー プール拡張機能に関連する用語を次に示します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-129">The following terms are applicable to the buffer pool extension feature.</span></span>

 <span data-ttu-id="2f7fe-130">ソリッドステートドライブ (SSD) ソリッドステートドライブは、データをメモリ (RAM) に永続的な方法で格納します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-130">Solid-state drive (SSD) Solid-state drives store data in memory (RAM) in a persistent manner.</span></span> <span data-ttu-id="2f7fe-131">詳細については、 [この定義](http://en.wikipedia.org/wiki/Solid-state_drive)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-131">For more information, see [this definition](http://en.wikipedia.org/wiki/Solid-state_drive).</span></span>

 <span data-ttu-id="2f7fe-132">バッファーで [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は、バッファーはメモリ内の 8 KB のページで、データページやインデックスページと同じサイズです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-132">Buffer In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], A buffer is an 8-KB page in memory, the same size as a data or index page.</span></span> <span data-ttu-id="2f7fe-133">したがって、バッファー キャッシュは 8 KB 単位のページに分割されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-133">Thus, the buffer cache is divided into 8-KB pages.</span></span> <span data-ttu-id="2f7fe-134">バッファー マネージャーが別のデータを読み取るためのバッファー領域を必要とするまで、そのページはバッファー キャッシュ内に残ります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-134">A page remains in the buffer cache until the buffer manager needs the buffer area to read in more data.</span></span> <span data-ttu-id="2f7fe-135">データに変更が加えられた場合だけ、そのデータがディスクに書き戻されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-135">Data is written back to disk only if it is modified.</span></span> <span data-ttu-id="2f7fe-136">これらのメモリ内の修正されたページは、"ダーティ ページ" と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-136">These in-memory modified pages are known as dirty pages.</span></span> <span data-ttu-id="2f7fe-137">ページは、ディスク上のデータベース イメージと等価であるときにクリーンです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-137">A page is clean when it is equivalent to its database image on disk.</span></span> <span data-ttu-id="2f7fe-138">バッファー キャッシュ内のデータは、ディスクに書き戻す前に何度でも変更できます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-138">Data in the buffer cache can be modified multiple times before being written back to disk.</span></span>

 <span data-ttu-id="2f7fe-139">バッファープールは、バッファーキャッシュとも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-139">Buffer pool Also called buffer cache.</span></span> <span data-ttu-id="2f7fe-140">バッファー プールは、キャッシュされたデータ ページを利用するためにすべてのデータベースで共有されるグローバル リソースです。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-140">The buffer pool is a global resource shared by all databases for their cached data pages.</span></span> <span data-ttu-id="2f7fe-141">バッファー プール キャッシュの最大サイズと最小サイズは、起動時か、または SQL Server のインスタンスが sp_configure を使用して動的に再構成されるときに決定されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-141">The maximum and minimum size of the buffer pool cache is determined during startup or when the instance of SQL server is dynamically reconfigured by using sp_configure.</span></span> <span data-ttu-id="2f7fe-142">このサイズにより、実行中のインスタンスで任意のときにバッファー プールにキャッシュできる最大ページ数が決まります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-142">This size determines the maximum number of pages that can be cached in the buffer pool at any time in the running instance.</span></span>

 <span data-ttu-id="2f7fe-143">チェックポイントチェックポイントを作成すると、予期し [!INCLUDE[ssDE](../../includes/ssde-md.md)] ないシャットダウンやクラッシュの後、復旧中にトランザクションログに含まれていた変更の適用をが開始できる優れたポイントが作成されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-143">Checkpoint A checkpoint creates a known good point from which the [!INCLUDE[ssDE](../../includes/ssde-md.md)] can start applying changes contained in the transaction log during recovery after an unexpected shutdown or crash.</span></span> <span data-ttu-id="2f7fe-144">チェックポイントは、変更されたページとトランザクション ログ情報をメモリからディスクに書き込み、さらにトランザクション ログに関する情報を記録します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-144">A checkpoint writes the dirty pages and transaction log information from memory to disk and, also, records information about the transaction log.</span></span> <span data-ttu-id="2f7fe-145">詳細については、「[データベース チェックポイント &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-145">For more information, see [Database Checkpoints &#40;SQL Server&#41;](../../relational-databases/logs/database-checkpoints-sql-server.md).</span></span>

## <a name="buffer-pool-extension-details"></a><span data-ttu-id="2f7fe-146">バッファー プール拡張の詳細</span><span class="sxs-lookup"><span data-stu-id="2f7fe-146">Buffer Pool Extension Details</span></span>
 <span data-ttu-id="2f7fe-147">SSD ストレージは、ディスク ストレージ サブシステムではなく、メモリ サブシステムの拡張として使用されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-147">SSD storage is used as an extension to the memory subsystem rather than the disk storage subsystem.</span></span> <span data-ttu-id="2f7fe-148">つまり、バッファー プール拡張ファイルによって、バッファー プール マネージャーが DRAM と NAND フラッシュ メモリの両方を使用し、SSD を使用した不揮発性ランダム アクセス メモリ上に "微温" ページ用のはるかに大きなバッファー プールを保持できるようになります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-148">That is, the buffer pool extension file allows the buffer pool manager to use both DRAM and NAND-Flash memory to maintain a much larger buffer pool of lukewarm pages in nonvolatile random access memory backed by SSDs.</span></span> <span data-ttu-id="2f7fe-149">これにより、DRAM としてのレベル 1 (L1) と SSD 上のバッファー プール拡張ファイルとしてのレベル 2 (L2) から成る複数レベルのキャッシュ階層が作成されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-149">This creates a multilevel caching hierarchy with level 1 (L1) as the DRAM and level 2 (L2) as the buffer pool extension file on the SSD.</span></span> <span data-ttu-id="2f7fe-150">データの安全性を維持するため、L2 キャッシュにはクリーンなページのみが書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-150">Only clean pages are written to the L2 cache, which helps maintain data safety.</span></span> <span data-ttu-id="2f7fe-151">バッファー マネージャーは、L1 キャッシュと L2 キャッシュの間のクリーンなページの移動を処理します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-151">The buffer manager handles the movement of clean pages between the L1 and L2 caches.</span></span>

 <span data-ttu-id="2f7fe-152">次の図は、バッファー プールのアーキテクチャを他の [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] コンポーネントに関連して示した概要図です。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-152">The following illustration provides a high-level architectural overview of the buffer pool relative to other [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] components.</span></span>

 <span data-ttu-id="2f7fe-153">![SSD バッファー プール拡張機能のアーキテクチャ](../media/ssdbufferpoolextensionarchitecture.gif "SSD バッファー プール拡張機能のアーキテクチャ")</span><span class="sxs-lookup"><span data-stu-id="2f7fe-153">![SSD Buffer Pool Extension Architecture](../media/ssdbufferpoolextensionarchitecture.gif "SSD Buffer Pool Extension Architecture")</span></span>

 <span data-ttu-id="2f7fe-154">有効な場合、バッファー プール拡張は、SSD 上のバッファー プール キャッシュ ファイルのサイズおよびファイル パスを指定します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-154">When enabled, the buffer pool extension specifies the size and file path of the buffer pool caching file on the SSD.</span></span> <span data-ttu-id="2f7fe-155">このファイルは SSD 上のストレージの連続的なエクステントで、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]インスタンスの起動時に静的に構成されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-155">This file is a contiguous extent of storage on the SSD and is statically configured during startup of the instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="2f7fe-156">ファイルの構成パラメーターの変更は、バッファー プール拡張機能が無効になっている場合にのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-156">Alterations to the file configuration parameters can only be done when the buffer pool extension feature is disabled.</span></span> <span data-ttu-id="2f7fe-157">バッファー プール拡張を無効にすると、すべての関連する構成設定がレジストリから削除されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-157">When the buffer pool extension is disabled, all related configuration settings are removed from the registry.</span></span> <span data-ttu-id="2f7fe-158">バッファー プール拡張ファイルは、SQL Server インスタンスがシャットダウンされると削除されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-158">The buffer pool extension file is deleted upon shutdown of the instance of SQL Server.</span></span>

## <a name="best-practices"></a><span data-ttu-id="2f7fe-159">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="2f7fe-159">Best Practices</span></span>
 <span data-ttu-id="2f7fe-160">次のベスト プラクティスに従うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-160">We recommend that you follow these best practices.</span></span>

-   <span data-ttu-id="2f7fe-161">初めてバッファー プール拡張を有効にした後は、パフォーマンス上の利点を最大限に活用するために SQL Server インスタンスを再起動することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-161">After enabling Buffer Pool Extension for the first time it is recommended to restart the SQL Server instance to get the maximum performance benefits.</span></span>

-   <span data-ttu-id="2f7fe-162">バッファー プール拡張のサイズは、Enterprise Edition では最大で max_server_memory の値の 32 倍に、Standard Edition では 4 倍に設定できます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-162">The buffer pool extension size can be up to 32 times the value of max_server_memory for Enterprise editions, and up to 4 times for Standard edition.</span></span>  <span data-ttu-id="2f7fe-163">物理メモリのサイズ (max_server_memory) とバッファー プール拡張のサイズの比率を 1:16 以下にすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-163">We recommend a ratio between the size of the physical memory (max_server_memory) and the size of the buffer pool extension of 1:16 or less.</span></span> <span data-ttu-id="2f7fe-164">1:4 ～ 1:8 の範囲の低い比率が最適な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-164">A lower ratio in the range of 1:4 to 1:8 may be optimal.</span></span> <span data-ttu-id="2f7fe-165">max_server_memory オプションの設定の詳細については、「 [サーバー メモリーに関するサーバー構成オプション](server-memory-server-configuration-options.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-165">For information about setting the max_server_memory option, see [Server Memory Server Configuration Options](server-memory-server-configuration-options.md).</span></span>

-   <span data-ttu-id="2f7fe-166">運用環境で実装する前にバッファー プール拡張を徹底的にテストします。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-166">Test the buffer pool extension thoroughly before implementing in a production environment.</span></span> <span data-ttu-id="2f7fe-167">運用環境では、ファイルの構成を変更したり、機能をオフにしたりしないでください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-167">Once in production, avoid making configuration changes to the file or turning the feature off.</span></span> <span data-ttu-id="2f7fe-168">これらの操作を行うと、機能が無効にされたときにバッファー プールのサイズが大幅に縮小されるため、サーバー パフォーマンスにマイナスの影響がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-168">These activities may have a negative impact on server performance because the buffer pool is significantly reduced in size when the feature is disabled.</span></span> <span data-ttu-id="2f7fe-169">無効にすると、SQL Server のインスタンスが再起動されるまで、機能をサポートするために使用されたメモリが再利用されません。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-169">When disabled, the memory used to support the feature is not reclaimed until the instance of SQL Server is restarted.</span></span> <span data-ttu-id="2f7fe-170">しかし、機能を再度有効にすると、インスタンスを再起動しなくてもメモリが再利用されます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-170">However, if the feature is re-enabled, the memory will be reused without restarting the instance.</span></span>

## <a name="return-information-about-the-buffer-pool-extension"></a><span data-ttu-id="2f7fe-171">バッファー プール拡張に関する情報の取得</span><span class="sxs-lookup"><span data-stu-id="2f7fe-171">Return Information about the Buffer Pool Extension</span></span>
 <span data-ttu-id="2f7fe-172">次の動的管理ビューを使用して、バッファー プール拡張の構成を表示し、拡張のデータ ページに関する情報を取得できます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-172">You can use the following dynamic management views to display the configuration of the buffer pool extension and return information about the data pages in the extension.</span></span>

-   [<span data-ttu-id="2f7fe-173">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-173">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)

-   [<span data-ttu-id="2f7fe-174">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-174">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)

 <span data-ttu-id="2f7fe-175">SQL Server ではパフォーマンス カウンターが用意されており、Buffer Manager オブジェクトを使用して、バッファー プール拡張ファイル内のデータ ページを追跡することができます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-175">Performance counters are available in the SQL Server, Buffer Manager Object to track the data pages in the buffer pool extension file.</span></span> <span data-ttu-id="2f7fe-176">詳細については、「 [バッファー プール拡張のパフォーマンス カウンター](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-176">For more information, see [buffer pool extension performance counters](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md).</span></span>

 <span data-ttu-id="2f7fe-177">次の XEvent を使用できます。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-177">The following Xevents are available.</span></span>

|<span data-ttu-id="2f7fe-178">XEvent</span><span class="sxs-lookup"><span data-stu-id="2f7fe-178">XEvent</span></span>|<span data-ttu-id="2f7fe-179">説明</span><span class="sxs-lookup"><span data-stu-id="2f7fe-179">Description</span></span>|<span data-ttu-id="2f7fe-180">パラメーター</span><span class="sxs-lookup"><span data-stu-id="2f7fe-180">Parameters</span></span>|
|------------|-----------------|----------------|
|<span data-ttu-id="2f7fe-181">sqlserver.buffer_pool_extension_pages_written</span><span class="sxs-lookup"><span data-stu-id="2f7fe-181">sqlserver.buffer_pool_extension_pages_written</span></span>|<span data-ttu-id="2f7fe-182">ページまたはページのグループがバッファー プールから削除され、バッファー プール拡張ファイルに書き込まれると発生します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-182">Fires when a page or group of pages are evicted from the buffer pool and written to the buffer pool extension file.</span></span>|<span data-ttu-id="2f7fe-183">number_page</span><span class="sxs-lookup"><span data-stu-id="2f7fe-183">number_page</span></span><br /><br /> <span data-ttu-id="2f7fe-184">first_page_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-184">first_page_id</span></span><br /><br /> <span data-ttu-id="2f7fe-185">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="2f7fe-185">first_page_offset</span></span><br /><br /> <span data-ttu-id="2f7fe-186">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-186">initiator_numa_node_id</span></span>|
|<span data-ttu-id="2f7fe-187">sqlserver.buffer_pool_extension_pages_read</span><span class="sxs-lookup"><span data-stu-id="2f7fe-187">sqlserver.buffer_pool_extension_pages_read</span></span>|<span data-ttu-id="2f7fe-188">ページがバッファー プール拡張ファイルからバッファー プールに読み取られると発生します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-188">Fires when a page is read from the buffer pool extension file to the buffer pool.</span></span>|<span data-ttu-id="2f7fe-189">number_page</span><span class="sxs-lookup"><span data-stu-id="2f7fe-189">number_page</span></span><br /><br /> <span data-ttu-id="2f7fe-190">first_page_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-190">first_page_id</span></span><br /><br /> <span data-ttu-id="2f7fe-191">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="2f7fe-191">first_page_offset</span></span><br /><br /> <span data-ttu-id="2f7fe-192">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-192">initiator_numa_node_id</span></span>|
|<span data-ttu-id="2f7fe-193">sqlserver.buffer_pool_extension_pages_evicted</span><span class="sxs-lookup"><span data-stu-id="2f7fe-193">sqlserver.buffer_pool_extension_pages_evicted</span></span>|<span data-ttu-id="2f7fe-194">ページがバッファー プール拡張ファイルから削除されると発生します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-194">Fires when a page is evicted from the buffer pool extension file.</span></span>|<span data-ttu-id="2f7fe-195">number_page</span><span class="sxs-lookup"><span data-stu-id="2f7fe-195">number_page</span></span><br /><br /> <span data-ttu-id="2f7fe-196">first_page_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-196">first_page_id</span></span><br /><br /> <span data-ttu-id="2f7fe-197">first_page_offset</span><span class="sxs-lookup"><span data-stu-id="2f7fe-197">first_page_offset</span></span><br /><br /> <span data-ttu-id="2f7fe-198">initiator_numa_node_id</span><span class="sxs-lookup"><span data-stu-id="2f7fe-198">initiator_numa_node_id</span></span>|
|<span data-ttu-id="2f7fe-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span><span class="sxs-lookup"><span data-stu-id="2f7fe-199">sqlserver.buffer_pool_eviction_thresholds_recalculated</span></span>|<span data-ttu-id="2f7fe-200">削除しきい値が計算されると発生します。</span><span class="sxs-lookup"><span data-stu-id="2f7fe-200">Fires when the eviction threshold is calculated.</span></span>|<span data-ttu-id="2f7fe-201">warm_threshold</span><span class="sxs-lookup"><span data-stu-id="2f7fe-201">warm_threshold</span></span><br /><br /> <span data-ttu-id="2f7fe-202">cold_threshold</span><span class="sxs-lookup"><span data-stu-id="2f7fe-202">cold_threshold</span></span><br /><br /> <span data-ttu-id="2f7fe-203">pages_bypassed_eviction</span><span class="sxs-lookup"><span data-stu-id="2f7fe-203">pages_bypassed_eviction</span></span><br /><br /> <span data-ttu-id="2f7fe-204">eviction_bypass_reason</span><span class="sxs-lookup"><span data-stu-id="2f7fe-204">eviction_bypass_reason</span></span><br /><br /> <span data-ttu-id="2f7fe-205">eviction_bypass_reason_description</span><span class="sxs-lookup"><span data-stu-id="2f7fe-205">eviction_bypass_reason_description</span></span>|

## <a name="related-tasks"></a><span data-ttu-id="2f7fe-206">Related Tasks</span><span class="sxs-lookup"><span data-stu-id="2f7fe-206">Related Tasks</span></span>

|||
|-|-|
|<span data-ttu-id="2f7fe-207">**タスクの説明**</span><span class="sxs-lookup"><span data-stu-id="2f7fe-207">**Task Description**</span></span>|<span data-ttu-id="2f7fe-208">**トピック**</span><span class="sxs-lookup"><span data-stu-id="2f7fe-208">**Topic**</span></span>|
|<span data-ttu-id="2f7fe-209">バッファー プール拡張を有効化および構成する</span><span class="sxs-lookup"><span data-stu-id="2f7fe-209">Enable and configure the buffer pool extension.</span></span>|[<span data-ttu-id="2f7fe-210">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-210">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="2f7fe-211">バッファー プール拡張の構成を変更する</span><span class="sxs-lookup"><span data-stu-id="2f7fe-211">Modify the buffer pool extension configuration</span></span>|[<span data-ttu-id="2f7fe-212">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-212">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)|
|<span data-ttu-id="2f7fe-213">バッファー プール拡張の構成を表示する</span><span class="sxs-lookup"><span data-stu-id="2f7fe-213">View the buffer pool extension configuration</span></span>|[<span data-ttu-id="2f7fe-214">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-214">sys.dm_os_buffer_pool_extension_configuration &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-pool-extension-configuration-transact-sql)|
|<span data-ttu-id="2f7fe-215">バッファー プール拡張を監視する</span><span class="sxs-lookup"><span data-stu-id="2f7fe-215">Monitor the buffer pool extension</span></span>|[<span data-ttu-id="2f7fe-216">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="2f7fe-216">sys.dm_os_buffer_descriptors &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-buffer-descriptors-transact-sql)<br /><br /> [<span data-ttu-id="2f7fe-217">パフォーマンス カウンター</span><span class="sxs-lookup"><span data-stu-id="2f7fe-217">Performance counters</span></span>](../../relational-databases/performance-monitor/sql-server-buffer-manager-object.md)|


