---
title: サーバー メモリの構成オプション | Microsoft Docs
ms.custom: ''
ms.date: 07/22/2020
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- Virtual Memory Manager
- max server memory option
- virtual memory [SQL Server]
- VMM
- server memory options [SQL Server]
- servers [SQL Server], memory
- buffer pools [SQL Server]
- min server memory option
- manual memory options [SQL Server]
- memory [SQL Server], servers
ms.assetid: 29ce373e-18f8-46ff-aea6-15bbb10fb9c2
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 46a4bb354b78d25c6667e9ff67c6eda697a0369e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738743"
---
# <a name="server-memory-configuration-options"></a><span data-ttu-id="d5462-102">サーバー メモリの構成オプション</span><span class="sxs-lookup"><span data-stu-id="d5462-102">Server Memory Configuration Options</span></span>
  <span data-ttu-id="d5462-103">**min server memory** および **max server memory**の 2 つのサーバー メモリ オプションを使用して、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスで使用される SQL Server プロセス用に SQL Server Memory Manager によって管理されるメモリ量を MB 単位で再構成します。</span><span class="sxs-lookup"><span data-stu-id="d5462-103">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) that is managed by the SQL Server Memory Manager for a SQL Server process used by an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
 <span data-ttu-id="d5462-104">**min server memory** の既定の設定は 0 MB で、 **max server memory** の既定の設定は 2,147,483,647 MB です。</span><span class="sxs-lookup"><span data-stu-id="d5462-104">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 MB.</span></span> <span data-ttu-id="d5462-105">既定では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は使用可能なシステム リソースに基づいて、必要なメモリを動的に変更できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-105">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="d5462-106">**max server memory** を最小値に設定すると、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のパフォーマンスが極端に悪化し、場合によっては起動できなくなります。</span><span class="sxs-lookup"><span data-stu-id="d5462-106">Setting **max server memory** to the minimum value can severely reduce [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance and even prevent it from starting.</span></span> <span data-ttu-id="d5462-107">このオプションの変更後に [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] を起動できなくなった場合は、**-f** 起動オプションを使用して起動し、**max server memory** を元の値に戻します。</span><span class="sxs-lookup"><span data-stu-id="d5462-107">If you cannot start [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] after changing this option, start it using the **-f** startup option and reset **max server memory** to its previous value.</span></span> <span data-ttu-id="d5462-108">詳細については、「 [データベース エンジン サービスのスタートアップ オプション](database-engine-service-startup-options.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-108">For more information, see [Database Engine Service Startup Options](database-engine-service-startup-options.md).</span></span>  
  
 <span data-ttu-id="d5462-109">メモリを動的に使用する場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] はシステムに定期的にクエリして、メモリの空き容量を確認します。</span><span class="sxs-lookup"><span data-stu-id="d5462-109">When [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is using memory dynamically, it queries the system periodically to determine the amount of free memory.</span></span> <span data-ttu-id="d5462-110">このようにメモリの空き容量を維持することによって、オペレーティング システム (OS) のページングが防止されます。</span><span class="sxs-lookup"><span data-stu-id="d5462-110">Maintaining this free memory prevents the operating system (OS) from paging.</span></span> <span data-ttu-id="d5462-111">空きメモリが少ない場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は OS に対してメモリを解放します。</span><span class="sxs-lookup"><span data-stu-id="d5462-111">If less memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] releases memory to the OS.</span></span> <span data-ttu-id="d5462-112">空きメモリが多い場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] はより多くのメモリを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="d5462-112">If more memory is free, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] may allocate more memory.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d5462-113">によってメモリが追加されるのは、ワークロードが高いためにメモリを増やす必要がある場合だけです。アクティブでないサーバーの仮想アドレス空間のサイズは増えません。</span><span class="sxs-lookup"><span data-stu-id="d5462-113">adds memory only when its workload requires more memory; a server at rest does not increase the size of its virtual address space.</span></span>  
  
 <span data-ttu-id="d5462-114">現在使用されているメモリを返すクエリについては、例 B を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-114">See example B for a query to return the currently used memory.</span></span> <span data-ttu-id="d5462-115">**max server memory** は、バッファー プール、コンパイル メモリ、すべてのキャッシュ、qe メモリ許可、ロック マネージャーのメモリ、および clr メモリ (基本的に [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] sys.dm_os_memory_clerks **でクラークが見つけたすべてのメモリ) を含む**メモリ割り当てを制御します。</span><span class="sxs-lookup"><span data-stu-id="d5462-115">**max server memory** controls the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocation, including the buffer pool, compile memory, all caches, qe memory grants, lock manager memory, and clr memory (essentially any memory clerk found in **sys.dm_os_memory_clerks**).</span></span> <span data-ttu-id="d5462-116">スレッド スタックのメモリ、メモリ ヒープ、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]以外のリンクされているサーバーのプロバイダー、および非 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL によって割り当てられたメモリは、最大サーバー メモリによって制御されません。</span><span class="sxs-lookup"><span data-stu-id="d5462-116">Memory for thread stacks, memory heaps, linked server providers other than [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], and any memory allocated by a non [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] DLL are not controlled by max server memory.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]<span data-ttu-id="d5462-117">では、メモリ通知 API **QueryMemoryResourceNotification**を使用して、SQL Server メモリマネージャーがいつメモリを割り当て、メモリを解放するかを判断します。</span><span class="sxs-lookup"><span data-stu-id="d5462-117">uses the memory notification API **QueryMemoryResourceNotification** to determine when the SQL Server Memory Manager may allocate memory and release memory.</span></span>  
  
 <span data-ttu-id="d5462-118">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がメモリを動的に使用できるようにする方法をお勧めしますが、手動でメモリ オプションを設定して [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] がアクセスできるメモリの量を制限することもできます。</span><span class="sxs-lookup"><span data-stu-id="d5462-118">Allowing [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use memory dynamically is recommended; however, you can set the memory options manually and restrict the amount of memory that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can access.</span></span> <span data-ttu-id="d5462-119">この場合は、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]用のメモリ量を設定する前に、OS および [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の他のインスタンス (およびコンピューターが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]専用でない場合は他のシステム) が使用するメモリの量を物理メモリ全体から差し引いて適切なメモリ設定を決定します。</span><span class="sxs-lookup"><span data-stu-id="d5462-119">Before you set the amount of memory for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], determine the appropriate memory setting by subtracting, from the total physical memory, the memory required for the OS and any other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (and other system uses, if the computer is not wholly dedicated to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]).</span></span> <span data-ttu-id="d5462-120">この差が、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]に割り当てることができる最大メモリ量です。</span><span class="sxs-lookup"><span data-stu-id="d5462-120">This difference is the maximum amount of memory you can assign to [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="setting-the-memory-options-manually"></a><span data-ttu-id="d5462-121">メモリ オプションの手動設定</span><span class="sxs-lookup"><span data-stu-id="d5462-121">Setting the Memory Options Manually</span></span>  
<span data-ttu-id="d5462-122">サーバー オプションの **min server memory** と **max server memory** を設定して、メモリ範囲を与えることができます。</span><span class="sxs-lookup"><span data-stu-id="d5462-122">The server options **min server memory** and **max server memory** can be set to span a range of memory values.</span></span> <span data-ttu-id="d5462-123">この方法は、システム管理者またはデータベース管理者が同じホスト上で実行する他のアプリケーションまたは [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の他のインスタンスに必要なメモリと合わせて [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のインスタンスを構成する場合に便利です。</span><span class="sxs-lookup"><span data-stu-id="d5462-123">This method is useful for system or database administrators to configure an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] in conjunction with the memory requirements of other applications, or other instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] that run on the same host.</span></span>

> [!NOTE]
> <span data-ttu-id="d5462-124">**min server memory** および **max server memory** は拡張オプションです。</span><span class="sxs-lookup"><span data-stu-id="d5462-124">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="d5462-125">**sp_configure** システム ストアド プロシージャを使用してこれらの設定を変更するには、 **show advanced options** を 1 に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d5462-125">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="d5462-126">これらの設定は、サーバーを再起動しなくてもすぐに有効になります。</span><span class="sxs-lookup"><span data-stu-id="d5462-126">These settings take effect immediately without a server restart.</span></span>  
  
<a name="min_server_memory"></a><span data-ttu-id="d5462-127">**min_server_memory** を使用すると、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンス用に [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Memory Manager で使用できる最小メモリ量を確保できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-127">Use **min_server_memory** to guarantee a minimum amount of memory available to the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d5462-128">は、 **min server memory** で指定されたメモリ量を起動時にすぐに割り当てるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="d5462-128">will not immediately allocate the amount of memory specified in **min server memory** on startup.</span></span> <span data-ttu-id="d5462-129">ただし、クライアントの負荷によってメモリの使用量がこの値に達すると、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] min server memory **の値を小さくしない限り、** はメモリを解放できません。</span><span class="sxs-lookup"><span data-stu-id="d5462-129">However, after memory usage has reached this value due to client load, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] cannot free memory unless the value of **min server memory** is reduced.</span></span> <span data-ttu-id="d5462-130">たとえば、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の複数のインスタンスが同じホストに同時に存在するとき、インスタンスのメモリを予約する目的で、max_server_memory の代わりに min_server_memory パラメーターを設定します。</span><span class="sxs-lookup"><span data-stu-id="d5462-130">For example, when several instances of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can exist concurrently in the same host, set the min_server_memory parameter instead of max_server_memory for the purpose of reserving memory for an instance.</span></span> <span data-ttu-id="d5462-131">また、基礎をなすホストからのメモリ負荷が高いために、ゲスト [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 仮想マシン (VM) のバッファー プールから十分なパフォーマンスに必要な量を超えるメモリが割り当て解除される事態を回避するために、min_server_memory 値の設定は仮想環境で必要不可欠となります。</span><span class="sxs-lookup"><span data-stu-id="d5462-131">Also, setting a min_server_memory value is essential in a virtualized environment to ensure memory pressure from the underlying host does not attempt to deallocate memory from the buffer pool on a guest [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] virtual machine (VM) beyond what is needed for acceptable performance.</span></span>
 
> [!NOTE]  
> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d5462-132">は、**min server memory** で指定されたメモリ量を必ず割り当てるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="d5462-132">is not guaranteed to allocate the amount of memory specified in **min server memory**.</span></span> <span data-ttu-id="d5462-133">サーバーの負荷が **min server memory**で指定されたメモリ量の割り当てを必要としない場合、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] はより少ないメモリで実行します。</span><span class="sxs-lookup"><span data-stu-id="d5462-133">If the load on the server never requires allocating the amount of memory specified in **min server memory**, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] will run with less memory.</span></span>  
  
<a name="max_server_memory"></a><span data-ttu-id="d5462-134">**max_server_memory** を利用し、OS に好ましくないメモリ負荷が発生しないようにします。</span><span class="sxs-lookup"><span data-stu-id="d5462-134">Use **max_server_memory** to guarantee the OS does not experience detrimental memory pressure.</span></span> <span data-ttu-id="d5462-135">最大サーバー メモリ構成を設定するには、メモリ要件を判断する目的で、[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] の全体的使用量を観察します。</span><span class="sxs-lookup"><span data-stu-id="d5462-135">To set max server memory configuration, monitor overall consumption of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] process in order to determine memory requirements.</span></span> <span data-ttu-id="d5462-136">単一インスタンスでこのような計算をより精確に行うには:</span><span class="sxs-lookup"><span data-stu-id="d5462-136">To be more accurate with these calculations for a single instance:</span></span>
 -  <span data-ttu-id="d5462-137">OS のメモリ合計から、1GB ～ 4GB を OS 自体に予約します。</span><span class="sxs-lookup"><span data-stu-id="d5462-137">From the total OS memory, reserve 1GB-4GB to the OS itself.</span></span>
 -  <span data-ttu-id="d5462-138">次に、**max server memory** で制御されない、潜在的 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] メモリ割り当てに相当するメモリ量を差し引きます。この相当するメモリ量は、**_スタック サイズ<sup>1</sup> \* に計算した最大ワーカー スレッド<sup>2</sup> を掛けたものにスタートアップ パラメーター<sup>3</sup> の -g を足して_** 求められます (*-g* が設定されていない場合、既定で 256MB を足します)。</span><span class="sxs-lookup"><span data-stu-id="d5462-138">Then subtract the equivalent of potential [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] memory allocations outside the **max server memory** control, which is comprised of **_stack size <sup>1</sup> \* calculated max worker threads <sup>2</sup> + -g startup parameter <sup>3</sup>_** (or 256MB by default if *-g* is not set).</span></span> <span data-ttu-id="d5462-139">残ったものが単一インスタンス セットアップの max_server_memory 設定になります。</span><span class="sxs-lookup"><span data-stu-id="d5462-139">What remains should be the max_server_memory setting for a single instance setup.</span></span>
 
<span data-ttu-id="d5462-140"><sup>1</sup> アーキテクチャあたりのスレッド スタック サイズについては、「[メモリ管理アーキテクチャ ガイド](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-140"><sup>1</sup> Refer to the [Memory Management Architecture guide](https://docs.microsoft.com/sql/relational-databases/memory-management-architecture-guide#stacksizes) for information on thread stack sizes per architecture.</span></span>

<span data-ttu-id="d5462-141"><sup>2</sup> 現在のホストで関連付けられている所与の CPU 数に対して計算される既定のワーカー スレッドについては、ドキュメント ページの「[max worker threads サーバー構成オプションの構成](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-141"><sup>2</sup> Refer to the documentation page on how to [Configure the max worker threads Server Configuration Option](../../database-engine/configure-windows/configure-the-max-worker-threads-server-configuration-option.md), for information on the calculated default worker threads for a given number of affinitized CPUs in the current host.</span></span>

<span data-ttu-id="d5462-142"><sup>3</sup> スタートアップ パラメーター *-g* の詳細については、ドキュメント ページの「[データベース エンジン サービスのスタートアップ オプション](database-engine-service-startup-options.md?view=sql-server-2014)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-142"><sup>3</sup> Refer to the documentation page on [Database Engine Service Startup Options](database-engine-service-startup-options.md?view=sql-server-2014) for information on the *-g* startup parameter.</span></span> <span data-ttu-id="d5462-143">32 ビットの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] から [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]) にのみ適用できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-143">Aplicable only to 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] ([!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] through [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]).</span></span>

|<span data-ttu-id="d5462-144">OS の種類</span><span class="sxs-lookup"><span data-stu-id="d5462-144">OS Type</span></span>|<span data-ttu-id="d5462-145">**Max server memory**に許容される最小メモリ容量</span><span class="sxs-lookup"><span data-stu-id="d5462-145">Minimum Memory Amounts Allowable for **max server memory**</span></span>|  
|-------------|----------------------------------------------------------------|  
|<span data-ttu-id="d5462-146">32 ビット</span><span class="sxs-lookup"><span data-stu-id="d5462-146">32-bit</span></span>|<span data-ttu-id="d5462-147">64 MB</span><span class="sxs-lookup"><span data-stu-id="d5462-147">64 MB</span></span>|  
|<span data-ttu-id="d5462-148">64 ビット</span><span class="sxs-lookup"><span data-stu-id="d5462-148">64-bit</span></span>|<span data-ttu-id="d5462-149">128 MB</span><span class="sxs-lookup"><span data-stu-id="d5462-149">128 MB</span></span>| 

## <a name="how-to-configure-memory-options-using-sql-server-management-studio"></a><span data-ttu-id="d5462-150">SQL Server Management Studio を使用して、メモリ オプションを構成する方法</span><span class="sxs-lookup"><span data-stu-id="d5462-150">How to configure memory options using SQL Server Management Studio</span></span>  
 <span data-ttu-id="d5462-151">**min server memory** および **max server memory**の 2 つのサーバー メモリ オプションを使用して、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンス用に SQL Server Memory Manager によって管理されるメモリ量を MB 単位で再構成します。</span><span class="sxs-lookup"><span data-stu-id="d5462-151">Use the two server memory options, **min server memory** and **max server memory**, to reconfigure the amount of memory (in megabytes) managed by the SQL Server Memory Manager for an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="d5462-152">既定では、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] は使用可能なシステム リソースに基づいて、必要なメモリを動的に変更できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-152">By default, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] can change its memory requirements dynamically based on available system resources.</span></span>  
  
### <a name="procedure-for-configuring-a-fixed-amount-of-memory"></a><span data-ttu-id="d5462-153">固定量のメモリを構成する手順</span><span class="sxs-lookup"><span data-stu-id="d5462-153">Procedure for configuring a fixed amount of memory</span></span>  
 <span data-ttu-id="d5462-154">**固定量のメモリを設定するには:**</span><span class="sxs-lookup"><span data-stu-id="d5462-154">**To set a fixed amount of memory:**</span></span>  
  
1.  <span data-ttu-id="d5462-155">オブジェクト エクスプローラーで、サーバーを右クリックし、 **[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-155">In Object Explorer, right-click a server and select **Properties**.</span></span>  
  
2.  <span data-ttu-id="d5462-156">**[メモリ]** ノードをクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-156">Click the **Memory** node.</span></span>  
  
3.  <span data-ttu-id="d5462-157">**[サーバー メモリ オプション]** で、 **[最小サーバー メモリ]** と **[最大サーバー メモリ]** に必要な数値を入力します。</span><span class="sxs-lookup"><span data-stu-id="d5462-157">Under **Server Memory Options**, enter the amount that you want for **Minimum server memory** and **Maximum server memory**.</span></span>  
  
     <span data-ttu-id="d5462-158">既定の設定を使用すると、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] が使用できるシステム リソースに基づいて、そのメモリ要求を動的に変更できるようになります。</span><span class="sxs-lookup"><span data-stu-id="d5462-158">Use the default settings to allow [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to change its memory requirements dynamically based on available system resources.</span></span> <span data-ttu-id="d5462-159">**Min server memory**の既定の設定は0で、 **max server memory**の既定の設定は2147483647メガバイト (mb) です。</span><span class="sxs-lookup"><span data-stu-id="d5462-159">The default setting for **min server memory** is 0, and the default setting for **max server memory** is 2147483647 megabytes (MB).</span></span>  
  
## <a name="maximize-data-throughput-for-network-applications"></a><span data-ttu-id="d5462-160">ネットワーク アプリケーションのデータ スループットの最大化</span><span class="sxs-lookup"><span data-stu-id="d5462-160">Maximize Data Throughput for Network Applications</span></span>  
 <span data-ttu-id="d5462-161">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のシステム メモリ使用量を最適化するには、ファイルのキャッシュに使用されるメモリ量を制限する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d5462-161">To optimize system memory use for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], you should limit the amount of memory that is used by the system for file caching.</span></span> <span data-ttu-id="d5462-162">ファイル システム キャッシュを制限するには、 **[ファイル共有のデータ スループットを最大にする]** が選択されていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="d5462-162">To limit the file system cache, make sure that **Maximize data throughput for file sharing** is not selected.</span></span> <span data-ttu-id="d5462-163">最小のファイル システム キャッシュを指定するには、 **[メモリの使用を最小にする]** または **[バランスをとる]** を選択します。</span><span class="sxs-lookup"><span data-stu-id="d5462-163">You can specify the smallest file system cache by selecting **Minimize memory used** or **Balance**.</span></span>  
  
#### <a name="to-check-the-current-setting-on-your-operating-system"></a><span data-ttu-id="d5462-164">オペレーティング システムの現在の設定を確認するには</span><span class="sxs-lookup"><span data-stu-id="d5462-164">To check the current setting on your operating system</span></span>  
  
1.  <span data-ttu-id="d5462-165">**[スタート]** ボタンをクリックし、 **[コントロール パネル]** をクリックします。次に **[ネットワーク接続]** をダブルクリックして、 **[ローカル エリア接続]** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-165">Click **Start**, click **Control Panel**, double-click **Network Connections**, and then double-click **Local Area Connection**.</span></span>  
  
2.  <span data-ttu-id="d5462-166">**[全般]** タブで **[プロパティ]** をクリックし、 **[Microsoft ネットワーク用ファイルとプリンター共有]** を選択して、 **[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-166">On the **General** tab, click **Properties**, select **File and Printer Sharing Microsoft Networks**, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="d5462-167">**[ネットワーク アプリケーションのデータ スループットを最大にする]** が選択されている場合は、他のオプションを選択して **[OK]** をクリックし、すべてのダイアログ ボックスを閉じます。</span><span class="sxs-lookup"><span data-stu-id="d5462-167">If **Maximize data throughput for network applications** is selected, choose any other option, click **OK**, and then close the rest of the dialog boxes.</span></span>  
  
## <a name="lock-pages-in-memory"></a><span data-ttu-id="d5462-168">lock pages in memory</span><span class="sxs-lookup"><span data-stu-id="d5462-168">Lock Pages in Memory</span></span>  
 <span data-ttu-id="d5462-169">この Windows ポリシーにより、プロセスを使用して物理メモリにデータを保持できるアカウントを指定し、ディスク上の仮想メモリへのデータのページングを防止します。</span><span class="sxs-lookup"><span data-stu-id="d5462-169">This Windows policy determines which accounts can use a process to keep data in physical memory, preventing the system from paging the data to virtual memory on disk.</span></span> <span data-ttu-id="d5462-170">メモリ内のページをロックすると、ディスクへのメモリのページングが発生した際に、サーバーの応答性を維持できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-170">Locking pages in memory may keep the server responsive when paging memory to disk occurs.</span></span> <span data-ttu-id="d5462-171">sqlservr.exe を実行する権限を持つアカウントに Windows の "Locked Pages in Memory" (LPIM) ユーザー権利が付与されている場合、Standard edition 以降の32ビットおよび64ビットのインスタンスでは、SQL Server **Lock pages In memory**オプションが ON に設定されてい [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] ます。</span><span class="sxs-lookup"><span data-stu-id="d5462-171">The SQL Server **Lock Pages in Memory** option is set to ON in 32-bit and 64-bit instances of [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] Standard edition and higher when the account with privileges to run sqlservr.exe has been granted the Windows "Locked Pages in Memory" (LPIM) user right.</span></span> <span data-ttu-id="d5462-172">それよりも前のバージョンの SQL Server の場合、SQL Server の 32 ビット インスタンスで Lock Pages オプションを設定するには、sqlservr.exe の実行権限があるアカウントに LPIM のユーザー権利があること、さらに、'awe_enabled' 構成オプションがオンに設定されていることが必要となります。</span><span class="sxs-lookup"><span data-stu-id="d5462-172">In earlier versions of SQL Server, setting the Lock Pages option for a 32-bit instance of SQL Server, requires that the account with privileges to run sqlservr.exe have the LPIM user right and the 'awe_enabled' configuration option is set to ON.</span></span>  
  
 <span data-ttu-id="d5462-173">の**Lock Pages In memory**オプションを無効にするには、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] SQL Server 開始アカウントに対する "Locked pages in memory" ユーザー権利を削除します。</span><span class="sxs-lookup"><span data-stu-id="d5462-173">To disable the **Lock Pages In Memory** option for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], remove the "Locked Pages in Memory" user right for the SQL Server startup account.</span></span>  
  
### <a name="to-disable-lock-pages-in-memory"></a><span data-ttu-id="d5462-174">Lock Pages in Memory を無効にするには</span><span class="sxs-lookup"><span data-stu-id="d5462-174">To Disable Lock Pages in Memory</span></span>  
 <span data-ttu-id="d5462-175">**Lock pages in memory オプションを無効にするには、次のようにします。**</span><span class="sxs-lookup"><span data-stu-id="d5462-175">**To disable the lock pages in memory option:**</span></span>  
  
1.  <span data-ttu-id="d5462-176">**[スタート]** メニューの **[ファイル名を指定して実行]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-176">On the **Start** menu, click **Run**.</span></span> <span data-ttu-id="d5462-177">[**名前**] ボックスに「」と入力 `gpedit.msc` します。</span><span class="sxs-lookup"><span data-stu-id="d5462-177">In the **Open** box, type `gpedit.msc`.</span></span>  
  
     <span data-ttu-id="d5462-178">**[グループ ポリシー]** ダイアログ ボックスが開きます。</span><span class="sxs-lookup"><span data-stu-id="d5462-178">The **Group Policy** dialog box opens.</span></span>  
  
2.  <span data-ttu-id="d5462-179">**[グループ ポリシー]** コンソールで **[コンピューターの構成]** を展開し、次に **[Windows の設定]** を展開します。</span><span class="sxs-lookup"><span data-stu-id="d5462-179">On the **Group Policy** console, expand **Computer Configuration**, and then expand **Windows Settings**.</span></span>  
  
3.  <span data-ttu-id="d5462-180">**[セキュリティの設定]** を展開し、 **[ローカル ポリシー]** を展開します。</span><span class="sxs-lookup"><span data-stu-id="d5462-180">Expand **Security Settings**, and then expand **Local Policies**.</span></span>  
  
4.  <span data-ttu-id="d5462-181">**[ユーザー権利の割り当て]** フォルダーをクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-181">Select the **User Rights Assignment** folder.</span></span>  
  
     <span data-ttu-id="d5462-182">ポリシーが詳細ペインに表示されます。</span><span class="sxs-lookup"><span data-stu-id="d5462-182">The policies will be displayed in the details pane.</span></span>  
  
5.  <span data-ttu-id="d5462-183">詳細ペインで、 **[メモリ内のページのロック]** をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-183">In the pane, double-click **Lock pages in memory**.</span></span>  
  
6.  <span data-ttu-id="d5462-184">**[ローカル セキュリティ ポリシーの設定]** ダイアログ ボックスで、sqlservr.exe の実行権限のあるアカウントを選択し、 **[削除]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="d5462-184">In the **Local Security Policy Setting** dialog box, select the account with privileges to run sqlservr.exe and click **Remove**.</span></span>  
  
## <a name="virtual-memory-manager"></a><span data-ttu-id="d5462-185">仮想メモリ マネージャー</span><span class="sxs-lookup"><span data-stu-id="d5462-185">Virtual Memory Manager</span></span>  
 <span data-ttu-id="d5462-186">32 ビット オペレーティング システムでは、4 GB の仮想アドレス空間にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d5462-186">The 32-bit operating systems provide access to 4 GB of virtual address space.</span></span> <span data-ttu-id="d5462-187">仮想メモリの 2 GB はプロセスごとに専有され、アプリケーションで使用できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-187">2 GB of virtual memory is private per process and available for application use.</span></span> <span data-ttu-id="d5462-188">残りの 2 GB はオペレーティング システムが使用するために予約されています。</span><span class="sxs-lookup"><span data-stu-id="d5462-188">2 GB is reserved for operating system use.</span></span> <span data-ttu-id="d5462-189">すべてのオペレーティング システムのエディションには、オペレーティング システム用の仮想メモリを 1 GB に制限して、アプリケーションで 3 GB の仮想アドレス空間にアクセスできるようにするスイッチが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d5462-189">All operating system editions include a switch that can provide applications with access up to 3 GB of virtual address space, limiting the operating system to 1 GB.</span></span> <span data-ttu-id="d5462-190">スイッチのメモリ構成の使用方法については、4 GB チューニング (4GT) に関する Windows のマニュアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-190">For more information about how to use the switch memory configuration, see the Windows documentation about 4-gigabyte tuning (4GT).</span></span> <span data-ttu-id="d5462-191">32 ビットの [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] を 64 ビット オペレーティング システム上で実行する場合、ユーザーは 4 GB の仮想アドレス空間をすべて使用できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-191">When the 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running on 64-bit operating system its user available virtual address space is the full 4 GB.</span></span>  
  
 <span data-ttu-id="d5462-192">Windows 仮想メモリ マネージャー (VMM) は、使用可能な物理メモリにコミット済みのアドレス空間をマップします。</span><span class="sxs-lookup"><span data-stu-id="d5462-192">The committed regions of address space are mapped to the available physical memory by the Windows Virtual Memory Manager (VMM).</span></span>  
  
 <span data-ttu-id="d5462-193">さまざまなオペレーティング システムでサポートされている物理メモリ量の詳細については、Windows のマニュアルの「Windows のリリース別のメモリ制限」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-193">For more information on the amount of physical memory supported by different operating systems, see the Windows documentation "Memory Limits for Windows Releases".</span></span>  
  
 <span data-ttu-id="d5462-194">仮想メモリ システムでは、仮想メモリと物理メモリの比率が 1:1 を超えるような物理メモリの設定を許可しています。</span><span class="sxs-lookup"><span data-stu-id="d5462-194">Virtual memory systems allow the over-commitment of physical memory, so that the ratio of virtual-to-physical memory can exceed 1:1.</span></span> <span data-ttu-id="d5462-195">その結果、さまざまな物理メモリ構成のコンピューターで大規模なプログラムを実行できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-195">As a result, larger programs can run on computers with a variety of physical memory configurations.</span></span> <span data-ttu-id="d5462-196">しかし、すべてのプロセスの平均ワーキング セットを合わせた容量よりもはるかに大きな仮想メモリを使用すると、パフォーマンスが低下する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d5462-196">However, using significantly more virtual memory than the combined average working sets of all the processes can cause poor performance.</span></span>  
  
 <span data-ttu-id="d5462-197">**min server memory** および **max server memory** は拡張オプションです。</span><span class="sxs-lookup"><span data-stu-id="d5462-197">The **min server memory** and **max server memory** options are advanced options.</span></span> <span data-ttu-id="d5462-198">**sp_configure** システム ストアド プロシージャを使用してこれらの設定を変更するには、 **show advanced options** を 1 に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d5462-198">If you are using the **sp_configure** system stored procedure to change these settings, you can change them only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="d5462-199">これらの設定は、サーバーを再起動しなくてもすぐに有効になります。</span><span class="sxs-lookup"><span data-stu-id="d5462-199">These settings take effect immediately without a server restart.</span></span>  
  
## <a name="running-multiple-instances-of-sql-server"></a><span data-ttu-id="d5462-200">SQL Server の複数インスタンスの実行</span><span class="sxs-lookup"><span data-stu-id="d5462-200">Running Multiple Instances of SQL Server</span></span>  
 <span data-ttu-id="d5462-201">[!INCLUDE[ssDE](../../includes/ssde-md.md)]の複数のインスタンスを実行する場合は、3 つの方法でメモリを管理できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-201">When you are running multiple instances of the [!INCLUDE[ssDE](../../includes/ssde-md.md)], there are three approaches you can use to manage memory:</span></span>  
  
-   <span data-ttu-id="d5462-202">**max server memory** を使用して、メモリ使用量を制御します。</span><span class="sxs-lookup"><span data-stu-id="d5462-202">Use **max server memory** to control memory usage.</span></span> <span data-ttu-id="d5462-203">許可する値の合計がコンピューターの合計物理メモリを超えないように注意して、各インスタンスの最大値を設定します。</span><span class="sxs-lookup"><span data-stu-id="d5462-203">Establish maximum settings for each instance, being careful that the total allowance is not more than the total physical memory on your machine.</span></span> <span data-ttu-id="d5462-204">予測されるワークロードまたはデータベース サイズに比例して、各インスタンスにメモリを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="d5462-204">You might want to give each instance memory proportional to its expected workload or database size.</span></span> <span data-ttu-id="d5462-205">この方法の利点は、新しいプロセスまたはインスタンスが起動したときに、直ちに空きメモリを使用できることです。</span><span class="sxs-lookup"><span data-stu-id="d5462-205">This approach has the advantage that when new processes or instances start up, free memory will be available to them immediately.</span></span> <span data-ttu-id="d5462-206">欠点は、実行していないインスタンスがある場合、残っている空きメモリを実行中のインスタンスが利用できないことです。</span><span class="sxs-lookup"><span data-stu-id="d5462-206">The drawback is that if you are not running all of the instances, none of the running instances will be able to utilize the remaining free memory.</span></span>  
  
-   <span data-ttu-id="d5462-207">**min server memory** を使用して、メモリ使用量を制御します。</span><span class="sxs-lookup"><span data-stu-id="d5462-207">Use **min server memory** to control memory usage.</span></span> <span data-ttu-id="d5462-208">最小値の合計がコンピューターの合計物理メモリよりも 1 ～ 2 GB 少なくなるように、各インスタンスの最小値を設定します。</span><span class="sxs-lookup"><span data-stu-id="d5462-208">Establish minimum settings for each instance, so that the sum of these minimums is 1-2 GB less than the total physical memory on your machine.</span></span> <span data-ttu-id="d5462-209">この場合も、インスタンスの予測される負荷に比例して、最小値を設定できます。</span><span class="sxs-lookup"><span data-stu-id="d5462-209">Again, you may establish these minimums proportionately to the expected load of that instance.</span></span> <span data-ttu-id="d5462-210">この方法の利点は、一度にすべてのインスタンスを実行しない場合に、実行中のインスタンスが残っている空きメモリを使用できることです。</span><span class="sxs-lookup"><span data-stu-id="d5462-210">This approach has the advantage that if not all instances are running at the same time, the ones that are running can use the remaining free memory.</span></span> <span data-ttu-id="d5462-211">また、この方法は、コンピューターの別のプロセスがメモリを集中的に使用する場合にも有効です。少なくとも、妥当なメモリ量を [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] が使用できることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="d5462-211">This approach is also useful when there is another memory-intensive process on the computer, since it would insure that [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] would at least get a reasonable amount of memory.</span></span> <span data-ttu-id="d5462-212">欠点は、新しいインスタンス (または他のプロセス) が起動するときに、実行中のインスタンスがメモリを解放するのにしばらく時間がかかる場合があることです。特に、変更されたページをデータベースに書き戻す必要がある場合は時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="d5462-212">The drawback is that when a new instance (or any other process) starts, it may take some time for the running instances to release memory, especially if they must write modified pages back to their databases to do so.</span></span>  
  
-   <span data-ttu-id="d5462-213">何も行いません (非推奨)。</span><span class="sxs-lookup"><span data-stu-id="d5462-213">Do nothing (not recommended).</span></span> <span data-ttu-id="d5462-214">ワークロードを伴う最初のインスタンスに、すべてのメモリが割り当てられる傾向があります。</span><span class="sxs-lookup"><span data-stu-id="d5462-214">The first instances presented with a workload will tend to allocate all of memory.</span></span> <span data-ttu-id="d5462-215">アイドル状態のインスタンスまたは後から起動したインスタンスは、使用可能な最小限のメモリ量だけで実行することになります。</span><span class="sxs-lookup"><span data-stu-id="d5462-215">Idle instances, or instances started later, may end up running with only a minimal amount of memory available.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="d5462-216">は、インスタンス間でメモリ使用量の調整を図ることはありません。</span><span class="sxs-lookup"><span data-stu-id="d5462-216">makes no attempt to balance memory usage across instances.</span></span> <span data-ttu-id="d5462-217">ただし、すべてのインスタンスは、Windows の Memory Notification シグナルに対応して、メモリ使用量を調整します。</span><span class="sxs-lookup"><span data-stu-id="d5462-217">All instances will, however, respond to Windows Memory Notification signals to adjust the size of their memory footprint.</span></span> <span data-ttu-id="d5462-218">Memory Notification API を使用して Windows がアプリケーション間のメモリを調整することはありません。</span><span class="sxs-lookup"><span data-stu-id="d5462-218">Windows does not balance memory across applications with the Memory Notification API.</span></span> <span data-ttu-id="d5462-219">システムで使用できるメモリに関するグローバルなフィードバックを提供するだけです。</span><span class="sxs-lookup"><span data-stu-id="d5462-219">It merely provides global feedback as to the availability of memory on the system.</span></span>  
  
 <span data-ttu-id="d5462-220">これらの設定はインスタンスを再起動しなくても変更できるので、簡単にいろいろな設定を試して、使用パターンに最適な設定を見つけることができます。</span><span class="sxs-lookup"><span data-stu-id="d5462-220">You can change these settings without restarting the instances, so you can easily experiment to find the best settings for your usage pattern.</span></span>  
  
## <a name="providing-the-maximum-amount-of-memory-to-sql-server"></a><span data-ttu-id="d5462-221">SQL Server に対する最大メモリ容量の指定</span><span class="sxs-lookup"><span data-stu-id="d5462-221">Providing the Maximum Amount of Memory to SQL Server</span></span>  
  
||<span data-ttu-id="d5462-222">32 ビット</span><span class="sxs-lookup"><span data-stu-id="d5462-222">32-bit</span></span>|<span data-ttu-id="d5462-223">64 ビット</span><span class="sxs-lookup"><span data-stu-id="d5462-223">64-bit</span></span>|  
|-|-------------|-------------|  
|<span data-ttu-id="d5462-224">コンベンショナル メモリ</span><span class="sxs-lookup"><span data-stu-id="d5462-224">Conventional memory</span></span>|<span data-ttu-id="d5462-225">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のすべてのエディションでプロセス仮想アドレス空間制限まで:</span><span class="sxs-lookup"><span data-stu-id="d5462-225">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="d5462-226">2 GB</span><span class="sxs-lookup"><span data-stu-id="d5462-226">2 GB</span></span><br /><br /> <span data-ttu-id="d5462-227">3 GB ( **/3gb**ブートパラメーター \*)</span><span class="sxs-lookup"><span data-stu-id="d5462-227">3 GB with **/3gb** boot parameter\*</span></span><br /><br /> <span data-ttu-id="d5462-228">4 GB (WOW64)\*\*</span><span class="sxs-lookup"><span data-stu-id="d5462-228">4 GB on WOW64\*\*</span></span>|<span data-ttu-id="d5462-229">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] のすべてのエディションでプロセス仮想アドレス空間制限まで:</span><span class="sxs-lookup"><span data-stu-id="d5462-229">Up to process virtual address space limit in all [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] editions:</span></span><br /><br /> <span data-ttu-id="d5462-230">8 TB (x64 アーキテクチャの場合)</span><span class="sxs-lookup"><span data-stu-id="d5462-230">8 TB on x64 architecture</span></span>|  
  
 <span data-ttu-id="d5462-231">\***/3gb**は、オペレーティングシステムのブートパラメーターです。</span><span class="sxs-lookup"><span data-stu-id="d5462-231">\***/3gb** is an operating-system boot parameter.</span></span> <span data-ttu-id="d5462-232">詳細については、 [MSDN ライブラリ](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-232">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
 <span data-ttu-id="d5462-233">\* \* WOW64 (Windows on Windows 64) は、32ビットが [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 64 ビットオペレーティングシステムで実行されるモードです。</span><span class="sxs-lookup"><span data-stu-id="d5462-233">\*\*WOW64 (Windows on Windows 64) is a mode in which 32-bit [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] runs on a 64-bit operating system.</span></span> <span data-ttu-id="d5462-234">詳細については、 [MSDN ライブラリ](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d5462-234">For more information, visit the [MSDN Library](https://go.microsoft.com/fwlink/?LinkID=10257&clcid=0x409).</span></span>  
  
## <a name="examples"></a><span data-ttu-id="d5462-235">例</span><span class="sxs-lookup"><span data-stu-id="d5462-235">Examples</span></span>  
  
### <a name="example-a"></a><span data-ttu-id="d5462-236">例 A</span><span class="sxs-lookup"><span data-stu-id="d5462-236">Example A</span></span>  
 <span data-ttu-id="d5462-237">次の例では、 `max server memory` オプションを 4 GB に設定します。</span><span class="sxs-lookup"><span data-stu-id="d5462-237">The following example sets the `max server memory` option to 4 GB:</span></span>  
  
```  
sp_configure 'show advanced options', 1;  
GO  
RECONFIGURE;  
GO  
sp_configure 'max server memory', 4096;  
GO  
RECONFIGURE;  
GO  
```  
  
### <a name="example-b-determining-current-memory-allocation"></a><span data-ttu-id="d5462-238">例 B: 現在のメモリ割り当てを確認する</span><span class="sxs-lookup"><span data-stu-id="d5462-238">Example B. Determining Current Memory Allocation</span></span>  
 <span data-ttu-id="d5462-239">次のクエリでは、現在割り当てられているメモリに関する情報を返します。</span><span class="sxs-lookup"><span data-stu-id="d5462-239">The following query returns information about currently allocated memory.</span></span>  
  
```  
SELECT  
(physical_memory_in_use_kb/1024) AS Memory_usedby_Sqlserver_MB,  
(locked_page_allocations_kb/1024) AS Locked_pages_used_Sqlserver_MB,  
(total_virtual_address_space_kb/1024) AS Total_VAS_in_MB,  
process_physical_memory_low,  
process_virtual_memory_low  
FROM sys.dm_os_process_memory;  
```  
  
## <a name="see-also"></a><span data-ttu-id="d5462-240">参照</span><span class="sxs-lookup"><span data-stu-id="d5462-240">See Also</span></span>  
 <span data-ttu-id="d5462-241">[パフォーマンスの監視とチューニング](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span><span class="sxs-lookup"><span data-stu-id="d5462-241">[Monitor and Tune for Performance](../../relational-databases/performance/monitor-and-tune-for-performance.md) </span></span>  
 <span data-ttu-id="d5462-242">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="d5462-242">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="d5462-243">[サーバー構成オプション &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="d5462-243">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="d5462-244">sp_configure &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="d5462-244">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
